{"version":3,"file":"js/3957.256d9397.js","mappings":"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","sources":["webpack://@openeo/web-editor/./src/components/modals/ExportCodeModal.vue","webpack://@openeo/web-editor/./src/export/python.js","webpack://@openeo/web-editor/./src/export/r.js","webpack://@openeo/web-editor/src/components/modals/ExportCodeModal.vue","webpack://@openeo/web-editor/./src/components/modals/ExportCodeModal.vue?b128","webpack://@openeo/web-editor/./src/components/modals/ExportCodeModal.vue?69ec","webpack://@openeo/web-editor/./src/components/modals/Modal.vue","webpack://@openeo/web-editor/src/components/modals/Modal.vue","webpack://@openeo/web-editor/./src/components/modals/Modal.vue?7020","webpack://@openeo/web-editor/./src/components/modals/Modal.vue?5039","webpack://@openeo/web-editor/./src/export/exporter.js","webpack://@openeo/web-editor/./src/export/javascript.js","webpack://@openeo/web-editor/./node_modules/core-js/internals/delete-property-or-throw.js","webpack://@openeo/web-editor/./node_modules/core-js/modules/es.array.unshift.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"width\":\"80%\",\"title\":\"Export as Source Code\"},on:{\"closed\":function($event){return _vm.$emit('closed')}}},[_c('section',{staticClass:\"exportCode\"},[_c('h3',[_vm._v(\"Choose Programming Language\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.language),expression:\"language\"}],attrs:{\"type\":\"radio\",\"id\":\"js\",\"value\":\"JavaScript\"},domProps:{\"checked\":_vm._q(_vm.language,\"JavaScript\")},on:{\"change\":function($event){_vm.language=\"JavaScript\"}}}),_c('label',{attrs:{\"for\":\"js\"}},[_vm._v(\"JavaScript\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.language),expression:\"language\"}],attrs:{\"type\":\"radio\",\"id\":\"py\",\"value\":\"Python\"},domProps:{\"checked\":_vm._q(_vm.language,\"Python\")},on:{\"change\":function($event){_vm.language=\"Python\"}}}),_c('label',{attrs:{\"for\":\"py\"}},[_vm._v(\"Python\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.language),expression:\"language\"}],attrs:{\"type\":\"radio\",\"id\":\"r\",\"value\":\"R\"},domProps:{\"checked\":_vm._q(_vm.language,\"R\")},on:{\"change\":function($event){_vm.language=\"R\"}}}),_c('label',{attrs:{\"for\":\"r\"}},[_vm._v(\"R\")]),_c('h3',[_vm._v(\"Generated Code\")]),(_vm.error)?_c('div',{staticClass:\"message error\"},[_c('i',{staticClass:\"fas fa-exclamation-circle\"}),_c('span',[_vm._v(\" Sorry, the code generation failed due to the following reason:\"),_c('br'),_c('em',[_vm._v(_vm._s(_vm.error))])])]):[_c('div',{staticClass:\"message warning\"},[_c('i',{staticClass:\"fas fa-bullhorn\"}),_c('span',[_vm._v(\"Please note that this feature is \"),_c('strong',[_vm._v(\"experimental\")]),_vm._v(\" and there are chances that the generated code won't work. Also, the code generated is not always following best practices nor will the implementation use the most efficient way of implementing processes, which is the nature of automatic code generation.\")])]),_c('TextEditor',{ref:\"editor\",attrs:{\"id\":_vm.language,\"title\":_vm.language,\"value\":_vm.code,\"language\":_vm.language,\"editable\":false},scopedSlots:_vm._u([{key:\"file-toolbar\",fn:function(){return [_c('button',{attrs:{\"type\":\"button\",\"title\":\"Download code\"},on:{\"click\":_vm.download}},[_c('i',{staticClass:\"fas fa-download\"})])]},proxy:true}])})]],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { createOrUpdateFromFlatCoordinates } from \"ol/extent\";\nimport Utils from \"../utils\";\nimport Exporter from \"./exporter\";\n\nconst KEYWORDS = [\n\t'and', 'as', 'assert', 'break', 'class', 'continue', 'def', 'del', 'elif',\n\t'else', 'except', 'exec', 'finally', 'for', 'from', 'global', 'if', 'import',\n\t'in', 'is', 'lambda', 'not', 'or', 'pass', 'print', 'raise', 'return', 'try',\n\t'while', 'with', 'yield',\n\t// specific to this generator\n\t\"openeo\", \"connection\", \"process\", \"builder\"\n];\n\nexport default class Python extends Exporter {\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new Python(process, this.processRegistry, this.getJsonSchemaValidator());\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tgetKeywords() {\n\t\treturn KEYWORDS;\n\t}\n\n\tcomment(comment) {\n\t\tthis.addCode(comment, '# ');\n\t}\n\n\tgenerateImports() {\n\t\tthis.addCode(`import openeo`);\n\t\tthis.addCode(`from openeo.processes import process`);\n\t}\n\n\tgenerateConnection() {\n\t\tthis.addCode(`connection = openeo.connect(\"${this.getServerUrl()}\")`);\n\t}\n\n\tgenerateAuthentication() {\n\t\tthis.comment(`ToDo: Here you need to authenticate with authenticate_basic() or authenticate_oidc()`);\n\t}\n\n\tgenerateBuilder() {}\n\n\tgenerateMetadataEntry(key, value) {\n\t\tthis.comment(`${key}: ${this.e(value)}`);\n\t}\n\n\tmakeNull() {\n\t\treturn \"None\";\n\t}\n\tmakeBoolean(val) {\n\t\treturn val ? \"True\" : \"False\";\n\t}\n\n\tgetTab() {\n\t\treturn '    ';\n\t}\n\n\thasCallbackParameter(node) {\n\t\treturn Boolean(Object.values(node.arguments).find(arg => arg instanceof Python));\n\t}\n\n\tasync generateFunction(node) {\n\t\tlet variable = this.var(node.id, this.varPrefix());\n\t\tlet builderName;\n\t\tlet addProcessToArguments = true;\n\t\tlet filterDcName = null;\n\t\tif (node.getParent()) {\n\t\t\tbuilderName = 'process';\n\t\t}\n\t\telse {\n\t\t\tlet startNodes = node.getProcessGraph().getStartNodeIds();\n\t\t\tif (startNodes.includes(node.id)) {\n\t\t\t\tif (node.process_id === 'load_collection') {\n\t\t\t\t\tbuilderName = 'connection.load_collection';\n\t\t\t\t\t// Rename id to collection_id until solved: https://github.com/Open-EO/openeo-python-client/issues/223\n\t\t\t\t\tnode.arguments = Object.assign({collection_id: node.arguments.id}, Utils.omitFromObject(node.arguments, ['id']));\n\t\t\t\t\taddProcessToArguments = false;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tbuilderName = 'connection.datacube_from_process';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet prevNodes = node.getPreviousNodes();\n\t\t\t\tlet dcName = this.var(prevNodes[0].id, this.varPrefix());\n\t\t\t\t// If the process has a callback parameter, we need to call the \"native\" process\n\t\t\t\t// until https://github.com/Open-EO/openeo-python-client/issues/223 is solved\n\t\t\t\tif (this.hasCallbackParameter(node) || node.process_id === 'save_result') {\n\t\t\t\t\tbuilderName = `${dcName}.${node.process_id}`;\n\t\t\t\t\taddProcessToArguments = false;\n\t\t\t\t\t// If we call the process directly on a new data cube with dcName\n\t\t\t\t\t// we need to remove the argument that is passing this data\n\t\t\t\t\tfilterDcName = (key, value) => Utils.isObject(value) && value.from_node && this.var(value.from_node, this.varPrefix()) === dcName;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tbuilderName = `${dcName}.process`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet args = await this.generateArguments(node, false, filterDcName);\n\t\tif (node.namespace) {\n\t\t\targs.namespace = this.makeString(node.namespace);\n\t\t}\n\t\targs = Utils.mapObject(args, (value, name) => `${name} = ${this.e(value)}`);\n\t\tif (addProcessToArguments) {\n\t\t\targs.unshift(this.makeString(node.process_id));\n\t\t}\n\t\t\n\t\tthis.comment(node.description);\n\t\tthis.addCode(`${variable} = ${builderName}(${args.join(', ')})`);\n\t}\n\n\tgenerateMissingParameter(parameter) {\n\t\tthis.comment(parameter.description);\n\t\tlet paramName = this.var(parameter.name, 'param');\n\t\tlet value = typeof parameter.default !== 'undefined' ? parameter.default : null;\n\t\tthis.addCode(`${paramName} = ${this.e(value)}`);\n\t}\n\n\tasync generateCallback(callback, parameters, variable) {\n\t\tlet params = this.generateFunctionParams(parameters);\n\t\tif (params.length === 0) {\n\t\t\tparams.push('builder');\n\t\t}\n\t\tthis.newLine();\n\t\tthis.addCode(`def ${variable}(${params.join(', ')}):`);\n\t\tthis.addCode(await callback.toCode(true), '', 1);\n\t\tthis.newLine();\n\t}\n\n\tgenerateResult(resultNode, callback) {\n\t\tif (!resultNode) {\n\t\t\treturn;\n\t\t}\n\t\tlet variable = this.var(resultNode.id, this.varPrefix());\n\t\tif (callback) {\n\t\t\tthis.addCode(`return ${variable}`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`result = connection.execute(${variable})`);\n\t\t}\n\t}\n\n}","import Utils from \"../utils\";\nimport Exporter from \"./exporter\";\n\nconst KEYWORDS = [\n\t\"if\", \"else\", \"repeat\", \"while\", \"function\", \"for\", \"in\", \"next\", \"break\",\n\t\"true\", \"false\", \"null\", \"inf\", \"nan\", \"na\", \"na_integer_\", \"na_real_\", \"na_complex_\", \"na_character_\",\n\t// specific to this generator\n\t\"openeo\", \"connect\", \"connection\", \"datacube\", \"p\", \"compute_result\"\n];\n\nexport default class R extends Exporter {\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new R(process, this.processRegistry, this.getJsonSchemaValidator());\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tgetKeywords() {\n\t\treturn KEYWORDS;\n\t}\n\n\tmakeNull() {\n\t\treturn \"NULL\";\n\t}\n\tmakeBoolean(val) {\n\t\treturn val ? \"TRUE\" : \"FALSE\";\n\t}\n\tmakeArray(arr) {\n\t\treturn `list(${arr.join(', ')})`;\n\t}\n\tmakeObject(obj) {\n\t\tlet arr = Utils.mapObject(obj, (val, key) => `${this.makeString(key)} = ${val}`);\n\t\treturn `list(${arr.join(', ')})`;\n\t}\n\n\tcomment(comment) {\n\t\tthis.addCode(comment, '# ');\n\t}\n\n\tgenerateImports() {\n\t\tthis.addCode(`library(openeo)`);\n\t}\n\n\tgenerateConnection() {\n\t\tthis.addCode(`connection = connect(host = \"${this.getServerUrl()}\")`);\n\t}\n\n\tgenerateAuthentication() {\n\t\tthis.comment(`ToDo: Authentication with login()`);\n\t}\n\n\tgenerateBuilder() {\n\t\tthis.addCode(`p = processes()`);\n\t}\n\n\tgenerateMetadataEntry(key, value) {\n\t\tthis.comment(`${key}: ${this.e(value)}`);\n\t}\n\n\tasync generateFunction(node) {\n\t\tlet variable = this.var(node.id, this.varPrefix());\n\t\tlet args = await this.generateArguments(node);\n\t\t// ToDo: This doesn't seem to be supported in R yet\n\t\tif (node.namespace) {\n\t\t\targs.namespace = this.e(args.namespace);\n\t\t}\n\t\targs = Utils.mapObject(args, (value, name) => `${name} = ${this.e(value)}`);\n\n\t\tthis.comment(node.description);\n\t\tthis.addCode(`${variable} = p$${node.process_id}(${args.join(', ')})`);\n\t}\n\n\tgenerateMissingParameter(parameter) {\n\t\tthis.comment(parameter.description);\n\t\tlet paramName = this.var(parameter.name, 'param');\n\t\tlet value = typeof parameter.default !== 'undefined' ? parameter.default : null;\n\t\tthis.addCode(`${paramName} = ${this.e(value)}`);\n\t}\n\n\tasync generateCallback(callback, parameters, variable) {\n\t\tlet isMathFormula = false;\n\t\tif (isMathFormula) {\n\t\t\t// ToDo: Use Formula class, use ExpressionModal code\n\t\t}\n\t\telse {\n\t\t\tlet params = this.generateFunctionParams(parameters);\n\t\t\tthis.newLine();\n\t\t\tthis.addCode(`${variable} = function(${params.join(', ')}) {`);\n\t\t\tthis.addCode(await callback.toCode(true), '', 1);\n\t\t\tthis.addCode(`}`);\n\t\t}\n\t}\n\n\tgenerateResult(resultNode, callback) {\n\t\tif (!resultNode) {\n\t\t\treturn;\n\t\t}\n\t\tlet variable = this.var(resultNode.id, this.varPrefix());\n\t\tif (callback) {\n\t\t\tthis.addCode(`return(${variable})`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`result = compute_result(graph = ${variable})`);\n\t\t}\n\t}\n\n}","<template>\n\t<Modal width=\"80%\" title=\"Export as Source Code\" @closed=\"$emit('closed')\">\n\t\t<section class=\"exportCode\">\n\t\t\t<h3>Choose Programming Language</h3>\n\t\t\t<input type=\"radio\" v-model=\"language\" id=\"js\" value=\"JavaScript\" /><label for=\"js\">JavaScript</label>\n\t\t\t<input type=\"radio\" v-model=\"language\" id=\"py\" value=\"Python\" /><label for=\"py\">Python</label>\n\t\t\t<input type=\"radio\" v-model=\"language\" id=\"r\" value=\"R\" /><label for=\"r\">R</label>\n\t\t\t<h3>Generated Code</h3>\n\t\t\t<div v-if=\"error\" class=\"message error\">\n\t\t\t\t<i class=\"fas fa-exclamation-circle\"></i>\n\t\t\t\t<span>\n\t\t\t\t\tSorry, the code generation failed due to the following reason:<br />\n\t\t\t\t\t<em>{{ error }}</em>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"message warning\">\n\t\t\t\t\t<i class=\"fas fa-bullhorn\"></i>\n\t\t\t\t\t<span>Please note that this feature is <strong>experimental</strong> and there are chances that the generated code won't work. Also, the code generated is not always following best practices nor will the implementation use the most efficient way of implementing processes, which is the nature of automatic code generation.</span>\n\t\t\t\t</div>\n\t\t\t\t<TextEditor :id=\"language\" :title=\"language\" :value=\"code\" :language=\"language\" :editable=\"false\" ref=\"editor\">\n\t\t\t\t\t<template #file-toolbar>\n\t\t\t\t\t\t<button type=\"button\" @click=\"download\" title=\"Download code\"><i class=\"fas fa-download\"></i></button>\n\t\t\t\t\t</template>\n\t\t\t\t</TextEditor>\n\t\t\t</template>\n\t\t</section>\n\t</Modal>\n</template>\n\n<script>\nimport { OpenEO } from '@openeo/js-client';\nimport TextEditor from '../TextEditor.vue';\nimport Modal from './Modal.vue';\nimport Utils from '../../utils';\nimport JavaScript from '../../export/javascript';\nimport Python from '../../export/python';\nimport R from '../../export/r';\n\nexport default {\n\tname: 'ExportCodeModal',\n\tcomponents: {\n\t\tModal,\n\t\tTextEditor\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tlanguage: 'JavaScript',\n\t\t\tcode: '',\n\t\t\terror: null\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection']),\n\t\t...Utils.mapState('editor', ['process']),\n\t\t...Utils.mapGetters(['processes', 'supportsMath']),\n\t},\n\twatch: {\n\t\tlanguage: {\n\t\t\timmediate: true,\n\t\t\tasync handler() {\n\t\t\t\ttry {\n\t\t\t\t\tlet exporter;\n\t\t\t\t\tif (this.language === 'JavaScript') {\n\t\t\t\t\t\texporter = new JavaScript(this.process, this.processes, this.connection, this.supportsMath);\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.language === 'Python') {\n\t\t\t\t\t\texporter = new Python(this.process, this.processes, this.connection);\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.language === 'R') {\n\t\t\t\t\t\texporter = new R(this.process, this.processes, this.connection);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthrow new Error('Unsupported programming language selected');\n\t\t\t\t\t}\n\t\t\t\t\tthis.code = exporter ? await exporter.toCode() : '';\n\t\t\t\t\tthis.error = null;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.code = '';\n\t\t\t\t\tthis.error = error instanceof Error ? error.message : error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tdownload() {\n\t\t\tlet filename;\n\t\t\tif (this.language === 'JavaScript') {\n\t\t\t\tfilename = 'code.js';\n\t\t\t}\n\t\t\telse if (this.language === 'Python') {\n\t\t\t\tfilename = 'code.py';\n\t\t\t}\n\t\t\telse if (this.language === 'R') {\n\t\t\t\tfilename = 'code.r';\n\t\t\t}\n\t\t\tOpenEO.Environment.saveToFile(this.code, filename);\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.exportCode {\n\tlabel {\n\t\tmargin-right: 1em;\n\t}\n\th3:first-of-type {\n\t\tmargin-top: 0;\n\t}\n\th3:last-of-type {\n\t\tmargin-top: 2em;\n\t}\n\t.textEditor {\n\t\theight: 50vh;\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportCodeModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportCodeModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExportCodeModal.vue?vue&type=template&id=10d6dfdf&\"\nimport script from \"./ExportCodeModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ExportCodeModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExportCodeModal.vue?vue&type=style&index=0&id=10d6dfdf&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal\",style:({'z-index': _vm.zIndex}),on:{\"mousedown\":_vm.backgroundClose}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",style:(_vm.style)},[_c('header',{staticClass:\"modal-header\",on:{\"mousedown\":_vm.startMove}},[_vm._t(\"header\",function(){return [_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('span',{staticClass:\"close\",on:{\"click\":_vm.close}},[_c('i',{staticClass:\"fa fa-times\",attrs:{\"aria-hidden\":\"true\"}})])]})],2),_c('main',{staticClass:\"modal-content\"},[_vm._t(\"default\")],2),_c('footer',{staticClass:\"modal-footer\"},[_vm._t(\"footer\")],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"modal\" @mousedown=\"backgroundClose\" :style=\"{'z-index': zIndex}\">\n\t\t<div ref=\"container\" class=\"modal-container\" :style=\"style\">\n\t\t\t<header class=\"modal-header\" @mousedown=\"startMove\">\n\t\t\t\t<slot name=\"header\">\n\t\t\t\t\t<h2>{{ title }}</h2>\n\t\t\t\t\t<span class=\"close\" @click=\"close\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></span>\n\t\t\t\t</slot>\n\t\t\t</header>\n\t\t\t<main class=\"modal-content\">\n\t\t\t\t<slot></slot>\n\t\t\t</main>\n\t\t\t<footer class=\"modal-footer\">\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</footer>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from '../EventBusMixin.js';\nimport Utils from '../../utils.js';\n\nexport default {\n\tname: 'Modal',\n\tmixins: [EventBusMixin],\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\tminWidth: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\twidth: {\n\t\t\ttype: String,\n\t\t\tdefault: \"auto\"\n\t\t},\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tzIndex: 1000,\n\t\t\tposition: null,\n\t\t\tdragPosition: null\n\t\t};\n\t},\n    computed: {\n\t\t...Utils.mapState('editor', ['hightestModalZIndex']),\n\t\tstyle() {\n\t\t\tlet style = {\n\t\t\t\t'width': this.width\n\t\t\t};\n\t\t\tif (this.minWidth) {\n\t\t\t\tstyle['min-width'] = this.minWidth;\n\t\t\t}\n\t\t\tif (Array.isArray(this.position)) {\n\t\t\t\tstyle.position = 'absolute';\n\t\t\t\tstyle.left = this.position[0] + 'px';\n\t\t\t\tstyle.top = this.position[1] + 'px';\n\t\t\t}\n\t\t\treturn style;\n\t\t}\n    },\n\twatch: {\n\t\tshow: {\n\t\t\timmediate: true,\n\t\t\thandler(show) {\n\t\t\t\tif (!show) {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.open();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['openModal', 'closeModal']),\n\t\topen() {\n\t\t\tthis.openModal();\n\t\t\tthis.zIndex = this.hightestModalZIndex;\n\t\t\twindow.addEventListener('keydown', this.escCloseListener);\n\t\t\tthis.$emit('shown');\n\t\t},\n\t\tclose() {\n\t\t\twindow.removeEventListener('keydown', this.escCloseListener);\n\t\t\tthis.closeModal();\n\t\t\tthis.$emit('closed');\n\t\t},\n\t\tstartMove(event) {\n\t\t\tif (event.target.tagName !== 'H2') {\n\t\t\t\tthis.dragPosition = [\n\t\t\t\t\tevent.clientX,\n\t\t\t\t\tevent.clientY\n\t\t\t\t];\n\n\t\t\t\tdocument.addEventListener('mousemove', this.move);\n\t\t\t\tdocument.addEventListener('mouseup', this.stopMove);\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tstopMove() {\n\t\t\tdocument.removeEventListener('mousemove', this.move);\n\t\t\tdocument.removeEventListener('mouseup', this.stopMove);\n\t\t},\n\t\tmove(event) {\n      \t\tevent.preventDefault();\n\t\t\t// set the element's new position\n\t\t\tthis.position = [\n\t\t\t\tthis.$refs.container.offsetLeft - (this.dragPosition[0] - event.clientX),\n\t\t\t\tthis.$refs.container.offsetTop - (this.dragPosition[1] - event.clientY)\n\t\t\t];\n\t\t\t// Store for later\n\t\t\tthis.dragPosition = [\n\t\t\t\tevent.clientX,\n\t\t\t\tevent.clientY\n\t\t\t];\n\t\t},\n\t\tescCloseListener(event) {\n\t\t\tif (event.key == \"Escape\") { \n\t\t\t\tthis.close();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tbackgroundClose(event) {\n\t\t\tif (event.target === this.$el) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\">\n@import '../../../theme.scss';\n\n.modal {\n    position: fixed;\n    z-index: 1000; /* Snotify has 9999 and is intentionally above the modals */\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0.4);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.modal .modal-container {\n    background-color: #fff;\n    border: 1px solid #fff;\n\tmin-height: 50vh;\n\tmin-width: 300px;\n\twidth: 70%;\n\tmax-height: 96%;\n\tmax-width: 96%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbox-shadow: 8px 8px 8px 0px rgba(0,0,0,0.3);\n\tresize: both;\n\toverflow: hidden;\n}\n\n.modal .modal-header {\n\tbackground-color: $mainColor;\n\tcolor: white;\n\tmargin: 0;\n\theight: 1.5rem;\n\tpadding: 1rem;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n    cursor: move;\n}\n\n.modal .modal-header h2 {\n\tdisplay: inline-block;\n\tmargin: 0;\n\tmargin-left: -0.5rem;\n\tpadding: 0.5rem;\n\tfont-size: 1.5rem;\n\tborder: 0;\n\tcursor: text;\n\ttext-overflow: ellipsis;\n    overflow: hidden;\n}\n\n.modal .modal-content {\n    padding: 1rem;\n\toverflow: auto;\n\tflex-grow: 1;\n}\n\n.modal .inline .modal-content {\n\tpadding: 0;\n}\n\n.modal .modal-footer:empty {\n\tdisplay: none;\n}\n\n.modal .modal-footer {\n\tbackground-color: #eee;\n\tmargin: 0;\n\tpadding: 1rem;\n}\n\n.modal .close {\n\tfont-size: 1.5rem;\n\theight: 2rem;\n\twidth: 2rem;\n    color: white;\n    cursor: pointer;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.modal .close:hover, .modal .close:focus {\n    color: red;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Modal.vue?vue&type=template&id=51baf473&\"\nimport script from \"./Modal.vue?vue&type=script&lang=js&\"\nexport * from \"./Modal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Modal.vue?vue&type=style&index=0&id=51baf473&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { BaseProcess, ProcessGraph } from '@openeo/js-processgraphs';\nimport Utils from \"../utils\";\n\nclass ProcessImpl extends BaseProcess {\n\tconstructor(process, exporter) {\n\t\tsuper(process);\n\t\tthis.exporter = exporter;\n\t}\n\tasync execute(node) {\n\t\tawait this.exporter.generateFunction(node);\n\t}\n}\n\nexport default class Exporter extends ProcessGraph {\n\n\tconstructor(process, registry, connection) {\n\t\tsuper(Utils.isObject(process) ? process : {}, registry);\n\t\tthis.connection = connection;\n\t\tthis.code = [];\n\t\tthis.fnCounter = 1;\n\t\tthis.allowEmpty();\n\t\tthis.fillUndefinedParameters();\n\t}\n\n\t// inherited from ProcessGraph\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new Exporter(process, this.processRegistry, this.getJsonSchemaValidator());\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tcopyProcessGraphInstanceProperties(pg) {\n\t\tpg = super.copyProcessGraphInstanceProperties(pg);\n\t\tpg.connection = this.connection;\n\t\treturn pg;\n\t}\n\n\tcreateProcessInstance(process) {\n\t\treturn new ProcessImpl(process, this);\n\t}\n\n\tisKeyword(keyword) {\n\t\treturn this.getKeywords().includes(keyword.toLowerCase());\n\t}\n\n\t// Methods to be implemented by sub-class\n\n\tgetKeywords() {\n\t\treturn [];\n\t}\n\n\tcomment(/*comment*/) {}\n\n\tgenerateImports() {}\n\n\tgenerateConnection() {}\n\n\tgenerateAuthentication() {}\n\n\tgenerateBuilder() {}\n\n\tgenerateMetadata(/*key, value*/) {}\n\n\tgenerateMissingParameter() {}\n\n\tasync generateFunction(/*node*/) {}\n\n\tgenerateFunctionParams(parameters) {\n\t\treturn parameters.map(p => {\n\t\t\tif (typeof p.default !== 'undefined') {\n\t\t\t\treturn `${p.name} = ${this.e(p.default)}`;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn p.name;\n\t\t\t}\n\t\t});\n\t}\n\n\tasync generateCallback(/*callback, parameters, variable*/) {}\n\n\tgenerateResult(/*resultNode, callback*/) {}\n\n\tmakeNull() {\n\t\treturn \"null\";\n\t}\n\tmakeBoolean(val) {\n\t\treturn val ? \"true\" : \"false\";\n\t}\n\tmakeArray(arr) {\n\t\treturn `[${arr.join(', ')}]`;\n\t}\n\tmakeObject(obj) {\n\t\tlet arr = Utils.mapObject(obj, (val, key) => `${this.makeString(key)}: ${val}`);\n\t\treturn `{${arr.join(', ')}}`;\n\t}\n\tmakeString(str) {\n\t\treturn JSON.stringify(str);\n\t}\n\tmakeNumber(num) {\n\t\treturn num;\n\t}\n\n\t// Helpers\n\n\te(value) {\n\t\tif (value === null) {\n\t\t\treturn this.makeNull();\n\t\t}\n\t\telse if (typeof value === 'boolean') {\n\t\t\treturn this.makeBoolean(value);\n\t\t}\n\t\telse if (typeof value === 'number') {\n\t\t\treturn this.makeNumber(value);\n\t\t}\n\t\telse if (typeof value === 'string') {\n\t\t\treturn this.makeString(value);\n\t\t}\n\t\telse if (Array.isArray(value)) {\n\t\t\treturn this.makeArray(value.map(val => this.e(val)));\n\t\t}\n\t\telse if (Utils.isObject(value)) {\n\t\t\treturn this.makeObject(Utils.mapObjectValues(value, val => this.e(val)));\n\t\t}\n\t\telse if (typeof value === 'function') {\n\t\t\treturn value();\n\t\t}\n\t\telse {\n\t\t\treturn this.makeNull();\n\t\t}\n\t}\n\n\tgenerateMetadata() {\n\t\tlet hasComment = false;\n\t\tfor(let key in this.process) {\n\t\t\tif (key === 'process_graph') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet val = this.process[key];\n\t\t\tif (Array.isArray(val) && val.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if (typeof val === 'string' && val.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if (typeof val === 'boolean' && !val) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!hasComment) {\n\t\t\t\tthis.newLine();\n\t\t\t\tthis.comment(`Set the metadata for the process`);\n\t\t\t\thasComment = true;\n\t\t\t}\n\t\t\tthis.generateMetadataEntry(key, val);\n\t\t}\n\t}\n\n\tasync resolveArguments(args, onExporter, filter) {\n\t\tlet newArgs = Array.isArray(args) ? [] : {};\n\t\tfor(let key in args) {\n\t\t\tlet value = args[key];\n\t\t\tif (filter && filter(key, value)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (Utils.isObject(value)) {\n\t\t\t\tif (value.from_node) {\n\t\t\t\t\tnewArgs[key] = () => this.var(value.from_node, this.varPrefix());\n\t\t\t\t\tcontinue; \n\t\t\t\t}\n\t\t\t\telse if (value.from_parameter) {\n\t\t\t\t\tnewArgs[key] = () => this.var(value.from_parameter);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\telse if (value instanceof Exporter) {\n\t\t\t\t\tlet fnName = await onExporter(key);\n\t\t\t\t\tnewArgs[key] = () => fnName;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewArgs[key] = await this.resolveArguments(value, onExporter, filter);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (Array.isArray(value)) {\n\t\t\t\tnewArgs[key] = await this.resolveArguments(value, onExporter, filter);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnewArgs[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn newArgs;\n\t}\n\n\tasync resolveCallback(node, key) {\n\t\tlet callback;\n\t\tif (node.process_id === 'load_collection') {\n\t\t\tlet properties = node.getArgument('properties');\n\t\t\tcallback = properties[key];\n\t\t}\n\t\telse {\n\t\t\tcallback = node.getArgument(key);\n\t\t}\n\t\tlet parameters = callback.getCallbackParameters();\n\t\tawait callback.execute(parameters);\n\t\tlet fnName = this.var(`${key}${this.fnCounter++}`, 'fn_');\n\t\tlet replacement = await this.generateCallback(callback, parameters, fnName);\n\t\treturn replacement ? replacement : fnName;\n\t}\n\n\tasync generateArguments(node, ordered = false, filter = null) {\n\t\tlet args = await this.resolveArguments(node.arguments, async key => await this.resolveCallback(node, key), filter);\n\t\tif (ordered) {\n\t\t\targs = this.orderArguments(node, args);\n\t\t}\n\t\treturn args;\n\t}\n\n\torderArguments(node, args) {\n\t\tlet process = node.getProcessGraph().getProcess(node);\n\t\tif (process && Array.isArray(process.parameters)) {\n\t\t\tlet orderedArgs = process.parameters.map(param => {\n\t\t\t\tif (typeof args[param.name] !== 'undefined') {\n\t\t\t\t\treturn args[param.name];\n\t\t\t\t}\n\t\t\t\telse if (!param.optional) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet definedValueFound = false;\n\t\t\tfor(let i = orderedArgs.length-1; i >= 0; i--) {\n\t\t\t\tif (typeof orderedArgs[i] === 'undefined') {\n\t\t\t\t\tif (definedValueFound) {\n\t\t\t\t\t\torderedArgs[i] = null;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\torderedArgs.pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdefinedValueFound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn orderedArgs;\n\t\t}\n\t}\n\n\tvarPrefix() {\n\t\tif (!this.getParent()) {\n\t\t\treturn 'datacube';\n\t\t}\n\t\telse {\n\t\t\treturn 'data';\n\t\t}\n\t}\n\n\tvar(id, prefix = \"var\") {\n\t\tid = String(id);\n\t\tif (this.isKeyword(id)) {\n\t\t\treturn `${id}_`;\n\t\t}\n\t\tif (!id.match(/^[a-z_]\\w*$/)) {\n\t\t\treturn prefix + id.replace(/[^\\w]+/g, '_');\n\t\t}\n\t\telse {\n\t\t\treturn id;\n\t\t}\n\t}\n\n\tgetTab() {\n\t\treturn `\\t`;\n\t}\n\n\taddCode(code, prefix = '', level = 0) {\n\t\tif (typeof code !== 'string') {\n\t\t\treturn;\n\t\t}\n\t\tlet tabs = this.getTab().repeat(level);\n\t\tlet lines = code.trim().split(/\\r\\n|\\r|\\n/g);\n\t\tfor(let line of lines) {\n\t\t\tthis.code.push(`${tabs}${prefix}${line}\\n`);\n\t\t}\n\t}\n\n\tnewLine(count = 1) {\n\t\tfor(let i = 0; i < count; i++) {\n\t\t\tthis.addCode('');\n\t\t}\n\t}\n\n\tgetServerUrl() {\n\t\treturn this.connection.getUrl();\n\t}\n\n\tasync toCode(callback = false) {\n\t\tthis.code = [];\n\t\tif (!callback) {\n\t\t\tthis.comment(`Import required packages`);\n\t\t\tthis.generateImports();\n\t\t\tthis.newLine();\n\t\t\tthis.comment(`Connect to the back-end`);\n\t\t\tthis.generateConnection();\n\t\t\tthis.generateAuthentication();\n\t\t\tthis.newLine();\n\t\t\tthis.generateBuilder();\n\t\t\tthis.generateMetadata();\n\t\t\tthis.newLine();\n\t\t}\n\t\tlet params = this.getProcessParameters();\n\t\tif (params.length > 0) {\n\t\t\tthis.comment('ToDo: Here you need to set values for the parameters');\n\t\t\tfor(let param of params) {\n\t\t\t\tthis.generateMissingParameter(param);\n\t\t\t}\n\t\t\tthis.newLine();\n\t\t}\n\t\tawait this.execute();\n\t\tif (!callback) {\n\t\t\tthis.newLine();\n\t\t\tthis.comment(`The process can be executed synchronously (see below), as batch job or as web service now`);\n\t\t}\n\t\tthis.generateResult(this.getResultNode(), callback);\n\t\treturn this.code.join('').trim();\n\t}\n\n\tasync execute() {\n\t\tawait this.validate();\n\t\tthis.reset();\n\t\tawait this.executeNodes(this.getStartNodes());\n\t\treturn this.getResultNode();\n\t}\n\n\tisMath() {\n\t\tif (typeof this._isMath === 'undefined') {\n\t\t\t// Determine whether the process is just math\n\t\t\tthis._isMath = this.processRegistry.isMath(this);\n\t\t}\n\t\treturn this._isMath;\n\t}\n\n}","import Utils from \"../utils\";\nimport Exporter from \"./exporter\";\nimport { Formula } from '@openeo/js-client';\n\nconst KEYWORDS = [\n\t\"abstract\",\n\t\"arguments\",\n\t\"await\",\n\t\"boolean\",\n\t\"break\",\n\t\"byte\",\n\t\"case\",\n\t\"catch\",\n\t\"char\",\n\t\"class\",\n\t\"const\",\n\t\"continue\",\n\t\"debugger\",\n\t\"default\",\n\t\"delete\",\n\t\"do\",\n\t\"double\",\n\t\"else\",\n\t\"enum\",\n\t\"eval\",\n\t\"export\",\n\t\"extends\",\n\t\"false\",\n\t\"final\",\n\t\"finally\",\n\t\"float\",\n\t\"for\",\n\t\"function\",\n\t\"goto\",\n\t\"if\",\n\t\"implements\",\n\t\"import\",\n\t\"in\",\n\t\"instanceof\",\n\t\"int\",\n\t\"interface\",\n\t\"let\",\n\t\"long\",\n\t\"native\",\n\t\"new\",\n\t\"null\",\n\t\"package\",\n\t\"private\",\n\t\"protected\",\n\t\"public\",\n\t\"return\",\n\t\"short\",\n\t\"static\",\n\t\"super\",\n\t\"switch\",\n\t\"synchronized\",\n\t\"this\",\n\t\"throw\",\n\t\"throws\",\n\t\"transient\",\n\t\"true\",\n\t\"try\",\n\t\"typeof\",\n\t\"var\",\n\t\"void\",\n\t\"volatile\",\n\t\"while\",\n\t\"with\",\n\t\"yield\",\n\t// specific to this generator\n\t\"builder\",\n\t\"connection\",\n\t\"formula\",\n\t\"openeo\",\n\t\"result\"\n];\n\nexport default class JavaScript extends Exporter {\n\n\tconstructor(process, registry, connection, generateFormula = false) {\n\t\tsuper(process, registry, connection);\n\t\tthis.generateFormula = generateFormula;\n\t}\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new JavaScript(process, this.processRegistry, this.getJsonSchemaValidator(), this.generateFormula);\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tparse() {\n\t\tif (this.parsed) {\n\t\t\treturn;\n\t\t}\n\t\tsuper.parse();\n\t}\n\n\tgetKeywords() {\n\t\treturn KEYWORDS;\n\t}\n\n\tcomment(comment) {\n\t\tthis.addCode(comment, '// ');\n\t}\n\n\tgenerateImports() {\n\t\tthis.addCode(`import { OpenEO, Formula } from '@openeo/js-client';`);\n\t}\n\n\tgenerateConnection() {\n\t\tthis.addCode(`let connection = await OpenEO.connect('${this.getServerUrl()}');`);\n\t}\n\n\tgenerateAuthentication() {\n\t\tthis.comment(`ToDo: Here you need to add your authentication steps`);\n\t}\n\n\tgenerateBuilder() {\n\t\tthis.addCode(`let builder = await connection.buildProcess();`);\n\t}\n\n\tgenerateMetadataEntry(key, value) {\n\t\tthis.addCode(`builder.${key} = ${this.e(value)};`);\n\t}\n\n\tasync generateFunction(node) {\n\t\tlet builderName = node.getParent() ? 'this' : 'builder';\n\t\tlet variable = this.var(node.id, this.varPrefix());\n\t\tlet args = await this.generateArguments(node, !node.namespace);\n\n\t\tthis.comment(node.description);\n\t\tif (Utils.isObject(args)) {\n\t\t\tlet processId = node.namespace ? `${node.process_id}@${node.namespace}` : node.process_id;\n\t\t\tthis.addCode(`let ${variable} = ${builderName}.process(\"${processId}\", ${this.e(args)});`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`let ${variable} = ${builderName}.${node.process_id}(${args.map(arg => this.e(arg)).join(', ')});`);\n\t\t}\n\t}\n\n\tgenerateMissingParameter(parameter) {\n\t\tthis.comment(parameter.description);\n\t\tlet paramName = this.var(parameter.name, 'param');\n\t\tlet value = typeof parameter.default !== 'undefined' ? parameter.default : null;\n\t\tthis.addCode(`let ${paramName} = ${this.e(value)};`);\n\t}\n\n\tasync generateCallback(callback, parameters, variable) {\n\t\tif (this.generateFormula && callback && callback.isMath()) {\n\t\t\tlet formula = callback.toFormulaString();\n\t\t\tlet escaped = JSON.stringify(formula);\n\t\t\treturn `new Formula(${escaped})`;\n\t\t}\n\t\telse {\n\t\t\tlet params = this.generateFunctionParams(parameters);\n\t\t\tthis.newLine();\n\t\t\tthis.addCode(`let ${variable} = function(${params.join(', ')}) {`);\n\t\t\tthis.addCode(await callback.toCode(true), '', 1);\n\t\t\tthis.addCode(`}`);\n\t\t}\n\t}\n\n\tgenerateResult(resultNode, callback) {\n\t\tif (!resultNode) {\n\t\t\treturn;\n\t\t}\n\t\tlet variable = this.var(resultNode.id, this.varPrefix());\n\t\tif (callback) {\n\t\t\tthis.addCode(`return ${variable};`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`let result = await connection.computeResult(${variable});`);\n\t\t}\n\t}\n\n\ttoFormulaString() {\n\t\tif (this.isMath()) {\n\t\t\treturn this.nodeToFormula(this.getResultNode());\n\t\t}\n\t\telse {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetArrayElementPlaceholder(node) {\n\t\tif (node.process_id === 'array_element') {\n\t\t\tif (node.getArgumentType('data') === 'parameter') {\n\t\t\t\tlet parameter = node.getRawArgument('data').from_parameter;\n\t\t\t\tlet index = this.getCallbackParameters().findIndex(param => param.name === parameter);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\treturn '$'.repeat(index+1) + (node.getArgument('label') || node.getArgument('index'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tnodeToFormula(node, parentOperator = null) {\n\t\tif (node.process_id === 'array_element') {\n\t\t\tlet arrayElement = this.getArrayElementPlaceholder(node);\n\t\t\tif (arrayElement) {\n\t\t\t\treturn arrayElement;\n\t\t\t}\n\t\t}\n\n\t\tlet operator = Formula.reverseOperatorMapping[node.process_id];\n\t\tlet process = this.processRegistry.get(node.process_id);\n\t\tlet isArrayData = (typeof Formula.arrayOperatorMapping[node.process_id] !== 'undefined');\n\n\t\tlet convertValue = value => {\n\t\t\tif (Utils.isObject(value)) {\n\t\t\t\tif (value.from_node) {\n\t\t\t\t\tlet refNode = node.getProcessGraph().getNode(value.from_node);\n\t\t\t\t\tif (refNode) {\n\t\t\t\t\t\tvalue = this.nodeToFormula(refNode, operator);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = '#' + value.from_node;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (value.from_parameter) {\n\t\t\t\t\tvalue = value.from_parameter;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error('Objects not allowed');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\n\t\t// Create the list of arguments\n\t\tlet argList = [];\n\t\tlet params = Array.isArray(process.parameters) ? process.parameters : [];\n\t\tfor(let parameter of params) {\n\t\t\tlet value = convertValue(node.getRawArgument(parameter.name));\n\n\t\t\tif (isArrayData && Array.isArray(value) && parameter.name === 'data') {\n\t\t\t\targList = value.map(v => convertValue(v));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if(typeof value !== 'undefined') {\n\t\t\t\targList.push(value);\n\t\t\t}\n\t\t\telse if(typeof parameter.default !== 'undefined') {\n\t\t\t\targList.push(parameter.default);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error('Argument for parameter \"' + parameter.name + '\" missing');\n\t\t\t}\n\t\t}\n\t\t \n\t\t // Filter null values for array data to handle ignore_nodata\n\t\tif (isArrayData) {\n\t\t\targList = argList.filter(v => v !== null);\n\t\t}\n\n\t\tif (operator) {\n\t\t\tlet strongOps = ['/', '*']; // \"Punktrechnung\" vor\n\t\t\tlet weakOps = ['-', '+']; // \"Strichrechung\"\n\t\t\tlet formula = argList\n\t\t\t\t.map(v => v < 0 ? '(' + v + ')' : v) // Put negative values in brackets\n\t\t\t\t.join(operator); // Merge everything together\n\t\t\t\n\t\t\t// Check whether brackets are required\n\t\t\tif (\n\t\t\t\t// No brackets on top-level\n\t\t\t\t!parentOperator\n\t\t\t\t// If operators are both weak, no brackets required\n\t\t\t\t|| (weakOps.includes(parentOperator) && weakOps.includes(operator))\n\t\t\t\t// If operators are both strong, no brackets required -> not correct, x/(a*b) needs it, see https://github.com/Open-EO/openeo-web-editor/issues/235\n//\t\t\t\t|| (strongOps.includes(parentOperator) && strongOps.includes(operator))\n\t\t\t\t// No brackets required for power, it's the strongest operation\n\t\t\t\t|| operator === '^'\n\t\t\t\t// If the parent operation is a weak operation (+/-) and this is a strong operation, no brackets required\n\t\t\t\t|| (weakOps.includes(parentOperator) && strongOps.includes(operator))\n\t\t\t) {\n\t\t\t\treturn formula;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn '(' + formula + ')';\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn node.process_id + '(' + argList.join(', ') + ')';\n\t\t}\n\t}\n\n}","'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar SILENT_ON_NON_WRITABLE_LENGTH = !function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: INCORRECT_RESULT || SILENT_ON_NON_WRITABLE_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n"],"names":["render","_vm","this","_c","_self","attrs","on","$event","$emit","staticClass","_v","directives","name","rawName","value","language","expression","domProps","_q","error","_s","ref","code","scopedSlots","_u","key","fn","download","proxy","staticRenderFns","KEYWORDS","Python","Exporter","createProcessGraphInstance","process","pg","processRegistry","getJsonSchemaValidator","copyProcessGraphInstanceProperties","getKeywords","comment","addCode","generateImports","generateConnection","getServerUrl","generateAuthentication","generateBuilder","generateMetadataEntry","e","makeNull","makeBoolean","val","getTab","hasCallbackParameter","node","Boolean","Object","values","arguments","find","arg","async","builderName","variable","var","id","varPrefix","addProcessToArguments","filterDcName","getParent","startNodes","getProcessGraph","getStartNodeIds","includes","process_id","assign","collection_id","Utils","prevNodes","getPreviousNodes","dcName","from_node","args","generateArguments","namespace","makeString","unshift","description","join","generateMissingParameter","parameter","paramName","default","callback","parameters","params","generateFunctionParams","length","push","newLine","toCode","generateResult","resultNode","R","makeArray","arr","makeObject","obj","isMathFormula","components","Modal","TextEditor","data","computed","watch","immediate","exporter","methods","filename","OpenEO","component","style","zIndex","backgroundClose","startMove","_t","title","close","mixins","props","type","minWidth","width","show","position","dragPosition","handler","open","window","event","document","stopMove","move","escCloseListener","ProcessImpl","BaseProcess","constructor","super","generateFunction","ProcessGraph","registry","connection","fnCounter","allowEmpty","fillUndefinedParameters","createProcessInstance","isKeyword","keyword","toLowerCase","generateMetadata","map","p","str","JSON","stringify","makeNumber","num","Array","isArray","hasComment","onExporter","filter","newArgs","from_parameter","fnName","resolveArguments","properties","getArgument","getCallbackParameters","execute","replacement","generateCallback","ordered","resolveCallback","orderArguments","getProcess","orderedArgs","param","optional","definedValueFound","i","pop","prefix","String","match","replace","level","tabs","repeat","lines","trim","split","line","count","getUrl","getProcessParameters","getResultNode","validate","reset","executeNodes","getStartNodes","isMath","_isMath","JavaScript","generateFormula","parse","parsed","processId","formula","toFormulaString","escaped","nodeToFormula","getArrayElementPlaceholder","getArgumentType","getRawArgument","index","findIndex","parentOperator","arrayElement","operator","Formula","get","isArrayData","convertValue","refNode","getNode","Error","argList","v","strongOps","weakOps","tryToString","$TypeError","TypeError","module","exports","O","P","$","toObject","lengthOfArrayLike","setArrayLength","deletePropertyOrThrow","doesNotExceedSafeInteger","INCORRECT_RESULT","SILENT_ON_NON_WRITABLE_LENGTH","defineProperty","writable","target","proto","arity","forced","item","len","argCount","k","to","j"],"sourceRoot":""}
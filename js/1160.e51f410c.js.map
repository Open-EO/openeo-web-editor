{"version":3,"file":"js/1160.e51f410c.js","mappings":"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","sources":["webpack://@openeo/web-editor/./node_modules/ol/Kinetic.js","webpack://@openeo/web-editor/./node_modules/ol/ImageState.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEvent.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Base.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Checkbox.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Switch.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Radio.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/element.js","webpack://@openeo/web-editor/./node_modules/ol/DataTile.js","webpack://@openeo/web-editor/./node_modules/color-space/rgb.js","webpack://@openeo/web-editor/./node_modules/ol/CollectionEventType.js","webpack://@openeo/web-editor/./node_modules/ol/ImageTile.js","webpack://@openeo/web-editor/./node_modules/ol/MapProperty.js","webpack://@openeo/web-editor/./node_modules/ol/Image.js","webpack://@openeo/web-editor/./node_modules/ol/Collection.js","webpack://@openeo/web-editor/./node_modules/earcut/src/earcut.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEventType.js","webpack://@openeo/web-editor/./node_modules/color-parse/node_modules/color-name/index.js","webpack://@openeo/web-editor/./node_modules/color-parse/index.js","webpack://@openeo/web-editor/./node_modules/color-space/hsl.js","webpack://@openeo/web-editor/./node_modules/color-rgba/index.js","webpack://@openeo/web-editor/./node_modules/ol/MapEventType.js","webpack://@openeo/web-editor/./node_modules/ol/Feature.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEventHandler.js","webpack://@openeo/web-editor/./node_modules/ol/Disposable.js","webpack://@openeo/web-editor/./node_modules/color-space/luv.js","webpack://@openeo/web-editor/./node_modules/color-space/lchuv.js","webpack://@openeo/web-editor/./node_modules/color-space/xyz.js","webpack://@openeo/web-editor/./node_modules/ol/MapEvent.js","webpack://@openeo/web-editor/./node_modules/ol-ext/control/LayerSwitcher.js"],"sourcesContent":["/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nclass Kinetic {\n  /**\n   * @param {number} decay Rate of decay (must be negative).\n   * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n   * @param {number} delay Delay to consider to calculate the kinetic\n   *     initial values (milliseconds).\n   */\n  constructor(decay, minVelocity, delay) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.decay_ = decay;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minVelocity_ = minVelocity;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delay_ = delay;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.points_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  begin() {\n    this.points_.length = 0;\n    this.angle_ = 0;\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update(x, y) {\n    this.points_.push(x, y, Date.now());\n  }\n\n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end() {\n    if (this.points_.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false;\n    }\n    const delay = Date.now() - this.delay_;\n    const lastIndex = this.points_.length - 3;\n    if (this.points_[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false;\n    }\n\n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3;\n    while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n      firstIndex -= 3;\n    }\n\n    const duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n    // we don't want a duration of 0 (divide by zero)\n    // we also make sure the user panned for a duration of at least one frame\n    // (1/60s) to compute sane displacement values\n    if (duration < 1000 / 60) {\n      return false;\n    }\n\n    const dx = this.points_[lastIndex] - this.points_[firstIndex];\n    const dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n    this.angle_ = Math.atan2(dy, dx);\n    this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n    return this.initialVelocity_ > this.minVelocity_;\n  }\n\n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance() {\n    return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n  }\n\n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  getAngle() {\n    return this.angle_;\n  }\n}\n\nexport default Kinetic;\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4,\n};\n","/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nclass MapBrowserEvent extends MapEvent {\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./Map.js\").default} map Map.\n   * @param {EVENT} originalEvent Original event.\n   * @param {boolean} [dragging] Is the map currently being dragged?\n   * @param {import(\"./Map.js\").FrameState} [frameState] Frame state.\n   * @param {Array<PointerEvent>} [activePointers] Active pointers.\n   */\n  constructor(type, map, originalEvent, dragging, frameState, activePointers) {\n    super(type, map, frameState);\n\n    /**\n     * The original browser event.\n     * @const\n     * @type {EVENT}\n     * @api\n     */\n    this.originalEvent = originalEvent;\n\n    /**\n     * The map pixel relative to the viewport corresponding to the original browser event.\n     * @type {?import(\"./pixel.js\").Pixel}\n     */\n    this.pixel_ = null;\n\n    /**\n     * The coordinate in the user projection corresponding to the original browser event.\n     * @type {?import(\"./coordinate.js\").Coordinate}\n     */\n    this.coordinate_ = null;\n\n    /**\n     * Indicates if the map is currently being dragged. Only set for\n     * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n     *\n     * @type {boolean}\n     * @api\n     */\n    this.dragging = dragging !== undefined ? dragging : false;\n\n    /**\n     * @type {Array<PointerEvent>|undefined}\n     */\n    this.activePointers = activePointers;\n  }\n\n  /**\n   * The map pixel relative to the viewport corresponding to the original event.\n   * @type {import(\"./pixel.js\").Pixel}\n   * @api\n   */\n  get pixel() {\n    if (!this.pixel_) {\n      this.pixel_ = this.map.getEventPixel(this.originalEvent);\n    }\n    return this.pixel_;\n  }\n  set pixel(pixel) {\n    this.pixel_ = pixel;\n  }\n\n  /**\n   * The coordinate corresponding to the original browser event.  This will be in the user\n   * projection if one is set.  Otherwise it will be in the view projection.\n   * @type {import(\"./coordinate.js\").Coordinate}\n   * @api\n   */\n  get coordinate() {\n    if (!this.coordinate_) {\n      this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n    }\n    return this.coordinate_;\n  }\n  set coordinate(coordinate) {\n    this.coordinate_ = coordinate;\n  }\n\n  /**\n   * Prevents the default browser action.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n   * @api\n   */\n  preventDefault() {\n    super.preventDefault();\n    if ('preventDefault' in this.originalEvent) {\n      /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n    }\n  }\n\n  /**\n   * Prevents further propagation of the current event.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n   * @api\n   */\n  stopPropagation() {\n    super.stopPropagation();\n    if ('stopPropagation' in this.originalEvent) {\n      /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n    }\n  }\n}\n\nexport default MapBrowserEvent;\n","/** Vanilla JS geographic inputs\r\n * color, size, width, font, symboles, dash, arrow, pattern\r\n */\r\nimport ol_Object from 'ol/Object.js'\r\n\r\n/** Abstract base class; normally only used for creating subclasses and not instantiated in apps.    \r\n * @constructor\r\n * @extends {ol_Object}\r\n * @param {*} options\r\n *  @param {Element} [options.input] input element, if none create one\r\n *  @param {string} [options.type] input type, if no input\r\n *  @param {number} [options.min] input min, if no input\r\n *  @param {number} [options.max] input max, if no input\r\n *  @param {number} [options.step] input step, if no input\r\n *  @param {string|number} [options.val] input value\r\n *  @param {boolean} [options.checked] check input\r\n *  @param {boolean} [options.hidden] the input is display:none\r\n *  @param {boolean} [options.disabled] disable input\r\n *  @param {Element} [options.parent] parent element, if no input\r\n */\r\nvar ol_ext_input_Base = class olextinputBase extends ol_Object {\r\n  constructor(options) {\r\n    options = options || {};\r\n    super();\r\n\r\n    var input = this.input = options.input;\r\n    if (!input) {\r\n      input = this.input = document.createElement('input');\r\n      if (options.type) {\r\n        input.setAttribute('type', options.type);\r\n      }\r\n      if (options.min !== undefined) {\r\n        input.setAttribute('min', options.min);\r\n      }\r\n      if (options.max !== undefined) {\r\n        input.setAttribute('max', options.max);\r\n      }\r\n      if (options.step !== undefined) {\r\n        input.setAttribute('step', options.step);\r\n      }\r\n      if (options.parent) {\r\n        options.parent.appendChild(input);\r\n      }\r\n    }\r\n    if (options.disabled) {\r\n      input.disabled = true;\r\n    }\r\n    if (options.checked !== undefined) {\r\n      input.checked = !!options.checked;\r\n    }\r\n    if (options.val !== undefined) {\r\n      input.value = options.val;\r\n    }\r\n    if (options.hidden) { \r\n      input.classList.add('ol-input-hidden');\r\n    }\r\n    input.addEventListener('focus', function () {\r\n      if (this.element)\r\n        this.element.classList.add('ol-focus');\r\n    }.bind(this));\r\n    var tout;\r\n    input.addEventListener('focusout', function () {\r\n      if (this.element) {\r\n        if (tout)\r\n          clearTimeout(tout);\r\n        tout = setTimeout(function () {\r\n          this.element.classList.remove('ol-focus');\r\n        }.bind(this), 0);\r\n      }\r\n    }.bind(this));\r\n  }\r\n  /** Listen to drag event\r\n   * @param {Element} elt\r\n   * @param {function} cback when draggin on the element\r\n   * @private\r\n   */\r\n  _listenDrag(elt, cback) {\r\n    var handle = function (e) {\r\n      this.moving = true;\r\n      this.element.classList.add('ol-moving');\r\n      var listen = function (e) {\r\n        if (e.type === 'pointerup') {\r\n          document.removeEventListener('pointermove', listen);\r\n          document.removeEventListener('pointerup', listen);\r\n          document.removeEventListener('pointercancel', listen);\r\n          setTimeout(function () {\r\n            this.moving = false;\r\n            this.element.classList.remove('ol-moving');\r\n          }.bind(this));\r\n        }\r\n        if (e.target === elt)\r\n          cback(e);\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }.bind(this);\r\n      document.addEventListener('pointermove', listen, false);\r\n      document.addEventListener('pointerup', listen, false);\r\n      document.addEventListener('pointercancel', listen, false);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }.bind(this);\r\n    elt.addEventListener('mousedown', handle, false);\r\n    elt.addEventListener('touchstart', handle, false);\r\n  }\r\n  /** Set the current value\r\n   */\r\n  setValue(v) {\r\n    if (v !== undefined)\r\n      this.input.value = v;\r\n    this.input.dispatchEvent(new Event('change'));\r\n  }\r\n  /** Get the current getValue\r\n   * @returns {string}\r\n   */\r\n  getValue() {\r\n    return this.input.value;\r\n  }\r\n  /** Get the input element\r\n   * @returns {Element}\r\n   */\r\n  getInputElement() {\r\n    return this.input;\r\n  }\r\n}\r\n\r\nexport default ol_ext_input_Base\r\n","import ol_ext_input_Base from './Base.js'\r\n\r\n/** Checkbox input\r\n * @constructor\r\n * @extends {ol_ext_input_Base}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element|string} [options.html] label content\r\n *  @param {string} [options.after] label garnish (placed after)\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n *  @param {boolean} [options.autoClose=true]\r\n *  @param {boolean} [options.visible=false] display the input\r\n */\r\nvar ol_ext_input_Checkbox = class olextinputCheckbox extends ol_ext_input_Base {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    var label = this.element = document.createElement('label');\r\n    if (options.html instanceof Element)\r\n      label.appendChild(options.html);\r\n    else if (options.html !== undefined)\r\n      label.innerHTML = options.html;\r\n    label.className = ('ol-ext-check ol-ext-checkbox ' + (options.className || '')).trim();\r\n\r\n    if (this.input.parentNode)\r\n      this.input.parentNode.insertBefore(label, this.input);\r\n    label.appendChild(this.input);\r\n    label.appendChild(document.createElement('span'));\r\n    if (options.after) {\r\n      label.appendChild(document.createTextNode(options.after));\r\n    }\r\n\r\n    // Handle change\r\n    this.input.addEventListener('change', function () {\r\n      this.dispatchEvent({ type: 'check', checked: this.input.checked, value: this.input.value });\r\n    }.bind(this));\r\n\r\n  }\r\n  isChecked() {\r\n    return this.input.checked;\r\n  }\r\n}\r\n\r\nexport default ol_ext_input_Checkbox\r\n","import ol_ext_input_Checkbox from './Checkbox.js'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Switch = class olextinputSwitch extends ol_ext_input_Checkbox {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    this.element.className = ('ol-ext-toggle-switch ' + (options.className || '')).trim();\r\n  }\r\n};\r\n  \r\nexport default ol_ext_input_Switch\r\n","import ol_ext_input_Checkbox from './Checkbox.js'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Radio = class olextinputRadio extends ol_ext_input_Checkbox {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    this.element.className = ('ol-ext-check ol-ext-radio ' + (options.className || '')).trim();\r\n  }\r\n}\r\n  \r\nexport default ol_ext_input_Radio\r\n","/** Vanilla JS helper to manipulate DOM without jQuery\r\n * @see https://github.com/nefe/You-Dont-Need-jQuery\r\n * @see https://plainjs.com/javascript/\r\n * @see http://youmightnotneedjquery.com/\r\n */\r\nimport ol_Map from 'ol/Map.js'\r\nimport ol_ext_input_Checkbox from './input/Checkbox.js'\r\nimport ol_ext_input_Switch from './input/Switch.js'\r\nimport ol_ext_input_Radio from './input/Radio.js'\r\n\r\n/** @namespace ol.ext.element */\r\nvar ol_ext_element = {};\r\n\r\n/**\r\n * Create an element\r\n * @param {string} tagName The element tag, use 'TEXT' to create a text node\r\n * @param {*} options\r\n *  @param {string} options.className className The element class name \r\n *  @param {Element} options.parent Parent to append the element as child\r\n *  @param {Element|string} [options.html] Content of the element (if text is not set)\r\n *  @param {string} [options.text] Text content (if html is not set)\r\n *  @param {Element|string} [options.options] when tagName = SELECT a list of options as key:value to add to the select\r\n *  @param {string} options.* Any other attribut to add to the element\r\n */\r\nol_ext_element.create = function (tagName, options) {\r\n  options = options || {};\r\n  var elt;\r\n  // Create text node\r\n  if (tagName === 'TEXT') {\r\n    elt = document.createTextNode(options.html||'');\r\n    if (options.parent) options.parent.appendChild(elt);\r\n  } else {\r\n    // Other element\r\n    elt = document.createElement(tagName.toLowerCase());\r\n    if (/button/i.test(tagName)) elt.setAttribute('type', 'button');\r\n    for (var attr in options) {\r\n      switch (attr) {\r\n        case 'className': {\r\n          if (options.className && options.className.trim) elt.setAttribute('class', options.className.trim());\r\n          break;\r\n        }\r\n        case 'text': {\r\n          elt.innerText = options.text;\r\n          break;\r\n        }\r\n        case 'html': {\r\n          if (options.html instanceof Element) elt.appendChild(options.html)\r\n          else if (options.html!==undefined) elt.innerHTML = options.html;\r\n          break;\r\n        }\r\n        case 'parent': {\r\n          if (options.parent) options.parent.appendChild(elt);\r\n          break;\r\n        }\r\n        case 'options': {\r\n          if (/select/i.test(tagName)) {\r\n            for (var i in options.options) {\r\n              ol_ext_element.create('OPTION', {\r\n                html: i,\r\n                value: options.options[i],\r\n                parent: elt          \r\n              })\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 'style': {\r\n          ol_ext_element.setStyle(elt, options.style);\r\n          break;\r\n        }\r\n        case 'change':\r\n        case 'click': {\r\n          ol_ext_element.addListener(elt, attr, options[attr]);\r\n          break;\r\n        }\r\n        case 'on': {\r\n          for (var e in options.on) {\r\n            ol_ext_element.addListener(elt, e, options.on[e]);\r\n          }\r\n          break;\r\n        }\r\n        case 'checked': {\r\n          elt.checked = !!options.checked;\r\n          break;\r\n        }\r\n        default: {\r\n          elt.setAttribute(attr, options[attr]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return elt;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {boolean} options.checked\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createSwitch = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    type: 'checkbox',\r\n    on: options.on,\r\n    click: options.click,\r\n    change: options.change,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  new ol_ext_input_Switch(opt);\r\n  return input;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {string} [options.name] input name\r\n *  @param {string} [options.type=checkbox] input type: radio or checkbox\r\n *  @param {string} options.value input value\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createCheck = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    name: options.name,\r\n    type: (options.type==='radio' ? 'radio' : 'checkbox'),\r\n    on: options.on,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  if (options.type === 'radio') {\r\n    new ol_ext_input_Radio(opt);\r\n  } else {\r\n    new ol_ext_input_Checkbox(opt);\r\n  }\r\n  return input;\r\n};\r\n\r\n/** Set inner html or append a child element to an element\r\n * @param {Element} element\r\n * @param {Element|string} html Content of the element\r\n */\r\nol_ext_element.setHTML = function(element, html) {\r\n  if (html instanceof Element) element.appendChild(html)\r\n  else if (html!==undefined) element.innerHTML = html;\r\n};\r\n\r\n/** Append text into an elemnt\r\n * @param {Element} element\r\n * @param {string} text text content\r\n */\r\nol_ext_element.appendText = function(element, text) {\r\n  element.appendChild(document.createTextNode(text||''));\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.addListener = function (element, eventType, fn, useCapture ) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.addEventListener(e, fn, useCapture);\r\n  });\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.removeListener = function (element, eventType, fn) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.removeEventListener(e, fn);\r\n  });\r\n};\r\n\r\n/**\r\n * Show an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.show = function (element) {\r\n  element.style.display = '';\r\n};\r\n\r\n/**\r\n * Hide an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.hide = function (element) {\r\n  element.style.display = 'none';\r\n};\r\n\r\n/**\r\n * Test if an element is hihdden\r\n * @param {Element} element\r\n * @return {boolean}\r\n */\r\nol_ext_element.hidden = function (element) {\r\n  return ol_ext_element.getStyle(element, 'display') === 'none';\r\n};\r\n\r\n/**\r\n * Toggle an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.toggle = function (element) {\r\n  element.style.display = (element.style.display==='none' ? '' : 'none');\r\n};\r\n\r\n/** Set style of an element\r\n * @param {DOMElement} el the element\r\n * @param {*} st list of style\r\n */\r\nol_ext_element.setStyle = function(el, st) {\r\n  for (var s in st) {\r\n    switch (s) {\r\n      case 'top':\r\n      case 'left':\r\n      case 'bottom':\r\n      case 'right':\r\n      case 'minWidth':\r\n      case 'maxWidth':\r\n      case 'width':\r\n      case 'height': {\r\n        if (typeof(st[s]) === 'number') {\r\n          el.style[s] = st[s]+'px';\r\n        } else {\r\n          el.style[s] = st[s];\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        el.style[s] = st[s];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get style propertie of an element\r\n * @param {DOMElement} el the element\r\n * @param {string} styleProp Propertie name\r\n * @return {*} style value\r\n */\r\nol_ext_element.getStyle = function(el, styleProp) {\r\n  var value, defaultView = (el.ownerDocument || document).defaultView;\r\n  // W3C standard way:\r\n  if (defaultView && defaultView.getComputedStyle) {\r\n    // sanitize property name to css notation\r\n    // (hypen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n    value = defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n  } else if (el.currentStyle) { // IE\r\n    // sanitize property name to camelCase\r\n    styleProp = styleProp.replace(/-(\\w)/g, function(str, letter) {\r\n      return letter.toUpperCase();\r\n    });\r\n    value = el.currentStyle[styleProp];\r\n    // convert other units to pixels on IE\r\n    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) { \r\n      return (function(value) {\r\n        var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;\r\n        el.runtimeStyle.left = el.currentStyle.left;\r\n        el.style.left = value || 0;\r\n        value = el.style.pixelLeft + \"px\";\r\n        el.style.left = oldLeft;\r\n        el.runtimeStyle.left = oldRsLeft;\r\n        return value;\r\n      })(value);\r\n    }\r\n  }\r\n  if (/px$/.test(value)) return parseInt(value);\r\n  return value;\r\n};\r\n\r\n/** Get outerHeight of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerHeight = function(elt) {\r\n  return elt.offsetHeight + ol_ext_element.getStyle(elt, 'marginBottom')\r\n};\r\n\r\n/** Get outerWidth of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerWidth = function(elt) {\r\n  return elt.offsetWidth + ol_ext_element.getStyle(elt, 'marginLeft')\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @return {*} \r\n */\r\nol_ext_element.offsetRect = function(elt) {\r\n  var rect = elt.getBoundingClientRect();\r\n  return {\r\n    top: rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0),\r\n    left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0),\r\n    height: rect.height || (rect.bottom - rect.top),\r\n    width: rect.width || (rect.right - rect.left)\r\n  }\r\n};\r\n\r\n/** Get element offset \r\n * @param {ELement} elt\r\n * @returns {Object} top/left offset\r\n */\r\nol_ext_element.getFixedOffset = function(elt) {\r\n  var offset = {\r\n    left:0,\r\n    top:0\r\n  };\r\n  var getOffset = function(parent) {\r\n    if (!parent) return offset;\r\n    // Check position when transform\r\n    if (ol_ext_element.getStyle(parent, 'position') === 'absolute'\r\n      && ol_ext_element.getStyle(parent, 'transform') !== \"none\") {\r\n      var r = parent.getBoundingClientRect();\r\n      offset.left += r.left; \r\n      offset.top += r.top; \r\n      return offset;\r\n    }\r\n    return getOffset(parent.offsetParent)\r\n  }\r\n  return getOffset(elt.offsetParent)\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @param {boolean} fixed get fixed position\r\n * @return {Object} \r\n */\r\nol_ext_element.positionRect = function(elt, fixed) {\r\n  var gleft = 0;\r\n  var gtop = 0;\r\n\r\n  var getRect = function( parent ) {\r\n    if (parent) {\r\n      gleft += parent.offsetLeft;\r\n      gtop += parent.offsetTop;\r\n      return getRect(parent.offsetParent);\r\n    } else {\r\n      var r = {\r\n        top: elt.offsetTop + gtop,\r\n        left: elt.offsetLeft + gleft\r\n      };\r\n      if (fixed) {\r\n        r.top -= (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        r.left -= (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0);\r\n      }\r\n      r.bottom = r.top + elt.offsetHeight;\r\n      r.right = r.top + elt.offsetWidth;\r\n      return r;\r\n    }\r\n  }; \r\n  return getRect(elt.offsetParent);\r\n}\r\n\r\n/** Make a div scrollable without scrollbar.\r\n * On touch devices the default behavior is preserved\r\n * @param {DOMElement} elt\r\n * @param {*} options\r\n *  @param {function} [options.onmove] a function that takes a boolean indicating that the div is scrolling\r\n *  @param {boolean} [options.vertical=false] \r\n *  @param {boolean} [options.animate=true] add kinetic to scroll\r\n *  @param {boolean} [options.mousewheel=false] enable mousewheel to scroll\r\n *  @param {boolean} [options.minibar=false] add a mini scrollbar to the parent element (only vertical scrolling)\r\n * @returns {Object} an object with a refresh function\r\n */\r\nol_ext_element.scrollDiv = function(elt, options) {\r\n  options = options || {};\r\n  var pos = false;\r\n  var speed = 0;\r\n  var d, dt = 0;\r\n\r\n  var onmove = (typeof(options.onmove) === 'function' ? options.onmove : function(){});\r\n  //var page = options.vertical ? 'pageY' : 'pageX';\r\n  var page = options.vertical ? 'screenY' : 'screenX';\r\n  var scroll = options.vertical ? 'scrollTop' : 'scrollLeft';\r\n  var moving = false;\r\n  // Factor scale content / container\r\n  var scale, isbar;\r\n\r\n  // Update the minibar\r\n  var updateCounter = 0;\r\n  var updateMinibar = function() {\r\n    if (scrollbar) {\r\n      updateCounter++;\r\n      setTimeout(updateMinibarDelay);\r\n    }\r\n  }\r\n  var updateMinibarDelay = function() {\r\n    if (scrollbar) {\r\n      updateCounter--;\r\n      // Prevent multi call\r\n      if (updateCounter) return;\r\n      // Container height\r\n      var pheight = elt.clientHeight;\r\n      // Content height\r\n      var height = elt.scrollHeight;\r\n      // Set scrollbar value\r\n      scale = pheight / height;\r\n      scrollbar.style.height = scale * 100 + '%';\r\n      scrollbar.style.top = (elt.scrollTop / height * 100) + '%';\r\n      scrollContainer.style.height = pheight + 'px';\r\n      // No scroll\r\n      if (pheight > height - .5) scrollContainer.classList.add('ol-100pc');\r\n      else scrollContainer.classList.remove('ol-100pc');\r\n    }\r\n  }\r\n  \r\n  // Handle pointer down\r\n  var onPointerDown = function(e) {\r\n    // Prevent scroll\r\n    if (e.target.classList.contains('ol-noscroll')) return;\r\n    // Start scrolling\r\n    moving = false;\r\n    pos = e[page];\r\n    dt = new Date();\r\n    elt.classList.add('ol-move');\r\n    // Prevent elt dragging\r\n    e.preventDefault();\r\n    // Listen scroll\r\n    window.addEventListener('pointermove', onPointerMove);\r\n    ol_ext_element.addListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  }\r\n\r\n  // Register scroll\r\n  var onPointerMove = function(e) {\r\n    if (pos !== false) {\r\n      var delta = (isbar ? -1/scale : 1) * (pos - e[page]);\r\n      moving = moving || Math.round(delta)\r\n      elt[scroll] += delta;\r\n      d = new Date();\r\n      if (d-dt) {\r\n        speed = (speed + delta / (d - dt))/2;\r\n      }\r\n      pos = e[page];\r\n      dt = d;\r\n      // Tell we are moving\r\n      if (delta) onmove(true);\r\n    } else {\r\n      moving = true;\r\n    }\r\n  };\r\n  \r\n  // Animate scroll\r\n  var animate = function(to) {\r\n    var step = (to>0) ? Math.min(100, to/2) : Math.max(-100, to/2);\r\n    to -= step;\r\n    elt[scroll] += step;\r\n    if (-1 < to && to < 1) {\r\n      if (moving) setTimeout(function() { elt.classList.remove('ol-move'); });\r\n      else elt.classList.remove('ol-move');\r\n      moving = false;\r\n      onmove(false);\r\n    } else {\r\n      setTimeout(function() {\r\n        animate(to);\r\n      }, 40);\r\n    }\r\n  }\r\n  \r\n  // Initialize scroll container for minibar\r\n  var scrollContainer, scrollbar;\r\n  if (options.vertical && options.minibar) {\r\n    var init = function(b) {\r\n      // only once\r\n      elt.removeEventListener('pointermove', init);\r\n      elt.parentNode.classList.add('ol-miniscroll');\r\n      scrollbar = ol_ext_element.create('DIV');\r\n      scrollContainer = ol_ext_element.create('DIV', {\r\n        className: 'ol-scroll',\r\n        html: scrollbar\r\n      });\r\n      elt.parentNode.insertBefore(scrollContainer, elt);\r\n      // Move scrollbar\r\n      scrollbar.addEventListener('pointerdown', function(e) {\r\n        isbar = true;\r\n        onPointerDown(e)\r\n      });\r\n      // Handle mousewheel\r\n      if (options.mousewheel) {\r\n        ol_ext_element.addListener(scrollContainer, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n        ol_ext_element.addListener(scrollbar, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n      }\r\n      // Update on enter\r\n      elt.parentNode.addEventListener('pointerenter', updateMinibar);\r\n      // Update on resize\r\n      window.addEventListener('resize', updateMinibar);\r\n      // Update\r\n      if (b!==false) updateMinibar();\r\n    };\r\n    // Allready inserted in the DOM\r\n    if (elt.parentNode) init(false);\r\n    // or wait when ready\r\n    else elt.addEventListener('pointermove', init);\r\n    // Update on scroll\r\n    elt.addEventListener('scroll', function() {\r\n      updateMinibar();\r\n    });\r\n  }\r\n\r\n  // Enable scroll\r\n  elt.style['touch-action'] = 'none';\r\n  elt.style['overflow'] = 'hidden';\r\n  elt.classList.add('ol-scrolldiv');\r\n  \r\n  // Start scrolling\r\n  ol_ext_element.addListener(elt, ['pointerdown'], function(e) {\r\n    isbar = false;\r\n    onPointerDown(e)\r\n  });\r\n\r\n  // Prevet click when moving...\r\n  elt.addEventListener('click', function(e) {\r\n    if (elt.classList.contains('ol-move')) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  }, true);\r\n\r\n  // Stop scrolling\r\n  var onPointerUp = function(e) {\r\n    dt = new Date() - dt;\r\n    if (dt>100 || isbar) {\r\n      // User stop: no speed\r\n      speed = 0;\r\n    } else if (dt>0) {\r\n      // Calculate new speed\r\n      speed = ((speed||0) + (pos - e[page]) / dt) / 2;\r\n    }\r\n    animate(options.animate===false ? 0 : speed*200);\r\n    pos = false;\r\n    speed = 0;\r\n    dt = 0;\r\n    // Add class to handle click (on iframe / double-click)\r\n    if (!elt.classList.contains('ol-move')) {\r\n      elt.classList.add('ol-hasClick')\r\n      setTimeout(function() { elt.classList.remove('ol-hasClick'); }, 500);\r\n    } else {\r\n      elt.classList.remove('ol-hasClick');\r\n    }\r\n    isbar = false;\r\n    window.removeEventListener('pointermove', onPointerMove)\r\n    ol_ext_element.removeListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  };\r\n\r\n  // Handle mousewheel\r\n  var onMouseWheel = function(e) {\r\n    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\r\n    elt.classList.add('ol-move');\r\n    elt[scroll] -= delta*30;\r\n    elt.classList.remove('ol-move');\r\n    return false;\r\n  }\r\n  if (options.mousewheel) { // && !elt.classList.contains('ol-touch')) {\r\n    ol_ext_element.addListener(elt, \r\n      ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n      onMouseWheel\r\n    );\r\n  }\r\n\r\n  return { \r\n    refresh: updateMinibar\r\n  }\r\n};\r\n\r\n/** Dispatch an event to an Element \r\n * @param {string} eventName\r\n * @param {Element} element\r\n */\r\nol_ext_element.dispatchEvent = function (eventName, element) {\r\n  var event;\r\n  try {\r\n    event = new CustomEvent(eventName);\r\n  } catch(e) {\r\n    // Try customevent on IE\r\n    event = document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, {});\r\n  }\r\n  element.dispatchEvent(event);\r\n};\r\n\r\n/** Set cursor\r\n * @param {Element|ol/Map} elt\r\n * @param {string} cursor\r\n */\r\nol_ext_element.setCursor = function(elt, cursor) {\r\n  if (elt instanceof ol_Map) elt = elt.getTargetElement()\r\n  // prevent flashing on mobile device\r\n  if (!('ontouchstart' in window) && elt instanceof Element) {\r\n    elt.style.cursor = cursor;\r\n  }\r\n}\r\n\r\nexport default ol_ext_element\r\n","/**\n * @module ol/DataTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\n\n/**\n * @typedef {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement|ImageBitmap} ImageLike\n */\n\n/**\n * @typedef {Uint8Array|Uint8ClampedArray|Float32Array|DataView} ArrayLike\n */\n\n/**\n * Data that can be used with a DataTile.\n * @typedef {ArrayLike|ImageLike} Data\n */\n\n/**\n * @param {Data} data Tile data.\n * @return {ImageLike|null} The image-like data.\n */\nexport function asImageLike(data) {\n  return data instanceof Image ||\n    data instanceof HTMLCanvasElement ||\n    data instanceof HTMLVideoElement ||\n    data instanceof ImageBitmap\n    ? data\n    : null;\n}\n\n/**\n * @param {Data} data Tile data.\n * @return {ArrayLike|null} The array-like data.\n */\nexport function asArrayLike(data) {\n  return data instanceof Uint8Array ||\n    data instanceof Uint8ClampedArray ||\n    data instanceof Float32Array ||\n    data instanceof DataView\n    ? data\n    : null;\n}\n\n/**\n * @type {CanvasRenderingContext2D|null}\n */\nlet sharedContext = null;\n\n/**\n * @param {ImageLike} image The image.\n * @return {Uint8ClampedArray} The data.\n */\nexport function toArray(image) {\n  if (!sharedContext) {\n    sharedContext = createCanvasContext2D(\n      image.width,\n      image.height,\n      undefined,\n      {willReadFrequently: true},\n    );\n  }\n  const canvas = sharedContext.canvas;\n  const width = image.width;\n  if (canvas.width !== width) {\n    canvas.width = width;\n  }\n  const height = image.height;\n  if (canvas.height !== height) {\n    canvas.height = height;\n  }\n  sharedContext.clearRect(0, 0, width, height);\n  sharedContext.drawImage(image, 0, 0);\n  return sharedContext.getImageData(0, 0, width, height).data;\n}\n\n/**\n * @type {import('./size.js').Size}\n */\nconst defaultSize = [256, 256];\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @property {function(): Promise<Data>} loader Data loader.  For loaders that generate images,\n * the promise should not resolve until the image is loaded.\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n * @property {import('./size.js').Size} [size=[256, 256]] Tile size.\n * @api\n */\n\nclass DataTile extends Tile {\n  /**\n   * @param {Options} options Tile options.\n   */\n  constructor(options) {\n    const state = TileState.IDLE;\n\n    super(options.tileCoord, state, {\n      transition: options.transition,\n      interpolate: options.interpolate,\n    });\n\n    /**\n     * @type {function(): Promise<Data>}\n     * @private\n     */\n    this.loader_ = options.loader;\n\n    /**\n     * @type {Data}\n     * @private\n     */\n    this.data_ = null;\n\n    /**\n     * @type {Error}\n     * @private\n     */\n    this.error_ = null;\n\n    /**\n     * @type {import('./size.js').Size|null}\n     * @private\n     */\n    this.size_ = options.size || null;\n  }\n\n  /**\n   * Get the tile size.\n   * @return {import('./size.js').Size} Tile size.\n   */\n  getSize() {\n    if (this.size_) {\n      return this.size_;\n    }\n    const imageData = asImageLike(this.data_);\n    if (imageData) {\n      return [imageData.width, imageData.height];\n    }\n    return defaultSize;\n  }\n\n  /**\n   * Get the data for the tile.\n   * @return {Data} Tile data.\n   * @api\n   */\n  getData() {\n    return this.data_;\n  }\n\n  /**\n   * Get any loading error.\n   * @return {Error} Loading error.\n   * @api\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @api\n   */\n  load() {\n    if (this.state !== TileState.IDLE && this.state !== TileState.ERROR) {\n      return;\n    }\n    this.state = TileState.LOADING;\n    this.changed();\n\n    const self = this;\n    this.loader_()\n      .then(function (data) {\n        self.data_ = data;\n        self.state = TileState.LOADED;\n        self.changed();\n      })\n      .catch(function (error) {\n        self.error_ = error;\n        self.state = TileState.ERROR;\n        self.changed();\n      });\n  }\n}\n\nexport default DataTile;\n","/**\n * RGB space.\n *\n * @module  color-space/rgb\n */\nconst rgb = {\n\tname: 'rgb',\n\tmin: [0, 0, 0],\n\tmax: [255, 255, 255],\n\tchannel: ['red', 'green', 'blue'],\n\talias: ['RGB']\n};\n\nexport default rgb;\n","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection.CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection.CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove',\n};\n","/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenImage} from './Image.js';\n\nclass ImageTile extends Tile {\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"./TileState.js\").default} state State.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @param {import(\"./Tile.js\").Options} [options] Tile options.\n   */\n  constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, options) {\n    super(tileCoord, state, options);\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * Image URI\n     *\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    this.key = src;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n  }\n\n  /**\n   * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Sets an HTML image element for this tile (may be a Canvas or preloaded Image).\n   * @param {HTMLCanvasElement|HTMLImageElement} element Element.\n   */\n  setImage(element) {\n    this.image_ = element;\n    this.state = TileState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = TileState.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    const image = /** @type {HTMLImageElement} */ (this.image_);\n    if (image.naturalWidth && image.naturalHeight) {\n      this.state = TileState.LOADED;\n    } else {\n      this.state = TileState.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   *\n   * To retry loading tiles on failed requests, use a custom `tileLoadFunction`\n   * that checks for error status codes and reloads only when the status code is\n   * 408, 429, 500, 502, 503 and 504, and only when not too many retries have been\n   * made already:\n   *\n   * ```js\n   * const retryCodes = [408, 429, 500, 502, 503, 504];\n   * const retries = {};\n   * source.setTileLoadFunction((tile, src) => {\n   *   const image = tile.getImage();\n   *   fetch(src)\n   *     .then((response) => {\n   *       if (retryCodes.includes(response.status)) {\n   *         retries[src] = (retries[src] || 0) + 1;\n   *         if (retries[src] <= 3) {\n   *           setTimeout(() => tile.load(), retries[src] * 1000);\n   *         }\n   *         return Promise.reject();\n   *       }\n   *       return response.blob();\n   *     })\n   *     .then((blob) => {\n   *       const imageUrl = URL.createObjectURL(blob);\n   *       image.src = imageUrl;\n   *       setTimeout(() => URL.revokeObjectURL(imageUrl), 5000);\n   *     })\n   *     .catch(() => tile.setState(3)); // error\n   * });\n   * ```\n   *\n   * @api\n   */\n  load() {\n    if (this.state == TileState.ERROR) {\n      this.state = TileState.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n      this.tileLoadFunction_(this, this.src_);\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this),\n      );\n    }\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  const ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view',\n};\n","/**\n * @module ol/Image\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport ImageState from './ImageState.js';\nimport {CREATE_IMAGE_BITMAP, IMAGE_DECODE} from './has.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport {toPromise} from './functions.js';\n\n/**\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(import(\"./Image.js\").default, string): void} LoadFunction\n * @api\n */\n\n/**\n * @typedef {Object} ImageObject\n * @property {import(\"./extent.js\").Extent} [extent] Extent, if different from the requested one.\n * @property {import(\"./resolution.js\").ResolutionLike} [resolution] Resolution, if different from the requested one.\n * When x and y resolution are different, use the array type (`[xResolution, yResolution]`).\n * @property {number} [pixelRatio] Pixel ratio, if different from the requested one.\n * @property {import('./DataTile.js').ImageLike} image Image.\n */\n\n/**\n * Loader function used for image sources. Receives extent, resolution and pixel ratio as arguments.\n * For images that cover any extent and resolution (static images), the loader function should not accept\n * any arguments. The function returns an {@link import(\"./DataTile.js\").ImageLike image}, an\n * {@link import(\"./Image.js\").ImageObject image object}, or a promise for the same.\n * For loaders that generate images, the promise should not resolve until the image is loaded.\n * If the returned image does not match the extent, resolution or pixel ratio passed to the loader,\n * it has to return an {@link import(\"./Image.js\").ImageObject image object} with the `image` and the\n * correct `extent`, `resolution` and `pixelRatio`.\n *\n * @typedef {function(import(\"./extent.js\").Extent, number, number, (function(HTMLImageElement, string): void)=): import(\"./DataTile.js\").ImageLike|ImageObject|Promise<import(\"./DataTile.js\").ImageLike|ImageObject>} Loader\n * @api\n */\n\n/**\n * Loader function used for image sources. Receives extent, resolution and pixel ratio as arguments.\n * The function returns a promise for an  {@link import(\"./Image.js\").ImageObject image object}.\n *\n * @typedef {function(import(\"./extent.js\").Extent, number, number, (function(HTMLImageElement, string): void)=): import(\"./DataTile.js\").ImageLike|ImageObject|Promise<import(\"./DataTile.js\").ImageLike|ImageObject>} ImageObjectPromiseLoader\n */\n\nclass ImageWrapper extends EventTarget {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|Array<number>|undefined} resolution Resolution. If provided as array, x and y\n   * resolution will be assumed.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"./ImageState.js\").default|import(\"./Image.js\").Loader} stateOrLoader State.\n   */\n  constructor(extent, resolution, pixelRatio, stateOrLoader) {\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.extent = extent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number|Array<number>|undefined}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state =\n      typeof stateOrLoader === 'function' ? ImageState.IDLE : stateOrLoader;\n\n    /**\n     * @private\n     * @type {import('./DataTile.js').ImageLike|null}\n     */\n    this.image_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"./Image.js\").Loader}\n     */\n    this.loader = typeof stateOrLoader === 'function' ? stateOrLoader : null;\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  getExtent() {\n    return this.extent;\n  }\n\n  /**\n   * @return {import('./DataTile.js').ImageLike} Image.\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * @return {number} PixelRatio.\n   */\n  getPixelRatio() {\n    return this.pixelRatio_;\n  }\n\n  /**\n   * @return {number|Array<number>} Resolution.\n   */\n  getResolution() {\n    return /** @type {number} */ (this.resolution);\n  }\n\n  /**\n   * @return {import(\"./ImageState.js\").default} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      if (this.loader) {\n        this.state = ImageState.LOADING;\n        this.changed();\n        const resolution = this.getResolution();\n        const requestResolution = Array.isArray(resolution)\n          ? resolution[0]\n          : resolution;\n        toPromise(() =>\n          this.loader(\n            this.getExtent(),\n            requestResolution,\n            this.getPixelRatio(),\n          ),\n        )\n          .then((image) => {\n            if ('image' in image) {\n              this.image_ = image.image;\n            }\n            if ('extent' in image) {\n              this.extent = image.extent;\n            }\n            if ('resolution' in image) {\n              this.resolution = image.resolution;\n            }\n            if ('pixelRatio' in image) {\n              this.pixelRatio_ = image.pixelRatio;\n            }\n            if (\n              image instanceof HTMLImageElement ||\n              image instanceof ImageBitmap ||\n              image instanceof HTMLCanvasElement ||\n              image instanceof HTMLVideoElement\n            ) {\n              this.image_ = image;\n            }\n            this.state = ImageState.LOADED;\n          })\n          .catch((error) => {\n            this.state = ImageState.ERROR;\n            console.error(error); // eslint-disable-line no-console\n          })\n          .finally(() => this.changed());\n      }\n    }\n  }\n\n  /**\n   * @param {import('./DataTile.js').ImageLike} image The image.\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * @param {number|Array<number>} resolution Resolution.\n   */\n  setResolution(resolution) {\n    this.resolution = resolution;\n  }\n}\n\n/**\n * @param {import('./DataTile.js').ImageLike} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n  const img = /** @type {HTMLImageElement} */ (image);\n  let listening = true;\n  let decoding = false;\n  let loaded = false;\n\n  const listenerKeys = [\n    listenOnce(img, EventType.LOAD, function () {\n      loaded = true;\n      if (!decoding) {\n        loadHandler();\n      }\n    }),\n  ];\n\n  if (img.src && IMAGE_DECODE) {\n    decoding = true;\n    img\n      .decode()\n      .then(function () {\n        if (listening) {\n          loadHandler();\n        }\n      })\n      .catch(function (error) {\n        if (listening) {\n          if (loaded) {\n            loadHandler();\n          } else {\n            errorHandler();\n          }\n        }\n      });\n  } else {\n    listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n  }\n\n  return function unlisten() {\n    listening = false;\n    listenerKeys.forEach(unlistenByKey);\n  };\n}\n\n/**\n * Loads an image.\n * @param {HTMLImageElement} image Image, not yet loaded.\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\n * @return {Promise<HTMLImageElement>} Promise resolving to an `HTMLImageElement`.\n * @api\n */\nexport function load(image, src) {\n  return new Promise((resolve, reject) => {\n    function handleLoad() {\n      unlisten();\n      resolve(image);\n    }\n    function handleError() {\n      unlisten();\n      reject(new Error('Image load error'));\n    }\n    function unlisten() {\n      image.removeEventListener('load', handleLoad);\n      image.removeEventListener('error', handleError);\n    }\n    image.addEventListener('load', handleLoad);\n    image.addEventListener('error', handleError);\n    if (src) {\n      image.src = src;\n    }\n  });\n}\n\n/**\n * @param {HTMLImageElement} image Image, not yet loaded.\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\n * @return {Promise<HTMLImageElement>} Promise resolving to an `HTMLImageElement`.\n */\nexport function decodeFallback(image, src) {\n  if (src) {\n    image.src = src;\n  }\n  return image.src && IMAGE_DECODE\n    ? new Promise((resolve, reject) =>\n        image\n          .decode()\n          .then(() => resolve(image))\n          .catch((e) =>\n            image.complete && image.width ? resolve(image) : reject(e),\n          ),\n      )\n    : load(image);\n}\n\n/**\n * Loads an image and decodes it to an `ImageBitmap` if `createImageBitmap()` is supported. Returns\n * the loaded image otherwise.\n * @param {HTMLImageElement} image Image, not yet loaded.\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\n * @return {Promise<ImageBitmap|HTMLImageElement>} Promise resolving to an `ImageBitmap` or an\n * `HTMLImageElement` if `createImageBitmap()` is not supported.\n * @api\n */\nexport function decode(image, src) {\n  if (src) {\n    image.src = src;\n  }\n  return image.src && IMAGE_DECODE && CREATE_IMAGE_BITMAP\n    ? image\n        .decode()\n        .then(() => createImageBitmap(image))\n        .catch((e) => {\n          if (image.complete && image.width) {\n            return image;\n          }\n          throw e;\n        })\n    : decodeFallback(image);\n}\n\nexport default ImageWrapper;\n","/**\n * @module ol/Collection\n */\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LENGTH: 'length',\n};\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n * @template T\n */\nexport class CollectionEvent extends Event {\n  /**\n   * @param {import(\"./CollectionEventType.js\").default} type Type.\n   * @param {T} element Element.\n   * @param {number} index The index of the added or removed element.\n   */\n  constructor(type, element, index) {\n    super(type);\n\n    /**\n     * The element that is added to or removed from the collection.\n     * @type {T}\n     * @api\n     */\n    this.element = element;\n\n    /**\n     * The index of the added or removed element.\n     * @type {number}\n     * @api\n     */\n    this.index = index;\n  }\n}\n\n/***\n * @template T\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent<T>, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nclass Collection extends BaseObject {\n  /**\n   * @param {Array<T>} [array] Array.\n   * @param {Options} [options] Collection options.\n   */\n  constructor(array, options) {\n    super();\n\n    /***\n     * @type {CollectionOnSignature<T, import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {CollectionOnSignature<T, import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {CollectionOnSignature<T, void>}\n     */\n    this.un;\n\n    options = options || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.unique_ = !!options.unique;\n\n    /**\n     * @private\n     * @type {!Array<T>}\n     */\n    this.array_ = array ? array : [];\n\n    if (this.unique_) {\n      for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n        this.assertUnique_(this.array_[i], i);\n      }\n    }\n\n    this.updateLength_();\n  }\n\n  /**\n   * Remove all elements from the collection.\n   * @api\n   */\n  clear() {\n    while (this.getLength() > 0) {\n      this.pop();\n    }\n  }\n\n  /**\n   * Add elements to the collection.  This pushes each item in the provided array\n   * to the end of the collection.\n   * @param {!Array<T>} arr Array.\n   * @return {Collection<T>} This collection.\n   * @api\n   */\n  extend(arr) {\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      this.push(arr[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Iterate over each element, calling the provided callback.\n   * @param {function(T, number, Array<T>): *} f The function to call\n   *     for every element. This function takes 3 arguments (the element, the\n   *     index and the array). The return value is ignored.\n   * @api\n   */\n  forEach(f) {\n    const array = this.array_;\n    for (let i = 0, ii = array.length; i < ii; ++i) {\n      f(array[i], i, array);\n    }\n  }\n\n  /**\n   * Get a reference to the underlying Array object. Warning: if the array\n   * is mutated, no events will be dispatched by the collection, and the\n   * collection's \"length\" property won't be in sync with the actual length\n   * of the array.\n   * @return {!Array<T>} Array.\n   * @api\n   */\n  getArray() {\n    return this.array_;\n  }\n\n  /**\n   * Get the element at the provided index.\n   * @param {number} index Index.\n   * @return {T} Element.\n   * @api\n   */\n  item(index) {\n    return this.array_[index];\n  }\n\n  /**\n   * Get the length of this collection.\n   * @return {number} The length of the array.\n   * @observable\n   * @api\n   */\n  getLength() {\n    return this.get(Property.LENGTH);\n  }\n\n  /**\n   * Insert an element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  insertAt(index, elem) {\n    if (index < 0 || index > this.getLength()) {\n      throw new Error('Index out of bounds: ' + index);\n    }\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    this.array_.splice(index, 0, elem);\n    this.updateLength_();\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem, index),\n    );\n  }\n\n  /**\n   * Remove the last element of the collection and return it.\n   * Return `undefined` if the collection is empty.\n   * @return {T|undefined} Element.\n   * @api\n   */\n  pop() {\n    return this.removeAt(this.getLength() - 1);\n  }\n\n  /**\n   * Insert the provided element at the end of the collection.\n   * @param {T} elem Element.\n   * @return {number} New length of the collection.\n   * @api\n   */\n  push(elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    const n = this.getLength();\n    this.insertAt(n, elem);\n    return this.getLength();\n  }\n\n  /**\n   * Remove the first occurrence of an element from the collection.\n   * @param {T} elem Element.\n   * @return {T|undefined} The removed element or undefined if none found.\n   * @api\n   */\n  remove(elem) {\n    const arr = this.array_;\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      if (arr[i] === elem) {\n        return this.removeAt(i);\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Remove the element at the provided index and return it.\n   * Return `undefined` if the collection does not contain this index.\n   * @param {number} index Index.\n   * @return {T|undefined} Value.\n   * @api\n   */\n  removeAt(index) {\n    if (index < 0 || index >= this.getLength()) {\n      return undefined;\n    }\n    const prev = this.array_[index];\n    this.array_.splice(index, 1);\n    this.updateLength_();\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.REMOVE, prev, index)\n      ),\n    );\n    return prev;\n  }\n\n  /**\n   * Set the element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  setAt(index, elem) {\n    const n = this.getLength();\n    if (index >= n) {\n      this.insertAt(index, elem);\n      return;\n    }\n    if (index < 0) {\n      throw new Error('Index out of bounds: ' + index);\n    }\n    if (this.unique_) {\n      this.assertUnique_(elem, index);\n    }\n    const prev = this.array_[index];\n    this.array_[index] = elem;\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.REMOVE, prev, index)\n      ),\n    );\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.ADD, elem, index)\n      ),\n    );\n  }\n\n  /**\n   * @private\n   */\n  updateLength_() {\n    this.set(Property.LENGTH, this.array_.length);\n  }\n\n  /**\n   * @private\n   * @param {T} elem Element.\n   * @param {number} [except] Optional index to ignore.\n   */\n  assertUnique_(elem, except) {\n    for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n      if (this.array_[i] === elem && i !== except) {\n        throw new Error('Duplicate item added to a unique collection');\n      }\n    }\n  }\n}\n\nexport default Collection;\n","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel',\n};\n\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n","export default {\n\taliceblue: [240, 248, 255],\n\tantiquewhite: [250, 235, 215],\n\taqua: [0, 255, 255],\n\taquamarine: [127, 255, 212],\n\tazure: [240, 255, 255],\n\tbeige: [245, 245, 220],\n\tbisque: [255, 228, 196],\n\tblack: [0, 0, 0],\n\tblanchedalmond: [255, 235, 205],\n\tblue: [0, 0, 255],\n\tblueviolet: [138, 43, 226],\n\tbrown: [165, 42, 42],\n\tburlywood: [222, 184, 135],\n\tcadetblue: [95, 158, 160],\n\tchartreuse: [127, 255, 0],\n\tchocolate: [210, 105, 30],\n\tcoral: [255, 127, 80],\n\tcornflowerblue: [100, 149, 237],\n\tcornsilk: [255, 248, 220],\n\tcrimson: [220, 20, 60],\n\tcyan: [0, 255, 255],\n\tdarkblue: [0, 0, 139],\n\tdarkcyan: [0, 139, 139],\n\tdarkgoldenrod: [184, 134, 11],\n\tdarkgray: [169, 169, 169],\n\tdarkgreen: [0, 100, 0],\n\tdarkgrey: [169, 169, 169],\n\tdarkkhaki: [189, 183, 107],\n\tdarkmagenta: [139, 0, 139],\n\tdarkolivegreen: [85, 107, 47],\n\tdarkorange: [255, 140, 0],\n\tdarkorchid: [153, 50, 204],\n\tdarkred: [139, 0, 0],\n\tdarksalmon: [233, 150, 122],\n\tdarkseagreen: [143, 188, 143],\n\tdarkslateblue: [72, 61, 139],\n\tdarkslategray: [47, 79, 79],\n\tdarkslategrey: [47, 79, 79],\n\tdarkturquoise: [0, 206, 209],\n\tdarkviolet: [148, 0, 211],\n\tdeeppink: [255, 20, 147],\n\tdeepskyblue: [0, 191, 255],\n\tdimgray: [105, 105, 105],\n\tdimgrey: [105, 105, 105],\n\tdodgerblue: [30, 144, 255],\n\tfirebrick: [178, 34, 34],\n\tfloralwhite: [255, 250, 240],\n\tforestgreen: [34, 139, 34],\n\tfuchsia: [255, 0, 255],\n\tgainsboro: [220, 220, 220],\n\tghostwhite: [248, 248, 255],\n\tgold: [255, 215, 0],\n\tgoldenrod: [218, 165, 32],\n\tgray: [128, 128, 128],\n\tgreen: [0, 128, 0],\n\tgreenyellow: [173, 255, 47],\n\tgrey: [128, 128, 128],\n\thoneydew: [240, 255, 240],\n\thotpink: [255, 105, 180],\n\tindianred: [205, 92, 92],\n\tindigo: [75, 0, 130],\n\tivory: [255, 255, 240],\n\tkhaki: [240, 230, 140],\n\tlavender: [230, 230, 250],\n\tlavenderblush: [255, 240, 245],\n\tlawngreen: [124, 252, 0],\n\tlemonchiffon: [255, 250, 205],\n\tlightblue: [173, 216, 230],\n\tlightcoral: [240, 128, 128],\n\tlightcyan: [224, 255, 255],\n\tlightgoldenrodyellow: [250, 250, 210],\n\tlightgray: [211, 211, 211],\n\tlightgreen: [144, 238, 144],\n\tlightgrey: [211, 211, 211],\n\tlightpink: [255, 182, 193],\n\tlightsalmon: [255, 160, 122],\n\tlightseagreen: [32, 178, 170],\n\tlightskyblue: [135, 206, 250],\n\tlightslategray: [119, 136, 153],\n\tlightslategrey: [119, 136, 153],\n\tlightsteelblue: [176, 196, 222],\n\tlightyellow: [255, 255, 224],\n\tlime: [0, 255, 0],\n\tlimegreen: [50, 205, 50],\n\tlinen: [250, 240, 230],\n\tmagenta: [255, 0, 255],\n\tmaroon: [128, 0, 0],\n\tmediumaquamarine: [102, 205, 170],\n\tmediumblue: [0, 0, 205],\n\tmediumorchid: [186, 85, 211],\n\tmediumpurple: [147, 112, 219],\n\tmediumseagreen: [60, 179, 113],\n\tmediumslateblue: [123, 104, 238],\n\tmediumspringgreen: [0, 250, 154],\n\tmediumturquoise: [72, 209, 204],\n\tmediumvioletred: [199, 21, 133],\n\tmidnightblue: [25, 25, 112],\n\tmintcream: [245, 255, 250],\n\tmistyrose: [255, 228, 225],\n\tmoccasin: [255, 228, 181],\n\tnavajowhite: [255, 222, 173],\n\tnavy: [0, 0, 128],\n\toldlace: [253, 245, 230],\n\tolive: [128, 128, 0],\n\tolivedrab: [107, 142, 35],\n\torange: [255, 165, 0],\n\torangered: [255, 69, 0],\n\torchid: [218, 112, 214],\n\tpalegoldenrod: [238, 232, 170],\n\tpalegreen: [152, 251, 152],\n\tpaleturquoise: [175, 238, 238],\n\tpalevioletred: [219, 112, 147],\n\tpapayawhip: [255, 239, 213],\n\tpeachpuff: [255, 218, 185],\n\tperu: [205, 133, 63],\n\tpink: [255, 192, 203],\n\tplum: [221, 160, 221],\n\tpowderblue: [176, 224, 230],\n\tpurple: [128, 0, 128],\n\trebeccapurple: [102, 51, 153],\n\tred: [255, 0, 0],\n\trosybrown: [188, 143, 143],\n\troyalblue: [65, 105, 225],\n\tsaddlebrown: [139, 69, 19],\n\tsalmon: [250, 128, 114],\n\tsandybrown: [244, 164, 96],\n\tseagreen: [46, 139, 87],\n\tseashell: [255, 245, 238],\n\tsienna: [160, 82, 45],\n\tsilver: [192, 192, 192],\n\tskyblue: [135, 206, 235],\n\tslateblue: [106, 90, 205],\n\tslategray: [112, 128, 144],\n\tslategrey: [112, 128, 144],\n\tsnow: [255, 250, 250],\n\tspringgreen: [0, 255, 127],\n\tsteelblue: [70, 130, 180],\n\ttan: [210, 180, 140],\n\tteal: [0, 128, 128],\n\tthistle: [216, 191, 216],\n\ttomato: [255, 99, 71],\n\tturquoise: [64, 224, 208],\n\tviolet: [238, 130, 238],\n\twheat: [245, 222, 179],\n\twhite: [255, 255, 255],\n\twhitesmoke: [245, 245, 245],\n\tyellow: [255, 255, 0],\n\tyellowgreen: [154, 205, 50]\n}\n","/**\n * @module color-parse\n */\nimport names from 'color-name'\n\nexport default parse\n\n/**\n * Base hues\n * http://dev.w3.org/csswg/css-color/#typedef-named-hue\n */\n//FIXME: use external hue detector\nvar baseHues = {\n\tred: 0,\n\torange: 60,\n\tyellow: 120,\n\tgreen: 180,\n\tblue: 240,\n\tpurple: 300\n}\n\n/**\n * Parse color from the string passed\n *\n * @return {Object} A space indicator `space`, an array `values` and `alpha`\n */\nfunction parse(cstr) {\n\tvar m, parts = [], alpha = 1, space\n\n\t//numeric case\n\tif (typeof cstr === 'number') {\n\t\treturn { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\t}\n\tif (typeof cstr === 'number') return { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\n\tcstr = String(cstr).toLowerCase();\n\n\t//keyword\n\tif (names[cstr]) {\n\t\tparts = names[cstr].slice()\n\t\tspace = 'rgb'\n\t}\n\n\t//reserved words\n\telse if (cstr === 'transparent') {\n\t\talpha = 0\n\t\tspace = 'rgb'\n\t\tparts = [0, 0, 0]\n\t}\n\n\t//hex\n\telse if (cstr[0] === '#') {\n\t\tvar base = cstr.slice(1)\n\t\tvar size = base.length\n\t\tvar isShort = size <= 4\n\t\talpha = 1\n\n\t\tif (isShort) {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[0], 16),\n\t\t\t\tparseInt(base[1] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[2], 16)\n\t\t\t]\n\t\t\tif (size === 4) {\n\t\t\t\talpha = parseInt(base[3] + base[3], 16) / 255\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[3], 16),\n\t\t\t\tparseInt(base[4] + base[5], 16)\n\t\t\t]\n\t\t\tif (size === 8) {\n\t\t\t\talpha = parseInt(base[6] + base[7], 16) / 255\n\t\t\t}\n\t\t}\n\n\t\tif (!parts[0]) parts[0] = 0\n\t\tif (!parts[1]) parts[1] = 0\n\t\tif (!parts[2]) parts[2] = 0\n\n\t\tspace = 'rgb'\n\t}\n\n\t// color space\n\telse if (m = /^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\\s*\\(([^\\)]*)\\)/.exec(cstr)) {\n\t\tvar name = m[1]\n\t\tspace = name.replace(/a$/, '')\n\t\tvar dims = space === 'cmyk' ? 4 : space === 'gray' ? 1 : 3\n\t\tparts = m[2].trim().split(/\\s*[,\\/]\\s*|\\s+/)\n\n\t\t// color(srgb-linear x x x) -> srgb-linear(x x x)\n\t\tif (space === 'color') space = parts.shift()\n\n\t\tparts = parts.map(function (x, i) {\n\t\t\t//<percentage>\n\t\t\tif (x[x.length - 1] === '%') {\n\t\t\t\tx = parseFloat(x) / 100\n\t\t\t\t// alpha -> 0..1\n\t\t\t\tif (i === 3) return x\n\t\t\t\t// rgb -> 0..255\n\t\t\t\tif (space === 'rgb') return x * 255\n\t\t\t\t// hsl, hwb H -> 0..100\n\t\t\t\tif (space[0] === 'h') return x * 100\n\t\t\t\t// lch, lab L -> 0..100\n\t\t\t\tif (space[0] === 'l' && !i) return x * 100\n\t\t\t\t// lab A B -> -125..125\n\t\t\t\tif (space === 'lab') return x * 125\n\t\t\t\t// lch C -> 0..150, H -> 0..360\n\t\t\t\tif (space === 'lch') return i < 2 ? x * 150 : x * 360\n\t\t\t\t// oklch/oklab L -> 0..1\n\t\t\t\tif (space[0] === 'o' && !i) return x\n\t\t\t\t// oklab A B -> -0.4..0.4\n\t\t\t\tif (space === 'oklab') return x * 0.4\n\t\t\t\t// oklch C -> 0..0.4, H -> 0..360\n\t\t\t\tif (space === 'oklch') return i < 2 ? x * 0.4 : x * 360\n\t\t\t\t// color(xxx) -> 0..1\n\t\t\t\treturn x\n\t\t\t}\n\n\t\t\t//hue\n\t\t\tif (space[i] === 'h' || (i === 2 && space[space.length - 1] === 'h')) {\n\t\t\t\t//<base-hue>\n\t\t\t\tif (baseHues[x] !== undefined) return baseHues[x]\n\t\t\t\t//<deg>\n\t\t\t\tif (x.endsWith('deg')) return parseFloat(x)\n\t\t\t\t//<turn>\n\t\t\t\tif (x.endsWith('turn')) return parseFloat(x) * 360\n\t\t\t\tif (x.endsWith('grad')) return parseFloat(x) * 360 / 400\n\t\t\t\tif (x.endsWith('rad')) return parseFloat(x) * 180 / Math.PI\n\t\t\t}\n\t\t\tif (x === 'none') return 0\n\t\t\treturn parseFloat(x)\n\t\t});\n\n\t\talpha = parts.length > dims ? parts.pop() : 1\n\t}\n\n\t//named channels case\n\telse if (/[0-9](?:\\s|\\/|,)/.test(cstr)) {\n\t\tparts = cstr.match(/([0-9]+)/g).map(function (value) {\n\t\t\treturn parseFloat(value)\n\t\t})\n\n\t\tspace = cstr.match(/([a-z])/ig)?.join('')?.toLowerCase() || 'rgb'\n\t}\n\n\treturn {\n\t\tspace,\n\t\tvalues: parts,\n\t\talpha\n\t}\n}\n","/**\n * @module color-space/hsl\n */\nimport rgb from './rgb.js';\n\nvar hsl = {\n\tname: 'hsl',\n\tmin: [0, 0, 0],\n\tmax: [360, 100, 100],\n\tchannel: ['hue', 'saturation', 'lightness'],\n\talias: ['HSL'],\n\n\trgb: function (hsl) {\n\t\tvar h = hsl[0] / 360, s = hsl[1] / 100, l = hsl[2] / 100, t1, t2, t3, rgb, val, i = 0;\n\n\t\tif (s === 0) return val = l * 255, [val, val, val];\n\n\t\tt2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\tt1 = 2 * l - t2;\n\n\t\trgb = [0, 0, 0];\n\t\tfor (; i < 3;) {\n\t\t\tt3 = h + 1 / 3 * - (i - 1);\n\t\t\tt3 < 0 ? t3++ : t3 > 1 && t3--;\n\t\t\tval = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 :\n\t\t\t\t2 * t3 < 1 ? t2 :\n\t\t\t\t\t3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 :\n\t\t\t\t\t\tt1;\n\t\t\trgb[i++] = val * 255;\n\t\t}\n\n\t\treturn rgb;\n\t}\n};\n\nexport default (hsl);\n\n\n//extend rgb\nrgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255,\n\t\tg = rgb[1] / 255,\n\t\tb = rgb[2] / 255,\n\t\tmin = Math.min(r, g, b),\n\t\tmax = Math.max(r, g, b),\n\t\tdelta = max - min,\n\t\th, s, l;\n\n\tif (max === min) {\n\t\th = 0;\n\t}\n\telse if (r === max) {\n\t\th = (g - b) / delta;\n\t}\n\telse if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t}\n\telse if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\t//FIXME h is possibly undefined\n\t//@ts-ignore\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t}\n\telse if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t}\n\telse {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n","/** @module  color-rgba */\nimport parse from 'color-parse'\nimport rgb from 'color-space/rgb.js'\nimport hsl from 'color-space/hsl.js'\n\nexport default function rgba(color) {\n\t// template literals\n\tif (Array.isArray(color) && color.raw) color = String.raw(...arguments)\n\tif (color instanceof Number) color = +color\n\n\tvar values, i, l\n\n\t//attempt to parse non-array arguments\n\tvar parsed = parse(color)\n\n\tif (!parsed.space) return []\n\n\tconst min = parsed.space[0] === 'h' ? hsl.min : rgb.min\n\tconst max = parsed.space[0] === 'h' ? hsl.max : rgb.max\n\n\tvalues = Array(3)\n\tvalues[0] = Math.min(Math.max(parsed.values[0], min[0]), max[0])\n\tvalues[1] = Math.min(Math.max(parsed.values[1], min[1]), max[1])\n\tvalues[2] = Math.min(Math.max(parsed.values[2], min[2]), max[2])\n\n\tif (parsed.space[0] === 'h') {\n\t\tvalues = hsl.rgb(values)\n\t}\n\n\tvalues.push(Math.min(Math.max(parsed.alpha, 0), 1))\n\n\treturn values\n}\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend',\n\n  /**\n   * Triggered when loading of additional map data (tiles, images, features) starts.\n   * @event module:ol/MapEvent~MapEvent#loadstart\n   * @api\n   */\n  LOADSTART: 'loadstart',\n\n  /**\n   * Triggered when loading of additional map data has completed.\n   * @event module:ol/MapEvent~MapEvent#loadend\n   * @api\n   */\n  LOADEND: 'loadend',\n};\n\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n","/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport {assert} from './asserts.js';\nimport {listen, unlistenByKey} from './events.js';\n\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n\n/***\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object~BaseObject} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature.js';\n * import Polygon from 'ol/geom/Polygon.js';\n * import Point from 'ol/geom/Point.js';\n *\n * const feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon',\n * });\n *\n * // get the polygon geometry\n * const poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * const point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n */\nclass Feature extends BaseObject {\n  /**\n   * @param {Geometry|ObjectWithGeometry<Geometry>} [geometryOrProperties]\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n  constructor(geometryOrProperties) {\n    super();\n\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {FeatureOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = undefined;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.geometryName_ = 'geometry';\n\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n    this.style_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n    this.styleFunction_ = undefined;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.geometryChangeKey_ = null;\n\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n\n    if (geometryOrProperties) {\n      if (\n        typeof (\n          /** @type {?} */ (geometryOrProperties).getSimplifiedGeometry\n        ) === 'function'\n      ) {\n        const geometry = /** @type {Geometry} */ (geometryOrProperties);\n        this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        const properties = geometryOrProperties;\n        this.setProperties(properties);\n      }\n    }\n  }\n\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature<Geometry>} The clone.\n   * @api\n   */\n  clone() {\n    const clone = /** @type {Feature<Geometry>} */ (\n      new Feature(this.hasProperties() ? this.getProperties() : null)\n    );\n    clone.setGeometryName(this.getGeometryName());\n    const geometry = this.getGeometry();\n    if (geometry) {\n      clone.setGeometry(/** @type {Geometry} */ (geometry.clone()));\n    }\n    const style = this.getStyle();\n    if (style) {\n      clone.setStyle(style);\n    }\n    return clone;\n  }\n\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {Geometry|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n  getGeometry() {\n    return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n  getGeometryName() {\n    return this.geometryName_;\n  }\n\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChanged_() {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n    const geometry = this.getGeometry();\n    if (geometry) {\n      this.geometryChangeKey_ = listen(\n        geometry,\n        EventType.CHANGE,\n        this.handleGeometryChange_,\n        this,\n      );\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {Geometry|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n  setGeometry(geometry) {\n    this.set(this.geometryName_, geometry);\n  }\n\n  /**\n   * Set the style for the feature to override the layer style.  This can be a\n   * single style object, an array of styles, or a function that takes a\n   * resolution and returns an array of styles. To unset the feature style, call\n   * `setStyle()` without arguments or a falsey value.\n   * @param {import(\"./style/Style.js\").StyleLike} [style] Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n  setStyle(style) {\n    this.style_ = style;\n    this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n    this.changed();\n  }\n\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n  setId(id) {\n    this.id_ = id;\n    this.changed();\n  }\n\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n  setGeometryName(name) {\n    this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.geometryName_ = name;\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.handleGeometryChanged_();\n  }\n}\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  }\n  /**\n   * @type {Array<import(\"./style/Style.js\").default>}\n   */\n  let styles;\n  if (Array.isArray(obj)) {\n    styles = obj;\n  } else {\n    assert(\n      typeof (/** @type {?} */ (obj).getZIndex) === 'function',\n      'Expected an `ol/style/Style` or an array of `ol/style/Style.js`',\n    );\n    const style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n    styles = [style];\n  }\n  return function () {\n    return styles;\n  };\n}\nexport default Feature;\n","/**\n * @module ol/MapBrowserEventHandler\n */\n\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport {PASSIVE_EVENT_LISTENERS} from './has.js';\nimport {listen, unlistenByKey} from './events.js';\n\nclass MapBrowserEventHandler extends Target {\n  /**\n   * @param {import(\"./Map.js\").default} map The map with the viewport to listen to events on.\n   * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n   */\n  constructor(map, moveTolerance) {\n    super(map);\n\n    /**\n     * This is the element that we will listen to the real events on.\n     * @type {import(\"./Map.js\").default}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {ReturnType<typeof setTimeout>}\n     * @private\n     */\n    this.clickTimeoutId_;\n\n    /**\n     * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n     * @type {boolean}\n     */\n    this.emulateClicks_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_ = false;\n\n    /**\n     * @type {!Array<import(\"./events.js\").EventsKey>}\n     * @private\n     */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n\n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * Set on pointerdown.\n     * @type {PointerEvent|null}\n     * @private\n     */\n    this.down_ = null;\n\n    const element = this.map_.getViewport();\n\n    /**\n     * @type {Array<PointerEvent>}\n     * @private\n     */\n    this.activePointers_ = [];\n\n    /**\n     * @type {!Object<number, Event>}\n     * @private\n     */\n    this.trackedTouches_ = {};\n\n    this.element_ = element;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.pointerdownListenerKey_ = listen(\n      element,\n      PointerEventType.POINTERDOWN,\n      this.handlePointerDown_,\n      this,\n    );\n\n    /**\n     * @type {PointerEvent}\n     * @private\n     */\n    this.originalPointerMoveEvent_;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.relayedListenerKey_ = listen(\n      element,\n      PointerEventType.POINTERMOVE,\n      this.relayMoveEvent_,\n      this,\n    );\n\n    /**\n     * @private\n     */\n    this.boundHandleTouchMove_ = this.handleTouchMove_.bind(this);\n\n    this.element_.addEventListener(\n      EventType.TOUCHMOVE,\n      this.boundHandleTouchMove_,\n      PASSIVE_EVENT_LISTENERS ? {passive: false} : false,\n    );\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  emulateClick_(pointerEvent) {\n    let newEvent = new MapBrowserEvent(\n      MapBrowserEventType.CLICK,\n      this.map_,\n      pointerEvent,\n    );\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== undefined) {\n      // double-click\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = undefined;\n      newEvent = new MapBrowserEvent(\n        MapBrowserEventType.DBLCLICK,\n        this.map_,\n        pointerEvent,\n      );\n      this.dispatchEvent(newEvent);\n    } else {\n      // click\n      this.clickTimeoutId_ = setTimeout(() => {\n        this.clickTimeoutId_ = undefined;\n        const newEvent = new MapBrowserEvent(\n          MapBrowserEventType.SINGLECLICK,\n          this.map_,\n          pointerEvent,\n        );\n        this.dispatchEvent(newEvent);\n      }, 250);\n    }\n  }\n\n  /**\n   * Keeps track on how many pointers are currently active.\n   *\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  updateActivePointers_(pointerEvent) {\n    const event = pointerEvent;\n    const id = event.pointerId;\n\n    if (\n      event.type == MapBrowserEventType.POINTERUP ||\n      event.type == MapBrowserEventType.POINTERCANCEL\n    ) {\n      delete this.trackedTouches_[id];\n      for (const pointerId in this.trackedTouches_) {\n        if (this.trackedTouches_[pointerId].target !== event.target) {\n          // Some platforms assign a new pointerId when the target changes.\n          // If this happens, delete one tracked pointer. If there is more\n          // than one tracked pointer for the old target, it will be cleared\n          // by subsequent POINTERUP events from other pointers.\n          delete this.trackedTouches_[pointerId];\n          break;\n        }\n      }\n    } else if (\n      event.type == MapBrowserEventType.POINTERDOWN ||\n      event.type == MapBrowserEventType.POINTERMOVE\n    ) {\n      this.trackedTouches_[id] = event;\n    }\n    this.activePointers_ = Object.values(this.trackedTouches_);\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerUp_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserEvent(\n      MapBrowserEventType.POINTERUP,\n      this.map_,\n      pointerEvent,\n      undefined,\n      undefined,\n      this.activePointers_,\n    );\n    this.dispatchEvent(newEvent);\n\n    // We emulate click events on left mouse button click, touch contact, and pen\n    // contact. isMouseActionButton returns true in these cases (evt.button is set\n    // to 0).\n    // See http://www.w3.org/TR/pointerevents/#button-states\n    // We only fire click, singleclick, and doubleclick if nobody has called\n    // event.preventDefault().\n    if (\n      this.emulateClicks_ &&\n      !newEvent.defaultPrevented &&\n      !this.dragging_ &&\n      this.isMouseActionButton_(pointerEvent)\n    ) {\n      this.emulateClick_(this.down_);\n    }\n\n    if (this.activePointers_.length === 0) {\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} If the left mouse button was pressed.\n   * @private\n   */\n  isMouseActionButton_(pointerEvent) {\n    return pointerEvent.button === 0;\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerDown_(pointerEvent) {\n    this.emulateClicks_ = this.activePointers_.length === 0;\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserEvent(\n      MapBrowserEventType.POINTERDOWN,\n      this.map_,\n      pointerEvent,\n      undefined,\n      undefined,\n      this.activePointers_,\n    );\n    this.dispatchEvent(newEvent);\n\n    this.down_ = new PointerEvent(pointerEvent.type, pointerEvent);\n    Object.defineProperty(this.down_, 'target', {\n      writable: false,\n      value: pointerEvent.target,\n    });\n\n    if (this.dragListenerKeys_.length === 0) {\n      const doc = this.map_.getOwnerDocument();\n      this.dragListenerKeys_.push(\n        listen(\n          doc,\n          MapBrowserEventType.POINTERMOVE,\n          this.handlePointerMove_,\n          this,\n        ),\n        listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n         * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n         * the `pointerup` and `pointermove` listeners.\n         *\n         * The reason for this is the following: `TouchSource.vacuumTouches_()`\n         * issues `pointercancel` events, when there was no `touchend` for a\n         * `touchstart`. Now, let's say a first `touchstart` is registered on\n         * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n         * But `documentPointerEventHandler_` doesn't know about the first\n         * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n         * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n         * only registered there.\n         */\n        listen(\n          this.element_,\n          MapBrowserEventType.POINTERCANCEL,\n          this.handlePointerUp_,\n          this,\n        ),\n      );\n      if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n        this.dragListenerKeys_.push(\n          listen(\n            this.element_.getRootNode(),\n            MapBrowserEventType.POINTERUP,\n            this.handlePointerUp_,\n            this,\n          ),\n        );\n      }\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerMove_(pointerEvent) {\n    // Between pointerdown and pointerup, pointermove events are triggered.\n    // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n    // moved a significant distance.\n    if (this.isMoving_(pointerEvent)) {\n      this.updateActivePointers_(pointerEvent);\n      this.dragging_ = true;\n      const newEvent = new MapBrowserEvent(\n        MapBrowserEventType.POINTERDRAG,\n        this.map_,\n        pointerEvent,\n        this.dragging_,\n        undefined,\n        this.activePointers_,\n      );\n      this.dispatchEvent(newEvent);\n    }\n  }\n\n  /**\n   * Wrap and relay a pointermove event.\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  relayMoveEvent_(pointerEvent) {\n    this.originalPointerMoveEvent_ = pointerEvent;\n    const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(\n      new MapBrowserEvent(\n        MapBrowserEventType.POINTERMOVE,\n        this.map_,\n        pointerEvent,\n        dragging,\n      ),\n    );\n  }\n\n  /**\n   * Flexible handling of a `touch-action: none` css equivalent: because calling\n   * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n   * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n   * when an interaction (currently `DragPan` handles the event.\n   * @param {TouchEvent} event Event.\n   * @private\n   */\n  handleTouchMove_(event) {\n    // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n    // may not be initialized yet when we get here on a platform without native pointer events,\n    // when elm-pep is used as pointer events polyfill.\n    const originalEvent = this.originalPointerMoveEvent_;\n    if (\n      (!originalEvent || originalEvent.defaultPrevented) &&\n      (typeof event.cancelable !== 'boolean' || event.cancelable === true)\n    ) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} Is moving.\n   * @private\n   */\n  isMoving_(pointerEvent) {\n    return (\n      this.dragging_ ||\n      Math.abs(pointerEvent.clientX - this.down_.clientX) >\n        this.moveTolerance_ ||\n      Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_\n    );\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    if (this.relayedListenerKey_) {\n      unlistenByKey(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    this.element_.removeEventListener(\n      EventType.TOUCHMOVE,\n      this.boundHandleTouchMove_,\n    );\n\n    if (this.pointerdownListenerKey_) {\n      unlistenByKey(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n\n    this.element_ = null;\n    super.disposeInternal();\n  }\n}\n\nexport default MapBrowserEventHandler;\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @protected\n     */\n    this.disposed = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed) {\n      this.disposed = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * CIE LUV (C'est la vie)\n *\n * @module color-space/luv\n */\nimport xyz from './xyz.js';\n\nvar luv = {\n\tname: 'luv',\n\t//NOTE: luv has no rigidly defined limits\n\t//easyrgb fails to get proper coords\n\t//boronine states no rigid limits\n\t//colorMine refers this ones:\n\tmin: [0, -134, -140],\n\tmax: [100, 224, 122],\n\tchannel: ['lightness', 'u', 'v'],\n\talias: ['LUV', 'cieluv', 'cie1976'],\n\n\txyz: function (arg, i, o) {\n\t\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\t\tl = arg[0], u = arg[1], v = arg[2];\n\n\t\tif (l === 0) return [0, 0, 0];\n\n\t\t//get constants\n\t\t//var e = 0.008856451679035631; //(6/29)^3\n\t\tvar k = 0.0011070564598794539; //(3/29)^3\n\n\t\t//get illuminant/observer\n\t\ti = i || 'D65';\n\t\to = o || 2;\n\n\t\txn = xyz.whitepoint[o][i][0];\n\t\tyn = xyz.whitepoint[o][i][1];\n\t\tzn = xyz.whitepoint[o][i][2];\n\n\t\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\t\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\t\t// un = 0.19783000664283;\n\t\t// vn = 0.46831999493879;\n\n\n\t\t_u = u / (13 * l) + un || 0;\n\t\t_v = v / (13 * l) + vn || 0;\n\n\t\ty = l > 8 ? yn * Math.pow((l + 16) / 116, 3) : yn * l * k;\n\n\t\t//wikipedia method\n\t\tx = y * 9 * _u / (4 * _v) || 0;\n\t\tz = y * (12 - 3 * _u - 20 * _v) / (4 * _v) || 0;\n\n\t\t//boronine method\n\t\t//https://github.com/boronine/husl/blob/master/husl.coffee#L201\n\t\t// x = 0 - (9 * y * _u) / ((_u - 4) * _v - _u * _v);\n\t\t// z = (9 * y - (15 * _v * y) - (_v * x)) / (3 * _v);\n\n\t\treturn [x, y, z];\n\t}\n};\n\nexport default (luv);\n\n// http://www.brucelindbloom.com/index.html?Equations.html\n// https://github.com/boronine/husl/blob/master/husl.coffee\n//i - illuminant\n//o - observer\nxyz.luv = function (arg, i, o) {\n\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\n\t//get constants\n\tvar e = 0.008856451679035631; //(6/29)^3\n\tvar k = 903.2962962962961; //(29/3)^3\n\n\t//get illuminant/observer coords\n\ti = i || 'D65';\n\to = o || 2;\n\n\txn = xyz.whitepoint[o][i][0];\n\tyn = xyz.whitepoint[o][i][1];\n\tzn = xyz.whitepoint[o][i][2];\n\n\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\n\n\tx = arg[0], y = arg[1], z = arg[2];\n\n\n\t_u = (4 * x) / (x + (15 * y) + (3 * z)) || 0;\n\t_v = (9 * y) / (x + (15 * y) + (3 * z)) || 0;\n\n\tvar yr = y / yn;\n\n\tl = yr <= e ? k * yr : 116 * Math.pow(yr, 1 / 3) - 16;\n\n\tu = 13 * l * (_u - un);\n\tv = 13 * l * (_v - vn);\n\n\treturn [l, u, v];\n};\n","/**\n * Cylindrical CIE LUV\n *\n * @module color-space/lchuv\n */\nimport luv from './luv.js';\nimport xyz from './xyz.js';\n\n// cylindrical luv\nvar lchuv = {\n\tname: 'lchuv',\n\tchannel: ['lightness', 'chroma', 'hue'],\n\talias: ['LCHuv', 'cielchuv'],\n\tmin: [0, 0, 0],\n\tmax: [100, 100, 360],\n\n\tluv: function (luv) {\n\t\tvar l = luv[0],\n\t\t\tc = luv[1],\n\t\t\th = luv[2],\n\t\t\tu, v, hr;\n\n\t\thr = h / 360 * 2 * Math.PI;\n\t\tu = c * Math.cos(hr);\n\t\tv = c * Math.sin(hr);\n\t\treturn [l, u, v];\n\t},\n\n\txyz: function (arg) {\n\t\treturn luv.xyz(lchuv.luv(arg));\n\t}\n};\n\nexport default (lchuv);\n\nluv.lchuv = function (luv) {\n\tvar l = luv[0], u = luv[1], v = luv[2];\n\n\tvar c = Math.sqrt(u * u + v * v);\n\tvar hr = Math.atan2(v, u);\n\tvar h = hr * 360 / 2 / Math.PI;\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\treturn [l, c, h]\n};\n\nxyz.lchuv = function (arg) {\n\treturn luv.lchuv(xyz.luv(arg));\n};\n","/**\n * CIE XYZ\n *\n * @module  color-space/xyz\n */\nimport rgb from './rgb.js';\n\nconst xyz = {\n\tname: 'xyz',\n\tmin: [0, 0, 0],\n\tchannel: ['X', 'Y', 'Z'],\n\talias: ['XYZ', 'ciexyz', 'cie1931'],\n\n\t// Whitepoint reference values with observer/illuminant\n\t// http://en.wikipedia.org/wiki/Standard_illuminant\n\twhitepoint: {\n\t\t//1931 2\n\t\t2: {\n\t\t\t//incadescent\n\t\t\tA: [109.85, 100, 35.585],\n\t\t\t// B:[],\n\t\t\tC: [98.074, 100, 118.232],\n\t\t\tD50: [96.422, 100, 82.521],\n\t\t\tD55: [95.682, 100, 92.149],\n\t\t\t//daylight\n\t\t\tD65: [95.045592705167, 100, 108.9057750759878],\n\t\t\tD75: [94.972, 100, 122.638],\n\t\t\t//flourescent\n\t\t\t// F1: [],\n\t\t\tF2: [99.187, 100, 67.395],\n\t\t\t// F3: [],\n\t\t\t// F4: [],\n\t\t\t// F5: [],\n\t\t\t// F6:[],\n\t\t\tF7: [95.044, 100, 108.755],\n\t\t\t// F8: [],\n\t\t\t// F9: [],\n\t\t\t// F10: [],\n\t\t\tF11: [100.966, 100, 64.370],\n\t\t\t// F12: [],\n\t\t\tE: [100, 100, 100]\n\t\t},\n\n\t\t//1964  10\n\t\t10: {\n\t\t\t//incadescent\n\t\t\tA: [111.144, 100, 35.200],\n\t\t\tC: [97.285, 100, 116.145],\n\t\t\tD50: [96.720, 100, 81.427],\n\t\t\tD55: [95.799, 100, 90.926],\n\t\t\t//daylight\n\t\t\tD65: [94.811, 100, 107.304],\n\t\t\tD75: [94.416, 100, 120.641],\n\t\t\t//flourescent\n\t\t\tF2: [103.280, 100, 69.026],\n\t\t\tF7: [95.792, 100, 107.687],\n\t\t\tF11: [103.866, 100, 65.627],\n\t\t\tE: [100, 100, 100]\n\t\t}\n\t}\n};\n\n\n/**\n * Top values are the whitepoints top values, default are D65\n */\nxyz.max = xyz.whitepoint[2].D65;\n\n\n/**\n * Transform xyz to rgb\n *\n * @param {Array<number>} _xyz Array of xyz values\n * @param {Array<number>} white Whitepoint reference\n * @return {Array<number>} RGB values\n */\nxyz.rgb = function (_xyz, white) {\n\t// FIXME: make sure we have to divide like this. Probably we have to replace matrix as well then\n\twhite = white || xyz.whitepoint[2].E;\n\n\tvar x = _xyz[0] / white[0],\n\t\ty = _xyz[1] / white[1],\n\t\tz = _xyz[2] / white[2],\n\t\tr, g, b;\n\n\t// assume sRGB\n\t// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n\tr = (x * 3.240969941904521) + (y * -1.537383177570093) + (z * -0.498610760293);\n\tg = (x * -0.96924363628087) + (y * 1.87596750150772) + (z * 0.041555057407175);\n\tb = (x * 0.055630079696993) + (y * -0.20397695888897) + (z * 1.056971514242878);\n\n\tr = r > 0.0031308 ? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r = (r * 12.92);\n\n\tg = g > 0.0031308 ? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g = (g * 12.92);\n\n\tb = b > 0.0031308 ? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b = (b * 12.92);\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n}\n\n\n\n/**\n * RGB to XYZ\n *\n * @param {Array<number>} rgb RGB channels\n *\n * @return {Array<number>} XYZ channels\n */\nrgb.xyz = function (rgb, white) {\n\tvar r = rgb[0] / 255,\n\t\tg = rgb[1] / 255,\n\t\tb = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.41239079926595) + (g * 0.35758433938387) + (b * 0.18048078840183);\n\tvar y = (r * 0.21263900587151) + (g * 0.71516867876775) + (b * 0.072192315360733);\n\tvar z = (r * 0.019330818715591) + (g * 0.11919477979462) + (b * 0.95053215224966);\n\n\twhite = white || xyz.whitepoint[2].E;\n\n\treturn [x * white[0], y * white[1], z * white[2]];\n};\n\n\n\nexport default xyz;\n","/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map event.\n */\nclass MapEvent extends Event {\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./Map.js\").default} map Map.\n   * @param {?import(\"./Map.js\").FrameState} [frameState] Frame state.\n   */\n  constructor(type, map, frameState) {\n    super(type);\n\n    /**\n     * The map where the event occurred.\n     * @type {import(\"./Map.js\").default}\n     * @api\n     */\n    this.map = map;\n\n    /**\n     * The frame state at the time of the event.\n     * @type {?import(\"./Map.js\").FrameState}\n     * @api\n     */\n    this.frameState = frameState !== undefined ? frameState : null;\n  }\n}\n\nexport default MapEvent;\n","/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable.js'\r\nimport ol_control_Control from 'ol/control/Control.js'\r\nimport ol_layer_Tile from 'ol/layer/Tile.js'\r\nimport ol_layer_Vector from 'ol/layer/Vector.js'\r\nimport ol_layer_VectorTile from 'ol/layer/VectorTile.js'\r\n// ol < 6 compatibility VectorImage is not defined\r\n// import ol_layer_VectorImage from 'ol/layer/VectorImage.js'\r\nimport ol_layer_Image from 'ol/layer/Image.js'\r\nimport ol_layer_Heatmap from 'ol/layer/Heatmap.js'\r\nimport {intersects as ol_extent_intersects} from 'ol/extent.js'\r\n\r\nimport ol_ext_element from '../util/element.js'\r\n\r\n/** Layer Switcher Control.\r\n * @fires select\r\n * @fires drawlist\r\n * @fires toggle\r\n * @fires reorder-start\r\n * @fires reorder-end\r\n * @fires layer:visible\r\n * @fires layer:opacity\r\n * @fires layer:keydown\r\n * \r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} options\r\n *  @param {boolean} options.selection enable layer selection when click on the title\r\n *  @param {function} options.displayInLayerSwitcher function that takes a layer and return a boolean if the layer is displayed in the switcher, default test the displayInLayerSwitcher layer attribute\r\n *  @param {boolean} options.show_progress show a progress bar on tile layers, default false\r\n *  @param {boolean} options.mouseover show the panel on mouseover, default false\r\n *  @param {boolean} options.reordering allow layer reordering, default true\r\n *  @param {boolean} options.trash add a trash button to delete the layer, default false\r\n *  @param {function} options.oninfo callback on click on info button, if none no info button is shown DEPRECATED: use on(info) instead\r\n *  @param {boolean} options.extent add an extent button to zoom to the extent of the layer\r\n *  @param {function} options.onextent callback when click on extent, default fits view to extent\r\n *  @param {number} options.drawDelay delay in ms to redraw the layer (usefull to prevent flickering when manipulating the layers)\r\n *  @param {boolean} options.collapsed collapse the layerswitcher at beginning, default true\r\n *  @param {ol.layer.Group} options.layerGroup a layer group to display in the switcher, default display all layers of the map\r\n *  @param {boolean} options.noScroll prevent handle scrolling, default false\r\n *  @param {function} options.onchangeCheck optional callback on click on checkbox, you can call this method for doing operations after check/uncheck a layer\r\n *\r\n * Layers attributes that control the switcher\r\n *\t- allwaysOnTop {boolean} true to force layer stay on top of the others while reordering, default false\r\n *\t- displayInLayerSwitcher {boolean} display the layer in switcher, default true\r\n *\t- noSwitcherDelete {boolean} to prevent layer deletion (w. trash option = true), default false\r\n */\r\nvar ol_control_LayerSwitcher = class olcontrolLayerSwitcher extends ol_control_Control {\r\n  constructor(options) {\r\n    options = options || {}\r\n    var element = ol_ext_element.create('DIV', {\r\n      className: options.switcherClass || 'ol-layerswitcher'\r\n    })\r\n    super({\r\n      element: element,\r\n      target: options.target\r\n    })\r\n    \r\n    var self = this\r\n    this.dcount = 0\r\n    this.show_progress = options.show_progress\r\n    this.oninfo = (typeof (options.oninfo) == 'function' ? options.oninfo : null)\r\n    this.onextent = (typeof (options.onextent) == 'function' ? options.onextent : null)\r\n    this.hasextent = options.extent || options.onextent\r\n    this.hastrash = options.trash\r\n    this.reordering = (options.reordering !== false)\r\n    this._layers = []\r\n    this._layerGroup = (options.layerGroup && options.layerGroup.getLayers) ? options.layerGroup : null\r\n    this.onchangeCheck = (typeof (options.onchangeCheck) == \"function\" ? options.onchangeCheck : null)\r\n\r\n    // displayInLayerSwitcher\r\n    if (typeof (options.displayInLayerSwitcher) === 'function') {\r\n      this.displayInLayerSwitcher = options.displayInLayerSwitcher\r\n    }\r\n\r\n    // Insert in the map\r\n    if (!options.target) {\r\n      element.classList.add('ol-unselectable')\r\n      element.classList.add('ol-control')\r\n      element.classList.add(options.collapsed !== false ? 'ol-collapsed' : 'ol-forceopen')\r\n\r\n      this.button = ol_ext_element.create('BUTTON', {\r\n        type: 'button',\r\n        parent: element\r\n      })\r\n      this.button.addEventListener('touchstart', function (e) {\r\n        element.classList.toggle('ol-forceopen')\r\n        element.classList.add('ol-collapsed')\r\n        self.dispatchEvent({ type: 'toggle', collapsed: element.classList.contains('ol-collapsed') })\r\n        e.preventDefault()\r\n        self.overflow()\r\n      })\r\n      this.button.addEventListener('click', function () {\r\n        element.classList.toggle('ol-forceopen')\r\n        element.classList.add('ol-collapsed')\r\n        self.dispatchEvent({ type: 'toggle', collapsed: !element.classList.contains('ol-forceopen') })\r\n        self.overflow()\r\n      })\r\n\r\n      if (options.mouseover) {\r\n        element.addEventListener('mouseleave', function () {\r\n          element.classList.add(\"ol-collapsed\")\r\n          self.dispatchEvent({ type: 'toggle', collapsed: true })\r\n        })\r\n        element.addEventListener('mouseover', function () {\r\n          element.classList.remove(\"ol-collapsed\")\r\n          self.dispatchEvent({ type: 'toggle', collapsed: false })\r\n        })\r\n      }\r\n\r\n      if (options.minibar)\r\n        options.noScroll = true\r\n      if (!options.noScroll) {\r\n        this.topv = ol_ext_element.create('DIV', {\r\n          className: 'ol-switchertopdiv',\r\n          parent: element,\r\n          click: function () {\r\n            self.overflow(\"+50%\")\r\n          }\r\n        })\r\n\r\n        this.botv = ol_ext_element.create('DIV', {\r\n          className: 'ol-switcherbottomdiv',\r\n          parent: element,\r\n          click: function () {\r\n            self.overflow(\"-50%\")\r\n          }\r\n        })\r\n      }\r\n      this._noScroll = options.noScroll\r\n    }\r\n\r\n    this.panel_ = ol_ext_element.create('UL', {\r\n      className: 'panel',\r\n    })\r\n    this.panelContainer_ = ol_ext_element.create('DIV', {\r\n      className: 'panel-container',\r\n      html: this.panel_,\r\n      parent: element\r\n    })\r\n    // Handle mousewheel\r\n    if (!options.target && !options.noScroll) {\r\n      ol_ext_element.addListener(this.panel_, 'mousewheel DOMMouseScroll onmousewheel', function (e) {\r\n        if (self.overflow(Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))))) {\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n        }\r\n      })\r\n    }\r\n\r\n    this.header_ = ol_ext_element.create('LI', {\r\n      className: 'ol-header',\r\n      parent: this.panel_\r\n    })\r\n\r\n    this.set('drawDelay', options.drawDelay || 0)\r\n    this.set('selection', options.selection)\r\n\r\n    if (options.minibar) {\r\n      // Wait init complete (for child classes)\r\n      setTimeout(function () {\r\n        var mbar = ol_ext_element.scrollDiv(this.panelContainer_, {\r\n          mousewheel: true,\r\n          vertical: true,\r\n          minibar: true\r\n        })\r\n        this.on(['drawlist', 'toggle'], function () {\r\n          mbar.refresh()\r\n        })\r\n      }.bind(this))\r\n    }\r\n  }\r\n  /** Test if a layer should be displayed in the switcher\r\n   * @param {ol.layer} layer\r\n   * @return {boolean} true if the layer is displayed\r\n   */\r\n  displayInLayerSwitcher(layer) {\r\n    return (layer.get('displayInLayerSwitcher') !== false)\r\n  }\r\n  /**\r\n   * Set the map instance the control is associated with.\r\n   * @param {_ol_Map_} map The map instance.\r\n   */\r\n  setMap(map) {\r\n    super.setMap(map)\r\n    this.drawPanel()\r\n\r\n    if (this._listener) {\r\n      for (var i in this._listener){\r\n        ol_Observable_unByKey(this._listener[i])\r\n      }\r\n    }\r\n    this._listener = null\r\n\r\n    // Get change (new layer added or removed)\r\n    if (map) {\r\n      this._listener = {\r\n        moveend: map.on('moveend', this.viewChange.bind(this)),\r\n        size: map.on('change:size', this.overflow.bind(this))\r\n      }\r\n      // Listen to a layer group\r\n      if (this._layerGroup) {\r\n        this._listener.change = this._layerGroup.getLayers().on('change:length', this.drawPanel.bind(this))\r\n      } else {\r\n        //Listen to all layers\r\n        this._listener.change = map.getLayerGroup().getLayers().on('change:length', this.drawPanel.bind(this))\r\n      }\r\n    }\r\n  }\r\n  /** Show control\r\n   */\r\n  show() {\r\n    this.element.classList.add('ol-forceopen')\r\n    this.overflow()\r\n    this.dispatchEvent({ type: 'toggle', collapsed: false })\r\n  }\r\n  /** Hide control\r\n   */\r\n  hide() {\r\n    this.element.classList.remove('ol-forceopen')\r\n    this.overflow()\r\n    this.dispatchEvent({ type: 'toggle', collapsed: true })\r\n  }\r\n  /** Toggle control\r\n   */\r\n  toggle() {\r\n    this.element.classList.toggle(\"ol-forceopen\")\r\n    this.overflow()\r\n    this.dispatchEvent({ type: 'toggle', collapsed: !this.isOpen() })\r\n  }\r\n  /** Is control open\r\n   * @return {boolean}\r\n   */\r\n  isOpen() {\r\n    return this.element.classList.contains(\"ol-forceopen\")\r\n  }\r\n  /** Add a custom header\r\n   * @param {Element|string} html content html\r\n   */\r\n  setHeader(html) {\r\n    ol_ext_element.setHTML(this.header_, html)\r\n  }\r\n  /** Calculate overflow and add scrolls\r\n   * @param {Number} dir scroll direction -1|0|1|'+50%'|'-50%'\r\n   * @private\r\n   */\r\n  overflow(dir) {\r\n    if (this.button && !this._noScroll) {\r\n      // Nothing to show\r\n      if (ol_ext_element.hidden(this.panel_)) {\r\n        ol_ext_element.setStyle(this.element, { height: 'auto' })\r\n        return\r\n      }\r\n      // Calculate offset\r\n      var h = ol_ext_element.outerHeight(this.element)\r\n      var hp = ol_ext_element.outerHeight(this.panel_)\r\n      var dh = this.button.offsetTop + ol_ext_element.outerHeight(this.button)\r\n      //var dh = this.button.position().top + this.button.outerHeight(true);\r\n      var top = this.panel_.offsetTop - dh\r\n      if (hp > h - dh) {\r\n        // Bug IE: need to have an height defined\r\n        ol_ext_element.setStyle(this.element, { height: '100%' })\r\n        var li = this.panel_.querySelectorAll('li.ol-visible .li-content')[0]\r\n        var lh = li ? 2 * ol_ext_element.getStyle(li, 'height') : 0\r\n        switch (dir) {\r\n          case 1: top += lh; break\r\n          case -1: top -= lh; break\r\n          case \"+50%\": top += Math.round(h / 2); break\r\n          case \"-50%\": top -= Math.round(h / 2); break\r\n          default: break\r\n        }\r\n        // Scroll div\r\n        if (top + hp <= h - 3 * dh / 2) {\r\n          top = h - 3 * dh / 2 - hp\r\n          ol_ext_element.hide(this.botv)\r\n        } else {\r\n          ol_ext_element.show(this.botv)\r\n        }\r\n        if (top >= 0) {\r\n          top = 0\r\n          ol_ext_element.hide(this.topv)\r\n        } else {\r\n          ol_ext_element.show(this.topv)\r\n        }\r\n        // Scroll ?\r\n        ol_ext_element.setStyle(this.panel_, { top: top + \"px\" })\r\n        return true\r\n      } else {\r\n        ol_ext_element.setStyle(this.element, { height: \"auto\" })\r\n        ol_ext_element.setStyle(this.panel_, { top: 0 })\r\n        ol_ext_element.hide(this.botv)\r\n        ol_ext_element.hide(this.topv)\r\n        return false\r\n      }\r\n    }\r\n    else\r\n      return false\r\n  }\r\n  /** Set the layer associated with a li\r\n   * @param {Element} li\r\n   * @param {ol.layer} layer\r\n   * @private\r\n   */\r\n  _setLayerForLI(li, layer) {\r\n    var listeners = []\r\n    if (layer.getLayers) {\r\n      listeners.push(layer.getLayers().on('change:length', this.drawPanel.bind(this)))\r\n    }\r\n    if (li) {\r\n      // Handle opacity change\r\n      listeners.push(layer.on('change:opacity', (function () {\r\n        this.setLayerOpacity(layer, li)\r\n      }).bind(this)))\r\n      // Handle visibility chage\r\n      listeners.push(layer.on('change:visible', (function () {\r\n        this.setLayerVisibility(layer, li)\r\n      }).bind(this)))\r\n    }\r\n    // Other properties\r\n    listeners.push(layer.on('propertychange', (function (e) {\r\n      if (e.key === 'displayInLayerSwitcher'\r\n        || e.key === 'openInLayerSwitcher'\r\n        || e.key === 'title'\r\n        || e.key === 'name') {\r\n        this.drawPanel(e)\r\n      }\r\n    }).bind(this)))\r\n    this._layers.push({ li: li, layer: layer, listeners: listeners })\r\n  }\r\n  /** Set opacity for a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @param {Element} li the list element\r\n   * @private\r\n   */\r\n  setLayerOpacity(layer, li) {\r\n    var i = li.querySelector('.layerswitcher-opacity-cursor')\r\n    if (i){\r\n      i.style.left = (layer.getOpacity() * 100) + \"%\"\r\n    }\r\n    this.dispatchEvent({ type: 'layer:opacity', layer: layer })\r\n  }\r\n  /** Set visibility for a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @param {Element} li the list element\r\n   * @api\r\n   */\r\n  setLayerVisibility(layer, li) {\r\n    var i = li.querySelector('.ol-visibility')\r\n    if (i) {\r\n      i.checked = layer.getVisible()\r\n    }\r\n    if (layer.getVisible()){\r\n      li.classList.add('ol-visible')\r\n    } else{\r\n      li.classList.remove('ol-visible')\r\n    }\r\n    this.dispatchEvent({ type: 'layer:visible', layer: layer })\r\n  }\r\n  /** Clear layers associated with li\r\n   * @private\r\n   */\r\n  _clearLayerForLI() {\r\n    this._layers.forEach(function (li) {\r\n      li.listeners.forEach(function (l) {\r\n        ol_Observable_unByKey(l)\r\n      })\r\n    })\r\n    this._layers = []\r\n  }\r\n  /** Get the layer associated with a li\r\n   * @param {Element} li\r\n   * @return {ol.layer}\r\n   * @private\r\n   */\r\n  _getLayerForLI(li) {\r\n    for (var i = 0, l; l = this._layers[i]; i++) {\r\n      if (l.li === li) {\r\n        return l.layer\r\n      }\r\n    }\r\n    return null\r\n  }\r\n  /**\r\n   * On view change hide layer depending on resolution / extent\r\n   * @private\r\n   */\r\n  viewChange() {\r\n    this.panel_.querySelectorAll('li').forEach(function (li) {\r\n      var l = this._getLayerForLI(li)\r\n      if (l) {\r\n        if (this.testLayerVisibility(l)) {\r\n          li.classList.remove('ol-layer-hidden')\r\n        } else {\r\n          li.classList.add('ol-layer-hidden')\r\n        }\r\n      }\r\n    }.bind(this))\r\n  }\r\n  /** Get control panel\r\n   * @api\r\n   */\r\n  getPanel() {\r\n    return this.panelContainer_\r\n  }\r\n  /** Draw the panel control (prevent multiple draw due to layers manipulation on the map with a delay function)\r\n   * @api\r\n   */\r\n  drawPanel() {\r\n    if (!this.getMap())\r\n      return\r\n    var self = this\r\n    // Multiple event simultaneously / draw once => put drawing in the event queue\r\n    this.dcount++\r\n    setTimeout(function () { self.drawPanel_() }, this.get('drawDelay') || 0)\r\n  }\r\n  /** Delayed draw panel control\r\n   * @private\r\n   */\r\n  drawPanel_() {\r\n    if (--this.dcount || this.dragging_) {\r\n      return\r\n    }\r\n    var scrollTop = this.panelContainer_.scrollTop\r\n\r\n    // Remove existing layers\r\n    this._clearLayerForLI()\r\n    this.panel_.querySelectorAll('li').forEach(function (li) {\r\n      if (!li.classList.contains('ol-header')) li.remove()\r\n    }.bind(this))\r\n    // Draw list\r\n    if (this._layerGroup) {\r\n      this.drawList(this.panel_, this._layerGroup.getLayers())\r\n    } else if (this.getMap()) {\r\n      this.drawList(this.panel_, this.getMap().getLayers())\r\n    }\r\n    // Reset scrolltop\r\n    this.panelContainer_.scrollTop = scrollTop\r\n  }\r\n  /** Change layer visibility according to the baselayer option\r\n   * @param {ol.layer}\r\n   * @param {Array<ol.layer>} related layers\r\n   * @private\r\n   */\r\n  switchLayerVisibility(l, layers) {\r\n    if (!l.get('baseLayer')) {\r\n      l.setVisible(!l.getVisible())\r\n    } else {\r\n      if (!l.getVisible()) {\r\n        l.setVisible(true)\r\n      }\r\n      layers.forEach(function (li) {\r\n        if (l !== li && li.get('baseLayer') && li.getVisible()) {\r\n          li.setVisible(false)\r\n        }\r\n      })\r\n    }\r\n  }\r\n  /** Check if layer is on the map (depending on resolution / zoom and extent)\r\n   * @param {ol.layer}\r\n   * @return {boolean}\r\n   * @private\r\n   */\r\n  testLayerVisibility(layer) {\r\n    if (!this.getMap())\r\n      return true\r\n    var res = this.getMap().getView().getResolution()\r\n    var zoom = this.getMap().getView().getZoom()\r\n    // Calculate visibility on resolution or zoom\r\n    if (layer.getMaxResolution() <= res || layer.getMinResolution() >= res) {\r\n      return false\r\n    } else if (layer.getMinZoom && (layer.getMinZoom() >= zoom || layer.getMaxZoom() < zoom)) {\r\n      return false\r\n    } else {\r\n      // Check extent\r\n      var ex0 = layer.getExtent()\r\n      if (ex0) {\r\n        var ex = this.getMap().getView().calculateExtent(this.getMap().getSize())\r\n        return ol_extent_intersects(ex, ex0)\r\n      }\r\n      return true\r\n    }\r\n  }\r\n  /** Start ordering the list\r\n  *\t@param {event} e drag event\r\n  *\t@private\r\n  */\r\n  dragOrdering_(e) {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    // Get params\r\n    var self = this\r\n    var elt = e.currentTarget.parentNode.parentNode\r\n    var start = true\r\n    var panel = this.panel_\r\n    var pageY\r\n    var pageY0 = e.pageY\r\n      || (e.touches && e.touches.length && e.touches[0].pageY)\r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY)\r\n    var target, dragElt\r\n    var layer, group\r\n    elt.parentNode.classList.add('drag')\r\n\r\n    // Stop ordering\r\n    function stop() {\r\n      if (target) {\r\n        // Get drag on parent\r\n        var drop = layer\r\n        var isSelected = self.getSelection() === drop\r\n        if (drop && target) {\r\n          var collection\r\n          if (group) {\r\n            collection = group.getLayers()\r\n          } else {\r\n            collection = self._layerGroup ? self._layerGroup.getLayers() : self.getMap().getLayers()\r\n          }\r\n          var layers = collection.getArray()\r\n          // Switch layers\r\n          for (var i = 0; i < layers.length; i++) {\r\n            if (layers[i] == drop) {\r\n              collection.removeAt(i)\r\n              break\r\n            }\r\n          }\r\n          for (var j = 0; j < layers.length; j++) {\r\n            if (layers[j] === target) {\r\n              if (i > j) {\r\n                collection.insertAt(j, drop)\r\n              } else {\r\n                collection.insertAt(j + 1, drop)\r\n              }\r\n              break\r\n            }\r\n          }\r\n        }\r\n        if (isSelected) self.selectLayer(drop)\r\n\r\n        self.dispatchEvent({ type: \"reorder-end\", layer: drop, group: group })\r\n      }\r\n\r\n      elt.parentNode.querySelectorAll('li').forEach(function (li) {\r\n        li.classList.remove('dropover')\r\n        li.classList.remove('dropover-after')\r\n        li.classList.remove('dropover-before')\r\n      })\r\n      elt.classList.remove(\"drag\")\r\n      elt.parentNode.classList.remove(\"drag\")\r\n      self.element.classList.remove('drag')\r\n      if (dragElt)\r\n        dragElt.remove()\r\n\r\n      ol_ext_element.removeListener(document, 'mousemove touchmove', move)\r\n      ol_ext_element.removeListener(document, 'mouseup touchend touchcancel', stop)\r\n    }\r\n\r\n    // Ordering\r\n    function move(e) {\r\n      // First drag (more than 2 px) => show drag element (ghost)\r\n      pageY = e.pageY\r\n        || (e.touches && e.touches.length && e.touches[0].pageY)\r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY)\r\n      if (start && Math.abs(pageY0 - pageY) > 2) {\r\n        start = false\r\n        elt.classList.add(\"drag\")\r\n        layer = self._getLayerForLI(elt)\r\n        target = false\r\n        group = self._getLayerForLI(elt.parentNode.parentNode)\r\n        // Ghost div\r\n        dragElt = ol_ext_element.create('LI', {\r\n          className: 'ol-dragover',\r\n          html: elt.innerHTML,\r\n          style: {\r\n            position: \"absolute\",\r\n            \"z-index\": 10000,\r\n            left: elt.offsetLeft,\r\n            opacity: 0.5,\r\n            width: ol_ext_element.outerWidth(elt),\r\n            height: ol_ext_element.getStyle(elt, 'height'),\r\n          },\r\n          parent: panel\r\n        })\r\n        self.element.classList.add('drag')\r\n        self.dispatchEvent({ type: \"reorder-start\", layer: layer, group: group })\r\n      }\r\n      // Start a new drag sequence\r\n      if (!start) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        // Ghost div\r\n        ol_ext_element.setStyle(dragElt, { top: pageY - ol_ext_element.offsetRect(panel).top + panel.scrollTop + 5 })\r\n\r\n        var li\r\n        if (!e.touches) {\r\n          li = e.target\r\n          \r\n          // Get the HTML node within web component on click drag\r\n          if(e.target.shadowRoot){\r\n            li = e.composedPath()[0]\r\n          }\r\n        } else {\r\n          li = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\r\n          \r\n          //Get actual HTML node within web component on touch drag\r\n          while(li.shadowRoot){\r\n            li = li.shadowRoot.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY)\r\n          }\r\n        }\r\n        if (li.classList.contains(\"ol-switcherbottomdiv\")) {\r\n          self.overflow(-1)\r\n        } else if (li.classList.contains(\"ol-switchertopdiv\")) {\r\n          self.overflow(1)\r\n        }\r\n        // Get associated li\r\n        while (li && li.tagName !== 'LI') {\r\n          li = li.parentNode\r\n        }\r\n        if (!li || !li.classList.contains('dropover')) {\r\n          elt.parentNode.querySelectorAll('li').forEach(function (li) {\r\n            li.classList.remove('dropover')\r\n            li.classList.remove('dropover-after')\r\n            li.classList.remove('dropover-before')\r\n          })\r\n        }\r\n        if (li && li.parentNode.classList.contains('drag') && li !== elt) {\r\n          target = self._getLayerForLI(li)\r\n          // Don't mix layer level\r\n          if (target && !target.get('allwaysOnTop') == !layer.get('allwaysOnTop')) {\r\n            li.classList.add(\"dropover\")\r\n            li.classList.add((elt.offsetTop < li.offsetTop) ? 'dropover-after' : 'dropover-before')\r\n          } else {\r\n            target = false\r\n          }\r\n          ol_ext_element.show(dragElt)\r\n        } else {\r\n          target = false\r\n          if (li === elt)\r\n            ol_ext_element.hide(dragElt)\r\n          else\r\n            ol_ext_element.show(dragElt)\r\n        }\r\n\r\n        if (!target)\r\n          dragElt.classList.add(\"forbidden\")\r\n        else\r\n          dragElt.classList.remove(\"forbidden\")\r\n      }\r\n    }\r\n\r\n    // Start ordering\r\n    ol_ext_element.addListener(document, 'mousemove touchmove', move)\r\n    ol_ext_element.addListener(document, 'mouseup touchend touchcancel', stop)\r\n  }\r\n  /** Change opacity on drag\r\n  *\t@param {event} e drag event\r\n  *\t@private\r\n  */\r\n  dragOpacity_(e) {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    var self = this\r\n    // Register start params\r\n    var elt = e.target\r\n    var layer = this._getLayerForLI(elt.parentNode.parentNode.parentNode)\r\n    if (!layer)\r\n      return\r\n    var x = e.pageX\r\n      || (e.touches && e.touches.length && e.touches[0].pageX)\r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX)\r\n    var start = ol_ext_element.getStyle(elt, 'left') - x\r\n    self.dragging_ = true\r\n\r\n    // stop dragging\r\n    function stop() {\r\n      ol_ext_element.removeListener(document, \"mouseup touchend touchcancel\", stop)\r\n      ol_ext_element.removeListener(document, \"mousemove touchmove\", move)\r\n      self.dragging_ = false\r\n    }\r\n    // On draggin\r\n    function move(e) {\r\n      var x = e.pageX\r\n        || (e.touches && e.touches.length && e.touches[0].pageX)\r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX)\r\n      var delta = (start + x) / ol_ext_element.getStyle(elt.parentNode, 'width')\r\n      var opacity = Math.max(0, Math.min(1, delta))\r\n      ol_ext_element.setStyle(elt, { left: (opacity * 100) + \"%\" })\r\n      elt.parentNode.nextElementSibling.innerHTML = Math.round(opacity * 100)\r\n      layer.setOpacity(opacity)\r\n    }\r\n    // Register move\r\n    ol_ext_element.addListener(document, \"mouseup touchend touchcancel\", stop)\r\n    ol_ext_element.addListener(document, \"mousemove touchmove\", move)\r\n  }\r\n  /** Render a list of layer\r\n   * @param {Elemen} element to render\r\n   * @layers {Array{ol.layer}} list of layer to show\r\n   * @api stable\r\n   * @private\r\n   */\r\n  drawList(ul, collection) {\r\n    var self = this\r\n    var layers = collection.getArray()\r\n\r\n    // Change layer visibility\r\n    var setVisibility = function (e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var l = self._getLayerForLI(this.parentNode.parentNode)\r\n      self.switchLayerVisibility(l, collection)\r\n      if (self.get('selection') && l.getVisible()) {\r\n        self.selectLayer(l)\r\n      }\r\n      if (self.onchangeCheck) {\r\n        self.onchangeCheck(l)\r\n      }\r\n    }\r\n    // Info button click\r\n    function onInfo(e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var l = self._getLayerForLI(this.parentNode.parentNode)\r\n      self.oninfo(l)\r\n      self.dispatchEvent({ type: \"info\", layer: l })\r\n    }\r\n    // Zoom to extent button\r\n    function zoomExtent(e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var l = self._getLayerForLI(this.parentNode.parentNode)\r\n      if (self.onextent) {\r\n        self.onextent(l)\r\n      } else {\r\n        self.getMap().getView().fit(l.getExtent(), self.getMap().getSize())\r\n      }\r\n      self.dispatchEvent({ type: \"extent\", layer: l })\r\n    }\r\n    // Remove a layer on trash click\r\n    function removeLayer(e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var li = this.parentNode.parentNode.parentNode.parentNode\r\n      var layer, group = self._getLayerForLI(li)\r\n      // Remove the layer from a group or from a map\r\n      if (group) {\r\n        layer = self._getLayerForLI(this.parentNode.parentNode)\r\n        group.getLayers().remove(layer)\r\n        if (group.getLayers().getLength() == 0 && !group.get('noSwitcherDelete')) {\r\n          removeLayer.call(li.querySelectorAll('.layerTrash')[0], e)\r\n        }\r\n      } else {\r\n        li = this.parentNode.parentNode\r\n        self.getMap().removeLayer(self._getLayerForLI(li))\r\n      }\r\n    }\r\n\r\n    // Create a list for a layer\r\n    function createLi(layer) {\r\n      if (!this.displayInLayerSwitcher(layer)) {\r\n        this._setLayerForLI(null, layer)\r\n        return\r\n      }\r\n\r\n      var li = ol_ext_element.create('LI', {\r\n        className: (layer.getVisible() ? \"ol-visible \" : \" \") + (layer.get('baseLayer') ? \"baselayer\" : \"\"),\r\n        parent: ul\r\n      })\r\n      this._setLayerForLI(li, layer)\r\n      if (this._selectedLayer === layer) {\r\n        li.classList.add('ol-layer-select')\r\n      }\r\n\r\n      var layer_buttons = ol_ext_element.create('DIV', {\r\n        className: 'ol-layerswitcher-buttons',\r\n        parent: li\r\n      })\r\n\r\n      // Content div\r\n      var d = ol_ext_element.create('DIV', {\r\n        className: 'li-content',\r\n        parent: li\r\n      })\r\n\r\n      // Visibility\r\n      var input = ol_ext_element.create('INPUT', {\r\n        type: layer.get('baseLayer') ? 'radio' : 'checkbox',\r\n        className: 'ol-visibility',\r\n        checked: layer.getVisible(),\r\n        click: function(e) {\r\n          setVisibility.bind(this)(e)\r\n          setTimeout(function() { e.target.checked = layer.getVisible(); });\r\n        },\r\n        on: {\r\n          // Set opacity on keydown\r\n          keydown: function(e) {\r\n            switch (e.key) {\r\n              // Change opacity on arrow\r\n              case 'ArrowLeft':\r\n              case 'ArrowRight': {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                var delta = (e.key==='ArrowLeft' ? -0.1 : 0.1);\r\n                var opacity = Math.min(1, Math.max(0, layer.getOpacity() + delta))\r\n                layer.setOpacity(opacity)\r\n                break;\r\n              }\r\n              // Select on enter\r\n              case 'Enter': {\r\n                if (self.get('selection')) {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  self.selectLayer(layer)\r\n                }\r\n                break;\r\n              }\r\n              // Expend \r\n              case '-': \r\n              case '+': {\r\n                if (layer.getLayers) {\r\n                  this._focus = layer;\r\n                  layer.set(\"openInLayerSwitcher\", !layer.get(\"openInLayerSwitcher\"))\r\n                }\r\n              }\r\n              // Move up dans down\r\n              // fallthrough\r\n              case 'ArrowUp':\r\n              case 'ArrowDown': {\r\n                if (e.ctrlKey && this.reordering) {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  var pos = collection.getArray().indexOf(layer);\r\n                  if (pos > -1) {\r\n                    if (e.key === 'ArrowDown') {\r\n                      if (pos > 0) {\r\n                        collection.remove(layer);\r\n                        collection.insertAt(pos-1, layer)\r\n                        self._focus = layer\r\n                        self.dispatchEvent({ type: \"reorder-end\", layer: layer })\r\n                      }\r\n                    } else {\r\n                      if (pos < collection.getLength()-1) {\r\n                        collection.remove(layer);\r\n                        collection.insertAt(pos+1, layer)\r\n                        self._focus = layer\r\n                        self.dispatchEvent({ type: \"reorder-end\", layer: layer })\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                break;\r\n              }\r\n              default: {\r\n                var group = this._getLayerForLI(ul.parentNode)\r\n                this.dispatchEvent({ type: 'layer:keydown', key: e.key, group: group, li: li, layer: layer, originalEvent: e })\r\n              }\r\n            }\r\n          }.bind(this)\r\n        },\r\n        parent: d\r\n      })\r\n      // Focus on element\r\n      if (layer === self._focus) {\r\n        input.focus();\r\n        self.overflow()\r\n      }\r\n      // Label\r\n      var label = ol_ext_element.create('LABEL', {\r\n        title: layer.get('title') || layer.get('name'),\r\n        click: setVisibility,\r\n        style: {\r\n          userSelect: 'none'\r\n        },\r\n        parent: d\r\n      })\r\n      label.addEventListener('selectstart', function () { return false })\r\n      ol_ext_element.create('SPAN', {\r\n        html: layer.get('title') || layer.get('name'),\r\n        click: function (e) {\r\n          if (this.get('selection')) {\r\n            e.stopPropagation()\r\n            this.selectLayer(layer)\r\n          }\r\n        }.bind(this),\r\n        parent: label\r\n      })\r\n      \r\n      //  up/down\r\n      if (this.reordering) {\r\n        if ((i < layers.length - 1 && (layer.get(\"allwaysOnTop\") || !layers[i + 1].get(\"allwaysOnTop\")))\r\n          || (i > 0 && (!layer.get(\"allwaysOnTop\") || layers[i - 1].get(\"allwaysOnTop\")))) {\r\n          ol_ext_element.create('DIV', {\r\n            className: 'layerup ol-noscroll',\r\n            title: this.tip.up,\r\n            on: { 'mousedown touchstart': function (e) { self.dragOrdering_(e) } },\r\n            parent: layer_buttons\r\n          })\r\n        }\r\n      }\r\n\r\n      // Show/hide sub layers\r\n      if (layer.getLayers) {\r\n        var nb = 0\r\n        layer.getLayers().forEach(function (l) {\r\n          if (self.displayInLayerSwitcher(l))\r\n            nb++\r\n        })\r\n        if (nb) {\r\n          ol_ext_element.create('DIV', {\r\n            className: layer.get(\"openInLayerSwitcher\") ? \"collapse-layers\" : \"expend-layers\",\r\n            title: this.tip.plus,\r\n            click: function () {\r\n              var l = self._getLayerForLI(this.parentNode.parentNode)\r\n              l.set(\"openInLayerSwitcher\", !l.get(\"openInLayerSwitcher\"))\r\n            },\r\n            parent: layer_buttons\r\n          })\r\n        }\r\n      }\r\n\r\n      // Info button\r\n      if (this.oninfo) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerInfo',\r\n          title: this.tip.info,\r\n          click: onInfo,\r\n          parent: layer_buttons\r\n        })\r\n      }\r\n      // Layer remove\r\n      if (this.hastrash && !layer.get(\"noSwitcherDelete\")) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerTrash',\r\n          title: this.tip.trash,\r\n          click: removeLayer,\r\n          parent: layer_buttons\r\n        })\r\n      }\r\n      // Layer extent\r\n      if (this.hasextent && layers[i].getExtent()) {\r\n        var ex = layers[i].getExtent()\r\n        if (ex.length == 4 && ex[0] < ex[2] && ex[1] < ex[3]) {\r\n          ol_ext_element.create('DIV', {\r\n            className: 'layerExtent',\r\n            title: this.tip.extent,\r\n            click: zoomExtent,\r\n            parent: layer_buttons\r\n          })\r\n        }\r\n      }\r\n\r\n      // Progress\r\n      if (this.show_progress && layer instanceof ol_layer_Tile) {\r\n        var p = ol_ext_element.create('DIV', {\r\n          className: 'layerswitcher-progress',\r\n          parent: d\r\n        })\r\n        this.setprogress_(layer)\r\n        layer.layerswitcher_progress = ol_ext_element.create('DIV', { parent: p })\r\n      }\r\n\r\n      // Opacity\r\n      var opacity = ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-opacity',\r\n        // Click on the opacity line\r\n        click: function (e) {\r\n          if (e.target !== this)\r\n            return\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n          var op = Math.max(0, Math.min(1, e.offsetX / ol_ext_element.getStyle(this, 'width')))\r\n          self._getLayerForLI(this.parentNode.parentNode).setOpacity(op)\r\n          this.parentNode.querySelectorAll('.layerswitcher-opacity-label')[0].innerHTML = Math.round(op * 100)\r\n        },\r\n        parent: d\r\n      })\r\n      // Start dragging\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-opacity-cursor ol-noscroll',\r\n        style: { left: (layer.getOpacity() * 100) + \"%\" },\r\n        on: {\r\n          'mousedown touchstart': function (e) { self.dragOpacity_(e) }\r\n        },\r\n        parent: opacity\r\n      })\r\n      // Percent\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-opacity-label',\r\n        html: Math.round(layer.getOpacity() * 100),\r\n        parent: d\r\n      })\r\n\r\n      // Layer group\r\n      if (layer.getLayers) {\r\n        li.classList.add('ol-layer-group')\r\n        if (layer.get(\"openInLayerSwitcher\") === true) {\r\n          var ul2 = ol_ext_element.create('UL', {\r\n            parent: li\r\n          })\r\n          this.drawList(ul2, layer.getLayers())\r\n        }\r\n      }\r\n      li.classList.add(this.getLayerClass(layer))\r\n\r\n      // Dispatch a dralist event to allow customisation\r\n      this.dispatchEvent({ type: 'drawlist', layer: layer, li: li })\r\n    }\r\n\r\n    // Add the layer list\r\n    for (var i = layers.length - 1; i >= 0; i--) {\r\n      createLi.call(this, layers[i])\r\n    }\r\n\r\n    this.viewChange()\r\n\r\n    if (ul === this.panel_) {\r\n      this.overflow('')\r\n      // Remove focus\r\n      this._focus = null;\r\n    }\r\n\r\n  }\r\n  /** Select a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @returns {string} the layer classname\r\n   * @api\r\n   */\r\n  getLayerClass(layer) {\r\n    if (!layer)\r\n      return 'none'\r\n    if (layer.getLayers)\r\n      return 'ol-layer-group'\r\n    if (layer instanceof ol_layer_Vector)\r\n      return 'ol-layer-vector'\r\n    if (layer instanceof ol_layer_VectorTile)\r\n      return 'ol-layer-vectortile'\r\n    if (layer instanceof ol_layer_Tile)\r\n      return 'ol-layer-tile'\r\n    if (layer instanceof ol_layer_Image)\r\n      return 'ol-layer-image'\r\n    if (layer instanceof ol_layer_Heatmap)\r\n      return 'ol-layer-heatmap'\r\n    /* ol < 6 compatibility VectorImage is not defined */\r\n    // if (layer instanceof ol_layer_VectorImage) return 'ol-layer-vectorimage';\r\n    if (layer.getFeatures)\r\n      return 'ol-layer-vectorimage'\r\n    /* */\r\n    return 'unknown'\r\n  }\r\n  /** Select a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @api\r\n   */\r\n  selectLayer(layer, silent) {\r\n    if (!layer) {\r\n      if (!this.getMap())\r\n        return\r\n      layer = this.getMap().getLayers().item(this.getMap().getLayers().getLength() - 1)\r\n    }\r\n    this._selectedLayer = layer\r\n    // Has focus ?\r\n    if (this.element.querySelector('input.ol-visibility:focus')) {\r\n      this._focus = layer;\r\n    }\r\n    // Draw\r\n    this.drawPanel()\r\n    if (!silent) {\r\n      this.dispatchEvent({ type: 'select', layer: layer })\r\n    }\r\n  }\r\n  /** Get selected layer\r\n   * @returns {ol.layer.Layer}\r\n   */\r\n  getSelection() {\r\n    return this._selectedLayer\r\n  }\r\n  /** Handle progress bar for a layer\r\n  *\t@private\r\n  */\r\n  setprogress_(layer) {\r\n    if (!layer.layerswitcher_progress) {\r\n      var loaded = 0\r\n      var loading = 0\r\n      var draw = function () {\r\n        if (loading === loaded) {\r\n          loading = loaded = 0\r\n          ol_ext_element.setStyle(layer.layerswitcher_progress, { width: 0 }) // layer.layerswitcher_progress.width(0);\r\n        } else {\r\n          ol_ext_element.setStyle(layer.layerswitcher_progress, { width: (loaded / loading * 100).toFixed(1) + '%' }) // layer.layerswitcher_progress.css('width', (loaded / loading * 100).toFixed(1) + '%');\r\n        }\r\n      }\r\n      layer.getSource().on('tileloadstart', function () {\r\n        loading++\r\n        draw()\r\n      })\r\n      layer.getSource().on('tileloadend', function () {\r\n        loaded++\r\n        draw()\r\n      })\r\n      layer.getSource().on('tileloaderror', function () {\r\n        loaded++\r\n        draw()\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n/** List of tips for internationalization purposes\r\n*/\r\nol_control_LayerSwitcher.prototype.tip = {\r\n  up: \"up/down\",\r\n  down: \"down\",\r\n  info: \"informations...\",\r\n  extent: \"zoom to extent\",\r\n  trash: \"remove layer\",\r\n  plus: \"expand/shrink\"\r\n};\r\n\r\nexport default ol_control_LayerSwitcher\r\n"],"names":["Kinetic","constructor","decay","minVelocity","delay","this","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","begin","length","update","x","y","push","Date","now","end","lastIndex","firstIndex","duration","dx","dy","Math","atan2","sqrt","getDistance","getAngle","IDLE","LOADING","LOADED","ERROR","EMPTY","MapBrowserEvent","type","map","originalEvent","dragging","frameState","activePointers","super","pixel_","coordinate_","undefined","pixel","getEventPixel","coordinate","getCoordinateFromPixel","preventDefault","stopPropagation","ol_ext_input_Base","ol_Object","options","tout","input","document","createElement","setAttribute","min","max","step","parent","appendChild","disabled","checked","val","value","hidden","classList","add","addEventListener","element","bind","clearTimeout","setTimeout","remove","_listenDrag","elt","cback","handle","e","moving","listen","removeEventListener","target","setValue","v","dispatchEvent","Event","getValue","getInputElement","ol_ext_input_Checkbox","label","html","Element","innerHTML","className","trim","parentNode","insertBefore","after","createTextNode","isChecked","ol_ext_input_Switch","ol_ext_input_Radio","ol_ext_element","tagName","attr","toLowerCase","test","innerText","text","i","create","setStyle","style","addListener","on","click","change","opt","Object","assign","name","eventType","fn","useCapture","split","forEach","display","getStyle","el","st","s","styleProp","defaultView","ownerDocument","getComputedStyle","replace","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","left","oldRsLeft","runtimeStyle","pixelLeft","parseInt","offsetHeight","offsetWidth","rect","getBoundingClientRect","top","window","pageYOffset","documentElement","scrollTop","body","pageXOffset","scrollLeft","height","bottom","width","right","offset","getOffset","r","offsetParent","fixed","gleft","gtop","getRect","offsetLeft","offsetTop","d","scale","isbar","scrollContainer","scrollbar","pos","speed","dt","onmove","page","vertical","scroll","updateCounter","updateMinibar","updateMinibarDelay","pheight","clientHeight","scrollHeight","onPointerDown","contains","onPointerMove","onPointerUp","delta","round","animate","to","minibar","init","b","mousewheel","onMouseWheel","removeListener","wheelDelta","detail","refresh","eventName","event","CustomEvent","createEvent","initCustomEvent","cursor","getTargetElement","asImageLike","data","Image","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","asArrayLike","Uint8Array","Uint8ClampedArray","Float32Array","DataView","sharedContext","toArray","image","willReadFrequently","canvas","clearRect","drawImage","getImageData","defaultSize","DataTile","state","tileCoord","transition","interpolate","loader_","loader","data_","error_","size_","size","getSize","imageData","getData","getError","load","changed","self","then","catch","error","rgb","channel","alias","ADD","REMOVE","ImageTile","src","crossOrigin","tileLoadFunction","crossOrigin_","src_","key","image_","unlisten_","tileLoadFunction_","getImage","setImage","unlistenImage_","handleImageError_","getBlankImage","handleImageLoad_","naturalWidth","naturalHeight","ctx","fillStyle","fillRect","LAYERGROUP","SIZE","TARGET","VIEW","listenImage","loadHandler","errorHandler","img","listening","decoding","loaded","listenerKeys","LOAD","decode","Promise","resolve","reject","handleLoad","unlisten","handleError","Error","decodeFallback","complete","Property","LENGTH","CollectionEvent","index","Collection","array","once","un","unique_","unique","array_","ii","assertUnique_","updateLength_","clear","getLength","pop","extend","arr","f","getArray","item","get","insertAt","elem","splice","removeAt","n","prev","setAt","set","except","earcut","holeIndices","dim","minX","minY","maxX","maxY","invSize","hasHoles","outerLen","outerNode","linkedList","triangles","next","eliminateHoles","earcutLinked","start","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","again","p","steiner","area","ear","pass","indexCurve","stop","isEarHashed","isEar","cureLocalIntersections","splitEarcut","a","c","ax","bx","cx","ay","by","cy","x0","y0","x1","y1","pointInTriangle","minZ","zOrder","maxZ","prevZ","nextZ","z","intersects","locallyInside","isValidDiagonal","splitPolygon","len","list","queue","getLeftmost","sort","compareX","eliminateHole","hole","bridge","findHoleBridge","bridgeReverse","m","hx","hy","qx","Infinity","tan","mx","my","tanMin","abs","sectorContainsSector","sortLinked","q","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","p1","p2","q1","q2","o1","sign","o2","o3","o4","onSegment","num","inside","a2","Node","b2","an","bp","sum","j","module","exports","deviation","polygonArea","trianglesArea","flatten","result","vertices","holes","dimensions","holeIndex","SINGLECLICK","CLICK","DBLCLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","baseHues","parse","cstr","space","parts","alpha","values","String","slice","base","isShort","exec","dims","shift","parseFloat","endsWith","PI","match","join","hsl","t1","t2","t3","h","l","rgba","color","Array","isArray","raw","arguments","Number","parsed","g","POSTRENDER","MOVESTART","MOVEEND","LOADSTART","LOADEND","Feature","geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","geometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","getId","getStyleFunction","handleGeometryChange_","CHANGE","createStyleFunction","setId","id","removeChangeListener","obj","styles","MapBrowserEventHandler","moveTolerance","map_","clickTimeoutId_","emulateClicks_","dragging_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","element_","pointerdownListenerKey_","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","relayMoveEvent_","boundHandleTouchMove_","handleTouchMove_","TOUCHMOVE","passive","emulateClick_","pointerEvent","newEvent","updateActivePointers_","pointerId","handlePointerUp_","defaultPrevented","isMouseActionButton_","button","PointerEvent","defineProperty","writable","doc","getOwnerDocument","handlePointerMove_","getRootNode","isMoving_","cancelable","clientX","clientY","disposeInternal","Disposable","disposed","dispose","luv","xyz","arg","o","_u","_v","u","xn","yn","zn","vn","k","whitepoint","pow","yr","lchuv","hr","cos","sin","A","C","D50","D55","D65","D75","F2","F7","F11","E","_xyz","MapEvent","ol_control_LayerSwitcher","switcherClass","dcount","show_progress","oninfo","onextent","hasextent","extent","hastrash","trash","reordering","_layers","_layerGroup","layerGroup","getLayers","onchangeCheck","displayInLayerSwitcher","collapsed","toggle","overflow","mouseover","noScroll","topv","botv","_noScroll","panel_","panelContainer_","header_","drawDelay","selection","mbar","scrollDiv","layer","setMap","drawPanel","_listener","moveend","viewChange","getLayerGroup","show","hide","isOpen","setHeader","setHTML","dir","outerHeight","hp","dh","li","querySelectorAll","lh","_setLayerForLI","listeners","setLayerOpacity","setLayerVisibility","querySelector","getOpacity","getVisible","_clearLayerForLI","_getLayerForLI","testLayerVisibility","getPanel","getMap","drawPanel_","drawList","switchLayerVisibility","layers","setVisible","res","getView","getResolution","zoom","getZoom","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","ex0","getExtent","ex","calculateExtent","dragOrdering_","pageY","dragElt","group","currentTarget","panel","pageY0","touches","changedTouches","drop","isSelected","getSelection","collection","selectLayer","move","position","opacity","outerWidth","offsetRect","elementFromPoint","shadowRoot","composedPath","dragOpacity_","pageX","nextElementSibling","setOpacity","ul","setVisibility","onInfo","zoomExtent","fit","removeLayer","call","createLi","_selectedLayer","layer_buttons","keydown","_focus","ctrlKey","indexOf","focus","title","userSelect","tip","up","nb","plus","info","setprogress_","layerswitcher_progress","op","offsetX","ul2","getLayerClass","getFeatures","silent","loading","draw","toFixed","getSource","prototype","down"],"sourceRoot":""}
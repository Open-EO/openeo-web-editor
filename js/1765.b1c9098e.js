(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[1765,3719,4477,4741,5213,5350,6036,7186,8080,9066,9201,9403],{4477:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=function(){var e=this,t=e._self._c;return e.active?t("div",{staticClass:"wizard-tab-container"},[e._t("default",null,{active:e.active})],2):e._e()},i=[];const n={name:"WizardTab",props:{parent:{type:Object,required:!0},pos:{type:Number,required:!0},title:{type:String,default:""},beforeChange:{type:Function},afterChange:{type:Function}},data(){return{active:!1,validationError:null,checked:!1}},mounted(){this.parent.addTab(this,this.pos)},beforeDestroy(){this.parent.removeTab(this)}},r=n;var o=s(81656),l=(0,o.A)(r,a,i,!1,null,null,null);const c=l.exports},5213:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"select-container"},[e.loaded?[t("MultiSelect",{key:e.type,ref:"htmlElement",attrs:{label:"label","track-by":"id",multiple:e.multiple,options:e.selectOptions,allowEmpty:!1,preselectFirst:e.preselect,disabled:!e.editable,deselectLabel:e.deselectLabel,taggable:e.taggable,tagPlaceholder:e.tagPlaceholder,openDirection:e.openDirection},on:{tag:e.addValue},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e.showDetails?t("button",{attrs:{type:"button",title:"Details"},on:{click:function(t){return e.$emit("onDetails")}}},[t("i",{staticClass:"fas fa-info"})]):e._e()]:t("div",{staticClass:"loading"},[t("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Loading options...")])],2)},i=[],n=(s(22489),s(20116),s(61701),s(75262)),r=s.n(n),o=s(2566);const l={name:"SelectBox",components:{MultiSelect:r()},props:{value:{},type:{type:String,default:""},editable:{type:Boolean,default:!0},options:{type:[Array,Object]},schema:{type:Object},context:{},optionFilter:{type:Function,default:null},openDirection:{type:String,default:"auto"}},computed:{selectOptions(){let e=[];switch(this.type){case"band-name":let t=this.$store.state.collections.find(e=>e.id==this.context);if(o.A.isObject(t)){try{e=t.summaries["bands"].map(e=>e.name)}catch(i){}if(0===e.length&&o.A.isObject(t["cube:dimensions"]))try{let s=Object.values(t["cube:dimensions"]).find(e=>"bands"===e.type);s&&Array.isArray(s.values)&&(e=s.values)}catch(i){}}break;case"collection-id":e=this.$store.state.collections;break;case"job-id":e=this.$store.state.jobs.jobs;break;case"file-path":case"file-paths":e=this.$store.state.files.files;break;case"epsg-code":e=this.$store.state.editor.epsgCodes;break;case"input-format":e=this.$store.state.fileFormats.getInputTypes();break;case"openeo-datatype":let a=s(63610),n={};for(let e of a.NATIVE_TYPES)n[e]={type:e};e=Object.assign(n,a.API_TYPES);break;case"output-format":e=this.$store.state.fileFormats.getOutputTypes();break;case"service-type":e=this.$store.state.serviceTypes;break;case"billing-plan":e=this.$store.state.connection.capabilities().listPlans();break;case"udf-runtime":e=Object.keys(this.$store.state.udfRuntimes);break;case"udf-runtime-version":e=this.context in this.$store.state.udfRuntimes?Object.keys(this.$store.state.udfRuntimes[this.context].versions):[];break}"function"===typeof this.optionFilter&&e&&"object"===typeof e&&(e=o.A.isObject(e)?Object.fromEntries(Object.entries(e).filter(([e,t])=>this.optionFilter(t,e))):e.filter((e,t)=>this.optionFilter(e,t)));let t=[];switch(this.type){case"collection-id":return e.map(e=>this.e(e.id)).sort(this.sortByLabel);case"job-id":return e.map(e=>({id:e.id,label:o.A.getResourceTitle(e)})).sort(this.sortByLabel);case"openeo-datatype":for(let a in e){let s=e[a];t.push({id:a,label:s.title||o.A.prettifyString(a),value:s})}return t;case"file-path":case"file-paths":return e.map(e=>this.e(e.path)).sort((e,t)=>o.A.sortByPath(e.id,t.id));case"epsg-code":for(let a in e)t.push({id:Number.parseInt(a,10),label:a+": "+e[a]});return t;case"input-format":case"output-format":case"service-type":for(let a in e){let s=a.toUpperCase(),i=e[a].title;i?s!==i.toUpperCase()&&(i=`${i} - ${s}`):i=s,t.push({id:s,label:i})}return t.sort(this.sortByLabel);case"billing-plan":return e.map(e=>({id:e.name,label:e.name+(e.paid?" (paid)":" (free)")}));case"year":let s=(new Date).getFullYear(),i=Array.from({length:100},(e,t)=>this.e(String(s-t)));if("string"===typeof this.value&&this.value.length>0&&-1===i.findIndex(e=>e.id===this.value)){var a=this.e(this.value);this.value>s?i.unshift(a):i.push(this.e(this.value))}return i;case"band-name":case"udf-runtime":case"udf-runtime-version":return e.map(e=>this.e(e));default:return o.A.isObject(this.schema)&&this.schema.isEnum()?this.schema.getEnumChoices().map(e=>this.e(e)):Array.isArray(this.options)?this.options.map(e=>o.A.isObject(e)?e:this.e(e)):[]}},showDetails(){return"collection-id"===this.type},deselectLabel(){return this.multiple?"Press enter to remove":""},tagPlaceholder(){return"year"===this.type?"Press enter to select":"Press enter to create a tag"},multiple(){return"file-paths"===this.type},taggable(){let e=["band-name","collection-id","job-id","input-format","output-format"];return"year"===this.type||0===this.selectOptions.length&&e.includes(this.type)},preselect(){return this.multiple?!Array.isArray(this.selected)||0===this.selected.length:null===this.selected}},data(){return{selected:null,loaded:!1}},created(){this.loadData()},watch:{type(){this.loadData()},selected(e){let t;if(null===e)t=null;else if(this.multiple)Array.isArray(e)||(e=[e]),t=e.map(e=>e.id);else switch(this.type){case"epsg-code":var s=Number.parseInt(e.id);t=Number.isNaN(s)?null:s;break;case"openeo-datatype":t=e.value;break;case"year":t=String(e.id);break;default:t=e.id}this.$emit("input",t)},context(){switch(this.type){case"udf-runtime":case"udf-runtime-version":this.selected=null,this.preselectFirst();break;case"band-name":this.selected=null,this.loadData();break}}},methods:{...o.A.mapActions(["describeCollection"]),...o.A.mapActions("editor",["loadEpsgCodes"]),e(e){return{id:e,label:e}},async loadData(){this.loaded=!1,"epsg-code"===this.type?await this.loadEpsgCodes():"band-name"===this.type&&await this.describeCollection(this.context),this.initSelection(),this.loaded=!0},async preselectFirst(){await this.$nextTick();let e=this.$refs.htmlElement;e.preselectFirst&&Array.isArray(e.filteredOptions)&&e.filteredOptions.length&&e.select(e.filteredOptions[0])},initSelection(){let e="undefined"===typeof this.value?this.schema.default():this.value;if(this.multiple&&Array.isArray(e))this.selected=this.selectOptions.filter(t=>e.includes(t.id));else{switch(this.type){case"input-format":case"output-format":case"service-type":"string"===typeof e&&(e=e.toUpperCase());break}let t=this.selectOptions.find(t=>t.id===e);void 0!==t&&(this.selected=t)}},sortByLabel(e,t){return o.A.compareStringCaseInsensitive(e.label,t.label)},addValue(e){this.selected=this.e(e)}}},c=l;var d=s(81656),u=(0,d.A)(c,a,i,!1,null,null,null);const p=u.exports},26305:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wizard-tab-content"},[t("WizardTab",{attrs:{pos:0,parent:e.parent,title:"Data Source",beforeChange:e.loadCollection}},[t("ChooseCollection",{attrs:{value:e.collection,filter:e.filterCollections},on:{input:e.submitCollection}})],1),t("WizardTab",{attrs:{pos:1,parent:e.parent,title:"Spectral Index",beforeChange:()=>!!e.index.id}},[t("ChooseSpectralIndices",{attrs:{value:e.index,availableBands:e.availableBands},on:{input:e.submitIndex}})],1),t("WizardTab",{attrs:{pos:2,parent:e.parent,title:"Location",beforeChange:()=>null!==e.spatial_extent}},[t("ChooseBoundingBox",{attrs:{max:e.max_spatial_extent},model:{value:e.spatial_extent,callback:function(t){e.spatial_extent=t},expression:"spatial_extent"}})],1),t("WizardTab",{attrs:{pos:3,parent:e.parent,title:"Temporal Coverage",beforeChange:()=>null!==e.temporal_extent}},[t("ChooseTime",{model:{value:e.temporal_extent,callback:function(t){e.temporal_extent=t},expression:"temporal_extent"}})],1),t("WizardTab",{attrs:{pos:4,parent:e.parent,title:"Temporal Composite"}},[t("ChooseReducer",{attrs:{allowEmpty:"",text:"If you want, you can create a temporal composite by selecting the aggregation method below:"},model:{value:e.composite,callback:function(t){e.composite=t},expression:"composite"}})],1),t("WizardTab",{attrs:{pos:5,parent:e.parent,title:"File Format",beforeChange:()=>null!==e.format}},[t("ChooseFormat",{attrs:{gisDataType:"raster",scale:e.scale},on:{"update:scale":function(t){e.scale=t}},model:{value:e.format,callback:function(t){e.format=t},expression:"format"}})],1),t("WizardTab",{attrs:{pos:6,parent:e.parent,title:"Finish"}},[t("ChooseProcessingMode",{attrs:{title:e.jobTitle},on:{"update:title":function(t){e.jobTitle=t}},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}})],1)],1)},i=[],n=(s(22489),s(20116),s(34862)),r=s(83719),o=s(79066),l=s(37186),c=s(46036),d=s(39201),u=s(62804),p=s(45699),h=s(73902),m=s(2566);const f="created by Wizard",y=(e="Spectral Indices")=>`${e} ${f}`,g={A:"coastal",B:"blue",G:"green",Y:"yellow",R:"red",N:"nir",N2:"nir08",WV:"nir09",S1:"swir16",S2:"swir22",T1:"lwir11",T2:"lwir12"},b={name:"SpectralIndices",mixins:[p.A],components:{ChooseBoundingBox:n["default"],ChooseCollection:r["default"],ChooseFormat:o["default"],ChooseProcessingMode:l["default"],ChooseReducer:c["default"],ChooseSpectralIndices:d["default"],ChooseTime:u["default"]},data(){return{availableBands:{},collection:null,composite:"",dimBands:"bands",dimT:"t",format:null,index:{},jobTitle:y(),mode:"",scale:null,spatial_extent:null,max_spatial_extent:null,temporal_extent:null}},beforeMount(){this.scale=(!this.processes.has("apply")||!this.processes.has("linear_scale_range"))&&null},computed:{...m.A.mapGetters(["processes","collectionDefaults"])},methods:{...m.A.mapActions(["describeCollection"]),filterCollections(e){if(!m.A.isObject(e["cube:dimensions"]))return!0;let t=Object.values(e["cube:dimensions"]);if(t.length<3)return!1;let s=t.find(e=>"bands"===e.type);if(!s||Array.isArray(s.values)&&s.values.length<2)return!1;let a=t.filter(e=>"temporal"===e.type);if(a.length>1)return!1;let i=t.filter(e=>"spatial"===e.type&&["x","y"].includes(e.axis));if(2!==i.length)return!1;if(e.summaries&&!e.summaries["bands"])return!1;let n=this.getAvailableBands(e);return!(m.A.size(n)<2)},submitCollection(e){if(this.collection!==e||null==this.temporal_extent){let t=this.collectionDefaults(e);this.collection!==e&&(this.max_spatial_extent=t.spatial_extent),this.collection===e&&null!=this.temporal_extent||(this.temporal_extent=t.temporal_extent)}this.collection=e,this.parent.nextTab()},submitIndex(e){this.index=e,e.id&&this.jobTitle.endsWith(f)&&(this.jobTitle=y(e.id)),this.parent.nextTab()},createProcess(){let e=this.index.formula,t=[],s=[];for(let n in this.index.bands){let a=this.index.bands[n],i=this.availableBands[a].name;t.push(i),e=e.replaceAll(a,"$"+n),s.push(`- ${a} = ${i}`)}const a=new h.Builder(this.processes);let i=a.load_collection(this.collection,this.spatial_extent,this.temporal_extent,t).description("Load the data, including the bands:\r\n"+s.join("\r\n"));if(this.composite){let e=(e,t,s)=>s[this.composite](e);i=a.reduce_dimension(i,e,this.dimT).description(`Compute the ${this.composite} over the temporal dimension`)}if(i=a.reduce_dimension(i,new h.Formula(e),this.dimBands).description(`Compute the ${this.index.id} (${this.index.summary}) for the bands dimension\r\nFormula: ${this.index.formula}`),this.scale){let e=(e,t,s)=>s.linear_scale_range(e,-1,1,0,255);i=a.apply(i,e).description("Scales the values from [-1, 1] to [0, 255]")}return i=a.save_result(i,this.format).description(`Store as ${this.format}`),i.result=!0,a.toJSON()},getAvailableBands(e){let t=e?.summaries&&e?.summaries["bands"];if(Array.isArray(t)){let e={};const s=Object.values(g),a=Object.keys(g);for(let i in t){let n=t[i];if(!n.name)continue;let r=s.indexOf(n["eo:common_name"]);-1!==r&&(e[a[r]]=n)}return e}return!1},async loadCollection(){if(null===this.collection)throw new Error("Please select a collection");let e;this.availableBands={};try{e=await this.describeCollection(this.collection)}catch(s){throw console.error(s),new Error("Can't load collection metadata, please try another collection.")}let t=this.getAvailableBands(e);if(0===m.A.size(t))throw new Error("This collection doesn't support spectral indices as there are no compatible bands available.");if(this.availableBands=t,m.A.isObject(e["cube:dimensions"])){let t=Object.values(e["cube:dimensions"]),s=t.find(e=>"bands"===e.type);s&&s.name&&(this.dimBands=s.name);let a=t.find(e=>"temporal"===e.type);a&&a.name&&(this.dimT=a.name)}return!0},async finish(){this.$emit("input",{process:this.createProcess(),mode:this.mode,modeOptions:{title:this.jobTitle}})}}},x=b;var v=s(81656),w=(0,v.A)(x,a,i,!1,null,null,null);const _=w.exports},29365:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vue-component collections"},[t("SearchableList",{attrs:{data:e.collections,identifierKey:"id",summaryKey:"title",keywordsKey:"keywords",showKeywords:e.showKeywords,showSummaryOnExpand:!1,externalSearchTerm:e.searchTerm,externalHideDeprecated:e.hideDeprecated,deprecatedFilter:e.deprecatedFilter,externalHideExperimental:e.hideExperimental,experimentalFilter:e.experimentalFilter,sort:e.sort,offerDetails:e.offerDetails,heading:e.heading,collapsed:e.collapsed,loadAdditionalData:e.loadAdditionalData,allowCopy:""},on:{detailsToggled:e.detailsToggled},scopedSlots:e._u([{key:"heading",fn:function(t){return[e._t("heading",null,null,t)]}},{key:"content-start",fn:function(s){return[e._t("content-start",null,null,s),Array.isArray(e.missing)&&e.missing.length>0?t("FederationMissingNotice",{attrs:{missing:e.missing,federation:e.federation}}):e._e()]}},{key:"after-search-box",fn:function(t){return[e._t("after-search-box",null,null,t)]}},{key:"summary",fn:function(t){return[e._t("summary",null,null,t)]}},{key:"details",fn:function(s){return[t("Collection",{attrs:{data:s.item,mapOptions:e.mapOptions,federation:e.federation},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{staticClass:"hidden"})]},proxy:!0},{key:"before-description",fn:function(t){return[e._t("collection-before-description",null,null,t)]}},{key:"end",fn:function(t){return[e._t("collection-end",null,null,t)]}},{key:"spatial-extents",fn:function(t){return[e._t("collection-spatial-extents",null,null,t)]}},{key:"temporal-extents",fn:function(t){return[e._t("collection-temporal-extents",null,null,t)]}}],null,!0)})]}}],null,!0)})],1)},i=[],n=s(86975),r=s(35254);const o={name:"Collections",components:{Collection:()=>n.A.loadAsyncComponent(Promise.all([s.e(2195),s.e(2919),s.e(4432),s.e(2263),s.e(1358),s.e(4818)]).then(s.bind(s,94818))),SearchableList:()=>n.A.loadAsyncComponent(s.e(5350).then(s.bind(s,45350)))},mixins:[r.A],props:{collections:{type:Array,default:()=>[]},mapOptions:{type:Object,default:()=>({})},searchTerm:{type:String,default:null},sort:{type:Boolean,default:!0},offerDetails:{type:Boolean,default:!0},heading:{type:String,default:"Collections"},collapsed:{type:Boolean,default:null},loadAdditionalData:{type:Function,default:null},showKeywords:{type:Boolean,default:!1},hideDeprecated:{type:Boolean,default:!1},deprecatedFilter:{type:Boolean,default:!1},hideExperimental:{type:Boolean,default:!1},experimentalFilter:{type:Boolean,default:!1},missing:{type:Array,default:null},...r.A.props},beforeCreate(){n.A.enableHtmlProps(this)},methods:{detailsToggled(...e){this.$emit("detailsToggled",...e)}}},l=o;var c=s(81656),d=(0,c.A)(l,a,i,!1,null,null,null);const u=d.exports},31660:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});s(61701);var a=s(66684),i=s.n(a);s(22489);class n{constructor(e,t=!1){this.url=e,this.geojson=t}getParameters(e){return{url:this.url,params:{q:e.query,format:"json",limit:10,"accept-language":"en",polygon_geojson:this.geojson?1:0,polygon_threshold:.001}}}handleResponse(e){return 0===e.length?[]:e.filter(e=>["boundary","geological","leisure","natural","place","water","waterway"].includes(e.class)).map(e=>({lon:e.lon,lat:e.lat,bbox:e.boundingbox,address:{name:e.display_name},original:{formatted:e.display_name,details:e.address,geojson:e.geojson}}))}}const r={methods:{addGeocoder(e,t=!1){if(!this.$config.geocoder)return;const s={provider:new n(this.$config.geocoder,t),placeholder:"Search for ...",keepOpen:!0,preventDefault:!0},a=new(i())("nominatim",s);a.on("addresschosen",s=>{if(t)e(s.place?.original?.geojson,s);else if(s.place.bbox){let t=s.place.bbox.map(e=>parseFloat(e)),a={west:t[2],east:t[3],north:t[1],south:t[0]};e(a,s)}else e(null,s)}),this.map.addControl(a)}}},o=r;var l,c,d=s(81656),u=(0,d.A)(o,l,c,!1,null,null,null);const p=u.exports},34862:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-bbox"},[t("p",[e._v("Please select the area of interest which you want to download data for. You can add or remove a bounding box by clicking into the map.")]),t("MapAreaSelect",{staticClass:"map",attrs:{show:e.showMap,value:e.value,showMaxExtent:e.max},on:{input:e.update}})],1)},i=[],n=s(36438);const r={name:"ChooseBoundingBox",components:{MapAreaSelect:n.A},props:{value:{type:Object,default:null},max:{type:Object,default:null}},data(){return{showMap:!0}},mounted(){window.setTimeout(()=>this.showMap=!0,1e3)},methods:{update(e){this.$emit("input",e)}}},o=r;var l=s(81656),c=(0,l.A)(o,a,i,!1,null,"61a75ac8",null);const d=c.exports},35254:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});const a={components:{FederationNotice:()=>s.e(8633).then(s.bind(s,58633)),FederationMissingNotice:()=>s.e(5269).then(s.bind(s,15269))},props:{federation:{type:Object,default:()=>({})}}}},36438:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});s(61701);var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:e.id}},[t("ProgressControl",{ref:"progress",attrs:{map:e.map}}),t("UserLocationControl",{attrs:{map:e.map}}),t("TextControl",{attrs:{text:e.help,map:e.map}})],1)},i=[],n=s(66451),r=s(31660),o=s(95104),l=s(2566),c=s(58704),d=s(73926),u=s(89718),p=s(70915),h=s(29276),m=s(63105),f=s(953),y=s(13628);const g={name:"MapAreaSelect",mixins:[n.A,r.A,o.A],components:{TextControl:m.A},props:{value:{type:[Object,Array],default:()=>null},showMaxExtent:{type:[Object,Array],default:()=>null}},data(){return{interaction:null,extent:this.toExtent(this.value)}},computed:{returnAsObject(){return!Array.isArray(this.value)},projectedExtent(){return this.extent?(0,u.transformExtent)(this.extent,"EPSG:4326",this.map.getView().getProjection()):null},outerArea(){if(!this.showMaxExtent)return null;let{west:e,east:t,north:s,south:a}=this.showMaxExtent;return{type:"Polygon",coordinates:[[[-180,90],[-180,-90],[180,-90],[180,90],[-180,90]],[[e,s],[e,a],[t,a],[t,s],[e,s]]]}},bbox(){return l.A.extentToBBox(this.extent)},help(){return this.extent?"Click inside the bounding box to remove it.":"Click on the map to add a bounding box."}},methods:{update(e){e.extent?this.extent=(0,u.transformExtent)(e.extent,this.map.getView().getProjection(),"EPSG:4326"):this.extent=null,this.$emit("input",this.returnAsObject?this.bbox:this.extent)},async renderMap(){let e=!1!==l.A.isBboxInWebMercator(this.bbox);if(await this.createMap(e?"EPSG:3857":"EPSG:4326"),this.addBasemaps(),this.addGeocoder(e=>{if(!e)return;let t=this.toExtent(e);t=(0,u.transformExtent)(t,"EPSG:4326",this.map.getView().getProjection()),this.interaction.setExtent(t),this.fitMap()}),this.showMaxExtent){const e=new h["default"]({fill:new y.A({color:"#00000099"}),stroke:new f.A({width:0,color:"#00000000"})});this.addGeoJson(this.outerArea,!1,"unsupported area",e);let t=this.toExtent(this.showMaxExtent);t=(0,u.transformExtent)(t,"EPSG:4326",this.map.getView().getProjection()),this.map.getView().fit(t,this.getFitOptions(1))}let t=e=>{if(!this.editable)return!1;if("singleclick"===e.type){if(!this.extent){let t=this.map.getSize().map(e=>.2*e),s=this.map.getView().calculateExtent(t),a=[s[2]-s[0],s[3]-s[1]],i=[e.coordinate[0]-a[0],e.coordinate[1]-a[1],e.coordinate[0]+a[0],e.coordinate[1]+a[1]];return this.interaction.setExtent(i),!1}(0,p.Rj)(this.projectedExtent,...e.coordinate)&&(this.interaction.setExtent(null),this.interaction.vertexOverlay_.getSource().clear(),this.interaction.vertexFeature_=null)}else if(this.interaction.handlingDownUpSequence||this.interaction.snapToVertex_(e.pixel,e.map))return!0;return(0,c.Kg)(e)};this.interaction=new d.A({extent:this.projectedExtent,condition:t,boxStyle:(0,h.createDefaultStyle)()}),this.editable&&this.interaction.on("extentchanged",this.update),this.map.addInteraction(this.interaction),this.fitMap()},fitMap(){if(this.projectedExtent){var e=this.getFitOptions(this.editable?10:33);this.map.getView().fit(this.projectedExtent,e)}}}},b=g;var x=s(81656),v=(0,x.A)(b,a,i,!1,null,null,null);const w=v.exports},37186:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-processing-mode"},[e.isAuthenticated&&(e.supportsJobs||e.supportsSync)?[t("p",[e._v("Please select how you'd like to execute this workflow?")]),t("ul",{staticClass:"mode"},[e.supportsJobs?t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{type:"radio",id:"job",value:"job"},domProps:{checked:e._q(e.mode,"job")},on:{change:function(t){e.mode="job"}}}),t("label",{attrs:{for:"job"}},[t("strong",[e._v("Batch Jobs")]),t("br"),e._v(" Slower processing mode for large amounts of data. Creates and queues a batch job."),t("br"),e._v(" It is recommended to provide a title for the batch job: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.titleInput,expression:"titleInput"}],ref:"title",attrs:{type:"text"},domProps:{value:e.titleInput},on:{input:function(t){t.target.composing||(e.titleInput=t.target.value)}}})])]):e._e(),e.supportsSync?t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{type:"radio",id:"sync",value:"sync"},domProps:{checked:e._q(e.mode,"sync")},on:{change:function(t){e.mode="sync"}}}),e._m(0)]):e._e(),e.supportsSync?t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{type:"radio",id:"model",value:""},domProps:{checked:e._q(e.mode,"")},on:{change:function(t){e.mode=""}}}),e._m(1)]):e._e()])]:t("p",[e._v(" The wizard has all information to create the workflow for you."),t("br"),e.isAuthenticated?[e._v("Unforntunately, this back-end can't process data,")]:[e._v("You are not logged in and thus you can't process data directly,")],e._v(" but you can insert the process into the visual model builder now. ")],2)],2)},i=[function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"sync"}},[t("strong",[e._v("Synchronous Processing")]),t("br"),e._v(" Fast processing mode for small amounts of data. ")])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"model"}},[t("strong",[e._v("Don't execute")]),t("br"),e._v(" Only show the generated workflow in the visual model builder. You can then export it or you can run it later. ")])}],n=s(2566);const r={name:"ChooseProcessingMode",props:{value:{type:String,default:null},title:{type:String,default:""}},data(){return{mode:this.value}},computed:{...n.A.mapState(["isAuthenticated"]),...n.A.mapGetters(["supports"]),titleInput:{get(){return this.title},set(e){this.$emit("update:title",e)}},supportsJobs(){return this.supports("createJob")&&this.supports("startJob")},supportsSync(){return this.supports("computeResult")}},watch:{value(){this.mode=this.value},mode(){this.$emit("input",this.mode),"job"===this.mode&&this.$refs.title.select()},title(){this.$emit("update:title",this.title)}}},o=r;var l=s(81656),c=(0,l.A)(o,a,i,!1,null,"449febe3",null);const d=c.exports},39201:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-index"},[t("p",[e._v("Please select the spectral index you want to compute.")]),e.indices.length>0?t("SearchableList",{attrs:{heading:"",data:e.indices,offerDetails:!1,showKeywords:""},scopedSlots:e._u([{key:"summary",fn:function({item:s}){return[t("div",{class:{element:!0,selected:s.id==e.value.id}},[t("div",{staticClass:"summary",on:{click:function(t){return e.update(s)}}},[t("div",{staticClass:"title"},[t("strong",{attrs:{title:s.id}},[e._v(e._s(s.summary))]),t("ul",{staticClass:"badges small inline"},e._l(s.keywords,function(a,i){return t("li",{key:a,class:{badge:!0,domain:i+1==s.keywords.length,[a]:i+1==s.keywords.length}},[e._v(e._s(a))])}),0)]),t("code",[e._v(e._s(s.formula))])]),t("button",{staticClass:"button",attrs:{type:"button",title:"Open website with additional details"},on:{click:function(t){return e.showDetails(s)}}},[t("i",{staticClass:"fas fa-info"})])])]}}],null,!1,970652951)}):e._e()],1)},i=[],n=(s(22489),s(45350)),r=s(61663);const o={g:"Gain factor (e.g. Used for EVI)",L:"Canopy background adjustment (e.g. Used for SAVI and EVI)",C1:"Coefficient 1 for the aerosol resistance term (e.g. Used for EVI)",C2:"Coefficient 2 for the aerosol resistance term (e.g. Used for EVI)",cexp:"Exponent used for OCVI",nexp:"Exponent used for GDVI",alpha:"Weighting coefficient used for WDRVI, BWDRVI and NDPI",beta:"Calibration parameter used for NDSIns",gamma:"Weighting coefficient used for ARVI",omega:"Weighting coefficient used for MBWI",sla:"Soil line slope",slb:"Soil line intercept",PAR:"Photosynthetically Active Radiation",k:"Slope parameter by soil used for NIRvH2",lambdaN:"NIR wavelength used for NIRvH2 and NDGI",lambdaR:"Red wavelength used for NIRvH2 and NDGI",lambdaG:"Green wavelength used for NDGI"},l={name:"ChooseSpectralIndices",mixins:[r.A],components:{SearchableList:n["default"]},props:{value:{type:Object,default:()=>({})},availableBands:{type:Object,required:!0}},data(){return{indices:[]}},async created(){const{domains:e,indices:t}=await s.e(9546).then(s.t.bind(s,49546,19)),a=Object.keys(this.availableBands),i=Object.keys(o).join("|"),n=new RegExp(`(${i})`,"g");for(let s of t){const t=s[3],i=t.filter(e=>a.includes(e));if(i.length!=t.length)continue;const r=s[4],o=Array.from(r.matchAll(n));if(o.length>0)continue;let l=s[5];l.length>0&&!l.includes("://")&&(l="https://doi.org/"+l),this.indices.push({id:s[0],summary:s[1],keywords:[...s[3],e[s[2]]],bands:t,formula:r,uri:l})}},methods:{showDetails(e){window.open(e.uri)},async update(e){this.$emit("input",e)}}},c=l;var d=s(81656),u=(0,d.A)(c,a,i,!1,null,null,null);const p=u.exports},45350:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vue-component searchable-list",class:{expandable:null!==e.collapsed,expanded:e.showList,noResults:0===e.filteredCount}},[e._t("heading",function(){return[e.heading?t("h2",{staticClass:"heading",on:{click:function(t){return e.toggleHeading(null)}}},[e._v(" "+e._s(e.heading)+" "),null!==e.filteredCount&&e.filteredCount!==e.totalCount?[e._v("("+e._s(e.filteredCount)+"/"+e._s(e.totalCount)+")")]:[e._v("("+e._s(e.totalCount)+")")]],2):e._e()]},{filteredCount:e.filteredCount,totalCount:e.totalCount}),null!==e.showList?t("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.showList,expression:"showList === true"}],staticClass:"body"},[e._t("content-start"),0===e.totalCount?[t("p",[e._v("No data available.")])]:[t("section",{staticClass:"action-bar"},[null===e.externalSearchTerm?t("SearchBox",{attrs:{placeholder:e.searchPlaceholder,minLength:e.searchMinLength},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}):e._e(),e.deprecatedFilter?t("label",{staticClass:"deprecated",attrs:{title:"Show deprecated elements?"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hideDeprecated,expression:"hideDeprecated"}],attrs:{type:"checkbox","true-value":!1,"false-value":!0},domProps:{checked:Array.isArray(e.hideDeprecated)?e._i(e.hideDeprecated,null)>-1:e._q(e.hideDeprecated,!1)},on:{change:function(t){var s=e.hideDeprecated,a=t.target,i=!a.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);a.checked?r<0&&(e.hideDeprecated=s.concat([n])):r>-1&&(e.hideDeprecated=s.slice(0,r).concat(s.slice(r+1)))}else e.hideDeprecated=i}}}),e._v(" Show deprecated ")]):e._e(),e.experimentalFilter?t("label",{staticClass:"experimental",attrs:{title:"Show experimental elements?"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hideExperimental,expression:"hideExperimental"}],attrs:{type:"checkbox","true-value":!1,"false-value":!0},domProps:{checked:Array.isArray(e.hideExperimental)?e._i(e.hideExperimental,null)>-1:e._q(e.hideExperimental,!1)},on:{change:function(t){var s=e.hideExperimental,a=t.target,i=!a.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);a.checked?r<0&&(e.hideExperimental=s.concat([n])):r>-1&&(e.hideExperimental=s.slice(0,r).concat(s.slice(r+1)))}else e.hideExperimental=i}}}),e._v(" Show experimental ")]):e._e()],1),e._t("after-search-box",null,{filteredCount:e.filteredCount,summaries:e.summaries}),0===e.filteredCount?t("p",[e._v("No search results found.")]):t("ul",{staticClass:"list",class:{expandable:e.offerDetails}},e._l(e.summaries,function(s,a){return t("li",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"summary.show"}],key:s.identifier,class:{expanded:e.showDetails[a]}},[t("summary",{staticClass:"summary",class:{experimental:s.experimental,deprecated:s.deprecated},on:{click:function(t){return e.toggleDetails(a)}}},[e._t("summary",function(){return[t("strong",[e._v(" "+e._s(s.identifier)+" "),e.allowCopy&&e.canCopy?t("span",{staticClass:"copy",attrs:{title:"Copy identifier"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.copyIdentifier(t,s)}}},[e._v("📋")]):e._e()]),s.summary?t("small",{class:{hideOnExpand:!e.showSummaryOnExpand}},[e._v(e._s(s.summary))]):e._e(),e.showKeywords&&s.keywords.length>0?t("ul",{staticClass:"badges small block hideOnExpand"},e._l(s.keywords,function(s){return t("li",{key:s,staticClass:"badge"},[e._v(e._s(s))])}),0):e._e()]},{summary:s,item:s.data})],2),"boolean"===typeof e.showDetails[a]?t("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.showDetails[a],expression:"showDetails[i] === true"}],staticClass:"details"},[s.loaded?e._t("details",function(){return[e._v(" No details available! ")]},{summary:s,item:s.data}):t("Loading")],2):e._e()])}),0)]],2):e._e()],2)},i=[],n=s(86975),r=s(15109),o=s(84542),l=s(85471);const c={name:"SearchableList",components:{Loading:r.A,SearchBox:()=>s.e(7296).then(s.bind(s,57296))},mixins:[o.A],props:{data:{type:[Array,Object],default:()=>[]},identifierKey:{type:String,default:"id"},summaryKey:{type:String,default:"summary"},keywordsKey:{type:String,default:null},showKeywords:{type:Boolean,default:!1},externalSearchTerm:{type:String,default:null},searchPlaceholder:{type:String,default:"Search"},sort:{type:Boolean,default:!0},offerDetails:{type:Boolean,default:!0},showSummaryOnExpand:{type:Boolean,default:!0},heading:{type:String,default:null},collapsed:{type:Boolean,default:null},searchMinLength:{type:Number,default:2},loadAdditionalData:{type:Function,default:null},allowCopy:{type:Boolean,default:!1},externalHideDeprecated:{type:Boolean,default:!1},deprecatedFilter:{type:Boolean,default:!1},externalHideExperimental:{type:Boolean,default:!1},experimentalFilter:{type:Boolean,default:!1}},data(){return{searchTerm:"",showDetails:{},showList:!this.collapsed||null,hideDeprecated:this.externalHideDeprecated,hideExperimental:this.externalHideExperimental,summaries:[]}},watch:{loadAdditionalData:{handler(){this.generateSummaries(this.summaries)}},data:{immediate:!0,handler(e,t){e!==t&&this.generateSummaries(e)}},externalSearchTerm:{immediate:!0,handler(e){this.searchTerm="string"===typeof e?e:""}},externalHideDeprecated:{immediate:!0,handler(e){this.hideDeprecated=e}},externalHideExperimental:{immediate:!0,handler(e){this.hideExperimental=e}},summaries:{immediate:!0,handler(){this.$emit("summaries",this.summaries)}},searchTerm(){this.filter()},hideDeprecated(){null!==this.hideDeprecatedByDefault&&this.filter()},hideExperimental(){null!==this.hideExperimentalByDefault&&this.filter()},collapsed(e){!1===e?this.showList=!0:null!==this.showList&&(this.showList=!1)}},computed:{totalCount(){return n.A.size(this.data)},filteredCount(){return this.hasActiveFilter()?this.summaries.filter(e=>!0===e.show).length:null}},created(){this.filter()},methods:{hasActiveFilter(){return this.searchTerm.length>=this.searchMinLength||null!==this.hideDeprecatedByDefault&&this.hideDeprecated||null!==this.hideExperimentalByDefault&&this.hideExperimental},filter(){const e=this.searchTerm.length>=this.searchMinLength;this.summaries.forEach(t=>{let s=!0;null!==this.hideDeprecatedByDefault&&this.hideDeprecated&&t.deprecated||null!==this.hideExperimentalByDefault&&this.hideExperimental&&t.experimental?s=!1:e&&(s=n.A.search(this.searchTerm,[t.identifier,t.summary].concat(t.keywords))),this.$set(t,"show",s)}),this.$emit("summaries",this.summaries)},copyIdentifier(e,t){if(this.allowCopy){const s=e.composedPath()[0];this.copyText(t.identifier,()=>this.toggleIcon(s,"✅"),()=>this.toggleIcon(s,"❌"))}},generateSummaries(){let e="function"===typeof this.loadAdditionalData,t=[];for(let s in this.data){let a=this.data[s],i={identifier:s,summary:"",show:!0,loaded:!e,index:s,experimental:a.experimental,deprecated:a.deprecated,data:null};"string"===typeof this.identifierKey&&"string"===typeof a[this.identifierKey]&&(i.identifier=a[this.identifierKey]),"string"===typeof this.summaryKey&&"string"===typeof a[this.summaryKey]&&(i.summary=a[this.summaryKey]),"string"===typeof this.keywordsKey&&Array.isArray(a[this.keywordsKey])?i.keywords=a[this.keywordsKey]:i.keywords=[];let n=l.Ay.observable(i);n.data=a,t.push(n)}this.sort&&t.sort((e,t)=>n.A.compareStringCaseInsensitive(e.identifier,t.identifier)),this.summaries=t},toggleHeading(e=null){null!==this.collapsed&&(this.showList=null===e?!this.showList:e,this.$emit("headingToggled",this.showList),this.$parent&&this.$parent.$emit("headingToggled",this.showList))},async toggleDetails(e,t){if(!this.offerDetails)return;if("undefined"===typeof t&&(t=!this.showDetails[e]),"undefined"===typeof this.showDetails[e]&&!1===t)return;this.$set(this.showDetails,e,t);let s=this.summaries[e];if(t&&"function"===typeof this.loadAdditionalData&&!s.loaded)try{s.data=await this.loadAdditionalData(s.index,s.identifier,s.data),s.loaded=!0}catch(a){console.error(a)}this.$emit("detailsToggled",t,s.index,s.identifier,s.data)}}},d=c;var u=s(81656),p=(0,u.A)(d,a,i,!1,null,null,null);const h=p.exports},45699:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(4477);const i={components:{WizardTab:a["default"]},props:{parent:{type:Object,required:!0},options:{type:Object,default:()=>({})}},created(){for(let e in this.options)this[e]=this.options[e]}}},46036:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-time"},[t("p",[e._v(e._s(e.text))]),t("SelectBox",{attrs:{options:e.options,value:e.value},on:{input:t=>e.$emit("input",t)}})],1)},i=[],n=(s(22489),s(61701),s(5213)),r=s(2566);const o={name:"ChooseReducer",components:{SelectBox:n["default"]},props:{text:{type:String,default:"Please select a method for aggregation:"},allowEmpty:{type:Boolean,default:!1},value:{type:String,default:"mean"}},computed:{...r.A.mapGetters(["processes"]),options(){let e=this.processes.all().filter(e=>{if(Array.isArray(e.categories)&&e.categories.includes("reducer")&&Array.isArray(e.parameters)&&"array_element"!==e.id){let t=e.parameters.filter(e=>!0!==e.optional);return 1===t.length&&"data"===t[0].name}return!1}).map(e=>({id:e.id,label:`${e.id} - ${e.summary}`}));return e.unshift({id:"",label:"No composite"}),e}}},l=o;var c=s(81656),d=(0,c.A)(l,a,i,!1,null,null,null);const u=d.exports},62804:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-time"},[t("p",[e._v("Please select the days for which you want to download data for.")]),t("TemporalPicker",{attrs:{type:"temporal-interval",intervalType:"date",value:e.value},on:{input:t=>e.$emit("input",t)}})],1)},i=[],n=s(27349);const r={name:"ChooseTime",components:{TemporalPicker:n["default"]},props:{value:{type:Array,default:null}}},o=r;var l=s(81656),c=(0,l.A)(o,a,i,!1,null,null,null);const d=c.exports},63105:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=function(){var e=this,t=e._self._c;return e.texts.length>0?t("div",{staticClass:"ol-unselectable ol-control value",class:{pointer:e.texts.length>1},on:{click:e.toggle}},[e._v(e._s(e.current))]):e._e()},i=[],n=s(23634);const r={name:"TextControl",mixins:[n.A],data(){return{i:0}},computed:{texts(){return Array.isArray(this.text)?this.text:"string"===typeof this.text&&this.text.length>0?[this.text]:[]},current(){return 0===this.texts.length?"":this.texts[this.i%this.text.length]}},props:{text:{type:[String,Array],default:""}},methods:{toggle(){this.i++}}},o=r;var l=s(81656),c=(0,l.A)(o,a,i,!1,null,"b1521986",null);const d=c.exports},63610:(e,t,s)=>{"use strict";s.r(t),s.d(t,{API_TYPES:()=>i,NATIVE_TYPES:()=>n});var a=s(2566);const i=a.A.resolveJsonRefs(s(96318)).definitions,n=["string","integer","number","boolean","array","object"]},66684:function(e,t,s){
/*!
 * @kirtandesai/ol-geocoder - v5.0.3
 * A geocoder extension compatible with OpenLayers v7.
 * https://github.com/kirtan-desai/ol-geocoder
 * Built: Thu Nov 17 2022 14:58:35 GMT-0500 (Eastern Standard Time)
 */
!function(t,a){e.exports=a(s(10972),s(29276),s(49700),s(82986),s(54602),s(44294),s(86717),s(89718))}(0,function(e,t,s,a,i,n,r,o){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=l(e),d=l(t),u=l(s),p=l(a),h=l(i),m=l(n),f=l(r),y=l(o),g="gcd-container",b="gcd-button-control",x="gcd-input-query",v="gcd-input-reset",w={namespace:"ol-geocoder",spin:"gcd-pseudo-rotate",hidden:"gcd-hidden",address:"gcd-address",country:"gcd-country",city:"gcd-city",road:"gcd-road",olControl:"ol-control",glass:{container:"gcd-gl-container",control:"gcd-gl-control",button:"gcd-gl-btn",input:"gcd-gl-input",expanded:"gcd-gl-expanded",reset:"gcd-gl-reset",result:"gcd-gl-result"},inputText:{container:"gcd-txt-container",control:"gcd-txt-control",input:"gcd-txt-input",reset:"gcd-txt-reset",icon:"gcd-txt-glass",result:"gcd-txt-result"}},_={containerId:g,buttonControlId:b,inputQueryId:x,inputResetId:v,cssClasses:w};const C=Object.freeze({__proto__:null,containerId:g,buttonControlId:b,inputQueryId:x,inputResetId:v,cssClasses:w,default:_}),A="addresschosen",k="nominatim",S="reverse",E="glass-button",T="text-input",j="osm",$="mapquest",D="photon",P="bing",I="opencage",O={provider:j,placeholder:"Search for an address",featureStyle:null,targetType:E,lang:"en-US",limit:5,keepOpen:!1,preventDefault:!1,autoComplete:!1,autoCompleteMinLength:2,autoCompleteTimeout:200,debug:!1};function B(e,t="Assertion failed"){if(!e){if("undefined"!=typeof Error)throw new Error(t);throw t}}function F(e){const t=function(){if("performance"in window==0&&(window.performance={}),"now"in window.performance==0){let e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=()=>Date.now()-e}return window.performance.now()}().toString(36);return e?e+t:t}function L(e){return/^\d+$/u.test(e)}function N(e,t,s){if(Array.isArray(e))return void e.forEach(e=>N(e,t));const a=Array.isArray(t)?t:t.split(/\s+/u);let i=a.length;for(;i--;)R(e,a[i])||H(e,a[i],s)}function M(e,t,s){if(Array.isArray(e))return void e.forEach(e=>M(e,t,s));const a=Array.isArray(t)?t:t.split(/\s+/u);let i=a.length;for(;i--;)R(e,a[i])&&U(e,a[i],s)}function R(e,t){return e.classList?e.classList.contains(t):V(t).test(e.className)}function q(e,t){return e.replace(/\{\s*([\w-]+)\s*\}/gu,(e,s)=>{const a=void 0===t[s]?"":t[s];return String(a).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")})}function G(e,t){let s;if(Array.isArray(e)){if(s=document.createElement(e[0]),e[1].id&&(s.id=e[1].id),e[1].classname&&(s.className=e[1].classname),e[1].attr){const{attr:t}=e[1];if(Array.isArray(t)){let e=-1;for(;++e<t.length;)s.setAttribute(t[e].name,t[e].value)}else s.setAttribute(t.name,t.value)}}else s=document.createElement(e);s.innerHTML=t;const a=document.createDocumentFragment();for(;s.childNodes[0];)a.append(s.childNodes[0]);return s.append(a),s}function V(e){return new RegExp(`(^|\\s+) ${e} (\\s+|$)`,"u")}function H(e,t,s){e.classList?e.classList.add(t):e.className=`${e.className} ${t}`.trim(),s&&L(s)&&window.setTimeout(()=>U(e,t),s)}function U(e,t,s){e.classList?e.classList.remove(t):e.className=e.className.replace(V(t)," ").trim(),s&&L(s)&&window.setTimeout(()=>H(e,t),s)}const K=C.cssClasses;class W{constructor(e){this.options=e,this.els=this.createControl()}createControl(){let e,t,s;return this.options.targetType===T?(t=`${K.namespace} ${K.inputText.container}`,e=G(["div",{id:C.containerId,classname:t}],W.input),s={container:e,control:e.querySelector(`.${K.inputText.control}`),input:e.querySelector(`.${K.inputText.input}`),reset:e.querySelector(`.${K.inputText.reset}`),result:e.querySelector(`.${K.inputText.result}`)}):(t=`${K.namespace} ${K.glass.container}`,e=G(["div",{id:C.containerId,classname:t}],W.glass),s={container:e,control:e.querySelector(`.${K.glass.control}`),button:e.querySelector(`.${K.glass.button}`),input:e.querySelector(`.${K.glass.input}`),reset:e.querySelector(`.${K.glass.reset}`),result:e.querySelector(`.${K.glass.result}`)}),s.input.placeholder=this.options.placeholder,s}}W.glass=`\n  <div class="${K.glass.control} ${K.olControl}">\n    <button type="button" id="${C.buttonControlId}" class="${K.glass.button}"></button>\n    <input type="text" id="${C.inputQueryId}" class="${K.glass.input}" autocomplete="off" placeholder="Search ...">\n    <a id="${C.inputResetId}" class="${K.glass.reset} ${K.hidden}"></a>\n  </div>\n  <ul class="${K.glass.result}"></ul>\n`,W.input=`\n  <div class="${K.inputText.control}">\n    <input type="text" id="${C.inputQueryId}" class="${K.inputText.input}" autocomplete="off" placeholder="Search ...">\n    <span class="${K.inputText.icon}"></span>\n    <button type="button" id="${C.inputResetId}" class="${K.inputText.reset} ${K.hidden}"></button>\n  </div>\n  <ul class="${K.inputText.result}"></ul>\n`;class z{constructor(){this.settings={url:"https://photon.komoot.io/api/",params:{q:"",limit:10,lang:"en"},langs:["de","it","fr","en"]}}getParameters(e){return e.lang=e.lang.toLowerCase(),{url:this.settings.url,params:{q:e.query,limit:e.limit||this.settings.params.limit,lang:this.settings.langs.includes(e.lang)?e.lang:this.settings.params.lang}}}handleResponse(e){return 0===e.features.length?[]:e.features.map(e=>({lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],address:{name:e.properties.name,postcode:e.properties.postcode,city:e.properties.city,state:e.properties.state,country:e.properties.country},original:{formatted:e.properties.name,details:e.properties}}))}}class Y{constructor(){this.settings={url:"https://nominatim.openstreetmap.org/search/",params:{q:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}}getParameters(e){return{url:this.settings.url,params:{q:e.query,format:this.settings.params.format,addressdetails:this.settings.params.addressdetails,limit:e.limit||this.settings.params.limit,countrycodes:e.countrycodes||this.settings.params.countrycodes,"accept-language":e.lang||this.settings.params["accept-language"]}}}handleResponse(e){return 0===e.length?[]:e.map(e=>({lon:e.lon,lat:e.lat,bbox:e.boundingbox,address:{name:e.display_name,road:e.address.road||"",houseNumber:e.address.house_number||"",postcode:e.address.postcode,city:e.address.city||e.address.town,state:e.address.state,country:e.address.country},original:{formatted:e.display_name,details:e.address}}))}}class J{constructor(){this.settings={url:"https://open.mapquestapi.com/nominatim/v1/search.php",params:{q:"",key:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}}getParameters(e){return{url:this.settings.url,params:{q:e.query,key:e.key,format:"json",addressdetails:1,limit:e.limit||this.settings.params.limit,countrycodes:e.countrycodes||this.settings.params.countrycodes,"accept-language":e.lang||this.settings.params["accept-language"]}}}handleResponse(e){return 0===e.length?[]:e.map(e=>({lon:e.lon,lat:e.lat,address:{name:e.address.neighbourhood||"",road:e.address.road||"",postcode:e.address.postcode,city:e.address.city||e.address.town,state:e.address.state,country:e.address.country},original:{formatted:e.display_name,details:e.address}}))}}class Q{constructor(){this.settings={url:"https://dev.virtualearth.net/REST/v1/Locations",callbackName:"jsonp",params:{query:"",key:"",includeNeighborhood:0,maxResults:10}}}getParameters(e){return{url:this.settings.url,callbackName:this.settings.callbackName,params:{query:e.query,key:e.key,includeNeighborhood:e.includeNeighborhood||this.settings.params.includeNeighborhood,maxResults:e.maxResults||this.settings.params.maxResults}}}handleResponse(e){const{resources:t}=e.resourceSets[0];return 0===t.length?[]:t.map(e=>({lon:e.point.coordinates[1],lat:e.point.coordinates[0],address:{name:e.name},original:{formatted:e.address.formattedAddress,details:e.address}}))}}class X{constructor(){this.settings={url:"https://api.opencagedata.com/geocode/v1/json?",params:{q:"",key:"",limit:10,countrycode:"",pretty:1,no_annotations:1}}}getParameters(e){return{url:this.settings.url,params:{q:e.query,key:e.key,limit:e.limit||this.settings.params.limit,countrycode:e.countrycodes||this.settings.params.countrycodes}}}handleResponse(e){return 0===e.results.length?[]:e.results.map(e=>({lon:e.geometry.lng,lat:e.geometry.lat,address:{name:e.components.house_number||"",road:e.components.road||"",postcode:e.components.postcode,city:e.components.city||e.components.town,state:e.components.state,country:e.components.country},original:{formatted:e.formatted,details:e.components}}))}}function Z(e){return new Promise((t,s)=>{const a=function(e,t){return t&&"object"==typeof t&&(e+=(/\?/u.test(e)?"&":"?")+ee(t)),e}(e.url,e.data),i={method:"GET",mode:"cors",credentials:"same-origin"};e.jsonp?function(e,t,s){const{head:a}=document,i=document.createElement("script"),n=`f${Math.round(Math.random()*Date.now())}`;i.setAttribute("src",`${e+(e.indexOf("?")>0?"&":"?")+t}=${n}`),window[n]=e=>{window[n]=void 0,setTimeout(()=>a.removeChild(i),0),s(e)},a.append(i)}(a,e.callbackName,t):fetch(a,i).then(e=>e.json()).then(t).catch(s)})}function ee(e){return Object.keys(e).reduce((t,s)=>(t.push("object"==typeof e[s]?ee(e[s]):`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`),t),[]).join("&")}const te=C.cssClasses;class se{constructor(e,t){this.Base=e,this.layerName=F("geocoder-layer-"),this.layer=new p.default({name:this.layerName,source:new h.default}),this.options=e.options,this.options.provider="string"==typeof this.options.provider?this.options.provider.toLowerCase():this.options.provider,this.provider=this.newProvider(),this.els=t,this.lastQuery="",this.container=this.els.container,this.registeredListeners={mapClick:!1},this.setListeners()}setListeners(){let e,t;const s=e=>{e.stopPropagation(),R(this.els.control,te.glass.expanded)?this.collapse():this.expand()};this.els.input.addEventListener("keypress",e=>{const t=e.target.value.trim();(e.key?"Enter"===e.key:e.which?13===e.which:e.keyCode&&13===e.keyCode)&&(e.preventDefault(),this.query(t))},!1),this.els.input.addEventListener("click",e=>e.stopPropagation(),!1),this.els.input.addEventListener("input",s=>{const a=s.target.value.trim();0!==a.length?M(this.els.reset,te.hidden):N(this.els.reset,te.hidden),this.options.autoComplete&&a!==t&&(t=a,e&&clearTimeout(e),e=setTimeout(()=>{a.length>=this.options.autoCompleteMinLength&&this.query(a)},this.options.autoCompleteTimeout))},!1),this.els.reset.addEventListener("click",e=>{this.els.input.focus(),this.els.input.value="",this.lastQuery="",N(this.els.reset,te.hidden),this.clearResults()},!1),this.options.targetType===E&&this.els.button.addEventListener("click",s,!1)}query(e){this.provider||(this.provider=this.newProvider());const t=this.provider.getParameters({query:e,key:this.options.key,lang:this.options.lang,countrycodes:this.options.countrycodes,limit:this.options.limit});if(this.lastQuery===e&&this.els.result.firstChild)return;this.lastQuery=e,this.clearResults(),N(this.els.reset,te.spin);const s={url:t.url,data:t.params};t.callbackName&&(s.jsonp=!0,s.callbackName=t.callbackName),Z(s).then(e=>{this.options.debug&&console.info(e),M(this.els.reset,te.spin);const t=this.provider.handleResponse(e);t&&(this.createList(t),this.listenMapClick())}).catch(e=>{M(this.els.reset,te.spin);const t=G("li","<h5>Error! No internet connection?</h5>");this.els.result.append(t)})}createList(e){const t=this.els.result;e.forEach(e=>{let s;s=this.options.provider===j?`<span class="${te.road}">${e.address.name}</span>`:this.addressTemplate(e.address);const a=G("li",`<a href="#">${s}</a>`);a.addEventListener("click",t=>{t.preventDefault(),this.chosen(e,s,e.address,e.original)},!1),t.append(a)})}chosen(e,t,s,a){const i=this.Base.getMap(),n=[Number.parseFloat(e.lon),Number.parseFloat(e.lat)],r=i.getView().getProjection(),o=y.default.transform(n,"EPSG:4326",r);let{bbox:l}=e;l&&(l=y.default.transformExtent([l[2],l[1],l[3],l[0]],"EPSG:4326",r));const c={formatted:t,details:s,original:a};if(!1===this.options.keepOpen&&this.clearResults(!0),!0===this.options.preventDefault)this.Base.dispatchEvent({type:A,address:c,coordinate:o,bbox:l,place:e});else{l?i.getView().fit(l,{duration:500}):function(e,t,s=500,a=2.388657133911758){e.getView().animate({duration:s,resolution:a},{duration:s,center:t})}(i,o);const t=this.createFeature(o,c);this.Base.dispatchEvent({type:A,address:c,feature:t,coordinate:o,bbox:l,place:e})}}createFeature(e){const t=new f.default(new m.default(e));return this.addLayer(),t.setStyle(this.options.featureStyle),t.setId(F("geocoder-ft-")),this.getSource().addFeature(t),t}addressTemplate(e){const t=[];return e.name&&t.push(['<span class="',te.road,'">{name}</span>'].join("")),(e.road||e.building||e.house_number)&&t.push(['<span class="',te.road,'">{building} {road} {house_number}</span>'].join("")),(e.city||e.town||e.village)&&t.push(['<span class="',te.city,'">{postcode} {city} {town} {village}</span>'].join("")),(e.state||e.country)&&t.push(['<span class="',te.country,'">{state} {country}</span>'].join("")),q(t.join("<br>"),e)}newProvider(){switch(this.options.provider){case j:return new Y;case $:return new J;case D:return new z;case P:return new Q;case I:return new X;default:return this.options.provider}}expand(){M(this.els.input,te.spin),N(this.els.control,te.glass.expanded),window.setTimeout(()=>this.els.input.focus(),100),this.listenMapClick()}collapse(){this.els.input.value="",this.els.input.blur(),N(this.els.reset,te.hidden),M(this.els.control,te.glass.expanded),this.clearResults()}listenMapClick(){if(this.registeredListeners.mapClick)return;const e=this,t=this.Base.getMap().getTargetElement();this.registeredListeners.mapClick=!0,t.addEventListener("click",{handleEvent(s){e.clearResults(!0),t.removeEventListener(s.type,this,!1),e.registeredListeners.mapClick=!1}},!1)}clearResults(e){e&&this.options.targetType===E?this.collapse():function(e){for(;e.firstChild;)e.firstChild.remove()}(this.els.result)}getSource(){return this.layer.getSource()}addLayer(){let e=!1;const t=this.Base.getMap();t.getLayers().forEach(t=>{t===this.layer&&(e=!0)}),e||t.addLayer(this.layer)}}class ae extends c.default{constructor(e=k,t={}){let s,a;B("string"==typeof e,"@param `type` should be string!"),B(e===k||e===S,`@param 'type' should be '${k}'\n      or '${S}'!`),B("object"==typeof t,"@param `options` should be object!"),O.featureStyle=[new d.default({image:new u.default({scale:.7,src:"//cdn.rawgit.com/jonataswalker/map-utils/master/images/marker.png"})})];const i=new W(t);if(e===k&&(s=i.els.container),super({element:s}),!(this instanceof ae))return new ae;this.options=function(e,t){const s={};return Object.keys(e).forEach(t=>{Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])}),Object.keys(t).forEach(e=>{Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])}),s}(O,t),this.container=s,e===k&&(a=new se(this,i.els),this.layer=a.layer)}getLayer(){return this.layer}getSource(){return this.getLayer().getSource()}setProvider(e){this.options.provider=e}setProviderKey(e){this.options.key=e}}return ae})},73926:(e,t,s)=>{"use strict";s.d(t,{A:()=>A});var a=s(1685),i=s(86717),n=s(73445),r=s(44294),o=s(21409),l=s(82986),c=s(54602),d=s(58704),u=s(70915),p=s(6933),h=s(29276),m=s(34142),f=s(89718);const y={EXTENTCHANGED:"extentchanged"};class g extends a.Ay{constructor(e){super(y.EXTENTCHANGED),this.extent=e}}class b extends o.A{constructor(e){e=e||{},super(e),this.on,this.once,this.un,this.condition_=e.condition?e.condition:d.Gk,this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new l["default"]({source:new c["default"]({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:x(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new l["default"]({source:new c["default"]({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:v(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}snapToVertex_(e,t){const s=t.getCoordinateFromPixelInternal(e),a=function(e,t){return(0,p.$x)(s,e)-(0,p.$x)(s,t)},i=this.getExtentInternal();if(i){const n=C(i);n.sort(a);const r=n[0];let o=(0,p.sG)(s,r);const l=t.getPixelFromCoordinateInternal(o);if((0,p.Io)(e,l)<=this.pixelTolerance_){const e=t.getPixelFromCoordinateInternal(r[0]),s=t.getPixelFromCoordinateInternal(r[1]),a=(0,p.hG)(l,e),i=(0,p.hG)(l,s),n=Math.sqrt(Math.min(a,i));return this.snappedToVertex_=n<=this.pixelTolerance_,this.snappedToVertex_&&(o=a>i?r[1]:r[0]),o}}return null}handlePointerMove_(e){const t=e.pixel,s=e.map;let a=this.snapToVertex_(t,s);a||(a=s.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(a)}createOrUpdateExtentFeature_(e){let t=this.extentFeature_;return t?e?t.setGeometry((0,m.VY)(e)):t.setGeometry(void 0):(t=e?new i["default"]((0,m.VY)(e)):new i["default"]({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t}createOrUpdatePointerFeature_(e){let t=this.vertexFeature_;if(t){const s=t.getGeometry();s.setCoordinates(e)}else t=new i["default"](new r["default"](e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t);return t}handleEvent(e){return!e.originalEvent||!this.condition_(e)||(e.type!=n.A.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),super.handleEvent(e),!1)}handleDownEvent(e){const t=e.pixel,s=e.map,a=this.getExtentInternal();let i=this.snapToVertex_(t,s);const n=function(e){let t=null,s=null;return e[0]==a[0]?t=a[2]:e[0]==a[2]&&(t=a[0]),e[1]==a[1]?s=a[3]:e[1]==a[3]&&(s=a[1]),null!==t&&null!==s?[t,s]:null};if(i&&a){const e=i[0]==a[0]||i[0]==a[2]?i[0]:null,t=i[1]==a[1]||i[1]==a[3]?i[1]:null;null!==e&&null!==t?this.pointerHandler_=w(n(i)):null!==e?this.pointerHandler_=_(n([e,a[1]]),n([e,a[3]])):null!==t&&(this.pointerHandler_=_(n([a[0],t]),n([a[2],t])))}else i=s.getCoordinateFromPixelInternal(t),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=w(i);return!0}handleDragEvent(e){if(this.pointerHandler_){const t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}}handleUpEvent(e){this.pointerHandler_=null;const t=this.getExtentInternal();return t&&0!==(0,u.UG)(t)||this.setExtent(null),!1}setMap(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),super.setMap(e)}getExtent(){return(0,f.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())}getExtentInternal(){return this.extent_}setExtent(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new g(this.extent_))}}function x(){const e=(0,h.createEditingStyle)();return function(t,s){return e["Polygon"]}}function v(){const e=(0,h.createEditingStyle)();return function(t,s){return e["Point"]}}function w(e){return function(t){return(0,u.Tr)([e,t])}}function _(e,t){return e[0]==t[0]?function(s){return(0,u.Tr)([e,[s[0],t[1]]])}:e[1]==t[1]?function(s){return(0,u.Tr)([e,[t[0],s[1]]])}:null}function C(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}const A=b},79066:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-format"},[t("p",[e._v("Please select the file format you want to download data in.")]),t("SelectBox",{attrs:{type:"output-format",value:e.value,optionFilter:e.filterFormats},on:{input:e.setFormat}}),null!==e.scale?t("p",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.scaleBox,expression:"scaleBox"}],attrs:{type:"checkbox",id:"scale"},domProps:{checked:Array.isArray(e.scaleBox)?e._i(e.scaleBox,null)>-1:e.scaleBox},on:{change:function(t){var s=e.scaleBox,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);a.checked?r<0&&(e.scaleBox=s.concat([n])):r>-1&&(e.scaleBox=s.slice(0,r).concat(s.slice(r+1)))}else e.scaleBox=i}}}),e._v("  "),t("label",{attrs:{for:"scale"}},[e._v("Scale the values from [-1, 1] to [0, 255] (often required for PNG, GIF or JPEG).")])]):e._e()],1)},i=[],n=s(5213);const r={name:"ChooseFormat",components:{SelectBox:n["default"]},props:{value:{type:String,default:null},scale:{type:Boolean,default:null},gisDataType:{type:String,default:null}},computed:{scaleBox:{get(){return this.scale},set(e){this.$emit("update:scale",e)}},filterFormats(){return this.gisDataType?e=>!Array.isArray(e.gis_data_types)||0===e.gis_data_types.length||e.gis_data_types.includes(this.gisDataType):null}},methods:{setFormat(e){this.scaleBox=["bmp","gif","jpeg","jpg","png","webp"].includes(e.toLowerCase()),this.$emit("input",e)}}},o=r;var l=s(81656),c=(0,l.A)(o,a,i,!1,null,null,null);const d=c.exports},83719:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-collection"},[t("p",[e._v("Please select the collection which you want to download data for.")]),t("Collections",{attrs:{heading:"",collections:e.filteredCollections,offerDetails:!1,federation:e.federation,missing:e.federationMissing.collections},scopedSlots:e._u([{key:"summary",fn:function({item:s}){return[t("div",{class:{element:!0,selected:s.id==e.value}},[t("div",{staticClass:"summary",on:{click:function(t){return e.update(s.id)}}},[t("strong",{attrs:{title:s.id}},[e._v(e._s(s.id))]),s.title?t("small",{attrs:{title:s.title}},[e._v(e._s(s.title))]):e._e()]),t("button",{staticClass:"button",attrs:{type:"button",title:"Show collection details"},on:{click:function(t){return e.showCollectionInfo(s.id)}}},[t("i",{staticClass:"fas fa-info"})])])]}}])})],1)},i=[],n=(s(22489),s(29365)),r=s(2566),o=s(61663);const l={name:"ChooseCollection",mixins:[o.A],components:{Collections:n.A},props:{value:{type:String,default:null},filter:{type:Function,default:null}},computed:{...r.A.mapState(["collections","federationMissing"]),...r.A.mapGetters(["federation"]),filteredCollections(){return"function"===typeof this.filter?this.collections.filter(this.filter):this.collections}},methods:{...r.A.mapActions(["describeCollection"]),async update(e){this.$emit("input",e)},showCollectionInfo(e){this.broadcast("showCollection",e)}}},c=l;var d=s(81656),u=(0,d.A)(c,a,i,!1,null,null,null);const p=u.exports},84542:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});const a={data(){return{canCopy:!1}},mounted(){this.canCopy=navigator&&navigator.clipboard&&"function"===typeof navigator.clipboard.writeText},methods:{copyText(e,t=null,s=null){if(this.canCopy){const a=navigator.clipboard.writeText(e);t&&a.then(t),s&&a.catch(s)}},toggleIcon(e,t){if(e){let s=e.innerText;e.innerText=t,setTimeout(()=>e.innerText=s,2e3)}}}}}}]);
//# sourceMappingURL=1765.b1c9098e.js.map
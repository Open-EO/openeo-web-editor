"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[45],{6549:t=>{t.exports=Object.getOwnPropertyDescriptor},9957:(t,e,r)=>{var i=Function.prototype.call,o=Object.prototype.hasOwnProperty,n=r(66743);t.exports=n.call(i,o)},11585:(t,e,r)=>{r.d(e,{A:()=>G});var i=r(85326),o=r(75467),n=r(1223),s=r(98622);function a(t,e){const{width:r,height:i}=t,o=new Uint8Array(r*i*3);let n;for(let s=0,a=0;s<t.length;++s,a+=3)n=256-t[s]/e*256,o[a]=n,o[a+1]=n,o[a+2]=n;return o}function l(t,e){const{width:r,height:i}=t,o=new Uint8Array(r*i*3);let n;for(let s=0,a=0;s<t.length;++s,a+=3)n=t[s]/e*256,o[a]=n,o[a+1]=n,o[a+2]=n;return o}function h(t,e){const{width:r,height:i}=t,o=new Uint8Array(r*i*3),n=e.length/3,s=e.length/3*2;for(let a=0,l=0;a<t.length;++a,l+=3){const r=t[a];o[l]=e[r]/65536*256,o[l+1]=e[r+n]/65536*256,o[l+2]=e[r+s]/65536*256}return o}function c(t){const{width:e,height:r}=t,i=new Uint8Array(e*r*3);for(let o=0,n=0;o<t.length;o+=4,n+=3){const e=t[o],r=t[o+1],s=t[o+2],a=t[o+3];i[n]=(255-e)/256*255*((255-a)/256),i[n+1]=(255-r)/256*255*((255-a)/256),i[n+2]=(255-s)/256*255*((255-a)/256)}return i}function f(t){const{width:e,height:r}=t,i=new Uint8ClampedArray(e*r*3);for(let o=0,n=0;o<t.length;o+=3,n+=3){const e=t[o],r=t[o+1],s=t[o+2];i[n]=e+1.402*(s-128),i[n+1]=e-.34414*(r-128)-.71414*(s-128),i[n+2]=e+1.772*(r-128)}return i}const u=.95047,y=1,p=1.08883;function g(t){const{width:e,height:r}=t,i=new Uint8Array(e*r*3);for(let o=0,n=0;o<t.length;o+=3,n+=3){const e=t[o+0],r=t[o+1]<<24>>24,s=t[o+2]<<24>>24;let a,l,h,c=(e+16)/116,f=r/500+c,g=c-s/200;f=u*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),c=y*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),g=p*(g*g*g>.008856?g*g*g:(g-16/116)/7.787),a=3.2406*f+-1.5372*c+-.4986*g,l=-.9689*f+1.8758*c+.0415*g,h=.0557*f+-.204*c+1.057*g,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,l=l>.0031308?1.055*l**(1/2.4)-.055:12.92*l,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,i[n]=255*Math.max(0,Math.min(1,a)),i[n+1]=255*Math.max(0,Math.min(1,l)),i[n+2]=255*Math.max(0,Math.min(1,h))}return i}const d=new Map,w=new Map;function m(t,e,r=!0){Array.isArray(t)||(t=[t]),t.forEach(t=>{d.set(t,e),w.set(t,r)})}async function b(t){const e=d.get(t.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${t.Compression}`);const r=await e();return new r(t)}function S(t,e,r,i=1){return new(Object.getPrototypeOf(t).constructor)(e*r*i)}function A(t,e,r,i,o){const n=e/i,s=r/o;return t.map(t=>{const a=S(t,i,o);for(let l=0;l<o;++l){const o=Math.min(Math.round(s*l),r-1);for(let r=0;r<i;++r){const s=Math.min(Math.round(n*r),e-1),h=t[o*e+s];a[l*i+r]=h}}return a})}function P(t,e,r){return(1-r)*t+r*e}function I(t,e,r,i,o){const n=e/i,s=r/o;return t.map(t=>{const a=S(t,i,o);for(let l=0;l<o;++l){const o=s*l,h=Math.floor(o),c=Math.min(Math.ceil(o),r-1);for(let r=0;r<i;++r){const s=n*r,f=s%1,u=Math.floor(s),y=Math.min(Math.ceil(s),e-1),p=t[h*e+u],g=t[h*e+y],d=t[c*e+u],w=t[c*e+y],m=P(P(p,g,f),P(d,w,f),o%1);a[l*i+r]=m}}return a})}function E(t,e,r,i,o,n="nearest"){switch(n.toLowerCase()){case"nearest":return A(t,e,r,i,o);case"bilinear":case"linear":return I(t,e,r,i,o);default:throw new Error(`Unsupported resampling method: '${n}'`)}}function D(t,e,r,i,o,n){const s=e/i,a=r/o,l=S(t,i,o,n);for(let h=0;h<o;++h){const o=Math.min(Math.round(a*h),r-1);for(let r=0;r<i;++r){const a=Math.min(Math.round(s*r),e-1);for(let s=0;s<n;++s){const c=t[o*e*n+a*n+s];l[h*i*n+r*n+s]=c}}}return l}function T(t,e,r,i,o,n){const s=e/i,a=r/o,l=S(t,i,o,n);for(let h=0;h<o;++h){const o=a*h,c=Math.floor(o),f=Math.min(Math.ceil(o),r-1);for(let r=0;r<i;++r){const a=s*r,u=a%1,y=Math.floor(a),p=Math.min(Math.ceil(a),e-1);for(let s=0;s<n;++s){const a=t[c*e*n+y*n+s],g=t[c*e*n+p*n+s],d=t[f*e*n+y*n+s],w=t[f*e*n+p*n+s],m=P(P(a,g,u),P(d,w,u),o%1);l[h*i*n+r*n+s]=m}}}return l}function M(t,e,r,i,o,n,s="nearest"){switch(s.toLowerCase()){case"nearest":return D(t,e,r,i,o,n);case"bilinear":case"linear":return T(t,e,r,i,o,n);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function F(t,e,r){let i=0;for(let o=e;o<r;++o)i+=t[o];return i}function O(t,e,r){switch(t){case 1:if(e<=8)return new Uint8Array(r);if(e<=16)return new Uint16Array(r);if(e<=32)return new Uint32Array(r);break;case 2:if(8===e)return new Int8Array(r);if(16===e)return new Int16Array(r);if(32===e)return new Int32Array(r);break;case 3:switch(e){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r);default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}function U(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!==0)&&(3!==t||16!==e&&32!==e&&64!==e)}function R(t,e,r,i,o,n,s){const a=new DataView(t),l=2===r?s*n:s*n*i,h=2===r?1:i,c=O(e,o,l),f=parseInt("1".repeat(o),2);if(1===e){let t;t=1===r?i*o:o;let e=n*t;0!==(7&e)&&(e=e+7&-8);for(let r=0;r<s;++r){const t=r*e;for(let e=0;e<n;++e){const i=t+e*h*o;for(let t=0;t<h;++t){const s=i+t*o,l=(r*n+e)*h+t,u=Math.floor(s/8),y=s%8;if(y+o<=8)c[l]=a.getUint8(u)>>8-o-y&f;else if(y+o<=16)c[l]=a.getUint16(u)>>16-o-y&f;else if(y+o<=24){const t=a.getUint16(u)<<8|a.getUint8(u+2);c[l]=t>>24-o-y&f}else c[l]=a.getUint32(u)>>32-o-y&f}}}}return c.buffer}m([void 0,1],()=>r.e(5121).then(r.bind(r,35121)).then(t=>t.default),!1),m(5,()=>r.e(2764).then(r.bind(r,12764)).then(t=>t.default)),m(6,()=>{throw new Error("old style JPEG compression is not supported.")}),m(7,()=>r.e(6457).then(r.bind(r,76457)).then(t=>t.default)),m([8,32946],()=>Promise.all([r.e(3075),r.e(424)]).then(r.bind(r,50424)).then(t=>t.default)),m(32773,()=>r.e(1030).then(r.bind(r,1030)).then(t=>t.default)),m(34887,()=>Promise.all([r.e(3075),r.e(4827),r.e(6885)]).then(r.bind(r,56885)).then(async t=>(await t.zstd.init(),t)).then(t=>t.default)),m(5e4,()=>r.e(7540).then(r.bind(r,97540)).then(async t=>(await t.zstd.init(),t)).then(t=>t.default)),m(50001,()=>r.e(6568).then(r.bind(r,6568)).then(t=>t.default),!1);class k{constructor(t,e,r,i,o,n){this.fileDirectory=t,this.geoKeys=e,this.dataView=r,this.littleEndian=i,this.tiles=o?{}:null,this.isTiled=!t.StripOffsets;const s=t.PlanarConfiguration;if(this.planarConfiguration="undefined"===typeof s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=n}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return"undefined"!==typeof this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:"undefined"!==typeof this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(t,e){return(0,i.O)(this,t,e)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64;default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){const r=this.getSampleFormat(t),i=this.getBitsPerSample(t);return O(r,i,e)}async getTileOrStrip(t,e,r,i,o){const n=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight());let a;const{tiles:l}=this;let h,c;if(1===this.planarConfiguration?a=e*n+t:2===this.planarConfiguration&&(a=r*n*s+e*n+t),this.isTiled?(h=this.fileDirectory.TileOffsets[a],c=this.fileDirectory.TileByteCounts[a]):(h=this.fileDirectory.StripOffsets[a],c=this.fileDirectory.StripByteCounts[a]),0===c){const i=this.getBlockHeight(e)*this.getTileWidth(),o=2===this.planarConfiguration?this.getSampleByteSize(r):this.getBytesPerPixel(),n=new ArrayBuffer(i*o),s=this.getArrayForSample(r,n);return s.fill(this.getGDALNoData()||0),{x:t,y:e,sample:r,data:n}}const f=(await this.source.fetch([{offset:h,length:c}],o))[0];let u;return null!==l&&l[a]?u=l[a]:(u=(async()=>{let t=await i.decode(this.fileDirectory,f);const r=this.getSampleFormat(),o=this.getBitsPerSample();return U(r,o)&&(t=R(t,r,this.planarConfiguration,this.getSamplesPerPixel(),o,this.getTileWidth(),this.getBlockHeight(e))),t})(),null!==l&&(l[a]=u)),{x:t,y:e,sample:r,data:await u}}async _readRaster(t,e,r,i,o,n,s,a,l){const h=this.getTileWidth(),c=this.getTileHeight(),f=this.getWidth(),u=this.getHeight(),y=Math.max(Math.floor(t[0]/h),0),p=Math.min(Math.ceil(t[2]/h),Math.ceil(f/h)),g=Math.max(Math.floor(t[1]/c),0),d=Math.min(Math.ceil(t[3]/c),Math.ceil(u/c)),w=t[2]-t[0];let m=this.getBytesPerPixel();const b=[],S=[];for(let I=0;I<e.length;++I)1===this.planarConfiguration?b.push(F(this.fileDirectory.BitsPerSample,0,e[I])/8):b.push(0),S.push(this.getReaderForSample(e[I]));const A=[],{littleEndian:P}=this;for(let I=g;I<d;++I)for(let n=y;n<p;++n){let s;1===this.planarConfiguration&&(s=this.getTileOrStrip(n,I,0,o,l));for(let a=0;a<e.length;++a){const y=a,p=e[a];2===this.planarConfiguration&&(m=this.getSampleByteSize(p),s=this.getTileOrStrip(n,I,p,o,l));const g=s.then(o=>{const n=o.data,s=new DataView(n),a=this.getBlockHeight(o.y),l=o.y*c,p=o.x*h,g=l+a,d=(o.x+1)*h,A=S[y],I=Math.min(a,a-(g-t[3]),u-l),E=Math.min(h,h-(d-t[2]),f-p);for(let c=Math.max(0,t[1]-l);c<I;++c)for(let o=Math.max(0,t[0]-p);o<E;++o){const n=(c*h+o)*m,a=A.call(s,n+b[y],P);let f;i?(f=(c+l-t[1])*w*e.length+(o+p-t[0])*e.length+y,r[f]=a):(f=(c+l-t[1])*w+o+p-t[0],r[y][f]=a)}});A.push(g)}}if(await Promise.all(A),n&&t[2]-t[0]!==n||s&&t[3]-t[1]!==s){let o;return o=i?M(r,t[2]-t[0],t[3]-t[1],n,s,e.length,a):E(r,t[2]-t[0],t[3]-t[1],n,s,a),o.width=n,o.height=s,o}return r.width=n||t[2]-t[0],r.height=s||t[3]-t[1],r}async readRasters({window:t,samples:e=[],interleave:r,pool:i=null,width:o,height:n,resampleMethod:s,fillValue:a,signal:l}={}){const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const c=h[2]-h[0],f=h[3]-h[1],u=c*f,y=this.getSamplesPerPixel();if(e&&e.length){for(let w=0;w<e.length;++w)if(e[w]>=y)return Promise.reject(new RangeError(`Invalid sample index '${e[w]}'.`))}else for(let w=0;w<y;++w)e.push(w);let p;if(r){const t=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,r=Math.max.apply(null,this.fileDirectory.BitsPerSample);p=O(t,r,u*e.length),a&&p.fill(a)}else{p=[];for(let t=0;t<e.length;++t){const r=this.getArrayForSample(e[t],u);Array.isArray(a)&&t<a.length?r.fill(a[t]):a&&!Array.isArray(a)&&r.fill(a),p.push(r)}}const g=i||await b(this.fileDirectory),d=await this._readRaster(h,e,p,r,g,o,n,s,l);return d}async readRGB({window:t,interleave:e=!0,pool:r=null,width:i,height:o,resampleMethod:n,enableAlpha:u=!1,signal:y}={}){const p=t||[0,0,this.getWidth(),this.getHeight()];if(p[0]>p[2]||p[1]>p[3])throw new Error("Invalid subsets");const d=this.fileDirectory.PhotometricInterpretation;if(d===s.ub.RGB){let a=[0,1,2];if(this.fileDirectory.ExtraSamples!==s.AC.Unspecified&&u){a=[];for(let t=0;t<this.fileDirectory.BitsPerSample.length;t+=1)a.push(t)}return this.readRasters({window:t,interleave:e,samples:a,pool:r,width:i,height:o,resampleMethod:n,signal:y})}let w;switch(d){case s.ub.WhiteIsZero:case s.ub.BlackIsZero:case s.ub.Palette:w=[0];break;case s.ub.CMYK:w=[0,1,2,3];break;case s.ub.YCbCr:case s.ub.CIELab:w=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const m={window:p,interleave:!0,samples:w,pool:r,width:i,height:o,resampleMethod:n,signal:y},{fileDirectory:b}=this,S=await this.readRasters(m),A=2**this.fileDirectory.BitsPerSample[0];let P;switch(d){case s.ub.WhiteIsZero:P=a(S,A);break;case s.ub.BlackIsZero:P=l(S,A);break;case s.ub.Palette:P=h(S,b.ColorMap);break;case s.ub.CMYK:P=c(S);break;case s.ub.YCbCr:P=f(S);break;case s.ub.CIELab:P=g(S);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const t=new Uint8Array(P.length/3),e=new Uint8Array(P.length/3),r=new Uint8Array(P.length/3);for(let i=0,o=0;i<P.length;i+=3,++o)t[o]=P[i],e[o]=P[i+1],r[o]=P[i+2];P=[t,e,r]}return P.width=S.width,P.height=S.height,P}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let i=(0,n.A)(r,"Item");i=null===t?i.filter(t=>void 0===(0,o.A)(t,"sample")):i.filter(e=>Number((0,o.A)(e,"sample"))===t);for(let n=0;n<i.length;++n){const t=i[n];e[(0,o.A)(t,"name")]=t.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(r)return 0===r[1]&&0===r[4]?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(t){const[e,r,i]=t.getResolution();return[e*t.getWidth()/this.getWidth(),r*t.getHeight()/this.getHeight(),i*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(t=!1){const e=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[t,i,o,n,s,a,l,h]=this.fileDirectory.ModelTransformation,c=[[0,0],[0,e],[r,0],[r,e]],f=c.map(([e,r])=>[n+t*e+i*r,h+s*e+a*r]),u=f.map(t=>t[0]),y=f.map(t=>t[1]);return[Math.min(...u),Math.min(...y),Math.max(...u),Math.max(...y)]}{const t=this.getOrigin(),i=this.getResolution(),o=t[0],n=t[1],s=o+i[0]*r,a=n+i[1]*e;return[Math.min(o,s),Math.min(n,a),Math.max(o,s),Math.max(n,a)]}}}const G=k},34099:(t,e,r)=>{r.d(e,{_F:()=>J,uz:()=>Z});var i=r(11585),o=r(85326);class n{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const r=this.getUint32(t,e),i=this.getUint32(t+4,e);let o;if(e){if(o=r+2**32*i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}if(o=2**32*r+i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}getInt64(t,e){let r=0;const i=(128&this._dataView.getUint8(t+(e?7:0)))>0;let o=!0;for(let n=0;n<8;n++){let s=this._dataView.getUint8(t+(e?n:7-n));i&&(o?0!==s&&(s=255&~(s-1),o=!1):s=255&~s),r+=s*256**n}return i&&(r=-r),r}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return(0,o.O)(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class s{constructor(t,e,r,i){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),r=this.readUint32(t+4);let i;if(this._littleEndian){if(i=e+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*e+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let e=0;const r=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0;let i=!0;for(let o=0;o<8;o++){let n=this._dataView.getUint8(t+(this._littleEndian?o:7-o));r&&(i?0!==n&&(n=255&~(n-1),i=!1):n=255&~n),e+=n*256**o}return r&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const a="\r\n\r\n";function l(t){if("undefined"!==typeof Object.fromEntries)return Object.fromEntries(t);const e={};for(const[r,i]of t)e[r.toLowerCase()]=i;return e}function h(t){const e=t.split("\r\n").map(t=>{const e=t.split(":").map(t=>t.trim());return e[0]=e[0].toLowerCase(),e});return l(e)}function c(t){const[e,...r]=t.split(";").map(t=>t.trim()),i=r.map(t=>t.split("="));return{type:e,params:l(i)}}function f(t){let e,r,i;return t&&([,e,r,i]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),r=parseInt(r,10),i=parseInt(i,10)),{start:e,end:r,total:i}}function u(t,e){let r=null;const i=new TextDecoder("ascii"),o=[],n=`--${e}`,s=`${n}--`;for(let a=0;a<10;++a){const e=i.decode(new Uint8Array(t,a,n.length));e===n&&(r=a)}if(null===r)throw new Error("Could not find initial boundary");while(r<t.byteLength){const e=i.decode(new Uint8Array(t,r,Math.min(n.length+1024,t.byteLength-r)));if(0===e.length||e.startsWith(s))break;if(!e.startsWith(n))throw new Error("Part does not start with boundary");const l=e.substr(n.length+2);if(0===l.length)break;const c=l.indexOf(a),u=h(l.substr(0,c)),{start:y,end:p,total:g}=f(u["content-range"]),d=r+n.length+c+a.length,w=parseInt(p,10)+1-parseInt(y,10);o.push({headers:u,data:t.slice(d,d+w),offset:y,length:w,fileSize:g}),r=d+w+4}return o}class y{async fetch(t,e=void 0){return Promise.all(t.map(t=>this.fetchSlice(t,e)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}var p=r(82807);async function g(t){return new Promise(e=>setTimeout(e,t))}function d(t,e){const r=Array.isArray(t)?t:Array.from(t),i=Array.isArray(e)?e:Array.from(e);return r.map((t,e)=>[t,i[e]])}class w extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,w),this.name="AbortError"}}class m extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const b=m;Float64Array,Float32Array,Uint32Array,Uint16Array,Uint8Array;class S{constructor(t,e,r=null){this.offset=t,this.length=e,this.data=r}get top(){return this.offset+this.length}}class A{constructor(t,e,r){this.offset=t,this.length=e,this.blockIds=r}}class P extends y{constructor(t,{blockSize:e=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new p.A({maxSize:r,onEviction:(t,e)=>{this.evictedBlocks.set(t,e)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const r=[],i=[],o=[];this.evictedBlocks.clear();for(const{offset:f,length:u}of t){let t=f+u;const{fileSize:e}=this;null!==e&&(t=Math.min(t,e));const n=Math.floor(f/this.blockSize)*this.blockSize;for(let s=n;s<t;s+=this.blockSize){const t=Math.floor(s/this.blockSize);this.blockCache.has(t)||this.blockRequests.has(t)||(this.blockIdsToFetch.add(t),i.push(t)),this.blockRequests.has(t)&&r.push(this.blockRequests.get(t)),o.push(t)}}await g(),this.fetchBlocks(e);const n=[];for(const f of i)this.blockRequests.has(f)&&n.push(this.blockRequests.get(f));await Promise.allSettled(r),await Promise.allSettled(n);const s=[],a=o.filter(t=>this.abortedBlockIds.has(t)||!this.blockCache.has(t));if(a.forEach(t=>this.blockIdsToFetch.add(t)),a.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const t of a){const e=this.blockRequests.get(t);if(!e)throw new Error(`Block ${t} is not in the block requests`);s.push(e)}await Promise.allSettled(s)}if(e&&e.aborted)throw new w("Request was aborted");const l=o.map(t=>this.blockCache.get(t)||this.evictedBlocks.get(t)),h=l.filter(t=>!t);if(h.length)throw new b(h,"Request failed");const c=new Map(d(o,l));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(e,t);for(let i=0;i<e.length;++i){const o=e[i];for(const e of o.blockIds)this.blockRequests.set(e,(async()=>{try{const t=(await r)[i],o=e*this.blockSize,n=o-t.offset,s=Math.min(n+this.blockSize,t.data.byteLength),a=t.data.slice(n,s),l=new S(o,a.byteLength,a,e);this.blockCache.set(e,l),this.abortedBlockIds.delete(e)}catch(o){if("AbortError"!==o.name)throw o;o.signal=t,this.blockCache.delete(e),this.abortedBlockIds.add(e)}finally{this.blockRequests.delete(e)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort((t,e)=>t-e);if(0===e.length)return[];let r=[],i=null;const o=[];for(const n of e)null===i||i+1===n?(r.push(n),i=n):(o.push(new A(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[n],i=n);return o.push(new A(r[0]*this.blockSize,r.length*this.blockSize,r)),o}readSliceData(t,e){return t.map(t=>{let r=t.offset+t.length;null!==this.fileSize&&(r=Math.min(this.fileSize,r));const i=Math.floor(t.offset/this.blockSize),o=Math.floor(r/this.blockSize),n=new ArrayBuffer(t.length),s=new Uint8Array(n);for(let a=i;a<=o;++a){const i=e.get(a),o=i.offset-t.offset,n=i.top-r;let l,h=0,c=0;o<0?h=-o:o>0&&(c=o),l=n<0?i.length-h:r-i.offset-h;const f=new Uint8Array(i.data,h,l);s.set(f,c)}return n})}}class I{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class E{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class D extends I{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){const t=this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer;return t}}class T extends E{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const r=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e});return new D(r)}}class M extends I{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class F extends E{constructRequest(t,e){return new Promise((r,i)=>{const o=new XMLHttpRequest;o.open("GET",this.url),o.responseType="arraybuffer";for(const[e,n]of Object.entries(t))o.setRequestHeader(e,n);o.onload=()=>{const t=o.response;r(new M(o,t))},o.onerror=i,o.onabort=()=>i(new w("Request aborted")),o.send(),e&&(e.aborted&&o.abort(),e.addEventListener("abort",()=>o.abort()))})}async request({headers:t,signal:e}={}){const r=await this.constructRequest(t,e);return r}}var O=r(28625),U=r(56504),R=r(6580),k=r(48287)["Buffer"];class G extends I{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){const t=await this.dataPromise;return t}}class x extends E{constructor(t){super(t),this.parsedUrl=R.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?O:U}constructRequest(t,e){return new Promise((r,i)=>{const o=this.httpApi.get({...this.parsedUrl,headers:t},t=>{const e=new Promise(e=>{const r=[];t.on("data",t=>{r.push(t)}),t.on("end",()=>{const t=k.concat(r).buffer;e(t)}),t.on("error",i)});r(new G(t,e))});o.on("error",i),e&&(e.aborted&&o.destroy(new w("Request aborted")),e.addEventListener("abort",()=>o.destroy(new w("Request aborted"))))})}async request({headers:t,signal:e}={}){const r=await this.constructRequest(t,e);return r}}class C extends y{constructor(t,e,r,i){super(),this.client=t,this.headers=e,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length,Promise.all(t.map(t=>this.fetchSlice(t,e))))}async fetchSlices(t,e){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:t,length:e})=>`${t}-${t+e}`).join(",")}`},signal:e});if(r.ok){if(206===r.status){const{type:i,params:o}=c(r.getHeader("content-type"));if("multipart/byteranges"===i){const t=u(await r.getData(),o.boundary);return this._fileSize=t[0].fileSize||null,t}const n=await r.getData(),{start:s,end:a,total:l}=f(r.getHeader("content-range"));this._fileSize=l||null;const h=[{data:n,offset:s,length:a-s}];if(t.length>1){const r=await Promise.all(t.slice(1).map(t=>this.fetchSlice(t,e)));return h.concat(r)}return h}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await r.getData();return this._fileSize=t.byteLength,[{data:t,offset:0,length:t.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:r,length:i}=t,o=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+i}`},signal:e});if(o.ok){if(206===o.status){const t=await o.getData(),{total:e}=f(o.getHeader("content-range"));return this._fileSize=e||null,{data:t,offset:r,length:i}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await o.getData();return this._fileSize=t.byteLength,{data:t,offset:0,length:t.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function B(t,{blockSize:e,cacheSize:r}){return null===e?t:new P(t,{blockSize:e,cacheSize:r})}function _(t,{headers:e={},credentials:r,maxRanges:i=0,allowFullFile:o=!1,...n}={}){const s=new T(t,r),a=new C(s,e,i,o);return B(a,n)}function v(t,{headers:e={},maxRanges:r=0,allowFullFile:i=!1,...o}={}){const n=new F(t),s=new C(n,e,r,i);return B(s,o)}function L(t,{headers:e={},maxRanges:r=0,allowFullFile:i=!1,...o}={}){const n=new x(t),s=new C(n,e,r,i);return B(s,o)}function N(t,{forceXHR:e=!1,...r}={}){return"function"!==typeof fetch||e?"undefined"!==typeof XMLHttpRequest?v(t,r):L(t,r):_(t,r)}class j extends y{constructor(t){super(),this.file=t}async fetchSlice(t,e){return new Promise((r,i)=>{const o=this.file.slice(t.offset,t.offset+t.length),n=new FileReader;n.onload=t=>r(t.target.result),n.onerror=i,n.onabort=i,n.readAsArrayBuffer(o),e&&e.addEventListener("abort",()=>n.abort())})}}function $(t){return new j(t)}var V=r(98622);function K(t){switch(t){case V.s$.BYTE:case V.s$.ASCII:case V.s$.SBYTE:case V.s$.UNDEFINED:return 1;case V.s$.SHORT:case V.s$.SSHORT:return 2;case V.s$.LONG:case V.s$.SLONG:case V.s$.FLOAT:case V.s$.IFD:return 4;case V.s$.RATIONAL:case V.s$.SRATIONAL:case V.s$.DOUBLE:case V.s$.LONG8:case V.s$.SLONG8:case V.s$.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${t}`)}}function z(t){const e=t.GeoKeyDirectory;if(!e)return null;const r={};for(let i=4;i<=4*e[3];i+=4){const o=V.Hm[e[i]],n=e[i+1]?V.$[e[i+1]]:null,s=e[i+2],a=e[i+3];let l=null;if(n){if(l=t[n],"undefined"===typeof l||null===l)throw new Error(`Could not get value of geoKey '${o}'.`);"string"===typeof l?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),1===s&&(l=l[0]))}else l=a;r[o]=l}return r}function q(t,e,r,i){let o=null,n=null;const s=K(e);switch(e){case V.s$.BYTE:case V.s$.ASCII:case V.s$.UNDEFINED:o=new Uint8Array(r),n=t.readUint8;break;case V.s$.SBYTE:o=new Int8Array(r),n=t.readInt8;break;case V.s$.SHORT:o=new Uint16Array(r),n=t.readUint16;break;case V.s$.SSHORT:o=new Int16Array(r),n=t.readInt16;break;case V.s$.LONG:case V.s$.IFD:o=new Uint32Array(r),n=t.readUint32;break;case V.s$.SLONG:o=new Int32Array(r),n=t.readInt32;break;case V.s$.LONG8:case V.s$.IFD8:o=new Array(r),n=t.readUint64;break;case V.s$.SLONG8:o=new Array(r),n=t.readInt64;break;case V.s$.RATIONAL:o=new Uint32Array(2*r),n=t.readUint32;break;case V.s$.SRATIONAL:o=new Int32Array(2*r),n=t.readInt32;break;case V.s$.FLOAT:o=new Float32Array(r),n=t.readFloat32;break;case V.s$.DOUBLE:o=new Float64Array(r),n=t.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e!==V.s$.RATIONAL&&e!==V.s$.SRATIONAL)for(let a=0;a<r;++a)o[a]=n.call(t,i+a*s);else for(let a=0;a<r;a+=2)o[a]=n.call(t,i+a*s),o[a+1]=n.call(t,i+(a*s+4));return e===V.s$.ASCII?new TextDecoder("utf-8").decode(o):o}class W{constructor(t,e,r,i){this.fileDirectory=t,this.rawFileDirectory=e,this.geoKeyDirectory=r,this.nextIFDByteOffset=i}}class H extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class Y{async readRasters(t={}){const{window:e,width:r,height:i}=t;let{resX:o,resY:n,bbox:s}=t;const a=await this.getImage();let l=a;const h=await this.getImageCount(),c=a.getBoundingBox();if(e&&s)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(e){const[t,r]=a.getOrigin(),[i,o]=a.getResolution();s=[t+e[0]*i,r+e[1]*o,t+e[2]*i,r+e[3]*o]}const t=s||c;if(r){if(o)throw new Error("Both width and resX passed");o=(t[2]-t[0])/r}if(i){if(n)throw new Error("Both width and resY passed");n=(t[3]-t[1])/i}}if(o||n){const t=[];for(let e=0;e<h;++e){const r=await this.getImage(e),{SubfileType:i,NewSubfileType:o}=r.fileDirectory;(0===e||2===i||1&o)&&t.push(r)}t.sort((t,e)=>t.getWidth()-e.getWidth());for(let e=0;e<t.length;++e){const r=t[e],i=(c[2]-c[0])/r.getWidth(),s=(c[3]-c[1])/r.getHeight();if(l=r,o&&o>i||n&&n>s)break}}let f=e;if(s){const[t,e]=a.getOrigin(),[r,i]=l.getResolution(a);f=[Math.round((s[0]-t)/r),Math.round((s[1]-e)/i),Math.round((s[2]-t)/r),Math.round((s[3]-e)/i)],f=[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]}return l.readRasters({...t,window:f})}}class X extends Y{constructor(t,e,r,i,o={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=r,this.firstIFDOffset=i,this.cache=o.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const r=this.bigTiff?4048:1024;return new s((await this.source.fetch([{offset:t,length:"undefined"!==typeof e?e:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,r=this.bigTiff?8:2;let i=await this.getSlice(t);const o=this.bigTiff?i.readUint64(t):i.readUint16(t),n=o*e+(this.bigTiff?16:6);i.covers(t,n)||(i=await this.getSlice(t,n));const s={},a=new Map;let l=t+(this.bigTiff?8:2);for(let f=0;f<o;l+=e,++f){const t=i.readUint16(l),e=i.readUint16(l+2),r=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let o,n;const h=K(e),c=l+(this.bigTiff?12:8);if(h*r<=(this.bigTiff?8:4))o=q(i,e,r,c);else{const t=i.readOffset(c),n=K(e)*r;if(i.covers(t,n))o=q(i,e,r,t);else{const i=await this.getSlice(t,n);o=q(i,e,r,t)}}n=1===r&&-1===V.NZ.indexOf(t)&&e!==V.s$.RATIONAL&&e!==V.s$.SRATIONAL?o[0]:o;const f=V.$[t];f&&(s[f]=n),a.set(t,n)}const h=z(s),c=i.readOffset(t+r+e*o);return new W(s,a,h,c)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(0===t)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){if(e instanceof H)throw new H(t);throw e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(0===e.nextIFDByteOffset)throw new H(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new i.A(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;while(e)try{await this.requestIFD(t),++t}catch(r){if(!(r instanceof H))throw r;e=!1}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=",r=e.length+100;let i=await this.getSlice(t,r);if(e===q(i,V.s$.ASCII,e.length,t)){const e=q(i,V.s$.ASCII,r,t),o=e.split("\n")[0],n=Number(o.split("=")[1].split(" ")[0])+o.length;n>r&&(i=await this.getSlice(t,n));const s=q(i,V.s$.ASCII,n,t);this.ghostValues={},s.split("\n").filter(t=>t.length>0).map(t=>t.split("=")).forEach(([t,e])=>{this.ghostValues[t]=e})}return this.ghostValues}static async fromSource(t,e,r){const i=(await t.fetch([{offset:0,length:1024}],r))[0],o=new n(i),s=o.getUint16(0,0);let a;if(18761===s)a=!0;else{if(19789!==s)throw new TypeError("Invalid byte order value.");a=!1}const l=o.getUint16(2,a);let h;if(42===l)h=!1;else{if(43!==l)throw new TypeError("Invalid magic number.");{h=!0;const t=o.getUint16(4,a);if(8!==t)throw new Error("Unsupported offset byte-size.")}}const c=h?o.getUint64(8,a):o.getUint32(4,a);return new X(t,a,h,c,e)}close(){return"function"===typeof this.source.close&&this.source.close()}}async function Z(t,e={},r){return X.fromSource(N(t,e),r)}async function J(t,e){return X.fromSource($(t),e)}},41333:t=>{t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;var i=42;for(var o in t[e]=i,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(t,e);if(s.value!==i||!0!==s.enumerable)return!1}return!0}},48648:t=>{t.exports="undefined"!==typeof Reflect&&Reflect.getPrototypeOf||null},64039:(t,e,r)=>{var i="undefined"!==typeof Symbol&&Symbol,o=r(41333);t.exports=function(){return"function"===typeof i&&("function"===typeof Symbol&&("symbol"===typeof i("foo")&&("symbol"===typeof Symbol("bar")&&o())))}},70453:(t,e,r)=>{var i,o=r(79612),n=r(69383),s=r(41237),a=r(79290),l=r(79538),h=r(58068),c=r(69675),f=r(35345),u=r(71514),y=r(58968),p=r(6188),g=r(68002),d=r(75880),w=r(70414),m=r(73093),b=Function,S=function(t){try{return b('"use strict"; return ('+t+").constructor;")()}catch(e){}},A=r(75795),P=r(30655),I=function(){throw new c},E=A?function(){try{return I}catch(t){try{return A(arguments,"callee").get}catch(e){return I}}}():I,D=r(64039)(),T=r(93628),M=r(71064),F=r(48648),O=r(11002),U=r(10076),R={},k="undefined"!==typeof Uint8Array&&T?T(Uint8Array):i,G={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":D&&T?T([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":R,"%AsyncGenerator%":R,"%AsyncGeneratorFunction%":R,"%AsyncIteratorPrototype%":R,"%Atomics%":"undefined"===typeof Atomics?i:Atomics,"%BigInt%":"undefined"===typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":s,"%Float16Array%":"undefined"===typeof Float16Array?i:Float16Array,"%Float32Array%":"undefined"===typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":R,"%Int8Array%":"undefined"===typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":D&&T?T(T([][Symbol.iterator]())):i,"%JSON%":"object"===typeof JSON?JSON:i,"%Map%":"undefined"===typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&D&&T?T((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":o,"%Object.getOwnPropertyDescriptor%":A,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?i:Promise,"%Proxy%":"undefined"===typeof Proxy?i:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":"undefined"===typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&D&&T?T((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":D&&T?T(""[Symbol.iterator]()):i,"%Symbol%":D?Symbol:i,"%SyntaxError%":h,"%ThrowTypeError%":E,"%TypedArray%":k,"%TypeError%":c,"%Uint8Array%":"undefined"===typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?i:Uint32Array,"%URIError%":f,"%WeakMap%":"undefined"===typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?i:WeakSet,"%Function.prototype.call%":U,"%Function.prototype.apply%":O,"%Object.defineProperty%":P,"%Object.getPrototypeOf%":M,"%Math.abs%":u,"%Math.floor%":y,"%Math.max%":p,"%Math.min%":g,"%Math.pow%":d,"%Math.round%":w,"%Math.sign%":m,"%Reflect.getPrototypeOf%":F};if(T)try{null.error}catch(H){var x=T(T(H));G["%Error.prototype%"]=x}var C=function t(e){var r;if("%AsyncFunction%"===e)r=S("async function () {}");else if("%GeneratorFunction%"===e)r=S("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=S("async function* () {}");else if("%AsyncGenerator%"===e){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&T&&(r=T(o.prototype))}return G[e]=r,r},B={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=r(66743),v=r(9957),L=_.call(U,Array.prototype.concat),N=_.call(O,Array.prototype.splice),j=_.call(U,String.prototype.replace),$=_.call(U,String.prototype.slice),V=_.call(U,RegExp.prototype.exec),K=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,z=/\\(\\)?/g,q=function(t){var e=$(t,0,1),r=$(t,-1);if("%"===e&&"%"!==r)throw new h("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new h("invalid intrinsic syntax, expected opening `%`");var i=[];return j(t,K,function(t,e,r,o){i[i.length]=r?j(o,z,"$1"):e||t}),i},W=function(t,e){var r,i=t;if(v(B,i)&&(r=B[i],i="%"+r[0]+"%"),v(G,i)){var o=G[i];if(o===R&&(o=C(i)),"undefined"===typeof o&&!e)throw new c("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:o}}throw new h("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new c('"allowMissing" argument must be a boolean');if(null===V(/^%?[^%]*%?$/,t))throw new h("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=q(t),i=r.length>0?r[0]:"",o=W("%"+i+"%",e),n=o.name,s=o.value,a=!1,l=o.alias;l&&(i=l[0],N(r,L([0,1],l)));for(var f=1,u=!0;f<r.length;f+=1){var y=r[f],p=$(y,0,1),g=$(y,-1);if(('"'===p||"'"===p||"`"===p||'"'===g||"'"===g||"`"===g)&&p!==g)throw new h("property names with quotes must have matching quotes");if("constructor"!==y&&u||(a=!0),i+="."+y,n="%"+i+"%",v(G,n))s=G[n];else if(null!=s){if(!(y in s)){if(!e)throw new c("base intrinsic for "+t+" exists, but the property is not available.");return}if(A&&f+1>=r.length){var d=A(s,y);u=!!d,s=u&&"get"in d&&!("originalValue"in d.get)?d.get:s[y]}else u=v(s,y),s=s[y];u&&!a&&(G[n]=s)}}return s}},71064:(t,e,r)=>{var i=r(79612);t.exports=i.getPrototypeOf||null},75795:(t,e,r)=>{var i=r(6549);if(i)try{i([],"length")}catch(o){i=null}t.exports=i},93628:(t,e,r)=>{var i=r(48648),o=r(71064),n=r(7176);t.exports=i?function(t){return i(t)}:o?function(t){if(!t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("getProto: not an object");return o(t)}:n?function(t){return n(t)}:null},98622:(t,e,r)=>{r.d(e,{$:()=>i,AC:()=>h,Hm:()=>u,NZ:()=>n,S3:()=>f,TZ:()=>c,s$:()=>a,ub:()=>l});const i={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34412:"CZ_LSMINFO",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},o={};for(const p in i)i.hasOwnProperty(p)&&(o[i[p]]=parseInt(p,10));const n=[o.BitsPerSample,o.ExtraSamples,o.SampleFormat,o.StripByteCounts,o.StripOffsets,o.StripRowCounts,o.TileByteCounts,o.TileOffsets,o.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={};for(const p in s)s.hasOwnProperty(p)&&(a[s[p]]=parseInt(p,10));const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},h={Unspecified:0,Assocalpha:1,Unassalpha:2},c={Version:0,AddCompression:1},f={None:0,Deflate:1,Zstandard:2},u={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},y={};for(const p in u)u.hasOwnProperty(p)&&(y[u[p]]=parseInt(p,10))}}]);
//# sourceMappingURL=chunk-vendors-6185be05.c2ae1a18.js.map
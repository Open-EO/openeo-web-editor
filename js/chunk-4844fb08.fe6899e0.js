(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4844fb08"],{"0417":function(t,e,i){"use strict";var o=i("c2d3"),r=i("35a7"),n=i("3900"),s=i("480c"),a=i("3e6b"),c=i("97e6"),l=i("c810"),h=i("4787"),u=i("0af5"),p=i("6f9e"),d=function(t){t=t||{};var e,i=this;this.dcount=0,this.show_progress=t.show_progress,this.oninfo="function"==typeof t.oninfo?t.oninfo:null,this.onextent="function"==typeof t.onextent?t.onextent:null,this.hasextent=t.extent||t.onextent,this.hastrash=t.trash,this.reordering=!1!==t.reordering,this._layers=[],this._layerGroup=t.layerGroup&&t.layerGroup.getLayers?t.layerGroup:null,"function"===typeof t.displayInLayerSwitcher&&(this.displayInLayerSwitcher=t.displayInLayerSwitcher),t.target?e=p["a"].create("DIV",{className:t.switcherClass||"ol-layerswitcher"}):(e=p["a"].create("DIV",{className:(t.switcherClass||"ol-layerswitcher")+" ol-unselectable ol-control"}),!1!==t.collapsed?e.classList.add("ol-collapsed"):e.classList.add("ol-forceopen"),this.button=p["a"].create("BUTTON",{type:"button",parent:e}),this.button.addEventListener("touchstart",(function(t){e.classList.toggle("ol-forceopen"),e.classList.toggle("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:e.classList.contains("ol-collapsed")}),t.preventDefault(),i.overflow()})),this.button.addEventListener("click",(function(){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!e.classList.contains("ol-forceopen")}),i.overflow()})),t.mouseover&&(e.addEventListener("mouseleave",(function(){e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!0})})),e.addEventListener("mouseover",(function(){e.classList.remove("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!1})}))),t.minibar&&(t.noScroll=!0),t.noScroll||(this.topv=p["a"].create("DIV",{className:"ol-switchertopdiv",parent:e,click:function(){i.overflow("+50%")}}),this.botv=p["a"].create("DIV",{className:"ol-switcherbottomdiv",parent:e,click:function(){i.overflow("-50%")}})),this._noScroll=t.noScroll),this.panel_=p["a"].create("UL",{className:"panel"}),this.panelContainer_=p["a"].create("DIV",{className:"panel-container",html:this.panel_,parent:e}),t.target||t.noScroll||p["a"].addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",(function(t){i.overflow(Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)))&&(t.stopPropagation(),t.preventDefault())})),this.header_=p["a"].create("LI",{className:"ol-header",parent:this.panel_}),n["a"].call(this,{element:e,target:t.target}),this.set("drawDelay",t.drawDelay||0),this.set("selection",t.selection),t.minibar&&setTimeout(function(){var t=p["a"].scrollDiv(this.panelContainer_,{mousewheel:!0,vertical:!0,minibar:!0});this.on(["drawlist","toggle"],(function(){t.refresh()}))}.bind(this))};Object(o["a"])(d,n["a"]),d.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"},d.prototype.displayInLayerSwitcher=function(t){return!1!==t.get("displayInLayerSwitcher")},d.prototype.setMap=function(t){if(n["a"].prototype.setMap.call(this,t),this.drawPanel(),this._listener)for(var e in this._listener)Object(r["b"])(this._listener[e]);this._listener=null,t&&(this._listener={moveend:t.on("moveend",this.viewChange.bind(this)),size:t.on("change:size",this.overflow.bind(this))},this._layerGroup?this._listener.change=this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):this._listener.change=t.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))},d.prototype.show=function(){this.element.classList.add("ol-forceopen"),this.overflow(),self.dispatchEvent({type:"toggle",collapsed:!1})},d.prototype.hide=function(){this.element.classList.remove("ol-forceopen"),this.overflow(),self.dispatchEvent({type:"toggle",collapsed:!0})},d.prototype.toggle=function(){this.element.classList.toggle("ol-forceopen"),this.overflow()},d.prototype.isOpen=function(){return this.element.classList.contains("ol-forceopen")},d.prototype.setHeader=function(t){p["a"].setHTML(this.header_,t)},d.prototype.overflow=function(t){if(this.button&&!this._noScroll){if(p["a"].hidden(this.panel_))return void p["a"].setStyle(this.element,{height:"auto"});var e=p["a"].outerHeight(this.element),i=p["a"].outerHeight(this.panel_),o=this.button.offsetTop+p["a"].outerHeight(this.button),r=this.panel_.offsetTop-o;if(i>e-o){p["a"].setStyle(this.element,{height:"100%"});var n=this.panel_.querySelectorAll("li.visible .li-content")[0],s=n?2*p["a"].getStyle(n,"height"):0;switch(t){case 1:r+=s;break;case-1:r-=s;break;case"+50%":r+=Math.round(e/2);break;case"-50%":r-=Math.round(e/2);break;default:break}return r+i<=e-3*o/2?(r=e-3*o/2-i,p["a"].hide(this.botv)):p["a"].show(this.botv),r>=0?(r=0,p["a"].hide(this.topv)):p["a"].show(this.topv),p["a"].setStyle(this.panel_,{top:r+"px"}),!0}return p["a"].setStyle(this.element,{height:"auto"}),p["a"].setStyle(this.panel_,{top:0}),p["a"].hide(this.botv),p["a"].hide(this.topv),!1}return!1},d.prototype._setLayerForLI=function(t,e){var i=[];e.getLayers&&i.push(e.getLayers().on("change:length",this.drawPanel.bind(this))),t&&(i.push(e.on("change:opacity",function(){this.setLayerOpacity(e,t)}.bind(this))),i.push(e.on("change:visible",function(){this.setLayerVisibility(e,t)}.bind(this)))),i.push(e.on("propertychange",function(t){"displayInLayerSwitcher"!==t.key&&"openInLayerSwitcher"!==t.key||this.drawPanel(t)}.bind(this))),this._layers.push({li:t,layer:e,listeners:i})},d.prototype.setLayerOpacity=function(t,e){var i=e.querySelector(".layerswitcher-opacity-cursor");i&&(i.style.left=100*t.getOpacity()+"%"),this.dispatchEvent({type:"layer:opacity",layer:t})},d.prototype.setLayerVisibility=function(t,e){var i=e.querySelector(".ol-visibility");i&&(i.checked=t.getVisible()),t.getVisible()?e.classList.add("ol-visible"):e.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:t})},d.prototype._clearLayerForLI=function(){this._layers.forEach((function(t){t.listeners.forEach((function(t){Object(r["b"])(t)}))})),this._layers=[]},d.prototype._getLayerForLI=function(t){for(var e,i=0;e=this._layers[i];i++)if(e.li===t)return e.layer;return null},d.prototype.viewChange=function(){this.panel_.querySelectorAll("li").forEach(function(t){var e=this._getLayerForLI(t);e&&(this.testLayerVisibility(e)?t.classList.remove("ol-layer-hidden"):t.classList.add("ol-layer-hidden"))}.bind(this))},d.prototype.getPanel=function(){return this.panelContainer_},d.prototype.drawPanel=function(){if(this.getMap()){var t=this;this.dcount++,setTimeout((function(){t.drawPanel_()}),this.get("drawDelay")||0)}},d.prototype.drawPanel_=function(){if(!--this.dcount&&!this.dragging_){var t=this.panelContainer_.scrollTop;this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach(function(t){t.classList.contains("ol-header")||t.remove()}.bind(this)),this._layerGroup?this.drawList(this.panel_,this._layerGroup.getLayers()):this.getMap()&&this.drawList(this.panel_,this.getMap().getLayers()),this.panelContainer_.scrollTop=t}},d.prototype.switchLayerVisibility=function(t,e){t.get("baseLayer")?(t.getVisible()||t.setVisible(!0),e.forEach((function(e){t!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)}))):t.setVisible(!t.getVisible())},d.prototype.testLayerVisibility=function(t){if(!this.getMap())return!0;var e=this.getMap().getView().getResolution(),i=this.getMap().getView().getZoom();if(t.getMaxResolution()<=e||t.getMinResolution()>=e)return!1;if(t.getMinZoom&&(t.getMinZoom()>=i||t.getMaxZoom()<i))return!1;var o=t.getExtent();if(o){var r=this.getMap().getView().calculateExtent(this.getMap().getSize());return Object(u["E"])(r,o)}return!0},d.prototype.dragOrdering_=function(t){t.stopPropagation(),t.preventDefault();var e,i,o,r,n,s=this,a=t.currentTarget.parentNode.parentNode,c=!0,l=this.panel_,h=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY;function u(){if(i){var t=r,e=s.getSelection()===t;if(t&&i){var c;c=n?n.getLayers():s._layerGroup?s._layerGroup.getLayers():s.getMap().getLayers();for(var l=c.getArray(),h=0;h<l.length;h++)if(l[h]==t){c.removeAt(h);break}for(var f=0;f<l.length;f++)if(l[f]===i){h>f?c.insertAt(f,t):c.insertAt(f+1,t);break}}e&&s.selectLayer(t),s.dispatchEvent({type:"reorder-end",layer:t,group:n})}a.parentNode.querySelectorAll("li").forEach((function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")})),a.classList.remove("drag"),a.parentNode.classList.remove("drag"),s.element.classList.remove("drag"),o&&o.remove(),p["a"].removeListener(document,"mousemove touchmove",d),p["a"].removeListener(document,"mouseup touchend touchcancel",u)}function d(t){if(e=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY,c&&Math.abs(h-e)>2&&(c=!1,a.classList.add("drag"),r=s._getLayerForLI(a),i=!1,n=s._getLayerForLI(a.parentNode.parentNode),o=p["a"].create("LI",{className:"ol-dragover",html:a.innerHTML,style:{position:"absolute","z-index":1e4,left:a.offsetLeft,opacity:.5,width:p["a"].outerWidth(a),height:p["a"].getStyle(a,"height")},parent:l}),s.element.classList.add("drag"),s.dispatchEvent({type:"reorder-start",layer:r,group:n})),!c){var u;t.preventDefault(),t.stopPropagation(),p["a"].setStyle(o,{top:e-p["a"].offsetRect(l).top+l.scrollTop+5}),u=t.touches?document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY):t.target,u.classList.contains("ol-switcherbottomdiv")?s.overflow(-1):u.classList.contains("ol-switchertopdiv")&&s.overflow(1);while(u&&"LI"!==u.tagName)u=u.parentNode;u&&u.classList.contains("dropover")||a.parentNode.querySelectorAll("li").forEach((function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")})),u&&u.parentNode.classList.contains("drag")&&u!==a?(i=s._getLayerForLI(u),i&&!i.get("allwaysOnTop")==!r.get("allwaysOnTop")?(u.classList.add("dropover"),u.classList.add(a.offsetTop<u.offsetTop?"dropover-after":"dropover-before")):i=!1,p["a"].show(o)):(i=!1,u===a?p["a"].hide(o):p["a"].show(o)),i?o.classList.remove("forbidden"):o.classList.add("forbidden")}}a.parentNode.classList.add("drag"),p["a"].addListener(document,"mousemove touchmove",d),p["a"].addListener(document,"mouseup touchend touchcancel",u)},d.prototype.dragOpacity_=function(t){t.stopPropagation(),t.preventDefault();var e=this,i=t.target,o=this._getLayerForLI(i.parentNode.parentNode.parentNode);if(o){var r=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,n=p["a"].getStyle(i,"left")-r;e.dragging_=!0,p["a"].addListener(document,"mouseup touchend touchcancel",s),p["a"].addListener(document,"mousemove touchmove",a)}function s(){p["a"].removeListener(document,"mouseup touchend touchcancel",s),p["a"].removeListener(document,"mousemove touchmove",a),e.dragging_=!1}function a(t){var e=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,r=(n+e)/p["a"].getStyle(i.parentNode,"width"),s=Math.max(0,Math.min(1,r));p["a"].setStyle(i,{left:100*s+"%"}),i.parentNode.nextElementSibling.innerHTML=Math.round(100*s),o.setOpacity(s)}},d.prototype.drawList=function(t,e){var i=this,o=e.getArray(),r=function(t){t.stopPropagation(),t.preventDefault();var o=i._getLayerForLI(this.parentNode.parentNode);i.switchLayerVisibility(o,e),i.get("selection")&&o.getVisible()&&i.selectLayer(o)};function n(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.oninfo(e),i.dispatchEvent({type:"info",layer:e})}function a(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.onextent?i.onextent(e):i.getMap().getView().fit(e.getExtent(),i.getMap().getSize()),i.dispatchEvent({type:"extent",layer:e})}function c(t){t.stopPropagation(),t.preventDefault();var e,o=this.parentNode.parentNode.parentNode.parentNode,r=i._getLayerForLI(o);r?(e=i._getLayerForLI(this.parentNode.parentNode),r.getLayers().remove(e),0!=r.getLayers().getLength()||r.get("noSwitcherDelete")||c.call(o.querySelectorAll(".layerTrash")[0],t)):(o=this.parentNode.parentNode,i.getMap().removeLayer(i._getLayerForLI(o)))}function l(e){if(this.displayInLayerSwitcher(e)){var l=p["a"].create("LI",{className:(e.getVisible()?"visible ":" ")+(e.get("baseLayer")?"baselayer":""),parent:t});this._setLayerForLI(l,e),this._selectedLayer===e&&l.classList.add("ol-layer-select");var u=p["a"].create("DIV",{className:"ol-layerswitcher-buttons",parent:l}),d=p["a"].create("DIV",{className:"li-content",parent:l});p["a"].create("INPUT",{type:e.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:e.getVisible(),click:r,parent:d});var f=p["a"].create("LABEL",{title:e.get("title")||e.get("name"),click:r,unselectable:"on",style:{userSelect:"none"},parent:d});if(f.addEventListener("selectstart",(function(){return!1})),p["a"].create("SPAN",{html:e.get("title")||e.get("name"),click:function(t){this.get("selection")&&(t.stopPropagation(),this.selectLayer(e))}.bind(this),parent:f}),this.reordering&&(h<o.length-1&&(e.get("allwaysOnTop")||!o[h+1].get("allwaysOnTop"))||h>0&&(!e.get("allwaysOnTop")||o[h-1].get("allwaysOnTop")))&&p["a"].create("DIV",{className:"layerup ol-noscroll",title:this.tip.up,on:{"mousedown touchstart":function(t){i.dragOrdering_(t)}},parent:u}),e.getLayers){var g=0;e.getLayers().forEach((function(t){i.displayInLayerSwitcher(t)&&g++})),g&&p["a"].create("DIV",{className:e.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var t=i._getLayerForLI(this.parentNode.parentNode);t.set("openInLayerSwitcher",!t.get("openInLayerSwitcher"))},parent:u})}if(this.oninfo&&p["a"].create("DIV",{className:"layerInfo",title:this.tip.info,click:n,parent:u}),this.hastrash&&!e.get("noSwitcherDelete")&&p["a"].create("DIV",{className:"layerTrash",title:this.tip.trash,click:c,parent:u}),this.hasextent&&o[h].getExtent()){var y=o[h].getExtent();4==y.length&&y[0]<y[2]&&y[1]<y[3]&&p["a"].create("DIV",{className:"layerExtent",title:this.tip.extent,click:a,parent:u})}if(this.show_progress&&e instanceof s["a"]){var _=p["a"].create("DIV",{className:"layerswitcher-progress",parent:d});this.setprogress_(e),e.layerswitcher_progress=p["a"].create("DIV",{parent:_})}var v=p["a"].create("DIV",{className:"layerswitcher-opacity",click:function(t){if(t.target===this){t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(1,t.offsetX/p["a"].getStyle(this,"width")));i._getLayerForLI(this.parentNode.parentNode).setOpacity(e)}},parent:d});if(p["a"].create("DIV",{className:"layerswitcher-opacity-cursor ol-noscroll",style:{left:100*e.getOpacity()+"%"},on:{"mousedown touchstart":function(t){i.dragOpacity_(t)}},parent:v}),p["a"].create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(100*e.getOpacity()),parent:d}),e.getLayers&&(l.classList.add("ol-layer-group"),!0===e.get("openInLayerSwitcher"))){var m=p["a"].create("UL",{parent:l});this.drawList(m,e.getLayers())}l.classList.add(this.getLayerClass(e)),this.dispatchEvent({type:"drawlist",layer:e,li:l})}else this._setLayerForLI(null,e)}for(var h=o.length-1;h>=0;h--)l.call(this,o[h]);this.viewChange(),t===this.panel_&&this.overflow()},d.prototype.getLayerClass=function(t){return t?t.getLayers?"ol-layer-group":t instanceof a["a"]?"ol-layer-vector":t instanceof c["a"]?"ol-layer-vectortile":t instanceof s["a"]?"ol-layer-tile":t instanceof l["a"]?"ol-layer-image":t instanceof h["a"]?"ol-layer-heatmap":t.getFeatures?"ol-layer-vectorimage":"unknown":"none"},d.prototype.selectLayer=function(t,e){if(!t){if(!this.getMap())return;t=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=t,this.drawPanel(),e||this.dispatchEvent({type:"select",layer:t})},d.prototype.getSelection=function(){return this._selectedLayer},d.prototype.setprogress_=function(t){if(!t.layerswitcher_progress){var e=0,i=0,o=function(){i===e?(i=e=0,p["a"].setStyle(t.layerswitcher_progress,{width:0})):p["a"].setStyle(t.layerswitcher_progress,{width:(e/i*100).toFixed(1)+"%"})};t.getSource().on("tileloadstart",(function(){i++,o()})),t.getSource().on("tileloadend",(function(){e++,o()})),t.getSource().on("tileloaderror",(function(){e++,o()}))}},e["a"]=d},1399:function(t,e,i){},"159a":function(t,e,i){},"183a":function(t,e,i){"use strict";e["a"]={ADD:"add",REMOVE:"remove"}},"4cdf":function(t,e,i){"use strict";var o=i("e269"),r=i("01d4"),n=i("92fa"),s=i("1e8d"),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),c=function(t){function e(e){var i=t.call(this)||this;if(i.on,i.once,i.un,i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),e)if("function"===typeof e.getSimplifiedGeometry){var o=e;i.setGeometry(o)}else{var r=e;i.setProperties(r)}return i}return a(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var o=this.getStyle();return o&&t.setStyle(o),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(s["c"])(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(s["a"])(t,r["a"].CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?l(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(o["a"]);function l(t){if("function"===typeof t)return t;var e;if(Array.isArray(t))e=t;else{Object(n["a"])("function"===typeof t.getZIndex,41);var i=t;e=[i]}return function(){return e}}e["a"]=c},"6f9e":function(t,e,i){"use strict";var o=i("c2d3"),r=i("e269");window.ol&&(ol.ext.input={});var n=function(t){t=t||{},r["a"].call(this);var e=this.input=t.input;e||(e=this.input=document.createElement("INPUT"),t.type&&e.setAttribute("type",t.type),void 0!==t.min&&e.setAttribute("min",t.min),void 0!==t.max&&e.setAttribute("max",t.max),void 0!==t.step&&e.setAttribute("step",t.step),t.parent&&t.parent.appendChild(e)),t.disabled&&(e.disabled=!0),void 0!==t.checked&&(e.checked=!!t.checked),void 0!==t.val&&(e.value=t.val),t.hidden&&(e.style.display="none")};Object(o["a"])(n,r["a"]),n.prototype._listenDrag=function(t,e){var i=function(i){this.moving=!0;var o=function(i){"pointerup"===i.type&&(document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",o),document.removeEventListener("pointercancel",o),setTimeout(function(){this.moving=!1}.bind(this))),i.target===t&&e(i),i.stopPropagation(),i.preventDefault()}.bind(this);document.addEventListener("pointermove",o,!1),document.addEventListener("pointerup",o,!1),document.addEventListener("pointercancel",o,!1),i.stopPropagation(),i.preventDefault()}.bind(this);t.addEventListener("mousedown",i,!1),t.addEventListener("touchstart",i,!1)},n.prototype.setValue=function(t){void 0!==t&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))},n.prototype.getValue=function(){return this.input.value},n.prototype.getInputElement=function(){return this.input};var s=n,a=function(t){t=t||{},s.call(this,t);var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):void 0!==t.html&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox"+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))};Object(o["a"])(a,s),a.prototype.isChecked=function(){return this.input.checked};var c=a,l=function(t){t=t||{},c.call(this,t),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()};Object(o["a"])(l,c);var h=l,u=function(t,e){e=e||{},c.call(this,t,e),this.element.className=("ol-ext-check ol-ext-radio"+(e.className||"")).trim()};Object(o["a"])(u,c);var p=u,d={create:function(t,e){var i;if(e=e||{},"TEXT"===t)i=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(i);else for(var o in i=document.createElement(t),/button/i.test(t)&&i.setAttribute("type","button"),e)switch(o){case"className":e.className&&e.className.trim&&i.setAttribute("class",e.className.trim());break;case"html":e.html instanceof Element?i.appendChild(e.html):void 0!==e.html&&(i.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(i);break;case"options":if(/select/i.test(t))for(var r in e.options)d.create("OPTION",{html:r,value:e.options[r],parent:i});break;case"style":this.setStyle(i,e.style);break;case"change":case"click":d.addListener(i,o,e[o]);break;case"on":for(var n in e.on)d.addListener(i,n,e.on[n]);break;case"checked":i.checked=!!e.checked;break;default:i.setAttribute(o,e[o]);break}return i},createSwitch:function(t){var e=d.create("INPUT",{type:"checkbox",on:t.on,parent:t.parent}),i=Object.assign({input:e},t||{});return new h(i),e},createCheck:function(t){var e=d.create("INPUT",{name:t.name,type:"radio"===t.type?"radio":"checkbox",on:t.on,parent:t.parent});console.log(e);var i=Object.assign({input:e},t||{});return"radio"===t.type?new p(i):new c(i),e},setHTML:function(t,e){e instanceof Element?t.appendChild(e):void 0!==e&&(t.innerHTML=e)},appendText:function(t,e){t.appendChild(document.createTextNode(e||""))},addListener:function(t,e,i,o){"string"===typeof e&&(e=e.split(" ")),e.forEach((function(e){t.addEventListener(e,i,o)}))},removeListener:function(t,e,i){"string"===typeof e&&(e=e.split(" ")),e.forEach((function(e){t.removeEventListener(e,i)}))},show:function(t){t.style.display=""},hide:function(t){t.style.display="none"},hidden:function(t){return"none"===d.getStyle(t,"display")},toggle:function(t){t.style.display="none"===t.style.display?"":"none"},setStyle:function(t,e){for(var i in e)switch(i){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"===typeof e[i]?t.style[i]=e[i]+"px":t.style[i]=e[i];break;default:t.style[i]=e[i]}},getStyle:function(t,e){var i,o=(t.ownerDocument||document).defaultView;if(o&&o.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),i=o.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()})),i=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(i)))return function(e){var i=t.style.left,o=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft+"px",t.style.left=i,t.runtimeStyle.left=o,e}(i);return/px$/.test(i)?parseInt(i):i},outerHeight:function(t){return t.offsetHeight+d.getStyle(t,"marginBottom")},outerWidth:function(t){return t.offsetWidth+d.getStyle(t,"marginLeft")},offsetRect:function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},scrollDiv:function(t,e){e=e||{};var i,o,r,n,s,a=!1,c=0,l=0,h="function"===typeof e.onmove?e.onmove:function(){},u=e.vertical?"screenY":"screenX",p=e.vertical?"scrollTop":"scrollLeft",f=!1,g=0,y=function(){s&&(g++,setTimeout(_))},_=function(){if(s){if(g--,g)return;for(var e=getComputedStyle(t),i=parseFloat(e.height),r=0,a=t.children,c=0;c<a.length;c++)e=getComputedStyle(a[c]),r+=parseFloat(e.height),r+=parseFloat(e.marginTop)+parseFloat(e.marginBottom),r+=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom);o=i/r,s.style.height=100*o+"%",s.style.top=t.scrollTop/r*100+"%",n.style.height=i+"px",i>r-.5?n.classList.add("ol-100pc"):n.classList.remove("ol-100pc")}},v=function(e){e.target.classList.contains("ol-noscroll")||(f=!1,a=e[u],l=new Date,t.classList.add("ol-move"),e.preventDefault(),window.addEventListener("pointermove",m),d.addListener(window,["pointerup","pointercancel"],L))},m=function(e){if(f=!0,!1!==a){var n=(r?-1/o:1)*(a-e[u]);t[p]+=n,i=new Date,i-l&&(c=(c+n/(i-l))/2),a=e[u],l=i,n&&h(!0)}},w=function(e){var i=e>0?Math.min(100,e/2):Math.max(-100,e/2);e-=i,t[p]+=i,-1<e&&e<1?(f?setTimeout((function(){t.classList.remove("ol-move")})):t.classList.remove("ol-move"),f=!1,h(!1)):setTimeout((function(){w(e)}),40)};if(e.vertical&&e.minibar){var b=function(i){t.removeEventListener("pointermove",b),t.parentNode.classList.add("ol-miniscroll"),s=d.create("DIV"),n=d.create("DIV",{className:"ol-scroll",html:s}),t.parentNode.insertBefore(n,t),s.addEventListener("pointerdown",(function(t){r=!0,v(t)})),e.mousewheel&&(d.addListener(n,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){E(t)})),d.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){E(t)}))),t.parentNode.addEventListener("pointerenter",y),window.addEventListener("resize",y),!1!==i&&y()};t.parentNode?b(!1):t.addEventListener("pointermove",b),t.addEventListener("scroll",(function(){y()}))}t.style["touch-action"]="none",t.classList.add("ol-scrolldiv"),d.addListener(t,["pointerdown"],(function(t){r=!1,v(t)})),t.addEventListener("click",(function(e){t.classList.contains("ol-move")&&(e.preventDefault(),e.stopPropagation())}),!0);var L=function(i){l=new Date-l,l>100||r?c=0:l>0&&(c=((c||0)+(a-i[u])/l)/2),w(!1===e.animate?0:200*c),a=!1,c=0,l=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout((function(){t.classList.remove("ol-hasClick")}),500)),r=!1,window.removeEventListener("pointermove",m),d.removeListener(window,["pointerup","pointercancel"],L)},E=function(e){var i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return t.classList.add("ol-move"),t[p]-=30*i,t.classList.remove("ol-move"),!1};return e.mousewheel&&d.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],E),{refresh:y}},dispatchEvent:function(t,e){var i;try{i=new CustomEvent(t)}catch(o){i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,{})}e.dispatchEvent(i)}};e["a"]=d},"835b":function(t,e,i){"use strict";var o=i("1300"),r=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=function(t){function e(e){var i=this,r="latest"===o["a"]?o["a"]:"v"+o["a"].split("-")[0],n="Assertion failed. See https://openlayers.org/en/"+r+"/doc/errors/#"+e+" for details.";return i=t.call(this,n)||this,i.code=e,i.name="AssertionError",i.message=n,i}return r(e,t),e}(Error);e["a"]=n},c2d3:function(t,e,i){"use strict";window.ol&&!ol.ext&&(ol.ext={});var o=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t};window.ol&&(ol.inherits||(ol.inherits=o)),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),e["a"]=o},c516:function(t,e,i){"use strict";var o=i("c2d3"),r=i("06f8"),n=i("ac29"),s=i("7a09"),a=i("5bc3"),c=i("2ce2"),l=i("f087"),h=i("e887"),u=function(t){t=t||{};var e=this;this.interaction_=t.interaction,this.interaction_&&(this.interaction_.setActive(t.active),this.interaction_.on("change:active",(function(){e.setActive(e.interaction_.getActive())}))),t.toggleFn&&(t.onToggle=t.toggleFn),t.handleClick=function(){e.toggle(),t.onToggle&&t.onToggle.call(e,e.getActive())},t.className=(t.className||"")+" ol-toggle",h["a"].call(this,t),this.set("title",t.title),this.set("autoActivate",t.autoActivate),t.bar&&this.setSubBar(t.bar),this.setActive(t.active),this.setDisable(t.disable)};Object(o["a"])(u,h["a"]),u.prototype.setMap=function(t){!t&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),h["a"].prototype.setMap.call(this,t),t&&(this.interaction_&&t.addInteraction(this.interaction_),this.subbar_&&t.addControl(this.subbar_))},u.prototype.getSubBar=function(){return this.subbar_},u.prototype.setSubBar=function(t){var e=this.getMap();e&&this.subbar_&&e.removeControl(this.subbar_),this.subbar_=t,t&&(this.subbar_.setTarget(this.element),this.subbar_.element.classList.add("ol-option-bar"),e&&e.addControl(this.subbar_))},u.prototype.getDisable=function(){var t=this.element.querySelector("button");return t&&t.disabled},u.prototype.setDisable=function(t){this.getDisable()!=t&&(this.element.querySelector("button").disabled=t,t&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!t,disable:t}))},u.prototype.getActive=function(){return this.element.classList.contains("ol-active")},u.prototype.toggle=function(){this.getActive()?this.setActive(!1):this.setActive(!0)},u.prototype.setActive=function(t){this.interaction_&&this.interaction_.setActive(t),this.subbar_&&this.subbar_.setActive(t),this.getActive()!==t&&(t?this.element.classList.add("ol-active"):this.element.classList.remove("ol-active"),this.dispatchEvent({type:"change:active",key:"active",oldValue:!t,active:t}))},u.prototype.setInteraction=function(t){this.interaction_=t},u.prototype.getInteraction=function(){return this.interaction_};var p=u,d=function(t){t=t||{},t.className=(t.className||"")+" ol-text-button",h["a"].call(this,t)};Object(o["a"])(d,h["a"]);var f=d,g=i("5831"),y=function(t){c["a"].call(this,t),this.on("select",function(t){this.getFeatures().clear(),this.delete(t.selected)}.bind(this))};Object(o["a"])(y,c["a"]),y.prototype._getSources=function(t){if(!this.getMap())return[];t||(t=this.getMap().getLayers());var e=[];return t.forEach(function(t){t.getLayers?e=e.concat(this._getSources(t.getLayers())):t.getSource&&t.getSource()instanceof g["a"]&&e.push(t.getSource())}.bind(this)),e},y.prototype.delete=function(t){if(t&&(t.length||t.getLength())){this.dispatchEvent({type:"deletestart",features:t});var e=[];this._getSources().forEach((function(i){try{t.forEach((function(t){i.removeFeature(t),e.push(t)}))}catch(o){}})),this.dispatchEvent({type:"deleteend",features:e})}};var _,v=y,m=i("6f9e"),w=i("4105"),b=i("049d"),L=(i("47e4"),i("9a440"),i("88da")),E=i("f403"),C=i("f822"),S=i("0af5"),k=function(t,e){var i=t[0]-e[0],o=t[1]-e[1];return Math.sqrt(i*i+o*o)},M=function(t,e){return t[0]==e[0]&&t[1]==e[1]},x=function(t,e){var i,o,r,n,s,a,c,l,h,u,p,d,f,g=[],y=t.length-1,_=y,v=M(t[0],t[y]);v||(p=t[0],d=t[1],f=[p[0]+(d[1]-p[1])/k(p,d)*e,p[1]-(d[0]-p[0])/k(p,d)*e],g.push(f),t.push(t[y]),y++,_--);for(var m=0;m<_;m++)p=t[m],d=t[(m+1)%y],f=t[(m+2)%y],i=(d[1]-p[1])/(d[0]-p[0]),o=(f[1]-d[1])/(f[0]-d[0]),Math.abs(i-o)>1e-10&&(r=Math.sqrt((d[0]-p[0])*(d[0]-p[0])+(d[1]-p[1])*(d[1]-p[1])),n=Math.sqrt((f[0]-d[0])*(f[0]-d[0])+(f[1]-d[1])*(f[1]-d[1])),s=p[0]+e*(d[1]-p[1])/r,a=d[0]+e*(f[1]-d[1])/n,c=p[1]-e*(d[0]-p[0])/r,l=d[1]-e*(f[0]-d[0])/n,h=(o*a-i*s+c-l)/(o-i),u=(i*o*(a-s)+o*c-i*l)/(o-i),d[0]-p[0]==0&&(h=d[0]+e*(d[1]-p[1])/Math.abs(d[1]-p[1]),u=o*h-o*a+l),f[0]-d[0]==0&&(h=f[0]+e*(f[1]-d[1])/Math.abs(f[1]-d[1]),u=i*h-i*s+c),g.push([h,u]));return v?g.push(g[0]):(t.pop(),p=t[t.length-1],d=t[t.length-2],f=[p[0]-(d[1]-p[1])/k(p,d)*e,p[1]+(d[0]-p[0])/k(p,d)*e],g.push(f)),g},T=function(t,e){for(var i=0;i<e.length-1;i++){var o=e[i],r=e[i+1];if(M(t,o)||M(t,r))return{index:1,segment:[o,r]};var n=k(o,r),s=[(r[0]-o[0])/n,(r[1]-o[1])/n],a=k(o,t),c=[(t[0]-o[0])/a,(t[1]-o[1])/a];if(Math.abs(s[0]*c[1]-s[1]*c[0])<1e-10)return{index:1,segment:[o,r]}}return{index:-1}};(function(){function t(t,e){var i;for(let o=t.length-1;o>0;o--)(t[o][0]>e&&t[o-1][0]<e||t[o][0]<e&&t[o-1][0]>e)&&(i=[e,(e-t[o][0])/(t[o-1][0]-t[o][0])*(t[o-1][1]-t[o][1])+t[o][1]],t.splice(o,0,i))}function e(t,e){var i;for(let o=t.length-1;o>0;o--)(t[o][1]>e&&t[o-1][1]<e||t[o][1]<e&&t[o-1][1]>e)&&(i=[(e-t[o][1])/(t[o-1][1]-t[o][1])*(t[o-1][0]-t[o][0])+t[o][0],e],t.splice(o,0,i))}_=function(i,o){var r="Polygon"===o.getType();if(!r&&"MultiPolygon"!==o.getType())return null;var n=o.getCoordinates();return r&&(n=[n]),n.forEach((function(o){o.forEach((function(o){t(o,i[0]),t(o,i[2]),e(o,i[1]),e(o,i[3])}))})),n.forEach((function(t){t.forEach((function(t){t.forEach((function(t){t[0]<i[0]?t[0]=i[0]:t[0]>i[2]&&(t[0]=i[2]),t[1]<i[1]?t[1]=i[1]:t[1]>i[3]&&(t[1]=i[3])}))}))})),r?new a["a"](n[0]):new L["a"](n)}})();var D=function(t,e,i,o){var r=[];!1!==o&&r.push(t);var n=k(t,e);if(n){var s=Math.round(n/i);if(s>1)for(var a=(e[0]-t[0])/s,c=(e[1]-t[1])/s,l=1;l<s;l++)r.push([t[0]+a*l,t[1]+c*l])}return r.push(e),r};a["a"].prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach((function(e){for(var o=[],r=1;r<e.length;r++)o=o.concat(D(e[r-1],e[r],t,1===r));i.push(o)})),new a["a"](i)},L["a"].prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach((function(e){var o=[];i.push(o),e.forEach((function(e){for(var i=[],r=1;r<e.length;r++)i=i.concat(D(e[r-1],e[r],t,1===r));o.push(i)}))})),new L["a"](i)},C["a"].prototype.intersection=function(t,e){if(t.sampleAt){var i=Object(S["c"])(this.getCenter().concat(this.getCenter()),this.getRadius());t=_(i,t),t=t.simplify(e);var o=this.getCenter(),r=this.getRadius(),n=t.sampleAt(e).getCoordinates();switch(t.getType()){case"Polygon":n=[n];case"MultiPolygon":var s=!1,c=[];return n.forEach((function(t){var e=[];c.push(e),t.forEach((function(t){var i=[];e.push(i),t.forEach((function(t){var e=k(o,t);e>r?(s=!0,i.push([o[0]+r/e*(t[0]-o[0]),o[1]+r/e*(t[1]-o[1])])):i.push(t)}))}))})),s?"Polygon"===t.getType()?new a["a"](c[0]):new L["a"](c):t}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: "+t.getType());return t};var A,P=i("6c77"),F=i("ce2c"),N=i("8682"),I=i("83a6");(function(){var t=[255,255,255,1],e=[0,153,255,1],i=3,o=[new P["c"]({stroke:new N["a"]({color:t,width:i+2})}),new P["c"]({image:new F["a"]({radius:2*i,fill:new I["a"]({color:e}),stroke:new N["a"]({color:t,width:i/2})}),stroke:new N["a"]({color:e,width:i}),fill:new I["a"]({color:[255,255,255,.5]})})];A=function(t){if(!0===t)return o;t=t||{};var e=new I["a"]({color:t.fillColor||"rgba(255,255,255,0.4)"}),i=new N["a"]({color:t.color||"#3399CC",width:1.25}),r=new P["c"]({image:new F["a"]({fill:e,stroke:i,radius:5}),fill:e,stroke:i});return[r]}})();var O=A,G=function(t){t||(t={}),w["b"].call(this,{handleDownEvent:this.handleDownEvent_,handleDragEvent:this.handleDragEvent_,handleMoveEvent:this.handleMoveEvent_,handleUpEvent:this.handleUpEvent_}),this.features_=t.features,this.layers_=t.layers?t.layers instanceof Array?t.layers:[t.layers]:null,this.set("duplicate",t.duplicate),this.source_=t.source,this._style="function"===typeof t.style?t.style:function(){return t.style?t.style:O(!0)},this.previousCursor_=!1};Object(o["a"])(G,w["b"]),G.prototype.setMap=function(t){w["b"].prototype.setMap.call(this,t)},G.prototype.getFeatureAtPixel_=function(t){var e=this;return this.getMap().forEachFeatureAtPixel(t.pixel,(function(i,o){var r;if(e.layers_){for(var n=0;n<e.layers_.length;n++)if(e.layers_[n]===o){r=i;break}}else e.features_?e.features_.forEach((function(t){t===i&&(r=i)})):r=i;var s=r.getGeometry().getType();if(r&&/Polygon|LineString/.test(s)){if("Polygon"===s&&r.getGeometry().getCoordinates().length>1)return!1;var a=r.getGeometry().getClosestPoint(t.coordinate),c=a[0]-t.coordinate[0],l=a[1]-t.coordinate[1],h=Math.sqrt(c*c+l*l)/t.frameState.viewState.resolution;return h<5&&{feature:r,hit:a,coordinates:r.getGeometry().getCoordinates(),geom:r.getGeometry().clone(),geomType:s}}return!1}),{hitTolerance:5})},G.prototype.handleDownEvent_=function(t){return this.current_=this.getFeatureAtPixel_(t),!!this.current_&&(this.currentStyle_=this.current_.feature.getStyle(),this.source_&&(this.get("duplicate")||t.originalEvent.ctrlKey)?(this.current_.feature=this.current_.feature.clone(),this.current_.feature.setStyle(this._style(this.current_.feature)),this.source_.addFeature(this.current_.feature)):(this.current_.feature.setStyle(this._style(this.current_.feature)),this._modifystart=!0),this.dispatchEvent({type:"offsetstart",feature:this.current_.feature,offset:0}),!0)},G.prototype.handleDragEvent_=function(t){this._modifystart&&(this.dispatchEvent({type:"modifystart",features:[this.current_.feature]}),this._modifystart=!1);var e,i,o,r,n=this.current_.geom.getClosestPoint(t.coordinate),c=k(n,t.coordinate);switch(this.current_.geomType){case"Polygon":if(e=T(n,this.current_.coordinates[0]).segment,e){i=[e[1][0]-e[0][0],e[1][1]-e[0][1]],o=[t.coordinate[0]-n[0],t.coordinate[1]-n[1]],i[0]*o[1]-i[1]*o[0]>0&&(c=-c),r=[];for(var l=0;l<this.current_.coordinates.length;l++)r.push(x(this.current_.coordinates[l],0==l?c:-c));this.current_.feature.setGeometry(new a["a"](r))}break;case"LineString":e=T(n,this.current_.coordinates).segment,e&&(i=[e[1][0]-e[0][0],e[1][1]-e[0][1]],o=[t.coordinate[0]-n[0],t.coordinate[1]-n[1]],i[0]*o[1]-i[1]*o[0]>0&&(c=-c),r=x(this.current_.coordinates,c),this.current_.feature.setGeometry(new s["a"](r)));break;default:break}this.dispatchEvent({type:"offsetting",feature:this.current_.feature,offset:c,segment:[n,t.coordinate],coordinate:t.coordinate})},G.prototype.handleUpEvent_=function(t){this._modifystart||this.dispatchEvent({type:"offsetend",feature:this.current_.feature,coordinate:t.coordinate}),this.current_.feature.setStyle(this.currentStyle_),this.current_=!1},G.prototype.handleMoveEvent_=function(t){var e=this.getFeatureAtPixel_(t);e?(!1===this.previousCursor_&&(this.previousCursor_=t.map.getTargetElement().style.cursor),t.map.getTargetElement().style.cursor="pointer"):(t.map.getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=!1)};var V=G,R=i("4334"),j=i("3e6b"),q=i("4cdf");s["a"].prototype.splitAt=function(t,e){var i;if(!t)return[this];if(e||(e=1e-10),t.length&&t[0].length){var o=[this];for(i=0;i<t.length;i++){for(var r=[],n=0;n<o.length;n++){var a=o[n].splitAt(t[i],e);r=r.concat(a)}o=r}return o}if(M(t,this.getFirstCoordinate())||M(t,this.getLastCoordinate()))return[this];var c=this.getCoordinates(),l=[c[0]],h=[];for(i=0;i<c.length-1;i++)if(!M(c[i],c[i+1])){if(M(t,c[i+1]))l.push(c[i+1]),h.push(new s["a"](l)),l=[];else if(!M(t,c[i])){var u,p,d=!1;c[i][0]==c[i+1][0]?(u=(c[i][1]-t[1])/(c[i][1]-c[i+1][1]),d=c[i][0]==t[0]&&0<u&&u<=1):c[i][1]==c[i+1][1]?(u=(c[i][0]-t[0])/(c[i][0]-c[i+1][0]),d=c[i][1]==t[1]&&0<u&&u<=1):(u=(c[i][0]-t[0])/(c[i][0]-c[i+1][0]),p=(c[i][1]-t[1])/(c[i][1]-c[i+1][1]),d=Math.abs(u-p)<=e&&0<u&&u<=1),d&&(l.push(t),h.push(new s["a"](l)),l=[t])}l.push(c[i+1])}return l.length>1&&h.push(new s["a"](l)),h.length?h:[this]};var U=function(t){t||(t={}),R["a"].call(this,{handleEvent:function(t){switch(t.type){case"singleclick":return this.handleDownEvent(t);case"pointermove":return this.handleMoveEvent(t);default:return!0}}}),this.snapDistance_=t.snapDistance||25,this.tolerance_=t.tolerance||1e-10,this.cursor_=t.cursor,this.sources_=t.sources?t.sources instanceof Array?t.sources:[t.sources]:[],t.features&&this.sources_.push(new g["a"]({features:t.features})),this.filterSplit_=t.filter||function(){return!0};var e=[255,255,255,1],i=[0,153,255,1],o=3,r=new I["a"]({color:"rgba(255,255,255,0.4)"}),n=new N["a"]({color:"#3399CC",width:1.25}),s=[new P["c"]({image:new F["a"]({fill:r,stroke:n,radius:5}),fill:r,stroke:n})],a=[new P["c"]({stroke:new N["a"]({color:e,width:o+2})}),new P["c"]({image:new F["a"]({radius:2*o,fill:new I["a"]({color:i}),stroke:new N["a"]({color:e,width:o/2})}),stroke:new N["a"]({color:i,width:o})})];t.sketchStyle&&(s=t.sketchStyle instanceof Array?t.sketchStyle:[t.sketchStyle]),t.featureStyle&&(a=t.featureStyle instanceof Array?t.featureStyle:[t.featureStyle]),this.overlayLayer_=new j["a"]({source:new g["a"]({useSpatialIndex:!1}),name:"Split overlay",displayInLayerSwitcher:!1,style:function(t){return t._sketch_?s:a}})};Object(o["a"])(U,R["a"]),U.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),R["a"].prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},U.prototype.getClosestFeature=function(t){var e,i,o,r,n=this.snapDistance_+1;if(this.sources_.forEach((function(a){var c=a.getClosestFeatureToCoordinate(t.coordinate);if(c&&c.getGeometry().splitAt){var l=c.getGeometry().getClosestPoint(t.coordinate),h=new s["a"]([t.coordinate,l]),u=h.getLength()/t.frameState.viewState.resolution;u<n&&(e=a,n=u,i=c,r=h,o=l)}})),n>this.snapDistance_)return!1;var a=this.getNearestCoord(o,i.getGeometry().getCoordinates()),c=this.getMap().getPixelFromCoordinate(a);return k(t.pixel,c)<this.snapDistance_&&(o=a),{source:e,feature:i,coord:o,link:r}},U.prototype.getNearestCoord=function(t,e){for(var i,o,r=Number.MAX_VALUE,n=0;n<e.length;n++)i=k(t,e[n]),i<r&&(r=i,o=e[n]);return o},U.prototype.handleDownEvent=function(t){var e=this.getClosestFeature(t);if(e){var i=this;i.overlayLayer_.getSource().clear();var o,r=e.feature.getGeometry().splitAt(e.coord,this.tolerance_);if(r.length>1){var n=[];for(o=0;o<r.length;o++){var s=e.feature.clone();s.setGeometry(r[o]),n.push(s)}for(i.dispatchEvent({type:"beforesplit",original:e.feature,features:n}),e.source.dispatchEvent({type:"beforesplit",original:e.feature,features:n}),e.source.removeFeature(e.feature),o=0;o<n.length;o++)e.source.addFeature(n[o]);i.dispatchEvent({type:"aftersplit",original:e.feature,features:n}),e.source.dispatchEvent({type:"aftersplit",original:e.feature,features:n})}}return!1},U.prototype.handleMoveEvent=function(t){var e=t.map;this.overlayLayer_.getSource().clear();var i,o,r=this.getClosestFeature(t);r&&this.filterSplit_(r.feature)?(this.overlayLayer_.getSource().addFeature(r.feature),i=new q["a"](new E["a"](r.coord)),i._sketch_=!0,this.overlayLayer_.getSource().addFeature(i),o=new q["a"](r.link),o._sketch_=!0,this.overlayLayer_.getSource().addFeature(o),this.dispatchEvent({type:"pointermove",coordinate:t.coordinate,frameState:t.frameState,originalEvent:t.originalEvent,map:t.map,pixel:t.pixel,feature:r.feature,linkGeometry:r.link})):this.dispatchEvent(t);var n=e.getTargetElement();this.cursor_&&(r?n.style.cursor!=this.cursor_&&(this.previousCursor_=n.style.cursor,n.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(n.style.cursor=this.previousCursor_,this.previousCursor_=void 0))};var H=U,X=i("e300"),z=i("35d8"),B=i("35a7"),K=function(t){t||(t={});var e=this;this.selection_=new X["a"],this.handles_=new X["a"],this.overlayLayer_=new j["a"]({source:new g["a"]({features:this.handles_,useSpatialIndex:!1,wrapX:!1}),name:"Transform overlay",displayInLayerSwitcher:!1,style:function(t){return e.style[(t.get("handle")||"default")+(t.get("constraint")||"")+(t.get("option")||"")]}}),w["b"].call(this,{handleDownEvent:this.handleDownEvent_,handleDragEvent:this.handleDragEvent_,handleMoveEvent:this.handleMoveEvent_,handleUpEvent:this.handleUpEvent_}),this.features_=t.features,"function"===typeof t.filter&&(this._filter=t.filter),this.layers_=t.layers?t.layers instanceof Array?t.layers:[t.layers]:null,this._handleEvent=t.condition||function(){return!0},this.addFn_=t.addCondition||function(){return!1},this.set("translateFeature",!1!==t.translateFeature),this.set("translate",!1!==t.translate),this.set("translateBBox",!0===t.translateBBox),this.set("stretch",!1!==t.stretch),this.set("scale",!1!==t.scale),this.set("rotate",!1!==t.rotate),this.set("keepAspectRatio",t.keepAspectRatio||function(t){return t.originalEvent.shiftKey}),this.set("modifyCenter",t.modifyCenter||function(t){return t.originalEvent.metaKey||t.originalEvent.ctrlKey}),this.set("noFlip",t.noFlip||!1),this.set("selection",!1!==t.selection),this.set("hitTolerance",t.hitTolerance||0),this.set("enableRotatedTransform",t.enableRotatedTransform||!1),this.set("keepRectangle",t.keepRectangle||!1),this.on("propertychange",(function(){this.drawSketch_()})),this.setDefaultStyle()};function Z(t,e){var i=(t[0]*e[0]+t[1]*e[1])/(e[0]*e[0]+e[1]*e[1]);return[e[0]*i,e[1]*i]}function Y(t,e){return[e[0]-t[0],e[1]-t[1]]}function W(t,e){return[t[0]+e[0],t[1]+e[1]]}Object(o["a"])(K,w["b"]),K.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",rotate0:"move",scale:"nesw-resize",scale1:"nwse-resize",scale2:"nesw-resize",scale3:"nwse-resize",scalev:"ew-resize",scaleh1:"ns-resize",scalev2:"ew-resize",scaleh3:"ns-resize"},K.prototype.setMap=function(t){var e=this.getMap();if(e){var i=e.getTargetElement();e.removeLayer(this.overlayLayer_),this.previousCursor_&&i&&(i.style.cursor=this.previousCursor_),this.previousCursor_=void 0}w["b"].prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),null===t&&this.select(null),null!==t&&(this.isTouch=/touch/.test(t.getViewport().className),this.setDefaultStyle())},K.prototype.setActive=function(t){this.select(null),this.overlayLayer_.setVisible(t),w["b"].prototype.setActive.call(this,t)},K.prototype.setDefaultStyle=function(t){t=t||{};var e=t.pointStroke||new N["a"]({color:[255,0,0,1],width:1}),i=t.stroke||new N["a"]({color:[255,0,0,1],width:1,lineDash:[4,4]}),o=t.fill||new I["a"]({color:[255,0,0,.01]}),r=t.pointFill||new I["a"]({color:[255,255,255,.8]}),n=new z["a"]({fill:r,stroke:e,radius:this.isTouch?12:6,points:15});n.getAnchor()[0]=this.isTouch?-10:-5;var s=new z["a"]({fill:r,stroke:e,radius:this.isTouch?16:8,points:4,angle:Math.PI/4}),a=new z["a"]({fill:r,stroke:e,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});function c(t,e,i){return[new P["c"]({image:t,stroke:e,fill:i})]}this.style={default:c(s,i,o),translate:c(s,e,r),rotate:c(n,e,r),rotate0:c(s,e,r),scale:c(s,e,r),scale1:c(s,e,r),scale2:c(s,e,r),scale3:c(s,e,r),scalev:c(a,e,r),scaleh1:c(a,e,r),scalev2:c(a,e,r),scaleh3:c(a,e,r)},this.drawSketch_()},K.prototype.setStyle=function(t,e){if(e){this.style[t]=e instanceof Array?e:[e];for(var i=0;i<this.style[t].length;i++){var o=this.style[t][i].getImage();o&&("rotate"==t&&(o.getAnchor()[0]=-5),this.isTouch&&o.setScale(1.8));var r=this.style[t][i].getText();r&&("rotate"==t&&r.setOffsetX(this.isTouch?14:7),this.isTouch&&r.setScale(1.8))}this.drawSketch_()}},K.prototype.getFeatureAtPixel_=function(t){var e=this;return this.getMap().forEachFeatureAtPixel(t,(function(t,i){var o=!1;if(!i){if(t===e.bbox_)return!!e.get("translateBBox")&&{feature:t,handle:"translate",constraint:"",option:""};if(e.handles_.forEach((function(e){e===t&&(o=!0)})),o)return{feature:t,handle:t.get("handle"),constraint:t.get("constraint"),option:t.get("option")}}if(!e.get("selection"))return e.selection_.getArray().some((function(e){return t===e}))?{feature:t}:null;if(e._filter)return e._filter(t,i)?{feature:t}:null;if(e.layers_){for(var r=0;r<e.layers_.length;r++)if(e.layers_[r]===i)return{feature:t};return null}return e.features_?(e.features_.forEach((function(e){e===t&&(o=!0)})),o?{feature:t}:null):{feature:t}}),{hitTolerance:this.get("hitTolerance")})||{}},K.prototype.getGeometryRotateToZero_=function(t,e){var i=t.getGeometry(),o=this.getMap().getView().getRotation();if(0===o||!this.get("enableRotatedTransform"))return e?i.clone():i;var r=i.clone();return r.rotate(-1*o,this.getMap().getView().getCenter()),r},K.prototype.drawSketch_=function(t){var e,i,o,r=this.get("keepRectangle")&&this.selection_.item(0)&&"Polygon"===this.selection_.item(0).getGeometry().getType();if(this.overlayLayer_.getSource().clear(),this.selection_.getLength()){var n,s=this.getMap().getView().getRotation(),c=this.getGeometryRotateToZero_(this.selection_.item(0)).getExtent();if(r&&(n=this.getGeometryRotateToZero_(this.selection_.item(0)).getCoordinates()[0].slice(0,4),n.unshift(n[3])),c=Object(S["c"])(c,0),this.selection_.forEach(function(t){var e=this.getGeometryRotateToZero_(t).getExtent();Object(S["p"])(c,e)}.bind(this)),!0===t)this.ispt_||(this.overlayLayer_.getSource().addFeature(new q["a"]({geometry:new E["a"](this.center_),handle:"rotate0"})),o=Object(a["c"])(c),this.get("enableRotatedTransform")&&0!==s&&o.rotate(s,this.getMap().getView().getCenter()),i=this.bbox_=new q["a"](o),this.overlayLayer_.getSource().addFeature(i));else{if(this.ispt_){var l=this.getMap().getPixelFromCoordinate([c[0],c[1]]);l&&(c=Object(S["b"])([this.getMap().getCoordinateFromPixel([l[0]-10,l[1]-10]),this.getMap().getCoordinateFromPixel([l[0]+10,l[1]+10])]))}o=r?new a["a"]([n]):Object(a["c"])(c),this.get("enableRotatedTransform")&&0!==s&&o.rotate(s,this.getMap().getView().getCenter()),i=this.bbox_=new q["a"](o);var h=[],u=o.getCoordinates()[0];if(!this.ispt_){if(h.push(i),!this.iscircle_&&this.get("stretch")&&this.get("scale"))for(e=0;e<u.length-1;e++)i=new q["a"]({geometry:new E["a"]([(u[e][0]+u[e+1][0])/2,(u[e][1]+u[e+1][1])/2]),handle:"scale",constraint:e%2?"h":"v",option:e}),h.push(i);if(this.get("scale"))for(e=0;e<u.length-1;e++)i=new q["a"]({geometry:new E["a"](u[e]),handle:"scale",option:e}),h.push(i);this.get("translate")&&!this.get("translateFeature")&&(i=new q["a"]({geometry:new E["a"]([(u[0][0]+u[2][0])/2,(u[0][1]+u[2][1])/2]),handle:"translate"}),h.push(i))}!this.iscircle_&&this.get("rotate")&&(i=new q["a"]({geometry:new E["a"](u[3]),handle:"rotate"}),h.push(i)),this.overlayLayer_.getSource().addFeatures(h)}}},K.prototype.select=function(t,e){if(!t)return this.selection_.clear(),void this.drawSketch_();if(t.getGeometry&&t.getGeometry()){if(e)this.selection_.push(t);else{var i=this.selection_.getArray().indexOf(t);this.selection_.removeAt(i)}this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:t,features:this.selection_})}},K.prototype.setSelection=function(t){this.selection_.clear(),t.forEach(function(t){this.selection_.push(t)}.bind(this)),this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",features:this.selection_})},K.prototype.watchFeatures_=function(){this._featureListeners&&this._featureListeners.forEach((function(t){Object(B["b"])(t)})),this._featureListeners=[],this.selection_.forEach(function(t){this._featureListeners.push(t.on("change",function(){this.isUpdating_||this.drawSketch_()}.bind(this)))}.bind(this))},K.prototype.handleDownEvent_=function(t){if(this._handleEvent(t,this.selection_)){var e=this.getFeatureAtPixel_(t.pixel),i=e.feature;if(this.selection_.getLength()&&this.selection_.getArray().indexOf(i)>=0&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))&&(e.handle="translate"),e.handle){this.mode_=e.handle,this.opt_=e.option,this.constraint_=e.constraint;var o=this.getMap().getView().getRotation();this.coordinate_=t.coordinate,this.pixel_=t.pixel,this.geoms_=[],this.rotatedGeoms_=[];for(var r,n=Object(S["j"])(),s=Object(S["j"])(),c=0;r=this.selection_.item(c);c++)if(this.geoms_.push(r.getGeometry().clone()),n=Object(S["p"])(n,r.getGeometry().getExtent()),this.get("enableRotatedTransform")&&0!==o){var l=this.getGeometryRotateToZero_(r,!0);this.rotatedGeoms_.push(l),s=Object(S["p"])(s,l.getExtent())}if(this.extent_=Object(a["c"])(n).getCoordinates()[0],this.get("enableRotatedTransform")&&0!==o&&(this.rotatedExtent_=Object(a["c"])(s).getCoordinates()[0]),"rotate"===this.mode_){this.center_=this.getCenter()||Object(S["w"])(n);var h=t.map.getTargetElement();h.style.cursor=this.Cursors.rotate0,this.previousCursor_=h.style.cursor}else this.center_=Object(S["w"])(n);return this.angle_=Math.atan2(this.center_[1]-t.coordinate[1],this.center_[0]-t.coordinate[0]),this.dispatchEvent({type:this.mode_+"start",feature:this.selection_.item(0),features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!0}if(this.get("selection")){if(i){this.addFn_(t)||this.selection_.clear();var u=this.selection_.getArray().indexOf(i);u<0?this.selection_.push(i):this.selection_.removeAt(u)}else this.selection_.clear();return this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:i,features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!1}}},K.prototype.getFeatures=function(){return this.selection_},K.prototype.getCenter=function(){return this.get("center")},K.prototype.setCenter=function(t){return this.set("center",t)},K.prototype.handleDragEvent_=function(t){if(this._handleEvent(t,this.features_)){var e,i,o,r,n=this.getMap().getView().getRotation(),s=[this.coordinate_[0],this.coordinate_[1]],a=[t.coordinate[0],t.coordinate[1]];switch(this.isUpdating_=!0,this.mode_){case"rotate":var c=Math.atan2(this.center_[1]-a[1],this.center_[0]-a[0]);if(!this.ispt)for(e=0,o;o=this.selection_.item(e);e++)r=this.geoms_[e].clone(),r.rotate(c-this.angle_,this.center_),"Circle"==r.getType()&&r.setCenterAndRadius(r.getCenter(),r.getRadius()),o.setGeometry(r);this.drawSketch_(!0),this.dispatchEvent({type:"rotating",feature:this.selection_.item(0),features:this.selection_,angle:c-this.angle_,pixel:t.pixel,coordinate:t.coordinate});break;case"translate":var l=a[0]-s[0],h=a[1]-s[1];for(e=0,o;o=this.selection_.item(e);e++)o.getGeometry().translate(l,h);this.handles_.forEach((function(t){t.getGeometry().translate(l,h)})),this.coordinate_=t.coordinate,this.dispatchEvent({type:"translating",feature:this.selection_.item(0),features:this.selection_,delta:[l,h],pixel:t.pixel,coordinate:t.coordinate});break;case"scale":var u=this.center_;if(this.get("modifyCenter")(t)){var p=this.extent_;this.get("enableRotatedTransform")&&0!==n&&(p=this.rotatedExtent_),u=p[(Number(this.opt_)+2)%4]}var d=this.get("keepRectangle")&&this.geoms_.length<=1&&"Polygon"==this.geoms_[0].getType(),f=this.constraint_,g=this.opt_,y=this.coordinate_,_=t.coordinate;if(this.get("enableRotatedTransform")&&0!==n){var v=new E["a"](this.coordinate_);v.rotate(-1*n,u),y=v.getCoordinates();var m=new E["a"](t.coordinate);m.rotate(-1*n,u),_=m.getCoordinates()}var w=(_[0]-u[0])/(y[0]-u[0]),b=(_[1]-u[1])/(y[1]-u[1]),L=[_[0]-y[0],_[1]-y[1]];if(this.get("enableRotatedTransform")&&0!==n){var C=new E["a"](u);C.rotate(-1*n,this.getMap().getView().getCenter()),u=C.getCoordinates()}for(this.get("noFlip")&&(w<0&&(w=-w),b<0&&(b=-b)),this.constraint_?"h"==this.constraint_?w=1:b=1:this.get("keepAspectRatio")(t)&&(w=b=Math.min(w,b)),e=0,o;o=this.selection_.item(e);e++)r=0!==n&&this.get("enableRotatedTransform")?this.rotatedGeoms_[e].clone():this.geoms_[e].clone(),r.applyTransform((function(t,e,o){if(o<2)return e;if(d){var n=[[6],[0,8],[2],[4]],s=[t[0],t[1]],a=[t[2],t[3]],c=[t[4],t[5]],l=[t[6],t[7]],h=[t[8],t[9]];if(f){var p=g%2===0?Y(s,a):Y(l,s),y=Z(L,p),v=g+1<n.length?g+1:0,m=[...n[g],...n[v]];for(i=0;i<t.length;i+=o)e[i]=m.includes(i)?t[i]+y[0]:t[i],e[i+1]=m.includes(i)?t[i+1]+y[1]:t[i+1]}else{var E,C;switch(g){case 0:L=Y(l,_),E=Z(L,Y(c,l)),C=Z(L,Y(s,l)),[e[0],e[1]]=W(s,E),[e[4],e[5]]=W(c,C),[e[6],e[7]]=W(l,L),[e[8],e[9]]=W(h,E);break;case 1:L=Y(s,_),E=Z(L,Y(l,s)),C=Z(L,Y(a,s)),[e[0],e[1]]=W(s,L),[e[2],e[3]]=W(a,E),[e[6],e[7]]=W(l,C),[e[8],e[9]]=W(h,L);break;case 2:L=Y(a,_),E=Z(L,Y(s,a)),C=Z(L,Y(c,a)),[e[0],e[1]]=W(s,C),[e[2],e[3]]=W(a,L),[e[4],e[5]]=W(c,E),[e[8],e[9]]=W(h,C);break;case 3:L=Y(c,_),E=Z(L,Y(a,c)),C=Z(L,Y(l,c)),[e[2],e[3]]=W(a,C),[e[4],e[5]]=W(c,L),[e[6],e[7]]=W(l,E);break}}}else for(i=0;i<t.length;i+=o)1!=w&&(e[i]=u[0]+(t[i]-u[0])*w),1!=b&&(e[i+1]=u[1]+(t[i+1]-u[1])*b);return"Circle"==r.getType()&&r.setCenterAndRadius(r.getCenter(),r.getRadius()),e})),this.get("enableRotatedTransform")&&0!==n&&r.rotate(n,this.getMap().getView().getCenter()),o.setGeometry(r);this.drawSketch_(),this.dispatchEvent({type:"scaling",feature:this.selection_.item(0),features:this.selection_,scale:[w,b],pixel:t.pixel,coordinate:t.coordinate});break;default:break}this.isUpdating_=!1}},K.prototype.handleMoveEvent_=function(t){if(this._handleEvent(t,this.features_)&&!this.mode_){var e=this.getFeatureAtPixel_(t.pixel),i=t.map.getTargetElement();if(e.feature){var o=e.handle?this.Cursors[(e.handle||"default")+(e.constraint||"")+(e.option||"")]:this.Cursors.select;void 0===this.previousCursor_&&(this.previousCursor_=i.style.cursor),i.style.cursor=o}else void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_),this.previousCursor_=void 0}},K.prototype.handleUpEvent_=function(t){if("rotate"===this.mode_){var e=t.map.getTargetElement();e.style.cursor=this.Cursors.default,this.previousCursor_=void 0}return this.dispatchEvent({type:this.mode_+"end",feature:this.selection_.item(0),features:this.selection_,oldgeom:this.geoms_[0],oldgeoms:this.geoms_}),this.drawSketch_(),this.mode_=null,!1},K.prototype.getFeatures=function(){return this.selection_};var $=K,J=function(t){var e,i;t||(t={}),w["b"].call(this,{handleEvent:function(t){switch(t.type){case"pointerdown":return e=this.handleDownEvent(t),i=e||this._deleteCondition(t),!e;case"pointerup":return e=!1,this.handleUpEvent(t);case"pointerdrag":return!e||this.handleDragEvent(t);case"pointermove":return!!e||this.handleMoveEvent(t);case"singleclick":case"click":return!i;default:return!0}}}),this.snapDistance_=t.pixelTolerance||10,this.tolerance_=1e-10,this.cursor_=t.cursor,this.sources_=t.sources?t.sources instanceof Array?t.sources:[t.sources]:[],t.source&&this.sources_.push(t.source),t.features&&this.sources_.push(new g["a"]({features:t.features})),this.filterSplit_=t.filter||function(){return!0},this._condition=t.condition||r["k"],this._deleteCondition=t.deleteCondition||r["b"],this._insertVertexCondition=t.insertVertexCondition||r["d"];var o=function(){return[new P["c"]({image:new F["a"]({radius:6,fill:new I["a"]({color:[0,153,255,1]}),stroke:new N["a"]({color:"#FFF",width:1.25})})})]};t.style&&(o="function"===typeof t.style?t.style:function(){return t.style}),this.overlayLayer_=new j["a"]({source:new g["a"]({useSpatialIndex:!1}),name:"Modify overlay",displayInLayerSwitcher:!1,style:o,wrapX:t.wrapX})};Object(o["a"])(J,w["b"]),J.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),R["a"].prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},J.prototype.setActive=function(t){R["a"].prototype.setActive.call(this,t),this.overlayLayer_&&this.overlayLayer_.getSource().clear()},J.prototype.getClosestFeature=function(t){for(var e,i,o=this.snapDistance_+1,r=0;r<this.sources_.length;r++){var n=this.sources_[r];if(e=n.getClosestFeatureToCoordinate(t.coordinate),e&&this.filterSplit_(e)){var s=e.getGeometry().getClosestPoint(t.coordinate),a=k(t.coordinate,s)/t.frameState.viewState.resolution;a<o&&(o=a,i=s);break}}if(o>this.snapDistance_)return this.currentFeature&&this.dispatchEvent({type:"select",selected:[],deselected:[this.currentFeature]}),this.currentFeature=null,!1;var c=this.getNearestCoord(i,e.getGeometry());if(c){c=c.coord;var l=this.getMap().getPixelFromCoordinate(c);return k(t.pixel,l)<this.snapDistance_&&(i=c),this.currentFeature!==e&&this.dispatchEvent({type:"select",selected:[e],deselected:[this.currentFeature]}),this.currentFeature=e,{source:n,feature:e,coord:i}}},J.prototype.getNearestCoord=function(t,e){var i,o,r,n,a;switch(e.getType()){case"Point":return{coord:e.getCoordinates(),dist:k(e.getCoordinates(),t)};case"MultiPoint":return this.getNearestCoord(t,new s["a"](e.getCoordinates()));case"LineString":case"LinearRing":var c;a=Number.MAX_VALUE;var l=e.getCoordinates();for(i=0;i<l.length;i++)c=k(t,l[i]),c<a&&(a=c,n=l[i]);return{coord:n,dist:a};case"MultiLineString":var h=e.getLineStrings();for(n=!1,a=Number.MAX_VALUE,i=0;o=h[i];i++)r=this.getNearestCoord(t,o),r&&r.dist<a&&(n=r,a=r.dist,n.ring=i);return n;case"Polygon":var u=e.getLinearRings();for(n=!1,a=Number.MAX_VALUE,i=0;o=u[i];i++)r=this.getNearestCoord(t,o),r&&r.dist<a&&(n=r,a=r.dist,n.ring=i);return n;case"MultiPolygon":var p=e.getPolygons();for(n=!1,a=Number.MAX_VALUE,i=0;o=p[i];i++)r=this.getNearestCoord(t,o),r&&r.dist<a&&(n=r,a=r.dist,n.poly=i);return n;case"GeometryCollection":var d=e.getGeometries();for(n=!1,a=Number.MAX_VALUE,i=0;o=d[i];i++)r=this.getNearestCoord(t,o),r&&r.dist<a&&(n=r,a=r.dist,n.geom=i);return n;default:return!1}},J.prototype.getArcs=function(t,e){var i,o,r,n,a,c=!1;switch(t.getType()){case"Point":M(e,t.getCoordinates())&&(c={geom:t,type:t.getType(),coord1:[],coord2:[],node:!0});break;case"MultiPoint":for(i=t.getCoordinates(),o=0;o<i.length;o++)if(M(e,i[o])){c={geom:t,type:t.getType(),index:o,coord1:[],coord2:[],node:!0};break}break;case"LinearRing":case"LineString":var l=t.getClosestPoint(e);if(k(l,e)<1.5*this.tolerance_){var h;if("LinearRing"===t.getType()?(a=new s["a"](t.getCoordinates()),h=a.splitAt(e,this.tolerance_)):h=t.splitAt(e,this.tolerance_),h.length>2){for(i=h[1].getCoordinates(),o=2;r=h[o];o++){var u=r.getCoordinates();u.shift(),i=i.concat(u)}h=[h[0],new s["a"](i)]}if(2===h.length){var p=h[0].getCoordinates(),d=h[1].getCoordinates(),f=p.length+d.length-1;p.pop(),d.shift(),c={geom:t,type:t.getType(),coord1:p,coord2:d,node:t.getCoordinates().length===f,closed:!1}}else if(1===h.length){r=h[0].getCoordinates();var g=M(r[0],e),y=M(r[r.length-1],e);g?(r.shift(),y&&r.pop(),c={geom:t,type:t.getType(),coord1:[],coord2:r,node:!0,closed:y}):y&&(r.pop(),c={geom:t,type:t.getType(),coord1:r,coord2:[],node:!0,closed:!1})}}break;case"MultiLineString":var _=t.getLineStrings();for(o=0;n=_[o];o++)if(c=this.getArcs(n,e),c){c.geom=t,c.type=t.getType(),c.lstring=o;break}break;case"Polygon":var v=t.getLinearRings();for(o=0;n=v[o];o++)if(c=this.getArcs(n,e),c){c.geom=t,c.type=t.getType(),c.index=o;break}break;case"MultiPolygon":var m=t.getPolygons();for(o=0;n=m[o];o++)if(c=this.getArcs(n,e),c){c.geom=t,c.type=t.getType(),c.poly=o;break}break;case"GeometryCollection":for(a=t.getGeometries(),o=0;n=a[o];o++)if(c=this.getArcs(n,e),c){c.geom=t,c.g=o,c.typeg=c.type,c.type=t.getType();break}break;default:console.error("ol/interaction/ModifyFeature "+t.getType()+" not supported!");break}return c},J.prototype.handleDownEvent=function(t){if(!this.getActive())return!1;var e=this.getClosestFeature(t);if(e&&(this._condition(t)||this._deleteCondition(t))){var i=[];return this.arcs=[],this.sources_.forEach(function(t){var o=Object(S["c"])(Object(S["b"])([e.coord]),this.tolerance_);i=i.concat(i,t.getFeaturesInExtent(o))}.bind(this)),this._modifiedFeatures=[],i.forEach(function(i){var o=this.getArcs(i.getGeometry(),e.coord);o&&(this._insertVertexCondition(t)||o.node)&&(o.feature=i,this._modifiedFeatures.push(i),this.arcs.push(o))}.bind(this)),!this._modifiedFeatures.length||(this._deleteCondition(t)?!this._removePoint(e,t):(this.dispatchEvent({type:"modifystart",coordinate:e.coord,originalEvent:t.originalEvent,features:this._modifiedFeatures}),this.handleDragEvent({coordinate:e.coord,originalEvent:t.originalEvent}),!0))}return!1},J.prototype.getModifiedFeatures=function(){return this._modifiedFeatures||[]},J.prototype.removePoint=function(){this._removePoint({},{})},J.prototype._getModification=function(t){var e=t.coord1.concat(t.coord2);switch(t.type){case"LineString":if(t.closed&&e.push(e[0]),e.length>1&&t.geom.getCoordinates().length!=e.length)return t.coords=e,!0;break;case"MultiLineString":if(t.closed&&e.push(e[0]),e.length>1){var i=t.geom.getCoordinates();if(i[t.lstring].length!=e.length)return i[t.lstring]=e,t.coords=i,!0}break;case"Polygon":if(t.closed&&e.push(e[0]),e.length>3&&(i=t.geom.getCoordinates(),i[t.index].length!=e.length))return i[t.index]=e,t.coords=i,!0;break;case"MultiPolygon":if(t.closed&&e.push(e[0]),e.length>3&&(i=t.geom.getCoordinates(),i[t.poly][t.index].length!=e.length))return i[t.poly][t.index]=e,t.coords=i,!0;break;case"GeometryCollection":t.type=t.typeg;var o=t.geom,r=o.getGeometries();t.geom=r[t.g];var n=this._getModification(t);return o.setGeometries(r),t.geom=o,t.type="GeometryCollection",n;default:break}return!1},J.prototype._removePoint=function(t,e){if(!this.arcs)return!1;this.overlayLayer_.getSource().clear();var i=!1;return this.arcs.forEach(function(t){i=i||this._getModification(t)}.bind(this)),i&&(this.dispatchEvent({type:"modifystart",coordinate:t.coord,originalEvent:e.originalEvent,features:this._modifiedFeatures}),this.arcs.forEach(function(t){if("GeometryCollection"===t.geom.getType()){if(t.coords){var e=t.geom.getGeometries();e[t.g].setCoordinates(t.coords),t.geom.setGeometries(e)}}else t.coords&&t.geom.setCoordinates(t.coords)}.bind(this)),this.dispatchEvent({type:"modifyend",coordinate:t.coord,originalEvent:e.originalEvent,features:this._modifiedFeatures})),this.arcs=[],i},J.prototype.handleUpEvent=function(t){return!!this.getActive()&&(!this.arcs||!this.arcs.length||(this.overlayLayer_.getSource().clear(),this.dispatchEvent({type:"modifyend",coordinate:t.coordinate,originalEvent:t.originalEvent,features:this._modifiedFeatures}),this.arcs=[],!0))},J.prototype.setArcCoordinates=function(t,e){var i;switch(t.type){case"Point":t.geom.setCoordinates(e[0]);break;case"MultiPoint":i=t.geom.getCoordinates(),i[t.index]=e[0],t.geom.setCoordinates(i);break;case"LineString":t.geom.setCoordinates(e);break;case"MultiLineString":i=t.geom.getCoordinates(),i[t.lstring]=e,t.geom.setCoordinates(i);break;case"Polygon":i=t.geom.getCoordinates(),i[t.index]=e,t.geom.setCoordinates(i);break;case"MultiPolygon":i=t.geom.getCoordinates(),i[t.poly][t.index]=e,t.geom.setCoordinates(i);break;case"GeometryCollection":t.type=t.typeg;var o=t.geom,r=o.getGeometries();t.geom=r[t.g],this.setArcCoordinates(t,e),o.setGeometries(r),t.geom=o,t.type="GeometryCollection";break}},J.prototype.handleDragEvent=function(t){if(!this.getActive())return!1;if(!this.arcs)return!0;this.overlayLayer_.getSource().clear();var e=new q["a"](new E["a"](t.coordinate));return this.overlayLayer_.getSource().addFeature(e),!this.arcs.length||(this.arcs.forEach(function(e){var i=e.coord1.concat([t.coordinate],e.coord2);e.closed&&i.push(t.coordinate),this.setArcCoordinates(e,i)}.bind(this)),this.dispatchEvent({type:"modifying",coordinate:t.coordinate,originalEvent:t.originalEvent,features:this._modifiedFeatures}),!0)},J.prototype.handleMoveEvent=function(t){if(!this.getActive())return!1;this.overlayLayer_.getSource().clear();var e=this.getClosestFeature(t);if(e){var i=new q["a"](new E["a"](e.coord));this.overlayLayer_.getSource().addFeature(i)}var o=t.map.getTargetElement();this.cursor_&&(e?o.style.cursor!=this.cursor_&&(this.previousCursor_=o.style.cursor,o.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(o.style.cursor=this.previousCursor_,this.previousCursor_=void 0))},J.prototype.getCurrentFeature=function(){return this.currentFeature};var Q=J,tt=function(t){t||(t={}),this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.maxCircleCoordinates_=t.maxCircleCoordinates||100,this.features_=t.features,this.source_=t.source,this.conditionFn_=t.condition,this.squareFn_=t.squareCondition,this.centeredFn_=t.centerCondition,this.canRotate_=!1!==t.canRotate,this.geometryName_=t.geometryName,this.setSides(t.sides);var e=O(!0);this.sketch_=new X["a"],this.overlayLayer_=new j["a"]({source:new g["a"]({features:this.sketch_,useSpatialIndex:!1}),name:"DrawRegular overlay",displayInLayerSwitcher:!1,style:t.style||e}),R["a"].call(this,{handleEvent:this.handleEvent_})};Object(o["a"])(tt,R["a"]),tt.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),R["a"].prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},tt.prototype.setActive=function(t){this.reset(),R["a"].prototype.setActive.call(this,t)},tt.prototype.reset=function(){this.overlayLayer_.getSource().clear(),this.started_=!1},tt.prototype.setSides=function(t){t=parseInt(t),this.sides_=t>2?t:0},tt.prototype.canRotate=function(t){return!0!==t&&!1!==t||(this.canRotate_=t),this.canRotate_},tt.prototype.getSides=function(){return this.sides_},tt.prototype.startAngle={default:Math.PI/2,3:-Math.PI/2,4:Math.PI/4},tt.prototype.getGeom_=function(){if(this.overlayLayer_.getSource().clear(),!this.center_)return!1;var t;if(this.coord_){var e,i,o,r,n,s=this.center_,c=this.coord_;if(!this.sides_&&this.square_&&!this.centered_)return s=[(c[0]+s[0])/2,(c[1]+s[1])/2],e=[c[0]-s[0],c[1]-s[1]],o=Math.sqrt(e[0]*e[0]+e[1]*e[1]),r=new C["a"](s,o,"XY"),n=this.getMap().getPixelFromCoordinate(s),i=Math.max(100,Math.abs(n[0]-this.coordPx_[0]),Math.abs(n[1]-this.coordPx_[1])),i=Math.min(this.maxCircleCoordinates_,Math.round(i/3)),Object(a["b"])(r,i,0);var l=this.canRotate_&&this.centered_&&this.square_;if(e=[c[0]-s[0],c[1]-s[1]],this.square_&&!l){var h=Math.max(Math.abs(e[0]),Math.abs(e[1]));c=[s[0]+(e[0]>0?h:-h),s[1]+(e[1]>0?h:-h)]}if(o=Math.sqrt(e[0]*e[0]+e[1]*e[1]),o>0){var u;if(r=new C["a"](s,o,"XY"),u=l?Math.atan2(e[1],e[0]):this.startAngle[this.sides_]||this.startAngle["default"],this.sides_?t=Object(a["b"])(r,this.sides_,u):(n=this.getMap().getPixelFromCoordinate(this.center_),i=Math.max(100,Math.abs(n[0]-this.coordPx_[0]),Math.abs(n[1]-this.coordPx_[1])),i=Math.min(this.maxCircleCoordinates_,Math.round(i/(this.centered_?3:5))),t=Object(a["b"])(r,i,0)),l)return t;var p=t.getExtent();s=this.centered_?[2*this.center_[0]-this.coord_[0],2*this.center_[1]-this.coord_[1]]:this.center_;var d=(s[0]-c[0])/(p[0]-p[2]),f=(s[1]-c[1])/(p[1]-p[3]);if(this.square_){var g=Math.min(Math.abs(d),Math.abs(f));d=Math.sign(d)*g,f=Math.sign(f)*g}var y=[s[0]-p[0]*d,s[1]-p[1]*f];return t.applyTransform((function(t,e,i){for(var o=0;o<t.length;o+=i)e[o]=t[o]*d+y[0],e[o+1]=t[o+1]*f+y[1];return e})),t}}return new E["a"](this.center_)},tt.prototype.drawSketch_=function(t){if(this.overlayLayer_.getSource().clear(),t){this.square_=this.squareFn_?this.squareFn_(t):t.originalEvent.shiftKey,this.centered_=this.centeredFn_?this.centeredFn_(t):t.originalEvent.metaKey||t.originalEvent.ctrlKey;var e=this.getGeom_();if(e){var i=this.feature_;return this.geometryName_&&i.setGeometryName(this.geometryName_),"Polygon"===e.getType()&&i.getGeometry().setCoordinates(e.getCoordinates()),this.overlayLayer_.getSource().addFeature(i),this.coord_&&this.square_&&(this.canRotate_&&this.centered_&&this.coord_||!this.sides_&&!this.centered_)&&this.overlayLayer_.getSource().addFeature(new q["a"](new s["a"]([this.center_,this.coord_]))),i}}},tt.prototype.drawPoint_=function(t,e){e||this.overlayLayer_.getSource().clear(),this.overlayLayer_.getSource().addFeature(new q["a"](new E["a"](t)))},tt.prototype.handleEvent_=function(t){var e,i;switch(this._eventTime=new Date,t.type){case"pointerdown":if(this.conditionFn_&&!this.conditionFn_(t))break;this.downPx_=t.pixel,this.start_(t);var o=500;this._longTouch=!1,setTimeout(function(){this._longTouch=new Date-this._eventTime>.9*o,this._longTouch&&this.handleMoveEvent_(t)}.bind(this),o);break;case"pointerup":this.started_&&this.coord_&&(e=this.downPx_[0]-t.pixel[0],i=this.downPx_[1]-t.pixel[1],e*e+i*i<=this.squaredClickTolerance_&&("pointermove"==this.lastEvent||"keydown"==this.lastEvent?this.end_(t):(e=this.upPx_[0]-t.pixel[0],i=this.upPx_[1]-t.pixel[1],e*e+i*i<=this.squaredClickTolerance_?this.end_(t):(this.handleMoveEvent_(t),this.drawPoint_(t.coordinate,!0))))),this.upPx_=t.pixel;break;case"pointerdrag":if(this.started_){var r=this.getMap().getPixelFromCoordinate(this.center_);e=r[0]-t.pixel[0],i=r[1]-t.pixel[1],e*e+i*i<=this.squaredClickTolerance_&&this.reset()}return!this._longTouch;case"pointermove":this.started_&&(e=this.downPx_[0]-t.pixel[0],i=this.downPx_[1]-t.pixel[1],e*e+i*i>this.squaredClickTolerance_&&(this.handleMoveEvent_(t),this.lastEvent=t.type));break;default:if(this.lastEvent=t.type,this.started_&&"dblclick"===t.type)return!1;break}return!0},tt.prototype.finishDrawing=function(){this.started_&&this.coord_&&this.end_({pixel:this.upPx_,coordinate:this.coord_})},tt.prototype.handleMoveEvent_=function(t){if(this.started_){this.coord_=t.coordinate,this.coordPx_=t.pixel;var e=this.drawSketch_(t);this.dispatchEvent({type:"drawing",feature:e,pixel:t.pixel,startCoordinate:this.center_,coordinate:t.coordinate,square:this.square_,centered:this.centered_})}else this.drawPoint_(t.coordinate)},tt.prototype.start_=function(t){if(this.started_)this.coord_=t.coordinate;else{this.started_=!0,this.center_=t.coordinate,this.coord_=null;var e=new a["a"]([[t.coordinate,t.coordinate,t.coordinate]]),i=this.feature_=new q["a"](e);this.drawSketch_(t),this.dispatchEvent({type:"drawstart",feature:i,pixel:t.pixel,coordinate:t.coordinate})}},tt.prototype.end_=function(t){if(this.coord_=t.coordinate,this.started_=!1,!this.coord_||this.center_[0]===this.coord_[0]&&this.center_[1]===this.coord_[1])this.dispatchEvent({type:"drawcancel",feature:null,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_});else{var e=this.feature_;this.geometryName_&&e.setGeometryName(this.geometryName_),e.setGeometry(this.getGeom_()),this.source_?this.source_.addFeature(e):this.features_&&this.features_.push(e),this.dispatchEvent({type:"drawend",feature:e,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_})}this.center_=this.coord_=null,this.drawSketch_()};var et=tt,it=function(t){t||(t={});var e=this;this._select=new c["a"]({style:t.style}),this._select.setActive(!1);var i,o=t.geometryFunction;if(i=o?function(t,i){return i=e._geometryFn(t,i),o(t,i)}:function(t,i){return e._geometryFn(t,i)},t.type="Polygon",t.geometryFunction=i,n["a"].call(this,t),t.layers&&("function"===typeof t.layers?this.layers_=t.layers:t.layers.indexOf&&(this.layers_=function(e){return t.layers.indexOf(e)>=0})),"function"===typeof t.features)this._features=t.features;else if(t.features){var r=t.features;this._features=function(t){return r.indexOf?!!r[r.indexOf(t)]:!!r.item(r.getArray().indexOf(t))}}else this._features=function(){return!0};this.on("drawstart",this._startDrawing.bind(this)),this.on("drawend",this._finishDrawing.bind(this))};Object(o["a"])(it,n["a"]),it.prototype.setMap=function(t){this.getMap()&&this.getMap().removeInteraction(this._select),t&&t.addInteraction(this._select),n["a"].prototype.setMap.call(this,t)},it.prototype.setActive=function(t){this._select.getFeatures().clear(),n["a"].prototype.setActive.call(this,t)},it.prototype.removeLastPoint=function(){this._feature&&this._feature.getGeometry().getCoordinates()[0].length>2&&n["a"].prototype.removeLastPoint.call(this)},it.prototype.getPolygon=function(){return this._polygon},it.prototype._startDrawing=function(t){var e=this.getMap();this._feature=t.feature;var i=t.feature.getGeometry().getCoordinates()[0][0];this._current=null,e.forEachFeatureAtPixel(e.getPixelFromCoordinate(i),function(t,e){if(this._features(t,e)){var o=t.getGeometry();if("Polygon"===o.getType()&&o.intersectsCoordinate(i))this._polygonIndex=!1,this._polygon=o,this._current=t;else if("MultiPolygon"===o.getType()&&o.intersectsCoordinate(i))for(var r,n=0;r=o.getPolygon(n);n++)if(r.intersectsCoordinate(i)){this._polygonIndex=n,this._polygon=r,this._current=t;break}}}.bind(this),{layerFilter:this.layers_}),this._select.getFeatures().clear(),this._current?this._select.getFeatures().push(this._current):(this.setActive(!1),this.setActive(!0))},it.prototype._finishDrawing=function(t){t.hole=t.feature,t.feature=this._select.getFeatures().item(0),this.dispatchEvent({type:"modifystart",features:[this._current]});var e=t.hole.getGeometry().getCoordinates()[0];if(e.length>3)if(!1!==this._polygonIndex){for(var i,o=t.feature.getGeometry(),r=new L["a"]([]),n=0;i=o.getPolygon(n);n++)n===this._polygonIndex?(i.appendLinearRing(new b["a"](e)),r.appendPolygon(i)):r.appendPolygon(i);t.feature.setGeometry(r)}else this.getPolygon().appendLinearRing(new b["a"](e));this.dispatchEvent({type:"modifyend",features:[this._current]}),this._feature=null,this._select.getFeatures().clear()},it.prototype._geometryFn=function(t,e){var i=t[0].pop();return this.getPolygon()&&!this.getPolygon().intersectsCoordinate(i)||(this.lastOKCoord=[i[0],i[1]]),t[0].push([this.lastOKCoord[0],this.lastOKCoord[1]]),e?e.setCoordinates([t[0].concat([t[0][0]])]):e=new a["a"](t),e};var ot=it,rt=function(t){t=t||{},t.interactions=t.interactions||{},l["a"].call(this,{className:(t.className?t.className+" ":"")+"ol-editbar",toggleOne:!0,target:t.target}),this._source=t.source,this._interactions={},this._setSelectInteraction(t),!1!==t.edition&&this._setEditInteraction(t),this._setModifyInteraction(t)};Object(o["a"])(rt,l["a"]),rt.prototype.setMap=function(t){this.getMap()&&(this._interactions.Delete&&this.getMap().removeInteraction(this._interactions.Delete),this._interactions.ModifySelect&&this.getMap().removeInteraction(this._interactions.ModifySelect)),l["a"].prototype.setMap.call(this,t),this.getMap()&&(this._interactions.Delete&&this.getMap().addInteraction(this._interactions.Delete),this._interactions.ModifySelect&&this.getMap().addInteraction(this._interactions.ModifySelect))},rt.prototype.getInteraction=function(t){return this._interactions[t]},rt.prototype._getTitle=function(t){return t&&t.title?t.title:t},rt.prototype._setSelectInteraction=function(t){var e,i=this,o=new l["a"];if(!1!==t.interactions.Delete){t.interactions.Delete instanceof v?this._interactions.Delete=t.interactions.Delete:this._interactions.Delete=new v;var n=this._interactions.Delete;n.setActive(!1),this.getMap()&&this.getMap().addInteraction(n),o.addControl(new h["a"]({className:"ol-delete",title:this._getTitle(t.interactions.Delete)||"Delete",name:"Delete",handleClick:function(t){n.delete(e.getInteraction().getFeatures());var i={type:"select",selected:[],deselected:e.getInteraction().getFeatures().getArray().slice(),mapBrowserEvent:t.mapBrowserEvent};e.getInteraction().getFeatures().clear(),e.getInteraction().dispatchEvent(i)}}))}if(!1!==t.interactions.Info&&o.addControl(new h["a"]({className:"ol-info",name:"Info",title:this._getTitle(t.interactions.Info)||"Show informations",handleClick:function(){i.dispatchEvent({type:"info",features:e.getInteraction().getFeatures()})}})),!1!==t.interactions.Select){t.interactions.Select instanceof c["a"]?this._interactions.Select=t.interactions.Select:this._interactions.Select=new c["a"]({condition:r["e"]});var s=this._interactions.Select;e=new p({className:"ol-selection",name:"Select",title:this._getTitle(t.interactions.Select)||"Select",interaction:s,bar:o.getControls().length?o:void 0,autoActivate:!0,active:!0}),this.addControl(e),s.on("change:active",(function(){s.getFeatures().clear()}))}},rt.prototype._setEditInteraction=function(t){if(!1!==t.interactions.DrawPoint){t.interactions.DrawPoint instanceof n["a"]?this._interactions.DrawPoint=t.interactions.DrawPoint:this._interactions.DrawPoint=new n["a"]({type:"Point",source:this._source});var e=new p({className:"ol-drawpoint",name:"DrawPoint",title:this._getTitle(t.interactions.DrawPoint)||"Point",interaction:this._interactions.DrawPoint});this.addControl(e)}if(!1!==t.interactions.DrawLine){t.interactions.DrawLine instanceof n["a"]?this._interactions.DrawLine=t.interactions.DrawLine:this._interactions.DrawLine=new n["a"]({type:"LineString",source:this._source,geometryFunction:function(t,e){return e?e.setCoordinates(t):e=new s["a"](t),this.nbpts=e.getCoordinates().length,e}});var i=new p({className:"ol-drawline",title:this._getTitle(t.interactions.DrawLine)||"LineString",name:"DrawLine",interaction:this._interactions.DrawLine,bar:new l["a"]({controls:[new f({html:this._getTitle(t.interactions.UndoDraw)||"undo",title:this._getTitle(t.interactions.UndoDraw)||"delete last point",handleClick:function(){i.getInteraction().nbpts>1&&i.getInteraction().removeLastPoint()}}),new f({html:this._getTitle(t.interactions.FinishDraw)||"finish",title:this._getTitle(t.interactions.FinishDraw)||"finish",handleClick:function(){i.getInteraction().nbpts>2&&i.getInteraction().finishDrawing()}})]})});this.addControl(i)}if(!1!==t.interactions.DrawPolygon&&(t.interactions.DrawPolygon instanceof n["a"]?this._interactions.DrawPolygon=t.interactions.DrawPolygon:this._interactions.DrawPolygon=new n["a"]({type:"Polygon",source:this._source,geometryFunction:function(t,e){return this.nbpts=t[0].length,e?e.setCoordinates([t[0].concat([t[0][0]])]):e=new a["a"](t),e}}),this._setDrawPolygon("ol-drawpolygon",this._interactions.DrawPolygon,this._getTitle(t.interactions.DrawPolygon)||"Polygon","DrawPolygon",t)),!1!==t.interactions.DrawHole&&(t.interactions.DrawHole instanceof ot?this._interactions.DrawHole=t.interactions.DrawHole:this._interactions.DrawHole=new ot,this._setDrawPolygon("ol-drawhole",this._interactions.DrawHole,this._getTitle(t.interactions.DrawHole)||"Hole","DrawHole",t)),!1!==t.interactions.DrawRegular){t.interactions.DrawRegular instanceof et?this._interactions.DrawRegular=t.interactions.DrawRegular:this._interactions.DrawRegular=new et({source:this._source,sides:4});var o=this._interactions.DrawRegular,r=document.createElement("DIV"),c=m["a"].create("DIV",{parent:r});m["a"].addListener(c,["click","touchstart"],function(){var t=o.getSides()-1;t<2&&(t=2),o.setSides(t),h.textContent=t>2?t+" pts":"circle"}.bind(this));var h=m["a"].create("TEXT",{html:"4 pts",parent:r}),u=m["a"].create("DIV",{parent:r});m["a"].addListener(u,["click","touchstart"],function(){var t=o.getSides()+1;t<3&&(t=3),o.setSides(t),h.textContent=t+" pts"}.bind(this));var d=new p({className:"ol-drawregular",title:this._getTitle(t.interactions.DrawRegular)||"Regular",name:"DrawRegular",interaction:this._interactions.DrawRegular,bar:new l["a"]({controls:[new f({html:r})]})});this.addControl(d)}},rt.prototype._setDrawPolygon=function(t,e,i,o,r){var n=new p({className:t,name:o,title:i,interaction:e,bar:new l["a"]({controls:[new f({html:this._getTitle(r.interactions.UndoDraw)||"undo",title:this._getTitle(r.interactions.UndoDraw)||"undo last point",handleClick:function(){n.getInteraction().nbpts>1&&n.getInteraction().removeLastPoint()}}),new f({html:this._getTitle(r.interactions.FinishDraw)||"finish",title:this._getTitle(r.interactions.FinishDraw)||"finish",handleClick:function(){n.getInteraction().nbpts>3&&n.getInteraction().finishDrawing()}})]})});return this.addControl(n),n},rt.prototype._setModifyInteraction=function(t){if(!1!==t.interactions.ModifySelect&&!1!==t.interactions.Select&&(t.interactions.ModifySelect instanceof Q?this._interactions.ModifySelect=t.interactions.ModifySelect:this._interactions.ModifySelect=new Q({features:this.getInteraction("Select").getFeatures()}),this.getMap()&&this.getMap().addInteraction(this._interactions.ModifySelect),this._interactions.ModifySelect.setActive(this._interactions.Select.getActive()),this._interactions.Select.on("change:active",function(){this._interactions.ModifySelect.setActive(this._interactions.Select.getActive())}.bind(this))),!1!==t.interactions.Transform){t.interactions.Transform instanceof $?this._interactions.Transform=t.interactions.Transform:this._interactions.Transform=new $({addCondition:r["l"]});var e=new p({html:"<i></i>",className:"ol-transform",title:this._getTitle(t.interactions.Transform)||"Transform",name:"Transform",interaction:this._interactions.Transform});this.addControl(e)}if(!1!==t.interactions.Split){t.interactions.Split instanceof H?this._interactions.Split=t.interactions.Split:this._interactions.Split=new H({sources:this._source});var i=new p({className:"ol-split",title:this._getTitle(t.interactions.Split)||"Split",name:"Split",interaction:this._interactions.Split});this.addControl(i)}if(!1!==t.interactions.Offset){t.interactions.Offset instanceof V?this._interactions.Offset=t.interactions.Offset:this._interactions.Offset=new V({source:this._source});var o=new p({html:"<i></i>",className:"ol-offset",title:this._getTitle(t.interactions.Offset)||"Offset",name:"Offset",interaction:this._interactions.Offset});this.addControl(o)}};e["a"]=rt},d803:function(t,e,i){"use strict";var o=i("c2d3"),r=i("e300"),n=i("4334"),s=i("3e6b"),a=i("35a7"),c=i("5831");(function(){var t=c["a"].prototype.clear;c["a"].prototype.clear=function(e){this.dispatchEvent({type:"clearstart"}),t.call(this,e),this.dispatchEvent({type:"clearend"})}})();var l=function(t){t||(t={}),n["a"].call(this,{handleEvent:function(){return!0}}),this._undoStack=new r["a"],this._redoStack=new r["a"],this._undo=[],this._redo=[],this._undoStack.on("add",function(t){void 0===t.element.level?(t.element.level=this._level,t.element.level||(t.element.view={center:this.getMap().getView().getCenter(),zoom:this.getMap().getView().getZoom()},this._undo.push(t.element))):t.element.level||this._undo.push(this._redo.shift()),t.element.level||this.dispatchEvent({type:"stack:add",action:t.element}),this._reduce()}.bind(this)),this._undoStack.on("remove",function(t){t.element.level||(this._doShift?this._undo.shift():this._undo.length&&this._redo.push(this._undo.pop()),this._doClear||this.dispatchEvent({type:"stack:remove",action:t.element,shift:this._doShift}))}.bind(this)),this._block=0,this._level=0,this._doShift=!1,this._record=!0,this._defs={}};Object(o["a"])(l,n["a"]),l.prototype.define=function(t,e,i){this._defs[t]={undo:e,redo:i}},l.prototype.length=function(t){return"redo"===t?this._redo.length:this._undo.length},l.prototype.setMaxLength=function(t){t=parseInt(t),t&&t<0&&(t=0),this.set("maxLength",t),this._reduce()},l.prototype.size=function(t){return"redo"===t?this._redoStack.getLength():this._undoStack.getLength()},l.prototype.setMaxSize=function(t){t=parseInt(t),t&&t<0&&(t=0),this.set("maxSize",t),this._reduce()},l.prototype._reduce=function(){if(this.get("maxLength"))while(this.length()>this.get("maxLength"))this.shift();if(this.get("maxSize"))while(this.length()>1&&this.size()>this.get("maxSize"))this.shift()},l.prototype.getStack=function(t){return"redo"===t?this._redo:this._undo},l.prototype.push=function(t,e,i){return this._defs[t]?(this._undoStack.push({type:t,name:i,custom:!0,prop:e}),!0):(console.warn('[UndoRedoInteraction]: "'+t+'" is not defined.'),!1)},l.prototype.shift=function(){this._doShift=!0;var t=this._undoStack.removeAt(0);if(this._doShift=!1,"blockstart"===t.type){t=this._undoStack.item(0);while(this._undoStack.getLength()&&t.level>0)this._undoStack.removeAt(0),t=this._undoStack.item(0)}},l.prototype.setActive=function(t){n["a"].prototype.setActive.call(this,t),this._record=t},l.prototype.setMap=function(t){this._mapListener&&this._mapListener.forEach((function(t){Object(a["b"])(t)})),this._mapListener=[],n["a"].prototype.setMap.call(this,t),t&&(this._mapListener.push(t.on("undoblockstart",this.blockStart.bind(this))),this._mapListener.push(t.on("undoblockend",this.blockEnd.bind(this)))),this._watchSources(),this._watchInteractions()},l.prototype._watchSources=function(){var t=this.getMap();function e(t,i){return i||(i=[]),t.forEach((function(t){t instanceof s["a"]?i.push(t):t.getLayers&&e(t.getLayers(),i)})),i}if(this._sourceListener&&this._sourceListener.forEach((function(t){Object(a["b"])(t)})),this._sourceListener=[],t){var i=e(t.getLayers());i.forEach(function(t){var e=t.getSource();this._sourceListener.push(e.on(["addfeature","removefeature"],this._onAddRemove.bind(this))),this._sourceListener.push(e.on("clearstart",function(){this.blockStart("clear")}.bind(this))),this._sourceListener.push(e.on("clearend",this.blockEnd.bind(this)))}.bind(this)),this._sourceListener.push(t.getLayers().on(["add","remove"],this._watchSources.bind(this)))}},l.prototype._watchInteractions=function(){var t=this.getMap();this._interactionListener&&this._interactionListener.forEach((function(t){Object(a["b"])(t)})),this._interactionListener=[],t&&(t.getInteractions().forEach(function(t){this._interactionListener.push(t.on(["setattributestart","modifystart","rotatestart","translatestart","scalestart","deletestart","deleteend","beforesplit","aftersplit"],this._onInteraction.bind(this)))}.bind(this)),this._interactionListener.push(t.getInteractions().on(["add","remove"],this._watchInteractions.bind(this))))},l.prototype._onAddRemove=function(t){this._record&&(this._redoStack.clear(),this._redo.length=0,this._undoStack.push({type:t.type,source:t.target,feature:t.feature}))},l.prototype._onInteraction=function(t){var e=this._onInteraction[t.type];e&&e.call(this,t)},l.prototype._onInteraction.setattributestart=function(t){this.blockStart(t.target.get("name")||"setattribute");var e=Object.assign({},t.properties);t.features.forEach(function(t){var i={};for(var o in e)i[o]=t.get(o);this._undoStack.push({type:"changeattribute",feature:t,newProperties:e,oldProperties:i})}.bind(this)),this.blockEnd()},l.prototype._onInteraction.rotatestart=l.prototype._onInteraction.translatestart=l.prototype._onInteraction.scalestart=l.prototype._onInteraction.modifystart=function(t){this.blockStart(t.type.replace(/start$/,"")),t.features.forEach(function(t){this._undoStack.push({type:"changegeometry",feature:t,oldGeom:t.getGeometry().clone()})}.bind(this)),this.blockEnd()},l.prototype.blockStart=function(t){this._redoStack.clear(),this._redo.length=0,this._undoStack.push({type:"blockstart",name:t}),this._level++},l.prototype._onInteraction.beforesplit=function(){this.blockStart("split")},l.prototype._onInteraction.deletestart=function(){this.blockStart("delete")},l.prototype.blockEnd=function(){this._undoStack.push({type:"blockend"}),this._level--},l.prototype._onInteraction.aftersplit=l.prototype._onInteraction.deleteend=l.prototype.blockEnd,l.prototype._handleDo=function(t,e){if(this.getActive()){if(this._record=!1,t.custom)this._defs[t.type]?e?this._defs[t.type].undo(t.prop):this._defs[t.type].redo(t.prop):console.warn('[UndoRedoInteraction]: "'+t.type+'" is not defined.');else switch(t.type){case"addfeature":e?t.source.removeFeature(t.feature):t.source.addFeature(t.feature);break;case"removefeature":e?t.source.addFeature(t.feature):t.source.removeFeature(t.feature);break;case"changegeometry":var i=t.feature.getGeometry();t.feature.setGeometry(t.oldGeom),t.oldGeom=i;break;case"changeattribute":var o=t.newProperties,r=t.oldProperties;for(var n in r)void 0===r?t.feature.unset(n):t.feature.set(n,r[n]);t.oldProperties=o,t.newProperties=r;break;case"blockstart":this._block+=e?-1:1;break;case"blockend":this._block+=e?1:-1;break;default:console.warn('[UndoRedoInteraction]: "'+t.type+'" is not defined.')}this._block<0&&(this._block=0),this._block&&(e?this.undo():this.redo()),this._record=!0,this.dispatchEvent({type:e?"undo":"redo",action:t})}},l.prototype.undo=function(){var t=this._undoStack.item(this._undoStack.getLength()-1);t&&(this._redoStack.push(t),this._undoStack.pop(),this._handleDo(t,!0))},l.prototype.redo=function(){var t=this._redoStack.item(this._redoStack.getLength()-1);t&&(this._undoStack.push(t),this._redoStack.pop(),this._handleDo(t,!1))},l.prototype.clear=function(){this._doClear=!0,this._undo.length=this._redo.length=0,this._undoStack.clear(),this._redoStack.clear(),this._doClear=!1,this.dispatchEvent({type:"stack:clear"})},l.prototype.hasUndo=function(){return this._undoStack.getLength()},l.prototype.hasRedo=function(){return this._redoStack.getLength()};e["a"]=l},da5c:function(t,e,i){"use strict";var o=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();e["a"]=o},e300:function(t,e,i){"use strict";var o=i("835b"),r=i("e269"),n=i("183a"),s=i("cef7"),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),c={LENGTH:"length"},l=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r.element=i,r.index=o,r}return a(e,t),e}(s["a"]),h=function(t){function e(e,i){var o=t.call(this)||this;o.on,o.once,o.un;var r=i||{};if(o.unique_=!!r.unique,o.array_=e||[],o.unique_)for(var n=0,s=o.array_.length;n<s;++n)o.assertUnique_(o.array_[n],n);return o.updateLength_(),o}return a(e,t),e.prototype.clear=function(){while(this.getLength()>0)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,o=e.length;i<o;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(c.LENGTH)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new l(n["a"].ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,o=e.length;i<o;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new l(n["a"].REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new l(n["a"].REMOVE,o,t)),this.dispatchEvent(new l(n["a"].ADD,e,t))}else{for(var r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(c.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new o["a"](58)},e}(r["a"]);e["a"]=h},e887:function(t,e,i){"use strict";var o=i("c2d3"),r=i("3900"),n=i("6f9e"),s=function(t){t=t||{};var e=document.createElement("div");e.className=(t.className||"")+" ol-button ol-unselectable ol-control";var i=this,o=this.button_=document.createElement(/ol-text-button/.test(t.className)?"div":"button");o.type="button",t.title&&(o.title=t.title),t.name&&(o.name=t.name),t.html instanceof Element?o.appendChild(t.html):o.innerHTML=t.html||"";var n=function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),t.handleClick&&t.handleClick.call(i,e)};o.addEventListener("click",n),o.addEventListener("touchstart",n),e.appendChild(o),!t.title&&o.firstElementChild&&(o.title=o.firstElementChild.title),r["a"].call(this,{element:e,target:t.target}),t.title&&this.set("title",t.title),t.title&&this.set("title",t.title),t.name&&this.set("name",t.name)};Object(o["a"])(s,r["a"]),s.prototype.setVisible=function(t){t?n["a"].show(this.element):n["a"].hide(this.element)},s.prototype.setTitle=function(t){this.button_.setAttribute("title",t)},s.prototype.setHtml=function(t){n["a"].setHTML(this.button_,t)},s.prototype.getButtonElement=function(){return this.button_},e["a"]=s},f087:function(t,e,i){"use strict";var o=i("c2d3"),r=i("3900"),n=function(t){t||(t={});var e=document.createElement("div");if(e.classList.add("ol-unselectable","ol-control","ol-bar"),t.className){var i=t.className.split(" ").filter((function(t){return t.length>0}));e.classList.add.apply(e.classList,i)}if(t.group&&e.classList.add("ol-group"),r["a"].call(this,{element:e,target:t.target}),this.set("toggleOne",t.toggleOne),this.set("autoDeactivate",t.autoDeactivate),this.controls_=[],t.controls instanceof Array)for(var o=0;o<t.controls.length;o++)this.addControl(t.controls[o])};Object(o["a"])(n,r["a"]),n.prototype.setVisible=function(t){this.element.style.display=t?"":"none"},n.prototype.getVisible=function(){return"none"!=this.element.style.display},n.prototype.setMap=function(t){r["a"].prototype.setMap.call(this,t);for(var e=0;e<this.controls_.length;e++){var i=this.controls_[e];i.setMap(t)}},n.prototype.getControls=function(){return this.controls_},n.prototype.setPosition=function(t){this.element.classList.remove("ol-left","ol-top","ol-bottom","ol-right"),t=t.split("-");for(var e=0;e<t.length;e++)switch(t[e]){case"top":case"left":case"bottom":case"right":this.element.classList.add("ol-"+t[e]);break;default:break}},n.prototype.addControl=function(t){this.controls_.push(t),t.setTarget(this.element),this.getMap()&&this.getMap().addControl(t),t.on("change:active",function(e){this.onActivateControl_(e,t)}.bind(this)),t.getActive&&this.onActivateControl_({target:t,active:t.getActive()},t)},n.prototype.deactivateControls=function(t){for(var e=0;e<this.controls_.length;e++)this.controls_[e]!==t&&this.controls_[e].setActive&&this.controls_[e].setActive(!1)},n.prototype.getActiveControls=function(){for(var t,e=[],i=0;t=this.controls_[i];i++)t.getActive&&t.getActive()&&e.push(t);return e},n.prototype.setActive=function(t){if(!t&&this.get("autoDeactivate")&&this.deactivateControls(),t)for(var e,i=this.getControls(),o=0;e=i[o];o++)e.get("autoActivate")&&e.setActive(!0)},n.prototype.onActivateControl_=function(t,e){if(this.get("toggleOne"))if(t.active){var i;for(i=0;i<this.controls_.length;i++)if(this.controls_[i]===e)break;if(i==this.controls_.length)return;this.deactivateControls(this.controls_[i])}else if(!this.getActiveControls().length)for(var o,r=0;o=this.controls_[r];r++)if(o.get("autoActivate")){o.setActive(!0);break}},n.prototype.getControlsByName=function(t){var e=this.getControls();return e.filter((function(e){return e.get("name")===t}))},e["a"]=n},faaa:function(t,e,i){}}]);
//# sourceMappingURL=chunk-4844fb08.fe6899e0.js.map
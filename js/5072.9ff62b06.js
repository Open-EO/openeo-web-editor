"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[5072],{96113:(t,e,r)=>{r.d(e,{Z:()=>I});var i=r(4773),n=r(85487),o=r(94806),a=r(37195),s=r(28641),u=r(63432),h=r(33983),c=10,l=.25,d=function(){function t(t,e,r,i,n,o){this.sourceProj_=t,this.targetProj_=e;var a={},l=(0,u.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=l(t)),a[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=n*n,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&(0,s.dz)(i)==(0,s.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,s.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,s.dz)(this.targetProj_.getExtent()):null;var d=(0,s.rL)(r),_=(0,s.Xv)(r),f=(0,s.w$)(r),v=(0,s.hC)(r),g=this.transformInv_(d),p=this.transformInv_(_),m=this.transformInv_(f),T=this.transformInv_(v),E=c+(o?Math.max(0,Math.ceil((0,h.k3)((0,s.bg)(r)/(o*o*256*256)))):0);if(this.addQuad_(d,_,f,v,g,p,m,T,E),this.wrapsXInSource_){var M=1/0;this.triangles_.forEach((function(t,e,r){M=Math.min(M,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-M>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-M>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-M>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-M>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]),i=Math.max(e[0][0],e[1][0],e[2][0]);i-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,r,i,n,o){this.triangles_.push({source:[i,n,o],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,i,n,o,a,u,c){var d=(0,s.hI)([n,o,a,u]),_=this.sourceWorldWidth_?(0,s.dz)(d)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&_>.5&&_<1,g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var p=(0,s.hI)([t,e,r,i]),m=(0,s.dz)(p)/this.targetWorldWidth_;g=m>l||g}!v&&this.sourceProj_.isGlobal()&&_&&(g=_>l||g)}if(!(!g&&this.maxSourceExtent_&&isFinite(d[0])&&isFinite(d[1])&&isFinite(d[2])&&isFinite(d[3]))||(0,s.kK)(d,this.maxSourceExtent_)){var T=0;if(!g&&(!isFinite(n[0])||!isFinite(n[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])))if(c>0)g=!0;else if(T=(isFinite(n[0])&&isFinite(n[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1),1!=T&&2!=T&&4!=T&&8!=T)return;if(c>0){if(!g){var E=[(t[0]+r[0])/2,(t[1]+r[1])/2],M=this.transformInv_(E),x=void 0;if(v){var W=((0,h.$W)(n[0],f)+(0,h.$W)(a[0],f))/2;x=W-(0,h.$W)(M[0],f)}else x=(n[0]+a[0])/2-M[0];var b=(n[1]+a[1])/2-M[1],Z=x*x+b*b;g=Z>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var y=[(e[0]+r[0])/2,(e[1]+r[1])/2],P=this.transformInv_(y),I=[(i[0]+t[0])/2,(i[1]+t[1])/2],F=this.transformInv_(I);this.addQuad_(t,e,y,I,n,o,P,F,c-1),this.addQuad_(I,y,r,i,F,P,a,u,c-1)}else{var j=[(t[0]+e[0])/2,(t[1]+e[1])/2],w=this.transformInv_(j),C=[(r[0]+i[0])/2,(r[1]+i[1])/2],S=this.transformInv_(C);this.addQuad_(t,j,C,i,n,w,S,u,c-1),this.addQuad_(j,e,r,C,w,o,a,S,c-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&T)&&this.addTriangle_(t,r,i,n,a,u),0==(14&T)&&this.addTriangle_(t,r,e,n,a,o),T&&(0==(13&T)&&this.addTriangle_(e,i,t,o,u,n),0==(7&T)&&this.addTriangle_(e,i,r,o,u,a))}},t.prototype.calculateSourceExtent=function(){var t=(0,s.lJ)();return this.triangles_.forEach((function(e,r,i){var n=e.source;(0,s.Wj)(t,n[0]),(0,s.Wj)(t,n[1]),(0,s.Wj)(t,n[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();const _=d;var f,v=r(11481),g=r(69374),p=r(68326),m=[];function T(t,e,r,i,n){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(i,n),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(r,n)),t.restore()}function E(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function M(){if(void 0===f){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",T(t,4,5,4,0),T(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;f=E(e,0)||E(e,4)||E(e,8)}return f}function x(t,e,r,i){var n=(0,u.vs)(r,e,t),o=(0,u._Q)(e,i,r),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var h=t.getMetersPerUnit();void 0!==h&&(o/=h);var c=t.getExtent();if(!c||(0,s.b8)(c,n)){var l=(0,u._Q)(t,o,n)/o;isFinite(l)&&l>0&&(o/=l)}return o}function W(t,e,r,i){var n=(0,s.qg)(r),o=x(t,e,n,i);return(!isFinite(o)||o<=0)&&(0,s.H6)(r,(function(r){return o=x(t,e,r,i),isFinite(o)&&o>0})),o}function b(t,e,r,i,n,o,a,u,c,l,d,_){var f=(0,p.E4)(Math.round(r*t),Math.round(r*e),m);if(_||(0,g.f0)(f,v.$),0===c.length)return f.canvas;function T(t){return Math.round(t*r)/r}f.scale(r,r),f.globalCompositeOperation="lighter";var E=(0,s.lJ)();c.forEach((function(t,e,r){(0,s.l7)(E,t.extent)}));var x=(0,s.dz)(E),W=(0,s.Cr)(E),b=(0,p.E4)(Math.round(r*x/i),Math.round(r*W/i));_||(0,g.f0)(b,v.$);var Z=r/i;c.forEach((function(t,e,r){var i=t.extent[0]-E[0],n=-(t.extent[3]-E[3]),o=(0,s.dz)(t.extent),a=(0,s.Cr)(t.extent);t.image.width>0&&t.image.height>0&&b.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,i*Z,n*Z,o*Z,a*Z)}));var y=(0,s.rL)(a);return u.getTriangles().forEach((function(t,e,n){var a=t.source,s=t.target,u=a[0][0],c=a[0][1],l=a[1][0],d=a[1][1],v=a[2][0],g=a[2][1],p=T((s[0][0]-y[0])/o),m=T(-(s[0][1]-y[1])/o),x=T((s[1][0]-y[0])/o),W=T(-(s[1][1]-y[1])/o),Z=T((s[2][0]-y[0])/o),P=T(-(s[2][1]-y[1])/o),I=u,F=c;u=0,c=0,l-=I,d-=F,v-=I,g-=F;var j=[[l,d,0,0,x-p],[v,g,0,0,Z-p],[0,0,l,d,W-m],[0,0,v,g,P-m]],w=(0,h.SV)(j);if(w){if(f.save(),f.beginPath(),M()||!_){f.moveTo(x,W);for(var C=4,S=p-x,L=m-W,G=0;G<C;G++)f.lineTo(x+T((G+1)*S/C),W+T(G*L/(C-1))),G!=C-1&&f.lineTo(x+T((G+1)*S/C),W+T((G+1)*L/(C-1)));f.lineTo(Z,P)}else f.moveTo(x,W),f.lineTo(p,m),f.lineTo(Z,P);f.clip(),f.transform(w[0],w[2],w[1],w[3],p,m),f.translate(E[0]-I,E[3]-F),f.scale(i/r,-i/r),f.drawImage(b.canvas,0,0),f.restore()}})),d&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,u.getTriangles().forEach((function(t,e,r){var i=t.target,n=(i[0][0]-y[0])/o,a=-(i[0][1]-y[1])/o,s=(i[1][0]-y[0])/o,u=-(i[1][1]-y[1])/o,h=(i[2][0]-y[0])/o,c=-(i[2][1]-y[1])/o;f.beginPath(),f.moveTo(s,u),f.lineTo(n,a),f.lineTo(h,c),f.closePath(),f.stroke()})),f.restore()),f.canvas}var Z=r(65818),y=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),P=function(t){function e(e,r,n,o,u,c,l,d,f,v,g,p){var m=t.call(this,u,a.Z.IDLE,{interpolate:!!p})||this;m.renderEdges_=void 0!==g&&g,m.pixelRatio_=l,m.gutter_=d,m.canvas_=null,m.sourceTileGrid_=r,m.targetTileGrid_=o,m.wrappedTileCoord_=c||u,m.sourceTiles_=[],m.sourcesListenerKeys_=null,m.sourceZ_=0;var T=o.getTileCoordExtent(m.wrappedTileCoord_),E=m.targetTileGrid_.getExtent(),M=m.sourceTileGrid_.getExtent(),x=E?(0,s.Ed)(T,E):T;if(0===(0,s.bg)(x))return m.state=a.Z.EMPTY,m;var b=e.getExtent();b&&(M=M?(0,s.Ed)(M,b):b);var Z=o.getResolution(m.wrappedTileCoord_[0]),y=W(e,n,x,Z);if(!isFinite(y)||y<=0)return m.state=a.Z.EMPTY,m;var P=void 0!==v?v:i.m;if(m.triangulation_=new _(e,n,x,M,y*P,Z),0===m.triangulation_.getTriangles().length)return m.state=a.Z.EMPTY,m;m.sourceZ_=r.getZForResolution(y);var I=m.triangulation_.calculateSourceExtent();if(M&&(e.canWrapX()?(I[1]=(0,h.uZ)(I[1],M[1],M[3]),I[3]=(0,h.uZ)(I[3],M[1],M[3])):I=(0,s.Ed)(I,M)),(0,s.bg)(I)){for(var F=r.getTileRangeForExtentAndZ(I,m.sourceZ_),j=F.minX;j<=F.maxX;j++)for(var w=F.minY;w<=F.maxY;w++){var C=f(m.sourceZ_,j,w,l);C&&m.sourceTiles_.push(C)}0===m.sourceTiles_.length&&(m.state=a.Z.EMPTY)}else m.state=a.Z.EMPTY;return m}return y(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,i){e&&e.getState()==a.Z.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=a.Z.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),i="number"===typeof r?r:r[0],n="number"===typeof r?r:r[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=b(i,n,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=a.Z.LOADED}this.changed()},e.prototype.load=function(){if(this.state==a.Z.IDLE){this.state=a.Z.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,i){var o=e.getState();if(o==a.Z.IDLE||o==a.Z.LOADING){t++;var s=(0,Z.oL)(e,n.Z.CHANGE,(function(r){var i=e.getState();i!=a.Z.LOADED&&i!=a.Z.ERROR&&i!=a.Z.EMPTY||((0,Z.bN)(s),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(s)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,r){var i=t.getState();i==a.Z.IDLE&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Z.bN),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&((0,p.jy)(this.canvas_.getContext("2d")),m.push(this.canvas_),this.canvas_=null),t.prototype.release.call(this)},e}(o.Z);const I=P},4773:(t,e,r)=>{r.d(e,{j:()=>n,m:()=>i});var i=.5,n=!0},19307:(t,e,r)=>{r.d(e,{Is:()=>c,cA:()=>h,gn:()=>u});var i=r(33983),n=r(28641),o=r(65537);function a(t,e,r,i){var o=(0,n.dz)(e)/r[0],a=(0,n.Cr)(e)/r[1];return i?Math.min(t,Math.max(o,a)):Math.min(t,Math.min(o,a))}function s(t,e,r){var n=Math.min(t,e),o=50;return n*=Math.log(1+o*Math.max(0,t/e-1))/o+1,r&&(n=Math.max(n,r),n/=Math.log(1+o*Math.max(0,r/t-1))/o+1),(0,i.uZ)(n,r/2,2*e)}function u(t,e,r,n){return function(u,h,c,l){if(void 0!==u){var d=t[0],_=t[t.length-1],f=r?a(d,r,c,n):d;if(l){var v=void 0===e||e;return v?s(u,f,_):(0,i.uZ)(u,_,f)}var g=Math.min(f,u),p=Math.floor((0,o.h7)(t,g,h));return t[p]>f&&p<t.length-1?t[p+1]:t[p]}}}function h(t,e,r,n,o,u){return function(h,c,l,d){if(void 0!==h){var _=o?a(e,o,l,u):e,f=void 0!==r?r:0;if(d){var v=void 0===n||n;return v?s(h,_,f):(0,i.uZ)(h,f,_)}var g=1e-9,p=Math.ceil(Math.log(e/_)/Math.log(t)-g),m=-c*(.5-g)+.5,T=Math.min(_,h),E=Math.floor(Math.log(e/T)/Math.log(t)+m),M=Math.max(p,E),x=e/Math.pow(t,M);return(0,i.uZ)(x,f,_)}}}function c(t,e,r,n,o){return function(u,h,c,l){if(void 0!==u){var d=n?a(t,n,c,o):t,_=void 0===r||r;return _&&l?s(u,d,e):(0,i.uZ)(u,e,d)}}}},60828:(t,e,r)=>{r.d(e,{Gw:()=>s,YP:()=>o,gE:()=>a,h$:()=>n});var i=r(33983);function n(t){return void 0!==t?0:void 0}function o(t){return void 0!==t?t:void 0}function a(t){var e=2*Math.PI/t;return function(t,r){return r?t:void 0!==t?(t=Math.floor(t/e+.5)*e,t):void 0}}function s(t){var e=t||(0,i.Yr)(5);return function(t,r){return r?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}},4307:(t,e,r)=>{function i(t){return t[0]>0&&t[1]>0}function n(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}r.d(e,{Pq:()=>o,bA:()=>n,py:()=>i})}}]);
//# sourceMappingURL=5072.9ff62b06.js.map
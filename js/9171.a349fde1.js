"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[1552,9171],{39171(t,e,s){s.r(e),s.d(e,{default:()=>d});var i=function(){var t=this,e=t._self._c;return e("article",{staticClass:"vue-component stac item"},[t._t("title",function(){return[e("a",{staticClass:"anchor",attrs:{name:t.stac.id}}),e("h2",[t.properties.title?[t._v(" "+t._s(t.properties.title)+" ("),e("code",[t._v(t._s(t.stac.id))]),t._v(") ")]:[t._v(" "+t._s(t.stac.id)+" ")]],2)]},null,t.$props),t._t("before-description",null,null,t.$props),t.properties.description||t.properties.deprecated||t.stac["federation:missing"]?e("summary",{staticClass:"description"},[t.properties.description?e("Description",{attrs:{description:t.properties.description}}):t._e(),t.properties.deprecated?e("DeprecationNotice",{attrs:{entity:"item"}}):t._e(),t.stac["federation:missing"]?e("FederationMissingNotice",{attrs:{missing:t.stac["federation:missing"],federation:t.federation}}):t._e()],1):t._e(),t.thumbnails.length?e("section",{staticClass:"preview"},[e("h3",[t._v("Previews")]),e("div",{staticClass:"thumbnails"},t._l(t.thumbnails,function(t){return e("a",{key:t.href,attrs:{href:t.href,target:"_blank"}},[e("img",{attrs:{src:t.href,title:t.title,alt:t.title||"Preview"}})])}),0)]):t._e(),e("section",{staticClass:"metadata properties"},[t.thumbnails.length?e("h3",[t._v("Metadata")]):t._e(),t.stac.geometry||Array.isArray(t.stac.bbox)?t._t("location",function(){return[e("div",{staticClass:"tabular wrap"},[e("label",[t._v("Location")]),e("div",{ref:"mapContainer",staticClass:"value map"},[t.map?t._e():[t._v(" Latitudes: "+t._s(t.stac.bbox[1])+" / "+t._s(t.stac.bbox[3])+", Longitudes: "+t._s(t.stac.bbox[0])+" / "+t._s(t.stac.bbox[2])+" ")]],2)])]},{geometry:t.stac.geometry,bbox:t.stac.bbox,mapOptions:t.mapOptions}):t._e(),e("StacFields",{attrs:{type:"Item",metadata:t.stac,headingTag:"h4",ignore:t.ignoredFields}})],2),t.hasAssets?e("section",{staticClass:"assets"},[e("h3",[t._v("Assets")]),e("ul",{staticClass:"list"},t._l(t.stac.assets,function(s,i){return e("StacAsset",{key:i,attrs:{asset:s,id:i,context:t.stac}})}),1)]):t._e(),t.relatedLinks.length>0?e("section",{staticClass:"related"},[e("LinkList",{attrs:{links:t.relatedLinks,baseUrl:t.selfUrl,heading:"Related STAC entities",headingTag:"h3",action:t.onStacNavigation}})],1):t._e(),t.derivedFromLinks.length>0?e("section",{staticClass:"derived-from"},[e("LinkList",{attrs:{links:t.derivedFromLinks,baseUrl:t.selfUrl,heading:"Derived From",headingTag:"h3",action:t.onStacNavigation}})],1):t._e(),e("section",{staticClass:"links"},[e("LinkList",{attrs:{links:t.stac.links,baseUrl:t.selfUrl,heading:"See Also",headingTag:"h3",ignoreRel:["self","parent","root","license","cite-as","collection"]}})],1),t._t("end",null,null,t.$props)],2)},a=[],n=s(35254),r=s(83598),o=s(86975);const l={name:"Item",mixins:[n.A,r.A],props:{...n.A.props,...r.A.props},data(){return{ignoredFields:["title","description","deprecated","federation:missing"]}},computed:{properties(){return o.A.isObject(this.stac.properties)?this.stac.properties:{}},title(){return this.properties.title?`${this.properties.title} (${this.stac.id})`:this.stac.id},showMap(){return Boolean(this.stac.geometry)}},methods:{addFeatures(){let t=this.map.leaflet.geoJSON(this.stac);return t.setStyle({color:"#3388ff",fillOpacity:.2}),t}}},p=l;var c=s(81656),h=(0,c.A)(p,i,a,!1,null,null,null);const d=h.exports},69713(t,e,s){s.d(e,{A:()=>n});var i=s(86975),a=s(31572);const n={props:{mapOptions:{type:Object,default:()=>({}),validator:function(t){const e={height:"string",width:"string",basemap:"string",attribution:"string",wrapAroundAntimeridian:"boolean",scrollWheelZoom:"boolean"},s=Object.keys(e);return"object"==typeof t&&Object.keys(t).every(i=>-1!=s.indexOf(i)&&typeof t[i]==e[i])}}},data(){return{map:null}},computed:{leafletOptions(){return{height:this.mapOptions.height||"250px",width:this.mapOptions.width||"auto",basemap:this.mapOptions.basemap||"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:this.mapOptions.attribution||'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>',noWrap:void 0===this.mapOptions.wrapAroundAntimeridian||!this.mapOptions.wrapAroundAntimeridian,scrollWheelZoom:void 0!==this.mapOptions.scrollWheelZoom&&this.mapOptions.scrollWheelZoom}}},watch:{showMap(t){t&&this.initMap()}},beforeCreate(){i.A.enableHtmlProps(this)},mounted(){this.initMap()},methods:{initLeafletPlugins(){},async initMap(){if(this.$refs.mapContainer||await this.$nextTick(),!this.$refs.mapContainer||null!==this.map||!this.showMap)return!1;let t=window.L;try{this.map={leaflet:null,instance:null,geometries:null};let r=()=>i.A.isObject(window.L)&&a.Versions.validate(window.L.version)&&a.Versions.compare(window.L.version,"1.x.x","=");if(r()||(window.L=await Promise.resolve().then(s.t.bind(s,85525,23))),!r())return console.warn("Leaflet is not available"),!1;this.map.leaflet=window.L;let o=await s.e(6689).then(s.bind(s,16689));this.$root&&this.$root.$options.shadowRoot&&o.__inject__&&o.__inject__(this.$root.$options.shadowRoot);var e=this.map.leaflet.map(this.$refs.mapContainer,{scrollWheelZoom:this.leafletOptions.scrollWheelZoom});this.map.instance=e;var n=this.map.leaflet.tileLayer(this.leafletOptions.basemap,{name:"Basemap",attribution:this.leafletOptions.attribution,noWrap:this.leafletOptions.noWrap});return n.addTo(e),"function"===typeof this.addFeatures&&(this.map.geometries=this.addFeatures(),this.map.geometries&&this.map.geometries.addTo(e)),this.$refs.mapContainer.style.width=this.leafletOptions.width,this.$refs.mapContainer.style.height=this.leafletOptions.height,e.invalidateSize(!1),this.updateMapView(),"function"===typeof this.mapOptions.onAfterMapInit&&this.mapOptions.onAfterMapInit(e,this.map.geometries),window.L=t,!0}catch(r){return console.error(r),window.L=t,!1}},updateMapView(){if(this.map&&this.map.geometries){var t=this.map.geometries.getBounds(),e=this.map.instance.getBoundsZoom(t),s=Math.min(e,11);e>8?s-=3:e>5?s-=2:e>2&&s--,this.map.instance.fitBounds(t),this.map.instance.setZoom(s),this.map.instance.once("moveend zoomend",()=>this.map.instance.invalidateSize(!1))}}}}},83598(t,e,s){s.d(e,{A:()=>h});var i=s(86975),a=s(71321),n=s.n(a),r=s(69713);const o=["application/geo+json","application/json"],l={methods:{isStacLinkType(t,e=!1){return"undefined"===typeof t.type?!e:"string"===typeof t.type&&o.includes(t.type.toLowerCase())},getStacLinkByRel(t,e,s=!1){if(Array.isArray(t))return t.find(t=>this.isStacLinkType(t,s)&&"string"===typeof t.rel&&t.rel.toLowerCase()===e.toLowerCase())},getStacLinksByRels(t,e,s=!1){return Array.isArray(t)?t.filter(t=>this.isStacLinkType(t,s)&&"string"===typeof t.rel&&e.includes(t.rel.toLowerCase())):[]}}},p=["image/apng","image/gif","image/png","image/jpeg","image/webp"],c=["gif","png","jpg","jpeg","webp"],h={mixins:[r.A,l],components:{Description:()=>Promise.all([s.e(9559),s.e(2429)]).then(s.bind(s,29559)),DeprecationNotice:()=>s.e(9319).then(s.bind(s,19319)),LinkList:()=>s.e(495).then(s.bind(s,60495)),StacAsset:()=>Promise.all([s.e(9559),s.e(2243),s.e(2919),s.e(4432),s.e(9140),s.e(2281),s.e(4238)]).then(s.bind(s,84890)),StacFields:()=>Promise.all([s.e(2243),s.e(2919),s.e(4432),s.e(9140),s.e(2281),s.e(9909)]).then(s.bind(s,19909))},props:{data:{type:Object,default:()=>({})},onStacNavigation:{type:Function,default:null}},computed:{stac(){let t=i.A.deepClone(this.data);return n().stac(t)},thumbnails(){return i.A.isObject(this.stac.assets)?Object.values(this.stac.assets).filter(this.assetIsImage):[]},hasAssets(){return i.A.size(this.stac.assets)>0},selfUrl(){return this.getStacLinkByRel(this.stac.links,"self")?.href||null},derivedFromLinks(){return this.getStacLinksByRels(this.stac.links,["derived_from"],!0)},relatedLinks(){return this.getStacLinksByRels(this.stac.links,["related"],!0)},isItem(){return i.A.isObject(this.stac)&&"Feature"===this.stac.type&&i.A.isObject(this.stac.properties)}},watch:{data(){this.initMap()}},methods:{assetIsImage(t){let e="string"===typeof t.href?t.href.split(".").pop():"";return Array.isArray(t.roles)&&(t.roles.includes("thumbnail")||t.roles.includes("overview"))&&(p.includes(t.type)||c.includes(e))}}}}}]);
//# sourceMappingURL=9171.a349fde1.js.map
{"version":3,"file":"js/1702.4c58a600.js","mappings":"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","sources":["webpack://@openeo/web-editor/./src/components/maps/osmgeocoder.js","webpack://@openeo/web-editor/src/components/maps/GeocoderMixin.vue","webpack://@openeo/web-editor/./src/components/maps/GeocoderMixin.vue?710e","webpack://@openeo/web-editor/./src/components/maps/GeocoderMixin.vue","webpack://@openeo/web-editor/./src/components/maps/TextControl.vue","webpack://@openeo/web-editor/src/components/maps/TextControl.vue","webpack://@openeo/web-editor/./src/components/maps/TextControl.vue?ab63","webpack://@openeo/web-editor/./src/components/maps/TextControl.vue?c848","webpack://@openeo/web-editor/./src/components/viewer/MapViewer.vue","webpack://@openeo/web-editor/./src/components/maps/ChannelControl.vue","webpack://@openeo/web-editor/src/components/maps/ChannelControl.vue","webpack://@openeo/web-editor/./src/components/maps/ChannelControl.vue?3c8a","webpack://@openeo/web-editor/./src/components/maps/ChannelControl.vue?9e5e","webpack://@openeo/web-editor/src/components/maps/GeoTiffMixin.vue","webpack://@openeo/web-editor/./src/components/maps/GeoTiffMixin.vue?7e8a","webpack://@openeo/web-editor/./src/components/maps/GeoTiffMixin.vue","webpack://@openeo/web-editor/src/components/maps/WebServiceMixin.vue","webpack://@openeo/web-editor/./src/components/maps/WebServiceMixin.vue?cc1d","webpack://@openeo/web-editor/./src/components/maps/WebServiceMixin.vue","webpack://@openeo/web-editor/src/components/viewer/MapViewer.vue","webpack://@openeo/web-editor/./src/components/viewer/MapViewer.vue?b297","webpack://@openeo/web-editor/./src/components/viewer/MapViewer.vue?e73e"],"sourcesContent":["export default class OSMGeocoder {\n\tconstructor(url, geojson = false) {\n\t\tthis.url = url;\n\t\tthis.geojson = geojson;\n\t}\n\n\tgetParameters(opt) {\n\t\treturn {\n\t\t\turl: this.url,\n\t\t\tparams: {\n\t\t\t\tq: opt.query,\n\t\t\t\tformat: 'json',\n\t\t\t\tlimit: 10,\n\t\t\t\t'accept-language': 'en',\n\t\t\t\tpolygon_geojson: this.geojson ? 1 : 0,\n\t\t\t\tpolygon_threshold: 0.001,\n\t\t\t},\n\t\t};\n\t}\n\n\thandleResponse(results) {\n\t\tif (results.length === 0) {\n\t\t\treturn [];\n\t\t}\n\t\treturn results\n\t\t\t.filter(result => [\"boundary\", \"geological\", \"leisure\", \"natural\", \"place\", \"water\", \"waterway\"].includes(result.class))\n\t\t\t.map(result => ({\n\t\t\t\tlon: result.lon,\n\t\t\t\tlat: result.lat,\n\t\t\t\tbbox: result.boundingbox,\n\t\t\t\taddress: {\n\t\t\t\t\tname: result.display_name\n\t\t\t\t},\n\t\t\t\toriginal: {\n\t\t\t\t\tformatted: result.display_name,\n\t\t\t\t\tdetails: result.address,\n\t\t\t\t\tgeojson: result.geojson\n\t\t\t\t}\n\t\t\t}));\n\t}\n}","<script>\nimport Geocoder from '@kirtandesai/ol-geocoder';\nimport OSMGeocoder from './osmgeocoder';\n\nexport default {\n\tmethods: {\n\t\taddGeocoder(callback, geojson = false) {\n\t\t\tif (!this.$config.geocoder) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst options = {\n\t\t\t\tprovider: new OSMGeocoder(this.$config.geocoder, geojson),\n\t\t\t\tplaceholder: 'Search for ...',\n\t\t\t\tkeepOpen: true,\n\t\t\t\tpreventDefault: true\n\t\t\t};\n\t\t\tconst geocoder = new Geocoder('nominatim', options);\n\t\t\tgeocoder.on('addresschosen', event => {\n\t\t\t\tif (geojson) {\n\t\t\t\t\tcallback(event.place?.original?.geojson, event);\n\t\t\t\t}\n\t\t\t\telse if (event.place.bbox) {\n\t\t\t\t\tlet bbox = event.place.bbox.map(i => parseFloat(i));\n\t\t\t\t\tlet bboxOpenEO = {\n\t\t\t\t\t\twest: bbox[2],\n\t\t\t\t\t\teast: bbox[3],\n\t\t\t\t\t\tnorth: bbox[1],\n\t\t\t\t\t\tsouth: bbox[0]\n\t\t\t\t\t}\n\t\t\t\t\tcallback(bboxOpenEO, event);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallback(null, event);\t\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.map.addControl(geocoder);\n\t\t}\n\t}\n}\n</script>\n\n<style src=\"@kirtandesai/ol-geocoder/dist/ol-geocoder.min.css\"></style>\n\n<style lang=\"scss\">\n.ol-geocoder.gcd-gl-container {\n\tz-index: 0;\n\tleft: calc(0.5em - 1px) !important;\n\ttop: calc(6.125em + 8px) !important;\n\n\t.ol-control {\n\t\tbackground-color: transparent;\n\t}\n\t\n\tul.gcd-gl-result > li:nth-child(odd) {\n\t\tbackground-color: #f9f9f9;\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GeocoderMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GeocoderMixin.vue?vue&type=script&lang=js&\"","var render, staticRenderFns\nimport script from \"./GeocoderMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./GeocoderMixin.vue?vue&type=script&lang=js&\"\nimport style0 from \"@kirtandesai/ol-geocoder/dist/ol-geocoder.min.css?vue&type=style&index=0&prod&lang=css&\"\nimport style1 from \"./GeocoderMixin.vue?vue&type=style&index=1&id=643f6883&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.texts.length > 0)?_c('div',{staticClass:\"ol-unselectable ol-control value\",class:{pointer: _vm.texts.length > 1},on:{\"click\":_vm.toggle}},[_vm._v(\" \"+_vm._s(_vm.current)+\" \")]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"texts.length > 0\" class=\"ol-unselectable ol-control value\" @click=\"toggle\" :class=\"{pointer: texts.length > 1}\">\n\t\t{{ current }}\n\t</div>\n</template>\n\n<script>\nimport ControlMixin from './ControlMixin.vue';\n\nexport default {\n\tname: 'TextControl',\n\tmixins: [\n\t\tControlMixin\n\t],\n\tdata() {\n\t\treturn {\n\t\t\ti: 0\n\t\t};\t\n\t},\n\tcomputed: {\n\t\ttexts() {\n\t\t\tif (Array.isArray(this.text)) {\n\t\t\t\treturn this.text;\n\t\t\t}\n\t\t\telse if (typeof this.text === 'string' && this.text.length > 0) {\n\t\t\t\treturn [this.text];\n\t\t\t}\n\t\t\treturn [];\n\t\t},\n\t\tcurrent() {\n\t\t\tif (this.texts.length === 0) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.texts[this.i % this.text.length];\n\t\t\t}\n\t\t}\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttext: [\n\t\t\t\tString,\n\t\t\t\tArray\n\t\t\t],\n\t\t\tdefault: ''\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggle() {\n\t\t\tthis.i++;\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.value {\n\tposition: absolute;\n\ttop: 0.5em;\n\tleft: calc(2.375em + 6px);\n\tmax-width: calc(100% - 2*(2.375em + 6px));\n\tbox-sizing: border-box;\n\tbackground-color: rgba(255,255,255,0.6);\n}\n.pointer {\n\tcursor: pointer;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TextControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TextControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextControl.vue?vue&type=template&id=6d7a0f06&scoped=true&\"\nimport script from \"./TextControl.vue?vue&type=script&lang=js&\"\nexport * from \"./TextControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextControl.vue?vue&type=style&index=0&id=6d7a0f06&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d7a0f06\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Splitpanes',{staticClass:\"default-theme\",attrs:{\"horizontal\":\"\"}},[_c('Pane',{attrs:{\"id\":\"map\"}},[_c('div',{staticClass:\"map-viewer\",attrs:{\"id\":_vm.id}},[_c('ProgressControl',{ref:\"progress\",attrs:{\"map\":_vm.map}}),_c('UserLocationControl',{attrs:{\"map\":_vm.map}}),(_vm.isGeoTiff)?_c('TextControl',{attrs:{\"text\":_vm.textControlText}}):_vm._e(),(_vm.isGeoTiff && !_vm.colorMap)?_c('ChannelControl',{attrs:{\"bands\":_vm.bands,\"defaultChannels\":_vm.defaultChannels},on:{\"update\":_vm.updateGeoTiffStyle}}):_vm._e(),(_vm.loading)?_c('div',{staticClass:\"map-loading\"},[_c('i',{staticClass:\"fas fa-spinner fa-spin\"}),_c('span',[_vm._v(\"Loading map...\")])]):_vm._e()],1)]),(_vm.chart)?_c('Pane',{attrs:{\"id\":\"chart\",\"size\":33}},[_c('ScatterChart',_vm._b({attrs:{\"height\":220}},'ScatterChart',_vm.chart,false))],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.channels.length > 0),expression:\"channels.length > 0\"}],staticClass:\"ol-unselectable ol-control channels\"},[_c('table',[_c('thead',[_c('tr',[(!_vm.isGray)?_c('th',[_vm._v(\"Channel\")]):_vm._e(),(_vm.multiBand)?_c('th',[_vm._v(\"Band\")]):_vm._e(),_c('th',[_vm._v(\"Min\")]),_c('th',[_vm._v(\"Max\")])])]),_c('tbody',_vm._l((_vm.channels),function(channel,i){return _c('tr',{key:i},[(!_vm.isGray)?_c('th',[_vm._v(_vm._s(_vm.labels[i]))]):_vm._e(),(_vm.multiBand)?_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(channel.id),expression:\"channel.id\",modifiers:{\"number\":true}}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.$set(channel, \"id\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.bands),function(band){return _c('option',{key:band.id,domProps:{\"value\":band.id}},[_vm._v(_vm._s(band.name || band.id))])}),0)]):_vm._e(),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(channel.min),expression:\"channel.min\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"required\":\"\"},domProps:{\"value\":(channel.min)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(channel, \"min\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(channel.max),expression:\"channel.max\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"required\":\"\"},domProps:{\"value\":(channel.max)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(channel, \"max\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})])])}),0),(_vm.multiBand)?_c('tfoot',[_c('tr',[_c('td',{attrs:{\"colspan\":_vm.cols}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.isGray),expression:\"isGray\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.isGray)?_vm._i(_vm.isGray,null)>-1:(_vm.isGray)},on:{\"change\":function($event){var $$a=_vm.isGray,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.isGray=$$a.concat([$$v]))}else{$$i>-1&&(_vm.isGray=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.isGray=$$c}}}}),_vm._v(\" Grayscale \")])])]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-show=\"channels.length > 0\" class=\"ol-unselectable ol-control channels\">\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th v-if=\"!isGray\">Channel</th>\n\t\t\t\t\t<th v-if=\"multiBand\">Band</th>\n\t\t\t\t\t<th>Min</th>\n\t\t\t\t\t<th>Max</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr v-for=\"(channel, i) in channels\" :key=\"i\">\n\t\t\t\t\t<th v-if=\"!isGray\">{{ labels[i] }}</th>\n\t\t\t\t\t<td v-if=\"multiBand\">\n\t\t\t\t\t\t<select v-model.number=\"channel.id\">\n\t\t\t\t\t\t\t<option v-for=\"band in bands\" :key=\"band.id\" :value=\"band.id\">{{ band.name || band.id }}</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td><input type=\"number\" v-model.number=\"channel.min\" required /></td>\n\t\t\t\t\t<td><input type=\"number\" v-model.number=\"channel.max\" required /></td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t\t<tfoot v-if=\"multiBand\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td :colspan=\"cols\">\n\t\t\t\t\t\t<input type=\"checkbox\" v-model=\"isGray\" /> Grayscale\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tfoot>\n\t\t</table>\n\t</div>\n</template>\n\n<script>\nimport ControlMixin from './ControlMixin.vue';\n\nexport default {\n\tname: 'ChannelControl',\n\tmixins: [\n\t\tControlMixin\n\t],\n\tprops: {\n\t\tbands: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t},\n\t\tdefaultChannels: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t}\n\t},\n\tcomputed: {\n\t\tmultiBand() {\n\t\t\treturn this.bands.length > 1;\n\t\t},\n\t\tcols() {\n\t\t\tif (this.isGray) {\n\t\t\t\treturn this.multiBand ? 3 : 2;\n\t\t\t}\n\t\t\treturn 4;\n\t\t},\n\t\tlabels() {\n\t\t\treturn this.isGray ? ['Grayscale'] : ['Red', 'Green', 'Blue'];\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tchannels: this.defaultChannels,\n\t\t\tisGray: this.defaultChannels.length === 1 || this.bands.length === 1\n\t\t}\n\t},\n\twatch: {\n\t\tbands: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tif (this.bands.length === 1) {\n\t\t\t\t\tthis.isGray = true;\n\t\t\t\t}\n\t\t\t\tthis.updateChannels();\n\t\t\t}\n\t\t},\n\t\tisGray() {\n\t\t\tthis.updateChannels();\n\t\t\tthis.emit();\n\t\t},\n\t\tchannels: {\n\t\t\tdeep: true,\n\t\t\thandler() {\n\t\t\t\tthis.emit();\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tisValid(value) {\n\t\t\treturn (typeof value === 'number');\n\t\t},\n\t\tupdateChannels() {\n\t\t\tif (this.defaultChannels.length > 0) {\n\t\t\t\tthis.channels = this.defaultChannels;\n\t\t\t\tif (this.defaultChannels.length === 1) {\n\t\t\t\t\tthis.isGray = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.channels = this.bands\n\t\t\t\t\t.slice(0, this.isGray ? 1 : 3)\n\t\t\t\t\t.map(band => Object.assign({}, band));\n\t\t\t}\n\t\t\t// If only two channels are available, add a third one so that we have enough for RGB\n\t\t\t// If we only have one channel it is grayscale\n\t\t\tif (this.channels.length === 2) {\n\t\t\t\tthis.channels.push(Object.assign({}, this.channels[1]));\n\t\t\t}\n\t\t},\n\t\temit() {\n\t\t\tif (this.channels.filter(c => this.isValid(c.min) && this.isValid(c.max)).length > 0) {\n\t\t\t\tthis.$emit('update', 'channels', this.channels);\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.ol-control.channels {\n\tbottom: calc(22px + 1em);\n    right: 8px;\n\tposition: absolute;\n\n\tinput {\n\t\tmax-width: 4em;\n\t}\n\tselect {\n\t\tmax-width: 10em;\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChannelControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChannelControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChannelControl.vue?vue&type=template&id=0b57c6f1&\"\nimport script from \"./ChannelControl.vue?vue&type=script&lang=js&\"\nexport * from \"./ChannelControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChannelControl.vue?vue&type=style&index=0&id=0b57c6f1&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport Utils from '../../utils.js';\n\nimport TextControl from './TextControl.vue';\nimport ChannelControl from './ChannelControl.vue';\n\nimport TileLayer from 'ol/layer/WebGLTile';\nimport GeoTIFF from 'ol/source/GeoTIFF';\n\nexport default {\n\tcomponents: {\n\t\tChannelControl,\n\t\tTextControl\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttextControlText: 'Pixel Value: -',\n\t\t\tlayer: null,\n\t\t\tsource: null,\n\t\t\tcolorMap: null,\n\t\t\tnoData: [],\n\t\t\tdefaultChannels: [],\n\t\t\tchannels: [],\n\t\t\tbands: []\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapState('editor', ['appMode'])\n\t},\n\tmethods: {\n\t\tgetBandVar(i) {\n\t\t\treturn ['band', ['var', `${i}band`]];\n\t\t},\n\t\tgetFormula(i) {\n\t\t\tlet min = ['var', `${i}min`];\n\t\t\tlet max = ['var', `${i}max`];\n\t\t\tlet x = this.getBandVar(i);\n\t\t\tlet scale = ['*', ['/', ['-', x, min], ['-', max, min]], 255]; // Linear scaling from min - max to 0 - 255\n\t\t\treturn ['clamp', scale, 0, 255]; // clamp values in case we get cales < 0 or > 255\n\t\t},\n\t\tgetNoDataFormula() {\n\t\t\tlet band = this.getBandVar('alpha');\n\t\t\t// https://github.com/openlayers/openlayers/issues/13588#issuecomment-1125317573\n\t\t\t// return ['clamp', band, 0, 1];\n\t\t\t// return ['/', band, 255];\n\t\t\treturn ['case', ['==', band, 0], 0, 1];\n\t\t},\n\t\tasync addGeoTiff(geotiff, title = \"GeoTiff\") {\n\t\t\tthis.bands = geotiff.getBands();\n\t\t\tif (this.appMode && this.appMode.channels) {\n\t\t\t\tthis.defaultChannels = this.appMode.channels;\n\t\t\t}\n\t\t\tthis.colorMap = geotiff.getColorMap();\n\t\t\tthis.noData = geotiff.getNoData();\n\n\t\t\tlet source = {\n\t\t\t\tnodata: this.noData[0] // OL only supports passing one no data value\n\t\t\t};\n\t\t\tif (geotiff.getBlob()) {\n\t\t\t\tsource.blob = geotiff.getBlob();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsource.url = geotiff.getUrl();\n\t\t\t}\n\n\t\t\tthis.source = new GeoTIFF({\n\t\t\t\tinterpolate: false,\n\t\t\t\tnormalize: false,\n\t\t\t\tconvertToRGB: geotiff.convertToRGB,\n\t\t\t\tsources: [source]\n\t\t\t});\n\n\t\t\tthis.layer = new TileLayer({\n\t\t\t\tid: geotiff.getUrl(),\n\t\t\t\ttitle,\n\t\t\t\tsource: this.source,\n\t\t\t\tcacheSize: 2048 // https://github.com/openlayers/openlayers/issues/13670\n\t\t\t});\n\t\t\tthis.layer.set('events', {\n\t\t\t\tpointermove: evt => {\n\t\t\t\t\tlet pixelData = this.layer.getData(evt.pixel);\n\t\t\t\t\tlet value = Utils.displayRGBA(pixelData, this.noData, this.noData.length > 0);\n\t\t\t\t\tlet valueText = `Pixel Value: ${value}`;\n\t\t\t\t\tlet coords = this.formatCoords(evt.coordinate);\n\t\t\t\t\tthis.textControlText = [valueText, `${valueText} @ ${coords}`];\n\t\t\t\t},\n\t\t\t\tclick: evt => {\n\t\t\t\t\tlet data = this.layer.getData(evt.pixel);\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\tthis.chart = null;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdata = Array.from(data).slice(0, this.bands.length);\n\t\t\t\t\tif (data.length < 2 || data.every(x => !isFinite(x))) {\n\t\t\t\t\t\tthis.chart = null;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet coords = this.formatCoords(evt.coordinate);\n\t\t\t\t\tlet label = `Coordinate: ${coords}`;\n\n\t\t\t\t\tlet datasets = [{ label, data }];\n\n\t\t\t\t\tthis.chart = {\n\t\t\t\t\t\tlabels: this.bands.map(band => String(band.name || band.id)),\n\t\t\t\t\t\tdatasets\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.addLayerToMap(this.layer);\n\n\t\t\tlet extent = geotiff.getExtent();\n\t\t\tif (extent) {\n\t\t\t\tthis.map.getView().fit(extent, this.getFitOptions(10));\n\t\t\t}\n\n\t\t\t// Hack to get the initial style set.\n\t\t\t// Not sure yet why this needs a delay -> TODO\n\t\t\tawait new Promise(r => setTimeout(r, 1250));\n\t\t\tthis.setStyle();\n\n\t\t\treturn this.source;\n\t\t},\n\t\tformatCoords(coords) {\n\t\t\treturn coords.map(x => String(parseFloat(x.toFixed(6)))).join(', ');\n\t\t},\n\t\tupdateGeoTiffStyle(type, data) {\n\t\t\tswitch(type) {\n\t\t\t\tcase 'channels':\n\t\t\t\t\tthis.channels = data;\n\t\t\t\t\tthis.setOptions('channels', data);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.setStyle();\n\t\t},\n\t\tsetStyle() {\n\t\t\tif (!this.layer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Compute variables\n\t\t\tlet variables = {};\n\t\t\tfor(let i in this.channels) {\n\t\t\t\tlet channel = this.channels[i];\n\t\t\t\tvariables[`${i}band`] = channel.id;\n\t\t\t\tvariables[`${i}min`] = channel.min;\n\t\t\t\tvariables[`${i}max`] = channel.max;\n\t\t\t}\n\t\t\tvariables.alphaband = this.bands.length + 1;\n\n\t\t\t// Create style\n\t\t\tlet color = [];\n\t\t\tif (this.colorMap) {\n\t\t\t\tcolor.push('palette');\n\t\t\t\tcolor.push(['band', 1]);\n\t\t\t\tcolor.push(this.colorMap);\n\t\t\t}\n\t\t\telse if (this.channels.length === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (this.channels.length === 1) {\n\t\t\t\tcolor.push('color');\n\t\t\t\tlet formula = this.getFormula(0);\n\t\t\t\tcolor.push(formula);\n\t\t\t\tcolor.push(formula);\n\t\t\t\tcolor.push(formula);\n\t\t\t\tif (this.noData.length > 0) {\n\t\t\t\t\tcolor.push(this.getNoDataFormula());\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor.push('color');\n\t\t\t\tcolor.push(this.getFormula(0));\n\t\t\t\tcolor.push(this.getFormula(1));\n\t\t\t\tcolor.push(this.getFormula(2));\n\t\t\t\tif (this.noData.length > 0) {\n\t\t\t\t\tcolor.push(this.getNoDataFormula());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set style\n\t\t\tthis.layer.setStyle({variables, color});\n\t\t}\n\t}\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GeoTiffMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GeoTiffMixin.vue?vue&type=script&lang=js&\"","var render, staticRenderFns\nimport script from \"./GeoTiffMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./GeoTiffMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport Utils from '../../utils.js';\n\nimport Collection from 'ol/Collection';\nimport LayerGroup from 'ol/layer/Group';\nimport TileLayer from 'ol/layer/Tile';\nimport XYZ from 'ol/source/XYZ';\nimport WMTSCapabilities from 'ol/format/WMTSCapabilities';\nimport WMTS, {optionsFromCapabilities} from 'ol/source/WMTS';\n\nimport 'ol-ext/control/Timeline.css';\nimport Timeline from 'ol-ext/control/Timeline';\n\nimport ExtentMixin from './ExtentMixin.vue';\n\nexport default {\n\tmixins: [ExtentMixin],\n\tdata() {\n\t\treturn {\n\t\t\tWMTSCapabilities: {},\n\t\t\ttimeline: null,\n\t\t}\n\t},\n\tmethods: {\n\t\tasync addWebService(service) {\n\t\t\tswitch(service.type.toLowerCase()) {\n\t\t\t\tcase 'xyz':\n\t\t\t\t\treturn this.updateXYZLayer(service);\n\t\t\t\tcase 'wmts':\n\t\t\t\t\treturn await this.updateWMTSLayer(service);\n\t\t\t\tdefault:\n\t\t\t\t\tUtils.error(this, 'Sorry, this web service type is not supported.');\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\n\t\tgetWMTSTimes(capabilities, layerId) {\n\t\t\tconst layers = capabilities.Contents.Layer || [];\n\t\t\tlet layer = layers.find(l => l.Identifier == layerId);\n\t\t\tif (!layer || !layer.Dimension) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tlet timeDimension = layer.Dimension.find(d => d.Identifier === 'TIME');\n\t\t\tif (!timeDimension) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn timeDimension.Value.sort();\n\t\t},\n\n\t\tasync initWMTSLayer(service) {\n\t\t\tif (!this.WMTSCapabilities[service.url]) {\n\t\t\t\ttry {\n\t\t\t\t\tlet url = new URL(service.url);\n\t\t\t\t\turl.searchParams.set('service', 'wmts');\n\t\t\t\t\turl.searchParams.set('request', 'GetCapabilities');\n\t\t\t\t\tlet response = await axios.get(url.toString(), { responseType: 'text' });\n\t\t\t\t\tvar parser = new WMTSCapabilities();\n\t\t\t\t\tthis.WMTSCapabilities[service.url] = parser.read(response.data);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tUtils.exception(this, error, \"WMTS Discovery failed\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.WMTSCapabilities[service.url];\n\t\t},\n\n\t\tasync updateWMTSLayer(service, prefix = \"Service\") {\n\t\t\tlet attrs = service.attributes || {};\n\n\t\t\tlet capabilities = await this.initWMTSLayer(service);\n\t\t\tif (!capabilities) {\n\t\t\t\tUtils.exception(this, error, \"WMTS Discovery failed\");\n\t\t\t}\n\n\t\t\tlet minDate = null;\n\t\t\tlet maxDate = null;\n\t\t\tlet defaultDate = null;\n\t\t\tlet source = null;\n\t\t\tlet title = Utils.getResourceTitle(service, prefix);\n\t\t\tlet layerCollection = new Collection();\n\t\t\tlet layerNames;\n\t\t\tif (Array.isArray(attrs.layers)) {\n\t\t\t\tlayerNames = attrs.layers;\n\t\t\t}\n\t\t\telse if (Array.isArray(capabilities.Contents.Layer)) {\n\t\t\t\tlayerNames = layers.map(l => l.Identifier);\n\t\t\t}\n\t\t\tfor(let layer of layerNames) {\n\t\t\t\tif (!layer) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet options = optionsFromCapabilities(capabilities, {\n\t\t\t\t\tlayer,\n\t\t\t\t\tmatrixSet: 'EPSG:3857'\n\t\t\t\t});\n\t\t\t\tif (!defaultDate) {\n\t\t\t\t\tdefaultDate = new Date(options.dimensions.TIME);\n\t\t\t\t}\n\n\t\t\t\tlet times = this.getWMTSTimes(capabilities, layer);\n\t\t\t\tif (times.length) {\n\t\t\t\t\tlet min = new Date(times[0]);\n\t\t\t\t\tlet max = new Date(times[times.length -1]);\n\t\t\t\t\tif (!minDate || min < minDate) {\n\t\t\t\t\t\tminDate = min;\n\t\t\t\t\t}\n\t\t\t\t\tif (!maxDate || max > maxDate) {\n\t\t\t\t\t\tmaxDate = max;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Utils.isObject(attrs.dimensions)) {\n\t\t\t\t\tObject.assign(options.dimensions, service.attributes.dimensions);\n\t\t\t\t}\n\t\t\t\tsource = new WMTS(options);\n\t\t\t\tvar mapLayer = new TileLayer({\n\t\t\t\t\ttitle,\n\t\t\t\t\tsource: this.trackTileProgress(source),\n\t\t\t\t\tnoSwitcherDelete: true\n\t\t\t\t});\n\t\t\t\tlayerCollection.push(mapLayer);\n\t\t\t}\n\n\t\t\tif (minDate && maxDate) {\n\t\t\t\tthis.timeline = new Timeline({\n\t\t\t\t\tclassName: 'ol-pointer',\n\t\t\t\t\tgraduation: 'day',\n\t\t\t\t\tminDate: minDate,\n\t\t\t\t\tmaxDate: maxDate\n\t\t\t\t});\n\t\t\t\tlet run;\n\t\t\t\tthis.timeline.on('scroll', function(e) {\n\t\t\t\t\tif (!e.date || e.date > maxDate || e.date < minDate) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (run) {\n\t\t\t\t\t\twindow.clearTimeout(run);\n\t\t\t\t\t}\n\t\t\t\t\trun = window.setTimeout(() => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet date = e.date.toISOString().substr(0, 10);\n\t\t\t\t\t\t\tsource.updateDimensions({\n\t\t\t\t\t\t\t\tTIME: date\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet btns = document.getElementsByClassName('timeline-date-label');\n\t\t\t\t\t\t\tbtns[0].innerText = date;\n\t\t\t\t\t\t\tbtns[0].disabled = true;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trun = null;\n\t\t\t\t\t}, 500);\n\t\t\t\t});\n\t\t\t\tthis.map.addControl(this.timeline);\n\n\t\t\t\tthis.timeline.addButton({\n\t\t\t\t\tclassName: 'timeline-date-label',\n\t\t\t\t\ttitle: `The date that is shown on the map for the collection '${title}'`,\n\t\t\t\t\thtml: 'No date'\n\t\t\t\t});\n\t\t\t\tthis.timeline.setDate(defaultDate);\n\t\t\t}\n\n\t\t\tlet group = new LayerGroup({\n\t\t\t\tid: service.id,\n\t\t\t\ttitle,\n\t\t\t\tlayers: layerCollection\n\t\t\t});\n\t\t\tgroup.on('change:visible',  () => {\n\t\t\t\tif (this.timeline && this.timeline.element) {\n\t\t\t\t\t// Remove time selector on Map if not required any more https://github.com/Open-EO/openeo-web-editor/issues/207\n\t\t\t\t\tthis.timeline.element.style.display = group.getVisible() ? 'block' : 'none';\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.addLayerToMap(group);\n\n\t\t\tif (this.timeline) {\n\t\t\t\tthis.map.getLayers().on('remove', event => {\n\t\t\t\t\tif (event.element === group) {\n\t\t\t\t\t\tthis.map.removeControl(this.timeline);\n\t\t\t\t\t\tthis.timeline = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn group;\n\t\t},\n\n\t\tupdateXYZLayer(service, prefix = \"Service\") {\n\t\t\t// Replace/add a query parameter with a unique ID so that OpenLayers doesn't load tiles from cache\n\t\t\tlet url = Utils.replaceParam(service.url, '__editorSessionId', new Date().getTime()).replace(/%7B/g, '{').replace(/%7D/g, '}');\n\t\t\tlet title = Utils.getResourceTitle(service, prefix);\n\t\t\tlet layer = new TileLayer({\n\t\t\t\ttitle,\n\t\t\t\tsource: this.trackTileProgress(new XYZ({\n\t\t\t\t\turl\n\t\t\t\t})),\n\t\t\t\tnoSwitcherDelete: true\n\t\t\t});\n\t\t\tlet group = new LayerGroup({\n\t\t\t\tid: service.id,\n\t\t\t\ttitle,\n\t\t\t\tlayers: [\n\t\t\t\t\tlayer\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.addLayerToMap(group);\n\n\t\t\t// Try to detect a bounding box and fit the view to it\n\t\t\tif (Utils.isObject(service.process) && Utils.isObject(service.process.process_graph)) {\n\t\t\t\tconst crs84 = \"urn:ogc:def:crs:OGC:1.3:CRS84\";\n\t\t\t\tconst e4326 = \"EPSG:4326\";\n\t\t\t\tObject.values(service.process.process_graph)\n\t\t\t\t\t.filter(node => node.process_id === 'load_collection' && Utils.isObject(node.arguments) && node.arguments.spatial_extent)\n\t\t\t\t\t.forEach(node => {\n\t\t\t\t\t\tlet e = node.arguments.spatial_extent;\n\t\t\t\t\t\tlet isBBox = (e.west || e.east || e.south || e.north) && (!e.crs || e.crs === 4326 || e.crs === e4326);\n\t\t\t\t\t\tlet isGeoJSON = e.type && (!e.crs || (Utils.isObject(e.crs) && e.crs.type === \"name\" && (e.crs.properties?.name === e4326 || e.properties?.name === crs84)));\n\t\t\t\t\t\tif (isBBox || isGeoJSON) {\n\t\t\t\t\t\t\tthis.addExtent(e, false);\n\t\t\t\t\t\t\t// ToDo: This should be combined into just a single call to addExtent to fit the view to the full extents\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn group;\n\t\t}\n\t}\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WebServiceMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WebServiceMixin.vue?vue&type=script&lang=js&\"","var render, staticRenderFns\nimport script from \"./WebServiceMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./WebServiceMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<Splitpanes horizontal class=\"default-theme\">\n\t\t<Pane id=\"map\">\n\t\t\t<div :id=\"id\" class=\"map-viewer\">\n\t\t\t\t<ProgressControl ref=\"progress\" :map=\"map\" />\n\t\t\t\t<UserLocationControl :map=\"map\" />\n\t\t\t\t<TextControl v-if=\"isGeoTiff\" :text=\"textControlText\" />\n\t\t\t\t<ChannelControl v-if=\"isGeoTiff && !colorMap\" :bands=\"bands\" :defaultChannels=\"defaultChannels\" @update=\"updateGeoTiffStyle\" />\n\t\t\t\t<div v-if=\"loading\" class=\"map-loading\">\n\t\t\t\t\t<i class=\"fas fa-spinner fa-spin\"></i>\n\t\t\t\t\t<span>Loading map...</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Pane>\n\t\t<Pane v-if=\"chart\" id=\"chart\" :size=\"33\">\n\t\t\t<ScatterChart v-bind=\"chart\" :height=\"220\" />\n\t\t</Pane>\n\t</Splitpanes>\n</template>\n\n<script>\nimport { GeoTIFFImage } from 'geotiff';\n\nimport Utils from '../../utils.js';\nimport GeoTIFF from '../../formats/geotiff';\nimport JSON_ from '../../formats/json';\n\nimport { Splitpanes, Pane } from 'splitpanes';\n\nimport ExtentMixin from '../maps/ExtentMixin.vue';\nimport GeocoderMixin from '../maps/GeocoderMixin.vue';\nimport GeoTiffMixin from '../maps/GeoTiffMixin.vue';\nimport MapMixin from '../maps/MapMixin.vue';\nimport ScatterChart from './ScatterChart.vue';\nimport WebServiceMixin from '../maps/WebServiceMixin.vue';\n\nimport { Service } from '@openeo/js-client';\n\nimport Feature from 'ol/Feature';\nimport { fromExtent as PolygonFromExtent } from 'ol/geom/Polygon';\nimport { transformExtent } from 'ol/proj';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\n\n// Integrate changes/fixes from https://github.com/geotiffjs/geotiff.js/pull/303 until released/integrated by geotiff.js\nGeoTIFFImage.prototype.getSampleByteSize = function(i) {\n    if (!this.fileDirectory.BitsPerSample || this.fileDirectory.BitsPerSample.length === 0) {\n      return;\n    }\n    if (i >= this.fileDirectory.BitsPerSample.length) {\n      i = 0;\n    }\n    return Math.ceil(this.fileDirectory.BitsPerSample[i] / 8);\n};\n\nGeoTIFFImage.prototype.getReaderForSample = function(sampleIndex) {\n    const format = this.getSampleFormat(sampleIndex);\n    const bitsPerSample = this.getBitsPerSample(sampleIndex);\n    switch (format) {\n      case 1: // unsigned integer data\n        if (bitsPerSample <= 8) {\n          return DataView.prototype.getUint8;\n        } else if (bitsPerSample <= 16) {\n          return DataView.prototype.getUint16;\n        } else if (bitsPerSample <= 32) {\n          return DataView.prototype.getUint32;\n        }\n        break;\n      case 2: // twos complement signed integer data\n        if (bitsPerSample <= 8) {\n          return DataView.prototype.getInt8;\n        } else if (bitsPerSample <= 16) {\n          return DataView.prototype.getInt16;\n        } else if (bitsPerSample <= 32) {\n          return DataView.prototype.getInt32;\n        }\n        break;\n      case 3:\n        switch (bitsPerSample) {\n          case 16:\n            return function (offset, littleEndian) {\n              return getFloat16(this, offset, littleEndian);\n            };\n          case 32:\n            return DataView.prototype.getFloat32;\n          case 64:\n            return DataView.prototype.getFloat64;\n          default:\n            break;\n        }\n        break;\n      default:\n        break;\n    }\n    throw Error('Unsupported data format/bitsPerSample');\n};\n\nGeoTIFFImage.prototype.getSampleFormat = function(sampleIndex = 0) {\n    if (!this.fileDirectory.SampleFormat || this.fileDirectory.SampleFormat.length === 0) {\n      return 1;\n    }\n    return typeof this.fileDirectory.SampleFormat[sampleIndex] !== 'undefined'\n      ? this.fileDirectory.SampleFormat[sampleIndex] : this.fileDirectory.SampleFormat[0];\n};\n\nGeoTIFFImage.prototype.getBitsPerSample = function(sampleIndex = 0) {\n    if (!this.fileDirectory.BitsPerSample || this.fileDirectory.BitsPerSample.length === 0) {\n      return;\n    }\n    return typeof this.fileDirectory.BitsPerSample[sampleIndex] !== 'undefined'\n      ? this.fileDirectory.BitsPerSample[sampleIndex] : this.fileDirectory.BitsPerSample[0];\n};\n// End of geotiff.js fixes\n\nexport default {\n\tname: 'MapViewer',\n\tmixins: [\n\t\tExtentMixin,\n\t\tGeocoderMixin,\n\t\tGeoTiffMixin,\n\t\tMapMixin,\n\t\tWebServiceMixin\n\t],\n\tcomponents: {\n\t\tPane,\n\t\tScatterChart,\n\t\tSplitpanes,\n\t},\n\tprops: {\n\t\tdata: {}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tchart: null\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection']),\n\t\tisWebService() {\n\t\t\treturn this.data instanceof Service && typeof this.data.type === 'string';\n\t\t},\n\t\tisGeoTiff() {\n\t\t\treturn this.data instanceof GeoTIFF;\n\t\t},\n\t\tisGeoJson() {\n\t\t\treturn this.data instanceof JSON_ && this.data.isGeoJson;\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$emit('mounted', this);\n\t},\n\tmethods: {\n\t\tasync renderMap() {\n\t\t\ttry {\n\t\t\t\tlet view;\n\t\t\t\tlet data;\n\t\t\t\tif (this.isGeoJson) {\n\t\t\t\t\tdata = await this.data.loadData(this.connection);\n\t\t\t\t}\n\t\t\t\telse if (this.isGeoTiff) {\n\t\t\t\t\tdata = await this.data.loadData(this.connection);\n\t\t\t\t\tlet projection = data.getProjection();\n\t\t\t\t\tif (projection) {\n\t\t\t\t\t\tview = projection;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (this.isWebService && Utils.isMapServiceSupported(this.data.type)) {\n\t\t\t\t\tif (this.data.type.toLowerCase() === 'wmts') {\n\t\t\t\t\t\tlet capabilities = await this.initWMTSLayer(this.data);\n\t\t\t\t\t\t// ToDo: Right now we assume Web Mercator is always available, better check the capabilities...\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error(\"Sorry, the given data can't be shown on a web map.\");\n\t\t\t\t}\n\n\t\t\t\tawait this.createMap(view);\n\t\t\t\tthis.addLayerSwitcher();\n\t\t\t\tthis.addGeocoder(data => {\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet extent = this.toExtent(data);\n\t\t\t\t\textent = transformExtent(extent, 'EPSG:4326', this.map.getView().getProjection());\n\t\t\t\t\tthis.map.getView().fit(extent, this.getFitOptions());\n\t\t\t\t});\n\n\t\t\t\tif (this.isGeoJson) {\n\t\t\t\t\tthis.addBasemaps();\n\t\t\t\t\tthis.addGeoJson(data, true);\n\t\t\t\t}\n\t\t\t\telse if (this.isGeoTiff) {\n\t\t\t\t\tlet proj = this.map.getView().getProjection();\n\t\t\t\t\tif (proj.basemap || ['EPSG:3857', 'EPSG:4326'].includes(proj.getCode())) {\n\t\t\t\t\t\tthis.addBasemaps();\n\t\t\t\t\t}\n\t\t\t\t\tthis.addGeoTiff(data);\n\t\t\t\t\tlet stac = this.data.getContext();\n\t\t\t\t\tif (stac) {\n\t\t\t\t\t\tthis.addExtent(stac, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (this.isWebService && Utils.isMapServiceSupported(this.data.type)) {\n\t\t\t\t\tthis.addBasemaps();\n\t\t\t\t\tthis.addWebService(this.data);\n\t\t\t\t}\n\n\t\t\t\tif (this.$listeners && this.$listeners.drop) {\n\t\t\t\t\tthis.map.getViewport().addEventListener('dragover', event => event.preventDefault());\n\t\t\t\t\tthis.map.getViewport().addEventListener('drop', this.$listeners.drop);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\n\t\t\tthis.loading = false;\n\t\t},\n\n\t\tasync addCollection() {\n\t\t\tlet layer = this.showWebService(this.data);\n\t\t\t// Fit to extent of collection\n\t\t\ttry {\n\t\t\t\tlet bbox = service.attributes.bbox;\n\t\t\t\tlet extent = [...this.fromLonLat([bbox.west, bbox.south]), ...this.fromLonLat([bbox.east, bbox.north])];\n\t\t\t\tlet extentLayer = new VectorLayer({\n\t\t\t\t\ttitle: \"Extent\",\n\t\t\t\t\tnoSwitcherDelete: true,\n\t\t\t\t\tsource: new VectorSource({\n\t\t\t\t\t\tfeatures: [\n\t\t\t\t\t\t\tnew Feature(PolygonFromExtent(extent))\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprojection: \"EPSG:4326\",\n\t\t\t\t\t\twrapX: false\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\n\t\t\t\tthis.removeLayerFill(extentLayer);\n\t\t\t\tlayer.getLayers().push(extentLayer);\n\n\t\t\t\tthis.map.getView().fit(extent, this.getFitOptions(10));\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t}\n\t}\n\n}\n</script>\n\n<style src=\"../maps/MapMixin.scss\" lang=\"scss\"></style>\n\n<style lang=\"scss\">\n.map-viewer {\n\tposition: relative;\n\n\t.map-loading {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tbackground-color: rgba(0,0,0,0.6);\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: 9999;\n\t\tcolor: white;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tflex-direction: column;\n\n\t\t> i {\n\t\t\tfont-size: 2em;\n\t\t}\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapViewer.vue?vue&type=template&id=4201632c&\"\nimport script from \"./MapViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./MapViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"../maps/MapMixin.scss?vue&type=style&index=0&prod&lang=scss&\"\nimport style1 from \"./MapViewer.vue?vue&type=style&index=1&id=4201632c&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["OSMGeocoder","constructor","url","geojson","this","getParameters","opt","params","q","query","format","limit","polygon_geojson","polygon_threshold","handleResponse","results","length","filter","result","includes","class","map","lon","lat","bbox","boundingbox","address","name","display_name","original","formatted","details","methods","addGeocoder","callback","$config","geocoder","options","provider","placeholder","keepOpen","preventDefault","Geocoder","on","event","place","i","parseFloat","bboxOpenEO","west","east","north","south","addControl","render","staticRenderFns","component","_vm","_c","_self","texts","staticClass","pointer","toggle","_v","_s","current","_e","mixins","ControlMixin","data","computed","Array","isArray","text","props","String","default","attrs","id","ref","isGeoTiff","textControlText","colorMap","bands","defaultChannels","updateGeoTiffStyle","loading","chart","_b","directives","rawName","value","channels","expression","isGray","multiBand","_l","channel","key","labels","modifiers","$event","$$selectedVal","prototype","call","target","o","selected","val","_value","_n","$set","multiple","band","domProps","min","composing","$forceUpdate","max","cols","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","type","watch","immediate","handler","updateChannels","emit","deep","isValid","Object","assign","push","c","$emit","components","ChannelControl","TextControl","layer","source","noData","Utils","getBandVar","getFormula","x","scale","getNoDataFormula","geotiff","title","getBands","appMode","getColorMap","getNoData","nodata","getBlob","blob","getUrl","GeoTIFF","interpolate","normalize","convertToRGB","sources","TileLayer","cacheSize","set","pointermove","evt","pixelData","getData","pixel","valueText","coords","formatCoords","coordinate","click","from","every","isFinite","label","datasets","addLayerToMap","extent","getExtent","getView","fit","getFitOptions","Promise","r","setTimeout","setStyle","toFixed","join","setOptions","variables","alphaband","color","formula","ExtentMixin","WMTSCapabilities","timeline","service","toLowerCase","updateXYZLayer","updateWMTSLayer","getWMTSTimes","capabilities","layerId","layers","Contents","Layer","find","l","Identifier","Dimension","timeDimension","d","Value","sort","URL","searchParams","response","axios","get","toString","responseType","parser","read","error","prefix","attributes","initWMTSLayer","layerNames","minDate","maxDate","defaultDate","layerCollection","Collection","optionsFromCapabilities","matrixSet","Date","dimensions","TIME","times","WMTS","mapLayer","trackTileProgress","noSwitcherDelete","run","Timeline","className","graduation","e","date","window","clearTimeout","toISOString","substr","updateDimensions","btns","document","getElementsByClassName","innerText","disabled","console","log","addButton","html","setDate","group","LayerGroup","element","style","display","getVisible","getLayers","removeControl","getTime","replace","XYZ","process","process_graph","crs84","e4326","values","node","process_id","arguments","spatial_extent","forEach","isBBox","crs","isGeoJSON","properties","addExtent","GeoTIFFImage","fileDirectory","BitsPerSample","Math","ceil","sampleIndex","getSampleFormat","bitsPerSample","getBitsPerSample","DataView","getUint8","getUint16","getUint32","getInt8","getInt16","getInt32","offset","littleEndian","getFloat16","getFloat32","getFloat64","Error","SampleFormat","GeocoderMixin","GeoTiffMixin","MapMixin","WebServiceMixin","Pane","ScatterChart","Splitpanes","isWebService","Service","isGeoJson","JSON_","mounted","view","loadData","connection","projection","getProjection","createMap","addLayerSwitcher","toExtent","transformExtent","addBasemaps","addGeoJson","proj","basemap","getCode","addGeoTiff","stac","getContext","addWebService","$listeners","drop","getViewport","addEventListener","showWebService","fromLonLat","extentLayer","VectorLayer","VectorSource","features","Feature","PolygonFromExtent","wrapX","removeLayerFill"],"sourceRoot":""}
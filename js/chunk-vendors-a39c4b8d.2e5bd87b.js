"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[7263],{70453:(e,t,r)=>{var i,n=r(79612),o=r(69383),s=r(41237),a=r(79290),l=r(79538),h=r(58068),c=r(69675),f=r(35345),u=r(71514),p=r(58968),y=r(6188),g=r(68002),d=r(75880),w=Function,m=function(e){try{return w('"use strict"; return ('+e+").constructor;")()}catch(t){}},b=r(75795),A=r(30655),S=function(){throw new c},P=b?function(){try{return S}catch(e){try{return b(arguments,"callee").get}catch(t){return S}}}():S,I=r(64039)(),D=r(7176),E="function"===typeof Reflect&&Reflect.getPrototypeOf||n.getPrototypeOf||D,F=r(11002),T=r(10076),M={},U="undefined"!==typeof Uint8Array&&E?E(Uint8Array):i,R={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":I&&E?E([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":M,"%AsyncGenerator%":M,"%AsyncGeneratorFunction%":M,"%AsyncIteratorPrototype%":M,"%Atomics%":"undefined"===typeof Atomics?i:Atomics,"%BigInt%":"undefined"===typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":s,"%Float32Array%":"undefined"===typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":w,"%GeneratorFunction%":M,"%Int8Array%":"undefined"===typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":I&&E?E(E([][Symbol.iterator]())):i,"%JSON%":"object"===typeof JSON?JSON:i,"%Map%":"undefined"===typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&I&&E?E((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":n,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?i:Promise,"%Proxy%":"undefined"===typeof Proxy?i:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":"undefined"===typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&I&&E?E((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":I&&E?E(""[Symbol.iterator]()):i,"%Symbol%":I?Symbol:i,"%SyntaxError%":h,"%ThrowTypeError%":P,"%TypedArray%":U,"%TypeError%":c,"%Uint8Array%":"undefined"===typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?i:Uint32Array,"%URIError%":f,"%WeakMap%":"undefined"===typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?i:WeakSet,"%Function.prototype.call%":T,"%Function.prototype.apply%":F,"%Object.defineProperty%":A,"%Math.abs%":u,"%Math.floor%":p,"%Math.max%":y,"%Math.min%":g,"%Math.pow%":d};if(E)try{null.error}catch(z){var C=E(E(z));R["%Error.prototype%"]=C}var k=function e(t){var r;if("%AsyncFunction%"===t)r=m("async function () {}");else if("%GeneratorFunction%"===t)r=m("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=m("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&E&&(r=E(n.prototype))}return R[t]=r,r},G={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},O=r(66743),x=r(9957),_=O.call(T,Array.prototype.concat),B=O.call(F,Array.prototype.splice),v=O.call(T,String.prototype.replace),L=O.call(T,String.prototype.slice),N=O.call(T,RegExp.prototype.exec),V=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,K=function(e){var t=L(e,0,1),r=L(e,-1);if("%"===t&&"%"!==r)throw new h("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new h("invalid intrinsic syntax, expected opening `%`");var i=[];return v(e,V,(function(e,t,r,n){i[i.length]=r?v(n,$,"$1"):t||e})),i},j=function(e,t){var r,i=e;if(x(G,i)&&(r=G[i],i="%"+r[0]+"%"),x(R,i)){var n=R[i];if(n===M&&(n=k(i)),"undefined"===typeof n&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new h("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===N(/^%?[^%]*%?$/,e))throw new h("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=K(e),i=r.length>0?r[0]:"",n=j("%"+i+"%",t),o=n.name,s=n.value,a=!1,l=n.alias;l&&(i=l[0],B(r,_([0,1],l)));for(var f=1,u=!0;f<r.length;f+=1){var p=r[f],y=L(p,0,1),g=L(p,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new h("property names with quotes must have matching quotes");if("constructor"!==p&&u||(a=!0),i+="."+p,o="%"+i+"%",x(R,o))s=R[o];else if(null!=s){if(!(p in s)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(b&&f+1>=r.length){var d=b(s,p);u=!!d,s=u&&"get"in d&&!("originalValue"in d.get)?d.get:s[p]}else u=x(s,p),s=s[p];u&&!a&&(R[o]=s)}}return s}},70851:(e,t,r)=>{r.d(t,{f:()=>o});const i=new Map;function n(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>i.set(e,t)))}async function o(e){const t=i.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);const r=await t();return new r(e)}n([void 0,1],(()=>r.e(5121).then(r.bind(r,35121)).then((e=>e.default)))),n(5,(()=>r.e(2764).then(r.bind(r,12764)).then((e=>e.default)))),n(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),n(7,(()=>r.e(6457).then(r.bind(r,76457)).then((e=>e.default)))),n([8,32946],(()=>Promise.all([r.e(9237),r.e(424)]).then(r.bind(r,50424)).then((e=>e.default)))),n(32773,(()=>r.e(1030).then(r.bind(r,1030)).then((e=>e.default)))),n(34887,(()=>Promise.all([r.e(9237),r.e(6885)]).then(r.bind(r,56885)).then((async e=>(await e.zstd.init(),e))).then((e=>e.default)))),n(50001,(()=>r.e(6568).then(r.bind(r,6568)).then((e=>e.default))))},34099:(e,t,r)=>{r.d(t,{_F:()=>Q,uz:()=>J,Vj:()=>ee});var i=r(88022),n=r(85326);class o{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const r=this.getUint32(e,t),i=this.getUint32(e+4,t);let n;if(t){if(n=r+2**32*i,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*r+i,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}getInt64(e,t){let r=0;const i=(128&this._dataView.getUint8(e+(t?7:0)))>0;let n=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(e+(t?o:7-o));i&&(n?0!==s&&(s=255&~(s-1),n=!1):s=255&~s),r+=s*256**o}return i&&(r=-r),r}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return(0,n.O)(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class s{constructor(e,t,r,i){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),r=this.readUint32(e+4);let i;if(this._littleEndian){if(i=t+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*t+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(e){let t=0;const r=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0;let i=!0;for(let n=0;n<8;n++){let o=this._dataView.getUint8(e+(this._littleEndian?n:7-n));r&&(i?0!==o&&(o=255&~(o-1),i=!1):o=255&~o),t+=o*256**n}return r&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const a="\r\n\r\n";function l(e){if("undefined"!==typeof Object.fromEntries)return Object.fromEntries(e);const t={};for(const[r,i]of e)t[r.toLowerCase()]=i;return t}function h(e){const t=e.split("\r\n").map((e=>{const t=e.split(":").map((e=>e.trim()));return t[0]=t[0].toLowerCase(),t}));return l(t)}function c(e){const[t,...r]=e.split(";").map((e=>e.trim())),i=r.map((e=>e.split("=")));return{type:t,params:l(i)}}function f(e){let t,r,i;return e&&([,t,r,i]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),r=parseInt(r,10),i=parseInt(i,10)),{start:t,end:r,total:i}}function u(e,t){let r=null;const i=new TextDecoder("ascii"),n=[],o=`--${t}`,s=`${o}--`;for(let a=0;a<10;++a){const t=i.decode(new Uint8Array(e,a,o.length));t===o&&(r=a)}if(null===r)throw new Error("Could not find initial boundary");while(r<e.byteLength){const t=i.decode(new Uint8Array(e,r,Math.min(o.length+1024,e.byteLength-r)));if(0===t.length||t.startsWith(s))break;if(!t.startsWith(o))throw new Error("Part does not start with boundary");const l=t.substr(o.length+2);if(0===l.length)break;const c=l.indexOf(a),u=h(l.substr(0,c)),{start:p,end:y,total:g}=f(u["content-range"]),d=r+o.length+c+a.length,w=parseInt(y,10)+1-parseInt(p,10);n.push({headers:u,data:e.slice(d,d+w),offset:p,length:w,fileSize:g}),r=d+w+4}return n}class p{async fetch(e,t=void 0){return Promise.all(e.map((e=>this.fetchSlice(e,t))))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}var y=r(82807);async function g(e){return new Promise((t=>setTimeout(t,e)))}function d(e,t){const r=Array.isArray(e)?e:Array.from(e),i=Array.isArray(t)?t:Array.from(t);return r.map(((e,t)=>[e,i[t]]))}class w extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,w),this.name="AbortError"}}class m extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const b=m;class A{constructor(e,t,r=null){this.offset=e,this.length=t,this.data=r}get top(){return this.offset+this.length}}class S{constructor(e,t,r){this.offset=e,this.length=t,this.blockIds=r}}class P extends p{constructor(e,{blockSize:t=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new y.A({maxSize:r,onEviction:(e,t)=>{this.evictedBlocks.set(e,t)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const r=[],i=[],n=[];this.evictedBlocks.clear();for(const{offset:f,length:u}of e){let e=f+u;const{fileSize:t}=this;null!==t&&(e=Math.min(e,t));const o=Math.floor(f/this.blockSize)*this.blockSize;for(let s=o;s<e;s+=this.blockSize){const e=Math.floor(s/this.blockSize);this.blockCache.has(e)||this.blockRequests.has(e)||(this.blockIdsToFetch.add(e),i.push(e)),this.blockRequests.has(e)&&r.push(this.blockRequests.get(e)),n.push(e)}}await g(),this.fetchBlocks(t);const o=[];for(const f of i)this.blockRequests.has(f)&&o.push(this.blockRequests.get(f));await Promise.allSettled(r),await Promise.allSettled(o);const s=[],a=n.filter((e=>this.abortedBlockIds.has(e)||!this.blockCache.has(e)));if(a.forEach((e=>this.blockIdsToFetch.add(e))),a.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const e of a){const t=this.blockRequests.get(e);if(!t)throw new Error(`Block ${e} is not in the block requests`);s.push(t)}await Promise.allSettled(s)}if(t&&t.aborted)throw new w("Request was aborted");const l=n.map((e=>this.blockCache.get(e)||this.evictedBlocks.get(e))),h=l.filter((e=>!e));if(h.length)throw new b(h,"Request failed");const c=new Map(d(n,l));return this.readSliceData(e,c)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(t,e);for(let i=0;i<t.length;++i){const n=t[i];for(const t of n.blockIds)this.blockRequests.set(t,(async()=>{try{const e=(await r)[i],n=t*this.blockSize,o=n-e.offset,s=Math.min(o+this.blockSize,e.data.byteLength),a=e.data.slice(o,s),l=new A(n,a.byteLength,a,t);this.blockCache.set(t,l),this.abortedBlockIds.delete(t)}catch(n){if("AbortError"!==n.name)throw n;n.signal=e,this.blockCache.delete(t),this.abortedBlockIds.add(t)}finally{this.blockRequests.delete(t)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort(((e,t)=>e-t));if(0===t.length)return[];let r=[],i=null;const n=[];for(const o of t)null===i||i+1===o?(r.push(o),i=o):(n.push(new S(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[o],i=o);return n.push(new S(r[0]*this.blockSize,r.length*this.blockSize,r)),n}readSliceData(e,t){return e.map((e=>{let r=e.offset+e.length;null!==this.fileSize&&(r=Math.min(this.fileSize,r));const i=Math.floor(e.offset/this.blockSize),n=Math.floor(r/this.blockSize),o=new ArrayBuffer(e.length),s=new Uint8Array(o);for(let a=i;a<=n;++a){const i=t.get(a),n=i.offset-e.offset,o=i.top-r;let l,h=0,c=0;n<0?h=-n:n>0&&(c=n),l=o<0?i.length-h:r-i.offset-h;const f=new Uint8Array(i.data,h,l);s.set(f,c)}return o}))}}class I{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class D{constructor(e){this.url=e}async request({headers:e,signal:t}={}){throw new Error("request is not implemented")}}class E extends I{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){const e=this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer;return e}}class F extends D{constructor(e,t){super(e),this.credentials=t}async request({headers:e,signal:t}={}){const r=await fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new E(r)}}class T extends I{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class M extends D{constructRequest(e,t){return new Promise(((r,i)=>{const n=new XMLHttpRequest;n.open("GET",this.url),n.responseType="arraybuffer";for(const[t,o]of Object.entries(e))n.setRequestHeader(t,o);n.onload=()=>{const e=n.response;r(new T(n,e))},n.onerror=i,n.onabort=()=>i(new w("Request aborted")),n.send(),t&&(t.aborted&&n.abort(),t.addEventListener("abort",(()=>n.abort())))}))}async request({headers:e,signal:t}={}){const r=await this.constructRequest(e,t);return r}}var U=r(28625),R=r(56504),C=r(6580),k=r(48287)["Buffer"];class G extends I{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){const e=await this.dataPromise;return e}}class O extends D{constructor(e){super(e),this.parsedUrl=C.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?U:R}constructRequest(e,t){return new Promise(((r,i)=>{const n=this.httpApi.get({...this.parsedUrl,headers:e},(e=>{const t=new Promise((t=>{const r=[];e.on("data",(e=>{r.push(e)})),e.on("end",(()=>{const e=k.concat(r).buffer;t(e)})),e.on("error",i)}));r(new G(e,t))}));n.on("error",i),t&&(t.aborted&&n.destroy(new w("Request aborted")),t.addEventListener("abort",(()=>n.destroy(new w("Request aborted")))))}))}async request({headers:e,signal:t}={}){const r=await this.constructRequest(e,t);return r}}class x extends p{constructor(e,t,r,i){super(),this.client=e,this.headers=t,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length,Promise.all(e.map((e=>this.fetchSlice(e,t)))))}async fetchSlices(e,t){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map((({offset:e,length:t})=>`${e}-${e+t}`)).join(",")}`},signal:t});if(r.ok){if(206===r.status){const{type:i,params:n}=c(r.getHeader("content-type"));if("multipart/byteranges"===i){const e=u(await r.getData(),n.boundary);return this._fileSize=e[0].fileSize||null,e}const o=await r.getData(),{start:s,end:a,total:l}=f(r.getHeader("content-range"));this._fileSize=l||null;const h=[{data:o,offset:s,length:a-s}];if(e.length>1){const r=await Promise.all(e.slice(1).map((e=>this.fetchSlice(e,t))));return h.concat(r)}return h}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await r.getData();return this._fileSize=e.byteLength,[{data:e,offset:0,length:e.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:r,length:i}=e,n=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+i}`},signal:t});if(n.ok){if(206===n.status){const e=await n.getData(),{total:t}=f(n.getHeader("content-range"));return this._fileSize=t||null,{data:e,offset:r,length:i}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await n.getData();return this._fileSize=e.byteLength,{data:e,offset:0,length:e.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function _(e,{blockSize:t,cacheSize:r}){return null===t?e:new P(e,{blockSize:t,cacheSize:r})}function B(e,{headers:t={},credentials:r,maxRanges:i=0,allowFullFile:n=!1,...o}={}){const s=new F(e,r),a=new x(s,t,i,n);return _(a,o)}function v(e,{headers:t={},maxRanges:r=0,allowFullFile:i=!1,...n}={}){const o=new M(e),s=new x(o,t,r,i);return _(s,n)}function L(e,{headers:t={},maxRanges:r=0,allowFullFile:i=!1,...n}={}){const o=new O(e),s=new x(o,t,r,i);return _(s,n)}function N(e,{forceXHR:t=!1,...r}={}){return"function"!==typeof fetch||t?"undefined"!==typeof XMLHttpRequest?v(e,r):L(e,r):B(e,r)}class V extends p{constructor(e){super(),this.file=e}async fetchSlice(e,t){return new Promise(((r,i)=>{const n=this.file.slice(e.offset,e.offset+e.length),o=new FileReader;o.onload=e=>r(e.target.result),o.onerror=i,o.onabort=i,o.readAsArrayBuffer(n),t&&t.addEventListener("abort",(()=>o.abort()))}))}}function $(e){return new V(e)}var K=r(98622);function j(e){switch(e){case K.s$.BYTE:case K.s$.ASCII:case K.s$.SBYTE:case K.s$.UNDEFINED:return 1;case K.s$.SHORT:case K.s$.SSHORT:return 2;case K.s$.LONG:case K.s$.SLONG:case K.s$.FLOAT:case K.s$.IFD:return 4;case K.s$.RATIONAL:case K.s$.SRATIONAL:case K.s$.DOUBLE:case K.s$.LONG8:case K.s$.SLONG8:case K.s$.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function z(e){const t=e.GeoKeyDirectory;if(!t)return null;const r={};for(let i=4;i<=4*t[3];i+=4){const n=K.Hm[t[i]],o=t[i+1]?K.$[t[i+1]]:null,s=t[i+2],a=t[i+3];let l=null;if(o){if(l=e[o],"undefined"===typeof l||null===l)throw new Error(`Could not get value of geoKey '${n}'.`);"string"===typeof l?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),1===s&&(l=l[0]))}else l=a;r[n]=l}return r}function q(e,t,r,i){let n=null,o=null;const s=j(t);switch(t){case K.s$.BYTE:case K.s$.ASCII:case K.s$.UNDEFINED:n=new Uint8Array(r),o=e.readUint8;break;case K.s$.SBYTE:n=new Int8Array(r),o=e.readInt8;break;case K.s$.SHORT:n=new Uint16Array(r),o=e.readUint16;break;case K.s$.SSHORT:n=new Int16Array(r),o=e.readInt16;break;case K.s$.LONG:case K.s$.IFD:n=new Uint32Array(r),o=e.readUint32;break;case K.s$.SLONG:n=new Int32Array(r),o=e.readInt32;break;case K.s$.LONG8:case K.s$.IFD8:n=new Array(r),o=e.readUint64;break;case K.s$.SLONG8:n=new Array(r),o=e.readInt64;break;case K.s$.RATIONAL:n=new Uint32Array(2*r),o=e.readUint32;break;case K.s$.SRATIONAL:n=new Int32Array(2*r),o=e.readInt32;break;case K.s$.FLOAT:n=new Float32Array(r),o=e.readFloat32;break;case K.s$.DOUBLE:n=new Float64Array(r),o=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t!==K.s$.RATIONAL&&t!==K.s$.SRATIONAL)for(let a=0;a<r;++a)n[a]=o.call(e,i+a*s);else for(let a=0;a<r;a+=2)n[a]=o.call(e,i+a*s),n[a+1]=o.call(e,i+(a*s+4));return t===K.s$.ASCII?new TextDecoder("utf-8").decode(n):n}class W{constructor(e,t,r){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=r}}class H extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class Y{async readRasters(e={}){const{window:t,width:r,height:i}=e;let{resX:n,resY:o,bbox:s}=e;const a=await this.getImage();let l=a;const h=await this.getImageCount(),c=a.getBoundingBox();if(t&&s)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(t){const[e,r]=a.getOrigin(),[i,n]=a.getResolution();s=[e+t[0]*i,r+t[1]*n,e+t[2]*i,r+t[3]*n]}const e=s||c;if(r){if(n)throw new Error("Both width and resX passed");n=(e[2]-e[0])/r}if(i){if(o)throw new Error("Both width and resY passed");o=(e[3]-e[1])/i}}if(n||o){const e=[];for(let t=0;t<h;++t){const r=await this.getImage(t),{SubfileType:i,NewSubfileType:n}=r.fileDirectory;(0===t||2===i||1&n)&&e.push(r)}e.sort(((e,t)=>e.getWidth()-t.getWidth()));for(let t=0;t<e.length;++t){const r=e[t],i=(c[2]-c[0])/r.getWidth(),s=(c[3]-c[1])/r.getHeight();if(l=r,n&&n>i||o&&o>s)break}}let f=t;if(s){const[e,t]=a.getOrigin(),[r,i]=l.getResolution(a);f=[Math.round((s[0]-e)/r),Math.round((s[1]-t)/i),Math.round((s[2]-e)/r),Math.round((s[3]-t)/i)],f=[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]}return l.readRasters({...e,window:f})}}class X extends Y{constructor(e,t,r,i,n={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=r,this.firstIFDOffset=i,this.cache=n.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const r=this.bigTiff?4048:1024;return new s((await this.source.fetch([{offset:e,length:"undefined"!==typeof t?t:r}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,r=this.bigTiff?8:2;let i=await this.getSlice(e);const n=this.bigTiff?i.readUint64(e):i.readUint16(e),o=n*t+(this.bigTiff?16:6);i.covers(e,o)||(i=await this.getSlice(e,o));const s={};let a=e+(this.bigTiff?8:2);for(let c=0;c<n;a+=t,++c){const e=i.readUint16(a),t=i.readUint16(a+2),r=this.bigTiff?i.readUint64(a+4):i.readUint32(a+4);let n,o;const l=j(t),h=a+(this.bigTiff?12:8);if(l*r<=(this.bigTiff?8:4))n=q(i,t,r,h);else{const e=i.readOffset(h),o=j(t)*r;if(i.covers(e,o))n=q(i,t,r,e);else{const i=await this.getSlice(e,o);n=q(i,t,r,e)}}o=1===r&&-1===K.NZ.indexOf(e)&&t!==K.s$.RATIONAL&&t!==K.s$.SRATIONAL?n[0]:n,s[K.$[e]]=o}const l=z(s),h=i.readOffset(e+r+t*n);return new W(s,l,h)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(0===e)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){if(t instanceof H)throw new H(e);throw t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(0===t.nextIFDByteOffset)throw new H(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new i.A(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;while(t)try{await this.requestIFD(e),++e}catch(r){if(!(r instanceof H))throw r;t=!1}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",r=t.length+100;let i=await this.getSlice(e,r);if(t===q(i,K.s$.ASCII,t.length,e)){const t=q(i,K.s$.ASCII,r,e),n=t.split("\n")[0],o=Number(n.split("=")[1].split(" ")[0])+n.length;o>r&&(i=await this.getSlice(e,o));const s=q(i,K.s$.ASCII,o,e);this.ghostValues={},s.split("\n").filter((e=>e.length>0)).map((e=>e.split("="))).forEach((([e,t])=>{this.ghostValues[e]=t}))}return this.ghostValues}static async fromSource(e,t,r){const i=(await e.fetch([{offset:0,length:1024}],r))[0],n=new o(i),s=n.getUint16(0,0);let a;if(18761===s)a=!0;else{if(19789!==s)throw new TypeError("Invalid byte order value.");a=!1}const l=n.getUint16(2,a);let h;if(42===l)h=!1;else{if(43!==l)throw new TypeError("Invalid magic number.");{h=!0;const e=n.getUint16(4,a);if(8!==e)throw new Error("Unsupported offset byte-size.")}}const c=h?n.getUint64(8,a):n.getUint32(4,a);return new X(e,a,h,c,t)}close(){return"function"===typeof this.source.close&&this.source.close()}}class Z extends Y{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((e=>e.parseFileDirectoryAt(e.firstIFDOffset))));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let t=0,r=0;for(let n=0;n<this.imageFiles.length;n++){const o=this.imageFiles[n];for(let s=0;s<this.imageCounts[n];s++){if(e===t){const e=await o.requestIFD(r);return new i.A(e.fileDirectory,e.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source)}t++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((e=>e.getImageCount())));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce(((e,t)=>e+t),0),this.imageCount}}async function J(e,t={},r){return X.fromSource(N(e,t),r)}async function Q(e,t){return X.fromSource($(e),t)}async function ee(e,t=[],r={},i){const n=await X.fromSource(N(e,r),i),o=await Promise.all(t.map((e=>X.fromSource(N(e,r)))));return new Z(n,o)}},88022:(e,t,r)=>{r.d(t,{A:()=>R});var i=r(85326),n=r(27379),o=r(60563),s=r(98622);function a(e,t){const{width:r,height:i}=e,n=new Uint8Array(r*i*3);let o;for(let s=0,a=0;s<e.length;++s,a+=3)o=256-e[s]/t*256,n[a]=o,n[a+1]=o,n[a+2]=o;return n}function l(e,t){const{width:r,height:i}=e,n=new Uint8Array(r*i*3);let o;for(let s=0,a=0;s<e.length;++s,a+=3)o=e[s]/t*256,n[a]=o,n[a+1]=o,n[a+2]=o;return n}function h(e,t){const{width:r,height:i}=e,n=new Uint8Array(r*i*3),o=t.length/3,s=t.length/3*2;for(let a=0,l=0;a<e.length;++a,l+=3){const r=e[a];n[l]=t[r]/65536*256,n[l+1]=t[r+o]/65536*256,n[l+2]=t[r+s]/65536*256}return n}function c(e){const{width:t,height:r}=e,i=new Uint8Array(t*r*3);for(let n=0,o=0;n<e.length;n+=4,o+=3){const t=e[n],r=e[n+1],s=e[n+2],a=e[n+3];i[o]=(255-t)/256*255*((255-a)/256),i[o+1]=(255-r)/256*255*((255-a)/256),i[o+2]=(255-s)/256*255*((255-a)/256)}return i}function f(e){const{width:t,height:r}=e,i=new Uint8ClampedArray(t*r*3);for(let n=0,o=0;n<e.length;n+=3,o+=3){const t=e[n],r=e[n+1],s=e[n+2];i[o]=t+1.402*(s-128),i[o+1]=t-.34414*(r-128)-.71414*(s-128),i[o+2]=t+1.772*(r-128)}return i}const u=.95047,p=1,y=1.08883;function g(e){const{width:t,height:r}=e,i=new Uint8Array(t*r*3);for(let n=0,o=0;n<e.length;n+=3,o+=3){const t=e[n+0],r=e[n+1]<<24>>24,s=e[n+2]<<24>>24;let a,l,h,c=(t+16)/116,f=r/500+c,g=c-s/200;f=u*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),c=p*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),g=y*(g*g*g>.008856?g*g*g:(g-16/116)/7.787),a=3.2406*f+-1.5372*c+-.4986*g,l=-.9689*f+1.8758*c+.0415*g,h=.0557*f+-.204*c+1.057*g,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,l=l>.0031308?1.055*l**(1/2.4)-.055:12.92*l,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,i[o]=255*Math.max(0,Math.min(1,a)),i[o+1]=255*Math.max(0,Math.min(1,l)),i[o+2]=255*Math.max(0,Math.min(1,h))}return i}var d=r(70851);function w(e,t,r,i=1){return new(Object.getPrototypeOf(e).constructor)(t*r*i)}function m(e,t,r,i,n){const o=t/i,s=r/n;return e.map((e=>{const a=w(e,i,n);for(let l=0;l<n;++l){const n=Math.min(Math.round(s*l),r-1);for(let r=0;r<i;++r){const s=Math.min(Math.round(o*r),t-1),h=e[n*t+s];a[l*i+r]=h}}return a}))}function b(e,t,r){return(1-r)*e+r*t}function A(e,t,r,i,n){const o=t/i,s=r/n;return e.map((e=>{const a=w(e,i,n);for(let l=0;l<n;++l){const n=s*l,h=Math.floor(n),c=Math.min(Math.ceil(n),r-1);for(let r=0;r<i;++r){const s=o*r,f=s%1,u=Math.floor(s),p=Math.min(Math.ceil(s),t-1),y=e[h*t+u],g=e[h*t+p],d=e[c*t+u],w=e[c*t+p],m=b(b(y,g,f),b(d,w,f),n%1);a[l*i+r]=m}}return a}))}function S(e,t,r,i,n,o="nearest"){switch(o.toLowerCase()){case"nearest":return m(e,t,r,i,n);case"bilinear":case"linear":return A(e,t,r,i,n);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function P(e,t,r,i,n,o){const s=t/i,a=r/n,l=w(e,i,n,o);for(let h=0;h<n;++h){const n=Math.min(Math.round(a*h),r-1);for(let r=0;r<i;++r){const a=Math.min(Math.round(s*r),t-1);for(let s=0;s<o;++s){const c=e[n*t*o+a*o+s];l[h*i*o+r*o+s]=c}}}return l}function I(e,t,r,i,n,o){const s=t/i,a=r/n,l=w(e,i,n,o);for(let h=0;h<n;++h){const n=a*h,c=Math.floor(n),f=Math.min(Math.ceil(n),r-1);for(let r=0;r<i;++r){const a=s*r,u=a%1,p=Math.floor(a),y=Math.min(Math.ceil(a),t-1);for(let s=0;s<o;++s){const a=e[c*t*o+p*o+s],g=e[c*t*o+y*o+s],d=e[f*t*o+p*o+s],w=e[f*t*o+y*o+s],m=b(b(a,g,u),b(d,w,u),n%1);l[h*i*o+r*o+s]=m}}}return l}function D(e,t,r,i,n,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return P(e,t,r,i,n,o);case"bilinear":case"linear":return I(e,t,r,i,n,o);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function E(e,t,r){let i=0;for(let n=t;n<r;++n)i+=e[n];return i}function F(e,t,r){switch(e){case 1:if(t<=8)return new Uint8Array(r);if(t<=16)return new Uint16Array(r);if(t<=32)return new Uint32Array(r);break;case 2:if(8===t)return new Int8Array(r);if(16===t)return new Int16Array(r);if(32===t)return new Int32Array(r);break;case 3:switch(t){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r);default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}function T(e,t){return(1!==e&&2!==e||!(t<=32)||t%8!==0)&&(3!==e||16!==t&&32!==t&&64!==t)}function M(e,t,r,i,n,o,s){const a=new DataView(e),l=2===r?s*o:s*o*i,h=2===r?1:i,c=F(t,n,l),f=parseInt("1".repeat(n),2);if(1===t){let e;e=1===r?i*n:n;let t=o*e;0!==(7&t)&&(t=t+7&-8);for(let r=0;r<s;++r){const e=r*t;for(let t=0;t<o;++t){const i=e+t*h*n;for(let e=0;e<h;++e){const s=i+e*n,l=(r*o+t)*h+e,u=Math.floor(s/8),p=s%8;if(p+n<=8)c[l]=a.getUint8(u)>>8-n-p&f;else if(p+n<=16)c[l]=a.getUint16(u)>>16-n-p&f;else if(p+n<=24){const e=a.getUint16(u)<<8|a.getUint8(u+2);c[l]=e>>24-n-p&f}else c[l]=a.getUint32(u)>>32-n-p&f}}}}return c.buffer}class U{constructor(e,t,r,i,n,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=r,this.littleEndian=i,this.tiles=n?{}:null,this.isTiled=!e.StripOffsets;const s=e.PlanarConfiguration;if(this.planarConfiguration="undefined"===typeof s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return"undefined"!==typeof this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:"undefined"!==typeof this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(e,t){return(0,i.O)(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64;default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){const r=this.getSampleFormat(e),i=this.getBitsPerSample(e);return F(r,i,t)}async getTileOrStrip(e,t,r,i,n){const o=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight());let a;const{tiles:l}=this;let h,c;1===this.planarConfiguration?a=t*o+e:2===this.planarConfiguration&&(a=r*o*s+t*o+e),this.isTiled?(h=this.fileDirectory.TileOffsets[a],c=this.fileDirectory.TileByteCounts[a]):(h=this.fileDirectory.StripOffsets[a],c=this.fileDirectory.StripByteCounts[a]);const f=(await this.source.fetch([{offset:h,length:c}],n))[0];let u;return null!==l&&l[a]?u=l[a]:(u=(async()=>{let e=await i.decode(this.fileDirectory,f);const r=this.getSampleFormat(),n=this.getBitsPerSample();return T(r,n)&&(e=M(e,r,this.planarConfiguration,this.getSamplesPerPixel(),n,this.getTileWidth(),this.getBlockHeight(t))),e})(),null!==l&&(l[a]=u)),{x:e,y:t,sample:r,data:await u}}async _readRaster(e,t,r,i,n,o,s,a,l){const h=this.getTileWidth(),c=this.getTileHeight(),f=this.getWidth(),u=this.getHeight(),p=Math.max(Math.floor(e[0]/h),0),y=Math.min(Math.ceil(e[2]/h),Math.ceil(f/h)),g=Math.max(Math.floor(e[1]/c),0),d=Math.min(Math.ceil(e[3]/c),Math.ceil(u/c)),w=e[2]-e[0];let m=this.getBytesPerPixel();const b=[],A=[];for(let S=0;S<t.length;++S)1===this.planarConfiguration?b.push(E(this.fileDirectory.BitsPerSample,0,t[S])/8):b.push(0),A.push(this.getReaderForSample(t[S]));const P=[],{littleEndian:I}=this;for(let S=g;S<d;++S)for(let o=p;o<y;++o){let s;1===this.planarConfiguration&&(s=this.getTileOrStrip(o,S,0,n,l));for(let a=0;a<t.length;++a){const p=a,y=t[a];2===this.planarConfiguration&&(m=this.getSampleByteSize(y),s=this.getTileOrStrip(o,S,y,n,l));const g=s.then((n=>{const o=n.data,s=new DataView(o),a=this.getBlockHeight(n.y),l=n.y*c,y=n.x*h,g=l+a,d=(n.x+1)*h,S=A[p],P=Math.min(a,a-(g-e[3]),u-l),D=Math.min(h,h-(d-e[2]),f-y);for(let c=Math.max(0,e[1]-l);c<P;++c)for(let n=Math.max(0,e[0]-y);n<D;++n){const o=(c*h+n)*m,a=S.call(s,o+b[p],I);let f;i?(f=(c+l-e[1])*w*t.length+(n+y-e[0])*t.length+p,r[f]=a):(f=(c+l-e[1])*w+n+y-e[0],r[p][f]=a)}}));P.push(g)}}if(await Promise.all(P),o&&e[2]-e[0]!==o||s&&e[3]-e[1]!==s){let n;return n=i?D(r,e[2]-e[0],e[3]-e[1],o,s,t.length,a):S(r,e[2]-e[0],e[3]-e[1],o,s,a),n.width=o,n.height=s,n}return r.width=o||e[2]-e[0],r.height=s||e[3]-e[1],r}async readRasters({window:e,samples:t=[],interleave:r,pool:i=null,width:n,height:o,resampleMethod:s,fillValue:a,signal:l}={}){const h=e||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const c=h[2]-h[0],f=h[3]-h[1],u=c*f,p=this.getSamplesPerPixel();if(t&&t.length){for(let d=0;d<t.length;++d)if(t[d]>=p)return Promise.reject(new RangeError(`Invalid sample index '${t[d]}'.`))}else for(let d=0;d<p;++d)t.push(d);let y;if(r){const e=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,r=Math.max.apply(null,this.fileDirectory.BitsPerSample);y=F(e,r,u*t.length),a&&y.fill(a)}else{y=[];for(let e=0;e<t.length;++e){const r=this.getArrayForSample(t[e],u);Array.isArray(a)&&e<a.length?r.fill(a[e]):a&&!Array.isArray(a)&&r.fill(a),y.push(r)}}const g=i||await(0,d.f)(this.fileDirectory),w=await this._readRaster(h,t,y,r,g,n,o,s,l);return w}async readRGB({window:e,interleave:t=!0,pool:r=null,width:i,height:n,resampleMethod:o,enableAlpha:u=!1,signal:p}={}){const y=e||[0,0,this.getWidth(),this.getHeight()];if(y[0]>y[2]||y[1]>y[3])throw new Error("Invalid subsets");const d=this.fileDirectory.PhotometricInterpretation;if(d===s.ub.RGB){let a=[0,1,2];if(this.fileDirectory.ExtraSamples!==s.AC.Unspecified&&u){a=[];for(let e=0;e<this.fileDirectory.BitsPerSample.length;e+=1)a.push(e)}return this.readRasters({window:e,interleave:t,samples:a,pool:r,width:i,height:n,resampleMethod:o,signal:p})}let w;switch(d){case s.ub.WhiteIsZero:case s.ub.BlackIsZero:case s.ub.Palette:w=[0];break;case s.ub.CMYK:w=[0,1,2,3];break;case s.ub.YCbCr:case s.ub.CIELab:w=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const m={window:y,interleave:!0,samples:w,pool:r,width:i,height:n,resampleMethod:o,signal:p},{fileDirectory:b}=this,A=await this.readRasters(m),S=2**this.fileDirectory.BitsPerSample[0];let P;switch(d){case s.ub.WhiteIsZero:P=a(A,S);break;case s.ub.BlackIsZero:P=l(A,S);break;case s.ub.Palette:P=h(A,b.ColorMap);break;case s.ub.CMYK:P=c(A);break;case s.ub.YCbCr:P=f(A);break;case s.ub.CIELab:P=g(A);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const e=new Uint8Array(P.length/3),t=new Uint8Array(P.length/3),r=new Uint8Array(P.length/3);for(let i=0,n=0;i<P.length;i+=3,++n)e[n]=P[i],t[n]=P[i+1],r[n]=P[i+2];P=[e,t,r]}return P.width=A.width,P.height=A.height,P}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let i=o(r,"Item");i=null===e?i.filter((e=>void 0===n(e,"sample"))):i.filter((t=>Number(n(t,"sample"))===e));for(let o=0;o<i.length;++o){const e=i[o];t[n(e,"name")]=e.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return 0===r[1]&&0===r[4]?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(e){const[t,r,i]=e.getResolution();return[t*e.getWidth()/this.getWidth(),r*e.getHeight()/this.getHeight(),i*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(e=!1){const t=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[e,i,n,o,s,a,l,h]=this.fileDirectory.ModelTransformation,c=[[0,0],[0,t],[r,0],[r,t]],f=c.map((([t,r])=>[o+e*t+i*r,h+s*t+a*r])),u=f.map((e=>e[0])),p=f.map((e=>e[1]));return[Math.min(...u),Math.min(...p),Math.max(...u),Math.max(...p)]}{const e=this.getOrigin(),i=this.getResolution(),n=e[0],o=e[1],s=n+i[0]*r,a=o+i[1]*t;return[Math.min(n,s),Math.min(o,a),Math.max(n,s),Math.max(o,a)]}}}const R=U},98622:(e,t,r)=>{r.d(t,{$:()=>i,AC:()=>h,Hm:()=>u,NZ:()=>o,S3:()=>f,TZ:()=>c,s$:()=>a,ub:()=>l});const i={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},n={};for(const y in i)i.hasOwnProperty(y)&&(n[i[y]]=parseInt(y,10));const o=[n.BitsPerSample,n.ExtraSamples,n.SampleFormat,n.StripByteCounts,n.StripOffsets,n.StripRowCounts,n.TileByteCounts,n.TileOffsets,n.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={};for(const y in s)s.hasOwnProperty(y)&&(a[s[y]]=parseInt(y,10));const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},h={Unspecified:0,Assocalpha:1,Unassalpha:2},c={Version:0,AddCompression:1},f={None:0,Deflate:1,Zstandard:2},u={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},p={};for(const y in u)u.hasOwnProperty(y)&&(p[u[y]]=parseInt(y,10))}}]);
//# sourceMappingURL=chunk-vendors-a39c4b8d.2e5bd87b.js.map
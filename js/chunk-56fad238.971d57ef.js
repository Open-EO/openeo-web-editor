(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56fad238"],{"0a2a":function(t,e,s){"use strict";s("c8ff")},"0f29":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"textEditor",class:t.languageString},[s("div",{staticClass:"sourceHeader"},[t.title?s("strong",[t._v(t._s(t.title))]):t._e(),s("div",{staticClass:"sourceToolbar"},[t.editable?s("span",{staticClass:"sepr"},[s("button",{attrs:{type:"button",title:"New script / Clear current script"},on:{click:t.confirmClear}},[s("i",{staticClass:"fas fa-file"})]),t._t("file-toolbar")],2):t._e(),t.editable?s("span",{staticClass:"sepr"},[s("button",{attrs:{type:"button",disabled:!t.canUndo,title:"Revert last change"},on:{click:function(e){return t.editor.undo()}}},[s("i",{staticClass:"fas fa-undo-alt"})]),s("button",{attrs:{type:"button",disabled:!t.canRedo,title:"Redo last reverted change"},on:{click:function(e){return t.editor.redo()}}},[s("i",{staticClass:"fas fa-redo-alt"})]),t._t("edit-toolbar")],2):t._e(),s("FullscreenButton",{attrs:{element:t.element}}),t._t("toolbar")],2)]),s("div",{staticClass:"sourceCodeEditor",attrs:{id:t.id}})])},o=[],a=s("025e"),r=s("5472"),n=s("a76e"),l=s("56b3"),c=s.n(l),u=(s("a7be"),s("f9d4"),s("959b"),s("ced6"),s("db91"),s("903e"),s("d7d5"),s("8c33"),s("10b2"),s("0dd0"),s("8822"),s("d2de"),s("4ebc")),d=s.n(u);window.jsonlint=d.a;var h={name:"TextEditor",components:{FullscreenButton:r["a"]},props:{id:String,editable:{type:Boolean,default:!0},value:{required:!0},language:{type:String,default:null},placeholder:{type:String,default:""},title:{type:String}},computed:{...a["a"].mapGetters(["processRegistry"]),languageString(){return"string"===typeof this.language?this.language.toLowerCase():""},editorOptions(){let t={indentUnit:2,lineNumbers:!0,indentWithTabs:!0,matchBrackets:!0,autoCloseBrackets:!0,readOnly:!this.editable,placeholder:this.placeholder};switch(this.languageString){case"r":t.mode="text/x-rsrc";break;case"python":t.mode="text/x-python";break;case"math":t.mode="text/x-mathematica";break;case"markdown":t.mode="text/x-markdown";break;case"json":case"processgraph":Object.assign(t,{mode:"application/json",gutters:["CodeMirror-lint-markers"],lint:!0});break}return t}},data(){return{canUndo:!1,canRedo:!1,editor:null,emitValue:this.value,element:null}},watch:{value(){this.emitValue!==this.value&&(this.updateContent(),this.editor.clearHistory())},editorOptions(){for(var t in this.editorOptions)this.editor.setOption(t,this.editorOptions[t])}},mounted(){this.editor=c()(document.getElementById(this.id),this.editorOptions),this.editor.setSize(null,"100%"),"processgraph"===this.languageString&&this.editor.on("change",()=>this.updateState()),this.updateContent(),this.editor.on("changes",(t,e)=>{try{0===Object.values(e).filter(t=>"setValue"===t.origin).length&&this.commit()}catch(s){this.$emit("error",s)}}),this.element=this.$el},methods:{confirmClear(){var t=confirm("Do you really want to clear the existing code?");t&&(this.insert(""),this.emit(null))},updateState(){this.editor.setOption("lint",!!this.editor.getValue().trim());let t=this.editor.getDoc().historySize();this.canUndo=t.undo>0,this.canRedo=t.redo>0,this.editor.refresh(),this.element=this.$el},commit(){var t=this.editor.getValue();switch(this.languageString){case"math":return this.emit(t.replace(/[\r\n\t]+/," "));case"processgraph":if(t){var e=JSON.parse(t);if(a["a"].size(e)>0){var s=new n["ProcessGraph"](e,this.processRegistry);return s.allowEmpty(),s.parse(),this.emit(e)}}return this.emit(null);case"json":return t?this.emit(JSON.parse(t)):this.emit(null);default:return this.emit(t)}},emit(t){this.emitValue=t,this.$emit("input",t)},insert(t,e=!0){if("string"!==typeof t&&(t=String(t)),e){const e=this.editor.getValue();if(t!==e){const e=this.editor.getScrollInfo();this.editor.setValue(t),this.editor.scrollTo(e.left,e.top)}}else this.editor.replaceSelection(t)},updateContent(){if(this.value)switch(this.languageString){case"processgraph":a["a"].isObject(this.value)?this.insert(JSON.stringify(this.value,null,this.editorOptions.indentUnit)):this.insert("");break;case"json":this.insert(JSON.stringify(this.value,null,this.editorOptions.indentUnit));break;default:this.insert(this.value)}else this.insert("");this.editor.getDoc().clearHistory(),this.updateState()},insertProcess(t){try{this.insert(JSON.stringify(t,null,2),!1)}catch(e){a["a"].exception(this,e)}}}},p=h,f=(s("0a2a"),s("ccbe"),s("2877")),m=Object(f["a"])(p,i,o,!1,null,"4834ed57",null);e["a"]=m.exports},"206d":function(t,e,s){},"22a2":function(t,e,s){},2930:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal",style:{"z-index":t.zIndex},on:{mousedown:t.backgroundClose}},[s("div",{ref:"container",staticClass:"modal-container",style:t.style},[s("header",{staticClass:"modal-header",on:{mousedown:function(e){return e.preventDefault(),e.stopPropagation(),t.startMove.apply(null,arguments)}}},[t._t("header",(function(){return[s("h2",[t._v(t._s(t.title))]),s("span",{staticClass:"close",on:{click:t.close}},[s("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]}))],2),s("main",{staticClass:"modal-content"},[t._t("default")],2),s("footer",{staticClass:"modal-footer"},[t._t("footer")],2)])])},o=[],a=s("3115"),r=s("025e"),n={name:"Modal",mixins:[a["a"]],props:{title:{type:String,default:null},minWidth:{type:String,default:"30%"},maxWidth:{type:String,default:"85%"},minHeight:{type:String,default:"auto"},show:{type:Boolean,default:!0}},data(){return{zIndex:1e3,position:null,dragPosition:null}},computed:{...r["a"].mapState("editor",["hightestModalZIndex"]),style(){let t={"min-width":this.minWidth,"max-width":this.maxWidth,"min-height":this.minHeight};return Array.isArray(this.position)&&(t.position="absolute",t.left=this.position[0]+"px",t.top=this.position[1]+"px"),t}},watch:{show:{immediate:!0,handler(t){t?this.open():this.close()}}},methods:{...r["a"].mapMutations("editor",["openModal","closeModal"]),open(){this.openModal(),this.zIndex=this.hightestModalZIndex,window.addEventListener("keydown",this.escCloseListener),this.$emit("shown")},close(){window.removeEventListener("keydown",this.escCloseListener),this.closeModal(),this.$emit("closed")},startMove(t){this.dragPosition=[t.clientX,t.clientY],document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.stopMove)},stopMove(){document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.stopMove)},move(t){t.preventDefault(),this.position=[this.$refs.container.offsetLeft-(this.dragPosition[0]-t.clientX),this.$refs.container.offsetTop-(this.dragPosition[1]-t.clientY)],this.dragPosition=[t.clientX,t.clientY]},escCloseListener(t){if("Escape"==t.key)return this.close(),t.preventDefault(),t.stopPropagation(),!1},backgroundClose(t){t.target===this.$el&&this.close()}}},l=n,c=(s("8781"),s("2877")),u=Object(c["a"])(l,i,o,!1,null,null,null);e["a"]=u.exports},3150:function(t,e,s){"use strict";s("22a2")},3986:function(t,e,s){},4229:function(t,e,s){},4525:function(t,e,s){},"4d98":function(t,e,s){"use strict";s("c98e")},5472:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{directives:[{name:"show",rawName:"v-show",value:t.element,expression:"element"}],attrs:{type:"button",title:t.isFullscreen?"Close fullscreen":"Show fullscreen"},on:{click:t.toggleFullscreen}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.isFullscreen,expression:"isFullscreen"}]},[s("i",{staticClass:"fas fa-compress"})]),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.isFullscreen,expression:"!isFullscreen"}]},[s("i",{staticClass:"fas fa-expand"})])])},o=[],a=s("025e"),r={name:"FullscreenButton",props:{element:{required:!0}},data(){return{isFullscreen:!1,keyDownFn:null,oldZIndex:"auto"}},mounted(){this.keyDownFn=this.onkeyDown.bind(this);let t=this.getElement();t&&t.addEventListener("keydown",this.keyDownFn)},beforeDestroy(){let t=this.getElement();t&&t.removeEventListener("keydown",this.keyDownFn)},computed:{...a["a"].mapState("editor",["hightestModalZIndex"])},methods:{...a["a"].mapMutations("editor",["openModal","closeModal"]),onkeyDown(t){!this.isFullscreen||"F11"!==t.key&&"Escape"!==t.key||(this.toggleFullscreen(),t.preventDefault(),t.stopPropagation())},getElement(){return"string"===typeof this.element?document.querySelector(this.element):"function"===typeof this.element?this.element():this.element},toggleFullscreen(){let t=this.getElement();this.isFullscreen?(this.isFullscreen=!1,t.classList.remove("fullscreen"),t.style.zIndex=this.oldZIndex,this.closeModal()):(this.isFullscreen=!0,t.classList.add("fullscreen"),this.openModal(),this.oldZIndex=t.style.zIndex,t.style.zIndex=this.hightestModalZIndex),this.$emit("changed",this.isFullscreen)}}},n=r,l=(s("90f4"),s("2877")),c=Object(l["a"])(n,i,o,!1,null,null,null);e["a"]=c.exports},"58d3":function(t,e,s){"use strict";s("f08e")},"6b1e":function(t,e,s){},"7b86":function(t,e,s){"use strict";s("3986")},8781:function(t,e,s){"use strict";s("6b1e")},"8c66":function(t,e,s){"use strict";var i=function(){var t=this,e=this,s=e.$createElement,i=e._self._c||s;return i("div",{ref:"visualEditor",staticClass:"visualEditor"},[i("div",{staticClass:"sourceHeader"},[e.title?i("strong",[e._v(e._s(e.title))]):e._e(),i("div",{staticClass:"sourceToolbar"},[e.editable?i("span",{staticClass:"sepr"},[i("button",{attrs:{type:"button",title:"New script / Clear current script"},on:{click:e.confirmClear}},[i("i",{staticClass:"fas fa-file"})]),e._t("file-toolbar")],2):e._e(),e.editable?i("span",{staticClass:"sepr"},[i("button",{attrs:{type:"button",disabled:!e.canUndo,title:"Revert last change"},on:{click:function(t){return e.$refs.blocks.undo()}}},[i("i",{staticClass:"fas fa-undo-alt"})]),i("button",{attrs:{type:"button",disabled:!e.canRedo,title:"Redo last reverted change"},on:{click:function(t){return e.$refs.blocks.redo()}}},[i("i",{staticClass:"fas fa-redo-alt"})]),i("button",{attrs:{type:"button",disabled:!e.hasSelection,title:"Delete selected elements"},on:{click:function(t){return e.$refs.blocks.deleteSelected()}}},[i("i",{staticClass:"fas fa-trash"})])]):e._e(),e.editable?i("span",{staticClass:"sepr"},[i("button",{attrs:{type:"button",title:"Add Parameter"},on:{click:e.addParameter}},[i("i",{staticClass:"fas fa-parking"})]),e.supportsMath?i("button",{class:{highlightFormula:e.isMath},attrs:{type:"button",title:"Insert/Edit formula"},on:{click:e.showExpressionModal}},[i("i",{staticClass:"fas fa-square-root-alt"})]):e._e()]):e._e(),i("button",{class:{compactMode:e.compactMode},attrs:{type:"button",title:"Compact Mode"},on:{click:function(t){return e.$refs.blocks.toggleCompact()}}},[i("i",{staticClass:"fas fa-compress-arrows-alt"})]),i("button",{attrs:{type:"button",title:"Scale to perfect size"},on:{click:function(t){return e.$refs.blocks.perfectScale()}}},[i("i",{staticClass:"fas fa-arrows-alt"})]),i("FullscreenButton",{attrs:{element:function(){return t.$refs.visualEditor}},on:{changed:function(s){t.$refs.blocks.perfectScale(),e.isFullScreen=s}}}),e._t("toolbar")],2)]),i("div",{staticClass:"editorSplitter"},[(e.showDiscoveryToolbar||e.isFullScreen)&&e.editable?i("DiscoveryToolbar",{staticClass:"discoveryToolbar",attrs:{onAddProcess:e.insertProcess}}):e._e(),i("div",{staticClass:"graphBuilder",on:{drop:function(t){return e.onDrop(t)},dragover:function(t){return e.allowDrop(t)}}},[i("ModelBuilder",{ref:"blocks",attrs:{editable:e.editable,id:e.id,processes:e.processRegistry,collections:e.collections,parent:e.parent,parentSchema:e.parentSchema,value:e.value},on:{input:e.commit,error:e.errorHandler,showProcess:function(t){return e.emit("showProcess",t)},showCollection:function(t){return e.emit("showCollection",t)},showParameter:function(t){return e.emit("showProcessParameter",t)},editParameters:e.openParameterEditor,compactMode:function(e){return t.compactMode=e},selectionChanged:e.selectionChanged,historyChanged:e.historyChanged}})],1)],1)])},o=[],a=s("1d9a"),r=s("025e"),n=s("cbd9"),l=s("3115"),c=s("5472"),u={name:"VisualEditor",mixins:[l["a"]],components:{ModelBuilder:a["default"],DiscoveryToolbar:n["a"],FullscreenButton:c["a"]},props:{id:String,editable:{type:Boolean,default:!0},value:{type:Object,default:()=>null},parent:{type:Object,default:null},parentSchema:{type:Object,default:null},showDiscoveryToolbar:{type:Boolean,default:!1},title:{type:String},defaultValue:{}},computed:{...r["a"].mapState(["collections"]),...r["a"].mapGetters(["processRegistry"]),...r["a"].mapGetters("userProcesses",["supportsMath","isMathProcess"])},data(){return{canUndo:!1,canRedo:!1,compactMode:!1,hasSelection:!1,isMath:!1,isFullScreen:!1}},watch:{value(t){this.isMath=this.isMathProcess(t)}},methods:{commit(t){"undefined"!==typeof this.defaultValue&&r["a"].isObject(t)&&0===r["a"].size(t.process_graph)&&(t=this.defaultValue),this.$emit("input",t)},errorHandler(t,e=null){r["a"].exception(this,t,e)},selectionChanged(t,e){this.hasSelection=Boolean(t.filter(t=>t.$el.allowsDelete).length||e.length)},historyChanged(t,e){this.canUndo=!!t[e-1],this.canRedo=!!t[e+1]},allowDrop(t){t.preventDefault()},onDrop(t){var e=t.dataTransfer.getData("application/vnd.openeo-node");if(e){t.preventDefault();let s=JSON.parse(e);this.insertProcess(s,t.pageX,t.pageY)}},addParameter(){var t=[{name:"name",label:"Parameter name",schema:{type:"string"},default:null}];this.emit("showDataForm","Add Parameter",t,t=>{"string"===typeof t.name&&t.name.length>0&&this.$refs.blocks.addPgParameter(t)})},showExpressionModal(){let t={process:this.value,pgParameters:this.$refs.blocks.getPgParameters()},e={save:this.insertNodes};this.emit("showModal","ExpressionModal",t,e)},openParameterEditor(t,e,s="Edit",i=!0,o=null,a=null,r=null){let n={title:s,parameters:t,data:e,editable:i,selectParameterName:o,parent:r},l={};"function"===typeof a&&(l.save=a),this.emit("showModal","ParameterModal",n,l)},confirmClear(){var t=confirm("Do you really want to clear the existing model?");t&&this.clear()},clear(){this.$refs.blocks&&this.$refs.blocks.clear(),this.commit(null)},insertProcess(t,e=null,s=null){try{var i=this.$refs.blocks.getPositionForPageXY(e,s);this.$refs.blocks.addProcess(t.process_id,t.arguments,i)}catch(o){r["a"].exception(this,o)}},async insertNodes(t,e=!1){return await this.$refs.blocks.import({process_graph:t},{clear:e})}}},d=u,h=(s("4d98"),s("2877")),p=Object(h["a"])(d,i,o,!1,null,null,null);e["a"]=p.exports},"90f4":function(t,e,s){"use strict";s("206d")},c8ff:function(t,e,s){},c98e:function(t,e,s){},cbd9:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"discovery-toolbar"},[s("SearchBox",{model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),s("div",{staticClass:"search-results"},[s("Collections",{staticClass:"category",attrs:{collections:t.collections,searchTerm:t.searchTerm,offerDetails:!1,collapsed:t.collapsed},scopedSlots:t._u([{key:"summary",fn:function(e){var i=e.item;return[s("div",{staticClass:"discovery-entity",attrs:{draggable:t.supportsLoadCollection},on:{dragstart:function(e){return t.onDrag(e,"collection",i)}}},[s("div",{staticClass:"discovery-info",on:{click:function(e){return t.showCollectionInfo(i.id)}}},[s("strong",{attrs:{title:i.id}},[t._v(t._s(i.id))]),i.title?s("small",{attrs:{title:i.title}},[t._v(t._s(i.title))]):t._e()]),t.hasCollectionPreview(i)?s("button",{staticClass:"discovery-button",attrs:{type:"button",title:"View on map"},on:{click:function(e){return t.showCollectionPreview(i)}}},[s("i",{staticClass:"fas fa-map"})]):t._e(),t.supportsLoadCollection?s("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(e){return t.insertCollection(i)}}},[s("i",{staticClass:"fas fa-plus"})]):t._e()])]}}])}),s("Processes",{staticClass:"category",attrs:{processes:t.processes,searchTerm:t.searchTerm,offerDetails:!1,collapsed:t.collapsed},scopedSlots:t._u([{key:"summary",fn:function(e){var i=e.item;return[s("div",{staticClass:"discovery-entity",attrs:{draggable:"true"},on:{dragstart:function(e){return t.onDrag(e,"process",i)}}},[s("div",{staticClass:"discovery-info",on:{click:function(e){return t.showProcess(i)}}},[i.native?t._e():s("i",{staticClass:"custom-process fas fa-xs fa-sitemap",attrs:{title:"Custom Process"}}),s("strong",{attrs:{title:i.id}},[t._v(t._s(i.id))]),i.summary?s("small",{attrs:{title:i.summary}},[t._v(t._s(i.summary))]):t._e()]),s("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(e){return t.insertProcess(i)}}},[s("i",{staticClass:"fas fa-plus"})])])]}}])}),t.hasUdfRuntimes?s("UdfRuntimes",{staticClass:"category",attrs:{runtimes:t.udfRuntimes,searchTerm:t.searchTerm,offerDetails:!1,collapsed:t.collapsed},scopedSlots:t._u([{key:"summary",fn:function(e){var i=e.summary,o=e.item;return[s("div",{staticClass:"discovery-entity",attrs:{draggable:t.supportsRunUdf},on:{dragstart:function(e){return t.onDrag(e,"udf",{runtime:i.identifier,version:o.default})}}},[s("div",{staticClass:"discovery-info",on:{click:function(e){return t.showUdfInfo(i.identifier,o)}}},[s("strong",{attrs:{title:i.identifier}},[t._v(t._s(i.identifier)+" ("+t._s(o.default)+")")]),i.summary?s("small",{attrs:{title:i.summary}},[t._v(t._s(i.summary))]):t._e()]),t.supportsRunUdf?s("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(e){return t.insertUdf(i.identifier,o.default)}}},[s("i",{staticClass:"fas fa-plus"})]):t._e()])]}}],null,!1,1122562181)}):t._e(),s("FileFormats",{staticClass:"category",attrs:{formats:t.fileFormats,showInput:!1,heading:"Export File Formats",searchTerm:t.searchTerm,offerDetails:!1,collapsed:t.collapsed},scopedSlots:t._u([{key:"summary",fn:function(e){var i=e.item;return[s("div",{staticClass:"discovery-entity",attrs:{draggable:t.supportsSaveResult},on:{dragstart:function(e){return t.onDrag(e,"fileformat",i)}}},[s("div",{staticClass:"discovery-info",on:{click:function(e){return t.showFileFormatInfo(i)}}},[s("strong",{attrs:{title:i.name}},[t._v(t._s(i.name))]),i.title?s("small",{attrs:{title:i.title}},[t._v(t._s(i.title))]):t._e()]),t.supportsSaveResult?s("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(e){return t.insertFileFormat(i)}}},[s("i",{staticClass:"fas fa-plus"})]):t._e()])]}}])})],1)],1)},o=[],a=s("3115"),r=s("025e"),n=s("69d2"),l=s("a0e2"),c=s("9b5d"),u=s("2979"),d=s("d235"),h={name:"DiscoveryToolbar",mixins:[a["a"]],components:{Collections:n["a"],FileFormats:l["a"],Processes:c["a"],SearchBox:u["default"],UdfRuntimes:d["a"]},props:{onAddProcess:{type:Function,required:!0},collectionPreview:{type:Boolean,default:!1}},data(){return{searchTerm:"",collapsed:!0}},computed:{...r["a"].mapState(["predefinedProcesses","collections","udfRuntimes"]),...r["a"].mapState("userProcesses",["userProcesses"]),...r["a"].mapGetters(["supports","collectionDefaults","fileFormats"]),...r["a"].mapGetters("userProcesses",{getProcessById:"getAllById"}),supportsLoadCollection(){return!!this.getProcessById("load_collection")},supportsRunUdf(){return!!this.getProcessById("run_udf")},supportsSaveResult(){return!!this.getProcessById("save_result")},hasUdfRuntimes(){return r["a"].size(this.udfRuntimes)},processes(){return this.predefinedProcesses.concat(this.userProcesses)}},watch:{searchTerm(t,e){!t&&e?this.collapsed=!0:t&&!e&&(this.collapsed=!1)}},methods:{onDrag(t,e,s){let i=this.getNode(e,s);t.dataTransfer.setData("application/vnd.openeo-node",JSON.stringify(i)),t.dataTransfer.setData("text/plain",JSON.stringify(i,null,2))},showCollectionInfo(t){this.emit("showCollection",t)},hasCollectionPreview(t){return Boolean(this.collectionPreview&&r["a"].getPreviewLinkFromSTAC(t))},showCollectionPreview(t){this.emit("showCollectionPreview",t)},showProcess(t){this.emit("showProcess",t)},showUdfInfo(t,e){this.emit("showModal","UdfRuntimeModal",{id:t,data:e,version:e.default})},showFileFormatInfo(t){let e={id:t.name,format:this.fileFormats.output[t.name],type:"output"};this.emit("showModal","FileFormatModal",e)},getNode(t,e){switch(t){case"collection":return{process_id:"load_collection",arguments:this.collectionDefaults(e.id)};case"process":return{process_id:e.id,arguments:{}};case"udf":return{process_id:"run_udf",arguments:e};case"fileformat":return{process_id:"save_result",arguments:{format:e.name,options:{}}}}},insertCollection(t){let e=this.getNode("collection",t);this.onAddProcess(e)},insertProcess(t){let e=this.getNode("process",t);this.onAddProcess(e)},insertUdf(t,e){let s=this.getNode("udf",{runtime:t,version:e});this.onAddProcess(s)},insertFileFormat(t){let e=this.getNode("fileformat",t);this.onAddProcess(e)}}},p=h,f=(s("7b86"),s("3150"),s("2877")),m=Object(f["a"])(p,i,o,!1,null,"7822e0f0",null);e["a"]=m.exports},ccbe:function(t,e,s){"use strict";s("4525")},ceb0:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Tabs",{ref:"tabs",staticClass:"editor",attrs:{id:"customProcessContent",position:"bottom"}},[s("Tab",{attrs:{id:"visual",name:"Visual Model",icon:"fa-project-diagram",selected:!0,allowShow:t.canSwitchView},on:{show:t.showModel}},[s("VisualEditor",{ref:"graphBuilder",staticClass:"visualEditorTab",attrs:{editable:t.editable,parent:t.parent,parentSchema:t.parentSchema,value:t.modelValue,title:t.title,id:t.id+"_visual",showDiscoveryToolbar:t.showDiscoveryToolbar,defaultValue:t.defaultValue},on:{input:t.commit,error:t.onError},scopedSlots:t._u([{key:"file-toolbar",fn:function(){return[t._t("file-toolbar")]},proxy:!0},{key:"toolbar",fn:function(){return[t._t("toolbar")]},proxy:!0}],null,!0)})],1),s("Tab",{attrs:{id:"source",name:"Code",icon:"fa-code",allowShow:t.canSwitchView},on:{show:t.showCode}},[s("TextEditor",{ref:"sourceEditor",staticClass:"textEditorTab",attrs:{editable:t.editable,value:t.codeValue,title:t.title,id:t.id+"_text",language:"processgraph"},on:{input:t.commit,error:t.onError},scopedSlots:t._u([{key:"file-toolbar",fn:function(){return[t._t("file-toolbar")]},proxy:!0},{key:"toolbar",fn:function(){return[t._t("toolbar")]},proxy:!0}],null,!0)})],1)],1)},o=[],a=s("025e"),r=s("e7ea"),n=s("bdb2"),l=s("8c66"),c=s("0f29"),u={name:"Editor",components:{VisualEditor:l["a"],TextEditor:c["a"],Tabs:r["default"],Tab:n["default"]},props:{id:String,editable:{type:Boolean,default:!0},value:{type:Object,default:()=>null},title:{type:String},parent:{type:Object,default:null},parentSchema:{type:Object,default:null},showDiscoveryToolbar:{type:Boolean,default:!1},defaultValue:{}},watch:{value(){this.updateTab()}},data(){return{modelValue:null,codeValue:null,error:null}},mounted(){this.updateTab()},computed:{...a["a"].mapGetters("userProcesses",{getProcessById:"getAllById"})},methods:{...a["a"].mapActions("userProcesses",{readUserProcess:"read"}),showModel(){this.error=null,this.modelValue=this.value},showCode(){this.error=null,this.codeValue=this.value,this.$refs.sourceEditor.updateState()},updateTab(){"source"===this.$refs.tabs.getActiveTabId()?this.showCode():this.showModel()},commit(t){this.error=null,this.$emit("input",t)},onError(t){this.error=t},activeEditor(){return"source"===this.$refs.tabs.getActiveTabId()?this.$refs.sourceEditor:this.$refs.graphBuilder},async insertProcess(t){try{let e=this.getProcessById(t.process_id);null==e||e.native||await this.readUserProcess({data:e}),this.activeEditor().insertProcess(t)}catch(e){a["a"].exception(this,e)}},canSwitchView(){return!this.editable||null===this.error||(a["a"].exception(this,this.error,"Process Invalid Error"),!1)}}},d=u,h=(s("58d3"),s("2877")),p=Object(h["a"])(d,i,o,!1,null,null,null);e["default"]=p.exports},e8d7:function(t,e,s){"use strict";s("4229")},f08e:function(t,e,s){},fd61:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{minWidth:"85%",title:t.title},on:{closed:function(e){return t.$emit("closed")}}},[s("Job",{attrs:{job:t.job,currency:t.currency},scopedSlots:t._u([{key:"process-graph",fn:function(){return[s("Editor",{staticClass:"infoViewer",attrs:{value:t.job.process,editable:!1,id:"jobPgViewer"}})]},proxy:!0}])}),t.resultType?s("section",{staticClass:"vue-component result"},[s("h3",[t._v("Results")]),s("p",[s("em",[t._v("Below the metadata for the results of the batch job are shown.")])]),"Collection"===t.resultType?s("Collection",{attrs:{data:t.result},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",{staticClass:"hidden"})]},proxy:!0},{key:"spatial-extents",fn:function(e){return[s("MapViewer",{attrs:{id:"collectionMap",show:t.showMap,extents:e.extents}})]}}],null,!1,1959136896)}):s("Item",{attrs:{data:t.result},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",{staticClass:"hidden"})]},proxy:!0},{key:"location",fn:function(e){return[s("MapViewer",{attrs:{id:"itemMap",show:t.showMap,geoJson:e.geometry,extents:e.bbox}})]}}],null,!1,1029189681)})],1):t._e()],1)},o=[],a=s("025e"),r=s("2930"),n=s("7e7a"),l=s("ceb0"),c={name:"JobInfoModal",components:{Collection:()=>s.e("chunk-78794146").then(s.bind(null,"47ed")),Editor:l["default"],Item:()=>s.e("chunk-07b0a294").then(s.bind(null,"2263")),Job:n["a"],Modal:r["a"]},computed:{...a["a"].mapGetters(["currency"]),resultType(){return a["a"].isObject(this.result)?"Feature"===this.result.type?"Item":"Collection":null},title(){return"Batch Job: "+(this.job.title||"#"+this.job.id)}},props:{job:{type:Object},result:{type:Object,default:null}},data(){return{showMap:!1}},mounted(){this.$nextTick(()=>{this.showMap=!0})}},u=c,d=(s("e8d7"),s("2877")),h=Object(d["a"])(u,i,o,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-56fad238.971d57ef.js.map
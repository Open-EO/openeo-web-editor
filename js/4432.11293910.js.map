{"version":3,"file":"js/4432.11293910.js","mappings":"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","sources":["webpack://@openeo/web-editor/./node_modules/@radiantearth/stac-fields/I18N.js","webpack://@openeo/web-editor/./node_modules/@radiantearth/stac-fields/datatypes.js","webpack://@openeo/web-editor/./node_modules/@radiantearth/stac-fields/formatters.js","webpack://@openeo/web-editor/./node_modules/@radiantearth/stac-fields/helper.js"],"sourcesContent":["const Defaults = {\r\n\tcollatorOptions: {},\r\n\tnumberFormatterOptions: {\r\n\t\tmaximumFractionDigits: 10\r\n\t},\r\n\tdateFormatterOptions: {\r\n\t\tday: 'numeric',\r\n\t\tmonth: 'numeric',\r\n\t\tyear: 'numeric'\r\n\t},\r\n\tdateTimeFormatterOptions: {\r\n\t\tday: 'numeric',\r\n\t\tmonth: 'numeric',\r\n\t\tyear: 'numeric',\r\n\t\thour: 'numeric',\r\n\t\tminute: 'numeric',\r\n\t\tsecond: 'numeric',\r\n\t\ttimeZone: \"UTC\",\r\n\t\ttimeZoneName: \"short\"\r\n\t}\r\n};\r\n\r\nconst I18N = {\r\n\r\n\tlocales: [],\r\n\tcollator: new Intl.Collator(Defaults.collatorOptions),\r\n\tdateFormatter: new Intl.DateTimeFormat(Defaults.dateFormatterOptions),\r\n\tdateTimeFormatter: new Intl.DateTimeFormat(Defaults.dateTimeFormatterOptions),\r\n\tnumberFormatter: new Intl.NumberFormat(Defaults.numberFormatterOptions),\r\n\ttranslate: null, // function(value: string, vars: array|object = null) : string\r\n\r\n\tgetDefaults() {\r\n\t\treturn Defaults;\r\n\t},\r\n\r\n\tsetLocales(locales, dateFormatterOptions = {}, dateTimeFormatterOptions = {}, numberFormatterOptions = {}, collatorOptions = {}) {\r\n\t\tthis.locales = locales;\r\n\r\n\t\tcollatorOptions = Object.assign({}, Defaults.collatorOptions, collatorOptions);\r\n\t\tthis.collator = new Intl.Collator(locales, collatorOptions);\r\n\r\n\t\tdateFormatterOptions = Object.assign({}, Defaults.dateFormatterOptions, dateFormatterOptions);\r\n\t\tthis.dateFormatter = new Intl.DateTimeFormat(locales, dateFormatterOptions);\r\n\r\n\t\tdateTimeFormatterOptions = Object.assign({}, Defaults.dateTimeFormatterOptions, dateTimeFormatterOptions);\r\n\t\tthis.dateTimeFormatter = new Intl.DateTimeFormat(locales, dateTimeFormatterOptions);\r\n\r\n\t\tnumberFormatterOptions = Object.assign({}, Defaults.numberFormatterOptions, numberFormatterOptions);\r\n\t\tthis.numberFormatter = new Intl.NumberFormat(locales, numberFormatterOptions);\r\n\t},\r\n\r\n\tsetTranslator(fn) {\r\n\t\tthis.translate = fn;\r\n\t},\r\n\r\n\tformat(value, vars = null) {\r\n\t\tif (vars) {\r\n\t\t\tfor(let key in vars) {\r\n\t\t\t\tvalue = value.replaceAll(`{${key}}`, vars[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = I18N;","const _ = require('./helper');\r\nconst I18N = require('./I18N');\r\n\r\nconst DataTypes = {\r\n\r\n\tarray(arr, sort = false, unit = '') {\r\n\t\treturn _.toList(arr, sort, v => DataTypes.format(v, unit));\r\n\t},\r\n\t\r\n\tobject(obj) {\r\n\t\treturn _.toObject(obj, v => DataTypes.format(v));\r\n\t},\r\n\t\r\n\tnull(label = null) {\r\n\t\tif (label === null) {\r\n\t\t\tlabel = _.t('n/a');\r\n\t\t}\r\n\t\treturn _.toNothing(label);\r\n\t},\r\n\t\r\n\tnumber(num, unit = '') {\r\n\t\tif (typeof num !== 'number') {\r\n\t\t\tnum = parseFloat(num);\r\n\t\t}\r\n\t\treturn _.unit(I18N.numberFormatter.format(num), unit);\r\n\t},\r\n\r\n\tstring(str, unit = '') {\r\n\t\treturn _.unit(_.e(str).replace(/(\\r\\n|\\r|\\n){2,}/g, '<br>'), unit);\r\n\t},\r\n\t\r\n\tboolean(bool) {\r\n\t\treturn bool ? '✔️' : '❌';\r\n\t},\r\n\t\r\n\tformat(value, unit = '') {\r\n\t\tif (typeof value === 'boolean') {\r\n\t\t\treturn DataTypes.boolean(value);\r\n\t\t}\r\n\t\telse if (typeof value === 'number') {\r\n\t\t\treturn DataTypes.number(value, unit);\r\n\t\t}\r\n\t\telse if (typeof value === 'string') {\r\n\t\t\treturn DataTypes.string(value, unit);\r\n\t\t}\r\n\t\telse if (Array.isArray(value)) {\r\n\t\t\treturn DataTypes.array(value, unit);\r\n\t\t}\r\n\t\telse if (_.isObject(value)) {\r\n\t\t\treturn DataTypes.object(value);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = DataTypes;","const _ = require('./helper');\nconst DataTypes = require('./datatypes');\nconst I18N = require('./I18N');\nconst Registry = require('./registry');\n\nconst Formatters = {\n\n\tallowHtmlInCommonMark: false,\n\n\tformatUrl(value, field, spec = {}, context = null, parent = null) {\n\t\tlet title = _.isObject(parent) && typeof parent === 'string' ? parent.title : value;\n\t\treturn _.toLink(value, title, parent.rel || \"\");\n\t},\n\n\tformatLink(value) {\n\t\treturn _.toList(value, false, value => _.toLink(value.href, value.title, value.rel));\n\t},\n\n\tformatMediaType(value, field, spec = {}) {\n\t\treturn _.e(_.t(Formatters._formatMediaType(value, field, spec)));\n\t},\n\n\t_formatMediaType(value, field, spec = {}) {\n\t\tlet short = Boolean(spec.shorten);\n\n\t\tconst mediaType = Registry.getDependency('content-type');\n\t\tif (!mediaType) {\n\t\t\treturn short ? \"\" : _.e(value);\n\t\t}\n\n\t\tlet media;\n\t\ttry {\n\t\t\tmedia = mediaType.parse(value);\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t\treturn short ? \"\" : _.e(value);\n\t\t}\n\n\t\tswitch(media.type) {\n\t\t\t// not supported: image/vnd.stac.geotiff; cloud-optimized=true\n\t\t\tcase 'image/tiff':\n\t\t\t\tif (media.parameters.application === \"geotiff\") {\n\t\t\t\t\tif (media.parameters.profile === \"cloud-optimized\") {\n\t\t\t\t\t\treturn short ? 'COG' : 'Cloud-Optimized GeoTIFF image';\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn short ? 'GeoTiff' : 'GeoTIFF image';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn short ? 'TIFF' : 'TIFF image';\n\t\t\t\t}\n\t\t\tcase 'image/jp2':\n\t\t\t\treturn short ? 'JPEG 2000' : 'JPEG 2000 image';\n\t\t\tcase 'image/png':\n\t\t\tcase 'image/apng':\n\t\t\tcase 'image/vnd.mozilla.apng':\n\t\t\t\treturn short ? 'PNG' : 'PNG image';\n\t\t\tcase 'image/gif':\n\t\t\t\treturn short ? 'GIF' : 'GIF image';\n\t\t\tcase 'image/jpeg':\n\t\t\tcase 'image/jpg':\n\t\t\t\treturn short ? 'JPEG' : 'JPEG image';\n\t\t\tcase 'image/webp':\n\t\t\t\treturn short ? 'WebP' : 'WebP image';\n\t\t\tcase 'image/bmp':\n\t\t\tcase 'image/x-bmp':\n\t\t\tcase 'image/x-ms-bmp':\n\t\t\tcase 'image/wbmp':\n\t\t\t\treturn short ? 'Bitmap' : 'Bitmap image';\n\t\t\tcase 'image/svg+xml':\n\t\t\t\treturn short ? 'SVG' : 'SVG vector image';\n\t\t\tcase 'text/csv':\n\t\t\t\treturn short ? 'CSV' : 'Comma-separated values (CSV)';\n\t\t\tcase 'text/xml':\n\t\t\tcase 'application/xml':\n\t\t\t\treturn 'XML';\n\t\t\tcase 'text/json':\n\t\t\tcase 'application/json':\n\t\t\t\treturn 'JSON';\n\t\t\tcase 'application/x-ndjson':\n\t\t\t\treturn short ? 'NDJSON' : 'Newline Delimited JSON';\n\t\t\tcase 'text/yaml':\n\t\t\tcase 'text/vnd.yaml':\n\t\t\tcase 'text/x-yaml':\n\t\t\tcase 'application/x-yaml':\n\t\t\t\treturn 'YAML';\n\t\t\tcase 'application/geo+json':\n\t\t\t\treturn 'GeoJSON';\n\t\t\tcase 'application/gml+xml':\n\t\t\t\treturn 'GML';\n\t\t\tcase 'application/vnd.google-earth.kml+xml':\n\t\t\tcase 'application/vnd.google-earth.kmz':\n\t\t\t\treturn 'KML';\n\t\t\tcase 'application/geopackage+vnd.sqlite3':\n\t\t\tcase 'application/geopackage+sqlite3':\n\t\t\t\treturn 'GeoPackage';\n\t\t\tcase 'text/html':\n\t\t\tcase 'application/html':\n\t\t\tcase 'application/xhtml+xml':\n\t\t\t\treturn short ? 'HTML' : 'HTML (Website)';\n\t\t\tcase 'text/plain':\n\t\t\t\treturn short ? 'Text' : 'Text document';\n\t\t\tcase 'text/markdown':\n\t\t\t\treturn short ? 'Markdown' : 'Markdown document';\n\t\t\tcase 'application/pdf':\n\t\t\t\treturn short ? 'PDF' : 'PDF document';\n\t\t\tcase 'application/zip':\n\t\t\t\treturn short ? 'ZIP' : 'ZIP archive';\n\t\t\tcase 'application/gzip':\n\t\t\t\treturn short ? 'GZIP' : 'GZIP archive';\n\t\t\tcase 'application/x-hdf':\n\t\t\t\treturn 'HDF';\n\t\t\tcase 'application/netcdf':\n\t\t\tcase 'application/x-netcdf':\n\t\t\t\treturn 'NetCDF';\n\t\t\tcase 'application/x.mrf':\n\t\t\t\treturn short ? 'MRF' : 'Meta Raster Format';\n\t\t\tcase 'application/wmo-GRIB2':\n\t\t\t\treturn 'GRIB2';\n\t\t\tcase 'application/octet-stream':\n\t\t\t\treturn short ? 'Binary' : 'Binary file';\n\t\t\tcase 'application/vnd.laszip':\n\t\t\t\treturn 'LASzip';\n\t\t\tcase 'application/vnd.laszip+copc': // https://github.com/copcio/copcio.github.io/issues/53\n\t\t\t\treturn short ? 'COPC' : 'Cloud-Optimized Point Cloud (LASzip)';\n\t\t\tcase 'application/vnd+zarr': // https://github.com/zarr-developers/zarr-specs/issues/123\n\t\t\t\treturn 'Zarr';\n\t\t\tcase 'application/x-parquet': // Inofficial\n\t\t\tcase 'application/vnd.apache.parquet': // Official (tbc): https://github.com/opengeospatial/geoparquet/issues/115\n\t\t\t\treturn 'Parquet'\n\t\t\tcase 'application/vnd.pmtiles':\n\t\t\t\treturn 'PMTiles';\n\t\t\tcase 'application/vnd.cov+json':\n\t\t\t\treturn 'CoverageJSON';\n\t\t\tcase 'application/vnd.flatgeobuf':\n\t\t\t\treturn 'FlatGeobuf'; // inofficial: https://github.com/flatgeobuf/flatgeobuf/discussions/112\n\t\t\tdefault: {\n\t\t\t\tlet [group, format] = media.type.split('/');\n\t\t\t\tformat = _.formatKey(format.replace(/^(vnd|x)[.+-]/, ''));\n\t\t\t\tif (short) {\n\t\t\t\t\treturn format;\n\t\t\t\t}\n\t\t\t\tswitch(group) {\n\t\t\t\t\tcase 'audio':\n\t\t\t\t\t\treturn `${format} audio`;\n\t\t\t\t\tcase 'image':\n\t\t\t\t\t\treturn `${format} image`;\n\t\t\t\t\tcase 'font':\n\t\t\t\t\t\treturn `Font`;\n\t\t\t\t\tcase 'model':\n\t\t\t\t\t\treturn `${format} 3D model`;\n\t\t\t\t\tcase 'video':\n\t\t\t\t\t\treturn `${format} video`;\n\t\t\t\t\tcase 'text':\n\t\t\t\t\tcase 'application':\n\t\t\t\t\t\treturn format;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tformatTimestamp(value) {\n\t\tif (typeof value === 'string') {\n\t\t\ttry {\n\t\t\t\treturn I18N.dateTimeFormatter.format(new Date(value));\n\t\t\t} catch (error) {}\n\t\t}\n\t\treturn DataTypes.null();\n\t},\n\n\tformatPercent0to1(value, field, spec = {}) {\n\t\treturn DataTypes.number(value * 100, spec.unit);\n\t},\n\n\tformatDate(value) {\n\t\tif (typeof value === 'string') {\n\t\t\ttry {\n\t\t\t\treturn I18N.dateFormatter.format(new Date(value));\n\t\t\t} catch (error) {}\n\t\t}\n\t\treturn DataTypes.null();\n\t},\n\n\tformatDuration(value) {\n\t\tif (typeof value === 'string') {\n\t\t\tconst lib = Registry.getDependency('@musement/iso-duration');\n\t\t\tif (!lib) {\n\t\t\t\treturn _.e(value);\n\t\t\t}\n\t\t\tconst { isoDuration, en } = lib;\n\t\t\tisoDuration.setLocales({ en }, { fallbackLocale: 'en' });\n\t\t\tlet formatted = isoDuration(value).humanize('en');\n\t\t\tif (formatted.length === 0) {\n\t\t\t\treturn _.e(_.t('none'));\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn _.e(formatted);\n\t\t\t}\n\t\t}\n\t\treturn DataTypes.null();\n\t},\n\n\tformatLanguageCode(value) {\n\t\tif (Array.isArray(value)) {\n\t\t\treturn _.toList(value, true, Formatters.formatLanguageCode, false);\n\t\t}\n\t\telse if (typeof value !== 'string' || value.length < 2) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\tconst list = require('./languages.json');\n\t\tconst [code, ...rest] = value.split('-');\n\t\tif (code in list) {\n\t\t\tconst name = list[code];\n\t\t\tif (rest.length > 0) {\n\t\t\t\treturn _.e(_.t(`${name} (${rest.join(' ')})`));\n\t\t\t}\n\t\t\treturn _.e(_.t(name));\n\t\t}\n\t\treturn _.e(_.t(value));\n\t},\n\n\tformatLicense(value, field, spec = {}, context = null) {\n\t\tif (typeof value !== 'string' || value.length === 0) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\t// We could use the spdx-license-ids and/or spdx-to-html packages previously used in STAC Browser,\n\t\t// but let's try it without additional dependency for now.\n\t\tif (value !== 'proprietary' && value !== 'various' && value.match(/^[\\w\\.\\-]+$/i)) { // SPDX\n\t\t\treturn _.toLink(`https://spdx.org/licenses/${value}.html`, value, \"license\");\n\t\t}\n\t\t\n\t\tlet licenses = Array.isArray(context.links) ? context.links.filter(link => (_.isObject(link) && typeof link.href === 'string' && link.rel === 'license')) : [];\n\t\tif (licenses.length > 0) {\n\t\t\treturn _.toList(licenses, false, link => _.toLink(link.href, link.title || value, \"license\"));\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.string(value);\n\t\t}\n\t},\n\n\tformatProviders(value) {\n\t\treturn _.toList(value, false, provider => {\n\t\t\tlet name = provider.name;\n\t\t\tlet roles = '';\n\t\t\tlet description = '';\n\t\t\tif (typeof provider.url === 'string' && provider.url.length > 0) {\n\t\t\t\tname = _.toLink(provider.url, name);\n\t\t\t}\n\t\t\tif (Array.isArray(provider.roles) && provider.roles.length > 0) {\n\t\t\t\troles = provider.roles.map(r => DataTypes.format(r)).join(', ');\n\t\t\t\troles = ` (<em>${roles}</em>)`;\n\t\t\t}\n\t\t\tif (typeof provider.description === 'string' && provider.description.length > 0) {\n\t\t\t\tdescription = Formatters.formatCommonMark(provider.description);\n\t\t\t}\n\t\t\treturn `${name}${roles}${description}`;\n\t\t});\n\t},\n\n\tformatCommonMark(value) {\n\t\tif (typeof value !== 'string' || value.length === 0) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\tconst commonmark = Registry.getDependency('commonmark');\n\t\tlet html;\n\t\tif (commonmark) {\n\t\t\tlet reader = new commonmark.Parser();\n\t\t\tlet writer = new commonmark.HtmlRenderer({safe: !Formatters.allowHtmlInCommonMark, smart: true});\n\t\t\thtml = writer.render(reader.parse(value));\n\t\t}\n\t\telse if (Formatters.allowHtmlInCommonMark) {\n\t\t\thtml = value;\n\t\t}\n\t\telse {\n\t\t\thtml = _.e(value);\n\t\t}\n\t\treturn `<div class=\"description\">${html}</div>`;\n\t},\n\n\tformatSoftware(value) {\n\t\tif (!_.isObject(value)) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\tlet list = [];\n\t\tfor(let software in value) {\n\t\t\tlet version = value[software];\n\t\t\tif ((typeof version === 'string' && version.length > 0) || typeof version === 'number') {\n\t\t\t\tlist.push(`${software} (${version})`);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlist.push(software);\n\t\t\t}\n\t\t}\n\t\treturn _.toList(list, true, null, false);\n\t},\n\n\tformatDOI(value) {\n\t\tvalue = DataTypes.format(value);\n\t\treturn _.toLink(`http://doi.org/${value}`, value);\n\t},\n\n\tformatCRS(value) {\n\t\treturn _.toList(value, false, value => {\n\t\t\tif (typeof value === 'string') {\n\t\t\t\tlet title = value\n\t\t\t\t\t.replace(/^https?:\\/\\/www\\.opengis\\.net\\/def\\/crs\\//i, '') // HTTP(s) URI\n\t\t\t\t\t.replace(/^urn:ogc:def:crs:/i, ''); // OGC URN\n\t\t\t\treturn _.toLink(value, title);\n\t\t\t}\n\t\t\treturn DataTypes.format(value);\n\t\t});\n\t},\n\n\tformatEPSG(value) {\n\t\t// Remove leading 'epsg:' which people sometimes prepend\n\t\tif (typeof value === 'string') {\n\t\t\tvalue = value.replace(/^epsg:/i, '');\n\t\t}\n\t\tvalue = parseInt(value, 10);\n\t\tif (value > 0) {\n\t\t\treturn _.toLink(`http://epsg.io/${value}`, value);\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t},\n\n\tformatExtent(value, field, spec = {}) {\n\t\tif (!Array.isArray(value) || value.length < 2) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\telse if (value[0] === value[1]) {\n\t\t\treturn DataTypes.format(value[0], spec.unit);\n\t\t}\n\t\telse if (value[0] === null) {\n\t\t\treturn `< ${DataTypes.format(value[1], spec.unit)}`;\n\t\t}\n\t\telse if (value[1] === null) {\n\t\t\treturn `> ${DataTypes.format(value[0], spec.unit)}`;\n\t\t}\n\t\telse {\n\t\t\treturn value.map(v => DataTypes.format(v, spec.unit)).join(' – ');\n\t\t}\n\t},\n\n\tformatHexColor(value) {\n\t\tif (typeof value !== 'string' || !value.match(/^#?[\\dA-F]{3,8}$/i)) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\tif (value.startsWith('#')) {\n\t\t\tvalue = value.substring(1);\n\t\t}\n\t\treturn `<div class=\"color\" style=\"background-color: #${value}\"><code class=\"color-code\">#${value}</code></div>`;\n\t},\n\n\tformatPROJJSON(value) {\n\t\tif (!_.isObject(value)) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\tif (_.isObject(value.id) && value.id.authority === 'EPSG' && typeof value.code === 'number' && value.code > 0) {\n\t\t\treturn 'EPSG ' + Formatters.formatEPSG(value);\n\t\t}\n\t\telse if (typeof value.name === 'string') {\n\t\t\treturn DataTypes.string(value.name);\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.object(value);\n\t\t}\n\t},\n\n\tformatTemporalExtent(value, field, spec = {}) {\t\n\t\tif (!Array.isArray(value) || value.length !== 2) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\tvalue = value.map(d => {\n\t\t\ttry {\n\t\t\t\treturn d ? new Date(d) : null;\n\t\t\t} catch(e) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\ttry {\n\t\t\tconst [start, end] = value;\n\t\t\tif (start || end) {\n\t\t\t\tconst base = spec.shorten ? I18N.dateFormatter : I18N.dateTimeFormatter;\n\t\t\t\tif (!start) {\n\t\t\t\t\treturn _.t(\"Until {0}\", [base.format(end)]);\n\t\t\t\t}\n\t\t\t\telse if (!end) {\n\t\t\t\t\treturn _.t(\"{0} until present\", [base.format(start)]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn base.formatRange(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {}\n\n\t\treturn DataTypes.null();\n\t},\n\n\tformatTemporalExtents(value, field, spec = {}) {\n\t\tlet sortExtents = (a,b) => {\n\t\t\tif (a[0] === null) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn I18N.collator.compare(a[0], b[0]);\n\t\t\t}\n\t\t};\n\t\treturn _.toList(value, sortExtents, v => Formatters.formatTemporalExtent(v, field, spec));\n\t},\n\n\tformatWKT2(value) {\n\t\tif (typeof value !== 'string') {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\t\n\t\t// This is a VERY simplistic WKT2 formatter, which may fail to render properly in some cases.\n\t\tlet indent = -1;\n\t\tlet formatted;\n\t\ttry {\n\t\t\tformatted = value.replace(/([A-Z]+)\\[|\\]/ig, (match, keyword) => {\n\t\t\t\tif (match === ']') {\n\t\t\t\t\tindent--;\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tindent++;\n\t\t\t\t\tlet tabs = \"  \".repeat(indent);\n\t\t\t\t\treturn `\\n${tabs}${keyword}[`;\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {\n\t\t\t// In case the formatting did not work properly\n\t\t\t// (usually the number of [ and ] doesn't match)\n\t\t\t// just return the unformatted value\n\t\t\tformatted = value;\n\t\t\t\n\t\t}\n\n\t\treturn `<pre>${formatted}</pre>`;\n\t},\n\n\tfileSizeUnits: ['B', 'kB', 'MB', 'GB', 'TB'],\n\n\tformatFileSize(value) {\n\t\tif (typeof value !== 'number') {\n\t\t\treturn DataTypes.format(value);\n\t\t}\n\t\tvar i = value == 0 ? 0 : Math.floor( Math.log(value) / Math.log(1024) );\n\t\treturn _.unit(( value / Math.pow(1024, i) ).toFixed(2) * 1, Formatters.fileSizeUnits[i]);\n\t},\n\n\tformatChecksum(value) {\n\t\tif (typeof value !== 'string') {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\tconst multihash = Registry.getDependency('multihashes');\n\t\tif (!multihash) {\n\t\t\treturn _.e(value);\n\t\t}\n\n\t\ttry {\n\t\t\tconst meta = multihash.decode(_.hexToUint8(value));\n\t\t\tconst name = _.e(meta.name);\n\t\t\tconst hex = _.e(_.uint8ToHex(meta.digest));\n\t\t\treturn `<div class=\"checksum\"><input class=\"checksum-input\" size=\"32\" value=\"${hex}\" readonly><br><span class=\"checksum-algo\">${_.t('Hashing algorithm:')} <strong>${name}</strong></span></div>`;\n\t\t} catch (error) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t},\n\n\tfileDataTypes: {\n\t\t\"int8\": \"8-bit integer\",\n\t\t\"int16\": \"16-bit integer\",\n\t\t\"int32\": \"32-bit integer\",\n\t\t\"int64\": \"64-bit integer\",\n\t\t\"uint8\": \"unsigned 8-bit integer\",\n\t\t\"uint16\": \"unsigned 16-bit integer\",\n\t\t\"uint32\": \"unsigned 32-bit integer\",\n\t\t\"uint64\": \"unsigned 64-bit integer\",\n\t\t\"float16\": \"16-bit float\",\n\t\t\"float32\": \"32-bit float\",\n\t\t\"float64\": \"64-bit float\",\n\t\t\"cint16\": \"16-bit complex integer\",\n\t\t\"cint32\": \"32-bit complex integer\",\n\t\t\"cfloat32\": \"32-bit complex float\",\n\t\t\"cfloat64\": \"64-bit complex float\"\n\t},\n\n\tformatFileDataType(value) {\n\t\tif (value === \"other\") {\n\t\t\treturn _.t(\"non-standard\");\n\t\t}\n\t\telse if (typeof value === 'string' && value in Formatters.fileDataTypes) {\n\t\t\treturn _.abbrev(_.t(value), _.t(Formatters.fileDataTypes[value]));\n\t\t}\n\n\t\treturn DataTypes.null();\n\t},\n\n\tformatTransform(value) {\n\t\tif (Array.isArray(value) && value.length % 3 === 0) {\n\t\t\tlet rows = [];\n\t\t\tfor (let i = 0; i < value.length; i = i+3) {\n\t\t\t\tlet chunk = value.slice(i, i + 3);\n\t\t\t\trows.push(`[${Formatters.formatCSV(chunk)}]`);\n\t\t\t}\n\t\t\treturn rows.join('<br>');\n\t\t}\n\t\telse {\n\t\t\treturn Formatters.formatCSV(value);\n\t\t}\n\t},\n\n\tformatShape(value, field, spec = {}) {\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(x => DataTypes.format(x, spec.unit)).join(' × ');\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.format(value, spec.unit);\n\t\t}\n\t},\n\n\tformatCSV(value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tlet numeric = value.find(v => typeof v === 'number') !== undefined;\n\t\t\t// If there's potentially a comma in the values (decimal or thousand separators in numbers), use semicolon instead of comma.\n\t\t\treturn value.map(DataTypes.format).join(numeric ? '; ' : ', ');\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.format(value);\n\t\t}\n\t},\n\n\tformatImage(value, field) { // from url or link\n\t\tlet title = \"\";\n\t\tlet src = null;\n\t\tif (_.isObject(value)) {\n\t\t\tsrc = value.href;\n\t\t\ttitle = value.title || \"\";\n\t\t}\n\t\telse if (typeof value === 'string') {\n\t\t\tsrc = value;\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.format(src);\n\t\t}\n\n\t\treturn `<img src=\"${_.e(src)}\" title=\"${_.e(title)}\" class=\"${_.e(field.replace(':', '_'))}\">`;\n\t},\n\n\tformatPhone(value) {\n\t\treturn _.toLink(`tel:${value}`, value);\n\t},\n\n\tformatEmail(value) {\n\t\treturn _.toLink(`mailto:${value}`, value);\n\t},\n\n\tformatConcepts(value) {\n\t\treturn _.toList(value, false, concept => {\n\t\t\tif (!_.isObject(concept)) {\n\t\t\t\treturn DataTypes.format(concept);\n\t\t\t}\n\n\t\t\tlet html = \"\";\n\t\t\tif (concept.title) {\n\t\t\t\tlet title = concept.title;\n\t\t\t\tif (concept.url) {\n\t\t\t\t\ttitle = _.toLink(concept.url, concept.title);\n\t\t\t\t}\n\t\t\t\thtml += `<strong>${title}</strong> (<code>${_.e(concept.id)}</code>)`;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet title = concept.id;\n\t\t\t\tif (concept.url) {\n\t\t\t\t\ttitle = _.toLink(concept.url, concept.id);\n\t\t\t\t}\n\t\t\t\thtml += `<strong><code>${title}</code></strong>`;\n\t\t\t}\n\t\t\tif (concept.description) {\n\t\t\t\thtml += `<br><small>${_.e(concept.description)}</small>`;\n\t\t\t}\n\t\t\treturn html;\n\t\t});\n\t},\n\n\tformatAddress(value) { // array or object\n\t\treturn _.toList(value, false, address => {\n\t\t\tif (!_.isObject(address)) {\n\t\t\t\treturn DataTypes.format(address);\n\t\t\t}\n\n\t\t\tlet lines = Array.isArray(address.deliveryPoint) ? address.deliveryPoint.slice(0) : [];\n\n\t\t\tif (address.postalCode && address.city) {\n\t\t\t\t// Try to create a compact address\n\t\t\t\tlet line = `${address.postalCode} ${address.city}`;\n\t\t\t\tif (address.administrativeArea) {\n\t\t\t\t\tline += ` (${address.administrativeArea})`;\n\t\t\t\t}\n\t\t\t\tif (typeof address.country === 'string' && address.country.length > 0) {\n\t\t\t\t\tif (address.country.length === 2 && address.country.toUpperCase() === address.country) { // is ISO code\n\t\t\t\t\t\tline = address.country + '-' + line;\n\t\t\t\t\t\tlines.push(line);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlines.push(line);\n\t\t\t\t\t\tlines.push(address.country.toUpperCase());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Long version of the address\n\t\t\t\tif (address.city) {\n\t\t\t\t\tlines.push(address.city);\n\t\t\t\t}\n\t\t\t\tif (address.administrativeArea) {\n\t\t\t\t\tlines.push(address.administrativeArea);\n\t\t\t\t}\n\t\t\t\tif (address.postalCode) {\n\t\t\t\t\tlines.push(address.postalCode);\n\t\t\t\t}\n\t\t\t\tif (typeof address.country === 'string' && address.country.length > 0) {\n\t\t\t\t\tlines.push(address.country.toUpperCase());\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn DataTypes.string(lines.join(\"\\n\\n\"));\n\t\t});\n\t},\n\n\tformatGridCode(value) {\n\t\tif (typeof value !== 'string') {\n\t\t\treturn DataTypes.format(value);\n\t\t}\n\n\t\tlet splitHalf = function(parts, value, labelA, labelB) {\n\t\t\tlet len = value.length;\n\t\t\tif ((len % 2) === 1) {\n\t\t\t\tparts.push(`Code: ${value}`);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet mid = len/2;\n\t\t\t\tlet a = value.substring(0, mid);\n\t\t\t\tparts.push(`${labelA}: ${a}`);\n\t\t\t\tlet b = value.substring(mid, len);\n\t\t\t\tparts.push(`${labelB}: ${b}`);\n\t\t\t}\n\t\t};\n\n\t\tlet [designator, code] = value.split(/-(.*)/);\n\t\tlet parts = [];\n\t\tswitch(designator) {\n\t\t\tcase 'MGRS': \n\t\t\t\tparts.push(_.abbrev(_.t(designator), _.t('Military Grid Reference System')));\n\t\t\t\tlet [, utm, band, sq, coord] = code.match(/^(\\d{2})([C-X])([A-Z]{2})(\\d*)$/);\n\t\t\t\tparts.push(`${_.t(\"UTM Zone\")}: ${utm}`);\n\t\t\t\tparts.push(`${_.t(\"Latitude Band\")}: ${band}`);\n\t\t\t\tparts.push(`${_.t(\"Square Identifier\")}: ${sq}`);\n\t\t\t\tif (coord) {\n\t\t\t\t\tsplitHalf(parts, coord, _.t(\"Easting\"), _.t(\"Northing\"));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'MSIN':\n\t\t\t\tparts.push(_.t('MODIS Sinusoidal Tile Grid'));\n\t\t\t\tsplitHalf(parts, code, _.t('Horizontal'), _.t('Vertical'));\n\t\t\t\tbreak;\n\t\t\tcase 'WRS1':\n\t\t\tcase 'WRS2':\n\t\t\t\tlet version = designator.substring(3,4);\n\t\t\t\tparts.push(_.abbrev(_.t('WRS-' + version), _.t('Worldwide Reference System ' + version)));\n\t\t\t\tsplitHalf(parts, code, _.t('Path'), _.t('Row'));\n\t\t\t\tbreak;\n\t\t\tcase 'DOQ':\n\t\t\t\tparts.push(_abbrev(_.t(designator), _.t('Digital Orthophoto Quadrangle')));\n\t\t\t\tparts.push(`${_.t(\"Quadrangle\")}: ${code}`);\n\t\t\t\tbreak;\n\t\t\tcase 'DOQQ':\n\t\t\t\tparts.push(_abbrev(_.t(designator), _.t('Digital Orthophoto Quarter Quadrangle')));\n\t\t\t\tlet quad = code.substr(0, code.length - 2);\n\t\t\t\tparts.push(`${_.t(\"Quadrangle\")}: ${quad}`);\n\t\t\t\tlet quarter = code.substr(-2);\n\t\t\t\tlet a = quarter[0] === 'N' ? _.t('North') : _.t('South');\n\t\t\t\tlet b = quarter[1] === 'E' ? _.t('East') : _.t('West');\n\t\t\t\tparts.push(`${_.t(\"Quarter\")}: ${a} ${b}`);\n\t\t\t\tbreak;\n\t\t\tcase 'MXRA':\n\t\t\t\tparts.push(_.t('Maxar ARD Tile Grid'));\n\t\t\t\tlet [zone, quadkey] = code.split(/-(.*)/);\n\t\t\t\tif (zone.startsWith('Z')) {\n\t\t\t\t\tzone = zone.substring(1);\n\t\t\t\t}\n\t\t\t\tparts.push(`${_.t(\"UTM Zone\")}: ${zone}`);\n\t\t\t\tparts.push(`${_.t(\"Quadkey\")}: ${quadkey}`);\n\t\t\t\tbreak;\n\t\t\tcase 'EASE':\n\t\t\t\tlet [dggs, components] = code.split('-');\n\t\t\t\tif (dggs === 'DGGS') {\n\t\t\t\t\tparts.push(_.t('EASE-DGGS'));\n\t\t\t\t\tlet [level, rowcol, ...fractions] = components.split('.');\n\t\t\t\t\tparts.push(`${_.t(\"Level\")}: ${level}`);\n\t\t\t\t\tif (rowcol.length === 6) {\n\t\t\t\t\t\tparts.push(`${_.t(\"Level 0 row cell\")}: ${rowcol.substring(0,3)}`);\n\t\t\t\t\t\tparts.push(`${_.t(\"Level 0 column cell\")}: ${rowcol.substring(3,6)}`);\n\t\t\t\t\t\tfor(let i in fractions) {\n\t\t\t\t\t\t\tlet value = fractions[i];\n\t\t\t\t\t\t\tif (value.length === 2) {\n\t\t\t\t\t\t\t\tparts.push(`${_.t(\"Fraction of level {i} row cell\", {i})}: ${value[0]}`);\n\t\t\t\t\t\t\t\tparts.push(`${_.t(\"Fraction of level {i} column cell\", {i})}: ${value[1]}`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 'CDEM':\n\t\t\t\tlet [, n, e] = code.match(/^([A-Z]\\d+)([A-Z]\\d+)$/);\n\t\t\t\tparts.push(_.t(\"Copernicus Digital Elevation Model Grid\"));\n\t\t\t\tparts.push(`${_.t(\"Easting\")}: ${e}`);\n\t\t\t\tparts.push(`${_.t(\"Northing\")}: ${n}`);\n\t\t\tdefault:\n\t\t\t\tparts.push(value);\n\t\t}\n\n\t\treturn parts.join('<br>');\n\t}\n\n};\n\nmodule.exports = Formatters;","const I18N = require('./I18N');\n\nconst _ = {\n\n\te(str) {\n\t\tif (typeof str !== 'string') {\n\t\t\tstr = String(str);\n\t\t}\n\t\treturn str.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, '&apos;');\n\t},\n\n\tt(value, vars = null) {\n\t\tif (typeof I18N.translate === 'function') {\n\t\t\treturn I18N.translate(value, vars);\n\t\t}\n\t\telse {\n\t\t\treturn I18N.format(value, vars);\n\t\t}\n\t},\n\t\n\ttoNothing(label = null) {\n\t\tif (label === null) {\n\t\t\tlabel = _.t('n/a');\n\t\t}\n\t\treturn `<i class=\"null\">${label}</i>`;\n\t},\n\n\ttoList(list, sort = false, formatter = null, ordered = null) {\n\t\tlet tag = ordered === true ? 'ol' : 'ul';\n\t\tif (!Array.isArray(list)) {\n\t\t\tlist = [list];\n\t\t}\n\t\tif (sort) {\n\t\t\tlist = list.slice(0);\n\t\t\tif (typeof sort === 'function') {\n\t\t\t\tlist.sort(sort);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlist.sort();\n\t\t\t}\n\t\t\tif (ordered === null) {\n\t\t\t\ttag = 'ol';\n\t\t\t}\n\t\t}\n\t\tif (typeof formatter === 'function') {\n\t\t\tlist = list.map(formatter);\n\t\t}\n\t\tif (list.length === 0) {\n\t\t\treturn _.toNothing();\n\t\t}\n\t\telse if (list.length === 1) {\n\t\t\treturn list[0];\n\t\t}\n\t\telse {\n\t\t\treturn `<${tag}><li>${list.join(\"</li><li>\")}</li></${tag}>`;\n\t\t}\n\t},\n\n\ttoLink(url, title = \"\", rel = \"\", target = \"_blank\") {\n\t\tif (!title) {\n\t\t\tif (url.length > 50) {\n\t\t\t\ttitle = url.replace(/^\\w+:\\/\\/([^\\/]+)((\\/[^\\/\\?]+)*\\/([^\\/\\?]+)(\\?.*)?)?$/i, function(...x) {\n\t\t\t\t\tif (x[4]) {\n\t\t\t\t\t\treturn x[1] + '​/[…]/​' + x[4]; // There are invisible zero-width whitespaces after and before the slashes. It allows breaking the link in the browser. Be careful when editing.\n\t\t\t\t\t}\n\t\t\t\t\treturn x[1];\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttitle = url.replace(/^\\w+:\\/\\//i, '');\n\t\t\t}\n\t\t}\n\t\treturn `<a href=\"${_.e(url)}\" rel=\"${_.e(rel)}\" target=\"${_.e(target)}\">${_.e(title)}</a>`;\n\t},\n\n\ttoObject(obj, formatter = null, keyFormatter = null, keyOrder = [], filter = null, path = []) {\n\t\tlet html = '<dl>';\n\t\tlet keys = Array.isArray(keyOrder) && keyOrder.length >= 2 ? keyOrder : Object.keys(obj);\n\t\tfor(let key of keys) {\n\t\t\tif (!(key in obj) || (typeof filter === 'function' && path.length > 0 && !filter(path[0], path.concat([key]))) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet label;\n\t\t\tif (typeof keyFormatter === 'function') {\n\t\t\t\tlabel = keyFormatter(key, obj);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlabel = _.formatKey(key, true);\n\t\t\t}\n\t\t\tlet value = obj[key];\n\t\t\tif (typeof formatter === 'function') {\n\t\t\t\tvalue = formatter(value, key, obj);\n\t\t\t}\n\t\t\thtml += `<dt>${label}</dt><dd>${value}</dd>`;\n\t\t}\n\t\thtml += `</dl>`;\n\t\treturn html;\n\t},\n\n\tabbrev(short, long) {\n\t\treturn `<abbr title=\"${_.e(long)}\">${_.e(short)}</abbr>`;\n\t},\n\n\tisObject(obj) {\n\t\treturn (typeof obj === 'object' && obj === Object(obj) && !Array.isArray(obj));\n\t},\n\n\tformatKey(key, prefix = false) {\n\t\tif (key.includes('/')) {\n\t\t\t// Slashes are strong indicators for URIs or media types, don't format\n\t\t\treturn _.e(_.t(key));\n\t\t}\n\t\tif (prefix === false) {\n\t\t\tkey = key.replace(/^[\\w-]+:/i, '');\n\t\t}\n\t\tlet formatted = key.split(/[:_\\-\\s]/g).map(part => part.substr(0, 1).toUpperCase() + part.substr(1)).join(' ');\n\t\treturn _.e(_.t(formatted));\n\t},\n\n\thexToUint8(hexString) {\n\t\tif(hexString.length === 0 || hexString.length % 2 !== 0){\n\t\t\tthrow new Error(`The string \"${hexString}\" is not valid hex.`);\n\t\t}\n\t\treturn new Uint8Array(hexString.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\n\t},\n\n\tuint8ToHex(bytes) {\n\t\treturn bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '');\n\t},\n\n\tkeysFromListOfObjects(objectList) {\n\t\treturn objectList.reduce(\n\t\t\t(arr, o) => Object.keys(o).reduce(\n\t\t\t\t(a, k) => {\n\t\t\t\t\tif (a.indexOf(k) == -1) {\n\t\t\t\t\t\ta.push(k);\n\t\t\t\t\t}\n\t\t\t\t\treturn a;\n\t\t\t\t},\n\t\t\t\tarr\n\t\t\t),\n\t\t\t[]\n\t\t);\n\t},\n\n\tunit(value, unit = '') {\n\t\tif (typeof unit === 'string' && unit.length > 0) {\n\t\t\tunit = _.t(unit);\n\t\t\treturn `${value}&nbsp;<span class=\"unit\">${unit}</unit>`;\n\t\t}\n\t\treturn value;\n\t}\n\n};\n\nmodule.exports = _;"],"names":["Defaults","collatorOptions","numberFormatterOptions","maximumFractionDigits","dateFormatterOptions","day","month","year","dateTimeFormatterOptions","hour","minute","second","timeZone","timeZoneName","I18N","locales","collator","Intl","Collator","dateFormatter","DateTimeFormat","dateTimeFormatter","numberFormatter","NumberFormat","translate","getDefaults","setLocales","this","Object","assign","setTranslator","fn","format","value","vars","key","replaceAll","module","exports","_","DataTypes","array","arr","sort","unit","toList","v","object","obj","toObject","label","t","toNothing","number","num","parseFloat","string","str","e","replace","boolean","bool","Array","isArray","isObject","null","Registry","Formatters","allowHtmlInCommonMark","formatUrl","field","spec","context","parent","title","toLink","rel","formatLink","href","formatMediaType","_formatMediaType","short","Boolean","shorten","mediaType","getDependency","media","parse","error","console","warn","type","parameters","application","profile","group","split","formatKey","formatTimestamp","Date","formatPercent0to1","formatDate","formatDuration","lib","isoDuration","en","fallbackLocale","formatted","humanize","length","formatLanguageCode","list","code","rest","name","join","formatLicense","match","licenses","links","filter","link","formatProviders","provider","roles","description","url","map","r","formatCommonMark","commonmark","html","reader","Parser","writer","HtmlRenderer","safe","smart","render","formatSoftware","software","version","push","formatDOI","formatCRS","formatEPSG","parseInt","formatExtent","formatHexColor","startsWith","substring","formatPROJJSON","id","authority","formatTemporalExtent","d","start","end","base","formatRange","formatTemporalExtents","sortExtents","a","b","compare","formatWKT2","indent","keyword","tabs","repeat","fileSizeUnits","formatFileSize","i","Math","floor","log","pow","toFixed","formatChecksum","multihash","meta","decode","hexToUint8","hex","uint8ToHex","digest","fileDataTypes","formatFileDataType","abbrev","formatTransform","rows","chunk","slice","formatCSV","formatShape","x","numeric","undefined","find","formatImage","src","formatPhone","formatEmail","formatConcepts","concept","formatAddress","address","lines","deliveryPoint","postalCode","city","line","administrativeArea","country","toUpperCase","formatGridCode","splitHalf","parts","labelA","labelB","len","mid","designator","utm","band","sq","coord","_abbrev","quad","substr","quarter","zone","quadkey","dggs","components","level","rowcol","fractions","n","String","formatter","ordered","tag","target","keyFormatter","keyOrder","path","keys","concat","long","prefix","includes","part","hexString","Error","Uint8Array","byte","bytes","reduce","toString","padStart","keysFromListOfObjects","objectList","o","k","indexOf"],"sourceRoot":""}
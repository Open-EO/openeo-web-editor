{"version":3,"sources":["webpack:///./node_modules/ol-ext/control/LayerSwitcher.js","webpack:///./node_modules/ol/MapBrowserEventType.js","webpack:///./node_modules/ol/CollectionEventType.js","webpack:///./node_modules/ol/Kinetic.js","webpack:///./node_modules/ol/Observable.js","webpack:///./node_modules/ol-ext/control/Timeline.js","webpack:///./node_modules/ol/Feature.js","webpack:///./node_modules/ol/MapBrowserEvent.js","webpack:///./node_modules/ol/MapEventType.js","webpack:///./node_modules/ol/MapBrowserEventHandler.js","webpack:///./node_modules/ol/MapProperty.js","webpack:///./node_modules/ol/PluggableMap.js","webpack:///./node_modules/ol/Map.js","webpack:///./node_modules/ol/ImageBase.js","webpack:///./node_modules/ol/Image.js","webpack:///./node_modules/ol-ext/util/input/Base.js","webpack:///./node_modules/ol-ext/util/input/Checkbox.js","webpack:///./node_modules/ol-ext/util/input/Switch.js","webpack:///./node_modules/ol-ext/util/input/Radio.js","webpack:///./node_modules/ol-ext/util/element.js","webpack:///./node_modules/ol/MapEvent.js","webpack:///./node_modules/ol/ObjectEventType.js","webpack:///./node_modules/ol/ImageTile.js","webpack:///./node_modules/ol/AssertionError.js","webpack:///./node_modules/ol/ImageState.js","webpack:///./node_modules/ol-ext/util/ext.js","webpack:///./node_modules/ol-ext/control/Swipe.js","webpack:///./node_modules/ol/Disposable.js","webpack:///./node_modules/ol/Object.js","webpack:///./node_modules/ol/Collection.js"],"names":["ol_control_LayerSwitcher","options","element","self","this","dcount","show_progress","oninfo","onextent","hasextent","extent","hastrash","trash","reordering","_layers","_layerGroup","layerGroup","getLayers","displayInLayerSwitcher","target","create","className","switcherClass","collapsed","classList","add","button","type","parent","addEventListener","e","toggle","dispatchEvent","contains","preventDefault","overflow","mouseover","remove","noScroll","topv","click","botv","_noScroll","panel_","addListener","Math","max","min","wheelDelta","detail","stopPropagation","header_","call","set","drawDelay","selection","prototype","tip","up","down","info","plus","layer","get","setMap","map","drawPanel","_listener","i","moveend","on","viewChange","bind","size","change","getLayerGroup","show","hide","isOpen","setHeader","html","setHTML","dir","hidden","setStyle","height","h","outerHeight","hp","dh","offsetTop","top","lh","getStyle","querySelectorAll","round","_setLayerForLI","li","listeners","push","setLayerOpacity","setLayerVisibility","key","querySelector","style","left","getOpacity","checked","getVisible","_clearLayerForLI","forEach","l","_getLayerForLI","testLayerVisibility","getPanel","getMap","setTimeout","drawPanel_","dragging_","drawList","switchLayerVisibility","layers","setVisible","res","getView","getResolution","zoom","getZoom","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","ex0","getExtent","ex","calculateExtent","getSize","dragOrdering_","pageY","dragElt","group","elt","currentTarget","parentNode","start","panel","pageY0","touches","length","changedTouches","stop","drop","collection","getArray","removeAt","j","insertAt","removeListener","document","move","abs","innerHTML","position","offsetLeft","opacity","width","outerWidth","offsetRect","scrollTop","elementFromPoint","clientX","clientY","tagName","dragOpacity_","x","pageX","delta","nextElementSibling","setOpacity","ul","setVisibility","selectLayer","onInfo","zoomExtent","fit","removeLayer","getLength","createLi","_selectedLayer","layer_buttons","d","label","title","unselectable","userSelect","nb","p","setprogress_","layerswitcher_progress","op","offsetX","ul2","getLayerClass","getFeatures","silent","item","getSelection","loaded","loading","draw","toFixed","getSource","SINGLECLICK","CLICK","DBLCLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","ADD","REMOVE","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","begin","update","y","Date","now","end","lastIndex","firstIndex","duration","dx","dy","atan2","sqrt","getDistance","getAngle","__extends","extendStatics","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","TypeError","String","__","constructor","Observable","_super","_this","onInternal","once","onceInternal","un","unInternal","revision_","changed","CHANGE","getRevision","listener","isArray","len","keys","ol_key","unByKey","ii","removeEventListener","ol_control_Timeline","zoomButton","_scrollDiv","_buttons","addButton","handleClick","refresh","_intervalDiv","_select","scrollListener","_setScrollLeft","clearTimeout","date","getDate","dateStart","dateEnd","scrollTimeout","scrollDiv","onmove","_moving","_tline","_scrollLeft","maxWidth","minDate","Infinity","maxDate","graduation","minZoom","maxZoom","setInterval","interval","getHTML","_getHTML","getFeatureDate","_getFeatureDate","endFeatureDate","_endFeatureDate","setFeatures","features","source","undefined","test","parseFloat","feature","isCollapsed","collapse","_features","_source","first","d2","tline","f","isNaN","sort","a","div","_minDate","_maxDate","isFinite","scale","_scale","_drawTime","line","lineHeight","fdiv","t","img","ondragstart","minWidth","pos","_nbline","setDate","anim","_getOffsetFromDate","_getDateFromOffset","offset","scrollLeft","_getScrollLeft","dt","month","dmonth","tdiv","heigth","year","getFullYear","setFullYear","dyear","setMonth","toLocaleDateString","dday","day","offdate","getMonth","indexOf","roundDate","stick","_roundTo","r","getStartDate","getEndDate","Feature","opt_geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","geometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","getId","getStyleFunction","handleGeometryChange_","opt_style","createStyleFunction","setId","id","name","removeChangeListener","obj","styles_1","MapBrowserEvent","originalEvent","opt_dragging","opt_frameState","pixel_","coordinate_","dragging","defineProperty","getEventPixel","pixel","enumerable","configurable","getCoordinateFromPixel","coordinate","POSTRENDER","MOVESTART","MOVEEND","MapBrowserEventHandler","moveTolerance","map_","clickTimeoutId_","emulateClicks_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","element_","pointerdownListenerKey_","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","relayEvent_","boundHandleTouchMove_","handleTouchMove_","EventType","TOUCHMOVE","passive","emulateClick_","pointerEvent","newEvent","MapBrowserEventType","updateActivePointers_","event","pointerId","handlePointerUp_","defaultPrevented","isMouseActionButton_","property","value","doc","getOwnerDocument","handlePointerMove_","getRootNode","isMoving_","cancelable","disposeInternal","Target","LAYERGROUP","SIZE","TARGET","VIEW","PluggableMap","optionsInternal","createOptionsInternal","boundHandleBrowserEvent_","handleBrowserEvent","maxTilesLoading_","maxTilesLoading","pixelRatio_","pixelRatio","postRenderTimeoutHandle_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","createElement","window","overlayContainer_","zIndex","pointerEvents","appendChild","overlayContainerStopEvent_","mapBrowserEventHandler_","keyboardEventTarget_","keyboardEventTarget","keyHandlerKeys_","controls","Collection","interactions","overlays_","overlays","overlayIdIndex_","renderer_","handleResize_","postRenderFunctions_","tileQueue_","TileQueue","getTilePriority","handleTileChange_","MapProperty","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","values","control","CollectionEventType","interaction","addOverlayInternal_","overlay","toString","createRenderer","Error","addControl","getControls","addInteraction","getInteractions","addLayer","addOverlay","getOverlays","setTarget","forEachFeatureAtPixel","callback","opt_options","getCoordinateFromPixelInternal","hitTolerance","layerFilter","checkWrapped","forEachFeatureAtCoordinate","getFeaturesAtPixel","forEachLayerAtPixel","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","getEventCoordinateInternal","viewportPosition","getBoundingClientRect","eventPosition","getTarget","getTargetElement","getElementById","getProjection","frameState","pixelToCoordinateTransform","slice","getOverlayById","getLoading","layerStatesArray","getLayerStatesArray","getPixelFromCoordinate","viewCoordinate","getPixelFromCoordinateInternal","coordinateToPixelTransform","getRenderer","getOverlayContainer","getOverlayContainerStopEvent","targetElement","ownerDocument","tile","tileSourceKey","tileCenter","tileResolution","browserEvent","opt_type","mapBrowserEvent","handleMapBrowserEvent","eventType","WHEEL","KEYDOWN","rootNode","documentElement","interactionsArray","getActive","cont","handleEvent","propagationStopped","handlePostRender","tileQueue","isEmpty","maxTotalLoading","maxNewLoads","hints","viewHints","ViewHint","ANIMATING","INTERACTING","lowOnFrameBudget","time","getTilesLoading","reprioritize","loadMoreTiles","hasListener","RENDERCOMPLETE","animate","dispatchRenderEvent","postRenderFunctions","getAnimating","resolveConstraints","render","CONTEXTMENU","RESIZE","dispose","KEYPRESS","updateSize","cancelAnimationFrame","handleViewPropertyChanged_","view","updateViewportSize_","ObjectEventType","PROPERTYCHANGE","isRendered","renderSync","redrawText","layerStates","hasRenderer","handleFontsChanged","requestAnimationFrame","removeControl","removeInteraction","removeOverlay","previousFrameState","isDef","getHints","viewState","getState","declutterTree","center","resolution","rotation","index","layerIndex","usedTiles","wantedTiles","renderFrame","apply","moveStart","MapEvent","MapEventType","idle","setLayerGroup","setSize","setView","computedStyle","getComputedStyle","offsetWidth","offsetHeight","console","warn","parseInt","setViewportSize","View","Map","onFocusOnly","Composite","ImageBase","state","getImage","getPixelRatio","load","ImageWrapper","src","crossOrigin","imageLoadFunction","ImageState","IDLE","src_","image_","Image","unlisten_","imageLoadFunction_","handleImageError_","ERROR","unlistenImage_","handleImageLoad_","LOADED","LOADING","listenImage","setImage","image","loadHandler","errorHandler","promise","decode","listening_1","unlisten","then","catch","error","message","listenerKeys","LOAD","ol","ext","input","ol_ext_input_Base","ol_Object","step","disabled","val","_listenDrag","cback","handle","moving","listen","setValue","v","Event","getValue","getInputElement","ol_ext_input_Checkbox","trim","insertBefore","after","createTextNode","isChecked","ol_ext_input_Switch","ol_ext_input_Radio","ol_ext_element","attr","setAttribute","Element","log","opt","assign","text","fn","useCapture","split","display","el","st","s","styleProp","defaultView","replace","toLowerCase","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","rect","pageYOffset","body","pageXOffset","bottom","right","speed","page","vertical","scroll","to","mousewheel","eventName","CustomEvent","createEvent","initCustomEvent","ImageTile","tileCoord","tileLoadFunction","crossOrigin_","tileLoadFunction_","getBlankImage","naturalWidth","naturalHeight","EMPTY","ctx","fillStyle","fillRect","canvas","AssertionError","code","path","ol_ext_inherits","child","inherits","NodeList","removeChild","ol_control_Swipe","precomposeRight_","precomposeRight","precomposeLeft_","precomposeLeft","postcompose_","postcompose","rightLayers","orientation","isLayer_","k","splice","isMoving","clientLeft","clientTop","_drawRect","pts","tr","inversePixelTransform","pt","context","lineTo","moveTo","ratio","save","beginPath","clip","getClassName","restore","Disposable","disposed","ObjectEvent","oldValue","BaseObject","opt_values","values_","getKeys","notify","opt_silent","applyProperties","unset","Property","LENGTH","CollectionEvent","opt_element","opt_index","opt_array","unique_","unique","array_","assertUnique_","updateLength_","clear","pop","extend","arr","array","elem","n","prev","setAt","opt_except"],"mappings":"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","file":"js/chunk-7db6d66b.a8bc63c5.js","sourcesContent":["/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport ol_ext_inherits from '../util/ext'\r\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable'\r\nimport ol_control_Control from 'ol/control/Control'\r\nimport ol_layer_Tile from 'ol/layer/Tile'\r\nimport ol_layer_Vector from 'ol/layer/Vector'\r\nimport ol_layer_VectorTile from 'ol/layer/VectorTile'\r\n// ol < 6 compatibility VectorImage is not defined\r\n// import ol_layer_VectorImage from 'ol/layer/VectorImage'\r\nimport ol_layer_Image from 'ol/layer/Image'\r\nimport ol_layer_Heatmap from 'ol/layer/Heatmap'\r\nimport {intersects as ol_extent_intersects} from 'ol/extent'\r\n\r\nimport ol_ext_element from '../util/element'\r\n\r\n/** Layer Switcher Control.\r\n * @fires select\r\n * @fires drawlist\r\n * @fires toggle\r\n * @fires reorder-start\r\n * @fires reorder-end\r\n * @fires layer:visible\r\n * @fires layer:opacity\r\n * \r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} options\r\n *  @param {boolean} options.selection enable layer selection when click on the title\r\n *  @param {function} options.displayInLayerSwitcher function that takes a layer and return a boolean if the layer is displayed in the switcher, default test the displayInLayerSwitcher layer attribute\r\n *  @param {boolean} options.show_progress show a progress bar on tile layers, default false\r\n *  @param {boolean} options.mouseover show the panel on mouseover, default false\r\n *  @param {boolean} options.reordering allow layer reordering, default true\r\n *  @param {boolean} options.trash add a trash button to delete the layer, default false\r\n *  @param {function} options.oninfo callback on click on info button, if none no info button is shown DEPRECATED: use on(info) instead\r\n *  @param {boolean} options.extent add an extent button to zoom to the extent of the layer\r\n *  @param {function} options.onextent callback when click on extent, default fits view to extent\r\n *  @param {number} options.drawDelay delay in ms to redraw the layer (usefull to prevent flickering when manipulating the layers)\r\n *  @param {boolean} options.collapsed collapse the layerswitcher at beginning, default true\r\n *  @param {ol.layer.Group} options.layerGroup a layer group to display in the switcher, default display all layers of the map\r\n *  @param {boolean} options.noScroll prevent handle scrolling, default false\r\n *\r\n * Layers attributes that control the switcher\r\n *\t- allwaysOnTop {boolean} true to force layer stay on top of the others while reordering, default false\r\n *\t- displayInLayerSwitcher {boolean} display the layer in switcher, default true\r\n *\t- noSwitcherDelete {boolean} to prevent layer deletion (w. trash option = true), default false\r\n */\r\nvar ol_control_LayerSwitcher = function(options) {\r\n  options = options || {};\r\n  var self = this;\r\n  this.dcount = 0;\r\n  this.show_progress = options.show_progress;\r\n  this.oninfo = (typeof (options.oninfo) == \"function\" ? options.oninfo: null);\r\n  this.onextent = (typeof (options.onextent) == \"function\" ? options.onextent: null);\r\n  this.hasextent = options.extent || options.onextent;\r\n  this.hastrash = options.trash;\r\n  this.reordering = (options.reordering!==false);\r\n  this._layers = [];\r\n  this._layerGroup = (options.layerGroup && options.layerGroup.getLayers) ? options.layerGroup : null;\r\n\r\n  // displayInLayerSwitcher\r\n  if (typeof(options.displayInLayerSwitcher) === 'function') {\r\n    this.displayInLayerSwitcher = options.displayInLayerSwitcher;\r\n  }\r\n\r\n  var element;\r\n  if (options.target) {\r\n    element = ol_ext_element.create('DIV', {\r\n      className: options.switcherClass || \"ol-layerswitcher\"\r\n    });\r\n  } else {\r\n    element = ol_ext_element.create('DIV', {\r\n      className: (options.switcherClass || \"ol-layerswitcher\") +' ol-unselectable ol-control'\r\n    });\r\n    if (options.collapsed !== false) element.classList.add('ol-collapsed'); \r\n    else element.classList.add('ol-forceopen'); \r\n  \r\n    this.button = ol_ext_element.create('BUTTON', {\r\n      type: 'button',\r\n      parent: element\r\n    });\r\n    this.button.addEventListener('touchstart', function(e){\r\n      element.classList.toggle('ol-collapsed');\r\n      self.dispatchEvent({ type: 'toggle', collapsed: element.classList.contains('ol-collapsed') });\r\n      e.preventDefault(); \r\n      self.overflow();\r\n    });\r\n    this.button.addEventListener('click', function(){\r\n      element.classList.toggle('ol-forceopen');\r\n      element.classList.add('ol-collapsed'); \r\n      self.dispatchEvent({ type: 'toggle', collapsed: !element.classList.contains('ol-forceopen') });\r\n      self.overflow();\r\n    });\r\n\r\n    if (options.mouseover) {\r\n      element.addEventListener ('mouseleave', function(){ \r\n        element.classList.add(\"ol-collapsed\"); \r\n        self.dispatchEvent({ type: 'toggle', collapsed: true });\r\n      });\r\n      element.addEventListener ('mouseover', function(){ \r\n        element.classList.remove(\"ol-collapsed\"); \r\n        self.dispatchEvent({ type: 'toggle', collapsed: false });\r\n      });\r\n    }\r\n\r\n    if (!options.noScroll) {\r\n      this.topv = ol_ext_element.create('DIV', {\r\n        className: 'ol-switchertopdiv',\r\n        parent: element,\r\n        click: function() {\r\n          self.overflow(\"+50%\");\r\n        }\r\n      });\r\n\r\n      this.botv = ol_ext_element.create('DIV', {\r\n        className: 'ol-switcherbottomdiv',\r\n        parent: element,\r\n        click: function() {\r\n          self.overflow(\"-50%\");\r\n        }\r\n      });\r\n    }\r\n    this._noScroll = options.noScroll;\r\n  }\r\n\r\n  this.panel_ = ol_ext_element.create ('UL', {\r\n    className: 'panel',\r\n    parent: element\r\n  });\r\n  // Handle mousewheel\r\n  if (!options.target && !options.noScroll) {\r\n    ol_ext_element.addListener (this.panel_, 'mousewheel DOMMouseScroll onmousewheel', function(e) {\r\n      if (self.overflow(Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))))) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }\r\n    });\r\n  }\r\n\r\n  this.header_ = ol_ext_element.create('LI', {\r\n    className: 'ol-header',\r\n    parent: this.panel_\r\n  });\r\n\r\n  ol_control_Control.call (this, {\r\n    element: element,\r\n    target: options.target\r\n  });\r\n\r\n  this.set('drawDelay',options.drawDelay||0);\r\n  this.set('selection', options.selection);\r\n};\r\nol_ext_inherits(ol_control_LayerSwitcher, ol_control_Control);\r\n\r\n/** List of tips for internationalization purposes\r\n*/\r\nol_control_LayerSwitcher.prototype.tip = {\r\n  up: \"up/down\",\r\n  down: \"down\",\r\n  info: \"informations...\",\r\n  extent: \"zoom to extent\",\r\n  trash: \"remove layer\",\r\n  plus: \"expand/shrink\"\r\n};\r\n\r\n/** Test if a layer should be displayed in the switcher\r\n * @param {ol.layer} layer\r\n * @return {boolean} true if the layer is displayed\r\n */\r\nol_control_LayerSwitcher.prototype.displayInLayerSwitcher = function(layer) {\r\n  return (layer.get('displayInLayerSwitcher')!==false);\r\n};\r\n\r\n/**\r\n * Set the map instance the control is associated with.\r\n * @param {_ol_Map_} map The map instance.\r\n */\r\nol_control_LayerSwitcher.prototype.setMap = function(map) {\r\n  ol_control_Control.prototype.setMap.call(this, map);\r\n  this.drawPanel();\r\n  \r\n  if (this._listener) {\r\n    for (var i in this._listener) ol_Observable_unByKey(this._listener[i]);\r\n  }\r\n  this._listener = null;\r\n\r\n  // Get change (new layer added or removed)\r\n  if (map) {\r\n    this._listener = {\r\n      moveend: map.on('moveend', this.viewChange.bind(this)),\r\n      size: map.on('change:size', this.overflow.bind(this))\r\n    }\r\n    // Listen to a layer group\r\n    if (this._layerGroup) {\r\n      this._listener.change = this._layerGroup.getLayers().on('change:length', this.drawPanel.bind(this));\r\n    } else  {\r\n      //Listen to all layers\r\n      this._listener.change = map.getLayerGroup().getLayers().on('change:length', this.drawPanel.bind(this));\r\n    }\r\n  }\r\n};\r\n\r\n/** Show control\r\n */\r\nol_control_LayerSwitcher.prototype.show = function() {\r\n  this.element.classList.add(\"ol-forceopen\");\r\n  this.overflow();\r\n};\r\n\r\n/** Hide control\r\n */\r\nol_control_LayerSwitcher.prototype.hide = function() {\r\n  this.element.classList.remove(\"ol-forceopen\");\r\n  this.overflow();\r\n};\r\n\r\n/** Toggle control\r\n */\r\nol_control_LayerSwitcher.prototype.toggle = function() {\r\n  this.element.classList.toggle(\"ol-forceopen\");\r\n  this.overflow();\r\n};\r\n\r\n/** Is control open\r\n * @return {boolean}\r\n */\r\nol_control_LayerSwitcher.prototype.isOpen = function() {\r\n  return this.element.classList.contains(\"ol-forceopen\");\r\n};\r\n\r\n/** Add a custom header\r\n * @param {Element|string} html content html\r\n */\r\nol_control_LayerSwitcher.prototype.setHeader = function(html) {\r\n  ol_ext_element.setHTML(this.header_, html);\r\n};\r\n\r\n/** Calculate overflow and add scrolls\r\n * @param {Number} dir scroll direction -1|0|1|'+50%'|'-50%'\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.overflow = function(dir) {\t\r\n  if (this.button && !this._noScroll) {\r\n    // Nothing to show\r\n    if (ol_ext_element.hidden(this.panel_)) {\r\n      ol_ext_element.setStyle(this.element, { height: 'auto' });\r\n      return;\r\n    }\r\n    // Calculate offset\r\n    var h = ol_ext_element.outerHeight(this.element);\r\n    var hp = ol_ext_element.outerHeight(this.panel_);\r\n    var dh = this.button.offsetTop + ol_ext_element.outerHeight(this.button);\r\n    //var dh = this.button.position().top + this.button.outerHeight(true);\r\n\r\n    var top = this.panel_.offsetTop - dh;\r\n    if (hp > h-dh) {\r\n      // Bug IE: need to have an height defined\r\n      ol_ext_element.setStyle(this.element, { height: '100%' });\r\n      var lh = 2 * ol_ext_element.getStyle(this.panel_.querySelectorAll('li.visible .li-content')[0], 'height');\r\n      switch (dir) {\r\n        case 1: top += lh; break;\r\n        case -1: top -= lh; break;\r\n        case \"+50%\": top += Math.round(h/2); break;\r\n        case \"-50%\": top -= Math.round(h/2); break;\r\n        default: break;\r\n      }\r\n      // Scroll div\r\n      if (top+hp <= h-3*dh/2) {\r\n        top = h-3*dh/2-hp;\r\n        ol_ext_element.hide(this.botv);\r\n      } else {\r\n        ol_ext_element.show(this.botv);\r\n      }\r\n      if (top >= 0) {\r\n        top = 0;\r\n        ol_ext_element.hide(this.topv);\r\n      } else {\r\n        ol_ext_element.show(this.topv);\r\n      }\r\n      // Scroll ?\r\n      ol_ext_element.setStyle(this.panel_, { top: top+\"px\" });\r\n      return true;\r\n    } else {\r\n      ol_ext_element.setStyle(this.element, { height: \"auto\" });\r\n      ol_ext_element.setStyle(this.panel_, { top: 0 });\r\n      ol_ext_element.hide(this.botv);\r\n      ol_ext_element.hide(this.topv);\r\n      return false;\r\n    }\r\n  }\r\n  else return false;\r\n};\r\n\r\n/** Set the layer associated with a li\r\n * @param {Element} li\r\n * @param {ol.layer} layer\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype._setLayerForLI = function(li, layer) {\r\n  var listeners = [];\r\n  if (layer.getLayers) {\r\n    listeners.push(layer.getLayers().on('change:length', this.drawPanel.bind(this)));\r\n  }\r\n  if (li) {\r\n    // Handle opacity change\r\n    listeners.push(layer.on('change:opacity', (function() {\r\n      this.setLayerOpacity(layer, li);\r\n    }).bind(this)));\r\n    // Handle visibility chage\r\n    listeners.push(layer.on('change:visible', (function() {\r\n      this.setLayerVisibility(layer, li);\r\n    }).bind(this)));\r\n  }\r\n  // Other properties\r\n  listeners.push(layer.on('propertychange', (function(e) {\r\n    if (e.key === 'displayInLayerSwitcher'\r\n      || e.key === 'openInLayerSwitcher') {\r\n      this.drawPanel(e);\r\n    }\r\n  }).bind(this)));\r\n  this._layers.push({ li:li, layer:layer, listeners: listeners });\r\n};\r\n\r\n/** Set opacity for a layer\r\n * @param {ol.layer.Layer} layer\r\n * @param {Element} li the list element\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.setLayerOpacity = function(layer, li) {\r\n  var i = li.querySelector('.layerswitcher-opacity-cursor')\r\n  if (i) i.style.left = (layer.getOpacity()*100)+\"%\"\r\n  this.dispatchEvent({ type: 'layer:opacity', layer: layer });\r\n};\r\n\r\n/** Set visibility for a layer\r\n * @param {ol.layer.Layer} layer\r\n * @param {Element} li the list element\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.setLayerVisibility = function(layer, li) {\r\n  var i = li.querySelector('.ol-visibility');\r\n  if (i) i.checked = layer.getVisible();\r\n  if (layer.getVisible()) li.classList.add('ol-visible');\r\n  else li.classList.remove('ol-visible');\r\n  this.dispatchEvent({ type: 'layer:visible', layer: layer });\r\n};\r\n\r\n/** Clear layers associated with li\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype._clearLayerForLI = function() {\r\n  this._layers.forEach(function (li) {\r\n    li.listeners.forEach(function(l) {\r\n      ol_Observable_unByKey(l);\r\n    });\r\n  })\r\n  this._layers = [];\r\n};\r\n\r\n/** Get the layer associated with a li\r\n * @param {Element} li\r\n * @return {ol.layer}\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype._getLayerForLI = function(li) {\r\n  for (var i=0, l; l=this._layers[i]; i++) {\r\n    if (l.li===li) return l.layer;\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * On view change hide layer depending on resolution / extent\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.viewChange = function() {\r\n  this.panel_.querySelectorAll('li').forEach( function(li) {\r\n    var l = this._getLayerForLI(li);\r\n    if (l) {\r\n      if (this.testLayerVisibility(l)) li.classList.remove('ol-layer-hidden');\r\n      else li.classList.add('ol-layer-hidden');\r\n    }\r\n  }.bind(this));\r\n};\r\n\r\n/** Get control panel\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.getPanel = function() {\r\n  return this.panel_;\r\n};\r\n\r\n/** Draw the panel control (prevent multiple draw due to layers manipulation on the map with a delay function)\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.drawPanel = function() {\r\n  if (!this.getMap()) return;\r\n  var self = this;\r\n  // Multiple event simultaneously / draw once => put drawing in the event queue\r\n  this.dcount++;\r\n  setTimeout (function(){ self.drawPanel_(); }, this.get('drawDelay') || 0);\r\n};\r\n\r\n/** Delayed draw panel control \r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.drawPanel_ = function() {\r\n  if (--this.dcount || this.dragging_) return;\r\n  // Remove existing layers\r\n  this._clearLayerForLI();\r\n  this.panel_.querySelectorAll('li').forEach (function(li) {\r\n    if (!li.classList.contains('ol-header')) li.remove();\r\n  }.bind(this));\r\n  // Draw list\r\n  this.drawList (this.panel_, this._layerGroup ?  this._layerGroup.getLayers() : this.getMap().getLayers());\r\n};\r\n\r\n/** Change layer visibility according to the baselayer option\r\n * @param {ol.layer}\r\n * @param {Array<ol.layer>} related layers\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.switchLayerVisibility = function(l, layers) {\r\n  if (!l.get('baseLayer')) {\r\n    l.setVisible(!l.getVisible());\r\n  } else {\r\n    if (!l.getVisible()) l.setVisible(true);\r\n    layers.forEach(function(li) {\r\n      if (l!==li && li.get('baseLayer') && li.getVisible()) li.setVisible(false);\r\n    });\r\n  }\r\n};\r\n\r\n/** Check if layer is on the map (depending on resolution / zoom and extent)\r\n * @param {ol.layer}\r\n * @return {boolean}\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.testLayerVisibility = function(layer) {\r\n  if (!this.getMap()) return true;\r\n  var res = this.getMap().getView().getResolution();\r\n  var zoom = this.getMap().getView().getZoom();\r\n  // Calculate visibility on resolution or zoom\r\n  if (layer.getMaxResolution()<=res || layer.getMinResolution()>=res) {\r\n    return false;\r\n  } else if (layer.getMinZoom && (layer.getMinZoom()>=zoom || layer.getMaxZoom()<zoom)) {\r\n    return false;\r\n  } else {\r\n    // Check extent\r\n    var ex0 = layer.getExtent();\r\n    if (ex0) {\r\n      var ex = this.getMap().getView().calculateExtent(this.getMap().getSize());\r\n      return ol_extent_intersects(ex, ex0);\r\n    }\r\n    return true;\r\n  }\r\n};\r\n\r\n\r\n/** Start ordering the list\r\n*\t@param {event} e drag event\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.dragOrdering_ = function(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n  // Get params\r\n  var self = this;\r\n  var elt = e.currentTarget.parentNode.parentNode;\r\n  var start = true;\r\n  var panel = this.panel_; \r\n  var pageY;\r\n  var pageY0 = e.pageY \r\n    || (e.touches && e.touches.length && e.touches[0].pageY) \r\n    || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n  var target, dragElt;\r\n  var layer, group;\r\n  elt.parentNode.classList.add('drag');\r\n\r\n  // Stop ordering\r\n  function stop() {\r\n    if (target) {\r\n      // Get drag on parent\r\n      var drop = layer;\r\n      if (drop && target) {\r\n        var collection ;\r\n        if (group) collection = group.getLayers();\r\n        else collection = self._layerGroup ?  self._layerGroup.getLayers() : self.getMap().getLayers();\r\n        var layers = collection.getArray();\r\n        // Switch layers\r\n        for (var i=0; i<layers.length; i++) {\r\n          if (layers[i]==drop) {\r\n            collection.removeAt (i);\r\n            break;\r\n          }\r\n        }\r\n        for (var j=0; j<layers.length; j++) {\r\n          if (layers[j]==target) {\r\n            if (i>j) collection.insertAt (j,drop);\r\n            else collection.insertAt (j+1,drop);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      self.dispatchEvent({ type: \"reorder-end\", layer: drop, group: group });\r\n    }\r\n    \r\n    elt.parentNode.querySelectorAll('li').forEach(function(li){\r\n      li.classList.remove('dropover');\r\n      li.classList.remove('dropover-after');\r\n      li.classList.remove('dropover-before');\r\n    });\r\n    elt.classList.remove(\"drag\");\r\n    elt.parentNode.classList.remove(\"drag\");\r\n    self.element.classList.remove('drag');\r\n    if (dragElt) dragElt.remove();\r\n\r\n    ol_ext_element.removeListener(document, 'mousemove touchmove', move);\r\n    ol_ext_element.removeListener(document, 'mouseup touchend touchcancel', stop);\r\n  }\r\n\r\n  // Ordering\r\n  function move(e) {\r\n    // First drag (more than 2 px) => show drag element (ghost)\r\n    pageY = e.pageY \r\n        || (e.touches && e.touches.length && e.touches[0].pageY) \r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n    if (start && Math.abs(pageY0 - pageY) > 2) {\r\n      start = false;\r\n      elt.classList.add(\"drag\");\r\n      layer = self._getLayerForLI(elt);\r\n      target = false;\r\n      group = self._getLayerForLI(elt.parentNode.parentNode);\r\n      // Ghost div\r\n      dragElt = ol_ext_element.create('LI', { \r\n        className: 'ol-dragover',\r\n        html: elt.innerHTML,\r\n        style: { \r\n          position: \"absolute\", \r\n          \"z-index\": 10000, \r\n          left: elt.offsetLeft, \r\n          opacity: 0.5,\r\n          width: ol_ext_element.outerWidth(elt),\r\n          height: ol_ext_element.getStyle(elt,'height'),\r\n        },\r\n        parent: panel \r\n      });\r\n      self.element.classList.add('drag');\r\n      self.dispatchEvent({ type: \"reorder-start\", layer: layer, group: group });\r\n    }\r\n    // Start a new drag sequence\r\n    if (!start) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      // Ghost div\r\n      ol_ext_element.setStyle(dragElt, { top: pageY - ol_ext_element.offsetRect(panel).top + panel.scrollTop +5 });\r\n      \r\n      var li;\r\n      if (!e.touches) {\r\n        li = e.target;\r\n      } else {\r\n        li = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\r\n      }\r\n      if (li.classList.contains(\"ol-switcherbottomdiv\")) {\r\n        self.overflow(-1);\r\n      } else if (li.classList.contains(\"ol-switchertopdiv\")) {\r\n        self.overflow(1);\r\n      }\r\n      // Get associated li\r\n      while (li && li.tagName!=='LI') {\r\n        li = li.parentNode;\r\n      }\r\n      if (!li || !li.classList.contains('dropover')) {\r\n        elt.parentNode.querySelectorAll('li').forEach(function(li) {\r\n          li.classList.remove('dropover');\r\n          li.classList.remove('dropover-after');\r\n          li.classList.remove('dropover-before');\r\n        });\r\n      }\r\n      if (li && li.parentNode.classList.contains('drag') && li !== elt) {\r\n        target = self._getLayerForLI(li);\r\n        // Don't mix layer level\r\n        if (target && !target.get('allwaysOnTop') == !layer.get('allwaysOnTop')) {\r\n          li.classList.add(\"dropover\");\r\n          li.classList.add((elt.offsetTop < li.offsetTop) ? 'dropover-after' : 'dropover-before');\r\n        } else {\r\n          target = false;\r\n        }\r\n        ol_ext_element.show(dragElt);\r\n      } else {\r\n        target = false;\r\n        if (li===elt) ol_ext_element.hide(dragElt);\r\n        else ol_ext_element.show(dragElt);\r\n      }\r\n      \r\n      if (!target) dragElt.classList.add(\"forbidden\");\r\n      else dragElt.classList.remove(\"forbidden\");\r\n    }\r\n  }\r\n\r\n  // Start ordering\r\n  ol_ext_element.addListener(document, 'mousemove touchmove', move);\r\n  ol_ext_element.addListener(document, 'mouseup touchend touchcancel', stop);\r\n};\r\n\r\n\r\n/** Change opacity on drag \r\n*\t@param {event} e drag event\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.dragOpacity_ = function(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n  var self = this\r\n  // Register start params\r\n  var elt = e.target;\r\n  var layer = this._getLayerForLI(elt.parentNode.parentNode.parentNode);\r\n  if (!layer) return;\r\n  var x = e.pageX \r\n    || (e.touches && e.touches.length && e.touches[0].pageX) \r\n    || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n  var start = ol_ext_element.getStyle (elt, 'left') - x;\r\n  self.dragging_ = true;\r\n\r\n  // stop dragging\r\n  function stop() {\r\n    ol_ext_element.removeListener(document, \"mouseup touchend touchcancel\", stop);\r\n    ol_ext_element.removeListener(document, \"mousemove touchmove\", move);\r\n    self.dragging_ = false;\r\n  }\r\n  // On draggin\r\n  function move(e) {\r\n    var x = e.pageX \r\n      || (e.touches && e.touches.length && e.touches[0].pageX) \r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n    var delta = (start + x) / ol_ext_element.getStyle(elt.parentNode, 'width');\r\n    var opacity = Math.max (0, Math.min(1, delta));\r\n    ol_ext_element.setStyle (elt, { left: (opacity*100) + \"%\" });\r\n    elt.parentNode.nextElementSibling.innerHTML = Math.round(opacity*100);\r\n    layer.setOpacity(opacity);\r\n  }\r\n  // Register move\r\n  ol_ext_element.addListener(document, \"mouseup touchend touchcancel\", stop);\r\n  ol_ext_element.addListener(document, \"mousemove touchmove\", move);\r\n};\r\n\r\n\r\n/** Render a list of layer\r\n * @param {Elemen} element to render\r\n * @layers {Array{ol.layer}} list of layer to show\r\n * @api stable\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.drawList = function(ul, collection) {\r\n  var self = this;\r\n  var layers = collection.getArray();\r\n\r\n  // Change layer visibility\r\n  var setVisibility = function(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    self.switchLayerVisibility(l, collection);\r\n    if (self.get('selection') && l.getVisible()) {\r\n      self.selectLayer(l);\r\n    }\r\n  };\r\n  // Info button click\r\n  function onInfo(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault(); \r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    self.oninfo(l); \r\n    self.dispatchEvent({ type: \"info\", layer: l });\r\n  }\r\n  // Zoom to extent button\r\n  function zoomExtent(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault(); \r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    if (self.onextent) self.onextent(l); \r\n    else self.getMap().getView().fit (l.getExtent(), self.getMap().getSize()); \r\n    self.dispatchEvent({ type: \"extent\", layer: l });\r\n  }\r\n  // Remove a layer on trash click\r\n  function removeLayer(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    var li = this.parentNode.parentNode.parentNode.parentNode;\r\n    var layer, group = self._getLayerForLI(li);\r\n    // Remove the layer from a group or from a map\r\n    if (group) {\r\n      layer = self._getLayerForLI(this.parentNode.parentNode);\r\n      group.getLayers().remove(layer);\r\n      if (group.getLayers().getLength()==0 && !group.get('noSwitcherDelete')) {\r\n        removeLayer.call(li.querySelectorAll('.layerTrash')[0], e);\r\n      }\r\n    } else {\r\n      li = this.parentNode.parentNode;\r\n      self.getMap().removeLayer(self._getLayerForLI(li));\r\n    }\r\n  }\r\n\r\n  // Create a list for a layer\r\n  function createLi(layer) {\r\n    if (!this.displayInLayerSwitcher(layer)) {\r\n      this._setLayerForLI(null, layer);\r\n      return;\r\n    } \r\n\r\n    var li = ol_ext_element.create('LI', {\r\n      className: (layer.getVisible()?\"visible \":\" \")+(layer.get('baseLayer')?\"baselayer\":\"\"),\r\n      parent: ul\r\n    });\r\n    this._setLayerForLI(li, layer);\r\n    if (this._selectedLayer === layer) {\r\n      li.classList.add('ol-layer-select');\r\n    }\r\n\r\n    var layer_buttons = ol_ext_element.create('DIV', {\r\n      className: 'ol-layerswitcher-buttons',\r\n      parent: li\r\n    });\r\n\r\n    // Content div\r\n    var d = ol_ext_element.create('DIV', {\r\n      className: 'li-content',// + (this.testLayerVisibility(layer) ? '' : ' ol-layer-hidden'),\r\n      parent: li\r\n    });\r\n    \r\n    // Visibility\r\n    ol_ext_element.create('INPUT', {\r\n      type: layer.get('baseLayer') ? 'radio' : 'checkbox',\r\n      className: 'ol-visibility',\r\n      checked: layer.getVisible(),\r\n      click: setVisibility,\r\n      parent: d\r\n    });\r\n    // Label\r\n    var label = ol_ext_element.create('LABEL', {\r\n      title: layer.get('title') || layer.get('name'),\r\n      click: setVisibility,\r\n      unselectable: 'on',\r\n      style: {\r\n        userSelect: 'none'\r\n      },\r\n      parent: d\r\n    });\r\n    label.addEventListener('selectstart', function(){ return false; });\r\n    ol_ext_element.create('SPAN', {\r\n      html: layer.get('title') || layer.get('name'),\r\n      click: function(e) {\r\n        if (this.get('selection')) {\r\n          e.stopPropagation();\r\n          this.selectLayer(layer);\r\n        }\r\n      }.bind(this),\r\n      parent: label\r\n    });\r\n\r\n    //  up/down\r\n    if (this.reordering) {\r\n      if ( (i<layers.length-1 && (layer.get(\"allwaysOnTop\") || !layers[i+1].get(\"allwaysOnTop\")) )\r\n      || (i>0 && (!layer.get(\"allwaysOnTop\") || layers[i-1].get(\"allwaysOnTop\")) ) ) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerup',\r\n          title: this.tip.up,\r\n          on: { 'mousedown touchstart': function(e) { self.dragOrdering_(e) } },\r\n          parent: layer_buttons\r\n        });\r\n      }\r\n    }\r\n\r\n    // Show/hide sub layers\r\n    if (layer.getLayers) {\r\n      var nb = 0;\r\n      layer.getLayers().forEach(function(l) {\r\n        if (self.displayInLayerSwitcher(l)) nb++;\r\n      });\r\n      if (nb) {\r\n        ol_ext_element.create('DIV', {\r\n          className: layer.get(\"openInLayerSwitcher\") ? \"collapse-layers\" : \"expend-layers\",\r\n          title: this.tip.plus,\r\n          click: function() {\r\n            var l = self._getLayerForLI(this.parentNode.parentNode);\r\n            l.set(\"openInLayerSwitcher\", !l.get(\"openInLayerSwitcher\") )\r\n          },\r\n          parent: layer_buttons\r\n        });\r\n      }\r\n    }\r\n\r\n    // Info button\r\n    if (this.oninfo) {\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerInfo',\r\n        title: this.tip.info,\r\n        click: onInfo,\r\n        parent: layer_buttons\r\n      });\r\n    }\r\n    // Layer remove\r\n    if (this.hastrash && !layer.get(\"noSwitcherDelete\")) {\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerTrash',\r\n        title: this.tip.trash,\r\n        click: removeLayer,\r\n        parent: layer_buttons\r\n      });\r\n    }\r\n    // Layer extent\r\n    if (this.hasextent && layers[i].getExtent()) {\r\n      var ex = layers[i].getExtent();\r\n      if (ex.length==4 && ex[0]<ex[2] && ex[1]<ex[3]) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerExtent',\r\n          title: this.tip.extent,\r\n          click: zoomExtent,\r\n          parent: layer_buttons  \r\n        });\r\n      }\r\n    }\r\n\r\n    // Progress\r\n    if (this.show_progress && layer instanceof ol_layer_Tile) {\r\n      var p = ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-progress',\r\n        parent: d\r\n      });\r\n      this.setprogress_(layer);\r\n      layer.layerswitcher_progress = ol_ext_element.create('DIV', { parent: p });\r\n    }\r\n\r\n    // Opacity\r\n    var opacity = ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity',\r\n      // Click on the opacity line\r\n      click: function(e){\r\n        if (e.target !== this) return;\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        var op = Math.max ( 0, Math.min( 1, e.offsetX / ol_ext_element.getStyle(this, 'width')));\r\n        self._getLayerForLI(this.parentNode.parentNode).setOpacity(op);\r\n      },\r\n      parent: d\r\n    });\r\n    // Start dragging\r\n    ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity-cursor',\r\n      style: { left: (layer.getOpacity()*100)+\"%\" },\r\n      on: {\r\n        'mousedown touchstart': function(e) { self.dragOpacity_ (e); }\r\n      },\r\n      parent: opacity\r\n    });\r\n    // Percent\r\n    ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity-label',\r\n      html: Math.round(layer.getOpacity()*100),\r\n      parent: d\r\n    });\r\n\r\n    // Layer group\r\n    if (layer.getLayers) {\r\n      li.classList.add('ol-layer-group');\r\n      if (layer.get(\"openInLayerSwitcher\") === true) {\r\n        var ul2 = ol_ext_element.create('UL', {\r\n          parent: li\r\n        });\r\n        this.drawList (ul2, layer.getLayers());\r\n      }\r\n    }\r\n    li.classList.add(this.getLayerClass(layer));\r\n\r\n    // Dispatch a dralist event to allow customisation\r\n    this.dispatchEvent({ type:'drawlist', layer:layer, li:li });\r\n  }\r\n\r\n  // Add the layer list\r\n  for (var i=layers.length-1; i>=0; i--) { \r\n    createLi.call(this, layers[i]); \r\n  }\r\n\r\n  this.viewChange();\r\n\r\n  if (ul === this.panel_) this.overflow();\r\n};\r\n\r\n/** Select a layer\r\n * @param {ol.layer.Layer} layer\r\n * @returns {string} the layer classname\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.getLayerClass = function(layer) {\r\n  if (!layer) return 'none';\r\n  if (layer.getLayers) return 'ol-layer-group';\r\n  if (layer instanceof ol_layer_Vector) return 'ol-layer-vector';\r\n  if (layer instanceof ol_layer_VectorTile) return 'ol-layer-vectortile';\r\n  if (layer instanceof ol_layer_Tile) return 'ol-layer-tile';\r\n  if (layer instanceof ol_layer_Image) return 'ol-layer-image';\r\n  if (layer instanceof ol_layer_Heatmap) return 'ol-layer-heatmap';\r\n  /* ol < 6 compatibility VectorImage is not defined */\r\n  // if (layer instanceof ol_layer_VectorImage) return 'ol-layer-vectorimage';\r\n  if (layer.getFeatures) return 'ol-layer-vectorimage';\r\n  /* */\r\n  return 'unknown';\r\n};\r\n\r\n/** Select a layer\r\n * @param {ol.layer.Layer} layer\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.selectLayer = function(layer, silent) {\r\n  if (!layer) {\r\n    if (!this.getMap()) return;\r\n    layer = this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)\r\n  }\r\n  this._selectedLayer = layer;\r\n  this.drawPanel();\r\n  if (!silent) this.dispatchEvent({ type: 'select', layer: layer });\r\n};\r\n\r\n/** Get selected layer\r\n * @returns {ol.layer.Layer}\r\n */\r\nol_control_LayerSwitcher.prototype.getSelection = function() {\r\n  return this._selectedLayer;\r\n};\r\n\r\n/** Handle progress bar for a layer\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.setprogress_ = function(layer) {\r\n  if (!layer.layerswitcher_progress) {\r\n    var loaded = 0;\r\n    var loading = 0;\r\n    var draw = function() {\r\n      if (loading === loaded) {\r\n        loading = loaded = 0;\r\n        ol_ext_element.setStyle(layer.layerswitcher_progress, { width: 0 });// layer.layerswitcher_progress.width(0);\r\n      } else {\r\n        ol_ext_element.setStyle(layer.layerswitcher_progress, { width: (loaded / loading * 100).toFixed(1) + '%' });// layer.layerswitcher_progress.css('width', (loaded / loading * 100).toFixed(1) + '%');\r\n      }\r\n    }\r\n    layer.getSource().on('tileloadstart', function() {\r\n      loading++;\r\n      draw();\r\n    });\r\n    layer.getSource().on('tileloadend', function() {\r\n      loaded++;\r\n      draw();\r\n    });\r\n    layer.getSource().on('tileloaderror', function() {\r\n      loaded++;\r\n      draw();\r\n    });\r\n  }\r\n};\r\n\r\nexport default ol_control_LayerSwitcher\r\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    /**\n     * A true single click with no dragging and no double click. Note that this\n     * event is delayed by 250 ms to ensure that it is not a double click.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n     * @api\n     */\n    SINGLECLICK: 'singleclick',\n    /**\n     * A click with no dragging. A double click will fire two of this.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n     * @api\n     */\n    CLICK: EventType.CLICK,\n    /**\n     * A true double click, with no dragging.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n     * @api\n     */\n    DBLCLICK: EventType.DBLCLICK,\n    /**\n     * Triggered when a pointer is dragged.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n     * @api\n     */\n    POINTERDRAG: 'pointerdrag',\n    /**\n     * Triggered when a pointer is moved. Note that on touch devices this is\n     * triggered when the map is panned, so is not the same as mousemove.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n     * @api\n     */\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel',\n};\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n//# sourceMappingURL=MapBrowserEventType.js.map","/**\n * @module ol/CollectionEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when an item is added to the collection.\n     * @event module:ol/Collection.CollectionEvent#add\n     * @api\n     */\n    ADD: 'add',\n    /**\n     * Triggered when an item is removed from the collection.\n     * @event module:ol/Collection.CollectionEvent#remove\n     * @api\n     */\n    REMOVE: 'remove',\n};\n//# sourceMappingURL=CollectionEventType.js.map","/**\n * @module ol/Kinetic\n */\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nvar Kinetic = /** @class */ (function () {\n    /**\n     * @param {number} decay Rate of decay (must be negative).\n     * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n     * @param {number} delay Delay to consider to calculate the kinetic\n     *     initial values (milliseconds).\n     */\n    function Kinetic(decay, minVelocity, delay) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.decay_ = decay;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minVelocity_ = minVelocity;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.delay_ = delay;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.points_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        this.angle_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.initialVelocity_ = 0;\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    Kinetic.prototype.begin = function () {\n        this.points_.length = 0;\n        this.angle_ = 0;\n        this.initialVelocity_ = 0;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     */\n    Kinetic.prototype.update = function (x, y) {\n        this.points_.push(x, y, Date.now());\n    };\n    /**\n     * @return {boolean} Whether we should do kinetic animation.\n     */\n    Kinetic.prototype.end = function () {\n        if (this.points_.length < 6) {\n            // at least 2 points are required (i.e. there must be at least 6 elements\n            // in the array)\n            return false;\n        }\n        var delay = Date.now() - this.delay_;\n        var lastIndex = this.points_.length - 3;\n        if (this.points_[lastIndex + 2] < delay) {\n            // the last tracked point is too old, which means that the user stopped\n            // panning before releasing the map\n            return false;\n        }\n        // get the first point which still falls into the delay time\n        var firstIndex = lastIndex - 3;\n        while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n            firstIndex -= 3;\n        }\n        var duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n        // we don't want a duration of 0 (divide by zero)\n        // we also make sure the user panned for a duration of at least one frame\n        // (1/60s) to compute sane displacement values\n        if (duration < 1000 / 60) {\n            return false;\n        }\n        var dx = this.points_[lastIndex] - this.points_[firstIndex];\n        var dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n        this.angle_ = Math.atan2(dy, dx);\n        this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n        return this.initialVelocity_ > this.minVelocity_;\n    };\n    /**\n     * @return {number} Total distance travelled (pixels).\n     */\n    Kinetic.prototype.getDistance = function () {\n        return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n    };\n    /**\n     * @return {number} Angle of the kinetic panning animation (radians).\n     */\n    Kinetic.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    return Kinetic;\n}());\nexport default Kinetic;\n//# sourceMappingURL=Kinetic.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { listen, listenOnce, unlistenByKey } from './events.js';\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type|Type[], listener: (event: EventClass) => ?) => Return} OnSignature\n */\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return} CombinedOnSignature\n */\n/***\n * @typedef {import(\"./events\").EventsKey|Array<import(\"./events\").EventsKey>} OnReturn\n */\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nvar Observable = /** @class */ (function (_super) {\n    __extends(Observable, _super);\n    function Observable() {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {OnSignature<EventTypes, import(\"./events/Event.js\").default, OnReturn>}\n         */\n        _this.on = _this.onInternal;\n        /***\n         * @type {OnSignature<EventTypes, import(\"./events/Event.js\").default, OnReturn>}\n         */\n        _this.once = _this.onceInternal;\n        /***\n         * @type {OnSignature<EventTypes, import(\"./events/Event.js\").default, void>}\n         */\n        _this.un = _this.unInternal;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.revision_ = 0;\n        return _this;\n    }\n    /**\n     * Increases the revision counter and dispatches a 'change' event.\n     * @api\n     */\n    Observable.prototype.changed = function () {\n        ++this.revision_;\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * Get the version number for this object.  Each time the object is modified,\n     * its version number will be incremented.\n     * @return {number} Revision.\n     * @api\n     */\n    Observable.prototype.getRevision = function () {\n        return this.revision_;\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function(?): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onInternal = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listen(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listen(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function(?): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onceInternal = function (type, listener) {\n        var key;\n        if (Array.isArray(type)) {\n            var len = type.length;\n            key = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                key[i] = listenOnce(this, type[i], listener);\n            }\n        }\n        else {\n            key = listenOnce(this, /** @type {string} */ (type), listener);\n        }\n        /** @type {Object} */ (listener).ol_key = key;\n        return key;\n    };\n    /**\n     * Unlisten for a certain type of event.\n     * @param {string|Array<string>} type Type.\n     * @param {function(?): ?} listener Listener.\n     * @protected\n     */\n    Observable.prototype.unInternal = function (type, listener) {\n        var key = /** @type {Object} */ (listener).ol_key;\n        if (key) {\n            unByKey(key);\n        }\n        else if (Array.isArray(type)) {\n            for (var i = 0, ii = type.length; i < ii; ++i) {\n                this.removeEventListener(type[i], listener);\n            }\n        }\n        else {\n            this.removeEventListener(type, listener);\n        }\n    };\n    return Observable;\n}(EventTarget));\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n    if (Array.isArray(key)) {\n        for (var i = 0, ii = key.length; i < ii; ++i) {\n            unlistenByKey(key[i]);\n        }\n    }\n    else {\n        unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n    }\n}\nexport default Observable;\n//# sourceMappingURL=Observable.js.map","/*eslint no-constant-condition: [\"error\", { \"checkLoops\": false }]*/\r\nimport ol_ext_inherits from '../util/ext'\r\nimport ol_source_Vector from 'ol/source/Vector'\r\nimport ol_control_Control from 'ol/control/Control'\r\nimport ol_ext_element from '../util/element'\r\n\r\n/** Timeline control\r\n *\r\n * @constructor\r\n * @extends {ol.control.Control}\r\n * @fires select\r\n * @fires scroll\r\n * @fires collapse\r\n * @param {Object=} options Control options.\r\n *\t@param {String} options.className class of the control\r\n *\t@param {Array<ol.Feature>} options.features Features to show in the timeline\r\n *\t@param {ol.SourceImageOptions.vector} options.source class of the control\r\n *\t@param {Number} options.interval time interval length in ms or a text with a format d, h, mn, s (31 days = '31d'), default none\r\n *\t@param {String} options.maxWidth width of the time line in px, default 2000px\r\n *\t@param {String} options.minDate minimum date \r\n *\t@param {String} options.maxDate maximum date \r\n *\t@param {Number} options.minZoom Minimum zoom for the line, default .2\r\n *\t@param {Number} options.maxZoom Maximum zoom for the line, default 4\r\n *\t@param {boolean} options.zoomButton Are zoom buttons avaliable, default false\r\n *\t@param {function} options.getHTML a function that takes a feature and returns the html to display\r\n *\t@param {function} options.getFeatureDate a function that takes a feature and returns its date, default the date propertie\r\n *\t@param {function} options.endFeatureDate a function that takes a feature and returns its end date, default no end date\r\n *\t@param {String} options.graduation day|month to show month or day graduation, default show only years\r\n *\t@param {String} options.scrollTimeout Time in milliseconds to get a scroll event, default 15ms\r\n */\r\nvar ol_control_Timeline = function(options) {\r\n\r\n  var element = ol_ext_element.create('DIV', {\r\n    className: (options.className || '') + ' ol-timeline'\r\n      + (options.target ? '': ' ol-unselectable ol-control')\r\n      + (options.zoomButton ? ' ol-hasbutton':'')\r\n  });\r\n\r\n  // Initialize\r\n  ol_control_Control.call(this, {\r\n    element: element,\r\n    target: options.target\r\n  });\r\n\r\n  // Scroll div\r\n  this._scrollDiv = ol_ext_element.create('DIV', {\r\n    className: 'ol-scroll',\r\n    parent: this.element\r\n  });\r\n\r\n  // Add a button bar\r\n  this._buttons = ol_ext_element.create('DIV', {\r\n    className: 'ol-buttons',\r\n    parent: this.element\r\n  });\r\n  // Zoom buttons\r\n  if (options.zoomButton) {\r\n    // Zoom in\r\n    this.addButton({\r\n      className: 'ol-zoom-in',\r\n      handleClick: function(){\r\n        var zoom = this.get('zoom');\r\n        if (zoom>=1) {\r\n          zoom++;\r\n        } else {\r\n          zoom = Math.min(1, zoom + 0.1);\r\n        }\r\n        zoom = Math.round(zoom*100)/100;\r\n        this.refresh(zoom);\r\n      }.bind(this)\r\n    });\r\n    // Zoom out\r\n    this.addButton({\r\n      className: 'ol-zoom-out',\r\n      handleClick: function(){\r\n        var zoom = this.get('zoom');\r\n        if (zoom>1) {\r\n          zoom--;\r\n        } else {\r\n          zoom -= 0.1;\r\n        }\r\n        zoom = Math.round(zoom*100)/100;\r\n        this.refresh(zoom);\r\n      }.bind(this)\r\n    });\r\n  }\r\n\r\n  // Draw center date\r\n  this._intervalDiv = ol_ext_element.create('DIV', {\r\n    className: 'ol-center-date',\r\n    parent: this.element\r\n  });\r\n\r\n  // Remove selection\r\n  this.element.addEventListener('mouseover', function(){\r\n    if (this._select) this._select.elt.classList.remove('ol-select');\r\n  }.bind(this));\r\n\r\n  // Trigger scroll event\r\n  var scrollListener = null;\r\n  this._scrollDiv.addEventListener('scroll', function() {\r\n    this._setScrollLeft();\r\n    if (scrollListener) {\r\n      clearTimeout(scrollListener);\r\n      scrollListener = null;\r\n    }\r\n    scrollListener = setTimeout(function() {\r\n      this.dispatchEvent({ \r\n        type: 'scroll', \r\n        date: this.getDate(), \r\n        dateStart: this.getDate('start'), \r\n        dateEnd: this.getDate('end')\r\n      });\r\n    }.bind(this), options.scrollTimeout || 15);\r\n  }.bind(this));\r\n  // Magic to give \"live\" scroll events on touch devices\r\n  // this._scrollDiv.addEventListener('gesturechange', function() {});\r\n\r\n  // Scroll timeline\r\n  ol_ext_element.scrollDiv(this._scrollDiv, {\r\n    onmove: function(b) {\r\n      // Prevent selection on moving\r\n      this._moving = b; \r\n    }.bind(this)\r\n  });\r\n\r\n  this._tline = [];\r\n\r\n  // Parameters\r\n  this._scrollLeft = 0;\r\n  this.set('maxWidth', options.maxWidth || 2000);\r\n  this.set('minDate', options.minDate || Infinity);\r\n  this.set('maxDate', options.maxDate || -Infinity);\r\n  this.set('graduation', options.graduation);\r\n  this.set('minZoom', options.minZoom || .2);\r\n  this.set('maxZoom', options.maxZoom || 4);\r\n  this.setInterval(options.interval);\r\n  if (options.getHTML) this._getHTML =  options.getHTML;\r\n  if (options.getFeatureDate) this._getFeatureDate =  options.getFeatureDate;\r\n  if (options.endFeatureDate) this._endFeatureDate =  options.endFeatureDate;\r\n\r\n  // Feature source \r\n  this.setFeatures(options.features || options.source, options.zoom);\r\n};\r\nol_ext_inherits(ol_control_Timeline, ol_control_Control);\r\n\r\n/**\r\n * Set the map instance the control is associated with\r\n * and add interaction attached to it to this map.\r\n * @param {_ol_Map_} map The map instance.\r\n */\r\nol_control_Timeline.prototype.setMap = function(map) {\r\n  ol_control_Control.prototype.setMap.call(this, map);\r\n  this.refresh(this.get('zoom')||1, true);\r\n};\r\n\r\n/** Add a button on the timeline\r\n * @param {*} button\r\n *  @param {string} button.className\r\n *  @param {title} button.className\r\n *  @param {Element|string} button.html Content of the element\r\n *  @param {function} button.click a function called when the button is clicked\r\n */\r\nol_control_Timeline.prototype.addButton = function(button) {\r\n  this.element.classList.add('ol-hasbutton');\r\n  ol_ext_element.create('BUTTON', {\r\n    className: button.className || undefined,\r\n    title: button.title,\r\n    html : button.html,\r\n    click: button.handleClick,\r\n    parent: this._buttons\r\n  })\r\n};\r\n\r\n/** Set an interval\r\n * @param {number|string} length the interval length in ms or a farmatted text ie. end with y, 1d, h, mn, s (31 days = '31d'), default none\r\n */\r\nol_control_Timeline.prototype.setInterval = function(length) {\r\n  if (typeof(length)==='string') {\r\n    if (/s$/.test(length)) {\r\n      length = parseFloat(length) * 1000;\r\n    } else if (/mn$/.test(length)) {\r\n      length = parseFloat(length) * 1000 * 60;\r\n    } else if (/h$/.test(length)) {\r\n      length = parseFloat(length) * 1000 * 3600;\r\n    } else if (/d$/.test(length)) {\r\n      length = parseFloat(length) * 1000 * 3600 * 24;\r\n    } else if (/y$/.test(length)) {\r\n      length = parseFloat(length) * 1000 * 3600 * 24 * 365;\r\n    } else {\r\n      length = 0;\r\n    }\r\n  }\r\n  this.set('interval', length || 0);\r\n  if (length) this.element.classList.add('ol-interval');\r\n  else this.element.classList.remove('ol-interval');\r\n  this.refresh(this.get('zoom'));\r\n}\r\n\r\n/** Default html to show in the line\r\n * @param {ol.Feature} feature\r\n * @return {DOMElement|string}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getHTML = function(feature) {\r\n  return feature.get('name') || '';\r\n};\r\n\r\n/** Default function to get the date of a feature, returns the date attribute\r\n * @param {ol.Feature} feature\r\n * @return {Data|string}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getFeatureDate = function(feature) {\r\n  return (feature && feature.get) ? feature.get('date') : null;\r\n};\r\n\r\n/** Default function to get the end date of a feature, return undefined\r\n * @param {ol.Feature} feature\r\n * @return {Data|string}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._endFeatureDate = function(/* feature */) {\r\n  return undefined;\r\n};\r\n\r\n/** Is the line collapsed\r\n * @return {boolean}\r\n */\r\nol_control_Timeline.prototype.isCollapsed = function() {\r\n  return this.element.classList.contains('ol-collapsed');\r\n};\r\n\r\n/** Collapse the line\r\n * @param {boolean} b\r\n */\r\nol_control_Timeline.prototype.collapse = function(b) {\r\n  if (b) this.element.classList.add('ol-collapsed');\r\n  else this.element.classList.remove('ol-collapsed');\r\n  this.dispatchEvent({ type: 'collapse', collapsed: this.isCollapsed() });\r\n};\r\n\r\n/** Collapse the line\r\n */\r\nol_control_Timeline.prototype.toggle = function() {\r\n  this.element.classList.toggle('ol-collapsed');\r\n  this.dispatchEvent({ type: 'collapse', collapsed: this.isCollapsed() });\r\n};\r\n\r\n/** Set the features to display in the timeline\r\n * @param {Array<ol.Features>|ol.source.Vector} features An array of features or a vector source\r\n * @param {number} zoom zoom to draw the line default 1\r\n */\r\nol_control_Timeline.prototype.setFeatures = function(features, zoom) {\r\n  this._features = this._source = null;\r\n  if (features instanceof ol_source_Vector) this._source = features;\r\n  else if (features instanceof Array) this._features = features;\r\n  else this._features = [];\r\n  this.refresh(zoom);\r\n};\r\n\r\n/**\r\n * Get features\r\n * @return {Array<ol.Feature>}\r\n */\r\nol_control_Timeline.prototype.getFeatures = function() {\r\n  return this._features || this._source.getFeatures();\r\n}\r\n\r\n/**\r\n * Refresh the timeline with new data\r\n * @param {Number} zoom Zoom factor from 0.25 to 10, default 1\r\n */\r\nol_control_Timeline.prototype.refresh = function(zoom, first) {\r\n  if (!this.getMap()) return;\r\n  if (!zoom) zoom = this.get('zoom');\r\n  zoom = Math.min(this.get('maxZoom'), Math.max(this.get('minZoom'), zoom || 1));\r\n  this.set('zoom', zoom);\r\n  this._scrollDiv.innerHTML = '';\r\n  var features = this.getFeatures();\r\n  var d, d2;\r\n\r\n  // Get features sorted by date\r\n  var tline = this._tline = [];\r\n  features.forEach(function(f) {\r\n    if (d = this._getFeatureDate(f)) {\r\n      if (!(d instanceof Date)) {\r\n        d = new Date(d)\r\n      }\r\n      if (this._endFeatureDate) {\r\n        d2 = this._endFeatureDate(f);\r\n        if (!(d2 instanceof Date)) {\r\n          d2 = new Date(d2)\r\n        }\r\n      }\r\n      if (!isNaN(d)) {\r\n        tline.push({\r\n          date: d,\r\n          end: isNaN(d2) ? null : d2,\r\n          feature: f\r\n        });\r\n      }\r\n    }\r\n  }.bind(this));\r\n\r\n  tline.sort(function(a,b) { \r\n    return (a.date < b.date ? -1 : (a.date===b.date ? 0: 1))\r\n  });\r\n\r\n  // Draw\r\n  var div = ol_ext_element.create('DIV', {\r\n    parent: this._scrollDiv\r\n  });\r\n\r\n  // Calculate width\r\n  var min = this._minDate = Math.min(this.get('minDate'), tline.length ? tline[0].date : Infinity);\r\n  var max = this._maxDate = Math.max(this.get('maxDate'), tline.length ? tline[tline.length-1].date : -Infinity);\r\n  if (!isFinite(min)) this._minDate = min = new Date();\r\n  if (!isFinite(max)) this._maxDate = max = new Date();\r\n  var delta = (max-min);\r\n  var maxWidth = this.get('maxWidth');\r\n  var scale = this._scale = (delta > maxWidth ? maxWidth/delta : 1) * zoom;\r\n  // Leave 10px on right\r\n  min = this._minDate = this._minDate - 10/scale;\r\n  delta = (max-min) * scale;\r\n  ol_ext_element.setStyle(div, {\r\n    width: delta,\r\n    maxWidth: 'unset'\r\n  });\r\n\r\n  // Draw time's bar\r\n  this._drawTime(div, min, max, scale);\r\n\r\n  // Set interval\r\n  if (this.get('interval')) {\r\n    ol_ext_element.setStyle (this._intervalDiv, { width: this.get('interval') * scale });\r\n  } else {\r\n    ol_ext_element.setStyle (this._intervalDiv, { width: '' });\r\n  }\r\n\r\n  // Draw features\r\n  var line = [];\r\n  var lineHeight = ol_ext_element.getStyle(this._scrollDiv, 'lineHeight');\r\n  \r\n  // Wrapper\r\n  var fdiv = ol_ext_element.create('DIV', {\r\n      className: 'ol-features',\r\n      parent: div\r\n  });\r\n\r\n  // Add features on the line\r\n  tline.forEach(function(f) {\r\n    var d = f.date;\r\n    var t = f.elt = ol_ext_element.create('DIV', {\r\n      className: 'ol-feature',\r\n      style: {\r\n        left: Math.round((d-min)*scale),\r\n      },\r\n      html: this._getHTML(f.feature),\r\n      parent: fdiv\r\n    });\r\n    // Prevent image dragging\r\n    var img = t.querySelectorAll('img');\r\n    for (var i=0; i<img.length; i++) {\r\n      img[i].ondragstart = function(){ return false; };\r\n    }\r\n\r\n    // Calculate image width\r\n    if (f.end) {\r\n      ol_ext_element.setStyle(t, { \r\n        minWidth: (f.end-d) * scale, \r\n        width: (f.end-d) * scale, \r\n        maxWidth: 'unset'\r\n      });\r\n    }\r\n    var left = ol_ext_element.getStyle(t, 'left');\r\n    // Select on click\r\n    t.addEventListener('click', function() {\r\n      if (!this._moving) {\r\n        this.dispatchEvent({type: 'select', feature: f.feature });\r\n      }\r\n    }.bind(this));\r\n\r\n    // Find first free Y position\r\n    var pos, l;\r\n    for (pos=0; l=line[pos]; pos++) {\r\n      if (left > l) {\r\n        break;\r\n      }\r\n    }\r\n    line[pos] = left + ol_ext_element.getStyle(t, 'width');\r\n    ol_ext_element.setStyle(t, { top: pos*lineHeight });\r\n  }.bind(this));\r\n  this._nbline = line.length;\r\n\r\n  if (first) this.setDate(this._minDate, { anim: false, position: 'start' });\r\n  // Dispatch scroll event\r\n  this.dispatchEvent({ \r\n    type: 'scroll', \r\n    date: this.getDate(), \r\n    dateStart: this.getDate('start'), \r\n    dateEnd: this.getDate('end')\r\n  });\r\n};\r\n\r\n/** Get offset given a date\r\n * @param {Date} date\r\n * @return {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getOffsetFromDate = function(date) {\r\n  return (date - this._minDate) * this._scale;\r\n};\r\n\r\n/** Get date given an offset\r\n * @param {Date} date\r\n * @return {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getDateFromOffset = function(offset) {\r\n  return offset / this._scale + this._minDate;\r\n};\r\n\r\n/** Set the current position \r\n * @param {number} scrollLeft current position (undefined when scrolling)\r\n * @returns {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._setScrollLeft = function(scrollLeft) {\r\n  this._scrollLeft = scrollLeft;\r\n  if (scrollLeft !== undefined) {\r\n    this._scrollDiv.scrollLeft = scrollLeft;\r\n  }\r\n};\r\n\r\n/** Get the current position \r\n * @returns {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getScrollLeft = function() {\r\n  // Unset when scrolling\r\n  if (this._scrollLeft === undefined) {\r\n    return this._scrollDiv.scrollLeft;\r\n  } else {\r\n    // St by user\r\n    return this._scrollLeft;\r\n  }\r\n};\r\n\r\n/**\r\n * Draw dates on line\r\n * @private\r\n */\r\nol_control_Timeline.prototype._drawTime = function(div, min, max, scale) {\r\n  // Times div\r\n  var tdiv = ol_ext_element.create('DIV', {\r\n    className: 'ol-times',\r\n    parent: div\r\n  });\r\n  var d, dt, month, dmonth;\r\n  var dx = ol_ext_element.getStyle(tdiv, 'left');\r\n  var heigth = ol_ext_element.getStyle(tdiv, 'height');\r\n  // Year\r\n  var year = (new Date(this._minDate)).getFullYear();\r\n  dt = ((new Date(0)).setFullYear(String(year)) - new Date(0).setFullYear(String(year-1))) * scale;\r\n  var dyear = Math.round(2*heigth/dt)+1;\r\n  while(true) {\r\n    d = new Date(0).setFullYear(year);\r\n    if (d > this._maxDate) break;\r\n    ol_ext_element.create('DIV', {\r\n      className: 'ol-time ol-year',\r\n      style: {\r\n        left: this._getOffsetFromDate(d) - dx\r\n      },\r\n      html: year,\r\n      parent: tdiv\r\n    });\r\n    year += dyear;\r\n  }\r\n  // Month\r\n  if (/day|month/.test(this.get('graduation'))) {\r\n    dt = ((new Date(0,0,1)).setFullYear(String(year)) - new Date(0,0,1).setFullYear(String(year-1))) * scale;\r\n    dmonth = Math.max(1, Math.round(12 / Math.round(dt/heigth/2)));\r\n    if (dmonth < 12) {\r\n      year = (new Date(this._minDate)).getFullYear();\r\n      month = dmonth+1;\r\n      while(true) {\r\n        d = new Date(0,0,1);\r\n        d.setFullYear(year);\r\n        d.setMonth(month-1);\r\n        if (d > this._maxDate) break;\r\n        ol_ext_element.create('DIV', {\r\n          className: 'ol-time ol-month',\r\n          style: {\r\n            left: this._getOffsetFromDate(d) - dx\r\n          },\r\n          html: d.toLocaleDateString(undefined, { month: 'short'}),\r\n          parent: tdiv\r\n        });\r\n        month += dmonth;\r\n        if (month > 12) {\r\n          year++;\r\n          month = dmonth+1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Day\r\n  if (this.get('graduation')==='day') {\r\n    dt = (new Date(0,1,1) - new Date(0,0,1)) * scale;\r\n    var dday = Math.max(1, Math.round(31 / Math.round(dt/heigth/2)));\r\n    if (dday < 31) {\r\n      year = (new Date(this._minDate)).getFullYear();\r\n      month = 0;\r\n      var day = dday;\r\n      while(true) {\r\n        d = new Date(0,0,1);\r\n        d.setFullYear(year);\r\n        d.setMonth(month);\r\n        d.setDate(day);\r\n        if (isNaN(d)) {\r\n          month++;\r\n          if (month>12) {\r\n            month = 1;\r\n            year++;\r\n          }\r\n          day = dday;\r\n        } else {\r\n          if (d > this._maxDate) break;\r\n          if (day>1) {\r\n            var offdate = this._getOffsetFromDate(d);\r\n            if (this._getOffsetFromDate(new Date(year, month+1, 1)) - offdate > heigth) {\r\n              ol_ext_element.create('DIV', {\r\n                className: 'ol-time ol-day',\r\n                style: {\r\n                  left: offdate - dx\r\n                },\r\n                html: day,\r\n                parent: tdiv\r\n              });\r\n            }\r\n          }\r\n          year = d.getFullYear();\r\n          month = d.getMonth();\r\n          day = d.getDate() + dday;\r\n          if (day > new Date(year, month+1, 0).getDate()) {\r\n            month++;\r\n            day = dday;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/** Center timeline on a date\r\n * @param {Date|String|ol.feature} feature a date or a feature with a date\r\n * @param {Object} options\r\n *  @param {boolean} options.anim animate scroll\r\n *  @param {string} options.position start, end or middle, default middle\r\n */\r\nol_control_Timeline.prototype.setDate = function(feature, options) {\r\n  var date;\r\n  options = options || {};\r\n  // It's a date\r\n  if (feature instanceof Date) {\r\n    date = feature;\r\n  } else {\r\n    // Get date from Feature\r\n    if (this.getFeatures().indexOf(feature) >= 0) {\r\n      date = this._getFeatureDate(feature);\r\n    }\r\n    if (date && !(date instanceof Date)) {\r\n      date = new Date(date);\r\n    }\r\n    if (!date || isNaN(date)) {\r\n      date = new Date(String(feature));\r\n    }\r\n  }\r\n  if (!isNaN(date)) {\r\n    if (options.anim === false) this._scrollDiv.classList.add('ol-move');\r\n    var scrollLeft = this._getOffsetFromDate(date);\r\n    if (options.position==='start') {\r\n      scrollLeft += ol_ext_element.outerWidth(this._scrollDiv)/2 - ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n    } else if (options.position==='end') {\r\n      scrollLeft -= ol_ext_element.outerWidth(this._scrollDiv)/2 - ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n    }\r\n    this._setScrollLeft(scrollLeft);\r\n    if (options.anim === false) this._scrollDiv.classList.remove('ol-move');\r\n    if (feature) {\r\n      for (var i=0, f; f = this._tline[i]; i++) {\r\n        if (f.feature === feature) {\r\n          f.elt.classList.add('ol-select');\r\n          this._select = f;\r\n        } else {\r\n          f.elt.classList.remove('ol-select');\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/** Get round date (sticked to mn, hour day or month)\r\n * @param {Date} d\r\n * @param {string} stick sticking option to stick date to: 'mn', 'hour', 'day', 'month', default no stick\r\n * @return {Date}\r\n */\r\nol_control_Timeline.prototype.roundDate = function(d, stick) {\r\n  switch (stick) {\r\n    case 'mn': {\r\n      return new Date(this._roundTo(d, 60*1000));\r\n    }\r\n    case 'hour': {\r\n      return new Date(this._roundTo(d, 60*60*1000));\r\n    }\r\n    case 'day': {\r\n      return new Date(this._roundTo(d, 24*60*60*1000));\r\n    }\r\n    case 'month': {\r\n      d = new Date(this._roundTo(d, 24*60*60*1000));\r\n      if (d.getDate() > 15) {\r\n        d = new Date(d.setMonth(d.getMonth() + 1));\r\n      }\r\n      d = d.setDate(1);\r\n      return new Date(d);\r\n    }\r\n    default: return new Date(d);\r\n  }\r\n};\r\n\r\n/** Get the date of the center\r\n * @param {string} position position to get 'start', 'end' or 'middle', default middle\r\n * @param {string} stick sticking option to stick date to: 'mn', 'hour', 'day', 'month', default no stick\r\n * @return {Date}\r\n */\r\nol_control_Timeline.prototype.getDate = function(position, stick) {\r\n  var pos;\r\n  if (!stick) stick = position;\r\n  switch (position) {\r\n    case 'start': {\r\n      if (this.get('interval')) {\r\n        pos = - ol_ext_element.getStyle(this._intervalDiv, 'width')/2 + ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n      } else {\r\n        pos = - ol_ext_element.outerWidth(this._scrollDiv)/2 + ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n      }\r\n      break;\r\n    }\r\n    case 'end': {\r\n      if (this.get('interval')) {\r\n        pos = ol_ext_element.getStyle(this._intervalDiv, 'width')/2 - ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n      } else {\r\n        pos = ol_ext_element.outerWidth(this._scrollDiv)/2 - ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      pos = 0;\r\n      break;\r\n    }\r\n  }\r\n  var d = this._getDateFromOffset(this._getScrollLeft() + pos);\r\n  d = this.roundDate(d, stick);\r\n  return new Date(d);\r\n};\r\n\r\n/** Round number to \r\n * @param {number} d\r\n * @param {number} r\r\n * @return {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._roundTo = function(d, r) {\r\n  return Math.round(d/r) * r;\r\n};\r\n\r\n/** Get the start date of the control\r\n * @return {Date}\r\n */\r\nol_control_Timeline.prototype.getStartDate = function() {\r\n  return new Date(this.get('minDate'));\r\n}\r\n\r\n/** Get the end date of the control\r\n * @return {Date}\r\n */\r\nol_control_Timeline.prototype.getEndDate = function() {\r\n  return new Date(this.get('maxDate'));\r\n}\r\n\r\nexport default ol_control_Timeline","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} Geometry\n */\nvar Feature = /** @class */ (function (_super) {\n    __extends(Feature, _super);\n    /**\n     * @param {Geometry|Object<string, *>} [opt_geometryOrProperties]\n     *     You may pass a Geometry object directly, or an object literal containing\n     *     properties. If you pass an object literal, you may include a Geometry\n     *     associated with a `geometry` key.\n     */\n    function Feature(opt_geometryOrProperties) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {FeatureOnSignature<import(\"./Observable.js\").OnReturn>}\n         */\n        _this.on;\n        /***\n         * @type {FeatureOnSignature<import(\"./Observable.js\").OnReturn>}\n         */\n        _this.once;\n        /***\n         * @type {FeatureOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {number|string|undefined}\n         */\n        _this.id_ = undefined;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.geometryName_ = 'geometry';\n        /**\n         * User provided style.\n         * @private\n         * @type {import(\"./style/Style.js\").StyleLike}\n         */\n        _this.style_ = null;\n        /**\n         * @private\n         * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n         */\n        _this.styleFunction_ = undefined;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.geometryChangeKey_ = null;\n        _this.addChangeListener(_this.geometryName_, _this.handleGeometryChanged_);\n        if (opt_geometryOrProperties) {\n            if (typeof (\n            /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry) === 'function') {\n                var geometry = /** @type {Geometry} */ (opt_geometryOrProperties);\n                _this.setGeometry(geometry);\n            }\n            else {\n                /** @type {Object<string, *>} */\n                var properties = opt_geometryOrProperties;\n                _this.setProperties(properties);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Clone this feature. If the original feature has a geometry it\n     * is also cloned. The feature id is not set in the clone.\n     * @return {Feature} The clone.\n     * @api\n     */\n    Feature.prototype.clone = function () {\n        var clone = new Feature(this.hasProperties() ? this.getProperties() : null);\n        clone.setGeometryName(this.getGeometryName());\n        var geometry = this.getGeometry();\n        if (geometry) {\n            clone.setGeometry(geometry.clone());\n        }\n        var style = this.getStyle();\n        if (style) {\n            clone.setStyle(style);\n        }\n        return clone;\n    };\n    /**\n     * Get the feature's default geometry.  A feature may have any number of named\n     * geometries.  The \"default\" geometry (the one that is rendered by default) is\n     * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n     * @return {Geometry|undefined} The default geometry for the feature.\n     * @api\n     * @observable\n     */\n    Feature.prototype.getGeometry = function () {\n        return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n    };\n    /**\n     * Get the feature identifier.  This is a stable identifier for the feature and\n     * is either set when reading data from a remote source or set explicitly by\n     * calling {@link module:ol/Feature~Feature#setId}.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Feature.prototype.getId = function () {\n        return this.id_;\n    };\n    /**\n     * Get the name of the feature's default geometry.  By default, the default\n     * geometry is named `geometry`.\n     * @return {string} Get the property name associated with the default geometry\n     *     for this feature.\n     * @api\n     */\n    Feature.prototype.getGeometryName = function () {\n        return this.geometryName_;\n    };\n    /**\n     * Get the feature's style. Will return what was provided to the\n     * {@link module:ol/Feature~Feature#setStyle} method.\n     * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n     * @api\n     */\n    Feature.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the feature's style function.\n     * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n     * representing the current style of this feature.\n     * @api\n     */\n    Feature.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChanged_ = function () {\n        if (this.geometryChangeKey_) {\n            unlistenByKey(this.geometryChangeKey_);\n            this.geometryChangeKey_ = null;\n        }\n        var geometry = this.getGeometry();\n        if (geometry) {\n            this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * Set the default geometry for the feature.  This will update the property\n     * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n     * @param {Geometry|undefined} geometry The new geometry.\n     * @api\n     * @observable\n     */\n    Feature.prototype.setGeometry = function (geometry) {\n        this.set(this.geometryName_, geometry);\n    };\n    /**\n     * Set the style for the feature to override the layer style.  This can be a\n     * single style object, an array of styles, or a function that takes a\n     * resolution and returns an array of styles. To unset the feature style, call\n     * `setStyle()` without arguments or a falsey value.\n     * @param {import(\"./style/Style.js\").StyleLike} [opt_style] Style for this feature.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setStyle = function (opt_style) {\n        this.style_ = opt_style;\n        this.styleFunction_ = !opt_style\n            ? undefined\n            : createStyleFunction(opt_style);\n        this.changed();\n    };\n    /**\n     * Set the feature id.  The feature id is considered stable and may be used when\n     * requesting features or comparing identifiers returned from a remote source.\n     * The feature id can be used with the\n     * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n     * @param {number|string|undefined} id The feature id.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setId = function (id) {\n        this.id_ = id;\n        this.changed();\n    };\n    /**\n     * Set the property name to be used when getting the feature's default geometry.\n     * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n     * this name will be returned.\n     * @param {string} name The property name of the default geometry.\n     * @api\n     */\n    Feature.prototype.setGeometryName = function (name) {\n        this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.geometryName_ = name;\n        this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.handleGeometryChanged_();\n    };\n    return Feature;\n}(BaseObject));\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n    if (typeof obj === 'function') {\n        return obj;\n    }\n    else {\n        /**\n         * @type {Array<import(\"./style/Style.js\").default>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof ( /** @type {?} */(obj).getZIndex) === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n            var style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n            styles_1 = [style];\n        }\n        return function () {\n            return styles_1;\n        };\n    }\n}\nexport default Feature;\n//# sourceMappingURL=Feature.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nvar MapBrowserEvent = /** @class */ (function (_super) {\n    __extends(MapBrowserEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {EVENT} originalEvent Original event.\n     * @param {boolean} [opt_dragging] Is the map currently being dragged?\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapBrowserEvent(type, map, originalEvent, opt_dragging, opt_frameState) {\n        var _this = _super.call(this, type, map, opt_frameState) || this;\n        /**\n         * The original browser event.\n         * @const\n         * @type {EVENT}\n         * @api\n         */\n        _this.originalEvent = originalEvent;\n        /**\n         * The map pixel relative to the viewport corresponding to the original browser event.\n         * @type {?import(\"./pixel.js\").Pixel}\n         */\n        _this.pixel_ = null;\n        /**\n         * The coordinate in the user projection corresponding to the original browser event.\n         * @type {?import(\"./coordinate.js\").Coordinate}\n         */\n        _this.coordinate_ = null;\n        /**\n         * Indicates if the map is currently being dragged. Only set for\n         * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n         *\n         * @type {boolean}\n         * @api\n         */\n        _this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n        return _this;\n    }\n    Object.defineProperty(MapBrowserEvent.prototype, \"pixel\", {\n        /**\n         * The map pixel relative to the viewport corresponding to the original event.\n         * @type {import(\"./pixel.js\").Pixel}\n         * @api\n         */\n        get: function () {\n            if (!this.pixel_) {\n                this.pixel_ = this.map.getEventPixel(this.originalEvent);\n            }\n            return this.pixel_;\n        },\n        set: function (pixel) {\n            this.pixel_ = pixel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MapBrowserEvent.prototype, \"coordinate\", {\n        /**\n         * The coordinate corresponding to the original browser event.  This will be in the user\n         * projection if one is set.  Otherwise it will be in the view projection.\n         * @type {import(\"./coordinate.js\").Coordinate}\n         * @api\n         */\n        get: function () {\n            if (!this.coordinate_) {\n                this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n            }\n            return this.coordinate_;\n        },\n        set: function (coordinate) {\n            this.coordinate_ = coordinate;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Prevents the default browser action.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n     * @api\n     */\n    MapBrowserEvent.prototype.preventDefault = function () {\n        _super.prototype.preventDefault.call(this);\n        if ('preventDefault' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n        }\n    };\n    /**\n     * Prevents further propagation of the current event.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n     * @api\n     */\n    MapBrowserEvent.prototype.stopPropagation = function () {\n        _super.prototype.stopPropagation.call(this);\n        if ('stopPropagation' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n        }\n    };\n    return MapBrowserEvent;\n}(MapEvent));\nexport default MapBrowserEvent;\n//# sourceMappingURL=MapBrowserEvent.js.map","/**\n * @module ol/MapEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered after a map frame is rendered.\n     * @event module:ol/MapEvent~MapEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered when the map starts moving.\n     * @event module:ol/MapEvent~MapEvent#movestart\n     * @api\n     */\n    MOVESTART: 'movestart',\n    /**\n     * Triggered after the map is moved.\n     * @event module:ol/MapEvent~MapEvent#moveend\n     * @api\n     */\n    MOVEEND: 'moveend',\n};\n/***\n * @typedef {'postrender'|'movestart'|'moveend'} Types\n */\n//# sourceMappingURL=MapEventType.js.map","/**\n * @module ol/MapBrowserEventHandler\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport { PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { VOID } from './functions.js';\nimport { listen, unlistenByKey } from './events.js';\nvar MapBrowserEventHandler = /** @class */ (function (_super) {\n    __extends(MapBrowserEventHandler, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n     * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n     */\n    function MapBrowserEventHandler(map, moveTolerance) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * This is the element that we will listen to the real events on.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @private\n         */\n        _this.map_ = map;\n        /**\n         * @type {any}\n         * @private\n         */\n        _this.clickTimeoutId_;\n        /**\n         * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n         * @type {boolean}\n         */\n        _this.emulateClicks_ = false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.dragging_ = false;\n        /**\n         * @type {!Array<import(\"./events.js\").EventsKey>}\n         * @private\n         */\n        _this.dragListenerKeys_ = [];\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n        /**\n         * The most recent \"down\" type event (or null if none have occurred).\n         * Set on pointerdown.\n         * @type {PointerEvent}\n         * @private\n         */\n        _this.down_ = null;\n        var element = _this.map_.getViewport();\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.activePointers_ = 0;\n        /**\n         * @type {!Object<number, boolean>}\n         * @private\n         */\n        _this.trackedTouches_ = {};\n        _this.element_ = element;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.pointerdownListenerKey_ = listen(element, PointerEventType.POINTERDOWN, _this.handlePointerDown_, _this);\n        /**\n         * @type {PointerEvent}\n         * @private\n         */\n        _this.originalPointerMoveEvent_;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.relayedListenerKey_ = listen(element, PointerEventType.POINTERMOVE, _this.relayEvent_, _this);\n        /**\n         * @private\n         */\n        _this.boundHandleTouchMove_ = _this.handleTouchMove_.bind(_this);\n        _this.element_.addEventListener(EventType.TOUCHMOVE, _this.boundHandleTouchMove_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n        return _this;\n    }\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.emulateClick_ = function (pointerEvent) {\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.CLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        if (this.clickTimeoutId_ !== undefined) {\n            // double-click\n            clearTimeout(this.clickTimeoutId_);\n            this.clickTimeoutId_ = undefined;\n            newEvent = new MapBrowserEvent(MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n            this.dispatchEvent(newEvent);\n        }\n        else {\n            // click\n            this.clickTimeoutId_ = setTimeout(\n            /** @this {MapBrowserEventHandler} */\n            function () {\n                this.clickTimeoutId_ = undefined;\n                var newEvent = new MapBrowserEvent(MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n                this.dispatchEvent(newEvent);\n            }.bind(this), 250);\n        }\n    };\n    /**\n     * Keeps track on how many pointers are currently active.\n     *\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.updateActivePointers_ = function (pointerEvent) {\n        var event = pointerEvent;\n        if (event.type == MapBrowserEventType.POINTERUP ||\n            event.type == MapBrowserEventType.POINTERCANCEL) {\n            delete this.trackedTouches_[event.pointerId];\n        }\n        else if (event.type == MapBrowserEventType.POINTERDOWN) {\n            this.trackedTouches_[event.pointerId] = true;\n        }\n        this.activePointers_ = Object.keys(this.trackedTouches_).length;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerUp_ = function (pointerEvent) {\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        // We emulate click events on left mouse button click, touch contact, and pen\n        // contact. isMouseActionButton returns true in these cases (evt.button is set\n        // to 0).\n        // See http://www.w3.org/TR/pointerevents/#button-states\n        // We only fire click, singleclick, and doubleclick if nobody has called\n        // event.preventDefault().\n        if (this.emulateClicks_ &&\n            !newEvent.defaultPrevented &&\n            !this.dragging_ &&\n            this.isMouseActionButton_(pointerEvent)) {\n            this.emulateClick_(this.down_);\n        }\n        if (this.activePointers_ === 0) {\n            this.dragListenerKeys_.forEach(unlistenByKey);\n            this.dragListenerKeys_.length = 0;\n            this.dragging_ = false;\n            this.down_ = null;\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} If the left mouse button was pressed.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMouseActionButton_ = function (pointerEvent) {\n        return pointerEvent.button === 0;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerDown_ = function (pointerEvent) {\n        this.emulateClicks_ = this.activePointers_ === 0;\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        // Store a copy of the down event\n        this.down_ = /** @type {PointerEvent} */ ({});\n        for (var property in pointerEvent) {\n            var value = pointerEvent[property];\n            this.down_[property] = typeof value === 'function' ? VOID : value;\n        }\n        if (this.dragListenerKeys_.length === 0) {\n            var doc = this.map_.getOwnerDocument();\n            this.dragListenerKeys_.push(listen(doc, MapBrowserEventType.POINTERMOVE, this.handlePointerMove_, this), listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this), \n            /* Note that the listener for `pointercancel is set up on\n             * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n             * the `pointerup` and `pointermove` listeners.\n             *\n             * The reason for this is the following: `TouchSource.vacuumTouches_()`\n             * issues `pointercancel` events, when there was no `touchend` for a\n             * `touchstart`. Now, let's say a first `touchstart` is registered on\n             * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n             * But `documentPointerEventHandler_` doesn't know about the first\n             * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n             * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n             * only registered there.\n             */\n            listen(this.element_, MapBrowserEventType.POINTERCANCEL, this.handlePointerUp_, this));\n            if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n                this.dragListenerKeys_.push(listen(this.element_.getRootNode(), MapBrowserEventType.POINTERUP, this.handlePointerUp_, this));\n            }\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerMove_ = function (pointerEvent) {\n        // Between pointerdown and pointerup, pointermove events are triggered.\n        // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n        // moved a significant distance.\n        if (this.isMoving_(pointerEvent)) {\n            this.dragging_ = true;\n            var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent, this.dragging_);\n            this.dispatchEvent(newEvent);\n        }\n    };\n    /**\n     * Wrap and relay a pointer event.  Note that this requires that the type\n     * string for the MapBrowserEvent matches the PointerEvent type.\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.relayEvent_ = function (pointerEvent) {\n        this.originalPointerMoveEvent_ = pointerEvent;\n        var dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n        this.dispatchEvent(new MapBrowserEvent(pointerEvent.type, this.map_, pointerEvent, dragging));\n    };\n    /**\n     * Flexible handling of a `touch-action: none` css equivalent: because calling\n     * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n     * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n     * when an interaction (currently `DragPan` handles the event.\n     * @param {TouchEvent} event Event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handleTouchMove_ = function (event) {\n        // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n        // may not be initialized yet when we get here on a platform without native pointer events.\n        var originalEvent = this.originalPointerMoveEvent_;\n        if ((!originalEvent || originalEvent.defaultPrevented) &&\n            (typeof event.cancelable !== 'boolean' || event.cancelable === true)) {\n            event.preventDefault();\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} Is moving.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMoving_ = function (pointerEvent) {\n        return (this.dragging_ ||\n            Math.abs(pointerEvent.clientX - this.down_.clientX) >\n                this.moveTolerance_ ||\n            Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_);\n    };\n    /**\n     * Clean up.\n     */\n    MapBrowserEventHandler.prototype.disposeInternal = function () {\n        if (this.relayedListenerKey_) {\n            unlistenByKey(this.relayedListenerKey_);\n            this.relayedListenerKey_ = null;\n        }\n        this.element_.removeEventListener(EventType.TOUCHMOVE, this.boundHandleTouchMove_);\n        if (this.pointerdownListenerKey_) {\n            unlistenByKey(this.pointerdownListenerKey_);\n            this.pointerdownListenerKey_ = null;\n        }\n        this.dragListenerKeys_.forEach(unlistenByKey);\n        this.dragListenerKeys_.length = 0;\n        this.element_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return MapBrowserEventHandler;\n}(Target));\nexport default MapBrowserEventHandler;\n//# sourceMappingURL=MapBrowserEventHandler.js.map","/**\n * @module ol/MapProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    LAYERGROUP: 'layergroup',\n    SIZE: 'size',\n    TARGET: 'target',\n    VIEW: 'view',\n};\n//# sourceMappingURL=MapProperty.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/PluggableMap\n */\nimport BaseObject from './Object.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport EventType from './events/EventType.js';\nimport LayerGroup from './layer/Group.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport RenderEventType from './render/EventType.js';\nimport TileQueue, { getTilePriority } from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport { DEVICE_PIXEL_RATIO, PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { TRUE } from './functions.js';\nimport { apply as applyTransform, create as createTransform, } from './transform.js';\nimport { assert } from './asserts.js';\nimport { clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty, } from './extent.js';\nimport { fromUserCoordinate, toUserCoordinate } from './proj.js';\nimport { hasArea } from './size.js';\nimport { listen, unlistenByKey } from './events.js';\nimport { removeNode } from './dom.js';\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate Animate.\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform CoordinateToPixelTransform.\n * @property {import(\"rbush\").default} declutterTree DeclutterTree.\n * @property {null|import(\"./extent.js\").Extent} extent Extent.\n * @property {number} index Index.\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray LayerStatesArray.\n * @property {number} layerIndex LayerIndex.\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform PixelToCoordinateTransform.\n * @property {Array<PostRenderFunction>} postRenderFunctions PostRenderFunctions.\n * @property {import(\"./size.js\").Size} size Size.\n * @property {TileQueue} tileQueue TileQueue.\n * @property {!Object<string, Object<string, boolean>>} usedTiles UsedTiles.\n * @property {Array<number>} viewHints ViewHints.\n * @property {!Object<string, Object<string, boolean>>} wantedTiles WantedTiles.\n */\n/**\n * @typedef {function(PluggableMap, ?FrameState): any} PostRenderFunction\n */\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default): boolean} [layerFilter] Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in css pixels. Pixels\n * inside the radius around the given position will be checked for features.\n * @property {boolean} [checkWrapped=true] Check-Wrapped Will check for for wrapped geometries inside the range of\n *   +/- 1 world width. Works only if a projection is used that can be wrapped.\n */\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls] Controls.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions] Interactions.\n * @property {HTMLElement|Document} keyboardEventTarget KeyboardEventTarget.\n * @property {Collection<import(\"./Overlay.js\").default>} overlays Overlays.\n * @property {Object<string, *>} values Values.\n */\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:layergroup'|'change:size'|'change:target'|'change:view'} MapObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<MapObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapBrowserEventType\").Types, import(\"./MapBrowserEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapEventType\").Types, import(\"./MapEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./render/EventType\").MapRenderEventTypes, import(\"./render/Event\").default, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|MapObjectEventTypes|\n *      import(\"./MapBrowserEventType\").Types|import(\"./MapEventType\").Types|\n *      import(\"./render/EventType\").MapRenderEventTypes, Return>} PluggableMapOnSignature\n */\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control.defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction.defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered. If passed by element, the container can be in a secondary document.\n * @property {View} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n/**\n * @api\n */\nvar PluggableMap = /** @class */ (function (_super) {\n    __extends(PluggableMap, _super);\n    /**\n     * @param {MapOptions} options Map options.\n     */\n    function PluggableMap(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./Observable.js\").OnReturn>}\n         */\n        _this.on;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./Observable.js\").OnReturn>}\n         */\n        _this.once;\n        /***\n         * @type {PluggableMapOnSignature<void>}\n         */\n        _this.un;\n        var optionsInternal = createOptionsInternal(options);\n        /** @private */\n        _this.boundHandleBrowserEvent_ = _this.handleBrowserEvent.bind(_this);\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.maxTilesLoading_ =\n            options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ =\n            options.pixelRatio !== undefined\n                ? options.pixelRatio\n                : DEVICE_PIXEL_RATIO;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.postRenderTimeoutHandle_;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.animationDelayKey_;\n        /**\n         * @private\n         */\n        _this.animationDelay_ = /** @this {PluggableMap} */ function () {\n            this.animationDelayKey_ = undefined;\n            this.renderFrame_(Date.now());\n        }.bind(_this);\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.coordinateToPixelTransform_ = createTransform();\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.pixelToCoordinateTransform_ = createTransform();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.frameIndex_ = 0;\n        /**\n         * @private\n         * @type {?FrameState}\n         */\n        _this.frameState_ = null;\n        /**\n         * The extent at the previous 'moveend' event.\n         * @private\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.previousExtent_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewPropertyListenerKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewChangeListenerKey_ = null;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.layerGroupPropertyListenerKeys_ = null;\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.viewport_ = document.createElement('div');\n        _this.viewport_.className =\n            'ol-viewport' + ('ontouchstart' in window ? ' ol-touch' : '');\n        _this.viewport_.style.position = 'relative';\n        _this.viewport_.style.overflow = 'hidden';\n        _this.viewport_.style.width = '100%';\n        _this.viewport_.style.height = '100%';\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainer_ = document.createElement('div');\n        _this.overlayContainer_.style.position = 'absolute';\n        _this.overlayContainer_.style.zIndex = '0';\n        _this.overlayContainer_.style.width = '100%';\n        _this.overlayContainer_.style.height = '100%';\n        _this.overlayContainer_.style.pointerEvents = 'none';\n        _this.overlayContainer_.className = 'ol-overlaycontainer';\n        _this.viewport_.appendChild(_this.overlayContainer_);\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainerStopEvent_ = document.createElement('div');\n        _this.overlayContainerStopEvent_.style.position = 'absolute';\n        _this.overlayContainerStopEvent_.style.zIndex = '0';\n        _this.overlayContainerStopEvent_.style.width = '100%';\n        _this.overlayContainerStopEvent_.style.height = '100%';\n        _this.overlayContainerStopEvent_.style.pointerEvents = 'none';\n        _this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n        _this.viewport_.appendChild(_this.overlayContainerStopEvent_);\n        /**\n         * @private\n         * @type {MapBrowserEventHandler}\n         */\n        _this.mapBrowserEventHandler_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.moveTolerance_ = options.moveTolerance;\n        /**\n         * @private\n         * @type {HTMLElement|Document}\n         */\n        _this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.keyHandlerKeys_ = null;\n        /**\n         * @type {Collection<import(\"./control/Control.js\").default>}\n         * @protected\n         */\n        _this.controls = optionsInternal.controls || new Collection();\n        /**\n         * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n         * @protected\n         */\n        _this.interactions = optionsInternal.interactions || new Collection();\n        /**\n         * @type {Collection<import(\"./Overlay.js\").default>}\n         * @private\n         */\n        _this.overlays_ = optionsInternal.overlays;\n        /**\n         * A lookup of overlays by id.\n         * @private\n         * @type {Object<string, import(\"./Overlay.js\").default>}\n         */\n        _this.overlayIdIndex_ = {};\n        /**\n         * @type {import(\"./renderer/Map.js\").default}\n         * @private\n         */\n        _this.renderer_ = null;\n        /**\n         * @type {undefined|function(Event): void}\n         * @private\n         */\n        _this.handleResize_;\n        /**\n         * @private\n         * @type {!Array<PostRenderFunction>}\n         */\n        _this.postRenderFunctions_ = [];\n        /**\n         * @private\n         * @type {TileQueue}\n         */\n        _this.tileQueue_ = new TileQueue(_this.getTilePriority.bind(_this), _this.handleTileChange_.bind(_this));\n        _this.addChangeListener(MapProperty.LAYERGROUP, _this.handleLayerGroupChanged_);\n        _this.addChangeListener(MapProperty.VIEW, _this.handleViewChanged_);\n        _this.addChangeListener(MapProperty.SIZE, _this.handleSizeChanged_);\n        _this.addChangeListener(MapProperty.TARGET, _this.handleTargetChanged_);\n        // setProperties will trigger the rendering of the map if the map\n        // is \"defined\" already.\n        _this.setProperties(optionsInternal.values);\n        _this.controls.forEach(\n        /**\n         * @param {import(\"./control/Control.js\").default} control Control.\n         * @this {PluggableMap}\n         */\n        function (control) {\n            control.setMap(this);\n        }.bind(_this));\n        _this.controls.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.controls.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.interactions.forEach(\n        /**\n         * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n         * @this {PluggableMap}\n         */\n        function (interaction) {\n            interaction.setMap(this);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.overlays_.forEach(_this.addOverlayInternal_.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            this.addOverlayInternal_(\n            /** @type {import(\"./Overlay.js\").default} */ (event.element));\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            var overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n            var id = overlay.getId();\n            if (id !== undefined) {\n                delete this.overlayIdIndex_[id.toString()];\n            }\n            event.element.setMap(null);\n        }.bind(_this));\n        return _this;\n    }\n    /**\n     * @abstract\n     * @return {import(\"./renderer/Map.js\").default} The map renderer\n     */\n    PluggableMap.prototype.createRenderer = function () {\n        throw new Error('Use a map type that has a createRenderer method');\n    };\n    /**\n     * Add the given control to the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @api\n     */\n    PluggableMap.prototype.addControl = function (control) {\n        this.getControls().push(control);\n    };\n    /**\n     * Add the given interaction to the map. If you want to add an interaction\n     * at another point of the collection use `getInteraction()` and the methods\n     * available on {@link module:ol/Collection~Collection}. This can be used to\n     * stop the event propagation from the handleEvent function. The interactions\n     * get to handle the events in the reverse order of this collection.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n     * @api\n     */\n    PluggableMap.prototype.addInteraction = function (interaction) {\n        this.getInteractions().push(interaction);\n    };\n    /**\n     * Adds the given layer to the top of this map. If you want to add a layer\n     * elsewhere in the stack, use `getLayers()` and the methods available on\n     * {@link module:ol/Collection~Collection}.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @api\n     */\n    PluggableMap.prototype.addLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        layers.push(layer);\n    };\n    /**\n     * Add the given overlay to the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @api\n     */\n    PluggableMap.prototype.addOverlay = function (overlay) {\n        this.getOverlays().push(overlay);\n    };\n    /**\n     * This deals with map's overlay collection changes.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @private\n     */\n    PluggableMap.prototype.addOverlayInternal_ = function (overlay) {\n        var id = overlay.getId();\n        if (id !== undefined) {\n            this.overlayIdIndex_[id.toString()] = overlay;\n        }\n        overlay.setMap(this);\n    };\n    /**\n     *\n     * Clean up.\n     */\n    PluggableMap.prototype.disposeInternal = function () {\n        this.setTarget(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Detect features that intersect a pixel on the viewport, and execute a\n     * callback with each intersecting feature. Layers included in the detection can\n     * be configured through the `layerFilter` option in `opt_options`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(import(\"./Feature.js\").FeatureLike, import(\"./layer/Layer.js\").default, import(\"./geom/SimpleGeometry.js\").default): T} callback Feature callback. The callback will be\n     *     called with two arguments. The first argument is one\n     *     {@link module:ol/Feature feature} or\n     *     {@link module:ol/render/Feature render feature} at the pixel, the second is\n     *     the {@link module:ol/layer/Layer layer} of the feature and will be null for\n     *     unmanaged layers. To stop detection, callback functions can return a\n     *     truthy value.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template S,T\n     * @api\n     */\n    PluggableMap.prototype.forEachFeatureAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_) {\n            return;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.forEachFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, callback, null, layerFilter, null);\n    };\n    /**\n     * Get all features that intersect a pixel on the viewport.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n     * an empty array if none were found.\n     * @api\n     */\n    PluggableMap.prototype.getFeaturesAtPixel = function (pixel, opt_options) {\n        var features = [];\n        this.forEachFeatureAtPixel(pixel, function (feature) {\n            features.push(feature);\n        }, opt_options);\n        return features;\n    };\n    /**\n     * Detect layers that have a color value at a pixel on the viewport, and\n     * execute a callback with each matching layer. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     *\n     * Note: this may give false positives unless the map layers have had different `className`\n     * properties assigned to them.\n     *\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n     *     Layer callback. This callback will receive two arguments: first is the\n     *     {@link module:ol/layer/Layer layer}, second argument is an array representing\n     *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n     *     that do not currently support this argument. To stop detection, callback\n     *     functions can return a truthy value.\n     * @param {AtPixelOptions} [opt_options] Configuration options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template S,T\n     * @api\n     */\n    PluggableMap.prototype.forEachLayerAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_) {\n            return;\n        }\n        var options = opt_options || {};\n        var hitTolerance = options.hitTolerance !== undefined ? options.hitTolerance : 0;\n        var layerFilter = options.layerFilter || TRUE;\n        return this.renderer_.forEachLayerAtPixel(pixel, this.frameState_, hitTolerance, callback, layerFilter);\n    };\n    /**\n     * Detect if features intersect a pixel on the viewport. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {boolean} Is there a feature at the given pixel?\n     * @api\n     */\n    PluggableMap.prototype.hasFeatureAtPixel = function (pixel, opt_options) {\n        if (!this.frameState_) {\n            return false;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.hasFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, layerFilter, null);\n    };\n    /**\n     * Returns the coordinate in user projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    PluggableMap.prototype.getEventCoordinate = function (event) {\n        return this.getCoordinateFromPixel(this.getEventPixel(event));\n    };\n    /**\n     * Returns the coordinate in view projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     */\n    PluggableMap.prototype.getEventCoordinateInternal = function (event) {\n        return this.getCoordinateFromPixelInternal(this.getEventPixel(event));\n    };\n    /**\n     * Returns the map pixel position for a browser event relative to the viewport.\n     * @param {UIEvent} event Event.\n     * @return {import(\"./pixel.js\").Pixel} Pixel.\n     * @api\n     */\n    PluggableMap.prototype.getEventPixel = function (event) {\n        var viewportPosition = this.viewport_.getBoundingClientRect();\n        var eventPosition = \n        //FIXME Are we really calling this with a TouchEvent anywhere?\n        'changedTouches' in event\n            ? /** @type {TouchEvent} */ (event).changedTouches[0]\n            : /** @type {MouseEvent} */ (event);\n        return [\n            eventPosition.clientX - viewportPosition.left,\n            eventPosition.clientY - viewportPosition.top,\n        ];\n    };\n    /**\n     * Get the target in which this map is rendered.\n     * Note that this returns what is entered as an option or in setTarget:\n     * if that was an element, it returns an element; if a string, it returns that.\n     * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n     *     map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getTarget = function () {\n        return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n    };\n    /**\n     * Get the DOM element into which this map is rendered. In contrast to\n     * `getTarget` this method always return an `Element`, or `null` if the\n     * map has no target.\n     * @return {HTMLElement} The element that the map is rendered in.\n     * @api\n     */\n    PluggableMap.prototype.getTargetElement = function () {\n        var target = this.getTarget();\n        if (target !== undefined) {\n            return typeof target === 'string'\n                ? document.getElementById(target)\n                : target;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * user projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     * @api\n     */\n    PluggableMap.prototype.getCoordinateFromPixel = function (pixel) {\n        return toUserCoordinate(this.getCoordinateFromPixelInternal(pixel), this.getView().getProjection());\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * map view projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     */\n    PluggableMap.prototype.getCoordinateFromPixelInternal = function (pixel) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n        }\n    };\n    /**\n     * Get the map controls. Modifying this collection changes the controls\n     * associated with the map.\n     * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n     * @api\n     */\n    PluggableMap.prototype.getControls = function () {\n        return this.controls;\n    };\n    /**\n     * Get the map overlays. Modifying this collection changes the overlays\n     * associated with the map.\n     * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n     * @api\n     */\n    PluggableMap.prototype.getOverlays = function () {\n        return this.overlays_;\n    };\n    /**\n     * Get an overlay by its identifier (the value returned by overlay.getId()).\n     * Note that the index treats string and numeric identifiers as the same. So\n     * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n     * @param {string|number} id Overlay identifier.\n     * @return {import(\"./Overlay.js\").default} Overlay.\n     * @api\n     */\n    PluggableMap.prototype.getOverlayById = function (id) {\n        var overlay = this.overlayIdIndex_[id.toString()];\n        return overlay !== undefined ? overlay : null;\n    };\n    /**\n     * Get the map interactions. Modifying this collection changes the interactions\n     * associated with the map.\n     *\n     * Interactions are used for e.g. pan, zoom and rotate.\n     * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n     * @api\n     */\n    PluggableMap.prototype.getInteractions = function () {\n        return this.interactions;\n    };\n    /**\n     * Get the layergroup associated with this map.\n     * @return {LayerGroup} A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getLayerGroup = function () {\n        return /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP));\n    };\n    /**\n     * Get the collection of layers associated with this map.\n     * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n     * @api\n     */\n    PluggableMap.prototype.getLayers = function () {\n        var layers = this.getLayerGroup().getLayers();\n        return layers;\n    };\n    /**\n     * @return {boolean} Layers have sources that are still loading.\n     */\n    PluggableMap.prototype.getLoading = function () {\n        var layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var layer = layerStatesArray[i].layer;\n            var source = /** @type {import(\"./layer/Layer.js\").default} */ (layer).getSource();\n            if (source && source.loading) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the user\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.getPixelFromCoordinate = function (coordinate) {\n        var viewCoordinate = fromUserCoordinate(coordinate, this.getView().getProjection());\n        return this.getPixelFromCoordinateInternal(viewCoordinate);\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the map view\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     */\n    PluggableMap.prototype.getPixelFromCoordinateInternal = function (coordinate) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n        }\n    };\n    /**\n     * Get the map renderer.\n     * @return {import(\"./renderer/Map.js\").default} Renderer\n     */\n    PluggableMap.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Get the size of this map.\n     * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getSize = function () {\n        return /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE));\n    };\n    /**\n     * Get the view associated with this map. A view manages properties such as\n     * center and resolution.\n     * @return {View} The view that controls this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getView = function () {\n        return /** @type {View} */ (this.get(MapProperty.VIEW));\n    };\n    /**\n     * Get the element that serves as the map viewport.\n     * @return {HTMLElement} Viewport.\n     * @api\n     */\n    PluggableMap.prototype.getViewport = function () {\n        return this.viewport_;\n    };\n    /**\n     * Get the element that serves as the container for overlays.  Elements added to\n     * this container will let mousedown and touchstart events through to the map,\n     * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n     * events.\n     * @return {!HTMLElement} The map's overlay container.\n     */\n    PluggableMap.prototype.getOverlayContainer = function () {\n        return this.overlayContainer_;\n    };\n    /**\n     * Get the element that serves as a container for overlays that don't allow\n     * event propagation. Elements added to this container won't let mousedown and\n     * touchstart events through to the map, so clicks and gestures on an overlay\n     * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @return {!HTMLElement} The map's overlay container that stops events.\n     */\n    PluggableMap.prototype.getOverlayContainerStopEvent = function () {\n        return this.overlayContainerStopEvent_;\n    };\n    /**\n     * @return {!Document} The document where the map is displayed.\n     */\n    PluggableMap.prototype.getOwnerDocument = function () {\n        var targetElement = this.getTargetElement();\n        return targetElement ? targetElement.ownerDocument : document;\n    };\n    /**\n     * @param {import(\"./Tile.js\").default} tile Tile.\n     * @param {string} tileSourceKey Tile source key.\n     * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n     * @param {number} tileResolution Tile resolution.\n     * @return {number} Tile priority.\n     */\n    PluggableMap.prototype.getTilePriority = function (tile, tileSourceKey, tileCenter, tileResolution) {\n        return getTilePriority(this.frameState_, tile, tileSourceKey, tileCenter, tileResolution);\n    };\n    /**\n     * @param {UIEvent} browserEvent Browser event.\n     * @param {string} [opt_type] Type.\n     */\n    PluggableMap.prototype.handleBrowserEvent = function (browserEvent, opt_type) {\n        var type = opt_type || browserEvent.type;\n        var mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n        this.handleMapBrowserEvent(mapBrowserEvent);\n    };\n    /**\n     * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n     */\n    PluggableMap.prototype.handleMapBrowserEvent = function (mapBrowserEvent) {\n        if (!this.frameState_) {\n            // With no view defined, we cannot translate pixels into geographical\n            // coordinates so interactions cannot be used.\n            return;\n        }\n        var originalEvent = /** @type {PointerEvent} */ (mapBrowserEvent.originalEvent);\n        var eventType = originalEvent.type;\n        if (eventType === PointerEventType.POINTERDOWN ||\n            eventType === EventType.WHEEL ||\n            eventType === EventType.KEYDOWN) {\n            var doc = this.getOwnerDocument();\n            var rootNode = this.viewport_.getRootNode\n                ? this.viewport_.getRootNode()\n                : doc;\n            var target = /** @type {Node} */ (originalEvent.target);\n            if (\n            // Abort if the target is a child of the container for elements whose events are not meant\n            // to be handled by map interactions.\n            this.overlayContainerStopEvent_.contains(target) ||\n                // Abort if the event target is a child of the container that is no longer in the page.\n                // It's possible for the target to no longer be in the page if it has been removed in an\n                // event listener, this might happen in a Control that recreates it's content based on\n                // user interaction either manually or via a render in something like https://reactjs.org/\n                !(rootNode === doc ? doc.documentElement : rootNode).contains(target)) {\n                return;\n            }\n        }\n        mapBrowserEvent.frameState = this.frameState_;\n        if (this.dispatchEvent(mapBrowserEvent) !== false) {\n            var interactionsArray = this.getInteractions().getArray().slice();\n            for (var i = interactionsArray.length - 1; i >= 0; i--) {\n                var interaction = interactionsArray[i];\n                if (interaction.getMap() !== this ||\n                    !interaction.getActive() ||\n                    !this.getTargetElement()) {\n                    continue;\n                }\n                var cont = interaction.handleEvent(mapBrowserEvent);\n                if (!cont || mapBrowserEvent.propagationStopped) {\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @protected\n     */\n    PluggableMap.prototype.handlePostRender = function () {\n        var frameState = this.frameState_;\n        // Manage the tile queue\n        // Image loads are expensive and a limited resource, so try to use them\n        // efficiently:\n        // * When the view is static we allow a large number of parallel tile loads\n        //   to complete the frame as quickly as possible.\n        // * When animating or interacting, image loads can cause janks, so we reduce\n        //   the maximum number of loads per frame and limit the number of parallel\n        //   tile loads to remain reactive to view changes and to reduce the chance of\n        //   loading tiles that will quickly disappear from view.\n        var tileQueue = this.tileQueue_;\n        if (!tileQueue.isEmpty()) {\n            var maxTotalLoading = this.maxTilesLoading_;\n            var maxNewLoads = maxTotalLoading;\n            if (frameState) {\n                var hints = frameState.viewHints;\n                if (hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING]) {\n                    var lowOnFrameBudget = Date.now() - frameState.time > 8;\n                    maxTotalLoading = lowOnFrameBudget ? 0 : 8;\n                    maxNewLoads = lowOnFrameBudget ? 0 : 2;\n                }\n            }\n            if (tileQueue.getTilesLoading() < maxTotalLoading) {\n                tileQueue.reprioritize(); // FIXME only call if view has changed\n                tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n            }\n        }\n        if (frameState &&\n            this.hasListener(RenderEventType.RENDERCOMPLETE) &&\n            !frameState.animate &&\n            !this.tileQueue_.getTilesLoading() &&\n            !this.getLoading()) {\n            this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n        }\n        var postRenderFunctions = this.postRenderFunctions_;\n        for (var i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n            postRenderFunctions[i](this, frameState);\n        }\n        postRenderFunctions.length = 0;\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleSizeChanged_ = function () {\n        if (this.getView() && !this.getView().getAnimating()) {\n            this.getView().resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTargetChanged_ = function () {\n        // target may be undefined, null, a string or an Element.\n        // If it's a string we convert it to an Element before proceeding.\n        // If it's not now an Element we remove the viewport from the DOM.\n        // If it's an Element we append the viewport element to it.\n        var targetElement;\n        if (this.getTarget()) {\n            targetElement = this.getTargetElement();\n        }\n        if (this.mapBrowserEventHandler_) {\n            for (var i = 0, ii = this.keyHandlerKeys_.length; i < ii; ++i) {\n                unlistenByKey(this.keyHandlerKeys_[i]);\n            }\n            this.keyHandlerKeys_ = null;\n            this.viewport_.removeEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_);\n            this.viewport_.removeEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_);\n            if (this.handleResize_ !== undefined) {\n                removeEventListener(EventType.RESIZE, this.handleResize_, false);\n                this.handleResize_ = undefined;\n            }\n            this.mapBrowserEventHandler_.dispose();\n            this.mapBrowserEventHandler_ = null;\n            removeNode(this.viewport_);\n        }\n        if (!targetElement) {\n            if (this.renderer_) {\n                clearTimeout(this.postRenderTimeoutHandle_);\n                this.postRenderTimeoutHandle_ = undefined;\n                this.postRenderFunctions_.length = 0;\n                this.renderer_.dispose();\n                this.renderer_ = null;\n            }\n            if (this.animationDelayKey_) {\n                cancelAnimationFrame(this.animationDelayKey_);\n                this.animationDelayKey_ = undefined;\n            }\n        }\n        else {\n            targetElement.appendChild(this.viewport_);\n            if (!this.renderer_) {\n                this.renderer_ = this.createRenderer();\n            }\n            this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, this.moveTolerance_);\n            for (var key in MapBrowserEventType) {\n                this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[key], this.handleMapBrowserEvent.bind(this));\n            }\n            this.viewport_.addEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_, false);\n            this.viewport_.addEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n            var keyboardEventTarget = !this.keyboardEventTarget_\n                ? targetElement\n                : this.keyboardEventTarget_;\n            this.keyHandlerKeys_ = [\n                listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n                listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this),\n            ];\n            if (!this.handleResize_) {\n                this.handleResize_ = this.updateSize.bind(this);\n                window.addEventListener(EventType.RESIZE, this.handleResize_, false);\n            }\n        }\n        this.updateSize();\n        // updateSize calls setSize, so no need to call this.render\n        // ourselves here.\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTileChange_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewPropertyChanged_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewChanged_ = function () {\n        if (this.viewPropertyListenerKey_) {\n            unlistenByKey(this.viewPropertyListenerKey_);\n            this.viewPropertyListenerKey_ = null;\n        }\n        if (this.viewChangeListenerKey_) {\n            unlistenByKey(this.viewChangeListenerKey_);\n            this.viewChangeListenerKey_ = null;\n        }\n        var view = this.getView();\n        if (view) {\n            this.updateViewportSize_();\n            this.viewPropertyListenerKey_ = listen(view, ObjectEventType.PROPERTYCHANGE, this.handleViewPropertyChanged_, this);\n            this.viewChangeListenerKey_ = listen(view, EventType.CHANGE, this.handleViewPropertyChanged_, this);\n            view.resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleLayerGroupChanged_ = function () {\n        if (this.layerGroupPropertyListenerKeys_) {\n            this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n            this.layerGroupPropertyListenerKeys_ = null;\n        }\n        var layerGroup = this.getLayerGroup();\n        if (layerGroup) {\n            this.layerGroupPropertyListenerKeys_ = [\n                listen(layerGroup, ObjectEventType.PROPERTYCHANGE, this.render, this),\n                listen(layerGroup, EventType.CHANGE, this.render, this),\n            ];\n        }\n        this.render();\n    };\n    /**\n     * @return {boolean} Is rendered.\n     */\n    PluggableMap.prototype.isRendered = function () {\n        return !!this.frameState_;\n    };\n    /**\n     * Requests an immediate render in a synchronous manner.\n     * @api\n     */\n    PluggableMap.prototype.renderSync = function () {\n        if (this.animationDelayKey_) {\n            cancelAnimationFrame(this.animationDelayKey_);\n        }\n        this.animationDelay_();\n    };\n    /**\n     * Redraws all text after new fonts have loaded\n     */\n    PluggableMap.prototype.redrawText = function () {\n        var layerStates = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStates.length; i < ii; ++i) {\n            var layer = layerStates[i].layer;\n            if (layer.hasRenderer()) {\n                layer.getRenderer().handleFontsChanged();\n            }\n        }\n    };\n    /**\n     * Request a map rendering (at the next animation frame).\n     * @api\n     */\n    PluggableMap.prototype.render = function () {\n        if (this.renderer_ && this.animationDelayKey_ === undefined) {\n            this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n        }\n    };\n    /**\n     * Remove the given control from the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n     *     if the control was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeControl = function (control) {\n        return this.getControls().remove(control);\n    };\n    /**\n     * Remove the given interaction from the map.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n     * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n     *     undefined if the interaction was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeInteraction = function (interaction) {\n        return this.getInteractions().remove(interaction);\n    };\n    /**\n     * Removes the given layer from the map.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n     *     layer was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        return layers.remove(layer);\n    };\n    /**\n     * Remove the given overlay from the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n     *     if the overlay was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeOverlay = function (overlay) {\n        return this.getOverlays().remove(overlay);\n    };\n    /**\n     * @param {number} time Time.\n     * @private\n     */\n    PluggableMap.prototype.renderFrame_ = function (time) {\n        var _this = this;\n        var size = this.getSize();\n        var view = this.getView();\n        var previousFrameState = this.frameState_;\n        /** @type {?FrameState} */\n        var frameState = null;\n        if (size !== undefined && hasArea(size) && view && view.isDef()) {\n            var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n            var viewState = view.getState();\n            frameState = {\n                animate: false,\n                coordinateToPixelTransform: this.coordinateToPixelTransform_,\n                declutterTree: null,\n                extent: getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, size),\n                index: this.frameIndex_++,\n                layerIndex: 0,\n                layerStatesArray: this.getLayerGroup().getLayerStatesArray(),\n                pixelRatio: this.pixelRatio_,\n                pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n                postRenderFunctions: [],\n                size: size,\n                tileQueue: this.tileQueue_,\n                time: time,\n                usedTiles: {},\n                viewState: viewState,\n                viewHints: viewHints,\n                wantedTiles: {},\n            };\n        }\n        this.frameState_ = frameState;\n        this.renderer_.renderFrame(frameState);\n        if (frameState) {\n            if (frameState.animate) {\n                this.render();\n            }\n            Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n            if (previousFrameState) {\n                var moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                        !equals(frameState.extent, this.previousExtent_));\n                if (moveStart) {\n                    this.dispatchEvent(new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n                    this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n                }\n            }\n            var idle = this.previousExtent_ &&\n                !frameState.viewHints[ViewHint.ANIMATING] &&\n                !frameState.viewHints[ViewHint.INTERACTING] &&\n                !equals(frameState.extent, this.previousExtent_);\n            if (idle) {\n                this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n                clone(frameState.extent, this.previousExtent_);\n            }\n        }\n        this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n        if (!this.postRenderTimeoutHandle_) {\n            this.postRenderTimeoutHandle_ = setTimeout(function () {\n                _this.postRenderTimeoutHandle_ = undefined;\n                _this.handlePostRender();\n            }, 0);\n        }\n    };\n    /**\n     * Sets the layergroup of this map.\n     * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setLayerGroup = function (layerGroup) {\n        this.set(MapProperty.LAYERGROUP, layerGroup);\n    };\n    /**\n     * Set the size of this map.\n     * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setSize = function (size) {\n        this.set(MapProperty.SIZE, size);\n    };\n    /**\n     * Set the target element to render this map into.\n     * @param {HTMLElement|string} [target] The Element or id of the Element\n     *     that the map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setTarget = function (target) {\n        this.set(MapProperty.TARGET, target);\n    };\n    /**\n     * Set the view for this map.\n     * @param {View} view The view that controls this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setView = function (view) {\n        this.set(MapProperty.VIEW, view);\n    };\n    /**\n     * Force a recalculation of the map viewport size.  This should be called when\n     * third-party code changes the size of the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.updateSize = function () {\n        var targetElement = this.getTargetElement();\n        var size = undefined;\n        if (targetElement) {\n            var computedStyle = getComputedStyle(targetElement);\n            var width = targetElement.offsetWidth -\n                parseFloat(computedStyle['borderLeftWidth']) -\n                parseFloat(computedStyle['paddingLeft']) -\n                parseFloat(computedStyle['paddingRight']) -\n                parseFloat(computedStyle['borderRightWidth']);\n            var height = targetElement.offsetHeight -\n                parseFloat(computedStyle['borderTopWidth']) -\n                parseFloat(computedStyle['paddingTop']) -\n                parseFloat(computedStyle['paddingBottom']) -\n                parseFloat(computedStyle['borderBottomWidth']);\n            if (!isNaN(width) && !isNaN(height)) {\n                size = [width, height];\n                if (!hasArea(size)) {\n                    // eslint-disable-next-line\n                    console.warn(\"No map visible because the map container's width or height are 0.\");\n                }\n            }\n        }\n        this.setSize(size);\n        this.updateViewportSize_();\n    };\n    /**\n     * Recomputes the viewport size and save it on the view object (if any)\n     * @private\n     */\n    PluggableMap.prototype.updateViewportSize_ = function () {\n        var view = this.getView();\n        if (view) {\n            var size = undefined;\n            var computedStyle = getComputedStyle(this.viewport_);\n            if (computedStyle.width && computedStyle.height) {\n                size = [\n                    parseInt(computedStyle.width, 10),\n                    parseInt(computedStyle.height, 10),\n                ];\n            }\n            view.setViewportSize(size);\n        }\n    };\n    return PluggableMap;\n}(BaseObject));\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n    /**\n     * @type {HTMLElement|Document}\n     */\n    var keyboardEventTarget = null;\n    if (options.keyboardEventTarget !== undefined) {\n        keyboardEventTarget =\n            typeof options.keyboardEventTarget === 'string'\n                ? document.getElementById(options.keyboardEventTarget)\n                : options.keyboardEventTarget;\n    }\n    /**\n     * @type {Object<string, *>}\n     */\n    var values = {};\n    var layerGroup = options.layers &&\n        typeof ( /** @type {?} */(options.layers).getLayers) === 'function'\n        ? /** @type {LayerGroup} */ (options.layers)\n        : new LayerGroup({ layers: /** @type {Collection} */ (options.layers) });\n    values[MapProperty.LAYERGROUP] = layerGroup;\n    values[MapProperty.TARGET] = options.target;\n    values[MapProperty.VIEW] =\n        options.view !== undefined ? options.view : new View();\n    var controls;\n    if (options.controls !== undefined) {\n        if (Array.isArray(options.controls)) {\n            controls = new Collection(options.controls.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.controls).getArray) === 'function', 47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n            controls = /** @type {Collection} */ (options.controls);\n        }\n    }\n    var interactions;\n    if (options.interactions !== undefined) {\n        if (Array.isArray(options.interactions)) {\n            interactions = new Collection(options.interactions.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.interactions).getArray) ===\n                'function', 48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n            interactions = /** @type {Collection} */ (options.interactions);\n        }\n    }\n    var overlays;\n    if (options.overlays !== undefined) {\n        if (Array.isArray(options.overlays)) {\n            overlays = new Collection(options.overlays.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.overlays).getArray) === 'function', 49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n            overlays = options.overlays;\n        }\n    }\n    else {\n        overlays = new Collection();\n    }\n    return {\n        controls: controls,\n        interactions: interactions,\n        keyboardEventTarget: keyboardEventTarget,\n        overlays: overlays,\n        values: values,\n    };\n}\nexport default PluggableMap;\n//# sourceMappingURL=PluggableMap.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Map\n */\nimport CompositeMapRenderer from './renderer/Composite.js';\nimport PluggableMap from './PluggableMap.js';\nimport { assign } from './obj.js';\nimport { defaults as defaultControls } from './control.js';\nimport { defaults as defaultInteractions } from './interaction.js';\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~Group}\n * is a subclass of {@link module:ol/layer/Base}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @api\n */\nvar Map = /** @class */ (function (_super) {\n    __extends(Map, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").MapOptions} options Map options.\n     */\n    function Map(options) {\n        var _this = this;\n        options = assign({}, options);\n        if (!options.controls) {\n            options.controls = defaultControls();\n        }\n        if (!options.interactions) {\n            options.interactions = defaultInteractions({\n                onFocusOnly: true,\n            });\n        }\n        _this = _super.call(this, options) || this;\n        return _this;\n    }\n    Map.prototype.createRenderer = function () {\n        return new CompositeMapRenderer(this);\n    };\n    return Map;\n}(PluggableMap));\nexport default Map;\n//# sourceMappingURL=Map.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageBase\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { abstract } from './util.js';\n/**\n * @abstract\n */\nvar ImageBase = /** @class */ (function (_super) {\n    __extends(ImageBase, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./ImageState.js\").default} state State.\n     */\n    function ImageBase(extent, resolution, pixelRatio, state) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.extent = extent;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @protected\n         * @type {number|undefined}\n         */\n        _this.resolution = resolution;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = state;\n        return _this;\n    }\n    /**\n     * @protected\n     */\n    ImageBase.prototype.changed = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    ImageBase.prototype.getExtent = function () {\n        return this.extent;\n    };\n    /**\n     * @abstract\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     */\n    ImageBase.prototype.getImage = function () {\n        return abstract();\n    };\n    /**\n     * @return {number} PixelRatio.\n     */\n    ImageBase.prototype.getPixelRatio = function () {\n        return this.pixelRatio_;\n    };\n    /**\n     * @return {number} Resolution.\n     */\n    ImageBase.prototype.getResolution = function () {\n        return /** @type {number} */ (this.resolution);\n    };\n    /**\n     * @return {import(\"./ImageState.js\").default} State.\n     */\n    ImageBase.prototype.getState = function () {\n        return this.state;\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageBase.prototype.load = function () {\n        abstract();\n    };\n    return ImageBase;\n}(EventTarget));\nexport default ImageBase;\n//# sourceMappingURL=ImageBase.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Image\n */\nimport EventType from './events/EventType.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport { IMAGE_DECODE } from './has.js';\nimport { getHeight } from './extent.js';\nimport { listenOnce, unlistenByKey } from './events.js';\n/**\n * A function that takes an {@link module:ol/Image~Image} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~Image#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\nvar ImageWrapper = /** @class */ (function (_super) {\n    __extends(ImageWrapper, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {LoadFunction} imageLoadFunction Image load function.\n     */\n    function ImageWrapper(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n        var _this = _super.call(this, extent, resolution, pixelRatio, ImageState.IDLE) || this;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = ImageState.IDLE;\n        /**\n         * @private\n         * @type {LoadFunction}\n         */\n        _this.imageLoadFunction_ = imageLoadFunction;\n        return _this;\n    }\n    /**\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageWrapper.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageError_ = function () {\n        this.state = ImageState.ERROR;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageLoad_ = function () {\n        if (this.resolution === undefined) {\n            this.resolution = getHeight(this.extent) / this.image_.height;\n        }\n        this.state = ImageState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load the image or retry if loading previously failed.\n     * Loading is taken care of by the tile queue, and calling this method is\n     * only needed for preloading or for reloading in case of an error.\n     * @api\n     */\n    ImageWrapper.prototype.load = function () {\n        if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n            this.state = ImageState.LOADING;\n            this.changed();\n            this.imageLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n     */\n    ImageWrapper.prototype.setImage = function (image) {\n        this.image_ = image;\n        this.resolution = getHeight(this.extent) / this.image_.height;\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageWrapper;\n}(ImageBase));\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n    var img = /** @type {HTMLImageElement} */ (image);\n    if (img.src && IMAGE_DECODE) {\n        var promise = img.decode();\n        var listening_1 = true;\n        var unlisten = function () {\n            listening_1 = false;\n        };\n        promise\n            .then(function () {\n            if (listening_1) {\n                loadHandler();\n            }\n        })\n            .catch(function (error) {\n            if (listening_1) {\n                // FIXME: Unconditionally call errorHandler() when this bug is fixed upstream:\n                //        https://bugs.webkit.org/show_bug.cgi?id=198527\n                if (error.name === 'EncodingError' &&\n                    error.message === 'Invalid image type.') {\n                    loadHandler();\n                }\n                else {\n                    errorHandler();\n                }\n            }\n        });\n        return unlisten;\n    }\n    var listenerKeys = [\n        listenOnce(img, EventType.LOAD, loadHandler),\n        listenOnce(img, EventType.ERROR, errorHandler),\n    ];\n    return function unlisten() {\n        listenerKeys.forEach(unlistenByKey);\n    };\n}\nexport default ImageWrapper;\n//# sourceMappingURL=Image.js.map","/** Vanilla JS geographic inputs\r\n * color, size, width, font, symboles, dash, arrow, pattern\r\n */\r\nimport ol_ext_inherits from '../ext'\r\nimport ol_Object from 'ol/Object'\r\nimport ol_ext_element from '../element';\r\n\r\n/** @namespace  ol.ext.input\r\n */\r\n/*global ol*/\r\nif (window.ol) {\r\n  ol.ext.input = {};\r\n}\r\n\r\n/** Abstract base class; normally only used for creating subclasses and not instantiated in apps.    \r\n * @constructor\r\n * @extends {ol_Object}\r\n * @param {*} options\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {string} [options.type] input type, if no input\r\n *  @param {number} [options.min] input min, if no input\r\n *  @param {number} [options.max] input max, if no input\r\n *  @param {number} [options.step] input step, if no input\r\n *  @param {string|number} [options.val] input value\r\n *  @param {boolean} [options.checked] check input\r\n *  @param {boolean} [options.disabled] disable input\r\n *  @param {Element} [options.parent] parent element, if no input\r\n */\r\nvar ol_ext_input_Base = function(options) {\r\n  options = options || {};\r\n  \r\n  ol_Object.call(this);\r\n  \r\n  var input = this.input = options.input || ol_ext_element.create('INPUT', { \r\n    type: options.type,\r\n    min: options.min,\r\n    max: options.max,\r\n    step: options.step,\r\n    parent: options.parent\r\n  });\r\n  if (options.disabled) input.disabled = true;\r\n  if (options.checked !== undefined) input.checked = !!options.checked;\r\n  if (options.val !== undefined) input.value = options.val;\r\n};\r\nol_ext_inherits(ol_ext_input_Base, ol_Object);\r\n\r\n/** Listen to drag event\r\n * @param {Element} elt \r\n * @param {function} cback when draggin on the element\r\n * @private\r\n */\r\nol_ext_input_Base.prototype._listenDrag = function(elt, cback) {\r\n  var handle = function(e) {\r\n    this.moving = true;\r\n    var listen = function(e) {\r\n      if (e.type==='pointerup') {\r\n        document.removeEventListener('pointermove', listen);\r\n        document.removeEventListener('pointerup', listen);\r\n        document.removeEventListener('pointercancel', listen);\r\n        setTimeout(function() {\r\n          this.moving = false;\r\n        }.bind(this));\r\n      }\r\n      if (e.target === elt) cback(e);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }.bind(this);\r\n    document.addEventListener('pointermove', listen, false);\r\n    document.addEventListener('pointerup', listen, false);\r\n    document.addEventListener('pointercancel', listen, false);\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }.bind(this)\r\n  elt.addEventListener('mousedown', handle, false);\r\n  elt.addEventListener('touchstart', handle, false);\r\n};\r\n\r\n/** Set the current value\r\n */\r\n ol_ext_input_Base.prototype.setValue = function(v) {\r\n  if (v !== undefined) this.input.value = v;\r\n  this.input.dispatchEvent(new Event('change'));\r\n};\r\n\r\n/** Get the current getValue\r\n * @returns {string}\r\n */\r\nol_ext_input_Base.prototype.getValue = function() {\r\n  return this.input.value;\r\n};\r\n\r\n/** Get the input element\r\n * @returns {Element}\r\n */\r\nol_ext_input_Base.prototype.getInputElement = function() {\r\n  return this.input;\r\n};\r\n\r\nexport default ol_ext_input_Base\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_element from '../element';\r\nimport ol_ext_input_Base from './Base'\r\n\r\n/** Checkbox input\r\n * @constructor\r\n * @extends {ol_ext_input_Base}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element|string} [options.html] label content\r\n *  @param {string} [options.after] label garnish (placed after)\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n *  @param {boolean} [options.autoClose=true]\r\n *  @param {boolean} [options.visible=false] display the input\r\n */\r\nvar ol_ext_input_Checkbox = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Base.call(this, options);\r\n\r\n  var label = this.element = ol_ext_element.create('LABEL',{ \r\n    html: options.html,\r\n    className: ('ol-ext-check ol-ext-checkbox'  + (options.className || '')).trim()\r\n  });\r\n  if (this.input.parentNode) this.input.parentNode.insertBefore(label, this.input);\r\n  label.appendChild(this.input);\r\n  ol_ext_element.create('SPAN', { parent: label });\r\n  if (options.after) {\r\n    label.appendChild(document.createTextNode(options.after));\r\n  }\r\n\r\n  // Handle change\r\n  this.input.addEventListener('change', function() {\r\n    this.dispatchEvent({ type: 'check', checked: this.input.checked, value: this.input.value });\r\n  }.bind(this));\r\n\r\n};\r\nol_ext_inherits(ol_ext_input_Checkbox, ol_ext_input_Base);\r\n  \r\nol_ext_input_Checkbox.prototype.isChecked = function () {\r\n  return this.input.checked;\r\n};\r\n\r\nexport default ol_ext_input_Checkbox\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Checkbox from './Checkbox'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Switch = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Checkbox.call(this, options);\r\n\r\n  this.element.className = ('ol-ext-toggle-switch ' + (options.className || '')).trim();\r\n};\r\nol_ext_inherits(ol_ext_input_Switch, ol_ext_input_Checkbox);\r\n  \r\nexport default ol_ext_input_Switch\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Checkbox from './Checkbox'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Radio = function(input, options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Checkbox.call(this, input, options);\r\n\r\n  this.element.className = ('ol-ext-check ol-ext-radio' + (options.className || '')).trim();\r\n};\r\nol_ext_inherits(ol_ext_input_Radio, ol_ext_input_Checkbox);\r\n  \r\nexport default ol_ext_input_Radio\r\n","/** Vanilla JS helper to manipulate DOM without jQuery\r\n * @see https://github.com/nefe/You-Dont-Need-jQuery\r\n * @see https://plainjs.com/javascript/\r\n * @see http://youmightnotneedjquery.com/\r\n */\r\nimport ol_ext_input_Checkbox from './input/Checkbox'\r\nimport ol_ext_input_Switch from './input/Switch'\r\nimport ol_ext_input_Radio from './input/Radio'\r\n\r\n/** @namespace ol.ext.element */\r\nvar ol_ext_element = {};\r\n\r\n/**\r\n * Create an element\r\n * @param {string} tagName The element tag, use 'TEXT' to create a text node\r\n * @param {*} options\r\n *  @param {string} options.className className The element class name \r\n *  @param {Element} options.parent Parent to append the element as child\r\n *  @param {Element|string} options.html Content of the element\r\n *  @param {Element|string} [options.options] when tagName = SELECT a list of options as key:value to add to the select\r\n *  @param {string} options.* Any other attribut to add to the element\r\n */\r\nol_ext_element.create = function (tagName, options) {\r\n  options = options || {};\r\n  var elt;\r\n  // Create text node\r\n  if (tagName === 'TEXT') {\r\n    elt = document.createTextNode(options.html||'');\r\n    if (options.parent) options.parent.appendChild(elt);\r\n  } else {\r\n    // Other element\r\n    elt = document.createElement(tagName);\r\n    if (/button/i.test(tagName)) elt.setAttribute('type', 'button');\r\n    for (var attr in options) {\r\n      switch (attr) {\r\n        case 'className': {\r\n          if (options.className && options.className.trim) elt.setAttribute('class', options.className.trim());\r\n          break;\r\n        }\r\n        case 'html': {\r\n          if (options.html instanceof Element) elt.appendChild(options.html)\r\n          else if (options.html!==undefined) elt.innerHTML = options.html;\r\n          break;\r\n        }\r\n        case 'parent': {\r\n          if (options.parent) options.parent.appendChild(elt);\r\n          break;\r\n        }\r\n        case 'options': {\r\n          console.log('options', options.options)\r\n          if (/select/i.test(tagName)) {\r\n            for (var i in options.options) {\r\n              ol_ext_element.create('OPTION', {\r\n                html: i,\r\n                value: options.options[i],\r\n                parent: elt          \r\n              })\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 'style': {\r\n          this.setStyle(elt, options.style);\r\n          break;\r\n        }\r\n        case 'change':\r\n        case 'click': {\r\n          ol_ext_element.addListener(elt, attr, options[attr]);\r\n          break;\r\n        }\r\n        case 'on': {\r\n          for (var e in options.on) {\r\n            ol_ext_element.addListener(elt, e, options.on[e]);\r\n          }\r\n          break;\r\n        }\r\n        case 'checked': {\r\n          elt.checked = !!options.checked;\r\n          break;\r\n        }\r\n        default: {\r\n          elt.setAttribute(attr, options[attr]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return elt;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {boolean} options.checked\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createSwitch = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    type: 'checkbox',\r\n    on: options.on,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  new ol_ext_input_Switch(opt);\r\n  return input;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {string} [options.name] input name\r\n *  @param {string} [options.type=checkbox] input type: radio or checkbox\r\n *  @param {string} options.value input value\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createCheck = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    name: options.name,\r\n    type: (options.type==='radio' ? 'radio' : 'checkbox'),\r\n    on: options.on,\r\n    parent: options.parent\r\n  });\r\n  console.log(input)\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  if (options.type === 'radio') {\r\n    new ol_ext_input_Radio(opt);\r\n  } else {\r\n    new ol_ext_input_Checkbox(opt);\r\n  }\r\n  return input;\r\n};\r\n\r\n/** Set inner html or append a child element to an element\r\n * @param {Element} element\r\n * @param {Element|string} html Content of the element\r\n */\r\nol_ext_element.setHTML = function(element, html) {\r\n  if (html instanceof Element) element.appendChild(html)\r\n  else if (html!==undefined) element.innerHTML = html;\r\n};\r\n\r\n/** Append text into an elemnt\r\n * @param {Element} element\r\n * @param {string} text text content\r\n */\r\nol_ext_element.appendText = function(element, text) {\r\n  element.appendChild(document.createTextNode(text||''));\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.addListener = function (element, eventType, fn, useCapture ) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.addEventListener(e, fn, useCapture);\r\n  });\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.removeListener = function (element, eventType, fn) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.removeEventListener(e, fn);\r\n  });\r\n};\r\n\r\n/**\r\n * Show an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.show = function (element) {\r\n  element.style.display = '';\r\n};\r\n\r\n/**\r\n * Hide an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.hide = function (element) {\r\n  element.style.display = 'none';\r\n};\r\n\r\n/**\r\n * Test if an element is hihdden\r\n * @param {Element} element\r\n * @return {boolean}\r\n */\r\nol_ext_element.hidden = function (element) {\r\n  return ol_ext_element.getStyle(element, 'display') === 'none';\r\n};\r\n\r\n/**\r\n * Toggle an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.toggle = function (element) {\r\n  element.style.display = (element.style.display==='none' ? '' : 'none');\r\n};\r\n\r\n/** Set style of an element\r\n * @param {DOMElement} el the element\r\n * @param {*} st list of style\r\n */\r\nol_ext_element.setStyle = function(el, st) {\r\n  for (var s in st) {\r\n    switch (s) {\r\n      case 'top':\r\n      case 'left':\r\n      case 'bottom':\r\n      case 'right':\r\n      case 'minWidth':\r\n      case 'maxWidth':\r\n      case 'width':\r\n      case 'height': {\r\n        if (typeof(st[s]) === 'number') {\r\n          el.style[s] = st[s]+'px';\r\n        } else {\r\n          el.style[s] = st[s];\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        el.style[s] = st[s];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get style propertie of an element\r\n * @param {DOMElement} el the element\r\n * @param {string} styleProp Propertie name\r\n * @return {*} style value\r\n */\r\nol_ext_element.getStyle = function(el, styleProp) {\r\n  var value, defaultView = (el.ownerDocument || document).defaultView;\r\n  // W3C standard way:\r\n  if (defaultView && defaultView.getComputedStyle) {\r\n    // sanitize property name to css notation\r\n    // (hypen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n    value = defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n  } else if (el.currentStyle) { // IE\r\n    // sanitize property name to camelCase\r\n    styleProp = styleProp.replace(/-(\\w)/g, function(str, letter) {\r\n      return letter.toUpperCase();\r\n    });\r\n    value = el.currentStyle[styleProp];\r\n    // convert other units to pixels on IE\r\n    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) { \r\n      return (function(value) {\r\n        var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;\r\n        el.runtimeStyle.left = el.currentStyle.left;\r\n        el.style.left = value || 0;\r\n        value = el.style.pixelLeft + \"px\";\r\n        el.style.left = oldLeft;\r\n        el.runtimeStyle.left = oldRsLeft;\r\n        return value;\r\n      })(value);\r\n    }\r\n  }\r\n  if (/px$/.test(value)) return parseInt(value);\r\n  return value;\r\n};\r\n\r\n/** Get outerHeight of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerHeight = function(elt) {\r\n  return elt.offsetHeight + ol_ext_element.getStyle(elt, 'marginBottom')\r\n};\r\n\r\n/** Get outerWidth of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerWidth = function(elt) {\r\n  return elt.offsetWidth + ol_ext_element.getStyle(elt, 'marginLeft')\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @return {*} \r\n */\r\nol_ext_element.offsetRect = function(elt) {\r\n  var rect = elt.getBoundingClientRect();\r\n  return {\r\n    top: rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0),\r\n    left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0),\r\n    height: rect.height || (rect.bottom - rect.top),\r\n    width: rect.width || (rect.right - rect.left)\r\n  }\r\n};\r\n\r\n/** Make a div scrollable without scrollbar.\r\n * On touch devices the default behavior is preserved\r\n * @param {DOMElement} elt\r\n * @param {*} options\r\n *  @param {function} options.onmove a function that takes a boolean indicating that the div is scrolling\r\n *  @param {boolean} [options.vertical=false] \r\n *  @param {boolean} [options.animate=true] add kinetic to scroll\r\n */\r\nol_ext_element.scrollDiv = function(elt, options) {\r\n  var pos = false;\r\n  var speed = 0;\r\n  var d, dt = 0;\r\n\r\n  var onmove = (typeof(options.onmove) === 'function' ? options.onmove : function(){});\r\n  var page = options.vertical ? 'pageY' : 'pageX';\r\n  var scroll = options.vertical ? 'scrollTop' : 'scrollLeft';\r\n  var moving = false;\r\n\r\n  // Prevent image dragging\r\n  elt.querySelectorAll('img').forEach(function(i) {\r\n    i.ondragstart = function(){ return false; };\r\n  });\r\n  elt.style['touch-action'] = 'none';\r\n  \r\n  // Start scrolling\r\n  ol_ext_element.addListener(elt, ['pointerdown'], function(e) {\r\n    moving = false;\r\n    pos = e[page];\r\n    dt = new Date();\r\n    elt.classList.add('ol-move');\r\n  });\r\n  \r\n  // Register scroll\r\n  ol_ext_element.addListener(window, ['pointermove'], function(e) {\r\n    moving = true;\r\n    if (pos !== false) {\r\n      var delta = pos - e[page];\r\n      elt[scroll] += delta;\r\n      d = new Date();\r\n      if (d-dt) {\r\n        speed = (speed + delta / (d - dt))/2;\r\n      }\r\n      pos = e[page];\r\n      dt = d;\r\n      // Tell we are moving\r\n      if (delta) onmove(true);\r\n    }\r\n  });\r\n  \r\n  // Animate scroll\r\n  var animate = function(to) {\r\n    var step = (to>0) ? Math.min(100, to/2) : Math.max(-100, to/2);\r\n    to -= step;\r\n    elt[scroll] += step;\r\n    if (-1 < to && to < 1) {\r\n      if (moving) setTimeout(function() { elt.classList.remove('ol-move'); });\r\n      else elt.classList.remove('ol-move');\r\n      moving = false;\r\n      onmove(false);\r\n    } else {\r\n      setTimeout(function() {\r\n        animate(to);\r\n      }, 40);\r\n    }\r\n  }\r\n\r\n  // Stop scrolling\r\n  ol_ext_element.addListener(window, ['pointerup','pointercancel'], function(e) {\r\n    dt = new Date() - dt;\r\n    if (dt>100) {\r\n      // User stop: no speed\r\n      speed = 0;\r\n    } else if (dt>0) {\r\n      // Calculate new speed\r\n      speed = ((speed||0) + (pos - e[page]) / dt) / 2;\r\n    }\r\n    animate(options.animate===false ? 0 : speed*200);\r\n    pos = false;\r\n    speed = 0;\r\n    dt = 0;\r\n  });\r\n\r\n  // Handle mousewheel\r\n  if (options.mousewheel) { // && !elt.classList.contains('ol-touch')) {\r\n    ol_ext_element.addListener(elt, \r\n      ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n      function(e) {\r\n        var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\r\n        elt.classList.add('ol-move');\r\n        elt[scroll] -= delta*30;\r\n        elt.classList.remove('ol-move');\r\n        return false;\r\n      }\r\n    );\r\n  }\r\n};\r\n\r\n/** Dispatch an event to an Element \r\n * @param {string} eventName\r\n * @param {Element} element\r\n*/\r\nol_ext_element.dispatchEvent = function (eventName, element) {\r\n  var event;\r\n  try {\r\n    event = new CustomEvent(eventName);\r\n  } catch(e) {\r\n    // Try customevent on IE\r\n    event = document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, {});\r\n  }\r\n  element.dispatchEvent(event);\r\n};\r\n\r\nexport default ol_ext_element\r\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nvar MapEvent = /** @class */ (function (_super) {\n    __extends(MapEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapEvent(type, map, opt_frameState) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The map where the event occurred.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @api\n         */\n        _this.map = map;\n        /**\n         * The frame state at the time of the event.\n         * @type {?import(\"./PluggableMap.js\").FrameState}\n         * @api\n         */\n        _this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n        return _this;\n    }\n    return MapEvent;\n}(Event));\nexport default MapEvent;\n//# sourceMappingURL=MapEvent.js.map","/**\n * @module ol/ObjectEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a property is changed.\n     * @event module:ol/Object.ObjectEvent#propertychange\n     * @api\n     */\n    PROPERTYCHANGE: 'propertychange',\n};\n/**\n * @typedef {'propertychange'} Types\n */\n//# sourceMappingURL=ObjectEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport { createCanvasContext2D } from './dom.js';\nimport { listenImage } from './Image.js';\nvar ImageTile = /** @class */ (function (_super) {\n    __extends(ImageTile, _super);\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"./TileState.js\").default} state State.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n     * @param {import(\"./Tile.js\").Options} [opt_options] Tile options.\n     */\n    function ImageTile(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n        var _this = _super.call(this, tileCoord, state, opt_options) || this;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ = crossOrigin;\n        /**\n         * Image URI\n         *\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        _this.key = src;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"./Tile.js\").LoadFunction}\n         */\n        _this.tileLoadFunction_ = tileLoadFunction;\n        return _this;\n    }\n    /**\n     * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageTile.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Sets an HTML image element for this tile (may be a Canvas or preloaded Image).\n     * @param {HTMLCanvasElement|HTMLImageElement} element Element.\n     */\n    ImageTile.prototype.setImage = function (element) {\n        this.image_ = element;\n        this.state = TileState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageError_ = function () {\n        this.state = TileState.ERROR;\n        this.unlistenImage_();\n        this.image_ = getBlankImage();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageLoad_ = function () {\n        var image = /** @type {HTMLImageElement} */ (this.image_);\n        if (image.naturalWidth && image.naturalHeight) {\n            this.state = TileState.LOADED;\n        }\n        else {\n            this.state = TileState.EMPTY;\n        }\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @api\n     */\n    ImageTile.prototype.load = function () {\n        if (this.state == TileState.ERROR) {\n            this.state = TileState.IDLE;\n            this.image_ = new Image();\n            if (this.crossOrigin_ !== null) {\n                this.image_.crossOrigin = this.crossOrigin_;\n            }\n        }\n        if (this.state == TileState.IDLE) {\n            this.state = TileState.LOADING;\n            this.changed();\n            this.tileLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageTile;\n}(Tile));\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n    var ctx = createCanvasContext2D(1, 1);\n    ctx.fillStyle = 'rgba(0,0,0,0)';\n    ctx.fillRect(0, 0, 1, 1);\n    return ctx.canvas;\n}\nexport default ImageTile;\n//# sourceMappingURL=ImageTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/AssertionError\n */\nimport { VERSION } from './util.js';\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nvar AssertionError = /** @class */ (function (_super) {\n    __extends(AssertionError, _super);\n    /**\n     * @param {number} code Error code.\n     */\n    function AssertionError(code) {\n        var _this = this;\n        var path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n        var message = 'Assertion failed. See https://openlayers.org/en/' +\n            path +\n            '/doc/errors/#' +\n            code +\n            ' for details.';\n        _this = _super.call(this, message) || this;\n        /**\n         * Error code. The meaning of the code can be found on\n         * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n         * the version found in the OpenLayers script's header comment if a version\n         * other than the latest is used).\n         * @type {number}\n         * @api\n         */\n        _this.code = code;\n        /**\n         * @type {string}\n         */\n        _this.name = 'AssertionError';\n        // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n        _this.message = message;\n        return _this;\n    }\n    return AssertionError;\n}(Error));\nexport default AssertionError;\n//# sourceMappingURL=AssertionError.js.map","/**\n * @module ol/ImageState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    ERROR: 3,\n    EMPTY: 4,\n};\n//# sourceMappingURL=ImageState.js.map","/** @namespace  ol.ext\r\n */\r\n/*global ol*/\r\nif (window.ol && !ol.ext) {\r\n  ol.ext = {};\r\n}\r\n\r\n/** Inherit the prototype methods from one constructor into another.\r\n * replace deprecated ol method\r\n *\r\n * @param {!Function} childCtor Child constructor.\r\n * @param {!Function} parentCtor Parent constructor.\r\n * @function module:ol.inherits\r\n * @api\r\n */\r\nvar ol_ext_inherits = function(child,parent) {\r\n  child.prototype = Object.create(parent.prototype);\r\n  child.prototype.constructor = child;\r\n};\r\n\r\n// Compatibilty with ol > 5 to be removed when v6 is out\r\nif (window.ol) {\r\n  if (!ol.inherits) ol.inherits = ol_ext_inherits;\r\n}\r\n\r\n/* IE Polyfill */\r\n// NodeList.forEach\r\nif (window.NodeList && !NodeList.prototype.forEach) {\r\n  NodeList.prototype.forEach = Array.prototype.forEach;\r\n}\r\n// Element.remove\r\nif (window.Element && !Element.prototype.remove) {\r\n  Element.prototype.remove = function() {\r\n    if (this.parentNode) this.parentNode.removeChild(this);\r\n  }\r\n}\r\n/* End Polyfill */\r\n\r\nexport {ol_ext_inherits}\r\nexport default ol_ext_inherits\r\n","/*\r\n  Copyright (c) 2015 Jean-Marc VIGLINO,\r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\n\r\nimport ol_ext_inherits from '../util/ext'\r\nimport ol_control_Control from 'ol/control/Control'\r\n\r\n/**\r\n * @classdesc Swipe Control.\r\n *\r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} Control options.\r\n *  @param {ol.layer} options.layers layer to swipe\r\n *  @param {ol.layer} options.rightLayer layer to swipe on right side\r\n *  @param {string} options.className control class name\r\n *  @param {number} options.position position propertie of the swipe [0,1], default 0.5\r\n *  @param {string} options.orientation orientation propertie (vertical|horizontal), default vertical\r\n */\r\nvar ol_control_Swipe = function(options) {\r\n  options = options || {};\r\n\r\n  var button = document.createElement('button');\r\n\r\n  var element = document.createElement('div');\r\n  element.className = (options.className || \"ol-swipe\") + \" ol-unselectable ol-control\";\r\n  element.appendChild(button);\r\n\r\n  element.addEventListener(\"mousedown\", this.move.bind(this));\r\n  element.addEventListener(\"touchstart\", this.move.bind(this));\r\n\r\n  ol_control_Control.call(this, {\r\n    element: element\r\n  });\r\n\r\n  // An array of listener on layer postcompose\r\n  this.precomposeRight_ = this.precomposeRight.bind(this);\r\n  this.precomposeLeft_ = this.precomposeLeft.bind(this);\r\n  this.postcompose_ = this.postcompose.bind(this);\r\n\r\n  this.layers = [];\r\n  if (options.layers) this.addLayer(options.layers, false);\r\n  if (options.rightLayers) this.addLayer(options.rightLayers, true);\r\n\r\n  this.on('propertychange', function() {\r\n    if (this.getMap()) this.getMap().renderSync();\r\n    if (this.get('orientation') === \"horizontal\") {\r\n      this.element.style.top = this.get('position')*100+\"%\";\r\n      this.element.style.left = \"\";\r\n    } else {\r\n      if (this.get('orientation') !== \"vertical\") this.set('orientation', \"vertical\");\r\n      this.element.style.left = this.get('position')*100+\"%\";\r\n      this.element.style.top = \"\";\r\n    }\r\n    this.element.classList.remove(\"horizontal\", \"vertical\");\r\n    this.element.classList.add(this.get('orientation'));\r\n  }.bind(this));\r\n\r\n  this.set('position', options.position || 0.5);\r\n  this.set('orientation', options.orientation || 'vertical');\r\n};\r\nol_ext_inherits(ol_control_Swipe, ol_control_Control);\r\n\r\n/**\r\n * Set the map instance the control associated with.\r\n * @param {_ol_Map_} map The map instance.\r\n */\r\nol_control_Swipe.prototype.setMap = function(map) {\r\n  var i;\r\n  var l;\r\n\r\n  if (this.getMap()) {\r\n    for (i=0; i<this.layers.length; i++) {\r\n      l = this.layers[i];\r\n      if (l.right) l.layer.un(['precompose','prerender'], this.precomposeRight_);\r\n      else l.layer.un(['precompose','prerender'], this.precomposeLeft_);\r\n      l.layer.un(['postcompose','postrender'], this.postcompose_);\r\n    }\r\n    this.getMap().renderSync();\r\n  }\r\n\r\n  ol_control_Control.prototype.setMap.call(this, map);\r\n\r\n  if (map) {\r\n    this._listener = [];\r\n    for (i=0; i<this.layers.length; i++) {\r\n      l = this.layers[i];\r\n      if (l.right) l.layer.on(['precompose','prerender'], this.precomposeRight_);\r\n      else l.layer.on(['precompose','prerender'], this.precomposeLeft_);\r\n      l.layer.on(['postcompose','postrender'], this.postcompose_);\r\n    }\r\n    map.renderSync();\r\n  }\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.isLayer_ = function(layer){\r\n  for (var k=0; k<this.layers.length; k++) {\r\n    if (this.layers[k].layer === layer) return k;\r\n  }\r\n  return -1;\r\n};\r\n\r\n/** Add a layer to clip\r\n *\t@param {ol.layer|Array<ol.layer>} layer to clip\r\n*\t@param {bool} add layer in the right part of the map, default left.\r\n*/\r\nol_control_Swipe.prototype.addLayer = function(layers, right) {\r\n  if (!(layers instanceof Array)) layers = [layers];\r\n  for (var i=0; i<layers.length; i++) {\r\n    var l = layers[i];\r\n    if (this.isLayer_(l) < 0) {\r\n      this.layers.push({ layer:l, right:right });\r\n      if (this.getMap()) {\r\n        if (right) l.on(['precompose','prerender'], this.precomposeRight_);\r\n        else l.on(['precompose','prerender'], this.precomposeLeft_);\r\n        l.on(['postcompose','postrender'], this.postcompose_);\r\n        this.getMap().renderSync();\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/** Remove a layer to clip\r\n *\t@param {ol.layer|Array<ol.layer>} layer to clip\r\n*/\r\nol_control_Swipe.prototype.removeLayer = function(layers) {\r\n  if (!(layers instanceof Array)) layers = [layers];\r\n  for (var i=0; i<layers.length; i++) {\r\n    var k = this.isLayer_(layers[i]);\r\n    if (k >=0 && this.getMap()) {\r\n      if (this.layers[k].right) layers[i].un(['precompose','prerender'], this.precomposeRight_);\r\n      else layers[i].un(['precompose','prerender'], this.precomposeLeft_);\r\n      layers[i].un(['postcompose','postrender'], this.postcompose_);\r\n      this.layers.splice(k,1);\r\n      this.getMap().renderSync();\r\n    }\r\n  }\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.move = function(e) {\r\n  var self = this;\r\n  var l;\r\n  switch (e.type) {\r\n    case 'touchcancel':\r\n    case 'touchend':\r\n    case 'mouseup': {\r\n      self.isMoving = false;\r\n      [\"mouseup\", \"mousemove\", \"touchend\", \"touchcancel\", \"touchmove\"]\r\n        .forEach(function(eventName) {\r\n          document.removeEventListener(eventName, self.move);\r\n        });\r\n      break;\r\n    }\r\n    case 'mousedown':\r\n    case 'touchstart': {\r\n      self.isMoving = true;\r\n      [\"mouseup\", \"mousemove\", \"touchend\", \"touchcancel\", \"touchmove\"]\r\n        .forEach(function(eventName) {\r\n          document.addEventListener(eventName, self.move.bind(self));\r\n        });\r\n    }\r\n    // fallthrough\r\n    case 'mousemove':\r\n    case 'touchmove': {\r\n      if (self.isMoving) {\r\n        if (self.get('orientation') === \"vertical\") {\r\n          var pageX = e.pageX\r\n            || (e.touches && e.touches.length && e.touches[0].pageX)\r\n            || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n          if (!pageX) break;\r\n          pageX -= self.getMap().getTargetElement().getBoundingClientRect().left +\r\n            window.pageXOffset - document.documentElement.clientLeft;\r\n\r\n          l = self.getMap().getSize()[0];\r\n          l = Math.min(Math.max(0, 1-(l-pageX)/l), 1);\r\n          self.set('position', l);\r\n        } else {\r\n          var pageY = e.pageY\r\n            || (e.touches && e.touches.length && e.touches[0].pageY)\r\n            || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n          if (!pageY) break;\r\n          pageY -= self.getMap().getTargetElement().getBoundingClientRect().top +\r\n            window.pageYOffset - document.documentElement.clientTop;\r\n\r\n          l = self.getMap().getSize()[1];\r\n          l = Math.min(Math.max(0, 1-(l-pageY)/l), 1);\r\n          self.set('position', l);\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    default: break;\r\n  }\r\n};\r\n\r\nol_control_Swipe.prototype._drawRect = function(e, pts) {\r\n  var tr = e.inversePixelTransform;\r\n  if (tr) {\r\n    var r = [\r\n      [pts[0][0], pts[0][1]],\r\n      [pts[0][0], pts[1][1]],\r\n      [pts[1][0], pts[1][1]],\r\n      [pts[1][0], pts[0][1]],\r\n      [pts[0][0], pts[0][1]]\r\n    ];\r\n    r.forEach(function (pt, i) {\r\n      pt = [\r\n        (pt[0]*tr[0] - pt[1]*tr[1] + tr[4]),\r\n        (-pt[0]*tr[2] + pt[1]*tr[3] + tr[5])\r\n      ];\r\n      if (!i) {\r\n        e.context.moveTo(pt[0], pt[1]);\r\n      } else {\r\n        e.context.lineTo(pt[0], pt[1]);\r\n      }\r\n    });\r\n  } else {\r\n    var ratio = e.frameState.pixelRatio;\r\n    e.context.rect(pts[0][0]*ratio,pts[0][1]*ratio,pts[1][0]*ratio,pts[1][1]*ratio);\r\n  }\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.precomposeLeft = function(e) {\r\n  var ctx = e.context;\r\n  var size = e.frameState.size;\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  var pts = [[0,0],[size[0],size[1]]];\r\n  if (this.get('orientation') === \"vertical\") {\r\n    pts[1] = [\r\n      size[0]*this.get('position'), \r\n      size[1]\r\n    ];\r\n  } else {\r\n    pts[1] = [\r\n      size[0],\r\n      size[1]*this.get('position')\r\n    ];\r\n  }\r\n  this._drawRect(e, pts);\r\n  ctx.clip();\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.precomposeRight = function(e) {\r\n  var ctx = e.context;\r\n  var size = e.frameState.size;\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  var pts = [[0,0],[size[0],size[1]]];\r\n  if (this.get('orientation') === \"vertical\") {\r\n    pts[0] = [\r\n      size[0]*this.get('position'), \r\n      0\r\n    ];\r\n  } else {\r\n    pts[0] = [\r\n      0,\r\n      size[1]*this.get('position')\r\n    ]\r\n  }\r\n  this._drawRect(e, pts);\r\n  ctx.clip();\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.postcompose = function(e) {\r\n  // restore context when decluttering is done (ol>=6)\r\n  // https://github.com/openlayers/openlayers/issues/10096\r\n  if (e.target.getClassName && e.target.getClassName()!=='ol-layer' && e.target.get('declutter')) {\r\n    setTimeout(function () {\r\n      e.context.restore();\r\n    }, 0);\r\n  } else {\r\n    e.context.restore();\r\n  }\r\n};\r\n\r\nexport default ol_control_Swipe\r\n","/**\n * @module ol/Disposable\n */\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = /** @class */ (function () {\n    function Disposable() {\n        /**\n         * The object has already been disposed.\n         * @type {boolean}\n         * @protected\n         */\n        this.disposed = false;\n    }\n    /**\n     * Clean up.\n     */\n    Disposable.prototype.dispose = function () {\n        if (!this.disposed) {\n            this.disposed = true;\n            this.disposeInternal();\n        }\n    };\n    /**\n     * Extension point for disposable objects.\n     * @protected\n     */\n    Disposable.prototype.disposeInternal = function () { };\n    return Disposable;\n}());\nexport default Disposable;\n//# sourceMappingURL=Disposable.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport { assign, isEmpty } from './obj.js';\nimport { getUid } from './util.js';\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nvar ObjectEvent = /** @class */ (function (_super) {\n    __extends(ObjectEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {string} key The property name.\n     * @param {*} oldValue The old value for `key`.\n     */\n    function ObjectEvent(type, key, oldValue) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The name of the property whose value is changing.\n         * @type {string}\n         * @api\n         */\n        _this.key = key;\n        /**\n         * The old value. To get the new value use `e.target.get(e.key)` where\n         * `e` is the event object.\n         * @type {*}\n         * @api\n         */\n        _this.oldValue = oldValue;\n        return _this;\n    }\n    return ObjectEvent;\n}(Event));\nexport { ObjectEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nvar BaseObject = /** @class */ (function (_super) {\n    __extends(BaseObject, _super);\n    /**\n     * @param {Object<string, *>} [opt_values] An object with key-value pairs.\n     */\n    function BaseObject(opt_values) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {ObjectOnSignature<import(\"./Observable.js\").OnReturn>}\n         */\n        _this.on;\n        /***\n         * @type {ObjectOnSignature<import(\"./Observable.js\").OnReturn>}\n         */\n        _this.once;\n        /***\n         * @type {ObjectOnSignature<void>}\n         */\n        _this.un;\n        // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n        // the same as the order in which they were created.  This also helps to\n        // ensure that object properties are always added in the same order, which\n        // helps many JavaScript engines generate faster code.\n        getUid(_this);\n        /**\n         * @private\n         * @type {Object<string, *>}\n         */\n        _this.values_ = null;\n        if (opt_values !== undefined) {\n            _this.setProperties(opt_values);\n        }\n        return _this;\n    }\n    /**\n     * Gets a value.\n     * @param {string} key Key name.\n     * @return {*} Value.\n     * @api\n     */\n    BaseObject.prototype.get = function (key) {\n        var value;\n        if (this.values_ && this.values_.hasOwnProperty(key)) {\n            value = this.values_[key];\n        }\n        return value;\n    };\n    /**\n     * Get a list of object property names.\n     * @return {Array<string>} List of property names.\n     * @api\n     */\n    BaseObject.prototype.getKeys = function () {\n        return (this.values_ && Object.keys(this.values_)) || [];\n    };\n    /**\n     * Get an object of all property names and values.\n     * @return {Object<string, *>} Object.\n     * @api\n     */\n    BaseObject.prototype.getProperties = function () {\n        return (this.values_ && assign({}, this.values_)) || {};\n    };\n    /**\n     * @return {boolean} The object has properties.\n     */\n    BaseObject.prototype.hasProperties = function () {\n        return !!this.values_;\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {*} oldValue Old value.\n     */\n    BaseObject.prototype.notify = function (key, oldValue) {\n        var eventType;\n        eventType = \"change:\" + key;\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        eventType = ObjectEventType.PROPERTYCHANGE;\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.addChangeListener = function (key, listener) {\n        this.addEventListener(\"change:\" + key, listener);\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.removeChangeListener = function (key, listener) {\n        this.removeEventListener(\"change:\" + key, listener);\n    };\n    /**\n     * Sets a value.\n     * @param {string} key Key name.\n     * @param {*} value Value.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.set = function (key, value, opt_silent) {\n        var values = this.values_ || (this.values_ = {});\n        if (opt_silent) {\n            values[key] = value;\n        }\n        else {\n            var oldValue = values[key];\n            values[key] = value;\n            if (oldValue !== value) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    /**\n     * Sets a collection of key-value pairs.  Note that this changes any existing\n     * properties and adds new ones (it does not remove any existing properties).\n     * @param {Object<string, *>} values Values.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.setProperties = function (values, opt_silent) {\n        for (var key in values) {\n            this.set(key, values[key], opt_silent);\n        }\n    };\n    /**\n     * Apply any properties from another object without triggering events.\n     * @param {BaseObject} source The source object.\n     * @protected\n     */\n    BaseObject.prototype.applyProperties = function (source) {\n        if (!source.values_) {\n            return;\n        }\n        assign(this.values_ || (this.values_ = {}), source.values_);\n    };\n    /**\n     * Unsets a property.\n     * @param {string} key Key name.\n     * @param {boolean} [opt_silent] Unset without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.unset = function (key, opt_silent) {\n        if (this.values_ && key in this.values_) {\n            var oldValue = this.values_[key];\n            delete this.values_[key];\n            if (isEmpty(this.values_)) {\n                this.values_ = null;\n            }\n            if (!opt_silent) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    return BaseObject;\n}(Observable));\nexport default BaseObject;\n//# sourceMappingURL=Object.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LENGTH: 'length',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nvar CollectionEvent = /** @class */ (function (_super) {\n    __extends(CollectionEvent, _super);\n    /**\n     * @param {import(\"./CollectionEventType.js\").default} type Type.\n     * @param {*} [opt_element] Element.\n     * @param {number} [opt_index] The index of the added or removed element.\n     */\n    function CollectionEvent(type, opt_element, opt_index) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The element that is added to or removed from the collection.\n         * @type {*}\n         * @api\n         */\n        _this.element = opt_element;\n        /**\n         * The index of the added or removed element.\n         * @type {number}\n         * @api\n         */\n        _this.index = opt_index;\n        return _this;\n    }\n    return CollectionEvent;\n}(Event));\nexport { CollectionEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nvar Collection = /** @class */ (function (_super) {\n    __extends(Collection, _super);\n    /**\n     * @param {Array<T>} [opt_array] Array.\n     * @param {Options} [opt_options] Collection options.\n     */\n    function Collection(opt_array, opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {CollectionOnSignature<import(\"./Observable.js\").OnReturn>}\n         */\n        _this.on;\n        /***\n         * @type {CollectionOnSignature<import(\"./Observable.js\").OnReturn>}\n         */\n        _this.once;\n        /***\n         * @type {CollectionOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.unique_ = !!options.unique;\n        /**\n         * @private\n         * @type {!Array<T>}\n         */\n        _this.array_ = opt_array ? opt_array : [];\n        if (_this.unique_) {\n            for (var i = 0, ii = _this.array_.length; i < ii; ++i) {\n                _this.assertUnique_(_this.array_[i], i);\n            }\n        }\n        _this.updateLength_();\n        return _this;\n    }\n    /**\n     * Remove all elements from the collection.\n     * @api\n     */\n    Collection.prototype.clear = function () {\n        while (this.getLength() > 0) {\n            this.pop();\n        }\n    };\n    /**\n     * Add elements to the collection.  This pushes each item in the provided array\n     * to the end of the collection.\n     * @param {!Array<T>} arr Array.\n     * @return {Collection<T>} This collection.\n     * @api\n     */\n    Collection.prototype.extend = function (arr) {\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            this.push(arr[i]);\n        }\n        return this;\n    };\n    /**\n     * Iterate over each element, calling the provided callback.\n     * @param {function(T, number, Array<T>): *} f The function to call\n     *     for every element. This function takes 3 arguments (the element, the\n     *     index and the array). The return value is ignored.\n     * @api\n     */\n    Collection.prototype.forEach = function (f) {\n        var array = this.array_;\n        for (var i = 0, ii = array.length; i < ii; ++i) {\n            f(array[i], i, array);\n        }\n    };\n    /**\n     * Get a reference to the underlying Array object. Warning: if the array\n     * is mutated, no events will be dispatched by the collection, and the\n     * collection's \"length\" property won't be in sync with the actual length\n     * of the array.\n     * @return {!Array<T>} Array.\n     * @api\n     */\n    Collection.prototype.getArray = function () {\n        return this.array_;\n    };\n    /**\n     * Get the element at the provided index.\n     * @param {number} index Index.\n     * @return {T} Element.\n     * @api\n     */\n    Collection.prototype.item = function (index) {\n        return this.array_[index];\n    };\n    /**\n     * Get the length of this collection.\n     * @return {number} The length of the array.\n     * @observable\n     * @api\n     */\n    Collection.prototype.getLength = function () {\n        return this.get(Property.LENGTH);\n    };\n    /**\n     * Insert an element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.insertAt = function (index, elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        this.array_.splice(index, 0, elem);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n    };\n    /**\n     * Remove the last element of the collection and return it.\n     * Return `undefined` if the collection is empty.\n     * @return {T|undefined} Element.\n     * @api\n     */\n    Collection.prototype.pop = function () {\n        return this.removeAt(this.getLength() - 1);\n    };\n    /**\n     * Insert the provided element at the end of the collection.\n     * @param {T} elem Element.\n     * @return {number} New length of the collection.\n     * @api\n     */\n    Collection.prototype.push = function (elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        var n = this.getLength();\n        this.insertAt(n, elem);\n        return this.getLength();\n    };\n    /**\n     * Remove the first occurrence of an element from the collection.\n     * @param {T} elem Element.\n     * @return {T|undefined} The removed element or undefined if none found.\n     * @api\n     */\n    Collection.prototype.remove = function (elem) {\n        var arr = this.array_;\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            if (arr[i] === elem) {\n                return this.removeAt(i);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Remove the element at the provided index and return it.\n     * Return `undefined` if the collection does not contain this index.\n     * @param {number} index Index.\n     * @return {T|undefined} Value.\n     * @api\n     */\n    Collection.prototype.removeAt = function (index) {\n        var prev = this.array_[index];\n        this.array_.splice(index, 1);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n        return prev;\n    };\n    /**\n     * Set the element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.setAt = function (index, elem) {\n        var n = this.getLength();\n        if (index < n) {\n            if (this.unique_) {\n                this.assertUnique_(elem, index);\n            }\n            var prev = this.array_[index];\n            this.array_[index] = elem;\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n        }\n        else {\n            for (var j = n; j < index; ++j) {\n                this.insertAt(j, undefined);\n            }\n            this.insertAt(index, elem);\n        }\n    };\n    /**\n     * @private\n     */\n    Collection.prototype.updateLength_ = function () {\n        this.set(Property.LENGTH, this.array_.length);\n    };\n    /**\n     * @private\n     * @param {T} elem Element.\n     * @param {number} [opt_except] Optional index to ignore.\n     */\n    Collection.prototype.assertUnique_ = function (elem, opt_except) {\n        for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n            if (this.array_[i] === elem && i !== opt_except) {\n                throw new AssertionError(58);\n            }\n        }\n    };\n    return Collection;\n}(BaseObject));\nexport default Collection;\n//# sourceMappingURL=Collection.js.map"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/components/viewer/MapViewer.vue?2e77","webpack:///./src/components/viewer/ScatterChart.vue?0b9f","webpack:///src/components/viewer/ScatterChart.vue","webpack:///./src/components/viewer/ScatterChart.vue?d194","webpack:///./src/components/viewer/ScatterChart.vue","webpack:///./src/components/maps/TextControl.vue?3964","webpack:///./src/components/maps/ProgressControl.vue?a849","webpack:///./src/components/maps/GeoJsonMixin.vue","webpack:///src/components/maps/GeoJsonMixin.vue","webpack:///./src/components/maps/GeoJsonMixin.vue?fa72","webpack:///./src/components/maps/TextControl.vue?2fcb","webpack:///src/components/maps/TextControl.vue","webpack:///./src/components/maps/TextControl.vue?f37d","webpack:///./src/components/maps/TextControl.vue","webpack:///./src/components/maps/ProgressControl.vue?29cc","webpack:///src/components/maps/ProgressControl.vue","webpack:///./src/components/maps/ProgressControl.vue?611d","webpack:///./src/components/maps/ProgressControl.vue","webpack:///src/components/maps/MapMixin.vue","webpack:///./src/components/maps/MapMixin.vue","webpack:///./src/components/maps/MapMixin.vue?c8ed","webpack:///./src/components/maps/ChannelControl.vue?bdda","webpack:///./src/components/maps/MapMixin.css?279d","webpack:///./src/components/viewer/MapViewer.vue?db21","webpack:///./src/components/maps/GeoTiffMixin.vue","webpack:///./src/components/maps/WebServiceMixin.vue","webpack:///./src/components/maps/ChannelControl.vue?5f6b","webpack:///src/components/maps/ChannelControl.vue","webpack:///./src/components/maps/ChannelControl.vue?7919","webpack:///./src/components/maps/ChannelControl.vue","webpack:///src/components/maps/GeoTiffMixin.vue","webpack:///./src/components/maps/GeoTiffMixin.vue?59a4","webpack:///src/components/maps/WebServiceMixin.vue","webpack:///./src/components/maps/WebServiceMixin.vue?0f9a","webpack:///src/components/viewer/MapViewer.vue","webpack:///./src/components/viewer/MapViewer.vue?1772","webpack:///./src/components/viewer/MapViewer.vue","webpack:///./src/components/maps/ControlMixin.vue","webpack:///src/components/maps/ControlMixin.vue","webpack:///./src/components/maps/ControlMixin.vue?116c","webpack:///./src/components/viewer/ScatterChart.vue?ba33","webpack:///./src/components/maps/ExtentMixin.vue","webpack:///src/components/maps/ExtentMixin.vue","webpack:///./src/components/maps/ExtentMixin.vue?5989"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","error","attrs","chartData","chartOptions","height","staticRenderFns","ChartJS","Title","Tooltip","Legend","LineElement","LinearScale","CategoryScale","TimeSeriesScale","PointElement","colors","name","components","Scatter","props","labels","type","default","datasets","options","responsive","maintainAspectRatio","computed","defaults","x","adapters","date","zone","component","mixins","EventBusMixin","methods","addGeoJson","source","title","hitTolerance","multi","condition","layers","layer","select","onSelect","createGeoJsonSource","features","featureProjection","wrapX","texts","length","class","pointer","on","toggle","current","_e","ControlMixin","data","i","text","String","Array","directives","rawName","value","expression","style","width","percent","label","loading","loaded","show","addLoading","addLoaded","update","idCounter","ProgressControl","editable","removableLayers","map","id","watch","showFullExtent","viewOpts","view","target","mapOptions","addLayerSwitcher","trash","addBasemaps","opaque","attributionsCollapsible","baseLayer","noSwitcherDelete","visible","baselayers","hasDefault","onShow","onHide","addLayerToMap","removeLayerFromMap","getLayerFromMap","getVisibleLayers","shownLayers","getFitOptions","fitOptions","trackTileProgress","fromLonLat","ref","textControlText","isGeoTiff","colorMap","bands","updateGeoTiffStyle","_b","chart","channels","isGray","_l","channel","key","modifiers","$event","$$selectedVal","prototype","filter","call","o","selected","val","_value","_n","$set","multiple","band","domProps","composing","$forceUpdate","cols","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","multiBand","immediate","handler","deep","isValid","updateChannels","emit","ChannelControl","TextControl","noData","getBandVar","getFormula","getNoDataFormula","interpolate","normalize","convertToRGB","sources","url","nodata","cacheSize","pointermove","click","formatCoords","setStyle","variables","color","WMTSCapabilities","timeline","Utils","getWMTSTimes","responseType","layerNames","matrixSet","defaultDate","minDate","maxDate","Object","layerCollection","className","graduation","window","run","TIME","btns","console","html","group","updateXYZLayer","GeoTIFFImage","Pane","ScatterChart","Splitpanes","isWebService","isGeoJson","mounted","projection","control","element","getControl","footprint","addRectangles","displayInLayerSwitcher","removeLayerFill"],"mappings":"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,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,gCCVA,GACfhB,YACA+I,iBACAC,oBAEArG,OACA,OACAqD,iCACArE,WACAN,YACA6E,cACA+C,UACA1C,YACAJ,WAGAhF,SACA+H,cACA,iCAEAC,cACA,sBACA,kBACA,qBACA,sCACA,yBAEAC,mBACA,+BAIA,+BAEA,gCACA,wBACA,8BACA,0BAEA,wBACAC,eACAC,aACAC,4BACAC,SACA,CACAC,eACAC,0BAKA,uBACAvF,cACA7C,QACAD,mBACAsI,iBAEA,yBACAC,gBACA,kCACA,yDACA,oBACA,kCACA,wCAEAC,UACA,kCACA,MAEA,YADA,iBAKA,GADAlH,2CACA,qCAEA,YADA,iBAIA,sCACA,mBAEA,IAAAY,QAAAZ,SAEA,YACAxC,+CACAG,eAIA,+BAEA,oBAUA,OATA,GACA,uDAKA,mCACA,gBAEA,aAEAwJ,gBACA,8DAEA1D,wBACA,UACA,eACA,gBACA,MAEA,iBAEA2D,WACA,eACA,OAIA,SACA,4BACA,uBACAC,iBACAA,iBACAA,iBAEAA,gCAGA,SACA,iBACAC,kBACAA,mBACAA,0BAEA,6BACA,YAEA,6BACAA,gBACA,yBACAA,UACAA,UACAA,UACA,sBACAA,qCAIAA,gBACAA,2BACAA,2BACAA,2BACA,sBACAA,gCAKA,qBAAAD,YAAAC,aCzKqW,IPOjW,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,gIQLA,GACftH,OACA,OACAuH,oBACAC,gBAGAhJ,SACA,uBACA,6BACA,UACA,8BACA,WACA,qCACA,QAEA,OADAiJ,oEACA,OAIAC,kBACA,6BACA,iCACA,oBACA,SAEA,iDACA,SAGA,eAFA,IAKA,uBACA,iCACA,IACA,qBACAZ,qCACAA,gDACA,oCAAAa,sBACA,iBACA,4CACA,aACAF,qDAGA,qCAGA,qCACA,uBAEA,8BACA,GACAA,qDAGA,IAMA,EANA,OACA,OACA,OACA,OACA,+BACA,aAEA,wBACAG,WAEA,kCACAA,+BAEA,gBACA,MACA,SAEA,wBACA5I,QACA6I,wBAEA,IACAC,+BAGA,6BACA,aACA,qBACA,4BACA,UACAC,OAEA,UACAC,KAGA,+BACAC,oDAEAvJ,gBACA,kBACAC,QACAD,iCACA2D,sBAEA6F,UAGA,SAOA,MANA,0BACAC,uBACAC,iBACAL,UACAC,YAGA,wCACA,6BAGA,GACAK,uBAEAC,yBACA,IACA,wCACA5J,oBACA6J,SAEA,6DACAC,iBACAA,iBACA,aACAC,mBAEAH,QACA,SAEA,mCAEA,yBACAH,gCACAxJ,oEACA+J,iBAEA,yBAGA,kBACAlH,QACA7C,QACAI,WAmBA,OAjBA4J,2BACA,uCAEA,qEAGA,sBAEA,eACA,qCACA,gBACA,sCACA,sBAKA,GAGAC,8BAEA,kHACA,+BACA,cACAjK,QACAD,0CACAoI,SAEAzE,sBAEA,cACAb,QACA7C,QACAI,QACAC,KAIA,OADA,sBACA,KC1MwW,IROpW,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,oESwBf6J,OAAaA,UAAUA,kBAAoBA,SAA/BA,GACZ,iFAMA,OAHA,6CACA5I,KAEA,kDAGA4I,OAAaA,UAAUA,mBAAqBA,SAAhCA,GACZ,gCACA,2BACA,UACA,OACA,QACA,mCACA,SACA,oCACA,SACA,oCAEA,MACA,OACA,QACA,kCACA,SACA,mCACA,SACA,mCAEA,MACA,OACA,UACA,QACA,qBACA,6BAEA,QACA,qCACA,QACA,qCACA,QACA,MAEA,MACA,QACA,MAEA,sDAGAA,OAAaA,UAAUA,gBAAkBA,SAA7BA,KACZ,mFAGA,wDACA,sEAHA,GAMAA,OAAaA,UAAUA,iBAAmBA,SAA9BA,KACZ,iFAGA,+DACA,yEAIe,OACfzL,iBACAkB,2BACAjB,YACAyL,YACAC,oBACAC,mBAEAzL,OACAyC,SAEAA,OACA,OACAa,WACA8C,aAGA5F,aACA,gCACAkL,eACA,4EAEA3F,YACA,oCAEA4F,YACA,0DAGAC,UACA,4BAEA3K,SACA,kBACA,IACA,MACA,EACA,kBACAwB,iDAEA,mBACAA,4CACA,wBACA,IACA4B,SAGA,sEAOA,sEANA,gDACA,+BAWA,SAHA,kBACA,wBAEA,eACA,mBACA,2BAEA,mBACA,0CACA,6DACA,mBAEA,6BACA,GACA,qBAEA,wBAEA,kEACA,mBACA,+BAGA,wCACA,0EACA,sEAEA,aACA6F,6BAGA,iBAGA,sBACA,qCAEA,IACA,8BACA,8EACA,cACA9I,eACA0D,oBACA3D,mBACAU,UACA,+BAEAgK,uBACA9J,aAIA,wBACAN,sBAEA,iDACA,aACAyJ,uBCjOkW,ICS9V,G,oBAAY,eACd,EACA/M,EACAe,GACA,EACA,KACA,KACA,OAIa,e,iDCpBXf,EAAQe,E,YCGG,GACfc,OACAgE,KACA9D,cAGAuC,OACA,OACAqJ,eAGAF,UACA,yBACAG,oBAGA7H,OACAF,OACA,GACA,oCAIA/C,SACA+K,aACA,uBC5BqW,I,YFOjWlL,EAAY,eACd,EACA3C,EACAe,GACA,EACA,KACA,KACA,MAIa,OAAA4B,E,2CGlBf,W,sCCAI3C,EAAQe,E,wECSG,GACf6B,gBACAE,SAIA,wBACA,WAGAgL,EAFA,mBACA,sBACAA,qDAEA,uCACAA,EAGAA,KAIAA,EAGA,6BACA,wBAEA,GACA,qCAIAC,sBACA,yCACA,YACA,+EACA,uBAEA,cACArK,WACAgK,aACA9J,WAEA,cACAX,uBACA+K,0BACAhL,WASA,OAPA,GACA,wBAEA,qBAGA,2DACA,GAGAiL,mBACA,mBAEA,wBACAlJ,UAEAA,mBCxEoW,I,YFOhWpC,EAAY,eACd,EACA3C,EACAe,GACA,EACA,KACA,KACA,MAIa,OAAA4B,E","file":"js/chunk-479daea2.9c908737.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapViewer.vue?vue&type=style&index=1&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart\"},[(_vm.error)?[_vm._v(_vm._s(_vm.error))]:_c('Scatter',{attrs:{\"chart-data\":_vm.chartData,\"chart-options\":_vm.chartOptions,\"height\":_vm.height}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"chart\">\n\t\t<template v-if=\"error\">{{ error }}</template>\n\t\t<Scatter v-else :chart-data=\"chartData\" :chart-options=\"chartOptions\" :height=\"height\" />\n\t</div>\n</template>\n\n<script>\nimport { Scatter } from 'vue-chartjs/legacy';\n\nimport {\n  Chart as ChartJS,\n  Title,\n  Tooltip,\n  Legend,\n  LineElement,\n  LinearScale,\n  CategoryScale,\n  TimeSeriesScale,\n  PointElement\n} from 'chart.js'\n\nimport 'chartjs-adapter-luxon';\nimport { DateTime } from 'luxon';\n\nChartJS.register(\n  Title,\n  Tooltip,\n  Legend,\n  LineElement,\n  LinearScale,\n  CategoryScale,\n  TimeSeriesScale,\n  PointElement\n);\n\nconst colors = [\n\t'#3366CC',\n\t'#DC3912',\n\t'#FF9900',\n\t'#109618',\n\t'#990099',\n\t'#3B3EAC',\n\t'#0099C6',\n\t'#DD4477',\n\t'#66AA00',\n\t'#B82E2E',\n\t'#316395',\n\t'#994499',\n\t'#22AA99',\n\t'#AAAA11',\n\t'#6633CC',\n\t'#E67300',\n\t'#8B0707',\n\t'#329262',\n\t'#5574A6',\n\t'#3B3EAC'\n];\n\nexport default {\n\tname: 'ScatterChart',\n\tcomponents: {\n\t\tScatter\n\t},\n\tprops: {\n\t\tlabels: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => ([])\n\t\t},\n\t\tdatasets: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => ([])\n\t\t},\n\t\toptions: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({\n        \t\tresponsive: true,\n\t\t\t\tmaintainAspectRatio: false\n\t\t\t})\n\t\t},\n\t\terror: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t},\n\t\theight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 350\n\t\t}\n\t},\n\tcomputed: {\n\t\tchartData() {\n\t\t\tlet nextColor = 0;\n\t\t\tlet datasets = this.datasets.map((dataset, i) => {\n\t\t\t\tlet defaults = {};\n\t\t\t\tif (typeof dataset.backgroundColor === 'undefined' &&  typeof dataset.borderColor === 'undefined') {\n\t\t\t\t\tlet color = colors[nextColor++ % colors.length];\n\t\t\t\t\tdefaults.backgroundColor = color;\n\t\t\t\t\tdefaults.color = color;\n\t\t\t\t}\n\t\t\t\tif (typeof dataset.borderWidth === 'undefined') {\n\t\t\t\t\tdefaults.borderWidth = 1;\n\t\t\t\t}\n\t\t\t\tif (typeof dataset.label === 'undefined') {\n\t\t\t\t\tdefaults.label = i+1;\n\t\t\t\t}\n\t\t\t\treturn Object.assign(defaults, dataset);\n\t\t\t});\n\t\t\treturn { labels: this.labels, datasets };\n\t\t},\n\t\tchartOptions() {\n\t\t\tlet options = Object.assign({}, this.options);\n\n\t\t\t// Detect timeseries from labels\n\t\t\tif (this.labels.find(label => !DateTime.fromISO(label).isValid) === undefined) {\n\t\t\t\toptions.scales = {\n\t\t\t\t\tx: {\n\t\t\t\t\t\ttype: 'timeseries',\n\t\t\t\t\t\tadapters: {\n\t\t\t\t\t\t\tdate: {\n\t\t\t\t\t\t\t\tzone: 'UTC'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\t// Check if labels are categorical\n\t\t\tif (this.labels.every(label => typeof label === 'string')) {\n\t\t\t\toptions.scales = {\n\t\t\t\t\tx: {\n\t\t\t\t\t\ttype: 'category'\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn options;\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.chart {\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 0.5em;\n\tmargin: auto;\n\tbox-sizing: border-box;\n\toverflow: auto;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScatterChart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScatterChart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ScatterChart.vue?vue&type=template&id=9dd24d7a&\"\nimport script from \"./ScatterChart.vue?vue&type=script&lang=js&\"\nexport * from \"./ScatterChart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ScatterChart.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextControl.vue?vue&type=style&index=0&id=fe2bcd86&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressControl.vue?vue&type=style&index=0&id=1da4d958&lang=scss&scoped=true&\"","var render, staticRenderFns\nimport script from \"./GeoJsonMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./GeoJsonMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport Utils from '../../utils.js';\nimport EventBusMixin from '../EventBusMixin.vue';\n\nimport { isEmpty as extentIsEmpty } from 'ol/extent';\nimport { singleClick } from 'ol/events/condition';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport Select from 'ol/interaction/Select';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\n\n// Requires the MapMixin to be included, too.\nexport default {\n\tmixins: [\n\t\tEventBusMixin\n\t],\n\tmethods: {\n\t\taddGeoJson(geojson, selectable = false, title = \"GeoJSON\", fill = true) {\n\t\t\tlet source;\n\t\t\tif (geojson instanceof VectorSource) {\n\t\t\t\tsource = geojson;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsource = this.createGeoJsonSource(geojson, this.map.getView().getProjection());\n\t\t\t}\n\n\t\t\tlet layer = new VectorLayer({title, source});\n\t\t\tif(!fill && this.removeLayerFill) {\n\t\t\t\tthis.removeLayerFill(layer);\n\t\t\t}\n\t\t\tthis.map.addLayer(layer);\n\t\t\tlet extent = source.getExtent();\n\t\t\tif (!extentIsEmpty(extent)) {\n\t\t\t\tthis.map.getView().fit(extent, this.getFitOptions());\n\t\t\t}\n\n\t\t\tif (selectable) {\n\t\t\t\tvar select = new Select({\n\t\t\t\t\thitTolerance: 5,\n\t\t\t\t\tmulti: false,\n\t\t\t\t\tcondition: singleClick,\n\t\t\t\t\tlayers: [\n\t\t\t\t\t\tlayer\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tselect.on('select', this.onSelect);\n\t\t\t\tthis.map.addInteraction(select);\n\t\t\t}\n\n\t\t\treturn layer;\n\t\t},\n\t\tonSelect(event) {\n\t\t\tif (event.selected.length > 0) {\n\t\t\t\tlet feature = event.selected[0];\n\t\t\t\tlet props = Utils.omitFromObject(feature.getProperties(), ['geometry']);\n\t\t\t\tlet title = feature.getId() || \"Feature Properties\";\n\t\t\t\tthis.emit('showDataModal', props, title);\n\t\t\t}\n\t\t},\n\t\tcreateGeoJsonSource(geojson, projection) {\n\t\t\tlet features = [];\n\t\t\tif (Utils.detectGeoJson(geojson)) {\n\t\t\t\tfeatures = (new GeoJSON()).readFeatures(geojson, { featureProjection: projection })\n\t\t\t}\n\t\t\treturn new VectorSource({\n\t\t\t\tfeatures,\n\t\t\t\twrapX: false\n\t\t\t});\n\t\t}\n\t}\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeoJsonMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeoJsonMixin.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.texts.length > 0)?_c('div',{staticClass:\"ol-unselectable ol-control value\",class:{pointer: _vm.texts.length > 1},on:{\"click\":_vm.toggle}},[_vm._v(\" \"+_vm._s(_vm.current)+\" \")]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"texts.length > 0\" class=\"ol-unselectable ol-control value\" @click=\"toggle\" :class=\"{pointer: texts.length > 1}\">\n\t\t{{ current }}\n\t</div>\n</template>\n\n<script>\nimport ControlMixin from './ControlMixin.vue';\n\nexport default {\n\tname: 'TextControl',\n\tmixins: [\n\t\tControlMixin\n\t],\n\tdata() {\n\t\treturn {\n\t\t\ti: 0\n\t\t};\t\n\t},\n\tcomputed: {\n\t\ttexts() {\n\t\t\tif (Array.isArray(this.text)) {\n\t\t\t\treturn this.text;\n\t\t\t}\n\t\t\telse if (typeof this.text === 'string' && this.text.length > 0) {\n\t\t\t\treturn [this.text];\n\t\t\t}\n\t\t\treturn [];\n\t\t},\n\t\tcurrent() {\n\t\t\tif (this.texts.length === 0) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.texts[this.i % this.text.length];\n\t\t\t}\n\t\t}\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttext: [\n\t\t\t\tString,\n\t\t\t\tArray\n\t\t\t],\n\t\t\tdefault: ''\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggle() {\n\t\t\tthis.i++;\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.pointer {\n\tcursor: pointer;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextControl.vue?vue&type=template&id=fe2bcd86&scoped=true&\"\nimport script from \"./TextControl.vue?vue&type=script&lang=js&\"\nexport * from \"./TextControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextControl.vue?vue&type=style&index=0&id=fe2bcd86&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fe2bcd86\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],staticClass:\"ol-unselectable ol-progress-control\"},[_c('div',{staticClass:\"progress-bar\"},[_c('div',{staticClass:\"progress-bar-inner\",style:({width: _vm.percent})})]),_c('div',{staticClass:\"progress-label\"},[_vm._v(_vm._s(_vm.label))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-show=\"show\" class=\"ol-unselectable ol-progress-control\">\n\t\t<div class=\"progress-bar\">\n\t\t\t<div class=\"progress-bar-inner\" :style=\"{width: percent}\" />\n\t\t</div>\n\t\t<div class=\"progress-label\">{{ label }}</div>\n\t</div>\n</template>\n\n<script>\nimport ControlMixin from './ControlMixin.vue';\n\nexport default {\n\tname: 'ProgressControl',\n\tmixins: [\n\t\tControlMixin\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tloading: 0,\n\t\t\tloaded: 0\n\t\t};\n\t},\n\tcomputed: {\n\t\tshow() {\n\t\t\treturn (this.loading > 0 && this.loaded <= this.loading);\n\t\t},\n\t\tpercent() {\n\t\t\treturn (this.loaded / this.loading * 100).toFixed(1) + '%';\n\t\t},\n\t\tlabel() {\n\t\t\treturn \"Loading Tiles (\" + this.percent + \")\";\n\t\t}\n\t},\n\tmethods: {\n\t\taddLoading() {\n\t\t\tthis.loading++;\n\t\t\tthis.update();\n\t\t},\n\t\taddLoaded() {\n\t\t\tthis.loaded++;\n\t\t\tthis.update();\n\t\t},\n\t\tupdate() {\n\t\t\tif (this.loading === this.loaded) {\n\t\t\t\tthis.loading = 0;\n\t\t\t\tthis.loaded = 0;\n\t\t\t}\n\n\t\t\tif (this.loading === this.loaded) {\n\t\t\t\tthis.loading = 0;\n\t\t\t\tthis.loaded = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.ol-progress-control {\n\topacity: 1;\n\ttransition: opacity 0.4s;\n\tbottom: calc(22px + 1em);\n    left: 8px;\n\tposition: absolute;\n\tbackground-color: rgba(0,60,136,.5);\n\tborder-radius: 4px;\n\tpadding: 2px;\n\twidth: 150px;\n\ttext-align: center;\n}\n.ol-progress-control .progress-label {\n\tfont-size: 10px;\n\tcolor: #fff;\n\tmargin-top: 2px;\n}\n.ol-progress-control .progress-bar {\n\tborder-radius: 4px;\n\tborder: 1px solid #fff;\n\theight: 10px;\n}\n.ol-progress-control .progress-bar-inner {\n\tbackground-color: #fff;\n\theight: 10px;\n\twidth: 0;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProgressControl.vue?vue&type=template&id=1da4d958&scoped=true&\"\nimport script from \"./ProgressControl.vue?vue&type=script&lang=js&\"\nexport * from \"./ProgressControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProgressControl.vue?vue&type=style&index=0&id=1da4d958&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1da4d958\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport EventBusMixin from '../EventBusMixin.vue';\nimport Utils from '../../utils.js';\n\nimport 'ol/ol.css';\nimport { defaults as defaultControls, FullScreen, ScaleLine } from 'ol/control';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport { fromLonLat } from 'ol/proj';\nimport Projection from 'ol/proj/Projection';\nimport ProjManager from './projManager';\nimport TileLayer from 'ol/layer/Tile';\nimport XYZ from 'ol/source/XYZ';\n\nimport 'ol-ext/control/LayerSwitcher.css';\nimport LayerSwitcher from 'ol-ext/control/LayerSwitcher';\n\nimport ProgressControl from './ProgressControl.vue';\n\nlet idCounter = 1;\n\nexport default {\n\tcomponents: {\n\t\tProgressControl\n\t},\n\tmixins: [EventBusMixin],\n\tprops: {\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tremovableLayers: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmap: null,\n\t\t\tid: `map_` + idCounter++\n\t\t};\n\t},\n\twatch: {\n\t\tasync show() {\n\t\t\tawait this.showMap();\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['userLocation', 'locationZoom']),\n\t},\n\tasync mounted() {\n\t\tawait this.showMap();\n\t},\n\tmethods: {\n\t\tasync showMap() {\n\t\t\tif (this.show) {\n\t\t\t\tawait this.$nextTick();\n\t\t\t\tawait this.renderMap();\n\t\t\t}\n\t\t},\n\t\tasync createMap(opts = 'EPSG:3857') {\n\t\t\tlet view;\n\t\t\tlet viewOpts = {\n\t\t\t\tshowFullExtent: true\n\t\t\t};\n\t\t\tif (typeof opts === 'string') { // A projection code\n\t\t\t\tviewOpts.projection = await ProjManager.get(opts);\n\t\t\t}\n\t\t\telse if (opts instanceof Projection) {\n\t\t\t\tviewOpts.projection = opts;\n\t\t\t}\n\t\t\telse if (opts instanceof View) {\n\t\t\t\tview = opts;\n\t\t\t}\n\t\t\telse if (Utils.isObject(opts)) {\n\t\t\t\tviewOpts = opts;\n\t\t\t}\n\n\t\t\tif (!view) {\n\t\t\t\tview = new View(viewOpts);\n\t\t\t\tif (!view.getCenter()) {\n\t\t\t\t\tview.setCenter(fromLonLat([this.userLocation[1], this.userLocation[0]], view.getProjection()));\n\t\t\t\t}\n\t\t\t\tif (!view.getZoom()) {\n\t\t\t\t\tview.setZoom(this.locationZoom);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.map !== null) {\n\t\t\t\tthis.map.updateSize();\n\t\t\t\tthis.map.render();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar customControls = [\n\t\t\t\tnew FullScreen(),\n\t\t\t\tnew ScaleLine()\n\t\t\t];\n\t\t\tvar mapOptions = {\n\t\t\t\ttarget: this.id,\n\t\t\t\tview\n\t\t\t};\n\t\t\tif (!this.editable) {\n\t\t\t\tmapOptions.interactions = [];\n\t\t\t\tmapOptions.controls = customControls;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmapOptions.controls = defaultControls().extend(customControls);\n\t\t\t}\n\t\t\tthis.map = new Map(mapOptions);\n\n\t\t\tthis.listen('windowResized', this.updateMapSize);\n\t\t\t\n\t\t\tlet layers = this.map.getLayers();\n\t\t\tlayers.on('add', evt => {\n\t\t\t\tlet layer = evt.element;\n\n\t\t\t\tlet events = layer.get('events');\n\t\t\t\tfor(let event in events) {\n\t\t\t\t\tthis.map.on(event, events[event]);\n\t\t\t\t}\n\t\t\t});\n\t\t\tlayers.on('remove', evt => {\n\t\t\t\tlet layer = evt.element;\n\n\t\t\t\tlet events = layer.get('events');\n\t\t\t\tfor(let event in events) {\n\t\t\t\t\tthis.map.un(event, events[event]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\taddLayerSwitcher() {\n\t\t\tthis.map.addControl(new LayerSwitcher({trash: this.removableLayers}));\n\t\t},\n\n\t\taddBasemaps() {\n\t\t\tlet basemapOptions = {\n\t\t\t\topaque: true,\n\t\t\t\tattributionsCollapsible: false,\n\t\t\t\twrapX: false\n\t\t\t};\n\t\t\tlet baselayers = [];\n\t\t\tif (Array.isArray(this.$config.basemaps)) {\n\t\t\t\tlet hasDefault = false;\n\t\t\t\tfor(let opts of this.$config.basemaps) {\n\t\t\t\t\tlet basemap = new XYZ(Object.assign({}, basemapOptions, opts));\n\t\t\t\t\tlet baselayer = new TileLayer({\n\t\t\t\t\t\tsource: this.trackTileProgress(basemap),\n\t\t\t\t\t\tbaseLayer: true,\n\t\t\t\t\t\ttitle: opts.title,\n\t\t\t\t\t\tnoSwitcherDelete: true,\n\t\t\t\t\t\tvisible: !hasDefault\n\t\t\t\t\t});\n\t\t\t\t\tbaselayers.push(baselayer);\n\t\t\t\t\tthis.map.addLayer(baselayer);\n\t\t\t\t\thasDefault = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn baselayers;\n\t\t},\n\n\t\tonShow() {\n\t\t\tthis.listen('windowResized', this.updateMapSize);\n\t\t},\n\t\tonHide() {\n\t\t\tthis.unlisten('windowResized');\n\t\t},\n\n\t\t// To be overridden by implementing components.\n\t\tasync renderMap() {\n\t\t\tawait this.createMap();\n\t\t\tthis.addBasemaps();\n\t\t},\n\n\t\tasync updateMapSize() {\n\t\t\tif (this.map) {\n\t\t\t\tawait this.$nextTick();\n\t\t\t\tthis.map.updateSize();\n\t\t\t}\n\t\t},\n\n\t\taddLayerToMap(layer) {\n\t\t\tlayer.set('userLayer', true);\n\t\t\tthis.map.addLayer(layer);\n\t\t},\n\t\tremoveLayerFromMap(id) {\n\t\t\tlet layer = this.getLayerFromMap(id);\n\t\t\tif (layer) {\n\t\t\t\tthis.map.removeLayer(layer);\n\t\t\t}\n\t\t},\n\t\tgetLayerFromMap(id) {\n\t\t\tlet layers = this.map.getLayers().getArray();\n\t\t\tfor(let layer of layers) {\n\t\t\t\tif (layer.get('id') === id) {\n\t\t\t\t\treturn layer;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetVisibleLayers() {\n\t\t\tlet shownLayers = [];\n\t\t\tlet layers = this.map.getLayers().getArray();\n\t\t\tfor(let layer of layers) {\n\t\t\t\tif (layer.get('userLayer') && layer.getVisible()) {\n\t\t\t\t\tshownLayers.push(layer);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn shownLayers;\n\t\t},\n\n\t\tgetFitOptions(paddingPc = 25) {\n\t\t\tlet fitOptions = {};\n\t\t\t// Make a bigger extent visible so that user can get a better overview\n\t\t\tvar size = this.map.getSize();\n\t\t\tif (size && paddingPc > 0) {\n\t\t\t\tfitOptions.padding = [size[0]*paddingPc/100, size[1]*paddingPc/100, size[0]*paddingPc/100, size[1]*paddingPc/100];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfitOptions.padding = [30,30,30,30];\n\t\t\t}\n\t\t\treturn fitOptions;\n\t\t},\n\n\t\ttrackTileProgress(source) {\n\t\t\tif (this.$refs.progress) {\n\t\t\t\tsource.on('tileloadstart', () => {\n\t\t\t\t\tthis.$refs.progress.addLoading();\n\t\t\t\t});\n\t\t\t\tsource.on('tileloadend', () => {\n\t\t\t\t\tthis.$refs.progress.addLoaded();\n\t\t\t\t});\n\t\t\t\tsource.on('tileloaderror', () => {\n\t\t\t\t\tthis.$refs.progress.addLoaded();\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn source;\n\t\t},\n\n\t\tfromLonLat(coords) {\n\t\t\treturn fromLonLat(coords, this.map.getView().getProjection());\n\t\t}\n\t}\n}\n</script>","var render, staticRenderFns\nimport script from \"./MapMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./MapMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapMixin.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChannelControl.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!./MapMixin.css?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Splitpanes',{staticClass:\"default-theme\",attrs:{\"horizontal\":\"\"}},[_c('Pane',{attrs:{\"id\":\"map\"}},[_c('div',{staticClass:\"map-viewer\",attrs:{\"id\":_vm.id}},[_c('ProgressControl',{ref:\"progress\",attrs:{\"map\":_vm.map}}),(_vm.isGeoTiff)?_c('TextControl',{attrs:{\"text\":_vm.textControlText}}):_vm._e(),(_vm.isGeoTiff && !_vm.colorMap)?_c('ChannelControl',{attrs:{\"bands\":_vm.bands},on:{\"update\":_vm.updateGeoTiffStyle}}):_vm._e(),(_vm.loading)?_c('div',{staticClass:\"map-loading\"},[_c('i',{staticClass:\"fas fa-spinner fa-spin\"}),_c('span',[_vm._v(\"Loading map...\")])]):_vm._e()],1)]),(_vm.chart)?_c('Pane',{attrs:{\"id\":\"chart\",\"size\":33}},[_c('ScatterChart',_vm._b({attrs:{\"height\":220}},'ScatterChart',_vm.chart,false))],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render, staticRenderFns\nimport script from \"./GeoTiffMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./GeoTiffMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./WebServiceMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./WebServiceMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.channels.length > 0),expression:\"channels.length > 0\"}],staticClass:\"ol-unselectable ol-control channels\"},[_c('table',[_c('thead',[_c('tr',[(!_vm.isGray)?_c('th',[_vm._v(\"Channel\")]):_vm._e(),(_vm.multiBand)?_c('th',[_vm._v(\"Band\")]):_vm._e(),_c('th',[_vm._v(\"Min\")]),_c('th',[_vm._v(\"Max\")])])]),_c('tbody',_vm._l((_vm.channels),function(channel,i){return _c('tr',{key:i},[(!_vm.isGray)?_c('th',[_vm._v(_vm._s(_vm.labels[i]))]):_vm._e(),(_vm.multiBand)?_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(channel.id),expression:\"channel.id\",modifiers:{\"number\":true}}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.$set(channel, \"id\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.bands),function(band){return _c('option',{key:band.id,domProps:{\"value\":band.id}},[_vm._v(_vm._s(band.name || band.id))])}),0)]):_vm._e(),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(channel.min),expression:\"channel.min\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"required\":\"\"},domProps:{\"value\":(channel.min)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(channel, \"min\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(channel.max),expression:\"channel.max\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"required\":\"\"},domProps:{\"value\":(channel.max)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(channel, \"max\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})])])}),0),(_vm.multiBand)?_c('tfoot',[_c('tr',[_c('td',{attrs:{\"colspan\":_vm.cols}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.isGray),expression:\"isGray\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.isGray)?_vm._i(_vm.isGray,null)>-1:(_vm.isGray)},on:{\"change\":function($event){var $$a=_vm.isGray,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.isGray=$$a.concat([$$v]))}else{$$i>-1&&(_vm.isGray=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.isGray=$$c}}}}),_vm._v(\" Grayscale \")])])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-show=\"channels.length > 0\" class=\"ol-unselectable ol-control channels\">\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th v-if=\"!isGray\">Channel</th>\n\t\t\t\t\t<th v-if=\"multiBand\">Band</th>\n\t\t\t\t\t<th>Min</th>\n\t\t\t\t\t<th>Max</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr v-for=\"(channel, i) in channels\" :key=\"i\">\n\t\t\t\t\t<th v-if=\"!isGray\">{{ labels[i] }}</th>\n\t\t\t\t\t<td v-if=\"multiBand\">\n\t\t\t\t\t\t<select v-model.number=\"channel.id\">\n\t\t\t\t\t\t\t<option v-for=\"band in bands\" :key=\"band.id\" :value=\"band.id\">{{ band.name || band.id }}</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td><input type=\"number\" v-model.number=\"channel.min\" required /></td>\n\t\t\t\t\t<td><input type=\"number\" v-model.number=\"channel.max\" required /></td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t\t<tfoot v-if=\"multiBand\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td :colspan=\"cols\">\n\t\t\t\t\t\t<input type=\"checkbox\" v-model=\"isGray\" /> Grayscale\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tfoot>\n\t\t</table>\n\t</div>\n</template>\n\n<script>\nimport ControlMixin from './ControlMixin.vue';\n\nexport default {\n\tname: 'ChannelControl',\n\tmixins: [\n\t\tControlMixin\n\t],\n\tprops: {\n\t\tbands: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t}\n\t},\n\tcomputed: {\n\t\tmultiBand() {\n\t\t\treturn this.bands.length > 1;\n\t\t},\n\t\tcols() {\n\t\t\tif (this.isGray) {\n\t\t\t\treturn this.multiBand ? 3 : 2;\n\t\t\t}\n\t\t\treturn 4;\n\t\t},\n\t\tlabels() {\n\t\t\treturn this.isGray ? ['Grayscale'] : ['Red', 'Green', 'Blue'];\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tchannels: [],\n\t\t\tisGray: this.bands.length === 1\n\t\t}\n\t},\n\twatch: {\n\t\tbands: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tif (this.bands.length === 1) {\n\t\t\t\t\tthis.isGray = true;\n\t\t\t\t}\n\t\t\t\tthis.updateChannels();\n\t\t\t}\n\t\t},\n\t\tisGray() {\n\t\t\tthis.updateChannels();\n\t\t\tthis.emit();\n\t\t},\n\t\tchannels: {\n\t\t\tdeep: true,\n\t\t\thandler() {\n\t\t\t\tthis.emit();\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tisValid(value) {\n\t\t\treturn (typeof value === 'number');\n\t\t},\n\t\tupdateChannels() {\n\t\t\tthis.channels = this.bands\n\t\t\t\t.slice(0, this.isGray ? 1 : 3)\n\t\t\t\t.map(band => Object.assign({}, band));\n\t\t\t// If only two channels are available, add a third one so that we have enough for RGB\n\t\t\t// If we only have one channel it is grayscale\n\t\t\tif (this.channels.length === 2) {\n\t\t\t\tthis.channels.push(Object.assign({}, this.channels[1]));\n\t\t\t}\n\t\t},\n\t\temit() {\n\t\t\tif (this.channels.filter(c => this.isValid(c.min) && this.isValid(c.max)).length > 0) {\n\t\t\t\tthis.$emit('update', 'channels', this.channels);\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.ol-control.channels {\n\tbottom: calc(22px + 1em);\n    right: 8px;\n\tposition: absolute;\n\n\tinput {\n\t\tmax-width: 4em;\n\t}\n\tselect {\n\t\tmax-width: 10em;\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChannelControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChannelControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChannelControl.vue?vue&type=template&id=18ba9d03&\"\nimport script from \"./ChannelControl.vue?vue&type=script&lang=js&\"\nexport * from \"./ChannelControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChannelControl.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport Utils from '../../utils.js';\n\nimport TextControl from './TextControl.vue';\nimport ChannelControl from './ChannelControl.vue';\n\nimport TileLayer from 'ol/layer/WebGLTile';\nimport GeoTIFF from 'ol/source/GeoTIFF';\n\nexport default {\n\tcomponents: {\n\t\tChannelControl,\n\t\tTextControl\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttextControlText: 'Pixel Value: -',\n\t\t\tlayer: null,\n\t\t\tsource: null,\n\t\t\tcolorMap: null,\n\t\t\tnoData: [],\n\t\t\tchannels: [],\n\t\t\tbands: []\n\t\t}\n\t},\n\tmethods: {\n\t\tgetBandVar(i) {\n\t\t\treturn ['band', ['var', `${i}band`]];\n\t\t},\n\t\tgetFormula(i) {\n\t\t\tlet min = ['var', `${i}min`];\n\t\t\tlet max = ['var', `${i}max`];\n\t\t\tlet x = this.getBandVar(i);\n\t\t\tlet scale = ['*', ['/', ['-', x, min], ['-', max, min]], 255]; // Linear scaling from min - max to 0 - 255\n\t\t\treturn ['clamp', scale, 0, 255]; // clamp values in case we get cales < 0 or > 255\n\t\t},\n\t\tgetNoDataFormula() {\n\t\t\tlet band = this.getBandVar('alpha');\n\t\t\t// https://github.com/openlayers/openlayers/issues/13588#issuecomment-1125317573\n\t\t\t// return ['clamp', band, 0, 1];\n\t\t\t// return ['/', band, 255];\n\t\t\treturn ['case', ['==', band, 0], 0, 1];\n\t\t},\n\t\tasync addGeoTiff(geotiff, title = \"GeoTiff\") {\n\t\t\tthis.bands = geotiff.getBands();\n\t\t\tthis.colorMap = geotiff.getColorMap();\n\t\t\tthis.noData = geotiff.getNoData();\n\n\t\t\tthis.source = new GeoTIFF({\n\t\t\t\tinterpolate: false,\n\t\t\t\tnormalize: false,\n\t\t\t\tconvertToRGB: geotiff.convertToRGB,\n\t\t\t\tsources: [\n\t\t\t\t\t{\n\t\t\t\t\t\turl: geotiff.getUrl(),\n\t\t\t\t\t\tnodata: this.noData[0] // OL only supports passing one no data value\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tthis.layer = new TileLayer({\n\t\t\t\tid: geotiff.getUrl(),\n\t\t\t\ttitle,\n\t\t\t\tsource: this.source,\n\t\t\t\tcacheSize: 2048 // https://github.com/openlayers/openlayers/issues/13670\n\t\t\t});\n\t\t\tthis.layer.set('events', {\n\t\t\t\tpointermove: evt => {\n\t\t\t\t\tlet pixelData = this.layer.getData(evt.pixel);\n\t\t\t\t\tlet value = Utils.displayRGBA(pixelData, this.noData, this.noData.length > 0);\n\t\t\t\t\tlet valueText = `Pixel Value: ${value}`;\n\t\t\t\t\tlet coords = this.formatCoords(evt.coordinate);\n\t\t\t\t\tthis.textControlText = [valueText, `${valueText} @ ${coords}`];\n\t\t\t\t},\n\t\t\t\tclick: evt => {\n\t\t\t\t\tlet data = this.layer.getData(evt.pixel);\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\tthis.chart = null;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdata = Array.from(data).slice(0, this.bands.length);\n\t\t\t\t\tif (data.length < 2 || data.every(x => !isFinite(x))) {\n\t\t\t\t\t\tthis.chart = null;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet coords = this.formatCoords(evt.coordinate);\n\t\t\t\t\tlet label = `Coordinate: ${coords}`;\n\n\t\t\t\t\tlet datasets = [{ label, data }];\n\n\t\t\t\t\tthis.chart = {\n\t\t\t\t\t\tlabels: this.bands.map(band => String(band.name || band.id)),\n\t\t\t\t\t\tdatasets\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.addLayerToMap(this.layer);\n\n\t\t\tlet extent = geotiff.getExtent();\n\t\t\tif (extent) {\n\t\t\t\tthis.map.getView().fit(extent, this.getFitOptions(10));\n\t\t\t}\n\n\t\t\t// Hack to get the initial style set.\n\t\t\t// Not sure yet why this needs a delay -> TODO\n\t\t\tawait new Promise(r => setTimeout(r, 1250));\n\t\t\tthis.setStyle();\n\n\t\t\treturn this.source;\n\t\t},\n\t\tformatCoords(coords) {\n\t\t\treturn coords.map(x => String(parseFloat(x.toFixed(6)))).join(', ');\n\t\t},\n\t\tupdateGeoTiffStyle(type, data) {\n\t\t\tswitch(type) {\n\t\t\t\tcase 'channels':\n\t\t\t\t\tthis.channels = data;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.setStyle();\n\t\t},\n\t\tsetStyle() {\n\t\t\tif (!this.layer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Compute variables\n\t\t\tlet variables = {};\n\t\t\tfor(let i in this.channels) {\n\t\t\t\tlet channel = this.channels[i];\n\t\t\t\tvariables[`${i}band`] = channel.id;\n\t\t\t\tvariables[`${i}min`] = channel.min;\n\t\t\t\tvariables[`${i}max`] = channel.max;\n\t\t\t}\n\t\t\tvariables.alphaband = this.bands.length + 1;\n\n\t\t\t// Create style\n\t\t\tlet color = [];\n\t\t\tif (this.colorMap) {\n\t\t\t\tcolor.push('palette');\n\t\t\t\tcolor.push(['band', 1]);\n\t\t\t\tcolor.push(this.colorMap);\n\t\t\t}\n\t\t\telse if (this.channels.length === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (this.channels.length === 1) {\n\t\t\t\tcolor.push('color');\n\t\t\t\tlet formula = this.getFormula(0);\n\t\t\t\tcolor.push(formula);\n\t\t\t\tcolor.push(formula);\n\t\t\t\tcolor.push(formula);\n\t\t\t\tif (this.noData.length > 0) {\n\t\t\t\t\tcolor.push(this.getNoDataFormula());\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor.push('color');\n\t\t\t\tcolor.push(this.getFormula(0));\n\t\t\t\tcolor.push(this.getFormula(1));\n\t\t\t\tcolor.push(this.getFormula(2));\n\t\t\t\tif (this.noData.length > 0) {\n\t\t\t\t\tcolor.push(this.getNoDataFormula());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set style\n\t\t\tthis.layer.setStyle({variables, color});\n\t\t}\n\t}\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeoTiffMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeoTiffMixin.vue?vue&type=script&lang=js&\"","<script>\nimport Utils from '../../utils.js';\n\nimport Collection from 'ol/Collection';\nimport LayerGroup from 'ol/layer/Group';\nimport TileLayer from 'ol/layer/Tile';\nimport XYZ from 'ol/source/XYZ';\nimport WMTSCapabilities from 'ol/format/WMTSCapabilities';\nimport WMTS, {optionsFromCapabilities} from 'ol/source/WMTS';\n\nimport 'ol-ext/control/Timeline.css';\nimport Timeline from 'ol-ext/control/Timeline';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tWMTSCapabilities: {},\n\t\t\ttimeline: null,\n\t\t}\n\t},\n\tmethods: {\n\t\tasync addWebService(service) {\n\t\t\tswitch(service.type.toLowerCase()) {\n\t\t\t\tcase 'xyz':\n\t\t\t\t\treturn this.updateXYZLayer(service);\n\t\t\t\tcase 'wmts':\n\t\t\t\t\treturn await this.updateWMTSLayer(service);\n\t\t\t\tdefault:\n\t\t\t\t\tUtils.error(this, 'Sorry, this web service type is not supported.');\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\n\t\tgetWMTSTimes(capabilities, layerId) {\n\t\t\tconst layers = capabilities.Contents.Layer || [];\n\t\t\tlet layer = layers.find(l => l.Identifier == layerId);\n\t\t\tif (!layer || !layer.Dimension) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tlet timeDimension = layer.Dimension.find(d => d.Identifier === 'TIME');\n\t\t\tif (!timeDimension) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn timeDimension.Value.sort();\n\t\t},\n\n\t\tasync initWMTSLayer(service) {\n\t\t\tif (!this.WMTSCapabilities[service.url]) {\n\t\t\t\ttry {\n\t\t\t\t\tlet url = new URL(service.url);\n\t\t\t\t\turl.searchParams.set('service', 'wmts');\n\t\t\t\t\turl.searchParams.set('request', 'GetCapabilities');\n\t\t\t\t\tlet response = await axios.get(url.toString(), { responseType: 'text' });\n\t\t\t\t\tvar parser = new WMTSCapabilities();\n\t\t\t\t\tthis.WMTSCapabilities[service.url] = parser.read(response.data);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tUtils.exception(this, error, \"WMTS Discovery failed\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.WMTSCapabilities[service.url];\n\t\t},\n\n\t\tasync updateWMTSLayer(service, prefix = \"Service\") {\n\t\t\tlet attrs = service.attributes || {};\n\n\t\t\tlet capabilities = await this.initWMTSLayer(service);\n\t\t\tif (!capabilities) {\n\t\t\t\tUtils.exception(this, error, \"WMTS Discovery failed\");\n\t\t\t}\n\n\t\t\tlet minDate = null;\n\t\t\tlet maxDate = null;\n\t\t\tlet defaultDate = null;\n\t\t\tlet source = null;\n\t\t\tlet title = Utils.getResourceTitle(service, prefix);\n\t\t\tlet layerCollection = new Collection();\n\t\t\tlet layerNames;\n\t\t\tif (Array.isArray(attrs.layers)) {\n\t\t\t\tlayerNames = attrs.layers;\n\t\t\t}\n\t\t\telse if (Array.isArray(capabilities.Contents.Layer)) {\n\t\t\t\tlayerNames = layers.map(l => l.Identifier);\n\t\t\t}\n\t\t\tfor(let layer of layerNames) {\n\t\t\t\tif (!layer) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet options = optionsFromCapabilities(capabilities, {\n\t\t\t\t\tlayer,\n\t\t\t\t\tmatrixSet: 'EPSG:3857'\n\t\t\t\t});\n\t\t\t\tif (!defaultDate) {\n\t\t\t\t\tdefaultDate = new Date(options.dimensions.TIME);\n\t\t\t\t}\n\n\t\t\t\tlet times = this.getWMTSTimes(capabilities, layer);\n\t\t\t\tif (times.length) {\n\t\t\t\t\tlet min = new Date(times[0]);\n\t\t\t\t\tlet max = new Date(times[times.length -1]);\n\t\t\t\t\tif (!minDate || min < minDate) {\n\t\t\t\t\t\tminDate = min;\n\t\t\t\t\t}\n\t\t\t\t\tif (!maxDate || max > maxDate) {\n\t\t\t\t\t\tmaxDate = max;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Utils.isObject(attrs.dimensions)) {\n\t\t\t\t\tObject.assign(options.dimensions, service.attributes.dimensions);\n\t\t\t\t}\n\t\t\t\tsource = new WMTS(options);\n\t\t\t\tvar mapLayer = new TileLayer({\n\t\t\t\t\ttitle,\n\t\t\t\t\tsource: this.trackTileProgress(source),\n\t\t\t\t\tnoSwitcherDelete: true\n\t\t\t\t});\n\t\t\t\tlayerCollection.push(mapLayer);\n\t\t\t}\n\n\t\t\tif (minDate && maxDate) {\n\t\t\t\tthis.timeline = new Timeline({\n\t\t\t\t\tclassName: 'ol-pointer',\n\t\t\t\t\tgraduation: 'day',\n\t\t\t\t\tminDate: minDate,\n\t\t\t\t\tmaxDate: maxDate\n\t\t\t\t});\n\t\t\t\tlet run;\n\t\t\t\tthis.timeline.on('scroll', function(e) {\n\t\t\t\t\tif (!e.date || e.date > maxDate || e.date < minDate) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (run) {\n\t\t\t\t\t\twindow.clearTimeout(run);\n\t\t\t\t\t}\n\t\t\t\t\trun = window.setTimeout(() => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet date = e.date.toISOString().substr(0, 10);\n\t\t\t\t\t\t\tsource.updateDimensions({\n\t\t\t\t\t\t\t\tTIME: date\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet btns = document.getElementsByClassName('timeline-date-label');\n\t\t\t\t\t\t\tbtns[0].innerText = date;\n\t\t\t\t\t\t\tbtns[0].disabled = true;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trun = null;\n\t\t\t\t\t}, 500);\n\t\t\t\t});\n\t\t\t\tthis.map.addControl(this.timeline);\n\n\t\t\t\tthis.timeline.addButton({\n\t\t\t\t\tclassName: 'timeline-date-label',\n\t\t\t\t\ttitle: `The date that is shown on the map for the collection '${title}'`,\n\t\t\t\t\thtml: 'No date'\n\t\t\t\t});\n\t\t\t\tthis.timeline.setDate(defaultDate);\n\t\t\t}\n\n\t\t\tlet group = new LayerGroup({\n\t\t\t\tid: service.id,\n\t\t\t\ttitle,\n\t\t\t\tlayers: layerCollection\n\t\t\t});\n\t\t\tgroup.on('change:visible',  () => {\n\t\t\t\tif (this.timeline && this.timeline.element) {\n\t\t\t\t\t// Remove time selector on Map if not required any more https://github.com/Open-EO/openeo-web-editor/issues/207\n\t\t\t\t\tthis.timeline.element.style.display = group.getVisible() ? 'block' : 'none';\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.addLayerToMap(group);\n\n\t\t\tif (this.timeline) {\n\t\t\t\tthis.map.getLayers().on('remove', event => {\n\t\t\t\t\tif (event.element === group) {\n\t\t\t\t\t\tthis.map.removeControl(this.timeline);\n\t\t\t\t\t\tthis.timeline = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn group;\n\t\t},\n\n\t\tupdateXYZLayer(service, prefix = \"Service\") {\n\t\t\t// Replace/add a query parameter with a unique ID so that OpenLayers doesn't load tiles from cache\n\t\t\tlet url = Utils.replaceParam(service.url, '__editorSessionId', new Date().getTime()).replace(/%7B/g, '{').replace(/%7D/g, '}');\n\t\t\tlet title = Utils.getResourceTitle(service, prefix);\n\t\t\tlet layer = new TileLayer({\n\t\t\t\ttitle,\n\t\t\t\tsource: this.trackTileProgress(new XYZ({\n\t\t\t\t\turl\n\t\t\t\t})),\n\t\t\t\tnoSwitcherDelete: true\n\t\t\t});\n\t\t\tlet group = new LayerGroup({\n\t\t\t\tid: service.id,\n\t\t\t\ttitle,\n\t\t\t\tlayers: [\n\t\t\t\t\tlayer\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.addLayerToMap(group);\n\t\t\treturn group;\n\t\t}\n\t}\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WebServiceMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WebServiceMixin.vue?vue&type=script&lang=js&\"","<template>\n\t<Splitpanes horizontal class=\"default-theme\">\n\t\t<Pane id=\"map\">\n\t\t\t<div :id=\"id\" class=\"map-viewer\">\n\t\t\t\t<ProgressControl ref=\"progress\" :map=\"map\" />\n\t\t\t\t<TextControl v-if=\"isGeoTiff\" :text=\"textControlText\" />\n\t\t\t\t<ChannelControl v-if=\"isGeoTiff && !colorMap\" :bands=\"bands\" @update=\"updateGeoTiffStyle\" />\n\t\t\t\t<div v-if=\"loading\" class=\"map-loading\">\n\t\t\t\t\t<i class=\"fas fa-spinner fa-spin\"></i>\n\t\t\t\t\t<span>Loading map...</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Pane>\n\t\t<Pane v-if=\"chart\" id=\"chart\" :size=\"33\">\n\t\t\t<ScatterChart v-bind=\"chart\" :height=\"220\" />\n\t\t</Pane>\n\t</Splitpanes>\n</template>\n\n<script>\nimport { GeoTIFFImage } from 'geotiff';\n\nimport Utils from '../../utils.js';\nimport GeoTIFF from '../../formats/geotiff';\nimport JSON_ from '../../formats/json';\n\nimport { Splitpanes, Pane } from 'splitpanes';\n\nimport ExtentMixin from '../maps/ExtentMixin.vue';\nimport GeoTiffMixin from '../maps/GeoTiffMixin.vue';\nimport MapMixin from '../maps/MapMixin.vue';\nimport ScatterChart from './ScatterChart.vue';\nimport WebServiceMixin from '../maps/WebServiceMixin.vue';\n\nimport { Service } from '@openeo/js-client';\n\nimport Feature from 'ol/Feature';\nimport { fromExtent as PolygonFromExtent } from 'ol/geom/Polygon';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\n\n// Integrate changes/fixes from https://github.com/geotiffjs/geotiff.js/pull/303 until released/integrated by geotiff.js\nGeoTIFFImage.prototype.getSampleByteSize = function(i) {\n    if (!this.fileDirectory.BitsPerSample || this.fileDirectory.BitsPerSample.length === 0) {\n      return;\n    }\n    if (i >= this.fileDirectory.BitsPerSample.length) {\n      i = 0;\n    }\n    return Math.ceil(this.fileDirectory.BitsPerSample[i] / 8);\n};\n\nGeoTIFFImage.prototype.getReaderForSample = function(sampleIndex) {\n    const format = this.getSampleFormat(sampleIndex);\n    const bitsPerSample = this.getBitsPerSample(sampleIndex);\n    switch (format) {\n      case 1: // unsigned integer data\n        if (bitsPerSample <= 8) {\n          return DataView.prototype.getUint8;\n        } else if (bitsPerSample <= 16) {\n          return DataView.prototype.getUint16;\n        } else if (bitsPerSample <= 32) {\n          return DataView.prototype.getUint32;\n        }\n        break;\n      case 2: // twos complement signed integer data\n        if (bitsPerSample <= 8) {\n          return DataView.prototype.getInt8;\n        } else if (bitsPerSample <= 16) {\n          return DataView.prototype.getInt16;\n        } else if (bitsPerSample <= 32) {\n          return DataView.prototype.getInt32;\n        }\n        break;\n      case 3:\n        switch (bitsPerSample) {\n          case 16:\n            return function (offset, littleEndian) {\n              return getFloat16(this, offset, littleEndian);\n            };\n          case 32:\n            return DataView.prototype.getFloat32;\n          case 64:\n            return DataView.prototype.getFloat64;\n          default:\n            break;\n        }\n        break;\n      default:\n        break;\n    }\n    throw Error('Unsupported data format/bitsPerSample');\n};\n\nGeoTIFFImage.prototype.getSampleFormat = function(sampleIndex = 0) {\n    if (!this.fileDirectory.SampleFormat || this.fileDirectory.SampleFormat.length === 0) {\n      return 1;\n    }\n    return typeof this.fileDirectory.SampleFormat[sampleIndex] !== 'undefined'\n      ? this.fileDirectory.SampleFormat[sampleIndex] : this.fileDirectory.SampleFormat[0];\n};\n\nGeoTIFFImage.prototype.getBitsPerSample = function(sampleIndex = 0) {\n    if (!this.fileDirectory.BitsPerSample || this.fileDirectory.BitsPerSample.length === 0) {\n      return;\n    }\n    return typeof this.fileDirectory.BitsPerSample[sampleIndex] !== 'undefined'\n      ? this.fileDirectory.BitsPerSample[sampleIndex] : this.fileDirectory.BitsPerSample[0];\n};\n// End of geotiff.js fixes\n\nexport default {\n\tname: 'MapViewer',\n\tmixins: [ExtentMixin, GeoTiffMixin, MapMixin, WebServiceMixin],\n\tcomponents: {\n\t\tPane,\n\t\tScatterChart,\n\t\tSplitpanes,\n\t},\n\tprops: {\n\t\tdata: {}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tchart: null\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection']),\n\t\tisWebService() {\n\t\t\treturn this.data instanceof Service && typeof this.data.type === 'string';\n\t\t},\n\t\tisGeoTiff() {\n\t\t\treturn this.data instanceof GeoTIFF;\n\t\t},\n\t\tisGeoJson() {\n\t\t\treturn this.data instanceof JSON_ && this.data.isGeoJson;\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$emit('mounted', this);\n\t},\n\tmethods: {\n\t\tasync renderMap() {\n\t\t\ttry {\n\t\t\t\tlet view;\n\t\t\t\tlet data;\n\t\t\t\tif (this.isGeoJson) {\n\t\t\t\t\tdata = await this.data.loadData(this.connection);\n\t\t\t\t}\n\t\t\t\telse if (this.isGeoTiff) {\n\t\t\t\t\tdata = await this.data.loadData(this.connection);\n\t\t\t\t\tlet projection = data.getProjection();\n\t\t\t\t\tif (projection) {\n\t\t\t\t\t\tview = projection;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (this.isWebService && Utils.isMapServiceSupported(this.data.type)) {\n\t\t\t\t\tif (this.data.type.toLowerCase() === 'wmts') {\n\t\t\t\t\t\tlet capabilities = await this.initWMTSLayer(this.data);\n\t\t\t\t\t\t// ToDo: Right now we assume Web Mercator is always available, better check the capabilities...\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error(\"Sorry, the given data can't be shown on a web map.\");\n\t\t\t\t}\n\n\t\t\t\tawait this.createMap(view);\n\t\t\t\tthis.addLayerSwitcher();\n\n\t\t\t\tif (this.isGeoJson) {\n\t\t\t\t\tthis.addBasemaps();\n\t\t\t\t\tthis.addGeoJson(data, true);\n\t\t\t\t}\n\t\t\t\telse if (this.isGeoTiff) {\n\t\t\t\t\tlet proj = this.map.getView().getProjection();\n\t\t\t\t\tif (proj.basemap || ['EPSG:3857', 'EPSG:4326'].includes(proj.getCode())) {\n\t\t\t\t\t\tthis.addBasemaps();\n\t\t\t\t\t}\n\t\t\t\t\tlet stac = this.data.getContext();\n\t\t\t\t\tif (stac) {\n\t\t\t\t\t\tthis.addExtent(stac, false);\n\t\t\t\t\t}\n\t\t\t\t\tthis.addGeoTiff(data);\n\t\t\t\t}\n\t\t\t\telse if (this.isWebService && Utils.isMapServiceSupported(this.data.type)) {\n\t\t\t\t\tthis.addBasemaps();\n\t\t\t\t\tthis.addWebService(this.data);\n\t\t\t\t}\n\n\t\t\t\tif (this.$listeners && this.$listeners.drop) {\n\t\t\t\t\tthis.map.getViewport().addEventListener('dragover', event => event.preventDefault());\n\t\t\t\t\tthis.map.getViewport().addEventListener('drop', this.$listeners.drop);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\n\t\t\tthis.loading = false;\n\t\t},\n\n\t\tasync addCollection() {\n\t\t\tlet layer = this.showWebService(this.data);\n\t\t\t// Fit to extent of collection\n\t\t\ttry {\n\t\t\t\tlet bbox = service.attributes.bbox;\n\t\t\t\tlet extent = [...this.fromLonLat([bbox.west, bbox.south]), ...this.fromLonLat([bbox.east, bbox.north])];\n\t\t\t\tlet extentLayer = new VectorLayer({\n\t\t\t\t\ttitle: \"Extent\",\n\t\t\t\t\tnoSwitcherDelete: true,\n\t\t\t\t\tsource: new VectorSource({\n\t\t\t\t\t\tfeatures: [\n\t\t\t\t\t\t\tnew Feature(PolygonFromExtent(extent))\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprojection: \"EPSG:4326\",\n\t\t\t\t\t\twrapX: false\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\n\t\t\t\tthis.removeLayerFill(extentLayer);\n\t\t\t\tlayer.getLayers().push(extentLayer);\n\n\t\t\t\tthis.map.getView().fit(extent, this.getFitOptions(10));\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t}\n\t}\n\n}\n</script>\n\n<style src=\"../maps/MapMixin.css\"></style>\n\n<style lang=\"scss\">\n.map-viewer {\n\tposition: relative;\n\n\t.map-loading {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tbackground-color: rgba(0,0,0,0.6);\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: 9999;\n\t\tcolor: white;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tflex-direction: column;\n\n\t\t> i {\n\t\t\tfont-size: 2em;\n\t\t}\n\t}\n}\n.ol-control.value {\n\ttop: 0.5em;\n\tleft: 3em;\n}\n.ol-control.ol-timeline .timeline-date-label {\n\twidth: 7em;\n    font-size: 0.8em;\n    font-weight: normal;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapViewer.vue?vue&type=template&id=5bd1f6c4&\"\nimport script from \"./MapViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./MapViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"../maps/MapMixin.css?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./MapViewer.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./ControlMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./ControlMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { Control } from 'ol/control.js';\n\nexport default {\n\tprops: {\n\t\tmap: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcontrol: null\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.control = new Control({\n\t\t\telement: this.$el\n\t\t});\n\t},\n\twatch: {\n\t\tmap(newMap) {\n\t\t\tif (newMap) {\n\t\t\t\tthis.map.addControl(this.control);\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tgetControl() {\n\t\t\treturn this.control;\n\t\t}\n\t}\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlMixin.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScatterChart.vue?vue&type=style&index=0&lang=scss&\"","var render, staticRenderFns\nimport script from \"./ExtentMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./ExtentMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport GeoJsonMixin from './GeoJsonMixin.vue';\nimport Utils from '../../utils.js';\n\nimport Feature from 'ol/Feature';\nimport { fromExtent as PolygonFromExtent } from 'ol/geom/Polygon';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\n\nexport default {\n\tmixins: [GeoJsonMixin],\n\tmethods: {\n\t\t// data can be:\n\t\t// bbox: Array of Array (west, south, east, north - WGS84) or STAC Collection\n\t\t// geometry: GeoJSON Object (WGS84) or STAC Item\n\t\tasync addExtent(data, fill = true) {\n\t\t\tlet footprint = null;\n\t\t\tif (Utils.isObject(data)) {\n\t\t\t\tif (data.type === 'Collection') {\n\t\t\t\t\tfootprint = data.extent.spatial.bbox.map(bbox => Utils.extentToBBox(bbox));\n\t\t\t\t}\n\t\t\t\telse if (data.type !== 'Feature' || data.geometry || data.bbox) {\n\t\t\t\t\tfootprint = data;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tfootprint = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfootprint = data;\n\t\t\t}\n\n\t\t\tif (Array.isArray(footprint) && footprint.length > 0) {\n\t\t\t\tthis.addRectangles(footprint, fill);\n\t\t\t}\n\t\t\telse if (footprint) {\n\t\t\t\tthis.addGeoJson(footprint, false, \"Footprint\", fill);\n\t\t\t}\n\t\t},\n\n\t\taddRectangles(rectangles, fill = true) {\n\t\t\tlet mapProj = this.map.getView().getProjection();\n\t\t\tlet features = rectangles.map(bbox => {\n\t\t\t\tlet polygon = PolygonFromExtent([bbox.west, bbox.south, bbox.east, bbox.north]).transform(\"EPSG:4326\", mapProj);\n\t\t\t\treturn new Feature(polygon);\n\t\t\t});\n\t\t\tlet source = new VectorSource({\n\t\t\t\tfeatures,\n\t\t\t\tprojection: mapProj,\n\t\t\t\twrapX: false\n\t\t\t});\n\t\t\tlet layer = new VectorLayer({\n\t\t\t\ttitle: \"Bounding Boxes\",\n\t\t\t\tdisplayInLayerSwitcher: false,\n\t\t\t\tsource\n\t\t\t});\n\t\t\tif (!fill) {\n\t\t\t\tthis.removeLayerFill(layer);\n\t\t\t}\n\t\t\tthis.map.addLayer(layer);\n\t\t\t// ToDo: The Collection component has some smart fitting behavior in setMapSize()\n\t\t\t// Implement something similar here, too.\n\t\t\tthis.map.getView().fit(source.getExtent(), this.getFitOptions());\n\t\t\treturn layer;\n\t\t},\n\n\t\tremoveLayerFill(layer) {\n\t\t\tlet style = layer.getStyle();\n\t\t\t// https://github.com/openlayers/openlayers/issues/10131\n\t\t\tif (typeof style === 'function') {\n\t\t\t\tstyle = style()[0];\n\t\t\t}\n\t\t\tstyle.setFill(null);\n\t\t}\n\n\t}\n\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExtentMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExtentMixin.vue?vue&type=script&lang=js&\""],"sourceRoot":""}
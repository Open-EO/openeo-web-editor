{"version":3,"file":"js/974.add921aa.js","mappings":"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","sources":["webpack://@openeo/web-editor/src/components/VisualEditor.vue","webpack://@openeo/web-editor/./src/components/VisualEditor.vue?8d1e","webpack://@openeo/web-editor/./src/components/VisualEditor.vue?7fc9","webpack://@openeo/web-editor/./src/components/WorkPanelMixin.js"],"sourcesContent":["<template>\n\t<div class=\"visualEditor\" ref=\"visualEditor\">\n\t\t<div class=\"sourceHeader\">\n\t\t\t<strong v-if=\"title\">{{ title }}</strong>\n\t\t\t<div class=\"sourceToolbar\">\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"confirmClear\" title=\"New script / Clear current script\"><i class=\"fas fa-file\"></i></button>\n\t\t\t\t\t<slot name=\"file-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.undo()\" :disabled=\"!canUndo\" title=\"Revert last change\"><i class=\"fas fa-undo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.redo()\" :disabled=\"!canRedo\" title=\"Redo last reverted change\"><i class=\"fas fa-redo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.deleteSelected()\" :disabled=\"!hasSelection\" title=\"Delete selected elements\"><i class=\"fas fa-trash\"></i></button>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" v-if=\"!parent\" @click=\"() => editProcess(value)\" title=\"Edit Process Metadata\"><i class=\"fas fa-edit\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"addParameter\" title=\"Add Parameter\"><i class=\"fas fa-parking\"></i></button>\n\t\t\t\t\t<button type=\"button\" v-if=\"supportsMath\" :class=\"{highlightFormula: isMath}\" @click=\"showExpressionModal\" title=\"Insert/Edit formula\"><i class=\"fas fa-square-root-alt\"></i></button>\n\t\t\t\t</span>\n\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.toggleCompact()\" :class=\"{compactMode: compactMode}\" title=\"Compact Mode\"><i class=\"fas fa-compress-arrows-alt\"></i></button>\n\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.perfectScale()\" title=\"Scale to perfect size\"><i class=\"fas fa-arrows-alt\"></i></button>\n\t\t\t\t<FullscreenButton :element=\"() => this.$refs.visualEditor\" @changed=\"enabled => {this.$refs.blocks.perfectScale(); isFullScreen = enabled}\" />\n\t\t\t\t<slot name=\"toolbar\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"editorSplitter\">\n\t\t\t<DiscoveryToolbar v-if=\"(showDiscoveryToolbar || isFullScreen) && editable\" class=\"discoveryToolbar\" :onAddProcess=\"insertProcess\" />\n\t\t\t<div class=\"graphBuilder\" @drop=\"onDrop\" @dragover=\"allowDrop\">\n\t\t\t\t<div v-if=\"showHelpOverlay\" class=\"model-overlay\">\n\t\t\t\t\t<h2>Welcome!</h2>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tWhat you are seeing in this area of the {{ $config.appName }} is the visual model builder.\n\t\t\t\t\t\tYou can start building your model by dragging collections, processes etc. from the left area and dropping them here.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tAlternatively, you can also import existing processes into the model builder:\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li v-if=\"canPaste\">Paste the JSON from your clipboard by clicking <button type=\"button\" @click=\"paste\" title=\"Paste from clipboard\"><i class=\"fas fa-paste\"></i></button> or use <kbd>CTRL</kbd> + <kbd>V</kbd> (Windows, Linux) or <kbd>⌘</kbd> + <kbd>V</kbd> (MacOS) when the model builder is in focus.</li>\n\t\t\t\t\t\t\t<li>Drag and drop a JSON file from your computer</li>\n\t\t\t\t\t\t\t<li>Import a JSON file from your computer or another source such as the internet by clicking <button type=\"button\" @click=\"importProcess\" title=\"Import process from external source\"><i class=\"fas fa-cloud-download-alt\"></i></button></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tYou can also import the processes from the Python and R client.\n\t\t\t\t\t\tYou need to export your process to JSON first:\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>In Python use <a href=\"https://open-eo.github.io/openeo-python-client/cookbook/tricks.html#process-graph-export\" target=\"_blank\"><code>print(result.to_json())</code></a></li>\n\t\t\t\t\t\t\t<li>In R use <a href=\"https://open-eo.github.io/openeo-r-client/reference/index.html\" target=\"_blank\"><code>toJSON(as(result, \"Process\"))</code></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\tIn both cases, <code>result</code> is your last return value from a data cube process such as <code>save_result</code>.\n\t\t\t\t\t\tFor more details, please read the corresponding chapter in the <a href=\"https://openeo.org/documentation/1.0/cookbook/#output-process-as-json\" target=\"_blank\">openEO cookbook</a>.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Once you start interacting with this area, this message will disappear.</p>\n\t\t\t\t</div>\n\t\t\t\t<ModelBuilder\n\t\t\t\t\tref=\"blocks\"\n\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t:id=\"id\"\n\t\t\t\t\t:processes=\"processes\"\n\t\t\t\t\t:collections=\"collections\"\n\t\t\t\t\t:parent=\"parent\"\n\t\t\t\t\t:parentSchema=\"parentSchema\"\n\t\t\t\t\t:value=\"value\"\n\t\t\t\t\t@input=\"commit\"\n\t\t\t\t\t@error=\"errorHandler\"\n\t\t\t\t\t@showProcess=\"(id, namespace) => broadcast('showProcess', {id, namespace})\"\n\t\t\t\t\t@showCollection=\"id => broadcast('showCollection', id)\"\n\t\t\t\t\t@showParameter=\"(param, origin) => broadcast('showProcessParameter', param, origin)\"\n\t\t\t\t\t@editParameter=\"editParameter\"\n\t\t\t\t\t@editArguments=\"openArgumentEditor\"\n\t\t\t\t\t@compactMode=\"compact => this.compactMode = compact\"\n\t\t\t\t\t@selectionChanged=\"selectionChanged\"\n\t\t\t\t\t@historyChanged=\"historyChanged\"\n\t\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ModelBuilder from '@openeo/vue-components/components/ModelBuilder.vue';\nimport Utils from '../utils.js';\nimport DiscoveryToolbar from './DiscoveryToolbar.vue';\nimport EventBusMixin from './EventBusMixin.js';\nimport FullscreenButton from './FullscreenButton.vue';\nimport { ProcessParameter } from '@openeo/js-commons';\nimport JavaScript from '../export/javascript';\n\nexport default {\n\tname: 'VisualEditor',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tModelBuilder,\n\t\tDiscoveryToolbar,\n\t\tFullscreenButton\n\t},\n\tprops: {\n\t\tid: String,\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => null\n\t\t},\n\t\tparent: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tparentSchema: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tshowDiscoveryToolbar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tshowIntro: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String\n\t\t},\n\t\tdefaultValue: {}\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection', 'collections']),\n\t\t...Utils.mapGetters(['processes', 'supportsMath']),\n\t\t...Utils.mapState('editor', ['initialNode']),\n\t\t...Utils.mapGetters('editor', ['getModelNodeFromDnD']),\n\t\tisMath() {\n\t\t\treturn (this.supportsMath && this.processes.isMath(this.value));\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowHelpOverlay: this.showIntro,\n\t\t\tcanUndo: false,\n\t\t\tcanRedo: false,\n\t\t\tcanPaste: false,\n\t\t\tcompactMode: false,\n\t\t\thasSelection: false,\n\t\t\tformula: null,\n\t\t\tisFullScreen: false\n\t\t};\n\t},\n\twatch: {\n\t\tvalue: {\n\t\t\timmediate: true,\n\t\t\thandler(value) {\n\t\t\t\tif (value) {\n\t\t\t\t\tthis.showHelpOverlay = false;\n\t\t\t\t}\n\t\t\t\tif (this.initialNode && Utils.isObject(value) && Utils.isObject(value.process_graph)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet node = this.initialNode;\n\t\t\t\t\t\tif (node == \"1\" && Utils.size(value.process_graph)) {\n\t\t\t\t\t\t\tnode = Object.keys(value.process_graph)[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.openArgumentEditorForNode(node);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tUtils.exception(this, error);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.setInitialNode(null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.canPaste = navigator && navigator.clipboard && typeof navigator.clipboard.readText === 'function';\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['setInitialNode', 'setModelDnD']),\n\t\tcommit(value) {\n\t\t\t// Fix #115: Return the default value/null if no nodes are given\n\t\t\tif (typeof this.defaultValue !== 'undefined' && Utils.isObject(value) && Utils.size(value.process_graph) === 0) {\n\t\t\t\tvalue = this.defaultValue;\n\t\t\t}\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\tasync paste() {\n\t\t\tif (!this.canPaste) {\n                Utils.error(this, 'error', 'Pasting is not supported by your browser.');\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst text = await navigator.clipboard.readText();\n\t\t\t\tlet process = JSON.parse(text);\n\t\t\t\tawait this.$refs.blocks.import(process);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Paste Error');\n\t\t\t}\n\t\t},\n\t\timportProcess() {\n\t\t\tthis.broadcast('importProcess');\n\t\t},\n\t\terrorHandler(message, title = null) {\n\t\t\tUtils.exception(this, message, title)\n\t\t},\n\t\tselectionChanged(blocks, edges) {\n\t\t\tthis.hasSelection = Boolean(blocks.filter(block => block.$el.allowsDelete).length || edges.length);\n\t\t},\n\t\thistoryChanged(history, index) {\n\t\t\tthis.canUndo = !!history[index-1];\n\t\t\tthis.canRedo = !!history[index+1];\n\t\t},\n\t\tallowDrop(event) {\n\t\t\tthis.showHelpOverlay = false;\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tasync onDrop(event) {\n\t\t\tconst node = await this.getModelNodeFromDnD();\n\t\t\tif (node) {\n\t\t\t\tthis.insertProcess(node, event.pageX, event.pageY);\n\t\t\t\tthis.setModelDnD();\n\t\t\t\treturn event.preventDefault();\n\t\t\t}\n\n\t\t\t// Read a JSON file that has been dropped\n\t\t\tlet files = event.dataTransfer.files;\n\t\t\tif (files.length === 1) {\n\t\t\t\tlet file = event.dataTransfer.files[0];\n\t\t\t\tif (file.type === 'application/json') {\n\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\treader.onload = async e => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet process = JSON.parse(e.target.result);\n\t\t\t\t\t\t\tawait this.$refs.blocks.import(process);\n\t\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\t\tUtils.exception(this, error, \"Parsing JSON file failed\");\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\treader.onerror = error => Utils.exception(this, error, \"Reading JSON file failed\");\n\t\t\t\t\treader.readAsText(file, \"UTF-8\");\n\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetNameField(value = undefined, name = \"name\") {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tdescription: 'A unique identifier. Must contain only letters (`a`-`z`), digits (`0`-`9`) and underscores (`_`). `snake_case` is recommended.',\n\t\t\t\tlabel: 'Name',\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tpattern: '^\\\\w+$'\n\t\t\t\t},\n\t\t\t\tdefault: null\n\t\t\t};\n\t\t},\n\t\tgetDescriptionField(value = undefined, optional = false, name = \"description\", label = \"Description\") {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tdescription: 'Provides a detailed description. CommonMark (Markdown) syntax can be used for rich text formatting.',\n\t\t\t\tlabel,\n\t\t\t\toptional,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tgetOptionalField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'optional',\n\t\t\t\tlabel: 'Optional',\n\t\t\t\tdescription: 'Parameters by default are required. CHeck this option to make the parameter optional. For optional parameters a default value should be specified.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetDefaultField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'default',\n\t\t\t\tlabel: 'Default Value',\n\t\t\t\tdescription: 'This value is used whenever the user of this process did not specify a value for this parameter.',\n\t\t\t\ttoggledBy: 'optional',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {}\n\t\t\t};\n\t\t},\n\t\tgetExperimentalField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'experimental',\n\t\t\t\tlabel: 'Experimental',\n\t\t\t\tdescription: 'Declares that this is experimental, which means that it is unstable and likely to change.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetDeprecatedField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'deprecated',\n\t\t\t\tlabel: 'Deprecated',\n\t\t\t\tdescription: 'Declares that this is deprecated with the potential to be removed in any of the next versions. It should be transitioned out of usage.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetSchemaField(value = undefined, name = \"schema\", label = \"Data Types\") {\n\t\t\tlet subtype = !value ? 'openeo-datatype' : 'json-schema';\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tlabel,\n\t\t\t\tdescription: 'Allowed data type(s) as JSON Schema.',\n\t\t\t\tschema: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Single data type',\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tsubtype\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Multiple data types',\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\tminItems: 2,\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\tsubtype\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t},\n\t\teditProcess(process) {\n\t\t\tprocess = Utils.isObject(process) ? process : {};\n\t\t\tlet returns = Utils.isObject(process.returns) ? process.returns : {};\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(process.id, 'id'),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.summary,\n\t\t\t\t\tname: 'summary',\n\t\t\t\t\tdescription: 'A very short description of the process with usually less than 60 characters.',\n\t\t\t\t\tlabel: 'Summary',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.getDescriptionField(process.description, true),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.categories,\n\t\t\t\t\tname: 'categories',\n\t\t\t\t\tlabel: 'Categories',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.getExperimentalField(process.experimental),\n\t\t\t\tthis.getDeprecatedField(process.deprecated),\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Parameters',\n\t\t\t\t\tdescription: 'The parameters can be edited directly in the \"Visual Model\" interface.',\n\t\t\t\t\tinfo: true\n\t\t\t\t},\n\t\t\t\tthis.getDescriptionField(returns.description, true, 'returns_description', 'Return Value > Description'),\n\t\t\t\tthis.getSchemaField(returns.schema, 'returns_schema', 'Return Value > Data Type'),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.exceptions,\n\t\t\t\t\tname: 'exceptions',\n\t\t\t\t\tdescription: 'Declares exceptions (errors) that might occur during execution of this process. This list is just for informative purposes.\\n\\nThe keys of the object are the error codes, which should only consist of alphanumerical characters. `PascalCase` is recommended.',\n\t\t\t\t\tlabel: 'Errors',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tadditionalProperties: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"message\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\t\ttitle: 'Error Message',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdescription: {\n\t\t\t\t\t\t\t\t\ttitle: 'Description',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thttp: {\n\t\t\t\t\t\t\t\t\ttitle: 'HTTP Status Code',\n\t\t\t\t\t\t\t\t\ttype: 'integer',\n\t\t\t\t\t\t\t\t\tenum: [\n\t\t\t\t\t\t\t\t\t\t400,\n\t\t\t\t\t\t\t\t\t\t500,\n\t\t\t\t\t\t\t\t\t\t501\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: process.examples,\n\t\t\t\t\tname: 'examples',\n\t\t\t\t\tlabel: 'Examples',\n\t\t\t\t\tdescription: 'Example calls for this process with specific values for the parameters (arguments) and the result (return value).',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"arguments\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Description',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\targuments: {\n\t\t\t\t\t\t\t\t\ttitle: 'Arguments',\n\t\t\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\t\t\tdefault: {}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\treturns: {\n\t\t\t\t\t\t\t\t\ttitle: 'Return Value'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: process.links,\n\t\t\t\t\tname: 'links',\n\t\t\t\t\tlabel: 'Links',\n\t\t\t\t\tdescription: 'Links related to this process, e.g. additional documentation.',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"href\",\n\t\t\t\t\t\t\t\t\"rel\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\thref: {\n\t\t\t\t\t\t\t\t\ttitle: 'URL',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trel: {\n\t\t\t\t\t\t\t\t\ttitle: 'Relation',\n\t\t\t\t\t\t\t\t\tdescription: 'For examples see [IANA relation types](https://www.iana.org/assignments/link-relations/link-relations.xhtml)',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tdefault: 'about'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\t\ttitle: 'Media Type',\n\t\t\t\t\t\t\t\t\tdescription: 'For examples see [IANA media types](https://www.iana.org/assignments/media-types/media-types.xhtml)',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t\tthis.broadcast('showDataForm', \"Edit Process\", fields, async data => {\n\t\t\t\tlet newData = Utils.pickFromObject(data, ['id', 'summary', 'description', 'categories', 'experimental', 'deprecated', 'exception', 'examples', 'links']);\n\t\t\t\tif (typeof newData.description === 'string' || Utils.isObject(newData.schema)) {\n\t\t\t\t\tnewData.returns = {\n\t\t\t\t\t\tdescription: data.returns_description,\n\t\t\t\t\t\tschema: data.returns_schema\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet process = this.$refs.blocks.export(true);\n\t\t\t\tlet newProcess = Object.assign({}, process, newData);\n\t\t\t\tconst defaults = {\n\t\t\t\t\tid: \"\",\n\t\t\t\t\tsummary: \"\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tcategories: [],\n\t\t\t\t\texperimental: false,\n\t\t\t\t\tdeprecated: false,\n\t\t\t\t\texamples: [],\n\t\t\t\t\tlinks: [],\n\t\t\t\t\tprocess_graph: {},\n\t\t\t\t};\n\t\t\t\t// Clean up some defaults / empty values\n\t\t\t\tfor(let key in defaults) {\n\t\t\t\t\tif (Utils.equals(defaults[key], newProcess[key])) {\n\t\t\t\t\t\tdelete newProcess[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.commit(newProcess);\n\t\t\t});\n\t\t},\n\t\taddParameter() {\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(),\n\t\t\t\tthis.getDescriptionField(),\n\t\t\t\tthis.getOptionalField(),\n\t\t\t\tthis.getDefaultField(),\n\t\t\t\tthis.getExperimentalField(),\n\t\t\t\tthis.getDeprecatedField(),\n\t\t\t\tthis.getSchemaField()\n\t\t\t];\n\t\t\tthis.broadcast('showDataForm', \"Add Parameter\", fields, async data => {\n\t\t\t\tif (typeof data.name === 'string' && data.name.length > 0) {\n\t\t\t\t\tawait this.$refs.blocks.addPgParameter(data);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\teditParameter(parameter, title = \"Edit Parameter\", saveCallback = null) {\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(parameter.name),\n\t\t\t\tthis.getDescriptionField(parameter.description),\n\t\t\t\tthis.getOptionalField(parameter.optional),\n\t\t\t\tthis.getDefaultField(parameter.default),\n\t\t\t\tthis.getExperimentalField(parameter.experimental),\n\t\t\t\tthis.getDeprecatedField(parameter.deprecated),\n\t\t\t\tthis.getSchemaField(parameter.schema)\n\t\t\t];\n\t\t\tthis.broadcast('showDataForm', title, fields, saveCallback);\n\t\t},\n\t\tshowExpressionModal() {\n\t\t\tlet js = new JavaScript(this.value, this.processes, this.connection, true);\n\t\t\tjs.setCallbackParameters(this.$refs.blocks.getPgParameters().map(block => block.spec));\n\t\t\ttry {\n\t\t\t\tjs.parse();\n\t\t\t\tlet props = {\n\t\t\t\t\tprocess: js\n\t\t\t\t};\n\t\t\t\tlet events = {\n\t\t\t\t\tsave: this.insertNodes\n\t\t\t\t};\n\t\t\t\tthis.broadcast('showModal', 'ExpressionModal', props, events);\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\t\topenArgumentEditorForNode(nodeId) {\n\t\t\tlet process = Utils.deepClone(this.value);\n\t\t\tlet node = process.process_graph[nodeId];\n\t\t\tlet processSpec = this.processes.get(node.process_id, node.namespace);\n\t\t\tif (Array.isArray(processSpec.parameters) && processSpec.parameters.length > 0) {\n\t\t\t\tthis.openArgumentEditor(\n\t\t\t\t\tprocessSpec.parameters.map(p => new ProcessParameter(p)).filter(p => p.isEditable()),\n\t\t\t\t\tnode.arguments,\n\t\t\t\t\tprocessSpec.id,\n\t\t\t\t\ttrue,\n\t\t\t\t\tnull,\n\t\t\t\t\tdata => {\n\t\t\t\t\t\tObject.assign(node, {arguments: data});\n\t\t\t\t\t\tthis.commit(process);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\topenArgumentEditor(parameters, data, title = \"Edit\", editable = true, selectParameterName = null, saveCallback = null, parent = null) {\n\t\t\tlet props = {\n\t\t\t\ttitle,\n\t\t\t\tparameters,\n\t\t\t\tdata,\n\t\t\t\teditable,\n\t\t\t\tselectParameterName,\n\t\t\t\tparent\n\t\t\t};\n\t\t\tlet events = {};\n\t\t\tif (typeof saveCallback === 'function') {\n\t\t\t\tevents.save = saveCallback;\n\t\t\t}\n\t\t\tthis.broadcast('showModal', 'ParameterModal', props, events);\n\t\t},\n\t\tconfirmClear() {\n\t\t\tvar confirmed = confirm(\"Do you really want to clear the existing model?\");\n\t\t\tif (confirmed) {\n\t\t\t\tthis.clear();\n\t\t\t}\n\t\t},\n\t\tclear() {\n\t\t\tif (this.$refs.blocks) {\n\t\t\t\tthis.$refs.blocks.clear();\n\t\t\t}\n\t\t\tthis.commit(null);\n\t\t},\n\t\tinsertProcess(node, x = null, y = null) {\n\t\t\ttry {\n\t\t\t\tvar pos = this.$refs.blocks.getPositionForPageXY(x, y);\n\t\t\t\tlet namespace = node.namespace;\n\t\t\t\tif (namespace === 'backend' || namespace === 'user') {\n\t\t\t\t\tnamespace = null;\n\t\t\t\t}\n\t\t\t\tthis.$refs.blocks.addProcess(node.process_id, node.arguments, pos, namespace);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\t\tasync insertNodes(nodes, replace = false) {\n\t\t\treturn await this.$refs.blocks.import({\n\t\t\t\tprocess_graph: nodes\n\t\t\t}, {\n\t\t\t\tclear: replace\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.visualEditor {\n\tbackground-color: white;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t.vue-component.model-builder {\n\t\tmin-height: 100px;\n\t\tmin-width: 100px;\n\t}\n\n\t.model-overlay {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tcolor: #555;\n\t\tz-index: 5;\n\t\tpadding: 1em;\n\t\toverflow: auto;\n\t\tbox-sizing: border-box;\n\t\tline-height: 1.25em;\n\n\t\t> h2 {\n\t\t\tfont-size: 1.2em;\n\t\t\ttext-align: center;\n\t\t\tborder-bottom: 0;\n\t\t\tmargin-bottom: 0.5em;\n\t\t\tpadding: 0;\n\t\t}\n\t\t> p {\n\t\t\tmargin: 0.5em 0;\n\n\t\t\t> ul {\n\t\t\t\tmargin: 0.25em 0;\n\t\t\t}\n\t\t\t&:first-of-type {\n\t\t\t\tmargin-top: 0;\n\t\t\t}\n\t\t\t&:last-of-type {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t.discoveryToolbar {\n\t\twidth: 25%;\n\t\tmin-width: 150px;\n\t\tborder-left: 1px solid #ddd;\n\t}\n\t.editorSplitter {\n\t\tdisplay: flex;\n\t\tflex-direction: row-reverse;\n\t\tflex-grow: 1;\n\t\theight: 100%;\n\t\toverflow: hidden;\n\t}\n\n\t&.fullscreen {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t.discoveryToolbar {\n\t\t\twidth: 15%;\n\t\t\tmin-width: 250px;\n\t\t}\n\t\t.editorSplitter {\n\t\t\theight: 100%;\n\t\t}\n\t}\n}\n\n.graphBuilder {\n\theight: 100%;\n\tflex-grow: 1;\n\tposition: relative;\n}\n\n.compactMode {\n\tcolor: green;\n}\n\n@keyframes glowing {\n  0% {\n    box-shadow: 0 0 3px green;\n  }\n  50% {\n    box-shadow: 0 0 10px green;\n  }\n  100% {\n    box-shadow: 0 0 3px green;\n  }\n}\n\n.highlightFormula {\n    animation: glowing 1500ms infinite;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./VisualEditor.vue?vue&type=template&id=c6a91f54\"\nimport script from \"./VisualEditor.vue?vue&type=script&lang=js\"\nexport * from \"./VisualEditor.vue?vue&type=script&lang=js\"\nimport style0 from \"./VisualEditor.vue?vue&type=style&index=0&id=c6a91f54&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import DataTable from '@openeo/vue-components/components/DataTable.vue';\nimport Utils from '../utils.js';\n\nexport default (namespace, singular, plural, loadInitially = true) => {\n\treturn {\n\t\tcomponents: {\n\t\t\tDataTable\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tsyncTimer: null,\n\t\t\t\tlastSyncTime: null\n\t\t\t};\n\t\t},\n\t\tmounted() {\n\t\t\tif (loadInitially) {\n\t\t\t\tthis.updateData();\n\t\t\t}\n\t\t},\n\t\tbeforeDestroy() {\n\t\t\tthis.stopSyncTimer();\n\t\t},\n\t\tcomputed: {\n\t\t\t...Utils.mapState(namespace, {data: namespace}),\n\t\t\t...Utils.mapGetters(namespace, ['supportsList', 'supportsCreate', 'supportsRead', 'supportsUpdate', 'supportsDelete'])\n\t\t},\n\t\tmethods: {\n\t\t\t...Utils.mapActions(namespace, ['list', 'create', 'read', 'update', 'delete']),\n\t\t\tgetTable() { // To be overridden\n\t\t\t\treturn this.$refs && this.$refs.table ? this.$refs.table : null;\n\t\t\t},\n\t\t\tonShow() {\n\t\t\t\tthis.updateData().catch(error => Utils.exception(this, error, `Updating ${plural} failed`));\n\t\t\t\tthis.startSyncTimer();\n\t\t\t},\n\t\t\tonHide() {\n\t\t\t\tthis.stopSyncTimer();\n\t\t\t},\n\t\t\tstartSyncTimer() {\n\t\t\t\tif (this.supportsList && this.syncTimer === null) {\n\t\t\t\t\tthis.syncTimer = setInterval(this.updateData, this.getSyncInterval());\n\t\t\t\t}\n\t\t\t},\n\t\t\tstopSyncTimer() {\n\t\t\t\tif (this.syncTimer !== null) {\n\t\t\t\t\tclearInterval(this.syncTimer);\n\t\t\t\t\tthis.syncTimer = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetSyncInterval() {\n\t\t\t\treturn this.$config.dataRefreshInterval*60*1000; // Refresh data every x minutes\n\t\t\t},\n\t\t\tasync refreshElement(obj, callback = null) {\n\t\t\t\tvar old = Object.assign({}, obj);\n\t\t\t\ttry {\n\t\t\t\t\tlet updated = await this.read({data: obj});\n\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\tcallback(updated, old);\n\t\t\t\t\t}\n\t\t\t\t} catch(error) {\n\t\t\t\t\tUtils.exception(this, error, \"Load \" + singular + \" error\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync updateData(force = false) {\n\t\t\t\tvar table = this.getTable();\n\t\t\t\tvar nextSyncTime = Date.now() - this.getSyncInterval();\n\t\t\t\tif (!table || (!force && this.lastSyncTime > nextSyncTime)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse if (!this.supportsList) {\n\t\t\t\t\ttable.setNoData(\"Sorry, listing stored \" + plural + \" is not supported by the server.\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar isUpdate = this.data.length > 0;\n\t\t\t\t\tif (!isUpdate) {\n\t\t\t\t\t\ttable.setNoData(\"Loading \" + plural + \"...\");\n\t\t\t\t\t}\n\t\t\t\t\tthis.lastSyncTime = Date.now();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet data = await this.list();\n\t\t\t\t\t\tif(data.length == 0) {\n\t\t\t\t\t\t\ttable.setNoData(\"Add your first \" + singular + \" here...\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\tif (!isUpdate) {\n\t\t\t\t\t\t\tUtils.exception(this, error);\n\t\t\t\t\t\t\ttable.setNoData(\"Sorry, unable to load data from the server.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n}"],"names":["name","mixins","EventBusMixin","components","ModelBuilder","DiscoveryToolbar","FullscreenButton","props","id","String","editable","type","Boolean","default","value","Object","parent","parentSchema","showDiscoveryToolbar","showIntro","title","defaultValue","computed","Utils","mapState","mapGetters","isMath","supportsMath","processes","data","showHelpOverlay","canUndo","canRedo","canPaste","compactMode","hasSelection","formula","isFullScreen","watch","immediate","handler","initialNode","isObject","process_graph","node","size","keys","openArgumentEditorForNode","error","exception","setInitialNode","mounted","navigator","clipboard","readText","methods","mapMutations","commit","$emit","paste","text","process","JSON","parse","$refs","blocks","import","importProcess","broadcast","errorHandler","message","selectionChanged","edges","filter","block","$el","allowsDelete","length","historyChanged","history","index","allowDrop","event","preventDefault","onDrop","getModelNodeFromDnD","insertProcess","pageX","pageY","setModelDnD","files","dataTransfer","file","reader","FileReader","onload","e","target","result","onerror","readAsText","getNameField","undefined","description","label","schema","pattern","getDescriptionField","optional","subtype","getOptionalField","getDefaultField","toggledBy","getExperimentalField","getDeprecatedField","getSchemaField","minItems","items","editProcess","returns","fields","summary","categories","experimental","deprecated","info","exceptions","additionalProperties","required","properties","http","enum","examples","arguments","links","href","rel","newData","pickFromObject","returns_description","returns_schema","export","newProcess","assign","defaults","key","equals","addParameter","addPgParameter","editParameter","parameter","saveCallback","showExpressionModal","js","JavaScript","connection","setCallbackParameters","getPgParameters","map","spec","events","save","insertNodes","nodeId","deepClone","processSpec","get","process_id","namespace","Array","isArray","parameters","openArgumentEditor","p","ProcessParameter","isEditable","selectParameterName","confirmClear","confirmed","confirm","clear","x","y","pos","getPositionForPageXY","addProcess","nodes","replace","component","singular","plural","loadInitially","DataTable","syncTimer","lastSyncTime","this","updateData","beforeDestroy","stopSyncTimer","mapActions","getTable","table","onShow","catch","startSyncTimer","onHide","supportsList","setInterval","getSyncInterval","clearInterval","$config","dataRefreshInterval","refreshElement","obj","callback","old","updated","read","force","nextSyncTime","Date","now","isUpdate","setNoData","list","console","log"],"sourceRoot":""}
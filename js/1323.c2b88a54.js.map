{"version":3,"file":"js/1323.c2b88a54.js","mappings":"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","sources":["webpack://@openeo/web-editor/./node_modules/ol/array.js","webpack://@openeo/web-editor/./node_modules/ol/asserts.js","webpack://@openeo/web-editor/./node_modules/ol/centerconstraint.js","webpack://@openeo/web-editor/./node_modules/ol/color.js","webpack://@openeo/web-editor/./node_modules/ol/colorlike.js","webpack://@openeo/web-editor/./node_modules/ol/control/Control.js","webpack://@openeo/web-editor/./node_modules/ol/control/FullScreen.js","webpack://@openeo/web-editor/./node_modules/ol/control/ScaleLine.js","webpack://@openeo/web-editor/./node_modules/ol/control/Attribution.js","webpack://@openeo/web-editor/./node_modules/ol/control/Rotate.js","webpack://@openeo/web-editor/./node_modules/ol/control/Zoom.js","webpack://@openeo/web-editor/./node_modules/ol/control/defaults.js","webpack://@openeo/web-editor/./node_modules/ol/css.js","webpack://@openeo/web-editor/./node_modules/ol/dom.js","webpack://@openeo/web-editor/./node_modules/ol/easing.js","webpack://@openeo/web-editor/./node_modules/ol/events.js","webpack://@openeo/web-editor/./node_modules/ol/events/Event.js","webpack://@openeo/web-editor/./node_modules/ol/events/EventType.js","webpack://@openeo/web-editor/./node_modules/ol/events/Key.js","webpack://@openeo/web-editor/./node_modules/ol/events/Target.js","webpack://@openeo/web-editor/./node_modules/ol/events/condition.js","webpack://@openeo/web-editor/./node_modules/ol/expr/cpu.js","webpack://@openeo/web-editor/./node_modules/ol/expr/expression.js","webpack://@openeo/web-editor/./node_modules/ol/expr/gpu.js","webpack://@openeo/web-editor/./node_modules/ol/featureloader.js","webpack://@openeo/web-editor/./node_modules/ol/format/Feature.js","webpack://@openeo/web-editor/./node_modules/ol/format/JSONFeature.js","webpack://@openeo/web-editor/./node_modules/ol/format/GeoJSON.js"],"sourcesContent":["/**\n * @module ol/array\n */\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function} [comparator] Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, comparator) {\n  let mid, cmp;\n  comparator = comparator || ascending;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + ((high - low) >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) {\n      /* Too low. */\n      low = mid + 1;\n    } else {\n      /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n/**\n * Compare function sorting arrays in ascending order.  Safe to use for numeric values.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function ascending(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n/**\n * Compare function sorting arrays in descending order.  Safe to use for numeric values.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is greater than, equal to, or less than the second.\n */\nexport function descending(a, b) {\n  return a < b ? 1 : a > b ? -1 : 0;\n}\n\n/**\n * {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution} can use a function\n * of this type to determine which nearest resolution to use.\n *\n * This function takes a `{number}` representing a value between two array entries,\n * a `{number}` representing the value of the nearest higher entry and\n * a `{number}` representing the value of the nearest lower entry\n * as arguments and returns a `{number}`. If a negative number or zero is returned\n * the lower value will be used, if a positive number is returned the higher value\n * will be used.\n * @typedef {function(number, number, number): number} NearestDirectionFunction\n * @api\n */\n\n/**\n * @param {Array<number>} arr Array in descending order.\n * @param {number} target Target.\n * @param {number|NearestDirectionFunction} direction\n *    0 means return the nearest,\n *    > 0 means return the largest nearest,\n *    < 0 means return the smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  if (arr[0] <= target) {\n    return 0;\n  }\n\n  const n = arr.length;\n  if (target <= arr[n - 1]) {\n    return n - 1;\n  }\n\n  if (typeof direction === 'function') {\n    for (let i = 1; i < n; ++i) {\n      const candidate = arr[i];\n      if (candidate === target) {\n        return i;\n      }\n      if (candidate < target) {\n        if (direction(target, arr[i - 1], candidate) > 0) {\n          return i - 1;\n        }\n        return i;\n      }\n    }\n    return n - 1;\n  }\n\n  if (direction > 0) {\n    for (let i = 1; i < n; ++i) {\n      if (arr[i] < target) {\n        return i - 1;\n      }\n    }\n    return n - 1;\n  }\n\n  if (direction < 0) {\n    for (let i = 1; i < n; ++i) {\n      if (arr[i] <= target) {\n        return i;\n      }\n    }\n    return n - 1;\n  }\n\n  for (let i = 1; i < n; ++i) {\n    if (arr[i] == target) {\n      return i;\n    }\n    if (arr[i] < target) {\n      if (arr[i - 1] - target < target - arr[i]) {\n        return i - 1;\n      }\n      return i;\n    }\n  }\n  return n - 1;\n}\n\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n/**\n * @param {Array<any>|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array<any>|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Sort the passed array such that the relative order of equal elements is preserved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function (a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function} [func] Comparison function.\n * @param {boolean} [strict] Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, func, strict) {\n  const compare = func || ascending;\n  return arr.every(function (currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || (strict && res === 0));\n  });\n}\n","/**\n * @module ol/asserts\n */\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {string} errorMessage Error message.\n */\nexport function assert(assertion, errorMessage) {\n  if (!assertion) {\n    throw new Error(errorMessage);\n  }\n}\n","/**\n * @module ol/centerconstraint\n */\nimport {clamp} from './math.js';\n\n/**\n * @typedef {function((import(\"./coordinate.js\").Coordinate|undefined), number, import(\"./size.js\").Size, boolean=, Array<number>=): (import(\"./coordinate.js\").Coordinate|undefined)} Type\n */\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {boolean} onlyCenter If true, the constraint will only apply to the view center.\n * @param {boolean} smooth If true, the view will be able to go slightly out of the given extent\n * (only during interaction and animation).\n * @return {Type} The constraint.\n */\nexport function createExtent(extent, onlyCenter, smooth) {\n  return (\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n     * @param {number|undefined} resolution Resolution.\n     * @param {import(\"./size.js\").Size} size Viewport size; unused if `onlyCenter` was specified.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @param {Array<number>} [centerShift] Shift between map center and viewport center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n     */\n    function (center, resolution, size, isMoving, centerShift) {\n      if (!center) {\n        return undefined;\n      }\n      if (!resolution && !onlyCenter) {\n        return center;\n      }\n      const viewWidth = onlyCenter ? 0 : size[0] * resolution;\n      const viewHeight = onlyCenter ? 0 : size[1] * resolution;\n      const shiftX = centerShift ? centerShift[0] : 0;\n      const shiftY = centerShift ? centerShift[1] : 0;\n      let minX = extent[0] + viewWidth / 2 + shiftX;\n      let maxX = extent[2] - viewWidth / 2 + shiftX;\n      let minY = extent[1] + viewHeight / 2 + shiftY;\n      let maxY = extent[3] - viewHeight / 2 + shiftY;\n\n      // note: when zooming out of bounds, min and max values for x and y may\n      // end up inverted (min > max); this has to be accounted for\n      if (minX > maxX) {\n        minX = (maxX + minX) / 2;\n        maxX = minX;\n      }\n      if (minY > maxY) {\n        minY = (maxY + minY) / 2;\n        maxY = minY;\n      }\n\n      let x = clamp(center[0], minX, maxX);\n      let y = clamp(center[1], minY, maxY);\n\n      // during an interaction, allow some overscroll\n      if (isMoving && smooth && resolution) {\n        const ratio = 30 * resolution;\n        x +=\n          -ratio * Math.log(1 + Math.max(0, minX - center[0]) / ratio) +\n          ratio * Math.log(1 + Math.max(0, center[0] - maxX) / ratio);\n        y +=\n          -ratio * Math.log(1 + Math.max(0, minY - center[1]) / ratio) +\n          ratio * Math.log(1 + Math.max(0, center[1] - maxY) / ratio);\n      }\n\n      return [x, y];\n    }\n  );\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} [center] Center.\n * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n */\nexport function none(center) {\n  return center;\n}\n","/**\n * @module ol/color\n */\nimport lchuv from 'color-space/lchuv.js';\nimport parseRgba from 'color-rgba';\nimport rgb from 'color-space/rgb.js';\nimport xyz from 'color-space/xyz.js';\nimport {clamp} from './math.js';\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  }\n  return toString(color);\n}\n\n/**\n * @type {number}\n */\nconst MAX_CACHE_SIZE = 1024;\n\n/**\n * We maintain a small cache of parsed strings.  Whenever the cache grows too large,\n * we delete an arbitrary set of the entries.\n *\n * @type {Object<string, Color>}\n */\nconst cache = {};\n\n/**\n * @type {number}\n */\nlet cacheSize = 0;\n\n/**\n * @param {Color} color A color that may or may not have an alpha channel.\n * @return {Color} The input color with an alpha channel.  If the input color has\n * an alpha channel, the input color will be returned unchanged.  Otherwise, a new\n * array will be returned with the input color and an alpha channel of 1.\n */\nexport function withAlpha(color) {\n  if (color.length === 4) {\n    return color;\n  }\n  const output = color.slice();\n  output[3] = 1;\n  return output;\n}\n\n/**\n * @param {Color} color RGBA color.\n * @return {Color} LCHuv color with alpha.\n */\nexport function rgbaToLcha(color) {\n  const output = xyz.lchuv(rgb.xyz(color));\n  output[3] = color[3];\n  return output;\n}\n\n/**\n * @param {Color} color LCHuv color with alpha.\n * @return {Color} RGBA color.\n */\nexport function lchaToRgba(color) {\n  const output = xyz.rgb(lchuv.xyz(color));\n  output[3] = color[3];\n  return output;\n}\n\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport function fromString(s) {\n  if (cache.hasOwnProperty(s)) {\n    return cache[s];\n  }\n  if (cacheSize >= MAX_CACHE_SIZE) {\n    let i = 0;\n    for (const key in cache) {\n      if ((i++ & 3) === 0) {\n        delete cache[key];\n        --cacheSize;\n      }\n    }\n  }\n\n  const color = parseRgba(s);\n  if (color.length !== 4) {\n    throw new Error('Failed to parse \"' + s + '\" as color');\n  }\n  for (const c of color) {\n    if (isNaN(c)) {\n      throw new Error('Failed to parse \"' + s + '\" as color');\n    }\n  }\n  normalize(color);\n  cache[s] = color;\n  ++cacheSize;\n  return color;\n}\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  }\n  return fromString(color);\n}\n\n/**\n * Exported for the tests.\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : Math.round(color[3] * 1000) / 1000;\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n\n/**\n * @param {string} s String.\n * @return {boolean} Whether the string is actually a valid color\n */\nexport function isStringColor(s) {\n  try {\n    fromString(s);\n    return true;\n  } catch (_) {\n    return false;\n  }\n}\n","/**\n * @module ol/colorlike\n */\nimport ImageState from './ImageState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {get as getIconImage} from './style/IconImage.js';\nimport {shared as iconCache} from './style/IconImageCache.js';\nimport {toString} from './color.js';\n\n/**\n * @typedef {Object} PatternDescriptor\n * @property {string} src Pattern image URL\n * @property {import(\"./color.js\").Color|string} [color] Color to tint the pattern with.\n * @property {import(\"./size.js\").Size} [size] Size of the desired slice from the pattern image.\n * Use this together with `offset` when the pattern image is a sprite sheet.\n * @property {import(\"./size.js\").Size} [offset] Offset of the desired slice from the pattern image.\n * Use this together with `size` when the pattern image is a sprite sheet.\n */\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, [CanvasPattern](https://developer.mozilla.org/en-US/docs/Web/API/CanvasPattern),\n * or [CanvasGradient](https://developer.mozilla.org/en-US/docs/Web/API/CanvasGradient). The origin for\n * patterns and gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike|PatternDescriptor|null} color Color.\n * @return {ColorLike|null} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n  if (!color) {\n    return null;\n  }\n  if (Array.isArray(color)) {\n    return toString(color);\n  }\n  if (typeof color === 'object' && 'src' in color) {\n    return asCanvasPattern(color);\n  }\n  return color;\n}\n\n/**\n * @param {PatternDescriptor} pattern Pattern descriptor.\n * @return {CanvasPattern|null} Canvas pattern or null if the pattern referenced in the\n * PatternDescriptor was not found in the icon image cache.\n */\nfunction asCanvasPattern(pattern) {\n  if (!pattern.offset || !pattern.size) {\n    return iconCache.getPattern(pattern.src, 'anonymous', pattern.color);\n  }\n\n  const cacheKey = pattern.src + ':' + pattern.offset;\n\n  const canvasPattern = iconCache.getPattern(\n    cacheKey,\n    undefined,\n    pattern.color,\n  );\n  if (canvasPattern) {\n    return canvasPattern;\n  }\n\n  const iconImage = iconCache.get(pattern.src, 'anonymous', null);\n  if (iconImage.getImageState() !== ImageState.LOADED) {\n    return null;\n  }\n  const patternCanvasContext = createCanvasContext2D(\n    pattern.size[0],\n    pattern.size[1],\n  );\n  patternCanvasContext.drawImage(\n    iconImage.getImage(1),\n    pattern.offset[0],\n    pattern.offset[1],\n    pattern.size[0],\n    pattern.size[1],\n    0,\n    0,\n    pattern.size[0],\n    pattern.size[1],\n  );\n  getIconImage(\n    patternCanvasContext.canvas,\n    cacheKey,\n    undefined,\n    ImageState.LOADED,\n    pattern.color,\n    true,\n  );\n  return iconCache.getPattern(cacheKey, undefined, pattern.color);\n}\n","/**\n * @module ol/control/Control\n */\nimport BaseObject from '../Object.js';\nimport MapEventType from '../MapEventType.js';\nimport {VOID} from '../functions.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport {removeNode} from '../dom.js';\n\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * const myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nclass Control extends BaseObject {\n  /**\n   * @param {Options} options Control options.\n   */\n  constructor(options) {\n    super();\n\n    const element = options.element;\n    if (element && !options.target && !element.style.pointerEvents) {\n      element.style.pointerEvents = 'auto';\n    }\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = element ? element : null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../Map.js\").default|null}\n     */\n    this.map_ = null;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../events.js\").EventsKey>}\n     */\n    this.listenerKeys = [];\n\n    if (options.render) {\n      this.render = options.render;\n    }\n\n    if (options.target) {\n      this.setTarget(options.target);\n    }\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    removeNode(this.element);\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the map associated with this control.\n   * @return {import(\"../Map.js\").default|null} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Pass `null` to just remove the control from the current map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.map_) {\n      removeNode(this.element);\n    }\n    for (let i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n      unlistenByKey(this.listenerKeys[i]);\n    }\n    this.listenerKeys.length = 0;\n    this.map_ = map;\n    if (map) {\n      const target = this.target_\n        ? this.target_\n        : map.getOverlayContainerStopEvent();\n      target.appendChild(this.element);\n      if (this.render !== VOID) {\n        this.listenerKeys.push(\n          listen(map, MapEventType.POSTRENDER, this.render, this),\n        );\n      }\n      map.render();\n    }\n  }\n\n  /**\n   * Renders the control.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @api\n   */\n  render(mapEvent) {}\n\n  /**\n   * This function is used to set a target element for the control. It has no\n   * effect if it is called after the control has been added to the map (i.e.\n   * after `setMap` is called on the control). If no `target` is set in the\n   * options passed to the control constructor and if `setTarget` is not called\n   * then the control is added to the map's overlay container.\n   * @param {HTMLElement|string} target Target.\n   * @api\n   */\n  setTarget(target) {\n    this.target_ =\n      typeof target === 'string' ? document.getElementById(target) : target;\n  }\n}\n\nexport default Control;\n","/**\n * @module ol/control/FullScreen\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport MapProperty from '../MapProperty.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_UNSUPPORTED} from '../css.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport {replaceNode} from '../dom.js';\n\nconst events = [\n  'fullscreenchange',\n  'webkitfullscreenchange',\n  'MSFullscreenChange',\n];\n\n/**\n * @enum {string}\n */\nconst FullScreenEventType = {\n  /**\n   * Triggered after the map entered fullscreen.\n   * @event FullScreenEventType#enterfullscreen\n   * @api\n   */\n  ENTERFULLSCREEN: 'enterfullscreen',\n\n  /**\n   * Triggered after the map leave fullscreen.\n   * @event FullScreenEventType#leavefullscreen\n   * @api\n   */\n  LEAVEFULLSCREEN: 'leavefullscreen',\n};\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes|\n *     'enterfullscreen'|'leavefullscreen', import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|\n *     'enterfullscreen'|'leavefullscreen'|import(\"../ObjectEventType\").Types, Return>} FullScreenOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-full-screen'] CSS class name.\n * @property {string|Text|HTMLElement} [label='\\u2922'] Text label to use for the button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|Text|HTMLElement} [labelActive='\\u00d7'] Text label to use for the\n * button when full-screen is active.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [activeClassName=className + '-true'] CSS class name for the button\n * when full-screen is active.\n * @property {string} [inactiveClassName=className + '-false'] CSS class name for the button\n * when full-screen is inactive.\n * @property {string} [tipLabel='Toggle full-screen'] Text label to use for the button tip.\n * @property {boolean} [keys=false] Full keyboard access.\n * @property {HTMLElement|string} [target] Specify a target if you want the\n * control to be rendered outside of the map's viewport.\n * @property {HTMLElement|string} [source] The element to be displayed\n * fullscreen. When not provided, the element containing the map viewport will\n * be displayed fullscreen.\n */\n\n/**\n * @classdesc\n * Provides a button that when clicked fills up the full screen with the map.\n * The full screen source element is by default the element containing the map viewport unless\n * overridden by providing the `source` option. In which case, the dom\n * element introduced using this parameter will be displayed in full screen.\n *\n * When in full screen mode, a close button is shown to exit full screen mode.\n * The [Fullscreen API](https://www.w3.org/TR/fullscreen/) is used to\n * toggle the map in full screen mode.\n *\n * @fires FullScreenEventType#enterfullscreen\n * @fires FullScreenEventType#leavefullscreen\n * @api\n */\nclass FullScreen extends Control {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      element: document.createElement('div'),\n      target: options.target,\n    });\n\n    /***\n     * @type {FullScreenOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {FullScreenOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {FullScreenOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.keys_ = options.keys !== undefined ? options.keys : false;\n\n    /**\n     * @private\n     * @type {HTMLElement|string|undefined}\n     */\n    this.source_ = options.source;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.isInFullscreen_ = false;\n\n    /**\n     * @private\n     */\n    this.boundHandleMapTargetChange_ = this.handleMapTargetChange_.bind(this);\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.cssClassName_ =\n      options.className !== undefined ? options.className : 'ol-full-screen';\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.documentListeners_ = [];\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.activeClassName_ =\n      options.activeClassName !== undefined\n        ? options.activeClassName.split(' ')\n        : [this.cssClassName_ + '-true'];\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.inactiveClassName_ =\n      options.inactiveClassName !== undefined\n        ? options.inactiveClassName.split(' ')\n        : [this.cssClassName_ + '-false'];\n\n    const label = options.label !== undefined ? options.label : '\\u2922';\n\n    /**\n     * @private\n     * @type {Text|HTMLElement}\n     */\n    this.labelNode_ =\n      typeof label === 'string' ? document.createTextNode(label) : label;\n\n    const labelActive =\n      options.labelActive !== undefined ? options.labelActive : '\\u00d7';\n\n    /**\n     * @private\n     * @type {Text|HTMLElement}\n     */\n    this.labelActiveNode_ =\n      typeof labelActive === 'string'\n        ? document.createTextNode(labelActive)\n        : labelActive;\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Toggle full-screen';\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.button_ = document.createElement('button');\n    this.button_.title = tipLabel;\n    this.button_.setAttribute('type', 'button');\n    this.button_.appendChild(this.labelNode_);\n    this.button_.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this),\n      false,\n    );\n    this.setClassName_(this.button_, this.isInFullscreen_);\n\n    this.element.className = `${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`;\n    this.element.appendChild(this.button_);\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleFullScreen_();\n  }\n\n  /**\n   * @private\n   */\n  handleFullScreen_() {\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    const doc = map.getOwnerDocument();\n    if (!isFullScreenSupported(doc)) {\n      return;\n    }\n    if (isFullScreen(doc)) {\n      exitFullScreen(doc);\n    } else {\n      let element;\n      if (this.source_) {\n        element =\n          typeof this.source_ === 'string'\n            ? doc.getElementById(this.source_)\n            : this.source_;\n      } else {\n        element = map.getTargetElement();\n      }\n      if (this.keys_) {\n        requestFullScreenWithKeys(element);\n      } else {\n        requestFullScreen(element);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  handleFullScreenChange_() {\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    const wasInFullscreen = this.isInFullscreen_;\n    this.isInFullscreen_ = isFullScreen(map.getOwnerDocument());\n    if (wasInFullscreen !== this.isInFullscreen_) {\n      this.setClassName_(this.button_, this.isInFullscreen_);\n      if (this.isInFullscreen_) {\n        replaceNode(this.labelActiveNode_, this.labelNode_);\n        this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN);\n      } else {\n        replaceNode(this.labelNode_, this.labelActiveNode_);\n        this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN);\n      }\n      map.updateSize();\n    }\n  }\n\n  /**\n   * @param {HTMLElement} element Target element\n   * @param {boolean} fullscreen True if fullscreen class name should be active\n   * @private\n   */\n  setClassName_(element, fullscreen) {\n    if (fullscreen) {\n      element.classList.remove(...this.inactiveClassName_);\n      element.classList.add(...this.activeClassName_);\n    } else {\n      element.classList.remove(...this.activeClassName_);\n      element.classList.add(...this.inactiveClassName_);\n    }\n  }\n\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Pass `null` to just remove the control from the current map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   * @api\n   */\n  setMap(map) {\n    const oldMap = this.getMap();\n    if (oldMap) {\n      oldMap.removeChangeListener(\n        MapProperty.TARGET,\n        this.boundHandleMapTargetChange_,\n      );\n    }\n\n    super.setMap(map);\n\n    this.handleMapTargetChange_();\n    if (map) {\n      map.addChangeListener(\n        MapProperty.TARGET,\n        this.boundHandleMapTargetChange_,\n      );\n    }\n  }\n\n  /**\n   * @private\n   */\n  handleMapTargetChange_() {\n    const listeners = this.documentListeners_;\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      unlistenByKey(listeners[i]);\n    }\n    listeners.length = 0;\n\n    const map = this.getMap();\n    if (map) {\n      const doc = map.getOwnerDocument();\n      if (isFullScreenSupported(doc)) {\n        this.element.classList.remove(CLASS_UNSUPPORTED);\n      } else {\n        this.element.classList.add(CLASS_UNSUPPORTED);\n      }\n\n      for (let i = 0, ii = events.length; i < ii; ++i) {\n        listeners.push(\n          listen(doc, events[i], this.handleFullScreenChange_, this),\n        );\n      }\n      this.handleFullScreenChange_();\n    }\n  }\n}\n\n/**\n * @param {Document} doc The root document to check.\n * @return {boolean} Fullscreen is supported by the current platform.\n */\nfunction isFullScreenSupported(doc) {\n  const body = doc.body;\n  return !!(\n    body['webkitRequestFullscreen'] ||\n    (body.requestFullscreen && doc.fullscreenEnabled)\n  );\n}\n\n/**\n * @param {Document} doc The root document to check.\n * @return {boolean} Element is currently in fullscreen.\n */\nfunction isFullScreen(doc) {\n  return !!(doc['webkitIsFullScreen'] || doc.fullscreenElement);\n}\n\n/**\n * Request to fullscreen an element.\n * @param {HTMLElement} element Element to request fullscreen\n */\nfunction requestFullScreen(element) {\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element['webkitRequestFullscreen']) {\n    element['webkitRequestFullscreen']();\n  }\n}\n\n/**\n * Request to fullscreen an element with keyboard input.\n * @param {HTMLElement} element Element to request fullscreen\n */\nfunction requestFullScreenWithKeys(element) {\n  if (element['webkitRequestFullscreen']) {\n    element['webkitRequestFullscreen']();\n  } else {\n    requestFullScreen(element);\n  }\n}\n\n/**\n * Exit fullscreen.\n * @param {Document} doc The document to exit fullscren from\n */\nfunction exitFullScreen(doc) {\n  if (doc.exitFullscreen) {\n    doc.exitFullscreen();\n  } else if (doc['webkitExitFullscreen']) {\n    doc['webkitExitFullscreen']();\n  }\n}\n\nexport default FullScreen;\n","/**\n * @module ol/control/ScaleLine\n */\nimport Control from './Control.js';\nimport {CLASS_UNSELECTABLE} from '../css.js';\nimport {METERS_PER_UNIT, getPointResolution} from '../proj.js';\n\n/**\n * @type {string}\n */\nconst UNITS_PROP = 'units';\n\n/**\n * @typedef {'degrees' | 'imperial' | 'nautical' | 'metric' | 'us'} Units\n * Units for the scale line.\n */\n\n/**\n * @const\n * @type {Array<number>}\n */\nconst LEADING_DIGITS = [1, 2, 5];\n\n/**\n * @const\n * @type {number}\n */\nconst DEFAULT_DPI = 25.4 / 0.28;\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:units', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types\n *     |'change:units', Return>} ScaleLineOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className] CSS class name. The default is `ol-scale-bar` when configured with\n * `bar: true`. Otherwise the default is `ol-scale-line`.\n * @property {number} [minWidth=64] Minimum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {number} [maxWidth] Maximum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {Units} [units='metric'] Units.\n * @property {boolean} [bar=false] Render scalebars instead of a line.\n * @property {number} [steps=4] Number of steps the scalebar should use. Use even numbers\n * for best results. Only applies when `bar` is `true`.\n * @property {boolean} [text=false] Render the text scale above of the scalebar. Only applies\n * when `bar` is `true`.\n * @property {number|undefined} [dpi=undefined] dpi of output device such as printer. Only applies\n * when `bar` is `true`. If undefined the OGC default screen pixel size of 0.28mm will be assumed.\n */\n\n/**\n * @classdesc\n * A control displaying rough y-axis distances, calculated for the center of the\n * viewport. For conformal projections (e.g. EPSG:3857, the default view\n * projection in OpenLayers), the scale is valid for all directions.\n * No scale line will be shown when the y-axis distance of a pixel at the\n * viewport center cannot be calculated in the view projection.\n * By default the scale line will show in the bottom left portion of the map,\n * but this can be changed by using the css selector `.ol-scale-line`.\n * When specifying `bar` as `true`, a scalebar will be rendered instead\n * of a scaleline.\n * For cartesian measurements of the scaleline, you need to set the\n * `getPointResolution` method of your projection to simply return the input\n * value, e.g. `projection.setGetPointResolution(r => r);`\n *\n * @api\n */\nclass ScaleLine extends Control {\n  /**\n   * @param {Options} [options] Scale line options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    const element = document.createElement('div');\n    element.style.pointerEvents = 'none';\n\n    super({\n      element: element,\n      render: options.render,\n      target: options.target,\n    });\n\n    /***\n     * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ScaleLineOnSignature<void>}\n     */\n    this.un;\n\n    const className =\n      options.className !== undefined\n        ? options.className\n        : options.bar\n          ? 'ol-scale-bar'\n          : 'ol-scale-line';\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.innerElement_ = document.createElement('div');\n    this.innerElement_.className = className + '-inner';\n\n    this.element.className = className + ' ' + CLASS_UNSELECTABLE;\n    this.element.appendChild(this.innerElement_);\n\n    /**\n     * @private\n     * @type {?import(\"../View.js\").State}\n     */\n    this.viewState_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minWidth_ = options.minWidth !== undefined ? options.minWidth : 64;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.maxWidth_ = options.maxWidth;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = false;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderedWidth_ = undefined;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.renderedHTML_ = '';\n\n    this.addChangeListener(UNITS_PROP, this.handleUnitsChanged_);\n\n    this.setUnits(options.units || 'metric');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.scaleBar_ = options.bar || false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.scaleBarSteps_ = options.steps || 4;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.scaleBarText_ = options.text || false;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.dpi_ = options.dpi || undefined;\n  }\n\n  /**\n   * Return the units to use in the scale line.\n   * @return {Units} The units\n   * to use in the scale line.\n   * @observable\n   * @api\n   */\n  getUnits() {\n    return this.get(UNITS_PROP);\n  }\n\n  /**\n   * @private\n   */\n  handleUnitsChanged_() {\n    this.updateElement_();\n  }\n\n  /**\n   * Set the units to use in the scale line.\n   * @param {Units} units The units to use in the scale line.\n   * @observable\n   * @api\n   */\n  setUnits(units) {\n    this.set(UNITS_PROP, units);\n  }\n\n  /**\n   * Specify the dpi of output device such as printer.\n   * @param {number|undefined} dpi The dpi of output device.\n   * @api\n   */\n  setDpi(dpi) {\n    this.dpi_ = dpi;\n  }\n\n  /**\n   * @private\n   */\n  updateElement_() {\n    const viewState = this.viewState_;\n\n    if (!viewState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const center = viewState.center;\n    const projection = viewState.projection;\n    const units = this.getUnits();\n    const pointResolutionUnits = units == 'degrees' ? 'degrees' : 'm';\n    let pointResolution = getPointResolution(\n      projection,\n      viewState.resolution,\n      center,\n      pointResolutionUnits,\n    );\n\n    const minWidth =\n      (this.minWidth_ * (this.dpi_ || DEFAULT_DPI)) / DEFAULT_DPI;\n\n    const maxWidth =\n      this.maxWidth_ !== undefined\n        ? (this.maxWidth_ * (this.dpi_ || DEFAULT_DPI)) / DEFAULT_DPI\n        : undefined;\n\n    let nominalCount = minWidth * pointResolution;\n    let suffix = '';\n    if (units == 'degrees') {\n      const metersPerDegree = METERS_PER_UNIT.degrees;\n      nominalCount *= metersPerDegree;\n      if (nominalCount < metersPerDegree / 60) {\n        suffix = '\\u2033'; // seconds\n        pointResolution *= 3600;\n      } else if (nominalCount < metersPerDegree) {\n        suffix = '\\u2032'; // minutes\n        pointResolution *= 60;\n      } else {\n        suffix = '\\u00b0'; // degrees\n      }\n    } else if (units == 'imperial') {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution /= 0.0254;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.3048;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.344;\n      }\n    } else if (units == 'nautical') {\n      pointResolution /= 1852;\n      suffix = 'NM';\n    } else if (units == 'metric') {\n      if (nominalCount < 1e-6) {\n        suffix = 'nm';\n        pointResolution *= 1e9;\n      } else if (nominalCount < 0.001) {\n        suffix = 'm';\n        pointResolution *= 1000000;\n      } else if (nominalCount < 1) {\n        suffix = 'mm';\n        pointResolution *= 1000;\n      } else if (nominalCount < 1000) {\n        suffix = 'm';\n      } else {\n        suffix = 'km';\n        pointResolution /= 1000;\n      }\n    } else if (units == 'us') {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution *= 39.37;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.30480061;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.3472;\n      }\n    } else {\n      throw new Error('Invalid units');\n    }\n\n    let i = 3 * Math.floor(Math.log(minWidth * pointResolution) / Math.log(10));\n    let count, width, decimalCount;\n    let previousCount, previousWidth, previousDecimalCount;\n    while (true) {\n      decimalCount = Math.floor(i / 3);\n      const decimal = Math.pow(10, decimalCount);\n      count = LEADING_DIGITS[((i % 3) + 3) % 3] * decimal;\n      width = Math.round(count / pointResolution);\n      if (isNaN(width)) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n        return;\n      }\n      if (maxWidth !== undefined && width >= maxWidth) {\n        count = previousCount;\n        width = previousWidth;\n        decimalCount = previousDecimalCount;\n        break;\n      } else if (width >= minWidth) {\n        break;\n      }\n      previousCount = count;\n      previousWidth = width;\n      previousDecimalCount = decimalCount;\n      ++i;\n    }\n    const html = this.scaleBar_\n      ? this.createScaleBar(width, count, suffix)\n      : count.toFixed(decimalCount < 0 ? -decimalCount : 0) + ' ' + suffix;\n\n    if (this.renderedHTML_ != html) {\n      this.innerElement_.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n\n    if (this.renderedWidth_ != width) {\n      this.innerElement_.style.width = width + 'px';\n      this.renderedWidth_ = width;\n    }\n\n    if (!this.renderedVisible_) {\n      this.element.style.display = '';\n      this.renderedVisible_ = true;\n    }\n  }\n\n  /**\n   * @private\n   * @param {number} width The current width of the scalebar.\n   * @param {number} scale The current scale.\n   * @param {string} suffix The suffix to append to the scale text.\n   * @return {string} The stringified HTML of the scalebar.\n   */\n  createScaleBar(width, scale, suffix) {\n    const resolutionScale = this.getScaleForResolution();\n    const mapScale =\n      resolutionScale < 1\n        ? Math.round(1 / resolutionScale).toLocaleString() + ' : 1'\n        : '1 : ' + Math.round(resolutionScale).toLocaleString();\n    const steps = this.scaleBarSteps_;\n    const stepWidth = width / steps;\n    const scaleSteps = [this.createMarker('absolute')];\n    for (let i = 0; i < steps; ++i) {\n      const cls =\n        i % 2 === 0 ? 'ol-scale-singlebar-odd' : 'ol-scale-singlebar-even';\n      scaleSteps.push(\n        '<div>' +\n          '<div ' +\n          `class=\"ol-scale-singlebar ${cls}\" ` +\n          `style=\"width: ${stepWidth}px;\"` +\n          '>' +\n          '</div>' +\n          this.createMarker('relative') +\n          // render text every second step, except when only 2 steps\n          (i % 2 === 0 || steps === 2\n            ? this.createStepText(i, width, false, scale, suffix)\n            : '') +\n          '</div>',\n      );\n    }\n    // render text at the end\n    scaleSteps.push(this.createStepText(steps, width, true, scale, suffix));\n\n    const scaleBarText = this.scaleBarText_\n      ? `<div class=\"ol-scale-text\" style=\"width: ${width}px;\">` +\n        mapScale +\n        '</div>'\n      : '';\n    return scaleBarText + scaleSteps.join('');\n  }\n\n  /**\n   * Creates a marker at given position\n   * @param {'absolute'|'relative'} position The position, absolute or relative\n   * @return {string} The stringified div containing the marker\n   */\n  createMarker(position) {\n    const top = position === 'absolute' ? 3 : -10;\n    return (\n      '<div ' +\n      'class=\"ol-scale-step-marker\" ' +\n      `style=\"position: ${position}; top: ${top}px;\"` +\n      '></div>'\n    );\n  }\n\n  /**\n   * Creates the label for a marker marker at given position\n   * @param {number} i The iterator\n   * @param {number} width The width the scalebar will currently use\n   * @param {boolean} isLast Flag indicating if we add the last step text\n   * @param {number} scale The current scale for the whole scalebar\n   * @param {string} suffix The suffix for the scale\n   * @return {string} The stringified div containing the step text\n   */\n  createStepText(i, width, isLast, scale, suffix) {\n    const length =\n      i === 0 ? 0 : Math.round((scale / this.scaleBarSteps_) * i * 100) / 100;\n    const lengthString = length + (i === 0 ? '' : ' ' + suffix);\n    const margin = i === 0 ? -3 : (width / this.scaleBarSteps_) * -1;\n    const minWidth = i === 0 ? 0 : (width / this.scaleBarSteps_) * 2;\n    return (\n      '<div ' +\n      'class=\"ol-scale-step-text\" ' +\n      'style=\"' +\n      `margin-left: ${margin}px;` +\n      `text-align: ${i === 0 ? 'left' : 'center'};` +\n      `min-width: ${minWidth}px;` +\n      `left: ${isLast ? width + 'px' : 'unset'};` +\n      '\">' +\n      lengthString +\n      '</div>'\n    );\n  }\n\n  /**\n   * Returns the appropriate scale for the given resolution and units.\n   * @return {number} The appropriate scale.\n   */\n  getScaleForResolution() {\n    const resolution = getPointResolution(\n      this.viewState_.projection,\n      this.viewState_.resolution,\n      this.viewState_.center,\n      'm',\n    );\n    const dpi = this.dpi_ || DEFAULT_DPI;\n    const inchesPerMeter = 1000 / 25.4;\n    return resolution * inchesPerMeter * dpi;\n  }\n\n  /**\n   * Update the scale line element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n  render(mapEvent) {\n    const frameState = mapEvent.frameState;\n    if (!frameState) {\n      this.viewState_ = null;\n    } else {\n      this.viewState_ = frameState.viewState;\n    }\n    this.updateElement_();\n  }\n}\n\nexport default ScaleLine;\n","/**\n * @module ol/control/Attribution\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport {CLASS_COLLAPSED, CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {equals} from '../array.js';\nimport {removeChildren, replaceNode} from '../dom.js';\nimport {toPromise} from '../functions.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {HTMLElement|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible] Specify if attributions can\n * be collapsed. If not specified, sources control this behavior with their\n * `attributionsCollapsible` setting.\n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string|HTMLElement} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [expandClassName=className + '-expand'] CSS class name for the\n * collapsed attributions button.\n * @property {string|HTMLElement} [collapseLabel=''] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [collapseClassName=className + '-collapse'] CSS class name for the\n * expanded attributions button.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @api\n */\nclass Attribution extends Control {\n  /**\n   * @param {Options} [options] Attribution options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render,\n      target: options.target,\n    });\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.ulElement_ = document.createElement('ul');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsed_ =\n      options.collapsed !== undefined ? options.collapsed : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.userCollapsed_ = this.collapsed_;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overrideCollapsible_ = options.collapsible !== undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsible_ =\n      options.collapsible !== undefined ? options.collapsible : true;\n\n    if (!this.collapsible_) {\n      this.collapsed_ = false;\n    }\n\n    const className =\n      options.className !== undefined ? options.className : 'ol-attribution';\n\n    const tipLabel =\n      options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n\n    const expandClassName =\n      options.expandClassName !== undefined\n        ? options.expandClassName\n        : className + '-expand';\n\n    const collapseLabel =\n      options.collapseLabel !== undefined ? options.collapseLabel : '\\u203A';\n\n    const collapseClassName =\n      options.collapseClassName !== undefined\n        ? options.collapseClassName\n        : className + '-collapse';\n\n    if (typeof collapseLabel === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.collapseLabel_ = document.createElement('span');\n      this.collapseLabel_.textContent = collapseLabel;\n      this.collapseLabel_.className = collapseClassName;\n    } else {\n      this.collapseLabel_ = collapseLabel;\n    }\n\n    const label = options.label !== undefined ? options.label : 'i';\n\n    if (typeof label === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.label_ = document.createElement('span');\n      this.label_.textContent = label;\n      this.label_.className = expandClassName;\n    } else {\n      this.label_ = label;\n    }\n\n    const activeLabel =\n      this.collapsible_ && !this.collapsed_ ? this.collapseLabel_ : this.label_;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.toggleButton_ = document.createElement('button');\n    this.toggleButton_.setAttribute('type', 'button');\n    this.toggleButton_.setAttribute('aria-expanded', String(!this.collapsed_));\n    this.toggleButton_.title = tipLabel;\n    this.toggleButton_.appendChild(activeLabel);\n\n    this.toggleButton_.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this),\n      false,\n    );\n\n    const cssClasses =\n      className +\n      ' ' +\n      CLASS_UNSELECTABLE +\n      ' ' +\n      CLASS_CONTROL +\n      (this.collapsed_ && this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n      (this.collapsible_ ? '' : ' ol-uncollapsible');\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(this.toggleButton_);\n    element.appendChild(this.ulElement_);\n\n    /**\n     * A list of currently rendered resolutions.\n     * @type {Array<string>}\n     * @private\n     */\n    this.renderedAttributions_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n  }\n\n  /**\n   * Collect a list of visible attributions and set the collapsible state.\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   * @return {Array<string>} Attributions.\n   * @private\n   */\n  collectSourceAttributions_(frameState) {\n    const visibleAttributions = Array.from(\n      new Set(\n        this.getMap()\n          .getAllLayers()\n          .flatMap((layer) => layer.getAttributions(frameState)),\n      ),\n    );\n\n    const collapsible = !this.getMap()\n      .getAllLayers()\n      .some(\n        (layer) =>\n          layer.getSource() &&\n          layer.getSource().getAttributionsCollapsible() === false,\n      );\n    if (!this.overrideCollapsible_) {\n      this.setCollapsible(collapsible);\n    }\n    return visibleAttributions;\n  }\n\n  /**\n   * @private\n   * @param {?import(\"../Map.js\").FrameState} frameState Frame state.\n   */\n  async updateElement_(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const attributions = await Promise.all(\n      this.collectSourceAttributions_(frameState).map((attribution) =>\n        toPromise(() => attribution),\n      ),\n    );\n\n    const visible = attributions.length > 0;\n    if (this.renderedVisible_ != visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.renderedVisible_ = visible;\n    }\n\n    if (equals(attributions, this.renderedAttributions_)) {\n      return;\n    }\n\n    removeChildren(this.ulElement_);\n\n    // append the attributions\n    for (let i = 0, ii = attributions.length; i < ii; ++i) {\n      const element = document.createElement('li');\n      element.innerHTML = attributions[i];\n      this.ulElement_.appendChild(element);\n    }\n\n    this.renderedAttributions_ = attributions;\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleToggle_();\n    this.userCollapsed_ = this.collapsed_;\n  }\n\n  /**\n   * @private\n   */\n  handleToggle_() {\n    this.element.classList.toggle(CLASS_COLLAPSED);\n    if (this.collapsed_) {\n      replaceNode(this.collapseLabel_, this.label_);\n    } else {\n      replaceNode(this.label_, this.collapseLabel_);\n    }\n    this.collapsed_ = !this.collapsed_;\n    this.toggleButton_.setAttribute('aria-expanded', String(!this.collapsed_));\n  }\n\n  /**\n   * Return `true` if the attribution is collapsible, `false` otherwise.\n   * @return {boolean} True if the widget is collapsible.\n   * @api\n   */\n  getCollapsible() {\n    return this.collapsible_;\n  }\n\n  /**\n   * Set whether the attribution should be collapsible.\n   * @param {boolean} collapsible True if the widget is collapsible.\n   * @api\n   */\n  setCollapsible(collapsible) {\n    if (this.collapsible_ === collapsible) {\n      return;\n    }\n    this.collapsible_ = collapsible;\n    this.element.classList.toggle('ol-uncollapsible');\n    if (this.userCollapsed_) {\n      this.handleToggle_();\n    }\n  }\n\n  /**\n   * Collapse or expand the attribution according to the passed parameter. Will\n   * not do anything if the attribution isn't collapsible or if the current\n   * collapsed state is already the one requested.\n   * @param {boolean} collapsed True if the widget is collapsed.\n   * @api\n   */\n  setCollapsed(collapsed) {\n    this.userCollapsed_ = collapsed;\n    if (!this.collapsible_ || this.collapsed_ === collapsed) {\n      return;\n    }\n    this.handleToggle_();\n  }\n\n  /**\n   * Return `true` when the attribution is currently collapsed or `false`\n   * otherwise.\n   * @return {boolean} True if the widget is collapsed.\n   * @api\n   */\n  getCollapsed() {\n    return this.collapsed_;\n  }\n\n  /**\n   * Update the attribution element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n  render(mapEvent) {\n    this.updateElement_(mapEvent.frameState);\n  }\n}\n\nexport default Attribution;\n","/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport {CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label=''] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {string} [compassClassName='ol-compass'] CSS class name for the compass.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function():void} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nclass Rotate extends Control {\n  /**\n   * @param {Options} [options] Rotate options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render,\n      target: options.target,\n    });\n\n    const className =\n      options.className !== undefined ? options.className : 'ol-rotate';\n\n    const label = options.label !== undefined ? options.label : '\\u21E7';\n\n    const compassClassName =\n      options.compassClassName !== undefined\n        ? options.compassClassName\n        : 'ol-compass';\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = compassClassName;\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add(compassClassName);\n    }\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n    const button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n\n    button.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this),\n      false,\n    );\n\n    const cssClasses =\n      className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetNorth_() {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    const rotation = view.getRotation();\n    if (rotation !== undefined) {\n      if (this.duration_ > 0 && rotation % (2 * Math.PI) !== 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut,\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  }\n\n  /**\n   * Update the rotate control element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n  render(mapEvent) {\n    const frameState = mapEvent.frameState;\n    if (!frameState) {\n      return;\n    }\n    const rotation = frameState.viewState.rotation;\n    if (rotation != this.rotation_) {\n      const transform = 'rotate(' + rotation + 'rad)';\n      if (this.autoHide_) {\n        const contains = this.element.classList.contains(CLASS_HIDDEN);\n        if (!contains && rotation === 0) {\n          this.element.classList.add(CLASS_HIDDEN);\n        } else if (contains && rotation !== 0) {\n          this.element.classList.remove(CLASS_HIDDEN);\n        }\n      }\n      this.label_.style.transform = transform;\n    }\n    this.rotation_ = rotation;\n  }\n}\n\nexport default Rotate;\n","/**\n * @module ol/control/Zoom\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string} [zoomInClassName=className + '-in'] CSS class name for the zoom-in button.\n * @property {string} [zoomOutClassName=className + '-out'] CSS class name for the zoom-out button.\n * @property {string|HTMLElement} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [zoomOutLabel=''] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @api\n */\nclass Zoom extends Control {\n  /**\n   * @param {Options} [options] Zoom options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      element: document.createElement('div'),\n      target: options.target,\n    });\n\n    const className =\n      options.className !== undefined ? options.className : 'ol-zoom';\n\n    const delta = options.delta !== undefined ? options.delta : 1;\n\n    const zoomInClassName =\n      options.zoomInClassName !== undefined\n        ? options.zoomInClassName\n        : className + '-in';\n\n    const zoomOutClassName =\n      options.zoomOutClassName !== undefined\n        ? options.zoomOutClassName\n        : className + '-out';\n\n    const zoomInLabel =\n      options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n    const zoomOutLabel =\n      options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2013';\n\n    const zoomInTipLabel =\n      options.zoomInTipLabel !== undefined ? options.zoomInTipLabel : 'Zoom in';\n    const zoomOutTipLabel =\n      options.zoomOutTipLabel !== undefined\n        ? options.zoomOutTipLabel\n        : 'Zoom out';\n\n    const inElement = document.createElement('button');\n    inElement.className = zoomInClassName;\n    inElement.setAttribute('type', 'button');\n    inElement.title = zoomInTipLabel;\n    inElement.appendChild(\n      typeof zoomInLabel === 'string'\n        ? document.createTextNode(zoomInLabel)\n        : zoomInLabel,\n    );\n\n    inElement.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this, delta),\n      false,\n    );\n\n    const outElement = document.createElement('button');\n    outElement.className = zoomOutClassName;\n    outElement.setAttribute('type', 'button');\n    outElement.title = zoomOutTipLabel;\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string'\n        ? document.createTextNode(zoomOutLabel)\n        : zoomOutLabel,\n    );\n\n    outElement.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this, -delta),\n      false,\n    );\n\n    const cssClasses =\n      className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(inElement);\n    element.appendChild(outElement);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(delta, event) {\n    event.preventDefault();\n    this.zoomByDelta_(delta);\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  zoomByDelta_(delta) {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    const currentZoom = view.getZoom();\n    if (currentZoom !== undefined) {\n      const newZoom = view.getConstrainedZoom(currentZoom + delta);\n      if (this.duration_ > 0) {\n        if (view.getAnimating()) {\n          view.cancelAnimations();\n        }\n        view.animate({\n          zoom: newZoom,\n          duration: this.duration_,\n          easing: easeOut,\n        });\n      } else {\n        view.setZoom(newZoom);\n      }\n    }\n  }\n}\n\nexport default Zoom;\n","/**\n * @module ol/control/defaults\n */\nimport Attribution from './Attribution.js';\nimport Collection from '../Collection.js';\nimport Rotate from './Rotate.js';\nimport Zoom from './Zoom.js';\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {import(\"./Attribution.js\").Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {import(\"./Rotate.js\").Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {import(\"./Zoom.js\").Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n */\n\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {DefaultsOptions} [options] Options for the default controls.\n * @return {Collection<import(\"./Control.js\").default>} A collection of controls\n * to be used with the {@link module:ol/Map~Map} constructor's `controls` option.\n * @api\n */\nexport function defaults(options) {\n  options = options ? options : {};\n\n  /** @type {Collection<import(\"./Control.js\").default>} */\n  const controls = new Collection();\n\n  const zoomControl = options.zoom !== undefined ? options.zoom : true;\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions));\n  }\n\n  const rotateControl = options.rotate !== undefined ? options.rotate : true;\n  if (rotateControl) {\n    controls.push(new Rotate(options.rotateOptions));\n  }\n\n  const attributionControl =\n    options.attribution !== undefined ? options.attribution : true;\n  if (attributionControl) {\n    controls.push(new Attribution(options.attributionOptions));\n  }\n\n  return controls;\n}\n","/**\n * @module ol/css\n */\n\n/**\n * @typedef {Object} FontParameters\n * @property {string} style Style.\n * @property {string} variant Variant.\n * @property {string} weight Weight.\n * @property {string} size Size.\n * @property {string} lineHeight LineHeight.\n * @property {string} family Family.\n * @property {Array<string>} families Families.\n */\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n/**\n * From https://stackoverflow.com/questions/10135697/regex-to-parse-any-css-font\n * @type {RegExp}\n */\nconst fontRegEx = new RegExp(\n  [\n    '^\\\\s*(?=(?:(?:[-a-z]+\\\\s*){0,2}(italic|oblique))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(small-caps))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)',\n    '(?:(?:normal|\\\\1|\\\\2|\\\\3)\\\\s*){0,3}((?:xx?-)?',\n    '(?:small|large)|medium|smaller|larger|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx]))',\n    '(?:\\\\s*\\\\/\\\\s*(normal|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx])?))',\n    '?\\\\s*([-,\\\\\"\\\\\\'\\\\sa-z]+?)\\\\s*$',\n  ].join(''),\n  'i',\n);\n/** @type {Array<'style'|'variant'|'weight'|'size'|'lineHeight'|'family'>} */\nconst fontRegExMatchIndex = [\n  'style',\n  'variant',\n  'weight',\n  'size',\n  'lineHeight',\n  'family',\n];\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} fontSpec The CSS font property.\n * @return {FontParameters|null} The font parameters (or null if the input spec is invalid).\n */\nexport const getFontParameters = function (fontSpec) {\n  const match = fontSpec.match(fontRegEx);\n  if (!match) {\n    return null;\n  }\n  const style = /** @type {FontParameters} */ ({\n    lineHeight: 'normal',\n    size: '1.2em',\n    style: 'normal',\n    weight: 'normal',\n    variant: 'normal',\n  });\n  for (let i = 0, ii = fontRegExMatchIndex.length; i < ii; ++i) {\n    const value = match[i + 1];\n    if (value !== undefined) {\n      style[fontRegExMatchIndex[i]] = value;\n    }\n  }\n  style.families = style.family.split(/,\\s?/);\n  return style;\n};\n","import {WORKER_OFFSCREEN_CANVAS} from './has.js';\n\n/**\n * @module ol/dom\n */\n\n//FIXME Move this function to the canvas module\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number} [width] Canvas width.\n * @param {number} [height] Canvas height.\n * @param {Array<HTMLCanvasElement>} [canvasPool] Canvas pool to take existing canvas from.\n * @param {CanvasRenderingContext2DSettings} [settings] CanvasRenderingContext2DSettings\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(width, height, canvasPool, settings) {\n  /** @type {HTMLCanvasElement|OffscreenCanvas} */\n  let canvas;\n  if (canvasPool && canvasPool.length) {\n    canvas = /** @type {HTMLCanvasElement} */ (canvasPool.shift());\n  } else if (WORKER_OFFSCREEN_CANVAS) {\n    canvas = new OffscreenCanvas(width || 300, height || 300);\n  } else {\n    canvas = document.createElement('canvas');\n  }\n  if (width) {\n    canvas.width = width;\n  }\n  if (height) {\n    canvas.height = height;\n  }\n  //FIXME Allow OffscreenCanvasRenderingContext2D as return type\n  return /** @type {CanvasRenderingContext2D} */ (\n    canvas.getContext('2d', settings)\n  );\n}\n\n/** @type {CanvasRenderingContext2D} */\nlet sharedCanvasContext;\n\n/**\n * @return {CanvasRenderingContext2D} Shared canvas context.\n */\nexport function getSharedCanvasContext2D() {\n  if (!sharedCanvasContext) {\n    sharedCanvasContext = createCanvasContext2D(1, 1);\n  }\n  return sharedCanvasContext;\n}\n\n/**\n * Releases canvas memory to avoid exceeding memory limits in Safari.\n * See https://pqina.nl/blog/total-canvas-memory-use-exceeds-the-maximum-limit/\n * @param {CanvasRenderingContext2D} context Context.\n */\nexport function releaseCanvas(context) {\n  const canvas = context.canvas;\n  canvas.width = 1;\n  canvas.height = 1;\n  context.clearRect(0, 0, 1, 1);\n}\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @return {Node|null} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n  const oldChildren = node.childNodes;\n\n  for (let i = 0; true; ++i) {\n    const oldChild = oldChildren[i];\n    const newChild = children[i];\n\n    // check if our work is done\n    if (!oldChild && !newChild) {\n      break;\n    }\n\n    // check if children match\n    if (oldChild === newChild) {\n      continue;\n    }\n\n    // check if a new child needs to be added\n    if (!oldChild) {\n      node.appendChild(newChild);\n      continue;\n    }\n\n    // check if an old child needs to be removed\n    if (!newChild) {\n      node.removeChild(oldChild);\n      --i;\n      continue;\n    }\n\n    // reorder\n    node.insertBefore(newChild, oldChild);\n  }\n}\n","/**\n * @module ol/easing\n */\n\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n  return Math.pow(t, 3);\n}\n\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n  return 1 - easeIn(1 - t);\n}\n\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n  return 3 * t * t - 2 * t * t * t;\n}\n\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n  return t;\n}\n\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing.inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n  if (t < 0.5) {\n    return inAndOut(2 * t);\n  }\n  return 1 - inAndOut(2 * (t - 0.5));\n}\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n/**\n * Key to use with {@link module:ol/Observable.unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener Listener.\n * @property {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @property {string} type Type.\n * @api\n */\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n/**\n * @typedef {Object} ListenerObject\n * @property {ListenerFunction} handleEvent HandleEvent listener function.\n */\n\n/**\n * @typedef {ListenerFunction|ListenerObject} Listener\n */\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events.unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean} [once] If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, thisArg, once) {\n  if (thisArg && thisArg !== target) {\n    listener = listener.bind(thisArg);\n  }\n  if (once) {\n    const originalListener = listener;\n    listener = function () {\n      target.removeEventListener(type, listener);\n      originalListener.apply(this, arguments);\n    };\n  }\n  const eventsKey = {\n    target: target,\n    type: type,\n    listener: listener,\n  };\n  target.addEventListener(type, listener);\n  return eventsKey;\n}\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events.unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, thisArg) {\n  return listen(target, type, listener, thisArg, true);\n}\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events.listen} or {@link module:ol/events.listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.listener);\n    clear(key);\n  }\n}\n","/**\n * @module ol/events/Event\n */\n\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nclass BaseEvent {\n  /**\n   * @param {string} type Type.\n   */\n  constructor(type) {\n    /**\n     * @type {boolean}\n     */\n    this.propagationStopped;\n\n    /**\n     * @type {boolean}\n     */\n    this.defaultPrevented;\n\n    /**\n     * The event type.\n     * @type {string}\n     * @api\n     */\n    this.type = type;\n\n    /**\n     * The event target.\n     * @type {Object}\n     * @api\n     */\n    this.target = null;\n  }\n\n  /**\n   * Prevent default. This means that no emulated `click`, `singleclick` or `doubleclick` events\n   * will be fired.\n   * @api\n   */\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default BaseEvent;\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~BaseEvent#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  /**\n   * Generic error event. Triggered when an error occurs.\n   * @event module:ol/events/Event~BaseEvent#error\n   * @api\n   */\n  ERROR: 'error',\n\n  BLUR: 'blur',\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  FOCUS: 'focus',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  RESIZE: 'resize',\n  TOUCHMOVE: 'touchmove',\n  WHEEL: 'wheel',\n};\n","/**\n * @module ol/events/Key\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  LEFT: 'ArrowLeft',\n  UP: 'ArrowUp',\n  RIGHT: 'ArrowRight',\n  DOWN: 'ArrowDown',\n};\n","/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport Event from './Event.js';\nimport {VOID} from '../functions.js';\nimport {clear} from '../obj.js';\n\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nclass Target extends Disposable {\n  /**\n   * @param {*} [target] Default event target for dispatched events.\n   */\n  constructor(target) {\n    super();\n\n    /**\n     * @private\n     * @type {*}\n     */\n    this.eventTarget_ = target;\n\n    /**\n     * @private\n     * @type {Object<string, number>|null}\n     */\n    this.pendingRemovals_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, number>|null}\n     */\n    this.dispatching_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").Listener>>|null}\n     */\n    this.listeners_ = null;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  addEventListener(type, listener) {\n    if (!type || !listener) {\n      return;\n    }\n    const listeners = this.listeners_ || (this.listeners_ = {});\n    const listenersForType = listeners[type] || (listeners[type] = []);\n    if (!listenersForType.includes(listener)) {\n      listenersForType.push(listener);\n    }\n  }\n\n  /**\n   * Dispatches an event and calls all listeners listening for events\n   * of this type. The event parameter can either be a string or an\n   * Object with a `type` property.\n   *\n   * @param {import(\"./Event.js\").default|string} event Event object.\n   * @return {boolean|undefined} `false` if anyone called preventDefault on the\n   *     event object or if any of the listeners returned false.\n   * @api\n   */\n  dispatchEvent(event) {\n    const isString = typeof event === 'string';\n    const type = isString ? event : event.type;\n    const listeners = this.listeners_ && this.listeners_[type];\n    if (!listeners) {\n      return;\n    }\n\n    const evt = isString ? new Event(event) : /** @type {Event} */ (event);\n    if (!evt.target) {\n      evt.target = this.eventTarget_ || this;\n    }\n    const dispatching = this.dispatching_ || (this.dispatching_ = {});\n    const pendingRemovals =\n      this.pendingRemovals_ || (this.pendingRemovals_ = {});\n    if (!(type in dispatching)) {\n      dispatching[type] = 0;\n      pendingRemovals[type] = 0;\n    }\n    ++dispatching[type];\n    let propagate;\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      if ('handleEvent' in listeners[i]) {\n        propagate = /** @type {import(\"../events.js\").ListenerObject} */ (\n          listeners[i]\n        ).handleEvent(evt);\n      } else {\n        propagate = /** @type {import(\"../events.js\").ListenerFunction} */ (\n          listeners[i]\n        ).call(this, evt);\n      }\n      if (propagate === false || evt.propagationStopped) {\n        propagate = false;\n        break;\n      }\n    }\n    if (--dispatching[type] === 0) {\n      let pr = pendingRemovals[type];\n      delete pendingRemovals[type];\n      while (pr--) {\n        this.removeEventListener(type, VOID);\n      }\n      delete dispatching[type];\n    }\n    return propagate;\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    this.listeners_ && clear(this.listeners_);\n  }\n\n  /**\n   * Get the listeners for a specified event type. Listeners are returned in the\n   * order that they will be called in.\n   *\n   * @param {string} type Type.\n   * @return {Array<import(\"../events.js\").Listener>|undefined} Listeners.\n   */\n  getListeners(type) {\n    return (this.listeners_ && this.listeners_[type]) || undefined;\n  }\n\n  /**\n   * @param {string} [type] Type. If not provided,\n   *     `true` will be returned if this event target has any listeners.\n   * @return {boolean} Has listeners.\n   */\n  hasListener(type) {\n    if (!this.listeners_) {\n      return false;\n    }\n    return type\n      ? type in this.listeners_\n      : Object.keys(this.listeners_).length > 0;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  removeEventListener(type, listener) {\n    if (!this.listeners_) {\n      return;\n    }\n    const listeners = this.listeners_[type];\n    if (!listeners) {\n      return;\n    }\n    const index = listeners.indexOf(listener);\n    if (index !== -1) {\n      if (this.pendingRemovals_ && type in this.pendingRemovals_) {\n        // make listener a no-op, and remove later in #dispatchEvent()\n        listeners[index] = VOID;\n        ++this.pendingRemovals_[type];\n      } else {\n        listeners.splice(index, 1);\n        if (listeners.length === 0) {\n          delete this.listeners_[type];\n        }\n      }\n    }\n  }\n}\n\nexport default Target;\n","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport {FALSE, TRUE} from '../functions.js';\nimport {MAC, WEBKIT} from '../has.js';\nimport {assert} from '../asserts.js';\n\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default): boolean} Condition\n */\n\n/**\n * Creates a condition function that passes when all provided conditions pass.\n * @param {...Condition} var_args Conditions to check.\n * @return {Condition} Condition function.\n */\nexport function all(var_args) {\n  const conditions = arguments;\n  /**\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @return {boolean} All conditions passed.\n   */\n  return function (event) {\n    let pass = true;\n    for (let i = 0, ii = conditions.length; i < ii; ++i) {\n      pass = pass && conditions[i](event);\n      if (!pass) {\n        break;\n      }\n    }\n    return pass;\n  };\n}\n\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport const altKeyOnly = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    originalEvent.altKey &&\n    !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport const altShiftKeysOnly = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    originalEvent.altKey &&\n    !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n    originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport const focus = function (event) {\n  const targetElement = event.map.getTargetElement();\n  const activeElement = event.map.getOwnerDocument().activeElement;\n  return targetElement.contains(activeElement);\n};\n\n/**\n * Return `true` if the map has the focus or no 'tabindex' attribute set.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map container has the focus or no 'tabindex' attribute.\n */\nexport const focusWithTabindex = function (event) {\n  return event.map.getTargetElement().hasAttribute('tabindex')\n    ? focus(event)\n    : true;\n};\n\n/**\n * Return always true.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @api\n */\nexport const always = TRUE;\n\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport const click = function (mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport const mouseActionButton = function (mapBrowserEvent) {\n  const originalEvent = /** @type {MouseEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return originalEvent.button == 0 && !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n\n/**\n * Return always false.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @api\n */\nexport const never = FALSE;\n\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport const pointerMove = function (mapBrowserEvent) {\n  return mapBrowserEvent.type == 'pointermove';\n};\n\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport const singleClick = function (mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport const doubleClick = function (mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport const noModifierKeys = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    !originalEvent.altKey &&\n    !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport const platformModifierKeyOnly = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    !originalEvent.altKey &&\n    (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the platform modifier key is pressed.\n * @api\n */\nexport const platformModifierKey = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return MAC ? originalEvent.metaKey : originalEvent.ctrlKey;\n};\n\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport const shiftKeyOnly = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    !originalEvent.altKey &&\n    !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n    originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if the target element is not editable, i.e. not an `input`,\n * `select`, or `textarea` element and no `contenteditable` attribute is\n * set or inherited, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport const targetNotEditable = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  const tagName = /** @type {Element} */ (originalEvent.target).tagName;\n  return (\n    tagName !== 'INPUT' &&\n    tagName !== 'SELECT' &&\n    tagName !== 'TEXTAREA' &&\n    // `isContentEditable` is only available on `HTMLElement`, but it may also be a\n    // different type like `SVGElement`.\n    // @ts-ignore\n    !originalEvent.target.isContentEditable\n  );\n};\n\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport const mouseOnly = function (mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserEvent\").default} */ (\n    mapBrowserEvent\n  ).originalEvent;\n  assert(\n    pointerEvent !== undefined,\n    'mapBrowserEvent must originate from a pointer event',\n  );\n  // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvent.pointerType == 'mouse';\n};\n\n/**\n * Return `true` if the event originates from a touchable device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a touchable device.\n * @api\n */\nexport const touchOnly = function (mapBrowserEvent) {\n  const pointerEvt = /** @type {import(\"../MapBrowserEvent\").default} */ (\n    mapBrowserEvent\n  ).originalEvent;\n  assert(\n    pointerEvt !== undefined,\n    'mapBrowserEvent must originate from a pointer event',\n  );\n  // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvt.pointerType === 'touch';\n};\n\n/**\n * Return `true` if the event originates from a digital pen.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a digital pen.\n * @api\n */\nexport const penOnly = function (mapBrowserEvent) {\n  const pointerEvt = /** @type {import(\"../MapBrowserEvent\").default} */ (\n    mapBrowserEvent\n  ).originalEvent;\n  assert(\n    pointerEvt !== undefined,\n    'mapBrowserEvent must originate from a pointer event',\n  );\n  // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvt.pointerType === 'pen';\n};\n\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * See https://www.w3.org/TR/pointerevents/#button-states.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport const primaryAction = function (mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserEvent\").default} */ (\n    mapBrowserEvent\n  ).originalEvent;\n  assert(\n    pointerEvent !== undefined,\n    'mapBrowserEvent must originate from a pointer event',\n  );\n  return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n","/**\n * @module ol/expr/cpu\n */\n\nimport {\n  ColorType,\n  LiteralExpression,\n  Ops,\n  overlapsType,\n  parse,\n  typeName,\n} from './expression.js';\nimport {\n  fromString,\n  lchaToRgba,\n  normalize,\n  rgbaToLcha,\n  toString,\n  withAlpha,\n} from '../color.js';\n\n/**\n * @fileoverview This module includes functions to build expressions for evaluation on the CPU.\n * Building is composed of two steps: parsing and compiling.  The parsing step takes an encoded\n * expression and returns an instance of one of the expression classes.  The compiling step takes\n * the expression instance and returns a function that can be evaluated in to return a literal\n * value.  The evaluator function should do as little allocation and work as possible.\n */\n\n/**\n * @typedef {Object} EvaluationContext\n * @property {Object} properties The values for properties used in 'get' expressions.\n * @property {Object} variables The values for variables used in 'var' expressions.\n * @property {number} resolution The map resolution.\n * @property {string|number|null} featureId The feature id.\n * @property {string} geometryType Geometry type of the current object.\n */\n\n/**\n * @return {EvaluationContext} A new evaluation context.\n */\nexport function newEvaluationContext() {\n  return {\n    variables: {},\n    properties: {},\n    resolution: NaN,\n    featureId: null,\n    geometryType: '',\n  };\n}\n\n/**\n * @typedef {function(EvaluationContext):import(\"./expression.js\").LiteralValue} ExpressionEvaluator\n */\n\n/**\n * @typedef {function(EvaluationContext):boolean} BooleanEvaluator\n */\n\n/**\n * @typedef {function(EvaluationContext):number} NumberEvaluator\n */\n\n/**\n * @typedef {function(EvaluationContext):string} StringEvaluator\n */\n\n/**\n * @typedef {function(EvaluationContext):(Array<number>|string)} ColorLikeEvaluator\n */\n\n/**\n * @typedef {function(EvaluationContext):Array<number>} NumberArrayEvaluator\n */\n\n/**\n * @typedef {function(EvaluationContext):Array<number>} CoordinateEvaluator\n */\n\n/**\n * @typedef {function(EvaluationContext):(Array<number>)} SizeEvaluator\n */\n\n/**\n * @typedef {function(EvaluationContext):(Array<number>|number)} SizeLikeEvaluator\n */\n\n/**\n * @param {import('./expression.js').EncodedExpression} encoded The encoded expression.\n * @param {number} type The expected type.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {ExpressionEvaluator} The expression evaluator.\n */\nexport function buildExpression(encoded, type, context) {\n  const expression = parse(encoded, context);\n  if (!overlapsType(type, expression.type)) {\n    const expected = typeName(type);\n    const actual = typeName(expression.type);\n    throw new Error(\n      `Expected expression to be of type ${expected}, got ${actual}`,\n    );\n  }\n  return compileExpression(expression, context);\n}\n\n/**\n * @param {import(\"./expression.js\").Expression} expression The expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {ExpressionEvaluator} The evaluator function.\n */\nfunction compileExpression(expression, context) {\n  if (expression instanceof LiteralExpression) {\n    // convert colors to array if possible\n    if (expression.type === ColorType && typeof expression.value === 'string') {\n      const colorValue = fromString(expression.value);\n      return function () {\n        return colorValue;\n      };\n    }\n    return function () {\n      return expression.value;\n    };\n  }\n  const operator = expression.operator;\n  switch (operator) {\n    case Ops.Number:\n    case Ops.String:\n    case Ops.Coalesce: {\n      return compileAssertionExpression(expression, context);\n    }\n    case Ops.Get:\n    case Ops.Var: {\n      return compileAccessorExpression(expression, context);\n    }\n    case Ops.Id: {\n      return (context) => context.featureId;\n    }\n    case Ops.GeometryType: {\n      return (context) => context.geometryType;\n    }\n    case Ops.Concat: {\n      const args = expression.args.map((e) => compileExpression(e, context));\n      return (context) =>\n        ''.concat(...args.map((arg) => arg(context).toString()));\n    }\n    case Ops.Resolution: {\n      return (context) => context.resolution;\n    }\n    case Ops.Any:\n    case Ops.All:\n    case Ops.Between:\n    case Ops.In:\n    case Ops.Not: {\n      return compileLogicalExpression(expression, context);\n    }\n    case Ops.Equal:\n    case Ops.NotEqual:\n    case Ops.LessThan:\n    case Ops.LessThanOrEqualTo:\n    case Ops.GreaterThan:\n    case Ops.GreaterThanOrEqualTo: {\n      return compileComparisonExpression(expression, context);\n    }\n    case Ops.Multiply:\n    case Ops.Divide:\n    case Ops.Add:\n    case Ops.Subtract:\n    case Ops.Clamp:\n    case Ops.Mod:\n    case Ops.Pow:\n    case Ops.Abs:\n    case Ops.Floor:\n    case Ops.Ceil:\n    case Ops.Round:\n    case Ops.Sin:\n    case Ops.Cos:\n    case Ops.Atan:\n    case Ops.Sqrt: {\n      return compileNumericExpression(expression, context);\n    }\n    case Ops.Case: {\n      return compileCaseExpression(expression, context);\n    }\n    case Ops.Match: {\n      return compileMatchExpression(expression, context);\n    }\n    case Ops.Interpolate: {\n      return compileInterpolateExpression(expression, context);\n    }\n    case Ops.ToString: {\n      return compileConvertExpression(expression, context);\n    }\n    default: {\n      throw new Error(`Unsupported operator ${operator}`);\n    }\n    // TODO: unimplemented\n    // Ops.Zoom\n    // Ops.Time\n    // Ops.Array\n    // Ops.Color\n    // Ops.Band\n    // Ops.Palette\n  }\n}\n\n/**\n * @param {import('./expression.js').CallExpression} expression The call expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {ExpressionEvaluator} The evaluator function.\n */\nfunction compileAssertionExpression(expression, context) {\n  const type = expression.operator;\n  const length = expression.args.length;\n\n  const args = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    args[i] = compileExpression(expression.args[i], context);\n  }\n  switch (type) {\n    case Ops.Coalesce: {\n      return (context) => {\n        for (let i = 0; i < length; ++i) {\n          const value = args[i](context);\n          if (typeof value !== 'undefined' && value !== null) {\n            return value;\n          }\n        }\n        throw new Error('Expected one of the values to be non-null');\n      };\n    }\n    case Ops.Number:\n    case Ops.String: {\n      return (context) => {\n        for (let i = 0; i < length; ++i) {\n          const value = args[i](context);\n          if (typeof value === type) {\n            return value;\n          }\n        }\n        throw new Error(`Expected one of the values to be a ${type}`);\n      };\n    }\n    default: {\n      throw new Error(`Unsupported assertion operator ${type}`);\n    }\n  }\n}\n\n/**\n * @param {import('./expression.js').CallExpression} expression The call expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {ExpressionEvaluator} The evaluator function.\n */\nfunction compileAccessorExpression(expression, context) {\n  const nameExpression = /** @type {LiteralExpression} */ (expression.args[0]);\n  const name = /** @type {string} */ (nameExpression.value);\n  switch (expression.operator) {\n    case Ops.Get: {\n      return (context) => context.properties[name];\n    }\n    case Ops.Var: {\n      return (context) => context.variables[name];\n    }\n    default: {\n      throw new Error(`Unsupported accessor operator ${expression.operator}`);\n    }\n  }\n}\n\n/**\n * @param {import('./expression.js').CallExpression} expression The call expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {BooleanEvaluator} The evaluator function.\n */\nfunction compileComparisonExpression(expression, context) {\n  const op = expression.operator;\n  const left = compileExpression(expression.args[0], context);\n  const right = compileExpression(expression.args[1], context);\n  switch (op) {\n    case Ops.Equal: {\n      return (context) => left(context) === right(context);\n    }\n    case Ops.NotEqual: {\n      return (context) => left(context) !== right(context);\n    }\n    case Ops.LessThan: {\n      return (context) => left(context) < right(context);\n    }\n    case Ops.LessThanOrEqualTo: {\n      return (context) => left(context) <= right(context);\n    }\n    case Ops.GreaterThan: {\n      return (context) => left(context) > right(context);\n    }\n    case Ops.GreaterThanOrEqualTo: {\n      return (context) => left(context) >= right(context);\n    }\n    default: {\n      throw new Error(`Unsupported comparison operator ${op}`);\n    }\n  }\n}\n\n/**\n * @param {import('./expression.js').CallExpression} expression The call expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {BooleanEvaluator} The evaluator function.\n */\nfunction compileLogicalExpression(expression, context) {\n  const op = expression.operator;\n  const length = expression.args.length;\n\n  const args = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    args[i] = compileExpression(expression.args[i], context);\n  }\n  switch (op) {\n    case Ops.Any: {\n      return (context) => {\n        for (let i = 0; i < length; ++i) {\n          if (args[i](context)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    }\n    case Ops.All: {\n      return (context) => {\n        for (let i = 0; i < length; ++i) {\n          if (!args[i](context)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    }\n    case Ops.Between: {\n      return (context) => {\n        const value = args[0](context);\n        const min = args[1](context);\n        const max = args[2](context);\n        return value >= min && value <= max;\n      };\n    }\n    case Ops.In: {\n      return (context) => {\n        const value = args[0](context);\n        for (let i = 1; i < length; ++i) {\n          if (value === args[i](context)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    }\n    case Ops.Not: {\n      return (context) => !args[0](context);\n    }\n    default: {\n      throw new Error(`Unsupported logical operator ${op}`);\n    }\n  }\n}\n\n/**\n * @param {import('./expression.js').CallExpression} expression The call expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {NumberEvaluator} The evaluator function.\n */\nfunction compileNumericExpression(expression, context) {\n  const op = expression.operator;\n  const length = expression.args.length;\n\n  const args = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    args[i] = compileExpression(expression.args[i], context);\n  }\n  switch (op) {\n    case Ops.Multiply: {\n      return (context) => {\n        let value = 1;\n        for (let i = 0; i < length; ++i) {\n          value *= args[i](context);\n        }\n        return value;\n      };\n    }\n    case Ops.Divide: {\n      return (context) => args[0](context) / args[1](context);\n    }\n    case Ops.Add: {\n      return (context) => {\n        let value = 0;\n        for (let i = 0; i < length; ++i) {\n          value += args[i](context);\n        }\n        return value;\n      };\n    }\n    case Ops.Subtract: {\n      return (context) => args[0](context) - args[1](context);\n    }\n    case Ops.Clamp: {\n      return (context) => {\n        const value = args[0](context);\n        const min = args[1](context);\n        if (value < min) {\n          return min;\n        }\n        const max = args[2](context);\n        if (value > max) {\n          return max;\n        }\n        return value;\n      };\n    }\n    case Ops.Mod: {\n      return (context) => args[0](context) % args[1](context);\n    }\n    case Ops.Pow: {\n      return (context) => Math.pow(args[0](context), args[1](context));\n    }\n    case Ops.Abs: {\n      return (context) => Math.abs(args[0](context));\n    }\n    case Ops.Floor: {\n      return (context) => Math.floor(args[0](context));\n    }\n    case Ops.Ceil: {\n      return (context) => Math.ceil(args[0](context));\n    }\n    case Ops.Round: {\n      return (context) => Math.round(args[0](context));\n    }\n    case Ops.Sin: {\n      return (context) => Math.sin(args[0](context));\n    }\n    case Ops.Cos: {\n      return (context) => Math.cos(args[0](context));\n    }\n    case Ops.Atan: {\n      if (length === 2) {\n        return (context) => Math.atan2(args[0](context), args[1](context));\n      }\n      return (context) => Math.atan(args[0](context));\n    }\n    case Ops.Sqrt: {\n      return (context) => Math.sqrt(args[0](context));\n    }\n    default: {\n      throw new Error(`Unsupported numeric operator ${op}`);\n    }\n  }\n}\n\n/**\n * @param {import('./expression.js').CallExpression} expression The call expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {ExpressionEvaluator} The evaluator function.\n */\nfunction compileCaseExpression(expression, context) {\n  const length = expression.args.length;\n  const args = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    args[i] = compileExpression(expression.args[i], context);\n  }\n  return (context) => {\n    for (let i = 0; i < length - 1; i += 2) {\n      const condition = args[i](context);\n      if (condition) {\n        return args[i + 1](context);\n      }\n    }\n    return args[length - 1](context);\n  };\n}\n\n/**\n * @param {import('./expression.js').CallExpression} expression The call expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {ExpressionEvaluator} The evaluator function.\n */\nfunction compileMatchExpression(expression, context) {\n  const length = expression.args.length;\n  const args = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    args[i] = compileExpression(expression.args[i], context);\n  }\n  return (context) => {\n    const value = args[0](context);\n    for (let i = 1; i < length; i += 2) {\n      if (value === args[i](context)) {\n        return args[i + 1](context);\n      }\n    }\n    return args[length - 1](context);\n  };\n}\n\n/**\n * @param {import('./expression.js').CallExpression} expression The call expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {ExpressionEvaluator} The evaluator function.\n */\nfunction compileInterpolateExpression(expression, context) {\n  const length = expression.args.length;\n  const args = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    args[i] = compileExpression(expression.args[i], context);\n  }\n  return (context) => {\n    const base = args[0](context);\n    const value = args[1](context);\n\n    let previousInput;\n    let previousOutput;\n    for (let i = 2; i < length; i += 2) {\n      const input = args[i](context);\n      let output = args[i + 1](context);\n      const isColor = Array.isArray(output);\n      if (isColor) {\n        output = withAlpha(output);\n      }\n      if (input >= value) {\n        if (i === 2) {\n          return output;\n        }\n        if (isColor) {\n          return interpolateColor(\n            base,\n            value,\n            previousInput,\n            previousOutput,\n            input,\n            output,\n          );\n        }\n        return interpolateNumber(\n          base,\n          value,\n          previousInput,\n          previousOutput,\n          input,\n          output,\n        );\n      }\n      previousInput = input;\n      previousOutput = output;\n    }\n    return previousOutput;\n  };\n}\n\n/**\n * @param {import('./expression.js').CallExpression} expression The call expression.\n * @param {import('./expression.js').ParsingContext} context The parsing context.\n * @return {ExpressionEvaluator} The evaluator function.\n */\nfunction compileConvertExpression(expression, context) {\n  const op = expression.operator;\n  const length = expression.args.length;\n\n  const args = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    args[i] = compileExpression(expression.args[i], context);\n  }\n  switch (op) {\n    case Ops.ToString: {\n      return (context) => {\n        const value = args[0](context);\n        if (expression.args[0].type === ColorType) {\n          return toString(value);\n        }\n        return value.toString();\n      };\n    }\n    default: {\n      throw new Error(`Unsupported convert operator ${op}`);\n    }\n  }\n}\n\n/**\n * @param {number} base The base.\n * @param {number} value The value.\n * @param {number} input1 The first input value.\n * @param {number} output1 The first output value.\n * @param {number} input2 The second input value.\n * @param {number} output2 The second output value.\n * @return {number} The interpolated value.\n */\nfunction interpolateNumber(base, value, input1, output1, input2, output2) {\n  const delta = input2 - input1;\n  if (delta === 0) {\n    return output1;\n  }\n  const along = value - input1;\n  const factor =\n    base === 1\n      ? along / delta\n      : (Math.pow(base, along) - 1) / (Math.pow(base, delta) - 1);\n  return output1 + factor * (output2 - output1);\n}\n\n/**\n * @param {number} base The base.\n * @param {number} value The value.\n * @param {number} input1 The first input value.\n * @param {import('../color.js').Color} rgba1 The first output value.\n * @param {number} input2 The second input value.\n * @param {import('../color.js').Color} rgba2 The second output value.\n * @return {import('../color.js').Color} The interpolated color.\n */\nfunction interpolateColor(base, value, input1, rgba1, input2, rgba2) {\n  const delta = input2 - input1;\n  if (delta === 0) {\n    return rgba1;\n  }\n  const lcha1 = rgbaToLcha(rgba1);\n  const lcha2 = rgbaToLcha(rgba2);\n  let deltaHue = lcha2[2] - lcha1[2];\n  if (deltaHue > 180) {\n    deltaHue -= 360;\n  } else if (deltaHue < -180) {\n    deltaHue += 360;\n  }\n\n  const lcha = [\n    interpolateNumber(base, value, input1, lcha1[0], input2, lcha2[0]),\n    interpolateNumber(base, value, input1, lcha1[1], input2, lcha2[1]),\n    lcha1[2] + interpolateNumber(base, value, input1, 0, input2, deltaHue),\n    interpolateNumber(base, value, input1, rgba1[3], input2, rgba2[3]),\n  ];\n  return normalize(lchaToRgba(lcha));\n}\n","/**\n * @module ol/expr/expression\n */\nimport {ascending} from '../array.js';\nimport {isStringColor} from '../color.js';\n\n/**\n * @fileoverview This module includes types and functions for parsing array encoded expressions.\n * The result of parsing an encoded expression is one of the specific expression classes.\n * During parsing, information is added to the parsing context about the data accessed by the\n * expression.\n */\n\n/**\n * Base type used for literal style parameters; can be a number literal or the output of an operator,\n * which in turns takes {@link import(\"./expression.js\").ExpressionValue} arguments.\n *\n * See below for details on the available operators (with notes for those that are WebGL or Canvas only).\n *\n * * Reading operators:\n *   * `['band', bandIndex, xOffset, yOffset]` For tile layers only. Fetches pixel values from band\n *     `bandIndex` of the source's data. The first `bandIndex` of the source data is `1`. Fetched values\n *     are in the 0..1 range. {@link import(\"../source/TileImage.js\").default} sources have 4 bands: red,\n *     green, blue and alpha. {@link import(\"../source/DataTile.js\").default} sources can have any number\n *     of bands, depending on the underlying data source and\n *     {@link import(\"../source/GeoTIFF.js\").Options configuration}. `xOffset` and `yOffset` are optional\n *     and allow specifying pixel offsets for x and y. This is used for sampling data from neighboring pixels (WebGL only).\n *   * `['get', 'attributeName', typeHint]` fetches a feature property value, similar to `feature.get('attributeName')`\n *     A type hint can optionally be specified, in case the resulting expression contains a type ambiguity which\n *     will make it invalid. Type hints can be one of: 'string', 'color', 'number', 'boolean', 'number[]'\n *   * `['geometry-type']` returns a feature's geometry type as string, either: 'LineString', 'Point' or 'Polygon'\n *     `Multi*` values are returned as their singular equivalent\n *     `Circle` geometries are returned as 'Polygon'\n *     `GeometryCollection` geometries are returned as the type of the first geometry found in the collection (WebGL only).\n *   * `['resolution']` returns the current resolution\n *   * `['time']` The time in seconds since the creation of the layer (WebGL only).\n *   * `['var', 'varName']` fetches a value from the style variables; will throw an error if that variable is undefined\n *   * `['zoom']` The current zoom level (WebGL only).\n *\n * * Math operators:\n *   * `['*', value1, value2, ...]` multiplies the values (either numbers or colors)\n *   * `['/', value1, value2]` divides `value1` by `value2`\n *   * `['+', value1, value2, ...]` adds the values\n *   * `['-', value1, value2]` subtracts `value2` from `value1`\n *   * `['clamp', value, low, high]` clamps `value` between `low` and `high`\n *   * `['%', value1, value2]` returns the result of `value1 % value2` (modulo)\n *   * `['^', value1, value2]` returns the value of `value1` raised to the `value2` power\n *   * `['abs', value1]` returns the absolute value of `value1`\n *   * `['floor', value1]` returns the nearest integer less than or equal to `value1`\n *   * `['round', value1]` returns the nearest integer to `value1`\n *   * `['ceil', value1]` returns the nearest integer greater than or equal to `value1`\n *   * `['sin', value1]` returns the sine of `value1`\n *   * `['cos', value1]` returns the cosine of `value1`\n *   * `['atan', value1, value2]` returns `atan2(value1, value2)`. If `value2` is not provided, returns `atan(value1)`\n *   * `['sqrt', value1]` returns the square root of `value1`\n *\n * * Transform operators:\n *   * `['case', condition1, output1, ...conditionN, outputN, fallback]` selects the first output whose corresponding\n *     condition evaluates to `true`. If no match is found, returns the `fallback` value.\n *     All conditions should be `boolean`, output and fallback can be any kind.\n *   * `['match', input, match1, output1, ...matchN, outputN, fallback]` compares the `input` value against all\n *     provided `matchX` values, returning the output associated with the first valid match. If no match is found,\n *     returns the `fallback` value.\n *     `input` and `matchX` values must all be of the same type, and can be `number` or `string`. `outputX` and\n *     `fallback` values must be of the same type, and can be of any kind.\n *   * `['interpolate', interpolation, input, stop1, output1, ...stopN, outputN]` returns a value by interpolating between\n *     pairs of inputs and outputs; `interpolation` can either be `['linear']` or `['exponential', base]` where `base` is\n *     the rate of increase from stop A to stop B (i.e. power to which the interpolation ratio is raised); a value\n *     of 1 is equivalent to `['linear']`.\n *     `input` and `stopX` values must all be of type `number`. `outputX` values can be `number` or `color` values.\n *     Note: `input` will be clamped between `stop1` and `stopN`, meaning that all output values will be comprised\n *     between `output1` and `outputN`.\n *   * `['string', value1, value2, ...]` returns the first value in the list that evaluates to a string.\n *     An example would be to provide a default value for get: `['string', ['get', 'propertyname'], 'default value']]`\n *     (Canvas only).\n *   * `['number', value1, value2, ...]` returns the first value in the list that evaluates to a number.\n *     An example would be to provide a default value for get: `['string', ['get', 'propertyname'], 42]]`\n *     (Canvas only).\n *   * `['coalesce', value1, value2, ...]` returns the first value in the list which is not null or undefined.\n *     An example would be to provide a default value for get: `['coalesce', ['get','propertyname'], 'default value']]`\n *     (Canvas only).\n *\n * * Logical operators:\n *   * `['<', value1, value2]` returns `true` if `value1` is strictly lower than `value2`, or `false` otherwise.\n *   * `['<=', value1, value2]` returns `true` if `value1` is lower than or equals `value2`, or `false` otherwise.\n *   * `['>', value1, value2]` returns `true` if `value1` is strictly greater than `value2`, or `false` otherwise.\n *   * `['>=', value1, value2]` returns `true` if `value1` is greater than or equals `value2`, or `false` otherwise.\n *   * `['==', value1, value2]` returns `true` if `value1` equals `value2`, or `false` otherwise.\n *   * `['!=', value1, value2]` returns `true` if `value1` does not equal `value2`, or `false` otherwise.\n *   * `['!', value1]` returns `false` if `value1` is `true` or greater than `0`, or `true` otherwise.\n *   * `['all', value1, value2, ...]` returns `true` if all the inputs are `true`, `false` otherwise.\n *   * `['any', value1, value2, ...]` returns `true` if any of the inputs are `true`, `false` otherwise.\n *   * `['between', value1, value2, value3]` returns `true` if `value1` is contained between `value2` and `value3`\n *     (inclusively), or `false` otherwise.\n *   * `['in', needle, haystack]` returns `true` if `needle` is found in `haystack`, and\n *     `false` otherwise.\n *     This operator has the following limitations:\n *     * `haystack` has to be an array of numbers or strings (searching for a substring in a string is not supported yet)\n *     * Only literal arrays are supported as `haystack` for now; this means that `haystack` cannot be the result of an\n *     expression. If `haystack` is an array of strings, use the `literal` operator to disambiguate from an expression:\n *     `['literal', ['abc', 'def', 'ghi']]`\n *\n * * Conversion operators:\n *   * `['array', value1, ...valueN]` creates a numerical array from `number` values; please note that the amount of\n *     values can currently only be 2, 3 or 4 (WebGL only).\n *   * `['color', red, green, blue, alpha]` or `['color', shade, alpha]` creates a `color` value from `number` values;\n *     the `alpha` parameter is optional; if not specified, it will be set to 1 (WebGL only).\n *     Note: `red`, `green` and `blue` or `shade` components must be values between 0 and 255; `alpha` between 0 and 1.\n *   * `['palette', index, colors]` picks a `color` value from an array of colors using the given index; the `index`\n *     expression must evaluate to a number; the items in the `colors` array must be strings with hex colors\n *     (e.g. `'#86A136'`), colors using the rgba[a] functional notation (e.g. `'rgb(134, 161, 54)'` or `'rgba(134, 161, 54, 1)'`),\n *     named colors (e.g. `'red'`), or array literals with 3 ([r, g, b]) or 4 ([r, g, b, a]) values (with r, g, and b\n *     in the 0-255 range and a in the 0-1 range) (WebGL only).\n *   * `['to-string', value]` converts the input value to a string. If the input is a boolean, the result is \"true\" or \"false\".\n *     If the input is a number, it is converted to a string as specified by the \"NumberToString\" algorithm of the ECMAScript\n *     Language Specification. If the input is a color, it is converted to a string of the form \"rgba(r,g,b,a)\". (Canvas only)\n *\n * Values can either be literals or another operator, as they will be evaluated recursively.\n * Literal values can be of the following types:\n * * `boolean`\n * * `number`\n * * `number[]` (number arrays can only have a length of 2, 3 or 4)\n * * `string`\n * * {@link module:ol/color~Color}\n *\n * @typedef {Array<*>|import(\"../color.js\").Color|string|number|boolean} ExpressionValue\n * @api\n */\n\nlet numTypes = 0;\nexport const NoneType = 0;\nexport const BooleanType = 1 << numTypes++;\nexport const NumberType = 1 << numTypes++;\nexport const StringType = 1 << numTypes++;\nexport const ColorType = 1 << numTypes++;\nexport const NumberArrayType = 1 << numTypes++;\nexport const SizeType = 1 << numTypes++;\nexport const AnyType = Math.pow(2, numTypes) - 1;\n\nconst typeNames = {\n  [BooleanType]: 'boolean',\n  [NumberType]: 'number',\n  [StringType]: 'string',\n  [ColorType]: 'color',\n  [NumberArrayType]: 'number[]',\n  [SizeType]: 'size',\n};\n\nconst namedTypes = Object.keys(typeNames).map(Number).sort(ascending);\n\n/**\n * Get a string representation for a type.\n * @param {number} type The type.\n * @return {string} The type name.\n */\nexport function typeName(type) {\n  const names = [];\n  for (const namedType of namedTypes) {\n    if (includesType(type, namedType)) {\n      names.push(typeNames[namedType]);\n    }\n  }\n  if (names.length === 0) {\n    return 'untyped';\n  }\n  if (names.length < 3) {\n    return names.join(' or ');\n  }\n  return names.slice(0, -1).join(', ') + ', or ' + names[names.length - 1];\n}\n\n/**\n * @param {number} broad The broad type.\n * @param {number} specific The specific type.\n * @return {boolean} The broad type includes the specific type.\n */\nexport function includesType(broad, specific) {\n  return (broad & specific) === specific;\n}\n\n/**\n * @param {number} oneType One type.\n * @param {number} otherType Another type.\n * @return {boolean} The set of types overlap (share a common specific type)\n */\nexport function overlapsType(oneType, otherType) {\n  return !!(oneType & otherType);\n}\n\n/**\n * @param {number} type The type.\n * @param {number} expected The expected type.\n * @return {boolean} The given type is exactly the expected type.\n */\nexport function isType(type, expected) {\n  return type === expected;\n}\n\n/**\n * @typedef {boolean|number|string|Array<number>} LiteralValue\n */\n\nexport class LiteralExpression {\n  /**\n   * @param {number} type The value type.\n   * @param {LiteralValue} value The literal value.\n   */\n  constructor(type, value) {\n    this.type = type;\n    this.value = value;\n  }\n}\n\nexport class CallExpression {\n  /**\n   * @param {number} type The return type.\n   * @param {string} operator The operator.\n   * @param {...Expression} args The arguments.\n   */\n  constructor(type, operator, ...args) {\n    this.type = type;\n    this.operator = operator;\n    this.args = args;\n  }\n}\n\n/**\n * @typedef {LiteralExpression|CallExpression} Expression\n */\n\n/**\n * @typedef {Object} ParsingContext\n * @property {Set<string>} variables Variables referenced with the 'var' operator.\n * @property {Set<string>} properties Properties referenced with the 'get' operator.\n * @property {boolean} featureId The style uses the feature id.\n * @property {boolean} geometryType The style uses the feature geometry type.\n * @property {import(\"../style/flat.js\").FlatStyle|import(\"../style/webgl.js\").WebGLStyle} style The style being parsed\n */\n\n/**\n * @return {ParsingContext} A new parsing context.\n */\nexport function newParsingContext() {\n  return {\n    variables: new Set(),\n    properties: new Set(),\n    featureId: false,\n    geometryType: false,\n    style: {},\n  };\n}\n\n/**\n * @param {string} typeHint Type hint\n * @return {number} Resulting value type (will be a single type)\n */\nfunction getTypeFromHint(typeHint) {\n  switch (typeHint) {\n    case 'string':\n      return StringType;\n    case 'color':\n      return ColorType;\n    case 'number':\n      return NumberType;\n    case 'boolean':\n      return BooleanType;\n    case 'number[]':\n      return NumberArrayType;\n    default:\n      throw new Error(`Unrecognized type hint: ${typeHint}`);\n  }\n}\n\n/**\n * @typedef {LiteralValue|Array} EncodedExpression\n */\n\n/**\n * @param {EncodedExpression} encoded The encoded expression.\n * @param {ParsingContext} context The parsing context.\n * @param {number} [typeHint] Optional type hint\n * @return {Expression} The parsed expression result.\n */\nexport function parse(encoded, context, typeHint) {\n  switch (typeof encoded) {\n    case 'boolean': {\n      return new LiteralExpression(BooleanType, encoded);\n    }\n    case 'number': {\n      return new LiteralExpression(\n        typeHint === SizeType ? SizeType : NumberType,\n        encoded,\n      );\n    }\n    case 'string': {\n      let type = StringType;\n      if (isStringColor(encoded)) {\n        type |= ColorType;\n      }\n      // apply the given type hint only if it won't result in an empty type\n      if (!isType(type & typeHint, NoneType)) {\n        type &= typeHint;\n      }\n      return new LiteralExpression(type, encoded);\n    }\n    default: {\n      // pass\n    }\n  }\n\n  if (!Array.isArray(encoded)) {\n    throw new Error('Expression must be an array or a primitive value');\n  }\n\n  if (encoded.length === 0) {\n    throw new Error('Empty expression');\n  }\n\n  if (typeof encoded[0] === 'string') {\n    return parseCallExpression(encoded, context, typeHint);\n  }\n\n  for (const item of encoded) {\n    if (typeof item !== 'number') {\n      throw new Error('Expected an array of numbers');\n    }\n  }\n\n  let type = NumberArrayType;\n  if (encoded.length === 2) {\n    type |= SizeType;\n  } else if (encoded.length === 3 || encoded.length === 4) {\n    type |= ColorType;\n  }\n  if (typeHint) {\n    type &= typeHint;\n  }\n  return new LiteralExpression(type, encoded);\n}\n\n/**\n * @type {Object<string, string>}\n */\nexport const Ops = {\n  Get: 'get',\n  Var: 'var',\n  Concat: 'concat',\n  GeometryType: 'geometry-type',\n  Any: 'any',\n  All: 'all',\n  Not: '!',\n  Resolution: 'resolution',\n  Zoom: 'zoom',\n  Time: 'time',\n  Equal: '==',\n  NotEqual: '!=',\n  GreaterThan: '>',\n  GreaterThanOrEqualTo: '>=',\n  LessThan: '<',\n  LessThanOrEqualTo: '<=',\n  Multiply: '*',\n  Divide: '/',\n  Add: '+',\n  Subtract: '-',\n  Clamp: 'clamp',\n  Mod: '%',\n  Pow: '^',\n  Abs: 'abs',\n  Floor: 'floor',\n  Ceil: 'ceil',\n  Round: 'round',\n  Sin: 'sin',\n  Cos: 'cos',\n  Atan: 'atan',\n  Sqrt: 'sqrt',\n  Match: 'match',\n  Between: 'between',\n  Interpolate: 'interpolate',\n  Coalesce: 'coalesce',\n  Case: 'case',\n  In: 'in',\n  Number: 'number',\n  String: 'string',\n  Array: 'array',\n  Color: 'color',\n  Id: 'id',\n  Band: 'band',\n  Palette: 'palette',\n  ToString: 'to-string',\n};\n\n/**\n * @typedef {function(Array, ParsingContext, number):Expression} Parser\n * Third argument is a type hint\n */\n\n/**\n * @type {Object<string, Parser>}\n */\nconst parsers = {\n  [Ops.Get]: createParser(\n    ([_, typeHint]) => {\n      if (typeHint !== undefined) {\n        return getTypeFromHint(\n          /** @type {string} */ (\n            /** @type {LiteralExpression} */ (typeHint).value\n          ),\n        );\n      }\n      return AnyType;\n    },\n    withArgsCount(1, 2),\n    withGetArgs,\n  ),\n  [Ops.Var]: createParser(\n    ([firstArg]) => firstArg.type,\n    withArgsCount(1, 1),\n    withVarArgs,\n  ),\n  [Ops.Id]: createParser(NumberType | StringType, withNoArgs, usesFeatureId),\n  [Ops.Concat]: createParser(\n    StringType,\n    withArgsCount(2, Infinity),\n    parseArgsOfType(AnyType),\n  ),\n  [Ops.GeometryType]: createParser(StringType, withNoArgs, usesGeometryType),\n  [Ops.Resolution]: createParser(NumberType, withNoArgs),\n  [Ops.Zoom]: createParser(NumberType, withNoArgs),\n  [Ops.Time]: createParser(NumberType, withNoArgs),\n  [Ops.Any]: createParser(\n    BooleanType,\n    withArgsCount(2, Infinity),\n    parseArgsOfType(BooleanType),\n  ),\n  [Ops.All]: createParser(\n    BooleanType,\n    withArgsCount(2, Infinity),\n    parseArgsOfType(BooleanType),\n  ),\n  [Ops.Not]: createParser(\n    BooleanType,\n    withArgsCount(1, 1),\n    parseArgsOfType(BooleanType),\n  ),\n  [Ops.Equal]: createParser(\n    BooleanType,\n    withArgsCount(2, 2),\n    parseArgsOfType(AnyType),\n    narrowArgsType,\n  ),\n  [Ops.NotEqual]: createParser(\n    BooleanType,\n    withArgsCount(2, 2),\n    parseArgsOfType(AnyType),\n    narrowArgsType,\n  ),\n  [Ops.GreaterThan]: createParser(\n    BooleanType,\n    withArgsCount(2, 2),\n    parseArgsOfType(AnyType),\n    narrowArgsType,\n  ),\n  [Ops.GreaterThanOrEqualTo]: createParser(\n    BooleanType,\n    withArgsCount(2, 2),\n    parseArgsOfType(AnyType),\n    narrowArgsType,\n  ),\n  [Ops.LessThan]: createParser(\n    BooleanType,\n    withArgsCount(2, 2),\n    parseArgsOfType(AnyType),\n    narrowArgsType,\n  ),\n  [Ops.LessThanOrEqualTo]: createParser(\n    BooleanType,\n    withArgsCount(2, 2),\n    parseArgsOfType(AnyType),\n    narrowArgsType,\n  ),\n  [Ops.Multiply]: createParser(\n    (parsedArgs) => {\n      let outputType = NumberType | ColorType;\n      for (let i = 0; i < parsedArgs.length; i++) {\n        outputType &= parsedArgs[i].type;\n      }\n      return outputType;\n    },\n    withArgsCount(2, Infinity),\n    parseArgsOfType(NumberType | ColorType),\n    narrowArgsType,\n  ),\n  [Ops.Coalesce]: createParser(\n    (parsedArgs) => {\n      let type = AnyType;\n      for (let i = 1; i < parsedArgs.length; i += 2) {\n        type &= parsedArgs[i].type;\n      }\n      type &= parsedArgs[parsedArgs.length - 1].type;\n      return type;\n    },\n    withArgsCount(2, Infinity),\n    parseArgsOfType(AnyType),\n    narrowArgsType,\n  ),\n  [Ops.Divide]: createParser(\n    NumberType,\n    withArgsCount(2, 2),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Add]: createParser(\n    NumberType,\n    withArgsCount(2, Infinity),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Subtract]: createParser(\n    NumberType,\n    withArgsCount(2, 2),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Clamp]: createParser(\n    NumberType,\n    withArgsCount(3, 3),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Mod]: createParser(\n    NumberType,\n    withArgsCount(2, 2),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Pow]: createParser(\n    NumberType,\n    withArgsCount(2, 2),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Abs]: createParser(\n    NumberType,\n    withArgsCount(1, 1),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Floor]: createParser(\n    NumberType,\n    withArgsCount(1, 1),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Ceil]: createParser(\n    NumberType,\n    withArgsCount(1, 1),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Round]: createParser(\n    NumberType,\n    withArgsCount(1, 1),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Sin]: createParser(\n    NumberType,\n    withArgsCount(1, 1),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Cos]: createParser(\n    NumberType,\n    withArgsCount(1, 1),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Atan]: createParser(\n    NumberType,\n    withArgsCount(1, 2),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Sqrt]: createParser(\n    NumberType,\n    withArgsCount(1, 1),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Match]: createParser(\n    (parsedArgs) => {\n      let type = AnyType;\n      for (let i = 2; i < parsedArgs.length; i += 2) {\n        type &= parsedArgs[i].type;\n      }\n      type &= parsedArgs[parsedArgs.length - 1].type;\n      return type;\n    },\n    withArgsCount(4, Infinity),\n    withEvenArgs,\n    parseMatchArgs,\n  ),\n  [Ops.Between]: createParser(\n    BooleanType,\n    withArgsCount(3, 3),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Interpolate]: createParser(\n    (parsedArgs) => {\n      let type = ColorType | NumberType;\n      for (let i = 3; i < parsedArgs.length; i += 2) {\n        type &= parsedArgs[i].type;\n      }\n      return type;\n    },\n    withArgsCount(6, Infinity),\n    withEvenArgs,\n    parseInterpolateArgs,\n  ),\n  [Ops.Case]: createParser(\n    (parsedArgs) => {\n      let type = AnyType;\n      for (let i = 1; i < parsedArgs.length; i += 2) {\n        type &= parsedArgs[i].type;\n      }\n      type &= parsedArgs[parsedArgs.length - 1].type;\n      return type;\n    },\n    withArgsCount(3, Infinity),\n    withOddArgs,\n    parseCaseArgs,\n  ),\n  [Ops.In]: createParser(BooleanType, withArgsCount(2, 2), parseInArgs),\n  [Ops.Number]: createParser(\n    NumberType,\n    withArgsCount(1, Infinity),\n    parseArgsOfType(AnyType),\n  ),\n  [Ops.String]: createParser(\n    StringType,\n    withArgsCount(1, Infinity),\n    parseArgsOfType(AnyType),\n  ),\n  [Ops.Array]: createParser(\n    (parsedArgs) => {\n      return parsedArgs.length === 2\n        ? NumberArrayType | SizeType\n        : parsedArgs.length === 3 || parsedArgs.length === 4\n          ? NumberArrayType | ColorType\n          : NumberArrayType;\n    },\n    withArgsCount(1, Infinity),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Color]: createParser(\n    ColorType,\n    withArgsCount(1, 4),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Band]: createParser(\n    NumberType,\n    withArgsCount(1, 3),\n    parseArgsOfType(NumberType),\n  ),\n  [Ops.Palette]: createParser(ColorType, withArgsCount(2, 2), parsePaletteArgs),\n  [Ops.ToString]: createParser(\n    StringType,\n    withArgsCount(1, 1),\n    parseArgsOfType(BooleanType | NumberType | StringType | ColorType),\n  ),\n};\n\n/**\n * @typedef {function(Array<EncodedExpression>, ParsingContext, Array<Expression>, number?):Array<Expression>|void} ArgValidator\n * An argument validator applies various checks to an encoded expression arguments\n * Returns the parsed arguments if any.\n * Third argument is the array of parsed arguments from previous validators\n * Fourth argument is an optional type hint\n */\n\n/**\n * @type ArgValidator\n */\nfunction withGetArgs(encoded, context) {\n  const arg = parse(encoded[1], context);\n  if (!(arg instanceof LiteralExpression)) {\n    throw new Error('Expected a literal argument for get operation');\n  }\n  if (typeof arg.value !== 'string') {\n    throw new Error('Expected a string argument for get operation');\n  }\n  context.properties.add(arg.value);\n  if (encoded.length === 3) {\n    const hint = parse(encoded[2], context);\n    return [arg, hint];\n  }\n  return [arg];\n}\n\n/**\n * @type ArgValidator\n */\nfunction withVarArgs(encoded, context, parsedArgs, typeHint) {\n  const varName = encoded[1];\n  if (typeof varName !== 'string') {\n    throw new Error('Expected a string argument for var operation');\n  }\n  context.variables.add(varName);\n  if (\n    !('variables' in context.style) ||\n    context.style.variables[varName] === undefined\n  ) {\n    return [new LiteralExpression(AnyType, varName)];\n  }\n  const initialValue = context.style.variables[varName];\n  const arg = /** @type {LiteralExpression} */ (parse(initialValue, context));\n  arg.value = varName;\n  if (typeHint && !overlapsType(typeHint, arg.type)) {\n    throw new Error(\n      `The variable ${varName} has type ${typeName(\n        arg.type,\n      )} but the following type was expected: ${typeName(typeHint)}`,\n    );\n  }\n  return [arg];\n}\n\n/**\n * @type ArgValidator\n */\nfunction usesFeatureId(encoded, context) {\n  context.featureId = true;\n}\n\n/**\n * @type ArgValidator\n */\nfunction usesGeometryType(encoded, context) {\n  context.geometryType = true;\n}\n\n/**\n * @type ArgValidator\n */\nfunction withNoArgs(encoded, context) {\n  const operation = encoded[0];\n  if (encoded.length !== 1) {\n    throw new Error(`Expected no arguments for ${operation} operation`);\n  }\n  return [];\n}\n\n/**\n * @param {number} minArgs The minimum number of arguments.\n * @param {number} maxArgs The maximum number of arguments.\n * @return {ArgValidator} The argument validator\n */\nfunction withArgsCount(minArgs, maxArgs) {\n  return function (encoded, context) {\n    const operation = encoded[0];\n    const argCount = encoded.length - 1;\n    if (minArgs === maxArgs) {\n      if (argCount !== minArgs) {\n        const plural = minArgs === 1 ? '' : 's';\n        throw new Error(\n          `Expected ${minArgs} argument${plural} for ${operation}, got ${argCount}`,\n        );\n      }\n    } else if (argCount < minArgs || argCount > maxArgs) {\n      const range =\n        maxArgs === Infinity\n          ? `${minArgs} or more`\n          : `${minArgs} to ${maxArgs}`;\n      throw new Error(\n        `Expected ${range} arguments for ${operation}, got ${argCount}`,\n      );\n    }\n  };\n}\n\n/**\n * @param {number} argType The argument type.\n * @return {ArgValidator} The argument validator\n */\nfunction parseArgsOfType(argType) {\n  return function (encoded, context) {\n    const operation = encoded[0];\n    const argCount = encoded.length - 1;\n    /**\n     * @type {Array<Expression>}\n     */\n    const args = new Array(argCount);\n    for (let i = 0; i < argCount; ++i) {\n      const expression = parse(encoded[i + 1], context);\n      if (!overlapsType(argType, expression.type)) {\n        const gotType = typeName(argType);\n        const expectedType = typeName(expression.type);\n        throw new Error(\n          `Unexpected type for argument ${i} of ${operation} operation` +\n            `, got ${gotType} but expected ${expectedType}`,\n        );\n      }\n      expression.type &= argType;\n      args[i] = expression;\n    }\n    return args;\n  };\n}\n\n/**\n * @type {ArgValidator}\n */\nfunction narrowArgsType(encoded, context, parsedArgs) {\n  const operation = encoded[0];\n  const argCount = encoded.length - 1;\n\n  // first pass to determine a narrowed down type\n  let sameType = AnyType;\n  for (let i = 0; i < parsedArgs.length; ++i) {\n    sameType &= parsedArgs[i].type;\n  }\n\n  if (sameType === NoneType) {\n    throw new Error(\n      `No common type could be found for arguments of ${operation} operation`,\n    );\n  }\n\n  // re-parse args\n  const args = new Array(argCount);\n  for (let i = 0; i < argCount; ++i) {\n    args[i] = parse(encoded[i + 1], context, sameType);\n  }\n  return args;\n}\n\n/**\n * @type {ArgValidator}\n */\nfunction withOddArgs(encoded, context) {\n  const operation = encoded[0];\n  const argCount = encoded.length - 1;\n  if (argCount % 2 === 0) {\n    throw new Error(\n      `An odd amount of arguments was expected for operation ${operation}, got ${JSON.stringify(\n        argCount,\n      )} instead`,\n    );\n  }\n}\n\n/**\n * @type {ArgValidator}\n */\nfunction withEvenArgs(encoded, context) {\n  const operation = encoded[0];\n  const argCount = encoded.length - 1;\n  if (argCount % 2 === 1) {\n    throw new Error(\n      `An even amount of arguments was expected for operation ${operation}, got ${JSON.stringify(\n        argCount,\n      )} instead`,\n    );\n  }\n}\n\n/**\n * @type ArgValidator\n */\nfunction parseMatchArgs(encoded, context, parsedArgs, typeHint) {\n  const argsCount = encoded.length - 1;\n\n  const input = parse(encoded[1], context);\n  let inputType = input.type;\n  const fallback = parse(encoded[encoded.length - 1], context);\n  let outputType =\n    typeHint !== undefined ? typeHint & fallback.type : fallback.type;\n\n  // first parse args to figure out possible types\n  const args = new Array(argsCount - 2);\n  for (let i = 0; i < argsCount - 2; i += 2) {\n    const match = parse(encoded[i + 2], context);\n    const output = parse(encoded[i + 3], context);\n    inputType &= match.type;\n    outputType &= output.type;\n    args[i] = match;\n    args[i + 1] = output;\n  }\n\n  // check input and output types validity\n  const expectedInputType = StringType | NumberType | BooleanType;\n  if (!overlapsType(expectedInputType, inputType)) {\n    throw new Error(\n      `Expected an input of type ${typeName(\n        expectedInputType,\n      )} for the interpolate operation` +\n        `, got ${typeName(inputType)} instead`,\n    );\n  }\n  inputType &= expectedInputType;\n  if (isType(outputType, NoneType)) {\n    throw new Error(\n      `Could not find a common output type for the following match operation: ` +\n        JSON.stringify(encoded),\n    );\n  }\n\n  // parse again inputs and outputs with common type\n  for (let i = 0; i < argsCount - 2; i += 2) {\n    const match = parse(encoded[i + 2], context, inputType);\n    const output = parse(encoded[i + 3], context, outputType);\n    args[i] = match;\n    args[i + 1] = output;\n  }\n\n  return [\n    parse(encoded[1], context, inputType),\n    ...args,\n    parse(encoded[encoded.length - 1], context, outputType),\n  ];\n}\n\n/**\n * @type ArgValidator\n */\nfunction parseInterpolateArgs(encoded, context, parsedArgs, typeHint) {\n  const interpolationType = encoded[1];\n  let interpolation;\n  switch (interpolationType[0]) {\n    case 'linear':\n      interpolation = 1;\n      break;\n    case 'exponential':\n      interpolation = interpolationType[1];\n      if (typeof interpolation !== 'number') {\n        throw new Error(\n          `Expected a number base for exponential interpolation` +\n            `, got ${JSON.stringify(interpolation)} instead`,\n        );\n      }\n      break;\n    default:\n      interpolation = null;\n  }\n  if (!interpolation) {\n    throw new Error(\n      `Invalid interpolation type: ${JSON.stringify(interpolationType)}`,\n    );\n  }\n  interpolation = parse(interpolation, context);\n\n  // check input types\n  let input = parse(encoded[2], context);\n  if (!overlapsType(NumberType, input.type)) {\n    throw new Error(\n      `Expected an input of type number for the interpolate operation` +\n        `, got ${typeName(input.type)} instead`,\n    );\n  }\n  input = parse(encoded[2], context, NumberType); // parse again with narrower output\n\n  const args = new Array(encoded.length - 3);\n  for (let i = 0; i < args.length; i += 2) {\n    let stop = parse(encoded[i + 3], context);\n    if (!overlapsType(NumberType, stop.type)) {\n      throw new Error(\n        `Expected all stop input values in the interpolate operation to be of type number` +\n          `, got ${typeName(stop.type)} at position ${i + 2} instead`,\n      );\n    }\n    let output = parse(encoded[i + 4], context);\n    if (!overlapsType(NumberType | ColorType, output.type)) {\n      throw new Error(\n        `Expected all stop output values in the interpolate operation to be a number or color` +\n          `, got ${typeName(output.type)} at position ${i + 3} instead`,\n      );\n    }\n    // parse again with narrower types\n    stop = parse(encoded[i + 3], context, NumberType);\n    output = parse(encoded[i + 4], context, NumberType | ColorType);\n    args[i] = stop;\n    args[i + 1] = output;\n  }\n\n  return [interpolation, input, ...args];\n}\n\n/**\n * @type ArgValidator\n */\nfunction parseCaseArgs(encoded, context, parsedArgs, typeHint) {\n  const fallback = parse(encoded[encoded.length - 1], context, typeHint);\n  let outputType =\n    typeHint !== undefined ? typeHint & fallback.type : fallback.type;\n\n  // first parse args to figure out possible types\n  const args = new Array(encoded.length - 1);\n  for (let i = 0; i < args.length - 1; i += 2) {\n    const condition = parse(encoded[i + 1], context);\n    const output = parse(encoded[i + 2], context, typeHint);\n    if (!overlapsType(BooleanType, condition.type)) {\n      throw new Error(\n        `Expected all conditions in the case operation to be of type boolean` +\n          `, got ${typeName(condition.type)} at position ${i} instead`,\n      );\n    }\n    outputType &= output.type;\n    args[i] = condition;\n    args[i + 1] = output;\n  }\n\n  if (isType(outputType, NoneType)) {\n    throw new Error(\n      `Could not find a common output type for the following case operation: ` +\n        JSON.stringify(encoded),\n    );\n  }\n\n  // parse again args with common output type\n  for (let i = 0; i < args.length - 1; i += 2) {\n    args[i + 1] = parse(encoded[i + 2], context, outputType);\n  }\n  args[args.length - 1] = parse(\n    encoded[encoded.length - 1],\n    context,\n    outputType,\n  );\n\n  return args;\n}\n\n/**\n * @type ArgValidator\n */\nfunction parseInArgs(encoded, context) {\n  /** @type {Array<number|string>} */\n  let haystack = /** @type {any} */ (encoded[2]);\n  if (!Array.isArray(haystack)) {\n    throw new Error(\n      `The \"in\" operator was provided a literal value which was not an array as second argument.`,\n    );\n  }\n  if (typeof haystack[0] === 'string') {\n    if (haystack[0] !== 'literal') {\n      throw new Error(\n        `For the \"in\" operator, a string array should be wrapped in a \"literal\" operator to disambiguate from expressions.`,\n      );\n    }\n    if (!Array.isArray(haystack[1])) {\n      throw new Error(\n        `The \"in\" operator was provided a literal value which was not an array as second argument.`,\n      );\n    }\n    haystack = haystack[1];\n  }\n\n  let needleType = StringType | NumberType;\n  const args = new Array(haystack.length);\n  for (let i = 0; i < args.length; i++) {\n    const arg = parse(haystack[i], context);\n    needleType &= arg.type;\n    args[i] = arg;\n  }\n  if (isType(needleType, NoneType)) {\n    throw new Error(\n      `Could not find a common type for the following in operation: ` +\n        JSON.stringify(encoded),\n    );\n  }\n\n  const needle = parse(encoded[1], context, needleType);\n  return [needle, ...args];\n}\n\n/**\n * @type ArgValidator\n */\nfunction parsePaletteArgs(encoded, context) {\n  const index = parse(encoded[1], context, NumberType);\n  if (index.type !== NumberType) {\n    throw new Error(\n      `The first argument of palette must be an number, got ${typeName(\n        index.type,\n      )} instead`,\n    );\n  }\n  const colors = encoded[2];\n  if (!Array.isArray(colors)) {\n    throw new Error('The second argument of palette must be an array');\n  }\n  const parsedColors = new Array(colors.length);\n  for (let i = 0; i < parsedColors.length; i++) {\n    const color = parse(colors[i], context, ColorType);\n    if (!(color instanceof LiteralExpression)) {\n      throw new Error(\n        `The palette color at index ${i} must be a literal value`,\n      );\n    }\n    if (!overlapsType(color.type, ColorType)) {\n      throw new Error(\n        `The palette color at index ${i} should be of type color, got ${typeName(\n          color.type,\n        )} instead`,\n      );\n    }\n    parsedColors[i] = color;\n  }\n  return [index, ...parsedColors];\n}\n\n/**\n * @param {number|function(Array<Expression>):number} returnType The return type of the operator; can be a fixed value or a callback taking the parsed\n * arguments\n * @param {Array<ArgValidator>} argValidators A chain of argument validators; the return value of the last validator\n * will be used as parsed arguments\n * @return {Parser} The parser.\n */\nfunction createParser(returnType, ...argValidators) {\n  return function (encoded, context, typeHint) {\n    const operator = encoded[0];\n    let parsedArgs = [];\n    for (let i = 0; i < argValidators.length; i++) {\n      parsedArgs =\n        argValidators[i](encoded, context, parsedArgs, typeHint) || parsedArgs;\n    }\n    let actualType =\n      typeof returnType === 'function' ? returnType(parsedArgs) : returnType;\n    if (typeHint !== undefined) {\n      if (!overlapsType(actualType, typeHint)) {\n        throw new Error(\n          `The following expression was expected to return ${typeName(\n            typeHint,\n          )}, but returns ${typeName(actualType)} instead: ${JSON.stringify(\n            encoded,\n          )}`,\n        );\n      }\n      actualType &= typeHint;\n    }\n    if (actualType === NoneType) {\n      throw new Error(\n        `No matching type was found for the following expression: ${JSON.stringify(\n          encoded,\n        )}`,\n      );\n    }\n    return new CallExpression(actualType, operator, ...parsedArgs);\n  };\n}\n\n/**\n * @param {Array} encoded The encoded expression.\n * @param {ParsingContext} context The parsing context.\n * @param {number} [typeHint] Optional type hint\n * @return {Expression} The parsed expression.\n */\nfunction parseCallExpression(encoded, context, typeHint) {\n  const operator = encoded[0];\n\n  const parser = parsers[operator];\n  if (!parser) {\n    throw new Error(`Unknown operator: ${operator}`);\n  }\n  return parser(encoded, context, typeHint);\n}\n\n/**\n * Returns a simplified geometry type suited for the `geometry-type` operator\n * @param {import('../geom/Geometry.js').default|import('../render/Feature.js').default} geometry Geometry object\n * @return {'Point'|'LineString'|'Polygon'|''} Simplified geometry type; empty string of no geometry found\n */\nexport function computeGeometryType(geometry) {\n  if (!geometry) {\n    return '';\n  }\n  const type = geometry.getType();\n  switch (type) {\n    case 'Point':\n    case 'LineString':\n    case 'Polygon':\n      return type;\n    case 'MultiPoint':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n      return /** @type {'Point'|'LineString'|'Polygon'} */ (type.substring(5));\n    case 'Circle':\n      return 'Polygon';\n    case 'GeometryCollection':\n      return computeGeometryType(\n        /** @type {import(\"../geom/GeometryCollection.js\").default} */ (\n          geometry\n        ).getGeometries()[0],\n      );\n    default:\n      return '';\n  }\n}\n","/**\n * @module ol/expr/gpu\n */\nimport PaletteTexture from '../webgl/PaletteTexture.js';\nimport {\n  BooleanType,\n  CallExpression,\n  ColorType,\n  NoneType,\n  NumberArrayType,\n  NumberType,\n  Ops,\n  SizeType,\n  StringType,\n  computeGeometryType,\n  isType,\n  overlapsType,\n  parse,\n  typeName,\n} from './expression.js';\nimport {Uniforms} from '../renderer/webgl/TileLayer.js';\nimport {asArray} from '../color.js';\nimport {toSize} from '../size.js';\n\n/**\n * @param {string} operator Operator\n * @param {CompilationContext} context Compilation context\n * @return {string} A function name based on the operator, unique in the given context\n */\nfunction computeOperatorFunctionName(operator, context) {\n  return `operator_${operator}_${Object.keys(context.functions).length}`;\n}\n\n/**\n * Will return the number as a float with a dot separator, which is required by GLSL.\n * @param {number} v Numerical value.\n * @return {string} The value as string.\n */\nexport function numberToGlsl(v) {\n  const s = v.toString();\n  return s.includes('.') ? s : s + '.0';\n}\n\n/**\n * Will return the number array as a float with a dot separator, concatenated with ', '.\n * @param {Array<number>} array Numerical values array.\n * @return {string} The array as a vector, e. g.: `vec3(1.0, 2.0, 3.0)`.\n */\nexport function arrayToGlsl(array) {\n  if (array.length < 2 || array.length > 4) {\n    throw new Error(\n      '`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.',\n    );\n  }\n  return `vec${array.length}(${array.map(numberToGlsl).join(', ')})`;\n}\n\n/**\n * Will normalize and converts to string a `vec4` color array compatible with GLSL.\n * @param {string|import(\"../color.js\").Color} color Color either in string format or [r, g, b, a] array format,\n * with RGB components in the 0..255 range and the alpha component in the 0..1 range.\n * Note that the final array will always have 4 components.\n * @return {string} The color expressed in the `vec4(1.0, 1.0, 1.0, 1.0)` form.\n */\nexport function colorToGlsl(color) {\n  const array = asArray(color);\n  const alpha = array.length > 3 ? array[3] : 1;\n  // all components are premultiplied with alpha value\n  return arrayToGlsl([\n    (array[0] / 255) * alpha,\n    (array[1] / 255) * alpha,\n    (array[2] / 255) * alpha,\n    alpha,\n  ]);\n}\n\n/**\n * Normalizes and converts a number or array toa `vec2` array compatible with GLSL.\n * @param {number|import('../size.js').Size} size Size.\n * @return {string} The color expressed in the `vec4(1.0, 1.0, 1.0, 1.0)` form.\n */\nexport function sizeToGlsl(size) {\n  const array = toSize(size);\n  return arrayToGlsl(array);\n}\n\n/** @type {Object<string, number>} */\nconst stringToFloatMap = {};\nlet stringToFloatCounter = 0;\n\n/**\n * Returns a stable equivalent number for the string literal.\n * @param {string} string String literal value\n * @return {number} Number equivalent\n */\nexport function getStringNumberEquivalent(string) {\n  if (!(string in stringToFloatMap)) {\n    stringToFloatMap[string] = stringToFloatCounter++;\n  }\n  return stringToFloatMap[string];\n}\n\n/**\n * Returns a stable equivalent number for the string literal, for use in shaders. This number is then\n * converted to be a GLSL-compatible string.\n * Note: with a float precision of `mediump`, the amount of unique strings supported is 16,777,216\n * @param {string} string String literal value\n * @return {string} GLSL-compatible string containing a number\n */\nexport function stringToGlsl(string) {\n  return numberToGlsl(getStringNumberEquivalent(string));\n}\n\n/**\n * Get the uniform name given a variable name.\n * @param {string} variableName The variable name.\n * @return {string} The uniform name.\n */\nexport function uniformNameForVariable(variableName) {\n  return 'u_var_' + variableName;\n}\n\n/**\n * @typedef {import('./expression.js').ParsingContext} ParsingContext\n */\n/**\n *\n * @typedef {import(\"./expression.js\").Expression} Expression\n */\n/**\n *\n * @typedef {import(\"./expression.js\").LiteralExpression} LiteralExpression\n */\n\n/**\n * @typedef {Object} CompilationContextProperty\n * @property {string} name Name\n * @property {number} type Resolved property type\n * @property {function(import(\"../Feature.js\").FeatureLike): *} [evaluator] Function used for evaluating the value;\n */\n\n/**\n * @typedef {Object} CompilationContextVariable\n * @property {string} name Name\n * @property {number} type Resolved variable type\n * @property {function(Object): *} [evaluator] Function used for evaluating the value; argument is the style variables object\n */\n\n/**\n * @typedef {Object} CompilationContext\n * @property {boolean} [inFragmentShader] If false, means the expression output should be made for a vertex shader\n * @property {Object<string, CompilationContextProperty>} properties The values for properties used in 'get' expressions.\n * @property {Object<string, CompilationContextVariable>} variables The values for variables used in 'var' expressions.\n * @property {Object<string, string>} functions Lookup of functions used by the style.\n * @property {number} [bandCount] Number of bands per pixel.\n * @property {Array<PaletteTexture>} [paletteTextures] List of palettes used by the style.\n * @property {import(\"../style/webgl.js\").WebGLStyle} style Literal style.\n */\n\n/**\n * @return {CompilationContext} A new compilation context.\n */\nexport function newCompilationContext() {\n  return {\n    inFragmentShader: false,\n    variables: {},\n    properties: {},\n    functions: {},\n    bandCount: 0,\n    style: {},\n  };\n}\n\nconst GET_BAND_VALUE_FUNC = 'getBandValue';\n\nexport const PALETTE_TEXTURE_ARRAY = 'u_paletteTextures';\n\n/**\n * @typedef {string} CompiledExpression\n */\n\n/**\n * @typedef {function(CompilationContext, CallExpression, number): string} Compiler\n * Third argument is the expected value types\n */\n\n/**\n * @param {import('./expression.js').EncodedExpression} encoded The encoded expression.\n * @param {number} type The expected type.\n * @param {import('./expression.js').ParsingContext} parsingContext The parsing context.\n * @param {CompilationContext} compilationContext An existing compilation context\n * @return {CompiledExpression} The compiled expression.\n */\nexport function buildExpression(\n  encoded,\n  type,\n  parsingContext,\n  compilationContext,\n) {\n  const expression = parse(encoded, parsingContext, type);\n  if (isType(expression.type, NoneType)) {\n    throw new Error(`No matching type was found`);\n  }\n  if (!overlapsType(type, expression.type)) {\n    const expected = typeName(type);\n    const actual = typeName(expression.type);\n    throw new Error(\n      `Expected expression to be of type ${expected}, got ${actual}`,\n    );\n  }\n  return compile(expression, type, compilationContext);\n}\n\n/**\n * @param {function(Array<CompiledExpression>, CompilationContext): string} output Function that takes in parsed arguments and returns a string\n * @return {function(CompilationContext, import(\"./expression.js\").CallExpression, number): string} Compiler for the call expression\n */\nfunction createCompiler(output) {\n  return (context, expression, type) => {\n    const length = expression.args.length;\n    const args = new Array(length);\n    for (let i = 0; i < length; ++i) {\n      args[i] = compile(expression.args[i], type, context);\n    }\n    return output(args, context);\n  };\n}\n\n/**\n * @type {Object<string, Compiler>}\n */\nconst compilers = {\n  [Ops.Get]: (context, expression) => {\n    const firstArg = /** @type {LiteralExpression} */ (expression.args[0]);\n    const propName = /** @type {string} */ (firstArg.value);\n    const isExisting = propName in context.properties;\n    if (!isExisting) {\n      context.properties[propName] = {\n        name: propName,\n        type: expression.type,\n      };\n    }\n    const prefix = context.inFragmentShader ? 'v_prop_' : 'a_prop_';\n    return prefix + propName;\n  },\n  [Ops.GeometryType]: (context, expression, type) => {\n    const propName = 'geometryType';\n    const isExisting = propName in context.properties;\n    if (!isExisting) {\n      context.properties[propName] = {\n        name: propName,\n        type: StringType,\n        evaluator: (feature) => {\n          return computeGeometryType(feature.getGeometry());\n        },\n      };\n    }\n    const prefix = context.inFragmentShader ? 'v_prop_' : 'a_prop_';\n    return prefix + propName;\n  },\n  [Ops.Var]: (context, expression) => {\n    const firstArg = /** @type {LiteralExpression} */ (expression.args[0]);\n    const varName = /** @type {string} */ (firstArg.value);\n    const isExisting = varName in context.variables;\n    if (!isExisting) {\n      context.variables[varName] = {\n        name: varName,\n        type: expression.type,\n      };\n    }\n    return uniformNameForVariable(varName);\n  },\n  [Ops.Resolution]: () => 'u_resolution',\n  [Ops.Zoom]: () => 'u_zoom',\n  [Ops.Time]: () => 'u_time',\n  [Ops.Any]: createCompiler((compiledArgs) => `(${compiledArgs.join(` || `)})`),\n  [Ops.All]: createCompiler((compiledArgs) => `(${compiledArgs.join(` && `)})`),\n  [Ops.Not]: createCompiler(([value]) => `(!${value})`),\n  [Ops.Equal]: createCompiler(\n    ([firstValue, secondValue]) => `(${firstValue} == ${secondValue})`,\n  ),\n  [Ops.NotEqual]: createCompiler(\n    ([firstValue, secondValue]) => `(${firstValue} != ${secondValue})`,\n  ),\n  [Ops.GreaterThan]: createCompiler(\n    ([firstValue, secondValue]) => `(${firstValue} > ${secondValue})`,\n  ),\n  [Ops.GreaterThanOrEqualTo]: createCompiler(\n    ([firstValue, secondValue]) => `(${firstValue} >= ${secondValue})`,\n  ),\n  [Ops.LessThan]: createCompiler(\n    ([firstValue, secondValue]) => `(${firstValue} < ${secondValue})`,\n  ),\n  [Ops.LessThanOrEqualTo]: createCompiler(\n    ([firstValue, secondValue]) => `(${firstValue} <= ${secondValue})`,\n  ),\n  [Ops.Multiply]: createCompiler(\n    (compiledArgs) => `(${compiledArgs.join(' * ')})`,\n  ),\n  [Ops.Divide]: createCompiler(\n    ([firstValue, secondValue]) => `(${firstValue} / ${secondValue})`,\n  ),\n  [Ops.Add]: createCompiler((compiledArgs) => `(${compiledArgs.join(' + ')})`),\n  [Ops.Subtract]: createCompiler(\n    ([firstValue, secondValue]) => `(${firstValue} - ${secondValue})`,\n  ),\n  [Ops.Clamp]: createCompiler(\n    ([value, min, max]) => `clamp(${value}, ${min}, ${max})`,\n  ),\n  [Ops.Mod]: createCompiler(([value, modulo]) => `mod(${value}, ${modulo})`),\n  [Ops.Pow]: createCompiler(([value, power]) => `pow(${value}, ${power})`),\n  [Ops.Abs]: createCompiler(([value]) => `abs(${value})`),\n  [Ops.Floor]: createCompiler(([value]) => `floor(${value})`),\n  [Ops.Ceil]: createCompiler(([value]) => `ceil(${value})`),\n  [Ops.Round]: createCompiler(([value]) => `floor(${value} + 0.5)`),\n  [Ops.Sin]: createCompiler(([value]) => `sin(${value})`),\n  [Ops.Cos]: createCompiler(([value]) => `cos(${value})`),\n  [Ops.Atan]: createCompiler(([firstValue, secondValue]) => {\n    return secondValue !== undefined\n      ? `atan(${firstValue}, ${secondValue})`\n      : `atan(${firstValue})`;\n  }),\n  [Ops.Sqrt]: createCompiler(([value]) => `sqrt(${value})`),\n  [Ops.Match]: createCompiler((compiledArgs) => {\n    const input = compiledArgs[0];\n    const fallback = compiledArgs[compiledArgs.length - 1];\n    let result = null;\n    for (let i = compiledArgs.length - 3; i >= 1; i -= 2) {\n      const match = compiledArgs[i];\n      const output = compiledArgs[i + 1];\n      result = `(${input} == ${match} ? ${output} : ${result || fallback})`;\n    }\n    return result;\n  }),\n  [Ops.Between]: createCompiler(\n    ([value, min, max]) => `(${value} >= ${min} && ${value} <= ${max})`,\n  ),\n  [Ops.Interpolate]: createCompiler(([exponent, input, ...compiledArgs]) => {\n    let result = '';\n    for (let i = 0; i < compiledArgs.length - 2; i += 2) {\n      const stop1 = compiledArgs[i];\n      const output1 = result || compiledArgs[i + 1];\n      const stop2 = compiledArgs[i + 2];\n      const output2 = compiledArgs[i + 3];\n      let ratio;\n      if (exponent === numberToGlsl(1)) {\n        ratio = `(${input} - ${stop1}) / (${stop2} - ${stop1})`;\n      } else {\n        ratio = `(pow(${exponent}, (${input} - ${stop1})) - 1.0) / (pow(${exponent}, (${stop2} - ${stop1})) - 1.0)`;\n      }\n      result = `mix(${output1}, ${output2}, clamp(${ratio}, 0.0, 1.0))`;\n    }\n    return result;\n  }),\n  [Ops.Case]: createCompiler((compiledArgs) => {\n    const fallback = compiledArgs[compiledArgs.length - 1];\n    let result = null;\n    for (let i = compiledArgs.length - 3; i >= 0; i -= 2) {\n      const condition = compiledArgs[i];\n      const output = compiledArgs[i + 1];\n      result = `(${condition} ? ${output} : ${result || fallback})`;\n    }\n    return result;\n  }),\n  [Ops.In]: createCompiler(([needle, ...haystack], context) => {\n    const funcName = computeOperatorFunctionName('in', context);\n    const tests = [];\n    for (let i = 0; i < haystack.length; i += 1) {\n      tests.push(`  if (inputValue == ${haystack[i]}) { return true; }`);\n    }\n    context.functions[funcName] = `bool ${funcName}(float inputValue) {\n${tests.join('\\n')}\n  return false;\n}`;\n    return `${funcName}(${needle})`;\n  }),\n  [Ops.Array]: createCompiler(\n    (args) => `vec${args.length}(${args.join(', ')})`,\n  ),\n  [Ops.Color]: createCompiler((compiledArgs) => {\n    if (compiledArgs.length === 1) {\n      //grayscale\n      return `vec4(vec3(${compiledArgs[0]} / 255.0), 1.0)`;\n    }\n    if (compiledArgs.length === 2) {\n      //grayscale with alpha\n      return `(${compiledArgs[1]} * vec4(vec3(${compiledArgs[0]} / 255.0), 1.0))`;\n    }\n    const rgb = compiledArgs.slice(0, 3).map((color) => `${color} / 255.0`);\n    if (compiledArgs.length === 3) {\n      return `vec4(${rgb.join(', ')}, 1.0)`;\n    }\n    const alpha = compiledArgs[3];\n    return `(${alpha} * vec4(${rgb.join(', ')}, 1.0))`;\n  }),\n  [Ops.Band]: createCompiler(([band, xOffset, yOffset], context) => {\n    if (!(GET_BAND_VALUE_FUNC in context.functions)) {\n      let ifBlocks = '';\n      const bandCount = context.bandCount || 1;\n      for (let i = 0; i < bandCount; i++) {\n        const colorIndex = Math.floor(i / 4);\n        let bandIndex = i % 4;\n        if (i === bandCount - 1 && bandIndex === 1) {\n          // LUMINANCE_ALPHA - band 1 assigned to rgb and band 2 assigned to alpha\n          bandIndex = 3;\n        }\n        const textureName = `${Uniforms.TILE_TEXTURE_ARRAY}[${colorIndex}]`;\n        ifBlocks += `  if (band == ${i + 1}.0) {\n    return texture2D(${textureName}, v_textureCoord + vec2(dx, dy))[${bandIndex}];\n  }\n`;\n      }\n\n      context.functions[GET_BAND_VALUE_FUNC] =\n        `float getBandValue(float band, float xOffset, float yOffset) {\n  float dx = xOffset / ${Uniforms.TEXTURE_PIXEL_WIDTH};\n  float dy = yOffset / ${Uniforms.TEXTURE_PIXEL_HEIGHT};\n${ifBlocks}\n}`;\n    }\n\n    return `${GET_BAND_VALUE_FUNC}(${band}, ${xOffset ?? '0.0'}, ${\n      yOffset ?? '0.0'\n    })`;\n  }),\n  [Ops.Palette]: (context, expression) => {\n    const [index, ...colors] = expression.args;\n    const numColors = colors.length;\n    const palette = new Uint8Array(numColors * 4);\n    for (let i = 0; i < colors.length; i++) {\n      const parsedValue = /** @type {string | Array<number>} */ (\n        /** @type {LiteralExpression} */ (colors[i]).value\n      );\n      const color = asArray(parsedValue);\n      const offset = i * 4;\n      palette[offset] = color[0];\n      palette[offset + 1] = color[1];\n      palette[offset + 2] = color[2];\n      palette[offset + 3] = color[3] * 255;\n    }\n    if (!context.paletteTextures) {\n      context.paletteTextures = [];\n    }\n    const paletteName = `${PALETTE_TEXTURE_ARRAY}[${context.paletteTextures.length}]`;\n    const paletteTexture = new PaletteTexture(paletteName, palette);\n    context.paletteTextures.push(paletteTexture);\n    const compiledIndex = compile(index, NumberType, context);\n    return `texture2D(${paletteName}, vec2((${compiledIndex} + 0.5) / ${numColors}.0, 0.5))`;\n  },\n  // TODO: unimplemented\n  // Ops.Number\n  // Ops.String\n  // Ops.Coalesce\n  // Ops.Concat\n  // Ops.ToString\n};\n\n/**\n * @param {Expression} expression The expression.\n * @param {number} returnType The expected return type.\n * @param {CompilationContext} context The compilation context.\n * @return {CompiledExpression} The compiled expression\n */\nfunction compile(expression, returnType, context) {\n  // operator\n  if (expression instanceof CallExpression) {\n    const compiler = compilers[expression.operator];\n    if (compiler === undefined) {\n      throw new Error(\n        `No compiler defined for this operator: ${JSON.stringify(\n          expression.operator,\n        )}`,\n      );\n    }\n    return compiler(context, expression, returnType);\n  }\n\n  if ((expression.type & NumberType) > 0) {\n    return numberToGlsl(/** @type {number} */ (expression.value));\n  }\n\n  if ((expression.type & BooleanType) > 0) {\n    return expression.value.toString();\n  }\n\n  if ((expression.type & StringType) > 0) {\n    return stringToGlsl(expression.value.toString());\n  }\n\n  if ((expression.type & ColorType) > 0) {\n    return colorToGlsl(\n      /** @type {Array<number> | string} */ (expression.value),\n    );\n  }\n\n  if ((expression.type & NumberArrayType) > 0) {\n    return arrayToGlsl(/** @type {Array<number>} */ (expression.value));\n  }\n\n  if ((expression.type & SizeType) > 0) {\n    return sizeToGlsl(\n      /** @type {number|import('../size.js').Size} */ (expression.value),\n    );\n  }\n\n  throw new Error(\n    `Unexpected expression ${expression.value} (expected type ${typeName(\n      returnType,\n    )})`,\n  );\n}\n","/**\n * @module ol/featureloader\n */\nimport {VOID} from './functions.js';\n\n/**\n *\n * @type {boolean}\n * @private\n */\nlet withCredentials = false;\n\n/**\n * {@link module:ol/source/Vector~VectorSource} sources use a function of this type to\n * load features.\n *\n * This function takes up to 5 arguments. These are an {@link module:ol/extent~Extent} representing\n * the area to be loaded, a `{number}` representing the resolution (map units per pixel), an\n * {@link module:ol/proj/Projection~Projection} for the projection, an optional success callback that should get\n * the loaded features passed as an argument and an optional failure callback with no arguments. If\n * the callbacks are not used, the corresponding vector source will not fire `'featuresloadend'` and\n * `'featuresloaderror'` events. `this` within the function is bound to the\n * {@link module:ol/source/Vector~VectorSource} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n *\n * @template {import(\"./Feature.js\").FeatureLike} [FeatureType=import(\"./Feature.js\").default]\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default),\n *           import(\"./extent.js\").Extent,\n *           number,\n *           import(\"./proj/Projection.js\").default,\n *           function(Array<FeatureType>): void=,\n *           function(): void=): void} FeatureLoader\n * @api\n */\n\n/**\n * {@link module:ol/source/Vector~VectorSource} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection~Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n\n/**\n * @template {import(\"./Feature.js\").FeatureLike} [FeatureType=import(\"./Feature.js\").FeatureLike]\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default<import('./format/Feature.js').FeatureToFeatureClass<FeatureType>>} format Feature format.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {function(Array<FeatureType>, import(\"./proj/Projection.js\").default): void} success Success\n *      Function called with the loaded features and optionally with the data projection.\n * @param {function(): void} failure Failure\n *      Function called when loading failed.\n */\nexport function loadFeaturesXhr(\n  url,\n  format,\n  extent,\n  resolution,\n  projection,\n  success,\n  failure,\n) {\n  const xhr = new XMLHttpRequest();\n  xhr.open(\n    'GET',\n    typeof url === 'function' ? url(extent, resolution, projection) : url,\n    true,\n  );\n  if (format.getType() == 'arraybuffer') {\n    xhr.responseType = 'arraybuffer';\n  }\n  xhr.withCredentials = withCredentials;\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n  xhr.onload = function (event) {\n    // status will be 0 for file:// urls\n    if (!xhr.status || (xhr.status >= 200 && xhr.status < 300)) {\n      const type = format.getType();\n      try {\n        /** @type {Document|Node|Object|string|undefined} */\n        let source;\n        if (type == 'text' || type == 'json') {\n          source = xhr.responseText;\n        } else if (type == 'xml') {\n          source = xhr.responseXML || xhr.responseText;\n        } else if (type == 'arraybuffer') {\n          source = /** @type {ArrayBuffer} */ (xhr.response);\n        }\n        if (source) {\n          success(\n            /** @type {Array<FeatureType>} */\n            (\n              format.readFeatures(source, {\n                extent: extent,\n                featureProjection: projection,\n              })\n            ),\n            format.readProjection(source),\n          );\n        } else {\n          failure();\n        }\n      } catch {\n        failure();\n      }\n    } else {\n      failure();\n    }\n  };\n  /**\n   * @private\n   */\n  xhr.onerror = failure;\n  xhr.send();\n}\n\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @template {import(\"./Feature.js\").FeatureLike} [FeatureType=import(\"./Feature.js\").FeatureLike]\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default<import('./format/Feature.js').FeatureToFeatureClass<FeatureType>>} format Feature format.\n * @return {FeatureLoader<FeatureType>} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"./proj/Projection.js\").default} projection Projection.\n   * @param {function(Array<FeatureType>): void} [success] Success\n   *      Function called when loading succeeded.\n   * @param {function(): void} [failure] Failure\n   *      Function called when loading failed.\n   */\n  return function (extent, resolution, projection, success, failure) {\n    const source =\n      /** @type {import(\"./source/Vector\").default<FeatureType>} */ (this);\n    loadFeaturesXhr(\n      url,\n      format,\n      extent,\n      resolution,\n      projection,\n      /**\n       * @param {Array<FeatureType>} features The loaded features.\n       * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n       * projection.\n       */\n      function (features, dataProjection) {\n        source.addFeatures(features);\n        if (success !== undefined) {\n          success(features);\n        }\n      },\n      /* FIXME handle error */ failure ? failure : VOID,\n    );\n  };\n}\n\n/**\n * Setter for the withCredentials configuration for the XHR.\n *\n * @param {boolean} xhrWithCredentials The value of withCredentials to set.\n * Compare https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/\n * @api\n */\nexport function setWithCredentials(xhrWithCredentials) {\n  withCredentials = xhrWithCredentials;\n}\n","/**\n * @module ol/format/Feature\n */\nimport Feature from '../Feature.js';\nimport RenderFeature from '../render/Feature.js';\nimport {\n  GeometryCollection,\n  LineString,\n  MultiLineString,\n  MultiPoint,\n  MultiPolygon,\n  Point,\n  Polygon,\n} from '../geom.js';\nimport {abstract} from '../util.js';\nimport {\n  equivalent as equivalentProjection,\n  get as getProjection,\n  getTransform,\n  transformExtent,\n} from '../proj.js';\nimport {\n  linearRingsAreOriented,\n  linearRingssAreOriented,\n  orientLinearRings,\n  orientLinearRingsArray,\n} from '../geom/flat/orient.js';\n\n/**\n * @typedef {Object} ReadOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {import(\"../extent.js\").Extent} [extent] Tile extent in map units of the tile being read.\n * This is only required when reading data with tile pixels as geometry units. When configured,\n * a `dataProjection` with `TILE_PIXELS` as `units` and the tile's pixel extent as `extent` needs to be\n * provided.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n\n/**\n * @typedef {Object} WriteOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n\n/**\n * @typedef {'arraybuffer' | 'json' | 'text' | 'xml'} Type\n */\n\n/**\n * @typedef {Object} SimpleGeometryObject\n * @property {import('../geom/Geometry.js').Type} type Type.\n * @property {Array<number>} flatCoordinates Flat coordinates.\n * @property {Array<number>|Array<Array<number>>} [ends] Ends or endss.\n * @property {import('../geom/Geometry.js').GeometryLayout} [layout] Layout.\n */\n\n/**\n * @typedef {Array<GeometryObject>} GeometryCollectionObject\n */\n\n/**\n * @typedef {SimpleGeometryObject|GeometryCollectionObject} GeometryObject\n */\n\n/**\n * @typedef {Object} FeatureObject\n * @property {string|number} [id] Id.\n * @property {GeometryObject} [geometry] Geometry.\n * @property {Object<string, *>} [properties] Properties.\n */\n\n/***\n * @template {Feature|RenderFeature} T\n * @typedef {T extends RenderFeature ? typeof RenderFeature : typeof Feature} FeatureToFeatureClass\n */\n\n/***\n * @template {import(\"../Feature.js\").FeatureClass} T\n * @typedef {T[keyof T] extends RenderFeature ? RenderFeature : Feature} FeatureClassToFeature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {@link module:ol/format/Feature~FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @template {import('../Feature.js').FeatureClass} [T=typeof import('../Feature.js').default]\n * @abstract\n * @api\n */\nclass FeatureFormat {\n  constructor() {\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default|undefined}\n     */\n    this.dataProjection = undefined;\n\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default|undefined}\n     */\n    this.defaultFeatureProjection = undefined;\n\n    /**\n     * @protected\n     * @type {T}\n     */\n    this.featureClass = /** @type {T} */ (Feature);\n\n    /**\n     * A list media types supported by the format in descending order of preference.\n     * @type {Array<string>}\n     */\n    this.supportedMediaTypes = null;\n  }\n\n  /**\n   * Adds the data projection to the read options.\n   * @param {Document|Element|Object|string} source Source.\n   * @param {ReadOptions} [options] Options.\n   * @return {ReadOptions|undefined} Options.\n   * @protected\n   */\n  getReadOptions(source, options) {\n    if (options) {\n      let dataProjection = options.dataProjection\n        ? getProjection(options.dataProjection)\n        : this.readProjection(source);\n      if (\n        options.extent &&\n        dataProjection &&\n        dataProjection.getUnits() === 'tile-pixels'\n      ) {\n        dataProjection = getProjection(dataProjection);\n        dataProjection.setWorldExtent(options.extent);\n      }\n      options = {\n        dataProjection: dataProjection,\n        featureProjection: options.featureProjection,\n      };\n    }\n    return this.adaptOptions(options);\n  }\n\n  /**\n   * Sets the `dataProjection` on the options, if no `dataProjection`\n   * is set.\n   * @param {WriteOptions|ReadOptions|undefined} options\n   *     Options.\n   * @protected\n   * @return {WriteOptions|ReadOptions|undefined}\n   *     Updated options.\n   */\n  adaptOptions(options) {\n    return Object.assign(\n      {\n        dataProjection: this.dataProjection,\n        featureProjection: this.defaultFeatureProjection,\n        featureClass: this.featureClass,\n      },\n      options,\n    );\n  }\n\n  /**\n   * @abstract\n   * @return {Type} The format type.\n   */\n  getType() {\n    return abstract();\n  }\n\n  /**\n   * Read a single feature from a source.\n   *\n   * @abstract\n   * @param {Document|Element|Object|string} source Source.\n   * @param {ReadOptions} [options] Read options.\n   * @return {import(\"../Feature.js\").FeatureLike|Array<import(\"../render/Feature.js\").default>} Feature.\n   */\n  readFeature(source, options) {\n    return abstract();\n  }\n\n  /**\n   * Read all features from a source.\n   *\n   * @abstract\n   * @param {Document|Element|ArrayBuffer|Object|string} source Source.\n   * @param {ReadOptions} [options] Read options.\n   * @return {Array<import('../Feature.js').FeatureLike|FeatureClassToFeature<T>>} Features.\n   */\n  readFeatures(source, options) {\n    return abstract();\n  }\n\n  /**\n   * Read a single geometry from a source.\n   *\n   * @abstract\n   * @param {Document|Element|Object|string} source Source.\n   * @param {ReadOptions} [options] Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometry(source, options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection from a source.\n   *\n   * @abstract\n   * @param {Document|Element|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default|undefined} Projection.\n   */\n  readProjection(source) {\n    return abstract();\n  }\n\n  /**\n   * Encode a feature in this format.\n   *\n   * @abstract\n   * @param {Feature} feature Feature.\n   * @param {WriteOptions} [options] Write options.\n   * @return {string|ArrayBuffer} Result.\n   */\n  writeFeature(feature, options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features in this format.\n   *\n   * @abstract\n   * @param {Array<Feature>} features Features.\n   * @param {WriteOptions} [options] Write options.\n   * @return {string|ArrayBuffer} Result.\n   */\n  writeFeatures(features, options) {\n    return abstract();\n  }\n\n  /**\n   * Write a single geometry in this format.\n   *\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {WriteOptions} [options] Write options.\n   * @return {string|ArrayBuffer} Result.\n   */\n  writeGeometry(geometry, options) {\n    return abstract();\n  }\n}\n\nexport default FeatureFormat;\n\n/**\n * @template {import(\"../geom/Geometry.js\").default|RenderFeature} T\n * @param {T} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {WriteOptions|ReadOptions} [options] Options.\n * @return {T} Transformed geometry.\n */\nexport function transformGeometryWithOptions(geometry, write, options) {\n  const featureProjection = options\n    ? getProjection(options.featureProjection)\n    : null;\n  const dataProjection = options ? getProjection(options.dataProjection) : null;\n\n  let transformed = geometry;\n  if (\n    featureProjection &&\n    dataProjection &&\n    !equivalentProjection(featureProjection, dataProjection)\n  ) {\n    if (write) {\n      transformed = /** @type {T} */ (geometry.clone());\n    }\n    const fromProjection = write ? featureProjection : dataProjection;\n    const toProjection = write ? dataProjection : featureProjection;\n    if (fromProjection.getUnits() === 'tile-pixels') {\n      transformed.transform(fromProjection, toProjection);\n    } else {\n      transformed.applyTransform(getTransform(fromProjection, toProjection));\n    }\n  }\n  if (\n    write &&\n    options &&\n    /** @type {WriteOptions} */ (options).decimals !== undefined\n  ) {\n    const power = Math.pow(10, /** @type {WriteOptions} */ (options).decimals);\n    // if decimals option on write, round each coordinate appropriately\n    /**\n     * @param {Array<number>} coordinates Coordinates.\n     * @return {Array<number>} Transformed coordinates.\n     */\n    const transform = function (coordinates) {\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = Math.round(coordinates[i] * power) / power;\n      }\n      return coordinates;\n    };\n    if (transformed === geometry) {\n      transformed = /** @type {T} */ (geometry.clone());\n    }\n    transformed.applyTransform(transform);\n  }\n  return transformed;\n}\n\n/**\n * @param {import(\"../extent.js\").Extent} extent Extent.\n * @param {ReadOptions} [options] Read options.\n * @return {import(\"../extent.js\").Extent} Transformed extent.\n */\nexport function transformExtentWithOptions(extent, options) {\n  const featureProjection = options\n    ? getProjection(options.featureProjection)\n    : null;\n  const dataProjection = options ? getProjection(options.dataProjection) : null;\n\n  if (\n    featureProjection &&\n    dataProjection &&\n    !equivalentProjection(featureProjection, dataProjection)\n  ) {\n    return transformExtent(extent, dataProjection, featureProjection);\n  }\n  return extent;\n}\n\nconst GeometryConstructor = {\n  Point: Point,\n  LineString: LineString,\n  Polygon: Polygon,\n  MultiPoint: MultiPoint,\n  MultiLineString: MultiLineString,\n  MultiPolygon: MultiPolygon,\n};\n\nfunction orientFlatCoordinates(flatCoordinates, ends, stride) {\n  if (Array.isArray(ends[0])) {\n    // MultiPolagon\n    if (!linearRingssAreOriented(flatCoordinates, 0, ends, stride)) {\n      flatCoordinates = flatCoordinates.slice();\n      orientLinearRingsArray(flatCoordinates, 0, ends, stride);\n    }\n    return flatCoordinates;\n  }\n  if (!linearRingsAreOriented(flatCoordinates, 0, ends, stride)) {\n    flatCoordinates = flatCoordinates.slice();\n    orientLinearRings(flatCoordinates, 0, ends, stride);\n  }\n  return flatCoordinates;\n}\n\n/**\n * @param {FeatureObject} object Feature object.\n * @param {WriteOptions|ReadOptions} [options] Options.\n * @return {RenderFeature|Array<RenderFeature>} Render feature.\n */\nexport function createRenderFeature(object, options) {\n  const geometry = object.geometry;\n  if (!geometry) {\n    return [];\n  }\n  if (Array.isArray(geometry)) {\n    return geometry\n      .map((geometry) => createRenderFeature({...object, geometry}))\n      .flat();\n  }\n\n  const geometryType =\n    geometry.type === 'MultiPolygon' ? 'Polygon' : geometry.type;\n  if (geometryType === 'GeometryCollection' || geometryType === 'Circle') {\n    throw new Error('Unsupported geometry type: ' + geometryType);\n  }\n\n  const stride = geometry.layout.length;\n  return transformGeometryWithOptions(\n    new RenderFeature(\n      geometryType,\n      geometryType === 'Polygon'\n        ? orientFlatCoordinates(geometry.flatCoordinates, geometry.ends, stride)\n        : geometry.flatCoordinates,\n      geometry.ends?.flat(),\n      stride,\n      object.properties || {},\n      object.id,\n    ).enableSimplifyTransformed(),\n    false,\n    options,\n  );\n}\n\n/**\n * @param {GeometryObject|null} object Geometry object.\n * @param {WriteOptions|ReadOptions} [options] Options.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nexport function createGeometry(object, options) {\n  if (!object) {\n    return null;\n  }\n  if (Array.isArray(object)) {\n    const geometries = object.map((geometry) =>\n      createGeometry(geometry, options),\n    );\n    return new GeometryCollection(geometries);\n  }\n  const Geometry = GeometryConstructor[object.type];\n  return transformGeometryWithOptions(\n    new Geometry(object.flatCoordinates, object.layout, object.ends),\n    false,\n    options,\n  );\n}\n","/**\n * @module ol/format/JSONFeature\n */\nimport FeatureFormat from './Feature.js';\nimport {abstract} from '../util.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @template {import('../Feature.js').FeatureClass} [T=typeof import('../Feature.js').default]\n * @extends {FeatureFormat<T>}\n * @abstract\n */\nclass JSONFeature extends FeatureFormat {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @return {import(\"./Feature.js\").Type} Format.\n   */\n  getType() {\n    return 'json';\n  }\n\n  /**\n   * Read a feature.  Only works for a single feature. Use `readFeatures` to\n   * read a feature collection.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @return {import('./Feature.js').FeatureClassToFeature<T>} Feature.\n   * @api\n   */\n  readFeature(source, options) {\n    return /** @type {import('./Feature.js').FeatureClassToFeature<T>} */ (\n      this.readFeatureFromObject(\n        getObject(source),\n        this.getReadOptions(source, options),\n      )\n    );\n  }\n\n  /**\n   * Read all features.  Works with both a single feature and a feature\n   * collection.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @return {Array<import('./Feature.js').FeatureClassToFeature<T>>} Features.\n   * @api\n   */\n  readFeatures(source, options) {\n    return /** @type {Array<import('./Feature.js').FeatureClassToFeature<T>>} */ (\n      this.readFeaturesFromObject(\n        getObject(source),\n        this.getReadOptions(source, options),\n      )\n    );\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default|import(\"../render/Feature.js\").default|Array<import(\"../render/Feature.js\").default>} Feature.\n   */\n  readFeatureFromObject(object, options) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default|import(\"../render/Feature.js\").default>} Features.\n   */\n  readFeaturesFromObject(object, options) {\n    return abstract();\n  }\n\n  /**\n   * Read a geometry.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   * @api\n   */\n  readGeometry(source, options) {\n    return this.readGeometryFromObject(\n      getObject(source),\n      this.getReadOptions(source, options),\n    );\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromObject(object, options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    return this.readProjectionFromObject(getObject(source));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromObject(object) {\n    return abstract();\n  }\n\n  /**\n   * Encode a feature as string.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n  writeFeature(feature, options) {\n    return JSON.stringify(this.writeFeatureObject(feature, options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n   * @return {Object} Object.\n   */\n  writeFeatureObject(feature, options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n  writeFeatures(features, options) {\n    return JSON.stringify(this.writeFeaturesObject(features, options));\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n   * @return {Object} Object.\n   */\n  writeFeaturesObject(features, options) {\n    return abstract();\n  }\n\n  /**\n   * Encode a geometry as string.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n   * @return {string} Encoded geometry.\n   * @api\n   */\n  writeGeometry(geometry, options) {\n    return JSON.stringify(this.writeGeometryObject(geometry, options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n   * @return {Object} Object.\n   */\n  writeGeometryObject(geometry, options) {\n    return abstract();\n  }\n}\n\n/**\n * @param {Document|Element|Object|string} source Source.\n * @return {Object} Object.\n */\nfunction getObject(source) {\n  if (typeof source === 'string') {\n    const object = JSON.parse(source);\n    return object ? /** @type {Object} */ (object) : null;\n  }\n  if (source !== null) {\n    return source;\n  }\n  return null;\n}\n\nexport default JSONFeature;\n","/**\n * @module ol/format/GeoJSON\n */\n\nimport Feature from '../Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport RenderFeature from '../render/Feature.js';\nimport {\n  createGeometry,\n  createRenderFeature,\n  transformGeometryWithOptions,\n} from './Feature.js';\nimport {\n  deflateCoordinatesArray,\n  deflateMultiCoordinatesArray,\n} from '../geom/flat/deflate.js';\nimport {getLayoutForStride} from '../geom/SimpleGeometry.js';\nimport {get as getProjection} from '../proj.js';\nimport {isEmpty} from '../obj.js';\n\n/**\n * @typedef {import(\"geojson\").GeoJSON} GeoJSONObject\n * @typedef {import(\"geojson\").Feature} GeoJSONFeature\n * @typedef {import(\"geojson\").FeatureCollection} GeoJSONFeatureCollection\n * @typedef {import(\"geojson\").Geometry} GeoJSONGeometry\n * @typedef {import(\"geojson\").Point} GeoJSONPoint\n * @typedef {import(\"geojson\").LineString} GeoJSONLineString\n * @typedef {import(\"geojson\").Polygon} GeoJSONPolygon\n * @typedef {import(\"geojson\").MultiPoint} GeoJSONMultiPoint\n * @typedef {import(\"geojson\").MultiLineString} GeoJSONMultiLineString\n * @typedef {import(\"geojson\").MultiPolygon} GeoJSONMultiPolygon\n * @typedef {import(\"geojson\").GeometryCollection} GeoJSONGeometryCollection\n */\n\n/**\n * @template {import(\"../Feature.js\").FeatureClass} FeatureClassToFeature\n * @typedef {Object} Options\n *\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection for features read or\n * written by the format.  Options passed to read or write methods will take precedence.\n * @property {string} [geometryName] Geometry name to use when creating features.\n * @property {boolean} [extractGeometryName=false] Certain GeoJSON providers include\n * the geometry_name field in the feature GeoJSON. If set to `true` the GeoJSON reader\n * will look for that field to set the geometry name. If both this field is set to `true`\n * and a `geometryName` is provided, the `geometryName` will take precedence.\n * @property {FeatureClassToFeature} [featureClass] Feature class\n * to be used when reading features. The default is {@link module:ol/Feature~Feature}. If performance is\n * the primary concern, and features are not going to be modified or round-tripped through the format,\n * consider using {@link module:ol/render/Feature~RenderFeature}\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n * @template {import('../Feature.js').FeatureClass} [T=typeof Feature]\n * @extends {JSONFeature<T>}\n * @api\n */\nclass GeoJSON extends JSONFeature {\n  /**\n   * @param {Options<T>} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super();\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.dataProjection = getProjection(\n      options.dataProjection ? options.dataProjection : 'EPSG:4326',\n    );\n\n    if (options.featureProjection) {\n      /**\n       * @type {import(\"../proj/Projection.js\").default}\n       */\n      this.defaultFeatureProjection = getProjection(options.featureProjection);\n    }\n\n    if (options.featureClass) {\n      this.featureClass = options.featureClass;\n    }\n\n    /**\n     * Name of the geometry attribute for features.\n     * @type {string|undefined}\n     * @private\n     */\n    this.geometryName_ = options.geometryName;\n\n    /**\n     * Look for the `geometry_name` in the feature GeoJSON\n     * @type {boolean|undefined}\n     * @private\n     */\n    this.extractGeometryName_ = options.extractGeometryName;\n\n    this.supportedMediaTypes = [\n      'application/geo+json',\n      'application/vnd.geo+json',\n    ];\n  }\n\n  /**\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @protected\n   * @return {Feature|RenderFeature|Array<RenderFeature>}.default} Feature.\n   */\n  readFeatureFromObject(object, options) {\n    /**\n     * @type {GeoJSONFeature}\n     */\n    let geoJSONFeature = null;\n    if (object['type'] === 'Feature') {\n      geoJSONFeature = /** @type {GeoJSONFeature} */ (object);\n    } else {\n      geoJSONFeature = {\n        'type': 'Feature',\n        'geometry': /** @type {GeoJSONGeometry} */ (object),\n        'properties': null,\n      };\n    }\n\n    const geometry = readGeometryInternal(geoJSONFeature['geometry'], options);\n    if (this.featureClass === RenderFeature) {\n      return createRenderFeature(\n        {\n          geometry,\n          id: geoJSONFeature['id'],\n          properties: geoJSONFeature['properties'],\n        },\n        options,\n      );\n    }\n\n    const feature = new Feature();\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_);\n    } else if (this.extractGeometryName_ && geoJSONFeature['geometry_name']) {\n      feature.setGeometryName(geoJSONFeature['geometry_name']);\n    }\n    feature.setGeometry(createGeometry(geometry, options));\n\n    if ('id' in geoJSONFeature) {\n      feature.setId(geoJSONFeature['id']);\n    }\n\n    if (geoJSONFeature['properties']) {\n      feature.setProperties(geoJSONFeature['properties'], true);\n    }\n    return feature;\n  }\n\n  /**\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @protected\n   * @return {Array<Feature|RenderFeature>} Features.\n   */\n  readFeaturesFromObject(object, options) {\n    const geoJSONObject = /** @type {GeoJSONObject} */ (object);\n    /** @type {Array<Feature|RenderFeature|Array<RenderFeature>>} */\n    let features = null;\n    if (geoJSONObject['type'] === 'FeatureCollection') {\n      const geoJSONFeatureCollection = /** @type {GeoJSONFeatureCollection} */ (\n        object\n      );\n      features = [];\n      const geoJSONFeatures = geoJSONFeatureCollection['features'];\n      for (let i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n        const featureObject = this.readFeatureFromObject(\n          geoJSONFeatures[i],\n          options,\n        );\n        if (!featureObject) {\n          continue;\n        }\n        features.push(featureObject);\n      }\n    } else {\n      features = [this.readFeatureFromObject(object, options)];\n    }\n    return features.flat();\n  }\n\n  /**\n   * @param {GeoJSONGeometry} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromObject(object, options) {\n    return readGeometry(object, options);\n  }\n\n  /**\n   * @param {Object} object Object.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromObject(object) {\n    const crs = object['crs'];\n    let projection;\n    if (crs) {\n      if (crs['type'] == 'name') {\n        projection = getProjection(crs['properties']['name']);\n      } else if (crs['type'] === 'EPSG') {\n        projection = getProjection('EPSG:' + crs['properties']['code']);\n      } else {\n        throw new Error('Unknown SRS type');\n      }\n    } else {\n      projection = this.dataProjection;\n    }\n    return /** @type {import(\"../proj/Projection.js\").default} */ (projection);\n  }\n\n  /**\n   * Encode a feature as a GeoJSON Feature object.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n   * @return {GeoJSONFeature} Object.\n   * @api\n   */\n  writeFeatureObject(feature, options) {\n    options = this.adaptOptions(options);\n\n    /** @type {GeoJSONFeature} */\n    const object = {\n      'type': 'Feature',\n      geometry: null,\n      properties: null,\n    };\n\n    const id = feature.getId();\n    if (id !== undefined) {\n      object.id = id;\n    }\n\n    if (!feature.hasProperties()) {\n      return object;\n    }\n\n    const properties = feature.getProperties();\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      object.geometry = writeGeometry(geometry, options);\n\n      delete properties[feature.getGeometryName()];\n    }\n\n    if (!isEmpty(properties)) {\n      object.properties = properties;\n    }\n\n    return object;\n  }\n\n  /**\n   * Encode an array of features as a GeoJSON object.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n   * @return {GeoJSONFeatureCollection} GeoJSON Object.\n   * @api\n   */\n  writeFeaturesObject(features, options) {\n    options = this.adaptOptions(options);\n    const objects = [];\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      objects.push(this.writeFeatureObject(features[i], options));\n    }\n    return {\n      type: 'FeatureCollection',\n      features: objects,\n    };\n  }\n\n  /**\n   * Encode a geometry as a GeoJSON object.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n   * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n   * @api\n   */\n  writeGeometryObject(geometry, options) {\n    return writeGeometry(geometry, this.adaptOptions(options));\n  }\n}\n\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n * @return {import(\"./Feature.js\").GeometryObject} Geometry.\n */\nfunction readGeometryInternal(object, options) {\n  if (!object) {\n    return null;\n  }\n\n  /** @type {import(\"./Feature.js\").GeometryObject} */\n  let geometry;\n  switch (object['type']) {\n    case 'Point': {\n      geometry = readPointGeometry(/** @type {GeoJSONPoint} */ (object));\n      break;\n    }\n    case 'LineString': {\n      geometry = readLineStringGeometry(\n        /** @type {GeoJSONLineString} */ (object),\n      );\n      break;\n    }\n    case 'Polygon': {\n      geometry = readPolygonGeometry(/** @type {GeoJSONPolygon} */ (object));\n      break;\n    }\n    case 'MultiPoint': {\n      geometry = readMultiPointGeometry(\n        /** @type {GeoJSONMultiPoint} */ (object),\n      );\n      break;\n    }\n    case 'MultiLineString': {\n      geometry = readMultiLineStringGeometry(\n        /** @type {GeoJSONMultiLineString} */ (object),\n      );\n      break;\n    }\n    case 'MultiPolygon': {\n      geometry = readMultiPolygonGeometry(\n        /** @type {GeoJSONMultiPolygon} */ (object),\n      );\n      break;\n    }\n    case 'GeometryCollection': {\n      geometry = readGeometryCollectionGeometry(\n        /** @type {GeoJSONGeometryCollection} */ (object),\n      );\n      break;\n    }\n    default: {\n      throw new Error('Unsupported GeoJSON type: ' + object['type']);\n    }\n  }\n  return geometry;\n}\n\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readGeometry(object, options) {\n  const geometryObject = readGeometryInternal(object, options);\n  return createGeometry(geometryObject, options);\n}\n\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n * @return {import(\"./Feature.js\").GeometryCollectionObject} Geometry collection.\n */\nfunction readGeometryCollectionGeometry(object, options) {\n  const geometries = object['geometries'].map(\n    /**\n     * @param {GeoJSONGeometry} geometry Geometry.\n     * @return {import(\"./Feature.js\").GeometryObject} geometry Geometry.\n     */\n    function (geometry) {\n      return readGeometryInternal(geometry, options);\n    },\n  );\n  return geometries;\n}\n\n/**\n * @param {GeoJSONPoint} object Input object.\n * @return {import(\"./Feature.js\").GeometryObject} Point geometry.\n */\nfunction readPointGeometry(object) {\n  const flatCoordinates = object['coordinates'];\n  return {\n    type: 'Point',\n    flatCoordinates,\n    layout: getLayoutForStride(flatCoordinates.length),\n  };\n}\n\n/**\n * @param {GeoJSONLineString} object Object.\n * @return {import(\"./Feature.js\").GeometryObject} LineString geometry.\n */\nfunction readLineStringGeometry(object) {\n  const coordinates = object['coordinates'];\n  const flatCoordinates = coordinates.flat();\n  return {\n    type: 'LineString',\n    flatCoordinates,\n    ends: [flatCoordinates.length],\n    layout: getLayoutForStride(coordinates[0]?.length || 2),\n  };\n}\n\n/**\n * @param {GeoJSONMultiLineString} object Object.\n * @return {import(\"./Feature.js\").GeometryObject} MultiLineString geometry.\n */\nfunction readMultiLineStringGeometry(object) {\n  const coordinates = object['coordinates'];\n  const stride = coordinates[0]?.[0]?.length || 2;\n  const flatCoordinates = [];\n  const ends = deflateCoordinatesArray(flatCoordinates, 0, coordinates, stride);\n  return {\n    type: 'MultiLineString',\n    flatCoordinates,\n    ends,\n    layout: getLayoutForStride(stride),\n  };\n}\n\n/**\n * @param {GeoJSONMultiPoint} object Object.\n * @return {import(\"./Feature.js\").GeometryObject} MultiPoint geometry.\n */\nfunction readMultiPointGeometry(object) {\n  const coordinates = object['coordinates'];\n  return {\n    type: 'MultiPoint',\n    flatCoordinates: coordinates.flat(),\n    layout: getLayoutForStride(coordinates[0]?.length || 2),\n  };\n}\n\n/**\n * @param {GeoJSONMultiPolygon} object Object.\n * @return {import(\"./Feature.js\").GeometryObject} MultiPolygon geometry.\n */\nfunction readMultiPolygonGeometry(object) {\n  const coordinates = object['coordinates'];\n  const flatCoordinates = [];\n  const stride = coordinates[0]?.[0]?.[0].length || 2;\n  const endss = deflateMultiCoordinatesArray(\n    flatCoordinates,\n    0,\n    coordinates,\n    stride,\n  );\n  return {\n    type: 'MultiPolygon',\n    flatCoordinates,\n    ends: endss,\n    layout: getLayoutForStride(stride),\n  };\n}\n\n/**\n * @param {GeoJSONPolygon} object Object.\n * @return {import(\"./Feature.js\").GeometryObject} Polygon.\n */\nfunction readPolygonGeometry(object) {\n  const coordinates = object['coordinates'];\n  const flatCoordinates = [];\n  const stride = coordinates[0]?.[0]?.length;\n  const ends = deflateCoordinatesArray(flatCoordinates, 0, coordinates, stride);\n  return {\n    type: 'Polygon',\n    flatCoordinates,\n    ends,\n    layout: getLayoutForStride(stride),\n  };\n}\n\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeGeometry(geometry, options) {\n  geometry = transformGeometryWithOptions(geometry, true, options);\n\n  const type = geometry.getType();\n\n  /** @type {GeoJSONGeometry} */\n  let geoJSON;\n  switch (type) {\n    case 'Point': {\n      geoJSON = writePointGeometry(\n        /** @type {import(\"../geom/Point.js\").default} */ (geometry),\n        options,\n      );\n      break;\n    }\n    case 'LineString': {\n      geoJSON = writeLineStringGeometry(\n        /** @type {import(\"../geom/LineString.js\").default} */ (geometry),\n        options,\n      );\n      break;\n    }\n    case 'Polygon': {\n      geoJSON = writePolygonGeometry(\n        /** @type {import(\"../geom/Polygon.js\").default} */ (geometry),\n        options,\n      );\n      break;\n    }\n    case 'MultiPoint': {\n      geoJSON = writeMultiPointGeometry(\n        /** @type {import(\"../geom/MultiPoint.js\").default} */ (geometry),\n        options,\n      );\n      break;\n    }\n    case 'MultiLineString': {\n      geoJSON = writeMultiLineStringGeometry(\n        /** @type {import(\"../geom/MultiLineString.js\").default} */ (geometry),\n        options,\n      );\n      break;\n    }\n    case 'MultiPolygon': {\n      geoJSON = writeMultiPolygonGeometry(\n        /** @type {import(\"../geom/MultiPolygon.js\").default} */ (geometry),\n        options,\n      );\n      break;\n    }\n    case 'GeometryCollection': {\n      geoJSON = writeGeometryCollectionGeometry(\n        /** @type {import(\"../geom/GeometryCollection.js\").default} */ (\n          geometry\n        ),\n        options,\n      );\n      break;\n    }\n    case 'Circle': {\n      geoJSON = {\n        type: 'GeometryCollection',\n        geometries: [],\n      };\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return geoJSON;\n}\n\n/**\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\nfunction writeGeometryCollectionGeometry(geometry, options) {\n  options = Object.assign({}, options);\n  delete options.featureProjection;\n  const geometries = geometry.getGeometriesArray().map(function (geometry) {\n    return writeGeometry(geometry, options);\n  });\n  return {\n    type: 'GeometryCollection',\n    geometries: geometries,\n  };\n}\n\n/**\n * @param {import(\"../geom/LineString.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeLineStringGeometry(geometry, options) {\n  return {\n    type: 'LineString',\n    coordinates: geometry.getCoordinates(),\n  };\n}\n\n/**\n * @param {import(\"../geom/MultiLineString.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiLineStringGeometry(geometry, options) {\n  return {\n    type: 'MultiLineString',\n    coordinates: geometry.getCoordinates(),\n  };\n}\n\n/**\n * @param {import(\"../geom/MultiPoint.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPointGeometry(geometry, options) {\n  return {\n    type: 'MultiPoint',\n    coordinates: geometry.getCoordinates(),\n  };\n}\n\n/**\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPolygonGeometry(geometry, options) {\n  let right;\n  if (options) {\n    right = options.rightHanded;\n  }\n  return {\n    type: 'MultiPolygon',\n    coordinates: geometry.getCoordinates(right),\n  };\n}\n\n/**\n * @param {import(\"../geom/Point.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePointGeometry(geometry, options) {\n  return {\n    type: 'Point',\n    coordinates: geometry.getCoordinates(),\n  };\n}\n\n/**\n * @param {import(\"../geom/Polygon.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePolygonGeometry(geometry, options) {\n  let right;\n  if (options) {\n    right = options.rightHanded;\n  }\n  return {\n    type: 'Polygon',\n    coordinates: geometry.getCoordinates(right),\n  };\n}\n\nexport default GeoJSON;\n"],"names":["binarySearch","haystack","needle","comparator","mid","cmp","ascending","low","high","length","found","a","b","descending","linearFindNearest","arr","target","direction","n","i","candidate","reverseSubArray","begin","end","tmp","extend","data","extension","Array","isArray","equals","arr1","arr2","len1","isSorted","func","strict","compare","every","currentVal","index","res","assert","assertion","errorMessage","Error","createExtent","extent","onlyCenter","smooth","center","resolution","size","isMoving","centerShift","viewWidth","viewHeight","shiftX","shiftY","minX","maxX","minY","maxY","x","y","ratio","Math","log","max","none","asString","color","toString","MAX_CACHE_SIZE","cache","cacheSize","withAlpha","output","slice","rgbaToLcha","lchuv","xyz","lchaToRgba","rgb","fromString","s","hasOwnProperty","key","c","isNaN","normalize","asArray","r","g","undefined","round","isStringColor","_","asColorLike","asCanvasPattern","pattern","offset","getPattern","src","cacheKey","canvasPattern","iconImage","get","getImageState","LOADED","patternCanvasContext","drawImage","getImage","canvas","Control","constructor","options","super","element","style","pointerEvents","this","target_","map_","listenerKeys","render","setTarget","disposeInternal","getMap","setMap","map","ii","getOverlayContainerStopEvent","appendChild","push","POSTRENDER","mapEvent","document","getElementById","events","FullScreenEventType","ENTERFULLSCREEN","LEAVEFULLSCREEN","FullScreen","createElement","on","once","un","keys_","keys","source_","source","isInFullscreen_","boundHandleMapTargetChange_","handleMapTargetChange_","bind","cssClassName_","className","documentListeners_","activeClassName_","activeClassName","split","inactiveClassName_","inactiveClassName","label","labelNode_","createTextNode","labelActive","labelActiveNode_","tipLabel","button_","title","setAttribute","addEventListener","CLICK","handleClick_","setClassName_","event","preventDefault","handleFullScreen_","doc","getOwnerDocument","isFullScreenSupported","isFullScreen","exitFullScreen","getTargetElement","requestFullScreenWithKeys","requestFullScreen","handleFullScreenChange_","wasInFullscreen","dispatchEvent","updateSize","fullscreen","classList","remove","add","oldMap","removeChangeListener","TARGET","addChangeListener","listeners","body","requestFullscreen","fullscreenEnabled","fullscreenElement","exitFullscreen","UNITS_PROP","LEADING_DIGITS","DEFAULT_DPI","ScaleLine","bar","innerElement_","viewState_","minWidth_","minWidth","maxWidth_","maxWidth","renderedVisible_","renderedWidth_","renderedHTML_","handleUnitsChanged_","setUnits","units","scaleBar_","scaleBarSteps_","steps","scaleBarText_","text","dpi_","dpi","getUnits","updateElement_","set","setDpi","viewState","display","projection","pointResolutionUnits","pointResolution","getPointResolution","nominalCount","suffix","metersPerDegree","METERS_PER_UNIT","degrees","count","width","decimalCount","previousCount","previousWidth","previousDecimalCount","floor","decimal","pow","html","createScaleBar","toFixed","innerHTML","scale","resolutionScale","getScaleForResolution","mapScale","toLocaleString","stepWidth","scaleSteps","createMarker","cls","createStepText","scaleBarText","join","position","top","isLast","lengthString","margin","inchesPerMeter","frameState","Attribution","ulElement_","collapsed_","collapsed","userCollapsed_","overrideCollapsible_","collapsible","collapsible_","expandClassName","collapseLabel","collapseClassName","collapseLabel_","textContent","label_","activeLabel","toggleButton_","String","EventType","cssClasses","renderedAttributions_","collectSourceAttributions_","visibleAttributions","from","Set","getAllLayers","flatMap","layer","getAttributions","some","getSource","getAttributionsCollapsible","setCollapsible","attributions","Promise","all","attribution","visible","handleToggle_","toggle","getCollapsible","setCollapsed","getCollapsed","Rotate","compassClassName","button","callResetNorth_","resetNorth","duration_","duration","autoHide_","autoHide","rotation_","resetNorth_","view","getView","rotation","getRotation","PI","animate","easing","setRotation","transform","contains","Zoom","delta","zoomInClassName","zoomOutClassName","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","outElement","zoomByDelta_","currentZoom","getZoom","newZoom","getConstrainedZoom","getAnimating","cancelAnimations","zoom","setZoom","defaults","controls","Collection","zoomControl","zoomOptions","rotateControl","rotate","rotateOptions","attributionControl","attributionOptions","CLASS_HIDDEN","CLASS_UNSELECTABLE","CLASS_UNSUPPORTED","CLASS_CONTROL","CLASS_COLLAPSED","fontRegEx","RegExp","fontRegExMatchIndex","getFontParameters","fontSpec","match","lineHeight","weight","variant","value","families","family","createCanvasContext2D","height","canvasPool","settings","shift","OffscreenCanvas","getContext","sharedCanvasContext","getSharedCanvasContext2D","releaseCanvas","context","clearRect","replaceNode","newNode","oldNode","parent","parentNode","replaceChild","removeNode","node","removeChild","removeChildren","lastChild","replaceChildren","children","oldChildren","childNodes","oldChild","newChild","insertBefore","easeIn","t","easeOut","inAndOut","linear","listen","type","listener","thisArg","originalListener","removeEventListener","apply","arguments","eventsKey","listenOnce","unlistenByKey","BaseEvent","propagationStopped","defaultPrevented","stopPropagation","CHANGE","ERROR","BLUR","CLEAR","CONTEXTMENU","DBLCLICK","DRAGENTER","DRAGOVER","DROP","FOCUS","KEYDOWN","KEYPRESS","LOAD","RESIZE","TOUCHMOVE","WHEEL","LEFT","UP","RIGHT","DOWN","Target","eventTarget_","pendingRemovals_","dispatching_","listeners_","listenersForType","includes","isString","evt","dispatching","pendingRemovals","propagate","handleEvent","call","pr","getListeners","hasListener","Object","indexOf","splice","var_args","conditions","pass","altKeyOnly","mapBrowserEvent","originalEvent","altKey","metaKey","ctrlKey","shiftKey","altShiftKeysOnly","focus","targetElement","activeElement","focusWithTabindex","hasAttribute","always","click","mouseActionButton","never","singleClick","SINGLECLICK","noModifierKeys","platformModifierKey","shiftKeyOnly","targetNotEditable","tagName","isContentEditable","mouseOnly","pointerEvent","pointerType","primaryAction","isPrimary","newEvaluationContext","variables","properties","NaN","featureId","geometryType","buildExpression","encoded","expression","expected","actual","compileExpression","colorValue","operator","Number","Coalesce","compileAssertionExpression","Get","Var","compileAccessorExpression","Id","GeometryType","Concat","args","e","concat","arg","Resolution","Any","All","Between","In","Not","compileLogicalExpression","Equal","NotEqual","LessThan","LessThanOrEqualTo","GreaterThan","GreaterThanOrEqualTo","compileComparisonExpression","Multiply","Divide","Add","Subtract","Clamp","Mod","Pow","Abs","Floor","Ceil","Round","Sin","Cos","Atan","Sqrt","compileNumericExpression","Case","compileCaseExpression","Match","compileMatchExpression","Interpolate","compileInterpolateExpression","ToString","compileConvertExpression","nameExpression","name","op","left","right","min","abs","ceil","sin","cos","atan2","atan","sqrt","condition","base","previousInput","previousOutput","input","isColor","interpolateColor","interpolateNumber","input1","output1","input2","output2","along","factor","rgba1","rgba2","lcha1","lcha2","deltaHue","lcha","numTypes","NoneType","BooleanType","NumberType","StringType","ColorType","NumberArrayType","SizeType","AnyType","typeNames","namedTypes","sort","typeName","names","namedType","includesType","broad","specific","overlapsType","oneType","otherType","isType","LiteralExpression","CallExpression","newParsingContext","getTypeFromHint","typeHint","parse","parseCallExpression","item","Ops","Time","Color","Band","Palette","parsers","createParser","withArgsCount","withGetArgs","firstArg","withVarArgs","withNoArgs","usesFeatureId","Infinity","parseArgsOfType","usesGeometryType","narrowArgsType","parsedArgs","outputType","withEvenArgs","parseMatchArgs","parseInterpolateArgs","withOddArgs","parseCaseArgs","parseInArgs","parsePaletteArgs","hint","varName","initialValue","operation","minArgs","maxArgs","argCount","plural","range","argType","gotType","expectedType","sameType","JSON","stringify","argsCount","inputType","fallback","expectedInputType","interpolationType","interpolation","stop","needleType","colors","parsedColors","returnType","argValidators","actualType","parser","computeGeometryType","geometry","getType","substring","getGeometries","computeOperatorFunctionName","functions","numberToGlsl","v","arrayToGlsl","array","colorToGlsl","alpha","sizeToGlsl","stringToFloatMap","stringToFloatCounter","getStringNumberEquivalent","string","stringToGlsl","uniformNameForVariable","variableName","newCompilationContext","inFragmentShader","bandCount","GET_BAND_VALUE_FUNC","PALETTE_TEXTURE_ARRAY","parsingContext","compilationContext","compile","createCompiler","compilers","propName","isExisting","prefix","evaluator","feature","getGeometry","compiledArgs","firstValue","secondValue","modulo","power","result","exponent","stop1","stop2","funcName","tests","band","xOffset","yOffset","ifBlocks","colorIndex","bandIndex","textureName","TILE_TEXTURE_ARRAY","TEXTURE_PIXEL_WIDTH","TEXTURE_PIXEL_HEIGHT","numColors","palette","Uint8Array","parsedValue","paletteTextures","paletteName","paletteTexture","compiledIndex","compiler","withCredentials","loadFeaturesXhr","url","format","success","failure","xhr","XMLHttpRequest","open","responseType","onload","status","responseText","responseXML","readFeatures","featureProjection","readProjection","onerror","send","features","dataProjection","addFeatures","FeatureFormat","defaultFeatureProjection","featureClass","Feature","supportedMediaTypes","getReadOptions","setWorldExtent","adaptOptions","assign","readFeature","readGeometry","writeFeature","writeFeatures","writeGeometry","transformGeometryWithOptions","write","transformed","equivalent","clone","fromProjection","toProjection","applyTransform","getTransform","decimals","coordinates","GeometryConstructor","Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon","orientFlatCoordinates","flatCoordinates","ends","stride","orient","createRenderFeature","object","flat","layout","id","enableSimplifyTransformed","createGeometry","geometries","GeometryCollection","Geometry","JSONFeature","readFeatureFromObject","getObject","readFeaturesFromObject","readGeometryFromObject","readProjectionFromObject","writeFeatureObject","writeFeaturesObject","writeGeometryObject","GeoJSON","geometryName_","geometryName","extractGeometryName_","extractGeometryName","geoJSONFeature","readGeometryInternal","setGeometryName","setGeometry","setId","setProperties","geoJSONObject","geoJSONFeatureCollection","geoJSONFeatures","featureObject","crs","getId","hasProperties","getProperties","getGeometryName","objects","readPointGeometry","readLineStringGeometry","readPolygonGeometry","readMultiPointGeometry","readMultiLineStringGeometry","readMultiPolygonGeometry","readGeometryCollectionGeometry","geometryObject","deflate","endss","geoJSON","writePointGeometry","writeLineStringGeometry","writePolygonGeometry","writeMultiPointGeometry","writeMultiLineStringGeometry","writeMultiPolygonGeometry","writeGeometryCollectionGeometry","getGeometriesArray","getCoordinates","rightHanded"],"sourceRoot":""}
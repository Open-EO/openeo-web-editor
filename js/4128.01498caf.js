"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[4128],{74128:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var s=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{show:e.show,title:"Import process from external source"},on:{closed:function(t){return e.$emit("closed")}},scopedSlots:e._u([{key:"default",fn:function(){return[t("div",{staticClass:"content"},[e._v(" You can load an external process from multiple different sources: "),t("h3",[e._v("Upload JSON file from your computer")]),t("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.uploadFile.apply(null,arguments)}}},[t("input",{attrs:{type:"file",name:"file",accept:"application/json"},on:{change:e.setFile}}),e._v(" "),t("button",{attrs:{disabled:!e.hasFile}},[e._v("Upload")])]),t("h3",[e._v("Download JSON file from the internet")]),t("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.loadUrl.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],attrs:{type:"url",name:"url"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),e._v(" "),t("button",{attrs:{disabled:!e.hasUrl}},[e._v("Load")])]),e.gh.length>0?[t("h3",[e._v("Examples from openEO processes repository")]),t("ul",e._l(e.gh,(function(o){return t("li",{key:o.name},[t("a",{on:{click:function(t){return e.request(o.url)}}},[e._v(e._s(o.name))])])})),0)]:e._e(),t("h3",[e._v("Import from client libraries (Python and R)")]),t("p",[e._v(" You can also import processes generated by the Python and R client."),t("br"),e._v(' Please read the chapter "'),t("a",{attrs:{href:"https://openeo.org/documentation/1.0/cookbook/#output-process-as-json",target:"_blank"}},[e._v("Output: Process as JSON")]),e._v('" in the openEO cookbook.'),t("br"),e._v(" After storing the JSON file to your computer, you can upload the JSON file above. ")])],2)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("button",{attrs:{type:"button",disabled:!e.process},on:{click:e.submit}},[e._v(" Import "),null===e.processId?[e._v("unnamed process")]:e.processId?t("code",[e._v(e._s(e.processId))]):e._e()],2)])]},proxy:!0}])})},i=[],r=o(58661),n=o(41457),a=o(25108);const l={name:"ImportProcessModal",components:{Modal:n.Z},data(){return{gh:[],process:null,url:null,file:null,show:!0}},async created(){try{let e=await axios("https://api.github.com/repos/Open-EO/openeo-community-examples/git/trees/2babd5d10e56f10d0a51569838227e93fdd934c5");this.gh=e.data.tree.filter((e=>e.path.endsWith(".json"))).map((e=>({name:e.path.substring(0,e.path.length-5),url:`https://raw.githubusercontent.com/Open-EO/openeo-community-examples/main/processes/${e.path}`})))}catch(e){a.warn(e)}},computed:{processId(){return r.Z.isObject(this.process)?this.process.id?this.process.id:null:""},hasUrl(){return r.Z.isUrl(this.url)},hasFile(){return!!this.file}},methods:{checkProcess(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){throw new Error("Process is not valid JSON")}if(!r.Z.isObject(e))throw new Error("Process does not contain any data");if("string"!==typeof e.id&&!r.Z.isObject(e.process_graph))throw new Error("Process does not contain `id` or `process graph`");return e},setFile(e){e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length>0?this.file=e.dataTransfer.files[0]:e.target&&e.target.files&&e.target.files.length>0?this.file=e.target.files[0]:this.file=null},uploadFile(){var e=new FileReader;e.onload=async e=>{try{this.process=this.checkProcess(e.target.result)}catch(t){r.Z.exception(this,t,"Upload failed")}},e.onerror=e=>r.Z.exception(this,e,"Reading JSON file failed"),e.readAsText(this.file,"UTF-8")},loadUrl(){this.request(this.url)},async request(e){try{if(!r.Z.isUrl(e))throw new Error("Please provide a valid URL");let t=await axios(e);this.process=this.checkProcess(t.data)}catch(t){r.Z.exception(this,t,"Download failed")}},submit(){this.$emit("save",this.process),this.show=!1}}},c=l;var d=o(1001),p=(0,d.Z)(c,s,i,!1,null,"f06e5f8e",null);const u=p.exports},41457:(e,t,o)=>{o.d(t,{Z:()=>p});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal",style:{"z-index":e.zIndex},on:{mousedown:e.backgroundClose}},[t("div",{ref:"container",staticClass:"modal-container",style:e.style},[t("header",{staticClass:"modal-header",on:{mousedown:e.startMove}},[e._t("header",(function(){return[t("h2",[e._v(e._s(e.title))]),t("span",{staticClass:"close",on:{click:e.close}},[t("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]}))],2),t("main",{staticClass:"modal-content"},[e._t("default")],2),t("footer",{staticClass:"modal-footer"},[e._t("footer")],2)])])},i=[],r=o(1744),n=o(58661);const a={name:"Modal",mixins:[r.Z],props:{title:{type:String,default:null},minWidth:{type:String,default:null},width:{type:String,default:"auto"},show:{type:Boolean,default:!0}},data(){return{zIndex:1e3,position:null,dragPosition:null}},computed:{...n.Z.mapState("editor",["hightestModalZIndex"]),style(){let e={width:this.width};return this.minWidth&&(e["min-width"]=this.minWidth),Array.isArray(this.position)&&(e.position="absolute",e.left=this.position[0]+"px",e.top=this.position[1]+"px"),e}},watch:{show:{immediate:!0,handler(e){e?this.open():this.close()}}},methods:{...n.Z.mapMutations("editor",["openModal","closeModal"]),open(){this.openModal(),this.zIndex=this.hightestModalZIndex,window.addEventListener("keydown",this.escCloseListener),this.$emit("shown")},close(){window.removeEventListener("keydown",this.escCloseListener),this.closeModal(),this.$emit("closed")},startMove(e){"H2"!==e.target.tagName&&(this.dragPosition=[e.clientX,e.clientY],document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.stopMove),e.preventDefault(),e.stopPropagation())},stopMove(){document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.stopMove)},move(e){e.preventDefault(),this.position=[this.$refs.container.offsetLeft-(this.dragPosition[0]-e.clientX),this.$refs.container.offsetTop-(this.dragPosition[1]-e.clientY)],this.dragPosition=[e.clientX,e.clientY]},escCloseListener(e){if("Escape"==e.key)return this.close(),e.preventDefault(),e.stopPropagation(),!1},backgroundClose(e){e.target===this.$el&&this.close()}}},l=a;var c=o(1001),d=(0,c.Z)(l,s,i,!1,null,null,null);const p=d.exports}}]);
//# sourceMappingURL=4128.01498caf.js.map
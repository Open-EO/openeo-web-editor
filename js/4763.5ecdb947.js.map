{"version":3,"file":"js/4763.5ecdb947.js","mappings":"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","sources":["webpack://@openeo/web-editor/./node_modules/ol-ext/control/LayerSwitcher.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Base.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Checkbox.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Switch.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Radio.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/element.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/ext.js","webpack://@openeo/web-editor/./node_modules/ol/Collection.js","webpack://@openeo/web-editor/./node_modules/ol/CollectionEventType.js","webpack://@openeo/web-editor/./node_modules/ol/Disposable.js","webpack://@openeo/web-editor/./node_modules/ol/Feature.js","webpack://@openeo/web-editor/./node_modules/ol/ImageBase.js","webpack://@openeo/web-editor/./node_modules/ol/Image.js","webpack://@openeo/web-editor/./node_modules/ol/ImageState.js","webpack://@openeo/web-editor/./node_modules/ol/ImageTile.js","webpack://@openeo/web-editor/./node_modules/ol/Kinetic.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEvent.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEventHandler.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEventType.js","webpack://@openeo/web-editor/./node_modules/ol/MapEvent.js","webpack://@openeo/web-editor/./node_modules/ol/MapEventType.js","webpack://@openeo/web-editor/./node_modules/ol/MapProperty.js"],"sourcesContent":["/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport ol_ext_inherits from '../util/ext'\r\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable'\r\nimport ol_control_Control from 'ol/control/Control'\r\nimport ol_layer_Tile from 'ol/layer/Tile'\r\nimport ol_layer_Vector from 'ol/layer/Vector'\r\nimport ol_layer_VectorTile from 'ol/layer/VectorTile'\r\n// ol < 6 compatibility VectorImage is not defined\r\n// import ol_layer_VectorImage from 'ol/layer/VectorImage'\r\nimport ol_layer_Image from 'ol/layer/Image'\r\nimport ol_layer_Heatmap from 'ol/layer/Heatmap'\r\nimport {intersects as ol_extent_intersects} from 'ol/extent'\r\n\r\nimport ol_ext_element from '../util/element'\r\n\r\n/** Layer Switcher Control.\r\n * @fires select\r\n * @fires drawlist\r\n * @fires toggle\r\n * @fires reorder-start\r\n * @fires reorder-end\r\n * @fires layer:visible\r\n * @fires layer:opacity\r\n * \r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} options\r\n *  @param {boolean} options.selection enable layer selection when click on the title\r\n *  @param {function} options.displayInLayerSwitcher function that takes a layer and return a boolean if the layer is displayed in the switcher, default test the displayInLayerSwitcher layer attribute\r\n *  @param {boolean} options.show_progress show a progress bar on tile layers, default false\r\n *  @param {boolean} options.mouseover show the panel on mouseover, default false\r\n *  @param {boolean} options.reordering allow layer reordering, default true\r\n *  @param {boolean} options.trash add a trash button to delete the layer, default false\r\n *  @param {function} options.oninfo callback on click on info button, if none no info button is shown DEPRECATED: use on(info) instead\r\n *  @param {boolean} options.extent add an extent button to zoom to the extent of the layer\r\n *  @param {function} options.onextent callback when click on extent, default fits view to extent\r\n *  @param {number} options.drawDelay delay in ms to redraw the layer (usefull to prevent flickering when manipulating the layers)\r\n *  @param {boolean} options.collapsed collapse the layerswitcher at beginning, default true\r\n *  @param {ol.layer.Group} options.layerGroup a layer group to display in the switcher, default display all layers of the map\r\n *  @param {boolean} options.noScroll prevent handle scrolling, default false\r\n *  @param {function} options.onchangeCheck optional callback on click on checkbox, you can call this method for doing operations after check/uncheck a layer\r\n *\r\n * Layers attributes that control the switcher\r\n *\t- allwaysOnTop {boolean} true to force layer stay on top of the others while reordering, default false\r\n *\t- displayInLayerSwitcher {boolean} display the layer in switcher, default true\r\n *\t- noSwitcherDelete {boolean} to prevent layer deletion (w. trash option = true), default false\r\n */\r\nvar ol_control_LayerSwitcher = function(options) {\r\n  options = options || {};\r\n  var self = this;\r\n  this.dcount = 0;\r\n  this.show_progress = options.show_progress;\r\n  this.oninfo = (typeof (options.oninfo) == \"function\" ? options.oninfo: null);\r\n  this.onextent = (typeof (options.onextent) == \"function\" ? options.onextent: null);\r\n  this.hasextent = options.extent || options.onextent;\r\n  this.hastrash = options.trash;\r\n  this.reordering = (options.reordering!==false);\r\n  this._layers = [];\r\n  this._layerGroup = (options.layerGroup && options.layerGroup.getLayers) ? options.layerGroup : null;\r\n  this.onchangeCheck = (typeof (options.onchangeCheck) == \"function\" ? options.onchangeCheck : null);\r\n\r\n  // displayInLayerSwitcher\r\n  if (typeof(options.displayInLayerSwitcher) === 'function') {\r\n    this.displayInLayerSwitcher = options.displayInLayerSwitcher;\r\n  }\r\n\r\n  var element;\r\n  if (options.target) {\r\n    element = ol_ext_element.create('DIV', {\r\n      className: options.switcherClass || \"ol-layerswitcher\"\r\n    });\r\n  } else {\r\n    element = ol_ext_element.create('DIV', {\r\n      className: (options.switcherClass || \"ol-layerswitcher\") +' ol-unselectable ol-control'\r\n    });\r\n    if (options.collapsed !== false) element.classList.add('ol-collapsed'); \r\n    else element.classList.add('ol-forceopen'); \r\n  \r\n    this.button = ol_ext_element.create('BUTTON', {\r\n      type: 'button',\r\n      parent: element\r\n    });\r\n    this.button.addEventListener('touchstart', function(e){\r\n      element.classList.toggle('ol-forceopen');\r\n      element.classList.add('ol-collapsed');\r\n      self.dispatchEvent({ type: 'toggle', collapsed: element.classList.contains('ol-collapsed') });\r\n      e.preventDefault(); \r\n      self.overflow();\r\n    });\r\n    this.button.addEventListener('click', function() {\r\n      element.classList.toggle('ol-forceopen');\r\n      element.classList.add('ol-collapsed'); \r\n      self.dispatchEvent({ type: 'toggle', collapsed: !element.classList.contains('ol-forceopen') });\r\n      self.overflow();\r\n    });\r\n\r\n    if (options.mouseover) {\r\n      element.addEventListener ('mouseleave', function(){ \r\n        element.classList.add(\"ol-collapsed\"); \r\n        self.dispatchEvent({ type: 'toggle', collapsed: true });\r\n      });\r\n      element.addEventListener ('mouseover', function(){ \r\n        element.classList.remove(\"ol-collapsed\"); \r\n        self.dispatchEvent({ type: 'toggle', collapsed: false });\r\n      });\r\n    }\r\n\r\n    if (options.minibar) options.noScroll = true;\r\n    if (!options.noScroll) {\r\n      this.topv = ol_ext_element.create('DIV', {\r\n        className: 'ol-switchertopdiv',\r\n        parent: element,\r\n        click: function() {\r\n          self.overflow(\"+50%\");\r\n        }\r\n      });\r\n\r\n      this.botv = ol_ext_element.create('DIV', {\r\n        className: 'ol-switcherbottomdiv',\r\n        parent: element,\r\n        click: function() {\r\n          self.overflow(\"-50%\");\r\n        }\r\n      });\r\n    }\r\n    this._noScroll = options.noScroll;\r\n  }\r\n\r\n  this.panel_ = ol_ext_element.create ('UL', {\r\n    className: 'panel',\r\n  });\r\n  this.panelContainer_ = ol_ext_element.create ('DIV', {\r\n    className: 'panel-container',\r\n    html: this.panel_,\r\n    parent: element\r\n  });\r\n  // Handle mousewheel\r\n  if (!options.target && !options.noScroll) {\r\n    ol_ext_element.addListener (this.panel_, 'mousewheel DOMMouseScroll onmousewheel', function(e) {\r\n      if (self.overflow(Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))))) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }\r\n    });\r\n  }\r\n\r\n  this.header_ = ol_ext_element.create('LI', {\r\n    className: 'ol-header',\r\n    parent: this.panel_\r\n  });\r\n\r\n  ol_control_Control.call (this, {\r\n    element: element,\r\n    target: options.target\r\n  });\r\n\r\n  this.set('drawDelay',options.drawDelay||0);\r\n  this.set('selection', options.selection);\r\n\r\n  if (options.minibar) {\r\n    // Wait init complete (for child classes)\r\n    setTimeout(function() {\r\n      var mbar = ol_ext_element.scrollDiv(this.panelContainer_, {\r\n        mousewheel: true, \r\n        vertical: true, \r\n        minibar: true\r\n      });\r\n      this.on(['drawlist', 'toggle'], function() {\r\n        mbar.refresh();\r\n      })\r\n    }.bind(this));\r\n  }\r\n};\r\nol_ext_inherits(ol_control_LayerSwitcher, ol_control_Control);\r\n\r\n/** List of tips for internationalization purposes\r\n*/\r\nol_control_LayerSwitcher.prototype.tip = {\r\n  up: \"up/down\",\r\n  down: \"down\",\r\n  info: \"informations...\",\r\n  extent: \"zoom to extent\",\r\n  trash: \"remove layer\",\r\n  plus: \"expand/shrink\"\r\n};\r\n\r\n/** Test if a layer should be displayed in the switcher\r\n * @param {ol.layer} layer\r\n * @return {boolean} true if the layer is displayed\r\n */\r\nol_control_LayerSwitcher.prototype.displayInLayerSwitcher = function(layer) {\r\n  return (layer.get('displayInLayerSwitcher')!==false);\r\n};\r\n\r\n/**\r\n * Set the map instance the control is associated with.\r\n * @param {_ol_Map_} map The map instance.\r\n */\r\nol_control_LayerSwitcher.prototype.setMap = function(map) {\r\n  ol_control_Control.prototype.setMap.call(this, map);\r\n  this.drawPanel();\r\n  \r\n  if (this._listener) {\r\n    for (var i in this._listener) ol_Observable_unByKey(this._listener[i]);\r\n  }\r\n  this._listener = null;\r\n\r\n  // Get change (new layer added or removed)\r\n  if (map) {\r\n    this._listener = {\r\n      moveend: map.on('moveend', this.viewChange.bind(this)),\r\n      size: map.on('change:size', this.overflow.bind(this))\r\n    }\r\n    // Listen to a layer group\r\n    if (this._layerGroup) {\r\n      this._listener.change = this._layerGroup.getLayers().on('change:length', this.drawPanel.bind(this));\r\n    } else  {\r\n      //Listen to all layers\r\n      this._listener.change = map.getLayerGroup().getLayers().on('change:length', this.drawPanel.bind(this));\r\n    }\r\n  }\r\n};\r\n\r\n/** Show control\r\n */\r\nol_control_LayerSwitcher.prototype.show = function() {\r\n  this.element.classList.add('ol-forceopen');\r\n  this.overflow();\r\n  self.dispatchEvent({ type: 'toggle', collapsed: false });\r\n};\r\n\r\n/** Hide control\r\n */\r\nol_control_LayerSwitcher.prototype.hide = function() {\r\n  this.element.classList.remove('ol-forceopen');\r\n  this.overflow();\r\n  self.dispatchEvent({ type: 'toggle', collapsed: true });\r\n};\r\n\r\n/** Toggle control\r\n */\r\nol_control_LayerSwitcher.prototype.toggle = function() {\r\n  this.element.classList.toggle(\"ol-forceopen\");\r\n  this.overflow();\r\n};\r\n\r\n/** Is control open\r\n * @return {boolean}\r\n */\r\nol_control_LayerSwitcher.prototype.isOpen = function() {\r\n  return this.element.classList.contains(\"ol-forceopen\");\r\n};\r\n\r\n/** Add a custom header\r\n * @param {Element|string} html content html\r\n */\r\nol_control_LayerSwitcher.prototype.setHeader = function(html) {\r\n  ol_ext_element.setHTML(this.header_, html);\r\n};\r\n\r\n/** Calculate overflow and add scrolls\r\n * @param {Number} dir scroll direction -1|0|1|'+50%'|'-50%'\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.overflow = function(dir) {\t\r\n  if (this.button && !this._noScroll) {\r\n    // Nothing to show\r\n    if (ol_ext_element.hidden(this.panel_)) {\r\n      ol_ext_element.setStyle(this.element, { height: 'auto' });\r\n      return;\r\n    }\r\n    // Calculate offset\r\n    var h = ol_ext_element.outerHeight(this.element);\r\n    var hp = ol_ext_element.outerHeight(this.panel_);\r\n    var dh = this.button.offsetTop + ol_ext_element.outerHeight(this.button);\r\n    //var dh = this.button.position().top + this.button.outerHeight(true);\r\n\r\n    var top = this.panel_.offsetTop - dh;\r\n    if (hp > h-dh) {\r\n      // Bug IE: need to have an height defined\r\n      ol_ext_element.setStyle(this.element, { height: '100%' });\r\n      var li = this.panel_.querySelectorAll('li.visible .li-content')[0];\r\n      var lh = li ? 2 * ol_ext_element.getStyle(li, 'height') : 0;\r\n      switch (dir) {\r\n        case 1: top += lh; break;\r\n        case -1: top -= lh; break;\r\n        case \"+50%\": top += Math.round(h/2); break;\r\n        case \"-50%\": top -= Math.round(h/2); break;\r\n        default: break;\r\n      }\r\n      // Scroll div\r\n      if (top+hp <= h-3*dh/2) {\r\n        top = h-3*dh/2-hp;\r\n        ol_ext_element.hide(this.botv);\r\n      } else {\r\n        ol_ext_element.show(this.botv);\r\n      }\r\n      if (top >= 0) {\r\n        top = 0;\r\n        ol_ext_element.hide(this.topv);\r\n      } else {\r\n        ol_ext_element.show(this.topv);\r\n      }\r\n      // Scroll ?\r\n      ol_ext_element.setStyle(this.panel_, { top: top+\"px\" });\r\n      return true;\r\n    } else {\r\n      ol_ext_element.setStyle(this.element, { height: \"auto\" });\r\n      ol_ext_element.setStyle(this.panel_, { top: 0 });\r\n      ol_ext_element.hide(this.botv);\r\n      ol_ext_element.hide(this.topv);\r\n      return false;\r\n    }\r\n  }\r\n  else return false;\r\n};\r\n\r\n/** Set the layer associated with a li\r\n * @param {Element} li\r\n * @param {ol.layer} layer\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype._setLayerForLI = function(li, layer) {\r\n  var listeners = [];\r\n  if (layer.getLayers) {\r\n    listeners.push(layer.getLayers().on('change:length', this.drawPanel.bind(this)));\r\n  }\r\n  if (li) {\r\n    // Handle opacity change\r\n    listeners.push(layer.on('change:opacity', (function() {\r\n      this.setLayerOpacity(layer, li);\r\n    }).bind(this)));\r\n    // Handle visibility chage\r\n    listeners.push(layer.on('change:visible', (function() {\r\n      this.setLayerVisibility(layer, li);\r\n    }).bind(this)));\r\n  }\r\n  // Other properties\r\n  listeners.push(layer.on('propertychange', (function(e) {\r\n    if (e.key === 'displayInLayerSwitcher'\r\n      || e.key === 'openInLayerSwitcher') {\r\n      this.drawPanel(e);\r\n    }\r\n  }).bind(this)));\r\n  this._layers.push({ li:li, layer:layer, listeners: listeners });\r\n};\r\n\r\n/** Set opacity for a layer\r\n * @param {ol.layer.Layer} layer\r\n * @param {Element} li the list element\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.setLayerOpacity = function(layer, li) {\r\n  var i = li.querySelector('.layerswitcher-opacity-cursor')\r\n  if (i) i.style.left = (layer.getOpacity()*100)+\"%\"\r\n  this.dispatchEvent({ type: 'layer:opacity', layer: layer });\r\n};\r\n\r\n/** Set visibility for a layer\r\n * @param {ol.layer.Layer} layer\r\n * @param {Element} li the list element\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.setLayerVisibility = function(layer, li) {\r\n  var i = li.querySelector('.ol-visibility');\r\n  if (i) i.checked = layer.getVisible();\r\n  if (layer.getVisible()) li.classList.add('ol-visible');\r\n  else li.classList.remove('ol-visible');\r\n  this.dispatchEvent({ type: 'layer:visible', layer: layer });\r\n};\r\n\r\n/** Clear layers associated with li\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype._clearLayerForLI = function() {\r\n  this._layers.forEach(function (li) {\r\n    li.listeners.forEach(function(l) {\r\n      ol_Observable_unByKey(l);\r\n    });\r\n  })\r\n  this._layers = [];\r\n};\r\n\r\n/** Get the layer associated with a li\r\n * @param {Element} li\r\n * @return {ol.layer}\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype._getLayerForLI = function(li) {\r\n  for (var i=0, l; l=this._layers[i]; i++) {\r\n    if (l.li===li) return l.layer;\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * On view change hide layer depending on resolution / extent\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.viewChange = function() {\r\n  this.panel_.querySelectorAll('li').forEach( function(li) {\r\n    var l = this._getLayerForLI(li);\r\n    if (l) {\r\n      if (this.testLayerVisibility(l)) li.classList.remove('ol-layer-hidden');\r\n      else li.classList.add('ol-layer-hidden');\r\n    }\r\n  }.bind(this));\r\n};\r\n\r\n/** Get control panel\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.getPanel = function() {\r\n  return this.panelContainer_;\r\n};\r\n\r\n/** Draw the panel control (prevent multiple draw due to layers manipulation on the map with a delay function)\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.drawPanel = function() {\r\n  if (!this.getMap()) return;\r\n  var self = this;\r\n  // Multiple event simultaneously / draw once => put drawing in the event queue\r\n  this.dcount++;\r\n  setTimeout (function(){ self.drawPanel_(); }, this.get('drawDelay') || 0);\r\n};\r\n\r\n/** Delayed draw panel control \r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.drawPanel_ = function() {\r\n  if (--this.dcount || this.dragging_) return;\r\n  var scrollTop = this.panelContainer_.scrollTop;\r\n\r\n  // Remove existing layers\r\n  this._clearLayerForLI();\r\n  this.panel_.querySelectorAll('li').forEach (function(li) {\r\n    if (!li.classList.contains('ol-header')) li.remove();\r\n  }.bind(this));\r\n  // Draw list\r\n  if (this._layerGroup) this.drawList (this.panel_, this._layerGroup.getLayers());\r\n  else if (this.getMap()) this.drawList (this.panel_, this.getMap().getLayers());\r\n\r\n  // Reset scrolltop\r\n  this.panelContainer_.scrollTop = scrollTop;\r\n};\r\n\r\n/** Change layer visibility according to the baselayer option\r\n * @param {ol.layer}\r\n * @param {Array<ol.layer>} related layers\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.switchLayerVisibility = function(l, layers) {\r\n  if (!l.get('baseLayer')) {\r\n    l.setVisible(!l.getVisible());\r\n  } else {\r\n    if (!l.getVisible()) l.setVisible(true);\r\n    layers.forEach(function(li) {\r\n      if (l!==li && li.get('baseLayer') && li.getVisible()) li.setVisible(false);\r\n    });\r\n  }\r\n};\r\n\r\n/** Check if layer is on the map (depending on resolution / zoom and extent)\r\n * @param {ol.layer}\r\n * @return {boolean}\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.testLayerVisibility = function(layer) {\r\n  if (!this.getMap()) return true;\r\n  var res = this.getMap().getView().getResolution();\r\n  var zoom = this.getMap().getView().getZoom();\r\n  // Calculate visibility on resolution or zoom\r\n  if (layer.getMaxResolution()<=res || layer.getMinResolution()>=res) {\r\n    return false;\r\n  } else if (layer.getMinZoom && (layer.getMinZoom()>=zoom || layer.getMaxZoom()<zoom)) {\r\n    return false;\r\n  } else {\r\n    // Check extent\r\n    var ex0 = layer.getExtent();\r\n    if (ex0) {\r\n      var ex = this.getMap().getView().calculateExtent(this.getMap().getSize());\r\n      return ol_extent_intersects(ex, ex0);\r\n    }\r\n    return true;\r\n  }\r\n};\r\n\r\n\r\n/** Start ordering the list\r\n*\t@param {event} e drag event\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.dragOrdering_ = function(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n  // Get params\r\n  var self = this;\r\n  var elt = e.currentTarget.parentNode.parentNode;\r\n  var start = true;\r\n  var panel = this.panel_; \r\n  var pageY;\r\n  var pageY0 = e.pageY \r\n    || (e.touches && e.touches.length && e.touches[0].pageY) \r\n    || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n  var target, dragElt;\r\n  var layer, group;\r\n  elt.parentNode.classList.add('drag');\r\n\r\n  // Stop ordering\r\n  function stop() {\r\n    if (target) {\r\n      // Get drag on parent\r\n      var drop = layer;\r\n      var isSelected = self.getSelection() === drop;\r\n      if (drop && target) {\r\n        var collection ;\r\n        if (group) collection = group.getLayers();\r\n        else collection = self._layerGroup ?  self._layerGroup.getLayers() : self.getMap().getLayers();\r\n        var layers = collection.getArray();\r\n        // Switch layers\r\n        for (var i=0; i<layers.length; i++) {\r\n          if (layers[i]==drop) {\r\n            collection.removeAt (i);\r\n            break;\r\n          }\r\n        }\r\n        for (var j=0; j<layers.length; j++) {\r\n          if (layers[j] === target) {\r\n            if (i>j) collection.insertAt (j,drop);\r\n            else collection.insertAt (j+1,drop);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      if (isSelected) self.selectLayer(drop);\r\n      \r\n      self.dispatchEvent({ type: \"reorder-end\", layer: drop, group: group });\r\n    }\r\n    \r\n    elt.parentNode.querySelectorAll('li').forEach(function(li){\r\n      li.classList.remove('dropover');\r\n      li.classList.remove('dropover-after');\r\n      li.classList.remove('dropover-before');\r\n    });\r\n    elt.classList.remove(\"drag\");\r\n    elt.parentNode.classList.remove(\"drag\");\r\n    self.element.classList.remove('drag');\r\n    if (dragElt) dragElt.remove();\r\n\r\n    ol_ext_element.removeListener(document, 'mousemove touchmove', move);\r\n    ol_ext_element.removeListener(document, 'mouseup touchend touchcancel', stop);\r\n  }\r\n\r\n  // Ordering\r\n  function move(e) {\r\n    // First drag (more than 2 px) => show drag element (ghost)\r\n    pageY = e.pageY \r\n        || (e.touches && e.touches.length && e.touches[0].pageY) \r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n    if (start && Math.abs(pageY0 - pageY) > 2) {\r\n      start = false;\r\n      elt.classList.add(\"drag\");\r\n      layer = self._getLayerForLI(elt);\r\n      target = false;\r\n      group = self._getLayerForLI(elt.parentNode.parentNode);\r\n      // Ghost div\r\n      dragElt = ol_ext_element.create('LI', { \r\n        className: 'ol-dragover',\r\n        html: elt.innerHTML,\r\n        style: { \r\n          position: \"absolute\", \r\n          \"z-index\": 10000, \r\n          left: elt.offsetLeft, \r\n          opacity: 0.5,\r\n          width: ol_ext_element.outerWidth(elt),\r\n          height: ol_ext_element.getStyle(elt,'height'),\r\n        },\r\n        parent: panel \r\n      });\r\n      self.element.classList.add('drag');\r\n      self.dispatchEvent({ type: \"reorder-start\", layer: layer, group: group });\r\n    }\r\n    // Start a new drag sequence\r\n    if (!start) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      // Ghost div\r\n      ol_ext_element.setStyle(dragElt, { top: pageY - ol_ext_element.offsetRect(panel).top + panel.scrollTop +5 });\r\n      \r\n      var li;\r\n      if (!e.touches) {\r\n        li = e.target;\r\n      } else {\r\n        li = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\r\n      }\r\n      if (li.classList.contains(\"ol-switcherbottomdiv\")) {\r\n        self.overflow(-1);\r\n      } else if (li.classList.contains(\"ol-switchertopdiv\")) {\r\n        self.overflow(1);\r\n      }\r\n      // Get associated li\r\n      while (li && li.tagName!=='LI') {\r\n        li = li.parentNode;\r\n      }\r\n      if (!li || !li.classList.contains('dropover')) {\r\n        elt.parentNode.querySelectorAll('li').forEach(function(li) {\r\n          li.classList.remove('dropover');\r\n          li.classList.remove('dropover-after');\r\n          li.classList.remove('dropover-before');\r\n        });\r\n      }\r\n      if (li && li.parentNode.classList.contains('drag') && li !== elt) {\r\n        target = self._getLayerForLI(li);\r\n        // Don't mix layer level\r\n        if (target && !target.get('allwaysOnTop') == !layer.get('allwaysOnTop')) {\r\n          li.classList.add(\"dropover\");\r\n          li.classList.add((elt.offsetTop < li.offsetTop) ? 'dropover-after' : 'dropover-before');\r\n        } else {\r\n          target = false;\r\n        }\r\n        ol_ext_element.show(dragElt);\r\n      } else {\r\n        target = false;\r\n        if (li===elt) ol_ext_element.hide(dragElt);\r\n        else ol_ext_element.show(dragElt);\r\n      }\r\n      \r\n      if (!target) dragElt.classList.add(\"forbidden\");\r\n      else dragElt.classList.remove(\"forbidden\");\r\n    }\r\n  }\r\n\r\n  // Start ordering\r\n  ol_ext_element.addListener(document, 'mousemove touchmove', move);\r\n  ol_ext_element.addListener(document, 'mouseup touchend touchcancel', stop);\r\n};\r\n\r\n\r\n/** Change opacity on drag \r\n*\t@param {event} e drag event\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.dragOpacity_ = function(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n  var self = this\r\n  // Register start params\r\n  var elt = e.target;\r\n  var layer = this._getLayerForLI(elt.parentNode.parentNode.parentNode);\r\n  if (!layer) return;\r\n  var x = e.pageX \r\n    || (e.touches && e.touches.length && e.touches[0].pageX) \r\n    || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n  var start = ol_ext_element.getStyle (elt, 'left') - x;\r\n  self.dragging_ = true;\r\n\r\n  // stop dragging\r\n  function stop() {\r\n    ol_ext_element.removeListener(document, \"mouseup touchend touchcancel\", stop);\r\n    ol_ext_element.removeListener(document, \"mousemove touchmove\", move);\r\n    self.dragging_ = false;\r\n  }\r\n  // On draggin\r\n  function move(e) {\r\n    var x = e.pageX \r\n      || (e.touches && e.touches.length && e.touches[0].pageX) \r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n    var delta = (start + x) / ol_ext_element.getStyle(elt.parentNode, 'width');\r\n    var opacity = Math.max (0, Math.min(1, delta));\r\n    ol_ext_element.setStyle (elt, { left: (opacity*100) + \"%\" });\r\n    elt.parentNode.nextElementSibling.innerHTML = Math.round(opacity*100);\r\n    layer.setOpacity(opacity);\r\n  }\r\n  // Register move\r\n  ol_ext_element.addListener(document, \"mouseup touchend touchcancel\", stop);\r\n  ol_ext_element.addListener(document, \"mousemove touchmove\", move);\r\n};\r\n\r\n\r\n/** Render a list of layer\r\n * @param {Elemen} element to render\r\n * @layers {Array{ol.layer}} list of layer to show\r\n * @api stable\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.drawList = function(ul, collection) {\r\n  var self = this;\r\n  var layers = collection.getArray();\r\n\r\n  // Change layer visibility\r\n  var setVisibility = function(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    self.switchLayerVisibility(l, collection);\r\n    if (self.get('selection') && l.getVisible()) {\r\n      self.selectLayer(l);\r\n    }\r\n    if (self.onchangeCheck) {\r\n      self.onchangeCheck(l);\r\n    }\r\n  };\r\n  // Info button click\r\n  function onInfo(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault(); \r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    self.oninfo(l); \r\n    self.dispatchEvent({ type: \"info\", layer: l });\r\n  }\r\n  // Zoom to extent button\r\n  function zoomExtent(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault(); \r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    if (self.onextent) self.onextent(l); \r\n    else self.getMap().getView().fit (l.getExtent(), self.getMap().getSize()); \r\n    self.dispatchEvent({ type: \"extent\", layer: l });\r\n  }\r\n  // Remove a layer on trash click\r\n  function removeLayer(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    var li = this.parentNode.parentNode.parentNode.parentNode;\r\n    var layer, group = self._getLayerForLI(li);\r\n    // Remove the layer from a group or from a map\r\n    if (group) {\r\n      layer = self._getLayerForLI(this.parentNode.parentNode);\r\n      group.getLayers().remove(layer);\r\n      if (group.getLayers().getLength()==0 && !group.get('noSwitcherDelete')) {\r\n        removeLayer.call(li.querySelectorAll('.layerTrash')[0], e);\r\n      }\r\n    } else {\r\n      li = this.parentNode.parentNode;\r\n      self.getMap().removeLayer(self._getLayerForLI(li));\r\n    }\r\n  }\r\n\r\n  // Create a list for a layer\r\n  function createLi(layer) {\r\n    if (!this.displayInLayerSwitcher(layer)) {\r\n      this._setLayerForLI(null, layer);\r\n      return;\r\n    } \r\n\r\n    var li = ol_ext_element.create('LI', {\r\n      className: (layer.getVisible()?\"visible \":\" \")+(layer.get('baseLayer')?\"baselayer\":\"\"),\r\n      parent: ul\r\n    });\r\n    this._setLayerForLI(li, layer);\r\n    if (this._selectedLayer === layer) {\r\n      li.classList.add('ol-layer-select');\r\n    }\r\n\r\n    var layer_buttons = ol_ext_element.create('DIV', {\r\n      className: 'ol-layerswitcher-buttons',\r\n      parent: li\r\n    });\r\n\r\n    // Content div\r\n    var d = ol_ext_element.create('DIV', {\r\n      className: 'li-content',// + (this.testLayerVisibility(layer) ? '' : ' ol-layer-hidden'),\r\n      parent: li\r\n    });\r\n    \r\n    // Visibility\r\n    ol_ext_element.create('INPUT', {\r\n      type: layer.get('baseLayer') ? 'radio' : 'checkbox',\r\n      className: 'ol-visibility',\r\n      checked: layer.getVisible(),\r\n      click: setVisibility,\r\n      parent: d\r\n    });\r\n    // Label\r\n    var label = ol_ext_element.create('LABEL', {\r\n      title: layer.get('title') || layer.get('name'),\r\n      click: setVisibility,\r\n      unselectable: 'on',\r\n      style: {\r\n        userSelect: 'none'\r\n      },\r\n      parent: d\r\n    });\r\n    label.addEventListener('selectstart', function(){ return false; });\r\n    ol_ext_element.create('SPAN', {\r\n      html: layer.get('title') || layer.get('name'),\r\n      click: function(e) {\r\n        if (this.get('selection')) {\r\n          e.stopPropagation();\r\n          this.selectLayer(layer);\r\n        }\r\n      }.bind(this),\r\n      parent: label\r\n    });\r\n\r\n    //  up/down\r\n    if (this.reordering) {\r\n      if ( (i<layers.length-1 && (layer.get(\"allwaysOnTop\") || !layers[i+1].get(\"allwaysOnTop\")) )\r\n      || (i>0 && (!layer.get(\"allwaysOnTop\") || layers[i-1].get(\"allwaysOnTop\")) ) ) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerup ol-noscroll',\r\n          title: this.tip.up,\r\n          on: { 'mousedown touchstart': function(e) { self.dragOrdering_(e) } },\r\n          parent: layer_buttons\r\n        });\r\n      }\r\n    }\r\n\r\n    // Show/hide sub layers\r\n    if (layer.getLayers) {\r\n      var nb = 0;\r\n      layer.getLayers().forEach(function(l) {\r\n        if (self.displayInLayerSwitcher(l)) nb++;\r\n      });\r\n      if (nb) {\r\n        ol_ext_element.create('DIV', {\r\n          className: layer.get(\"openInLayerSwitcher\") ? \"collapse-layers\" : \"expend-layers\",\r\n          title: this.tip.plus,\r\n          click: function() {\r\n            var l = self._getLayerForLI(this.parentNode.parentNode);\r\n            l.set(\"openInLayerSwitcher\", !l.get(\"openInLayerSwitcher\") )\r\n          },\r\n          parent: layer_buttons\r\n        });\r\n      }\r\n    }\r\n\r\n    // Info button\r\n    if (this.oninfo) {\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerInfo',\r\n        title: this.tip.info,\r\n        click: onInfo,\r\n        parent: layer_buttons\r\n      });\r\n    }\r\n    // Layer remove\r\n    if (this.hastrash && !layer.get(\"noSwitcherDelete\")) {\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerTrash',\r\n        title: this.tip.trash,\r\n        click: removeLayer,\r\n        parent: layer_buttons\r\n      });\r\n    }\r\n    // Layer extent\r\n    if (this.hasextent && layers[i].getExtent()) {\r\n      var ex = layers[i].getExtent();\r\n      if (ex.length==4 && ex[0]<ex[2] && ex[1]<ex[3]) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerExtent',\r\n          title: this.tip.extent,\r\n          click: zoomExtent,\r\n          parent: layer_buttons  \r\n        });\r\n      }\r\n    }\r\n\r\n    // Progress\r\n    if (this.show_progress && layer instanceof ol_layer_Tile) {\r\n      var p = ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-progress',\r\n        parent: d\r\n      });\r\n      this.setprogress_(layer);\r\n      layer.layerswitcher_progress = ol_ext_element.create('DIV', { parent: p });\r\n    }\r\n\r\n    // Opacity\r\n    var opacity = ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity',\r\n      // Click on the opacity line\r\n      click: function(e){\r\n        if (e.target !== this) return;\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        var op = Math.max ( 0, Math.min( 1, e.offsetX / ol_ext_element.getStyle(this, 'width')));\r\n        self._getLayerForLI(this.parentNode.parentNode).setOpacity(op);\r\n      },\r\n      parent: d\r\n    });\r\n    // Start dragging\r\n    ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity-cursor ol-noscroll',\r\n      style: { left: (layer.getOpacity()*100)+\"%\" },\r\n      on: {\r\n        'mousedown touchstart': function(e) { self.dragOpacity_ (e); }\r\n      },\r\n      parent: opacity\r\n    });\r\n    // Percent\r\n    ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity-label',\r\n      html: Math.round(layer.getOpacity()*100),\r\n      parent: d\r\n    });\r\n\r\n    // Layer group\r\n    if (layer.getLayers) {\r\n      li.classList.add('ol-layer-group');\r\n      if (layer.get(\"openInLayerSwitcher\") === true) {\r\n        var ul2 = ol_ext_element.create('UL', {\r\n          parent: li\r\n        });\r\n        this.drawList (ul2, layer.getLayers());\r\n      }\r\n    }\r\n    li.classList.add(this.getLayerClass(layer));\r\n\r\n    // Dispatch a dralist event to allow customisation\r\n    this.dispatchEvent({ type:'drawlist', layer:layer, li:li });\r\n  }\r\n\r\n  // Add the layer list\r\n  for (var i=layers.length-1; i>=0; i--) { \r\n    createLi.call(this, layers[i]); \r\n  }\r\n\r\n  this.viewChange();\r\n\r\n  if (ul === this.panel_) this.overflow();\r\n};\r\n\r\n/** Select a layer\r\n * @param {ol.layer.Layer} layer\r\n * @returns {string} the layer classname\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.getLayerClass = function(layer) {\r\n  if (!layer) return 'none';\r\n  if (layer.getLayers) return 'ol-layer-group';\r\n  if (layer instanceof ol_layer_Vector) return 'ol-layer-vector';\r\n  if (layer instanceof ol_layer_VectorTile) return 'ol-layer-vectortile';\r\n  if (layer instanceof ol_layer_Tile) return 'ol-layer-tile';\r\n  if (layer instanceof ol_layer_Image) return 'ol-layer-image';\r\n  if (layer instanceof ol_layer_Heatmap) return 'ol-layer-heatmap';\r\n  /* ol < 6 compatibility VectorImage is not defined */\r\n  // if (layer instanceof ol_layer_VectorImage) return 'ol-layer-vectorimage';\r\n  if (layer.getFeatures) return 'ol-layer-vectorimage';\r\n  /* */\r\n  return 'unknown';\r\n};\r\n\r\n/** Select a layer\r\n * @param {ol.layer.Layer} layer\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.selectLayer = function(layer, silent) {\r\n  if (!layer) {\r\n    if (!this.getMap()) return;\r\n    layer = this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)\r\n  }\r\n  this._selectedLayer = layer;\r\n  this.drawPanel();\r\n  if (!silent) this.dispatchEvent({ type: 'select', layer: layer });\r\n};\r\n\r\n/** Get selected layer\r\n * @returns {ol.layer.Layer}\r\n */\r\nol_control_LayerSwitcher.prototype.getSelection = function() {\r\n  return this._selectedLayer;\r\n};\r\n\r\n/** Handle progress bar for a layer\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.setprogress_ = function(layer) {\r\n  if (!layer.layerswitcher_progress) {\r\n    var loaded = 0;\r\n    var loading = 0;\r\n    var draw = function() {\r\n      if (loading === loaded) {\r\n        loading = loaded = 0;\r\n        ol_ext_element.setStyle(layer.layerswitcher_progress, { width: 0 });// layer.layerswitcher_progress.width(0);\r\n      } else {\r\n        ol_ext_element.setStyle(layer.layerswitcher_progress, { width: (loaded / loading * 100).toFixed(1) + '%' });// layer.layerswitcher_progress.css('width', (loaded / loading * 100).toFixed(1) + '%');\r\n      }\r\n    }\r\n    layer.getSource().on('tileloadstart', function() {\r\n      loading++;\r\n      draw();\r\n    });\r\n    layer.getSource().on('tileloadend', function() {\r\n      loaded++;\r\n      draw();\r\n    });\r\n    layer.getSource().on('tileloaderror', function() {\r\n      loaded++;\r\n      draw();\r\n    });\r\n  }\r\n};\r\n\r\nexport default ol_control_LayerSwitcher\r\n","/** Vanilla JS geographic inputs\r\n * color, size, width, font, symboles, dash, arrow, pattern\r\n */\r\nimport ol_ext_inherits from '../ext'\r\nimport ol_Object from 'ol/Object'\r\n\r\n/** @namespace  ol.ext.input\r\n */\r\n/*global ol*/\r\nif (window.ol) {\r\n  ol.ext.input = {};\r\n}\r\n\r\n/** Abstract base class; normally only used for creating subclasses and not instantiated in apps.    \r\n * @constructor\r\n * @extends {ol_Object}\r\n * @param {*} options\r\n *  @param {Element} [options.input] input element, if none create one\r\n *  @param {string} [options.type] input type, if no input\r\n *  @param {number} [options.min] input min, if no input\r\n *  @param {number} [options.max] input max, if no input\r\n *  @param {number} [options.step] input step, if no input\r\n *  @param {string|number} [options.val] input value\r\n *  @param {boolean} [options.checked] check input\r\n *  @param {boolean} [options.hidden] the input is display:none\r\n *  @param {boolean} [options.disabled] disable input\r\n *  @param {Element} [options.parent] parent element, if no input\r\n */\r\nvar ol_ext_input_Base = function(options) {\r\n  options = options || {};\r\n  \r\n  ol_Object.call(this);\r\n  \r\n  var input = this.input = options.input;\r\n  if (!input) {\r\n    input = this.input = document.createElement('INPUT');\r\n    if (options.type) input.setAttribute('type', options.type);\r\n    if (options.min !== undefined) input.setAttribute('min', options.min);\r\n    if (options.max !== undefined) input.setAttribute('max', options.max);\r\n    if (options.step !== undefined) input.setAttribute('step', options.step);\r\n    if (options.parent) options.parent.appendChild(input);\r\n  } \r\n  if (options.disabled) input.disabled = true;\r\n  if (options.checked !== undefined) input.checked = !!options.checked;\r\n  if (options.val !== undefined) input.value = options.val;\r\n  if (options.hidden) input.style.display = 'none';\r\n  input.addEventListener('focus', function() {\r\n    if (this.element) this.element.classList.add('ol-focus');\r\n  }.bind(this))\r\n  var tout;\r\n  input.addEventListener('focusout', function() {\r\n    if (this.element) {\r\n      if (tout) clearTimeout(tout);\r\n      tout = setTimeout(function() {\r\n        this.element.classList.remove('ol-focus');\r\n      }.bind(this), 0);\r\n    }\r\n  }.bind(this))\r\n};\r\nol_ext_inherits(ol_ext_input_Base, ol_Object);\r\n\r\n/** Listen to drag event\r\n * @param {Element} elt \r\n * @param {function} cback when draggin on the element\r\n * @private\r\n */\r\nol_ext_input_Base.prototype._listenDrag = function(elt, cback) {\r\n  var handle = function(e) {\r\n    this.moving = true;\r\n    this.element.classList.add('ol-moving');\r\n    var listen = function(e) {\r\n      if (e.type==='pointerup') {\r\n        document.removeEventListener('pointermove', listen);\r\n        document.removeEventListener('pointerup', listen);\r\n        document.removeEventListener('pointercancel', listen);\r\n        setTimeout(function() {\r\n          this.moving = false;\r\n          this.element.classList.remove('ol-moving');\r\n        }.bind(this));\r\n      }\r\n      if (e.target === elt) cback(e);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }.bind(this);\r\n    document.addEventListener('pointermove', listen, false);\r\n    document.addEventListener('pointerup', listen, false);\r\n    document.addEventListener('pointercancel', listen, false);\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }.bind(this)\r\n  elt.addEventListener('mousedown', handle, false);\r\n  elt.addEventListener('touchstart', handle, false);\r\n};\r\n\r\n/** Set the current value\r\n */\r\nol_ext_input_Base.prototype.setValue = function(v) {\r\n  if (v !== undefined) this.input.value = v;\r\n  this.input.dispatchEvent(new Event('change'));\r\n};\r\n\r\n/** Get the current getValue\r\n * @returns {string}\r\n */\r\nol_ext_input_Base.prototype.getValue = function() {\r\n  return this.input.value;\r\n};\r\n\r\n/** Get the input element\r\n * @returns {Element}\r\n */\r\nol_ext_input_Base.prototype.getInputElement = function() {\r\n  return this.input;\r\n};\r\n\r\nexport default ol_ext_input_Base\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Base from './Base'\r\n\r\n/** Checkbox input\r\n * @constructor\r\n * @extends {ol_ext_input_Base}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element|string} [options.html] label content\r\n *  @param {string} [options.after] label garnish (placed after)\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n *  @param {boolean} [options.autoClose=true]\r\n *  @param {boolean} [options.visible=false] display the input\r\n */\r\nvar ol_ext_input_Checkbox = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Base.call(this, options);\r\n\r\n  var label = this.element = document.createElement('LABEL');\r\n  if (options.html instanceof Element) label.appendChild(options.html)\r\n  else if (options.html !== undefined) label.innerHTML = options.html;\r\n  label.className = ('ol-ext-check ol-ext-checkbox '  + (options.className || '')).trim();\r\n\r\n  if (this.input.parentNode) this.input.parentNode.insertBefore(label, this.input);\r\n  label.appendChild(this.input);\r\n  label.appendChild(document.createElement('SPAN'));\r\n  if (options.after) {\r\n    label.appendChild(document.createTextNode(options.after));\r\n  }\r\n\r\n  // Handle change\r\n  this.input.addEventListener('change', function() {\r\n    this.dispatchEvent({ type: 'check', checked: this.input.checked, value: this.input.value });\r\n  }.bind(this));\r\n\r\n};\r\nol_ext_inherits(ol_ext_input_Checkbox, ol_ext_input_Base);\r\n  \r\nol_ext_input_Checkbox.prototype.isChecked = function () {\r\n  return this.input.checked;\r\n};\r\n\r\nexport default ol_ext_input_Checkbox\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Checkbox from './Checkbox'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Switch = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Checkbox.call(this, options);\r\n\r\n  this.element.className = ('ol-ext-toggle-switch ' + (options.className || '')).trim();\r\n};\r\nol_ext_inherits(ol_ext_input_Switch, ol_ext_input_Checkbox);\r\n  \r\nexport default ol_ext_input_Switch\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Checkbox from './Checkbox'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Radio = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Checkbox.call(this, options);\r\n\r\n  this.element.className = ('ol-ext-check ol-ext-radio ' + (options.className || '')).trim();\r\n};\r\nol_ext_inherits(ol_ext_input_Radio, ol_ext_input_Checkbox);\r\n  \r\nexport default ol_ext_input_Radio\r\n","/** Vanilla JS helper to manipulate DOM without jQuery\r\n * @see https://github.com/nefe/You-Dont-Need-jQuery\r\n * @see https://plainjs.com/javascript/\r\n * @see http://youmightnotneedjquery.com/\r\n */\r\nimport ol_ext_input_Checkbox from './input/Checkbox'\r\nimport ol_ext_input_Switch from './input/Switch'\r\nimport ol_ext_input_Radio from './input/Radio'\r\n\r\n/** @namespace ol.ext.element */\r\nvar ol_ext_element = {};\r\n\r\n/**\r\n * Create an element\r\n * @param {string} tagName The element tag, use 'TEXT' to create a text node\r\n * @param {*} options\r\n *  @param {string} options.className className The element class name \r\n *  @param {Element} options.parent Parent to append the element as child\r\n *  @param {Element|string} [options.html] Content of the element (if text is not set)\r\n *  @param {string} [options.text] Text content (if html is not set)\r\n *  @param {Element|string} [options.options] when tagName = SELECT a list of options as key:value to add to the select\r\n *  @param {string} options.* Any other attribut to add to the element\r\n */\r\nol_ext_element.create = function (tagName, options) {\r\n  options = options || {};\r\n  var elt;\r\n  // Create text node\r\n  if (tagName === 'TEXT') {\r\n    elt = document.createTextNode(options.html||'');\r\n    if (options.parent) options.parent.appendChild(elt);\r\n  } else {\r\n    // Other element\r\n    elt = document.createElement(tagName);\r\n    if (/button/i.test(tagName)) elt.setAttribute('type', 'button');\r\n    for (var attr in options) {\r\n      switch (attr) {\r\n        case 'className': {\r\n          if (options.className && options.className.trim) elt.setAttribute('class', options.className.trim());\r\n          break;\r\n        }\r\n        case 'text': {\r\n          elt.innerText = options.text;\r\n          break;\r\n        }\r\n        case 'html': {\r\n          if (options.html instanceof Element) elt.appendChild(options.html)\r\n          else if (options.html!==undefined) elt.innerHTML = options.html;\r\n          break;\r\n        }\r\n        case 'parent': {\r\n          if (options.parent) options.parent.appendChild(elt);\r\n          break;\r\n        }\r\n        case 'options': {\r\n          if (/select/i.test(tagName)) {\r\n            for (var i in options.options) {\r\n              ol_ext_element.create('OPTION', {\r\n                html: i,\r\n                value: options.options[i],\r\n                parent: elt          \r\n              })\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 'style': {\r\n          ol_ext_element.setStyle(elt, options.style);\r\n          break;\r\n        }\r\n        case 'change':\r\n        case 'click': {\r\n          ol_ext_element.addListener(elt, attr, options[attr]);\r\n          break;\r\n        }\r\n        case 'on': {\r\n          for (var e in options.on) {\r\n            ol_ext_element.addListener(elt, e, options.on[e]);\r\n          }\r\n          break;\r\n        }\r\n        case 'checked': {\r\n          elt.checked = !!options.checked;\r\n          break;\r\n        }\r\n        default: {\r\n          elt.setAttribute(attr, options[attr]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return elt;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {boolean} options.checked\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createSwitch = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    type: 'checkbox',\r\n    on: options.on,\r\n    click: options.click,\r\n    change: options.change,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  new ol_ext_input_Switch(opt);\r\n  return input;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {string} [options.name] input name\r\n *  @param {string} [options.type=checkbox] input type: radio or checkbox\r\n *  @param {string} options.value input value\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createCheck = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    name: options.name,\r\n    type: (options.type==='radio' ? 'radio' : 'checkbox'),\r\n    on: options.on,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  if (options.type === 'radio') {\r\n    new ol_ext_input_Radio(opt);\r\n  } else {\r\n    new ol_ext_input_Checkbox(opt);\r\n  }\r\n  return input;\r\n};\r\n\r\n/** Set inner html or append a child element to an element\r\n * @param {Element} element\r\n * @param {Element|string} html Content of the element\r\n */\r\nol_ext_element.setHTML = function(element, html) {\r\n  if (html instanceof Element) element.appendChild(html)\r\n  else if (html!==undefined) element.innerHTML = html;\r\n};\r\n\r\n/** Append text into an elemnt\r\n * @param {Element} element\r\n * @param {string} text text content\r\n */\r\nol_ext_element.appendText = function(element, text) {\r\n  element.appendChild(document.createTextNode(text||''));\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.addListener = function (element, eventType, fn, useCapture ) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.addEventListener(e, fn, useCapture);\r\n  });\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.removeListener = function (element, eventType, fn) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.removeEventListener(e, fn);\r\n  });\r\n};\r\n\r\n/**\r\n * Show an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.show = function (element) {\r\n  element.style.display = '';\r\n};\r\n\r\n/**\r\n * Hide an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.hide = function (element) {\r\n  element.style.display = 'none';\r\n};\r\n\r\n/**\r\n * Test if an element is hihdden\r\n * @param {Element} element\r\n * @return {boolean}\r\n */\r\nol_ext_element.hidden = function (element) {\r\n  return ol_ext_element.getStyle(element, 'display') === 'none';\r\n};\r\n\r\n/**\r\n * Toggle an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.toggle = function (element) {\r\n  element.style.display = (element.style.display==='none' ? '' : 'none');\r\n};\r\n\r\n/** Set style of an element\r\n * @param {DOMElement} el the element\r\n * @param {*} st list of style\r\n */\r\nol_ext_element.setStyle = function(el, st) {\r\n  for (var s in st) {\r\n    switch (s) {\r\n      case 'top':\r\n      case 'left':\r\n      case 'bottom':\r\n      case 'right':\r\n      case 'minWidth':\r\n      case 'maxWidth':\r\n      case 'width':\r\n      case 'height': {\r\n        if (typeof(st[s]) === 'number') {\r\n          el.style[s] = st[s]+'px';\r\n        } else {\r\n          el.style[s] = st[s];\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        el.style[s] = st[s];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get style propertie of an element\r\n * @param {DOMElement} el the element\r\n * @param {string} styleProp Propertie name\r\n * @return {*} style value\r\n */\r\nol_ext_element.getStyle = function(el, styleProp) {\r\n  var value, defaultView = (el.ownerDocument || document).defaultView;\r\n  // W3C standard way:\r\n  if (defaultView && defaultView.getComputedStyle) {\r\n    // sanitize property name to css notation\r\n    // (hypen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n    value = defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n  } else if (el.currentStyle) { // IE\r\n    // sanitize property name to camelCase\r\n    styleProp = styleProp.replace(/-(\\w)/g, function(str, letter) {\r\n      return letter.toUpperCase();\r\n    });\r\n    value = el.currentStyle[styleProp];\r\n    // convert other units to pixels on IE\r\n    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) { \r\n      return (function(value) {\r\n        var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;\r\n        el.runtimeStyle.left = el.currentStyle.left;\r\n        el.style.left = value || 0;\r\n        value = el.style.pixelLeft + \"px\";\r\n        el.style.left = oldLeft;\r\n        el.runtimeStyle.left = oldRsLeft;\r\n        return value;\r\n      })(value);\r\n    }\r\n  }\r\n  if (/px$/.test(value)) return parseInt(value);\r\n  return value;\r\n};\r\n\r\n/** Get outerHeight of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerHeight = function(elt) {\r\n  return elt.offsetHeight + ol_ext_element.getStyle(elt, 'marginBottom')\r\n};\r\n\r\n/** Get outerWidth of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerWidth = function(elt) {\r\n  return elt.offsetWidth + ol_ext_element.getStyle(elt, 'marginLeft')\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @return {*} \r\n */\r\nol_ext_element.offsetRect = function(elt) {\r\n  var rect = elt.getBoundingClientRect();\r\n  return {\r\n    top: rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0),\r\n    left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0),\r\n    height: rect.height || (rect.bottom - rect.top),\r\n    width: rect.width || (rect.right - rect.left)\r\n  }\r\n};\r\n\r\n/** Get element offset \r\n * @param {ELement} elt\r\n * @returns {Object} top/left offset\r\n */\r\nol_ext_element.getFixedOffset = function(elt) {\r\n  var offset = {\r\n    left:0,\r\n    top:0\r\n  };\r\n  var getOffset = function(parent) {\r\n    if (!parent) return offset;\r\n    // Check position when transform\r\n    if (ol_ext_element.getStyle(parent, 'position') === 'absolute'\r\n      && ol_ext_element.getStyle(parent, 'transform') !== \"none\") {\r\n      var r = parent.getBoundingClientRect();\r\n      offset.left += r.left; \r\n      offset.top += r.top; \r\n      return offset;\r\n    }\r\n    return getOffset(parent.offsetParent)\r\n  }\r\n  return getOffset(elt.offsetParent)\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @param {boolean} fixed get fixed position\r\n * @return {Object} \r\n */\r\nol_ext_element.positionRect = function(elt, fixed) {\r\n  var gleft = 0;\r\n  var gtop = 0;\r\n\r\n  var getRect = function( parent ) {\r\n    if (parent) {\r\n      gleft += parent.offsetLeft;\r\n      gtop += parent.offsetTop;\r\n      return getRect(parent.offsetParent);\r\n    } else {\r\n      var r = {\r\n        top: elt.offsetTop + gtop,\r\n        left: elt.offsetLeft + gleft\r\n      };\r\n      if (fixed) {\r\n        r.top -= (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        r.left -= (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0);\r\n      }\r\n      r.bottom = r.top + elt.offsetHeight;\r\n      r.right = r.top + elt.offsetWidth;\r\n      return r;\r\n    }\r\n  }; \r\n  return getRect(elt.offsetParent);\r\n}\r\n\r\n/** Make a div scrollable without scrollbar.\r\n * On touch devices the default behavior is preserved\r\n * @param {DOMElement} elt\r\n * @param {*} options\r\n *  @param {function} [options.onmove] a function that takes a boolean indicating that the div is scrolling\r\n *  @param {boolean} [options.vertical=false] \r\n *  @param {boolean} [options.animate=true] add kinetic to scroll\r\n *  @param {boolean} [options.mousewheel=false] enable mousewheel to scroll\r\n *  @param {boolean} [options.minibar=false] add a mini scrollbar to the parent element (only vertical scrolling)\r\n * @returns {Object} an object with a refresh function\r\n */\r\nol_ext_element.scrollDiv = function(elt, options) {\r\n  options = options || {};\r\n  var pos = false;\r\n  var speed = 0;\r\n  var d, dt = 0;\r\n\r\n  var onmove = (typeof(options.onmove) === 'function' ? options.onmove : function(){});\r\n  //var page = options.vertical ? 'pageY' : 'pageX';\r\n  var page = options.vertical ? 'screenY' : 'screenX';\r\n  var scroll = options.vertical ? 'scrollTop' : 'scrollLeft';\r\n  var moving = false;\r\n  // Factor scale content / container\r\n  var scale, isbar;\r\n\r\n  // Update the minibar\r\n  var updateCounter = 0;\r\n  var updateMinibar = function() {\r\n    if (scrollbar) {\r\n      updateCounter++;\r\n      setTimeout(updateMinibarDelay);\r\n    }\r\n  }\r\n  var updateMinibarDelay = function() {\r\n    if (scrollbar) {\r\n      updateCounter--;\r\n      // Prevent multi call\r\n      if (updateCounter) return;\r\n      // Container height\r\n      var pheight = elt.clientHeight;\r\n      // Content height\r\n      var height = elt.scrollHeight;\r\n      // Set scrollbar value\r\n      scale = pheight / height;\r\n      scrollbar.style.height = scale * 100 + '%';\r\n      scrollbar.style.top = (elt.scrollTop / height * 100) + '%';\r\n      scrollContainer.style.height = pheight + 'px';\r\n      // No scroll\r\n      if (pheight > height - .5) scrollContainer.classList.add('ol-100pc');\r\n      else scrollContainer.classList.remove('ol-100pc');\r\n    }\r\n  }\r\n  \r\n  // Handle pointer down\r\n  var onPointerDown = function(e) {\r\n    // Prevent scroll\r\n    if (e.target.classList.contains('ol-noscroll')) return;\r\n    // Start scrolling\r\n    moving = false;\r\n    pos = e[page];\r\n    dt = new Date();\r\n    elt.classList.add('ol-move');\r\n    // Prevent elt dragging\r\n    e.preventDefault();\r\n    // Listen scroll\r\n    window.addEventListener('pointermove', onPointerMove);\r\n    ol_ext_element.addListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  }\r\n\r\n  // Register scroll\r\n  var onPointerMove = function(e) {\r\n    moving = true;\r\n    if (pos !== false) {\r\n      var delta = (isbar ? -1/scale : 1) * (pos - e[page]);\r\n      elt[scroll] += delta;\r\n      d = new Date();\r\n      if (d-dt) {\r\n        speed = (speed + delta / (d - dt))/2;\r\n      }\r\n      pos = e[page];\r\n      dt = d;\r\n      // Tell we are moving\r\n      if (delta) onmove(true);\r\n    }\r\n  };\r\n  \r\n  // Animate scroll\r\n  var animate = function(to) {\r\n    var step = (to>0) ? Math.min(100, to/2) : Math.max(-100, to/2);\r\n    to -= step;\r\n    elt[scroll] += step;\r\n    if (-1 < to && to < 1) {\r\n      if (moving) setTimeout(function() { elt.classList.remove('ol-move'); });\r\n      else elt.classList.remove('ol-move');\r\n      moving = false;\r\n      onmove(false);\r\n    } else {\r\n      setTimeout(function() {\r\n        animate(to);\r\n      }, 40);\r\n    }\r\n  }\r\n  \r\n  // Initialize scroll container for minibar\r\n  var scrollContainer, scrollbar;\r\n  if (options.vertical && options.minibar) {\r\n    var init = function(b) {\r\n      // only once\r\n      elt.removeEventListener('pointermove', init);\r\n      elt.parentNode.classList.add('ol-miniscroll');\r\n      scrollbar = ol_ext_element.create('DIV');\r\n      scrollContainer = ol_ext_element.create('DIV', {\r\n        className: 'ol-scroll',\r\n        html: scrollbar\r\n      });\r\n      elt.parentNode.insertBefore(scrollContainer, elt);\r\n      // Move scrollbar\r\n      scrollbar.addEventListener('pointerdown', function(e) {\r\n        isbar = true;\r\n        onPointerDown(e)\r\n      });\r\n      // Handle mousewheel\r\n      if (options.mousewheel) {\r\n        ol_ext_element.addListener(scrollContainer, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n        ol_ext_element.addListener(scrollbar, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n      }\r\n      // Update on enter\r\n      elt.parentNode.addEventListener('pointerenter', updateMinibar);\r\n      // Update on resize\r\n      window.addEventListener('resize', updateMinibar);\r\n      // Update\r\n      if (b!==false) updateMinibar();\r\n    };\r\n    // Allready inserted in the DOM\r\n    if (elt.parentNode) init(false);\r\n    // or wait when ready\r\n    else elt.addEventListener('pointermove', init);\r\n    // Update on scroll\r\n    elt.addEventListener('scroll', function() {\r\n      updateMinibar();\r\n    });\r\n  }\r\n\r\n  // Enable scroll\r\n  elt.style['touch-action'] = 'none';\r\n  elt.style['overflow'] = 'hidden';\r\n  elt.classList.add('ol-scrolldiv');\r\n  \r\n  // Start scrolling\r\n  ol_ext_element.addListener(elt, ['pointerdown'], function(e) {\r\n    isbar = false;\r\n    onPointerDown(e)\r\n  });\r\n\r\n  // Prevet click when moving...\r\n  elt.addEventListener('click', function(e) {\r\n    if (elt.classList.contains('ol-move')) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  }, true);\r\n\r\n  // Stop scrolling\r\n  var onPointerUp = function(e) {\r\n    dt = new Date() - dt;\r\n    if (dt>100 || isbar) {\r\n      // User stop: no speed\r\n      speed = 0;\r\n    } else if (dt>0) {\r\n      // Calculate new speed\r\n      speed = ((speed||0) + (pos - e[page]) / dt) / 2;\r\n    }\r\n    animate(options.animate===false ? 0 : speed*200);\r\n    pos = false;\r\n    speed = 0;\r\n    dt = 0;\r\n    // Add class to handle click (on iframe / double-click)\r\n    if (!elt.classList.contains('ol-move')) {\r\n      elt.classList.add('ol-hasClick')\r\n      setTimeout(function() { elt.classList.remove('ol-hasClick'); }, 500);\r\n    } else {\r\n      elt.classList.remove('ol-hasClick');\r\n    }\r\n    isbar = false;\r\n    window.removeEventListener('pointermove', onPointerMove)\r\n    ol_ext_element.removeListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  };\r\n\r\n  // Handle mousewheel\r\n  var onMouseWheel = function(e) {\r\n    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\r\n    elt.classList.add('ol-move');\r\n    elt[scroll] -= delta*30;\r\n    elt.classList.remove('ol-move');\r\n    return false;\r\n  }\r\n  if (options.mousewheel) { // && !elt.classList.contains('ol-touch')) {\r\n    ol_ext_element.addListener(elt, \r\n      ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n      onMouseWheel\r\n    );\r\n  }\r\n\r\n  return { \r\n    refresh: updateMinibar\r\n  }\r\n};\r\n\r\n/** Dispatch an event to an Element \r\n * @param {string} eventName\r\n * @param {Element} element\r\n */\r\nol_ext_element.dispatchEvent = function (eventName, element) {\r\n  var event;\r\n  try {\r\n    event = new CustomEvent(eventName);\r\n  } catch(e) {\r\n    // Try customevent on IE\r\n    event = document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, {});\r\n  }\r\n  element.dispatchEvent(event);\r\n};\r\n\r\nexport default ol_ext_element\r\n","/** @namespace  ol.ext\r\n */\r\n/*global ol*/\r\nif (window.ol && !ol.ext) {\r\n  ol.ext = {};\r\n}\r\n\r\n/** Inherit the prototype methods from one constructor into another.\r\n * replace deprecated ol method\r\n *\r\n * @param {!Function} childCtor Child constructor.\r\n * @param {!Function} parentCtor Parent constructor.\r\n * @function module:ol.inherits\r\n * @api\r\n */\r\nvar ol_ext_inherits = function(child,parent) {\r\n  child.prototype = Object.create(parent.prototype);\r\n  child.prototype.constructor = child;\r\n};\r\n\r\n// Compatibilty with ol > 5 to be removed when v6 is out\r\nif (window.ol) {\r\n  if (!ol.inherits) ol.inherits = ol_ext_inherits;\r\n}\r\n\r\n/* IE Polyfill */\r\n// NodeList.forEach\r\nif (window.NodeList && !NodeList.prototype.forEach) {\r\n  NodeList.prototype.forEach = Array.prototype.forEach;\r\n}\r\n// Element.remove\r\nif (window.Element && !Element.prototype.remove) {\r\n  Element.prototype.remove = function() {\r\n    if (this.parentNode) this.parentNode.removeChild(this);\r\n  }\r\n}\r\n/* End Polyfill */\r\n\r\nexport { ol_ext_inherits }\r\nexport default ol_ext_inherits\r\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LENGTH: 'length',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nvar CollectionEvent = /** @class */ (function (_super) {\n    __extends(CollectionEvent, _super);\n    /**\n     * @param {import(\"./CollectionEventType.js\").default} type Type.\n     * @param {*} [opt_element] Element.\n     * @param {number} [opt_index] The index of the added or removed element.\n     */\n    function CollectionEvent(type, opt_element, opt_index) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The element that is added to or removed from the collection.\n         * @type {*}\n         * @api\n         */\n        _this.element = opt_element;\n        /**\n         * The index of the added or removed element.\n         * @type {number}\n         * @api\n         */\n        _this.index = opt_index;\n        return _this;\n    }\n    return CollectionEvent;\n}(Event));\nexport { CollectionEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nvar Collection = /** @class */ (function (_super) {\n    __extends(Collection, _super);\n    /**\n     * @param {Array<T>} [opt_array] Array.\n     * @param {Options} [opt_options] Collection options.\n     */\n    function Collection(opt_array, opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {CollectionOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.unique_ = !!options.unique;\n        /**\n         * @private\n         * @type {!Array<T>}\n         */\n        _this.array_ = opt_array ? opt_array : [];\n        if (_this.unique_) {\n            for (var i = 0, ii = _this.array_.length; i < ii; ++i) {\n                _this.assertUnique_(_this.array_[i], i);\n            }\n        }\n        _this.updateLength_();\n        return _this;\n    }\n    /**\n     * Remove all elements from the collection.\n     * @api\n     */\n    Collection.prototype.clear = function () {\n        while (this.getLength() > 0) {\n            this.pop();\n        }\n    };\n    /**\n     * Add elements to the collection.  This pushes each item in the provided array\n     * to the end of the collection.\n     * @param {!Array<T>} arr Array.\n     * @return {Collection<T>} This collection.\n     * @api\n     */\n    Collection.prototype.extend = function (arr) {\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            this.push(arr[i]);\n        }\n        return this;\n    };\n    /**\n     * Iterate over each element, calling the provided callback.\n     * @param {function(T, number, Array<T>): *} f The function to call\n     *     for every element. This function takes 3 arguments (the element, the\n     *     index and the array). The return value is ignored.\n     * @api\n     */\n    Collection.prototype.forEach = function (f) {\n        var array = this.array_;\n        for (var i = 0, ii = array.length; i < ii; ++i) {\n            f(array[i], i, array);\n        }\n    };\n    /**\n     * Get a reference to the underlying Array object. Warning: if the array\n     * is mutated, no events will be dispatched by the collection, and the\n     * collection's \"length\" property won't be in sync with the actual length\n     * of the array.\n     * @return {!Array<T>} Array.\n     * @api\n     */\n    Collection.prototype.getArray = function () {\n        return this.array_;\n    };\n    /**\n     * Get the element at the provided index.\n     * @param {number} index Index.\n     * @return {T} Element.\n     * @api\n     */\n    Collection.prototype.item = function (index) {\n        return this.array_[index];\n    };\n    /**\n     * Get the length of this collection.\n     * @return {number} The length of the array.\n     * @observable\n     * @api\n     */\n    Collection.prototype.getLength = function () {\n        return this.get(Property.LENGTH);\n    };\n    /**\n     * Insert an element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.insertAt = function (index, elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        this.array_.splice(index, 0, elem);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n    };\n    /**\n     * Remove the last element of the collection and return it.\n     * Return `undefined` if the collection is empty.\n     * @return {T|undefined} Element.\n     * @api\n     */\n    Collection.prototype.pop = function () {\n        return this.removeAt(this.getLength() - 1);\n    };\n    /**\n     * Insert the provided element at the end of the collection.\n     * @param {T} elem Element.\n     * @return {number} New length of the collection.\n     * @api\n     */\n    Collection.prototype.push = function (elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        var n = this.getLength();\n        this.insertAt(n, elem);\n        return this.getLength();\n    };\n    /**\n     * Remove the first occurrence of an element from the collection.\n     * @param {T} elem Element.\n     * @return {T|undefined} The removed element or undefined if none found.\n     * @api\n     */\n    Collection.prototype.remove = function (elem) {\n        var arr = this.array_;\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            if (arr[i] === elem) {\n                return this.removeAt(i);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Remove the element at the provided index and return it.\n     * Return `undefined` if the collection does not contain this index.\n     * @param {number} index Index.\n     * @return {T|undefined} Value.\n     * @api\n     */\n    Collection.prototype.removeAt = function (index) {\n        var prev = this.array_[index];\n        this.array_.splice(index, 1);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n        return prev;\n    };\n    /**\n     * Set the element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.setAt = function (index, elem) {\n        var n = this.getLength();\n        if (index < n) {\n            if (this.unique_) {\n                this.assertUnique_(elem, index);\n            }\n            var prev = this.array_[index];\n            this.array_[index] = elem;\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n        }\n        else {\n            for (var j = n; j < index; ++j) {\n                this.insertAt(j, undefined);\n            }\n            this.insertAt(index, elem);\n        }\n    };\n    /**\n     * @private\n     */\n    Collection.prototype.updateLength_ = function () {\n        this.set(Property.LENGTH, this.array_.length);\n    };\n    /**\n     * @private\n     * @param {T} elem Element.\n     * @param {number} [opt_except] Optional index to ignore.\n     */\n    Collection.prototype.assertUnique_ = function (elem, opt_except) {\n        for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n            if (this.array_[i] === elem && i !== opt_except) {\n                throw new AssertionError(58);\n            }\n        }\n    };\n    return Collection;\n}(BaseObject));\nexport default Collection;\n//# sourceMappingURL=Collection.js.map","/**\n * @module ol/CollectionEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when an item is added to the collection.\n     * @event module:ol/Collection.CollectionEvent#add\n     * @api\n     */\n    ADD: 'add',\n    /**\n     * Triggered when an item is removed from the collection.\n     * @event module:ol/Collection.CollectionEvent#remove\n     * @api\n     */\n    REMOVE: 'remove',\n};\n//# sourceMappingURL=CollectionEventType.js.map","/**\n * @module ol/Disposable\n */\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = /** @class */ (function () {\n    function Disposable() {\n        /**\n         * The object has already been disposed.\n         * @type {boolean}\n         * @protected\n         */\n        this.disposed = false;\n    }\n    /**\n     * Clean up.\n     */\n    Disposable.prototype.dispose = function () {\n        if (!this.disposed) {\n            this.disposed = true;\n            this.disposeInternal();\n        }\n    };\n    /**\n     * Extension point for disposable objects.\n     * @protected\n     */\n    Disposable.prototype.disposeInternal = function () { };\n    return Disposable;\n}());\nexport default Disposable;\n//# sourceMappingURL=Disposable.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n/***\n * @template Geometry\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object~BaseObject} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n */\nvar Feature = /** @class */ (function (_super) {\n    __extends(Feature, _super);\n    /**\n     * @param {Geometry|ObjectWithGeometry<Geometry>} [opt_geometryOrProperties]\n     *     You may pass a Geometry object directly, or an object literal containing\n     *     properties. If you pass an object literal, you may include a Geometry\n     *     associated with a `geometry` key.\n     */\n    function Feature(opt_geometryOrProperties) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {FeatureOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {number|string|undefined}\n         */\n        _this.id_ = undefined;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.geometryName_ = 'geometry';\n        /**\n         * User provided style.\n         * @private\n         * @type {import(\"./style/Style.js\").StyleLike}\n         */\n        _this.style_ = null;\n        /**\n         * @private\n         * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n         */\n        _this.styleFunction_ = undefined;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.geometryChangeKey_ = null;\n        _this.addChangeListener(_this.geometryName_, _this.handleGeometryChanged_);\n        if (opt_geometryOrProperties) {\n            if (typeof (\n            /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry) === 'function') {\n                var geometry = /** @type {Geometry} */ (opt_geometryOrProperties);\n                _this.setGeometry(geometry);\n            }\n            else {\n                /** @type {Object<string, *>} */\n                var properties = opt_geometryOrProperties;\n                _this.setProperties(properties);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Clone this feature. If the original feature has a geometry it\n     * is also cloned. The feature id is not set in the clone.\n     * @return {Feature<Geometry>} The clone.\n     * @api\n     */\n    Feature.prototype.clone = function () {\n        var clone = /** @type {Feature<Geometry>} */ (new Feature(this.hasProperties() ? this.getProperties() : null));\n        clone.setGeometryName(this.getGeometryName());\n        var geometry = this.getGeometry();\n        if (geometry) {\n            clone.setGeometry(/** @type {Geometry} */ (geometry.clone()));\n        }\n        var style = this.getStyle();\n        if (style) {\n            clone.setStyle(style);\n        }\n        return clone;\n    };\n    /**\n     * Get the feature's default geometry.  A feature may have any number of named\n     * geometries.  The \"default\" geometry (the one that is rendered by default) is\n     * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n     * @return {Geometry|undefined} The default geometry for the feature.\n     * @api\n     * @observable\n     */\n    Feature.prototype.getGeometry = function () {\n        return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n    };\n    /**\n     * Get the feature identifier.  This is a stable identifier for the feature and\n     * is either set when reading data from a remote source or set explicitly by\n     * calling {@link module:ol/Feature~Feature#setId}.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Feature.prototype.getId = function () {\n        return this.id_;\n    };\n    /**\n     * Get the name of the feature's default geometry.  By default, the default\n     * geometry is named `geometry`.\n     * @return {string} Get the property name associated with the default geometry\n     *     for this feature.\n     * @api\n     */\n    Feature.prototype.getGeometryName = function () {\n        return this.geometryName_;\n    };\n    /**\n     * Get the feature's style. Will return what was provided to the\n     * {@link module:ol/Feature~Feature#setStyle} method.\n     * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n     * @api\n     */\n    Feature.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the feature's style function.\n     * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n     * representing the current style of this feature.\n     * @api\n     */\n    Feature.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChanged_ = function () {\n        if (this.geometryChangeKey_) {\n            unlistenByKey(this.geometryChangeKey_);\n            this.geometryChangeKey_ = null;\n        }\n        var geometry = this.getGeometry();\n        if (geometry) {\n            this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * Set the default geometry for the feature.  This will update the property\n     * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n     * @param {Geometry|undefined} geometry The new geometry.\n     * @api\n     * @observable\n     */\n    Feature.prototype.setGeometry = function (geometry) {\n        this.set(this.geometryName_, geometry);\n    };\n    /**\n     * Set the style for the feature to override the layer style.  This can be a\n     * single style object, an array of styles, or a function that takes a\n     * resolution and returns an array of styles. To unset the feature style, call\n     * `setStyle()` without arguments or a falsey value.\n     * @param {import(\"./style/Style.js\").StyleLike} [opt_style] Style for this feature.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setStyle = function (opt_style) {\n        this.style_ = opt_style;\n        this.styleFunction_ = !opt_style\n            ? undefined\n            : createStyleFunction(opt_style);\n        this.changed();\n    };\n    /**\n     * Set the feature id.  The feature id is considered stable and may be used when\n     * requesting features or comparing identifiers returned from a remote source.\n     * The feature id can be used with the\n     * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n     * @param {number|string|undefined} id The feature id.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setId = function (id) {\n        this.id_ = id;\n        this.changed();\n    };\n    /**\n     * Set the property name to be used when getting the feature's default geometry.\n     * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n     * this name will be returned.\n     * @param {string} name The property name of the default geometry.\n     * @api\n     */\n    Feature.prototype.setGeometryName = function (name) {\n        this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.geometryName_ = name;\n        this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.handleGeometryChanged_();\n    };\n    return Feature;\n}(BaseObject));\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n    if (typeof obj === 'function') {\n        return obj;\n    }\n    else {\n        /**\n         * @type {Array<import(\"./style/Style.js\").default>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof ( /** @type {?} */(obj).getZIndex) === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n            var style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n            styles_1 = [style];\n        }\n        return function () {\n            return styles_1;\n        };\n    }\n}\nexport default Feature;\n//# sourceMappingURL=Feature.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageBase\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { abstract } from './util.js';\n/**\n * @abstract\n */\nvar ImageBase = /** @class */ (function (_super) {\n    __extends(ImageBase, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./ImageState.js\").default} state State.\n     */\n    function ImageBase(extent, resolution, pixelRatio, state) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.extent = extent;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @protected\n         * @type {number|undefined}\n         */\n        _this.resolution = resolution;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = state;\n        return _this;\n    }\n    /**\n     * @protected\n     */\n    ImageBase.prototype.changed = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    ImageBase.prototype.getExtent = function () {\n        return this.extent;\n    };\n    /**\n     * @abstract\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     */\n    ImageBase.prototype.getImage = function () {\n        return abstract();\n    };\n    /**\n     * @return {number} PixelRatio.\n     */\n    ImageBase.prototype.getPixelRatio = function () {\n        return this.pixelRatio_;\n    };\n    /**\n     * @return {number} Resolution.\n     */\n    ImageBase.prototype.getResolution = function () {\n        return /** @type {number} */ (this.resolution);\n    };\n    /**\n     * @return {import(\"./ImageState.js\").default} State.\n     */\n    ImageBase.prototype.getState = function () {\n        return this.state;\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageBase.prototype.load = function () {\n        abstract();\n    };\n    return ImageBase;\n}(EventTarget));\nexport default ImageBase;\n//# sourceMappingURL=ImageBase.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Image\n */\nimport EventType from './events/EventType.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport { IMAGE_DECODE } from './has.js';\nimport { getHeight } from './extent.js';\nimport { listenOnce, unlistenByKey } from './events.js';\n/**\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\nvar ImageWrapper = /** @class */ (function (_super) {\n    __extends(ImageWrapper, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {LoadFunction} imageLoadFunction Image load function.\n     */\n    function ImageWrapper(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n        var _this = _super.call(this, extent, resolution, pixelRatio, ImageState.IDLE) || this;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = ImageState.IDLE;\n        /**\n         * @private\n         * @type {LoadFunction}\n         */\n        _this.imageLoadFunction_ = imageLoadFunction;\n        return _this;\n    }\n    /**\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageWrapper.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageError_ = function () {\n        this.state = ImageState.ERROR;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageLoad_ = function () {\n        if (this.resolution === undefined) {\n            this.resolution = getHeight(this.extent) / this.image_.height;\n        }\n        this.state = ImageState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load the image or retry if loading previously failed.\n     * Loading is taken care of by the tile queue, and calling this method is\n     * only needed for preloading or for reloading in case of an error.\n     * @api\n     */\n    ImageWrapper.prototype.load = function () {\n        if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n            this.state = ImageState.LOADING;\n            this.changed();\n            this.imageLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n     */\n    ImageWrapper.prototype.setImage = function (image) {\n        this.image_ = image;\n        this.resolution = getHeight(this.extent) / this.image_.height;\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageWrapper;\n}(ImageBase));\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n    var img = /** @type {HTMLImageElement} */ (image);\n    var listening = true;\n    var decoding = false;\n    var loaded = false;\n    var listenerKeys = [\n        listenOnce(img, EventType.LOAD, function () {\n            loaded = true;\n            if (!decoding) {\n                loadHandler();\n            }\n        }),\n    ];\n    if (img.src && IMAGE_DECODE) {\n        decoding = true;\n        img\n            .decode()\n            .then(function () {\n            if (listening) {\n                loadHandler();\n            }\n        })\n            .catch(function (error) {\n            if (listening) {\n                if (loaded) {\n                    loadHandler();\n                }\n                else {\n                    errorHandler();\n                }\n            }\n        });\n    }\n    else {\n        listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n    }\n    return function unlisten() {\n        listening = false;\n        listenerKeys.forEach(unlistenByKey);\n    };\n}\nexport default ImageWrapper;\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/ImageState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    ERROR: 3,\n    EMPTY: 4,\n};\n//# sourceMappingURL=ImageState.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport { createCanvasContext2D } from './dom.js';\nimport { listenImage } from './Image.js';\nvar ImageTile = /** @class */ (function (_super) {\n    __extends(ImageTile, _super);\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"./TileState.js\").default} state State.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n     * @param {import(\"./Tile.js\").Options} [opt_options] Tile options.\n     */\n    function ImageTile(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n        var _this = _super.call(this, tileCoord, state, opt_options) || this;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ = crossOrigin;\n        /**\n         * Image URI\n         *\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        _this.key = src;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"./Tile.js\").LoadFunction}\n         */\n        _this.tileLoadFunction_ = tileLoadFunction;\n        return _this;\n    }\n    /**\n     * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageTile.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Sets an HTML image element for this tile (may be a Canvas or preloaded Image).\n     * @param {HTMLCanvasElement|HTMLImageElement} element Element.\n     */\n    ImageTile.prototype.setImage = function (element) {\n        this.image_ = element;\n        this.state = TileState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageError_ = function () {\n        this.state = TileState.ERROR;\n        this.unlistenImage_();\n        this.image_ = getBlankImage();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageLoad_ = function () {\n        var image = /** @type {HTMLImageElement} */ (this.image_);\n        if (image.naturalWidth && image.naturalHeight) {\n            this.state = TileState.LOADED;\n        }\n        else {\n            this.state = TileState.EMPTY;\n        }\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @api\n     */\n    ImageTile.prototype.load = function () {\n        if (this.state == TileState.ERROR) {\n            this.state = TileState.IDLE;\n            this.image_ = new Image();\n            if (this.crossOrigin_ !== null) {\n                this.image_.crossOrigin = this.crossOrigin_;\n            }\n        }\n        if (this.state == TileState.IDLE) {\n            this.state = TileState.LOADING;\n            this.changed();\n            this.tileLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageTile;\n}(Tile));\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n    var ctx = createCanvasContext2D(1, 1);\n    ctx.fillStyle = 'rgba(0,0,0,0)';\n    ctx.fillRect(0, 0, 1, 1);\n    return ctx.canvas;\n}\nexport default ImageTile;\n//# sourceMappingURL=ImageTile.js.map","/**\n * @module ol/Kinetic\n */\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nvar Kinetic = /** @class */ (function () {\n    /**\n     * @param {number} decay Rate of decay (must be negative).\n     * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n     * @param {number} delay Delay to consider to calculate the kinetic\n     *     initial values (milliseconds).\n     */\n    function Kinetic(decay, minVelocity, delay) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.decay_ = decay;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minVelocity_ = minVelocity;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.delay_ = delay;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.points_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        this.angle_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.initialVelocity_ = 0;\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    Kinetic.prototype.begin = function () {\n        this.points_.length = 0;\n        this.angle_ = 0;\n        this.initialVelocity_ = 0;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     */\n    Kinetic.prototype.update = function (x, y) {\n        this.points_.push(x, y, Date.now());\n    };\n    /**\n     * @return {boolean} Whether we should do kinetic animation.\n     */\n    Kinetic.prototype.end = function () {\n        if (this.points_.length < 6) {\n            // at least 2 points are required (i.e. there must be at least 6 elements\n            // in the array)\n            return false;\n        }\n        var delay = Date.now() - this.delay_;\n        var lastIndex = this.points_.length - 3;\n        if (this.points_[lastIndex + 2] < delay) {\n            // the last tracked point is too old, which means that the user stopped\n            // panning before releasing the map\n            return false;\n        }\n        // get the first point which still falls into the delay time\n        var firstIndex = lastIndex - 3;\n        while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n            firstIndex -= 3;\n        }\n        var duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n        // we don't want a duration of 0 (divide by zero)\n        // we also make sure the user panned for a duration of at least one frame\n        // (1/60s) to compute sane displacement values\n        if (duration < 1000 / 60) {\n            return false;\n        }\n        var dx = this.points_[lastIndex] - this.points_[firstIndex];\n        var dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n        this.angle_ = Math.atan2(dy, dx);\n        this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n        return this.initialVelocity_ > this.minVelocity_;\n    };\n    /**\n     * @return {number} Total distance travelled (pixels).\n     */\n    Kinetic.prototype.getDistance = function () {\n        return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n    };\n    /**\n     * @return {number} Angle of the kinetic panning animation (radians).\n     */\n    Kinetic.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    return Kinetic;\n}());\nexport default Kinetic;\n//# sourceMappingURL=Kinetic.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nvar MapBrowserEvent = /** @class */ (function (_super) {\n    __extends(MapBrowserEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {EVENT} originalEvent Original event.\n     * @param {boolean} [opt_dragging] Is the map currently being dragged?\n     * @param {import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     * @param {Array<PointerEvent>} [opt_activePointers] Active pointers.\n     */\n    function MapBrowserEvent(type, map, originalEvent, opt_dragging, opt_frameState, opt_activePointers) {\n        var _this = _super.call(this, type, map, opt_frameState) || this;\n        /**\n         * The original browser event.\n         * @const\n         * @type {EVENT}\n         * @api\n         */\n        _this.originalEvent = originalEvent;\n        /**\n         * The map pixel relative to the viewport corresponding to the original browser event.\n         * @type {?import(\"./pixel.js\").Pixel}\n         */\n        _this.pixel_ = null;\n        /**\n         * The coordinate in the user projection corresponding to the original browser event.\n         * @type {?import(\"./coordinate.js\").Coordinate}\n         */\n        _this.coordinate_ = null;\n        /**\n         * Indicates if the map is currently being dragged. Only set for\n         * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n         *\n         * @type {boolean}\n         * @api\n         */\n        _this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n        /**\n         * @type {Array<PointerEvent>|undefined}\n         */\n        _this.activePointers = opt_activePointers;\n        return _this;\n    }\n    Object.defineProperty(MapBrowserEvent.prototype, \"pixel\", {\n        /**\n         * The map pixel relative to the viewport corresponding to the original event.\n         * @type {import(\"./pixel.js\").Pixel}\n         * @api\n         */\n        get: function () {\n            if (!this.pixel_) {\n                this.pixel_ = this.map.getEventPixel(this.originalEvent);\n            }\n            return this.pixel_;\n        },\n        set: function (pixel) {\n            this.pixel_ = pixel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MapBrowserEvent.prototype, \"coordinate\", {\n        /**\n         * The coordinate corresponding to the original browser event.  This will be in the user\n         * projection if one is set.  Otherwise it will be in the view projection.\n         * @type {import(\"./coordinate.js\").Coordinate}\n         * @api\n         */\n        get: function () {\n            if (!this.coordinate_) {\n                this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n            }\n            return this.coordinate_;\n        },\n        set: function (coordinate) {\n            this.coordinate_ = coordinate;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Prevents the default browser action.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n     * @api\n     */\n    MapBrowserEvent.prototype.preventDefault = function () {\n        _super.prototype.preventDefault.call(this);\n        if ('preventDefault' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n        }\n    };\n    /**\n     * Prevents further propagation of the current event.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n     * @api\n     */\n    MapBrowserEvent.prototype.stopPropagation = function () {\n        _super.prototype.stopPropagation.call(this);\n        if ('stopPropagation' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n        }\n    };\n    return MapBrowserEvent;\n}(MapEvent));\nexport default MapBrowserEvent;\n//# sourceMappingURL=MapBrowserEvent.js.map","/**\n * @module ol/MapBrowserEventHandler\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport { PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { VOID } from './functions.js';\nimport { getValues } from './obj.js';\nimport { listen, unlistenByKey } from './events.js';\nvar MapBrowserEventHandler = /** @class */ (function (_super) {\n    __extends(MapBrowserEventHandler, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n     * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n     */\n    function MapBrowserEventHandler(map, moveTolerance) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * This is the element that we will listen to the real events on.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @private\n         */\n        _this.map_ = map;\n        /**\n         * @type {any}\n         * @private\n         */\n        _this.clickTimeoutId_;\n        /**\n         * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n         * @type {boolean}\n         */\n        _this.emulateClicks_ = false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.dragging_ = false;\n        /**\n         * @type {!Array<import(\"./events.js\").EventsKey>}\n         * @private\n         */\n        _this.dragListenerKeys_ = [];\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n        /**\n         * The most recent \"down\" type event (or null if none have occurred).\n         * Set on pointerdown.\n         * @type {PointerEvent|null}\n         * @private\n         */\n        _this.down_ = null;\n        var element = _this.map_.getViewport();\n        /**\n         * @type {Array<PointerEvent>}\n         * @private\n         */\n        _this.activePointers_ = [];\n        /**\n         * @type {!Object<number, Event>}\n         * @private\n         */\n        _this.trackedTouches_ = {};\n        _this.element_ = element;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.pointerdownListenerKey_ = listen(element, PointerEventType.POINTERDOWN, _this.handlePointerDown_, _this);\n        /**\n         * @type {PointerEvent}\n         * @private\n         */\n        _this.originalPointerMoveEvent_;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.relayedListenerKey_ = listen(element, PointerEventType.POINTERMOVE, _this.relayMoveEvent_, _this);\n        /**\n         * @private\n         */\n        _this.boundHandleTouchMove_ = _this.handleTouchMove_.bind(_this);\n        _this.element_.addEventListener(EventType.TOUCHMOVE, _this.boundHandleTouchMove_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n        return _this;\n    }\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.emulateClick_ = function (pointerEvent) {\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.CLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        if (this.clickTimeoutId_ !== undefined) {\n            // double-click\n            clearTimeout(this.clickTimeoutId_);\n            this.clickTimeoutId_ = undefined;\n            newEvent = new MapBrowserEvent(MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n            this.dispatchEvent(newEvent);\n        }\n        else {\n            // click\n            this.clickTimeoutId_ = setTimeout(\n            /** @this {MapBrowserEventHandler} */\n            function () {\n                this.clickTimeoutId_ = undefined;\n                var newEvent = new MapBrowserEvent(MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n                this.dispatchEvent(newEvent);\n            }.bind(this), 250);\n        }\n    };\n    /**\n     * Keeps track on how many pointers are currently active.\n     *\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.updateActivePointers_ = function (pointerEvent) {\n        var event = pointerEvent;\n        var id = event.pointerId;\n        if (event.type == MapBrowserEventType.POINTERUP ||\n            event.type == MapBrowserEventType.POINTERCANCEL) {\n            delete this.trackedTouches_[id];\n            for (var pointerId in this.trackedTouches_) {\n                if (this.trackedTouches_[pointerId].target !== event.target) {\n                    // Some platforms assign a new pointerId when the target changes.\n                    // If this happens, delete one tracked pointer. If there is more\n                    // than one tracked pointer for the old target, it will be cleared\n                    // by subsequent POINTERUP events from other pointers.\n                    delete this.trackedTouches_[pointerId];\n                    break;\n                }\n            }\n        }\n        else if (event.type == MapBrowserEventType.POINTERDOWN ||\n            event.type == MapBrowserEventType.POINTERMOVE) {\n            this.trackedTouches_[id] = event;\n        }\n        this.activePointers_ = getValues(this.trackedTouches_);\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerUp_ = function (pointerEvent) {\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERUP, this.map_, pointerEvent, undefined, undefined, this.activePointers_);\n        this.dispatchEvent(newEvent);\n        // We emulate click events on left mouse button click, touch contact, and pen\n        // contact. isMouseActionButton returns true in these cases (evt.button is set\n        // to 0).\n        // See http://www.w3.org/TR/pointerevents/#button-states\n        // We only fire click, singleclick, and doubleclick if nobody has called\n        // event.preventDefault().\n        if (this.emulateClicks_ &&\n            !newEvent.defaultPrevented &&\n            !this.dragging_ &&\n            this.isMouseActionButton_(pointerEvent)) {\n            this.emulateClick_(this.down_);\n        }\n        if (this.activePointers_.length === 0) {\n            this.dragListenerKeys_.forEach(unlistenByKey);\n            this.dragListenerKeys_.length = 0;\n            this.dragging_ = false;\n            this.down_ = null;\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} If the left mouse button was pressed.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMouseActionButton_ = function (pointerEvent) {\n        return pointerEvent.button === 0;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerDown_ = function (pointerEvent) {\n        this.emulateClicks_ = this.activePointers_.length === 0;\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent, undefined, undefined, this.activePointers_);\n        this.dispatchEvent(newEvent);\n        // Store a copy of the down event\n        this.down_ = /** @type {PointerEvent} */ ({});\n        for (var property in pointerEvent) {\n            var value = pointerEvent[property];\n            this.down_[property] = typeof value === 'function' ? VOID : value;\n        }\n        if (this.dragListenerKeys_.length === 0) {\n            var doc = this.map_.getOwnerDocument();\n            this.dragListenerKeys_.push(listen(doc, MapBrowserEventType.POINTERMOVE, this.handlePointerMove_, this), listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this), \n            /* Note that the listener for `pointercancel is set up on\n             * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n             * the `pointerup` and `pointermove` listeners.\n             *\n             * The reason for this is the following: `TouchSource.vacuumTouches_()`\n             * issues `pointercancel` events, when there was no `touchend` for a\n             * `touchstart`. Now, let's say a first `touchstart` is registered on\n             * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n             * But `documentPointerEventHandler_` doesn't know about the first\n             * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n             * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n             * only registered there.\n             */\n            listen(this.element_, MapBrowserEventType.POINTERCANCEL, this.handlePointerUp_, this));\n            if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n                this.dragListenerKeys_.push(listen(this.element_.getRootNode(), MapBrowserEventType.POINTERUP, this.handlePointerUp_, this));\n            }\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerMove_ = function (pointerEvent) {\n        // Between pointerdown and pointerup, pointermove events are triggered.\n        // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n        // moved a significant distance.\n        if (this.isMoving_(pointerEvent)) {\n            this.updateActivePointers_(pointerEvent);\n            this.dragging_ = true;\n            var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent, this.dragging_, undefined, this.activePointers_);\n            this.dispatchEvent(newEvent);\n        }\n    };\n    /**\n     * Wrap and relay a pointermove event.\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.relayMoveEvent_ = function (pointerEvent) {\n        this.originalPointerMoveEvent_ = pointerEvent;\n        var dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n        this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE, this.map_, pointerEvent, dragging));\n    };\n    /**\n     * Flexible handling of a `touch-action: none` css equivalent: because calling\n     * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n     * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n     * when an interaction (currently `DragPan` handles the event.\n     * @param {TouchEvent} event Event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handleTouchMove_ = function (event) {\n        // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n        // may not be initialized yet when we get here on a platform without native pointer events.\n        var originalEvent = this.originalPointerMoveEvent_;\n        if ((!originalEvent || originalEvent.defaultPrevented) &&\n            (typeof event.cancelable !== 'boolean' || event.cancelable === true)) {\n            event.preventDefault();\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} Is moving.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMoving_ = function (pointerEvent) {\n        return (this.dragging_ ||\n            Math.abs(pointerEvent.clientX - this.down_.clientX) >\n                this.moveTolerance_ ||\n            Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_);\n    };\n    /**\n     * Clean up.\n     */\n    MapBrowserEventHandler.prototype.disposeInternal = function () {\n        if (this.relayedListenerKey_) {\n            unlistenByKey(this.relayedListenerKey_);\n            this.relayedListenerKey_ = null;\n        }\n        this.element_.removeEventListener(EventType.TOUCHMOVE, this.boundHandleTouchMove_);\n        if (this.pointerdownListenerKey_) {\n            unlistenByKey(this.pointerdownListenerKey_);\n            this.pointerdownListenerKey_ = null;\n        }\n        this.dragListenerKeys_.forEach(unlistenByKey);\n        this.dragListenerKeys_.length = 0;\n        this.element_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return MapBrowserEventHandler;\n}(Target));\nexport default MapBrowserEventHandler;\n//# sourceMappingURL=MapBrowserEventHandler.js.map","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    /**\n     * A true single click with no dragging and no double click. Note that this\n     * event is delayed by 250 ms to ensure that it is not a double click.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n     * @api\n     */\n    SINGLECLICK: 'singleclick',\n    /**\n     * A click with no dragging. A double click will fire two of this.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n     * @api\n     */\n    CLICK: EventType.CLICK,\n    /**\n     * A true double click, with no dragging.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n     * @api\n     */\n    DBLCLICK: EventType.DBLCLICK,\n    /**\n     * Triggered when a pointer is dragged.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n     * @api\n     */\n    POINTERDRAG: 'pointerdrag',\n    /**\n     * Triggered when a pointer is moved. Note that on touch devices this is\n     * triggered when the map is panned, so is not the same as mousemove.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n     * @api\n     */\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel',\n};\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n//# sourceMappingURL=MapBrowserEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nvar MapEvent = /** @class */ (function (_super) {\n    __extends(MapEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapEvent(type, map, opt_frameState) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The map where the event occurred.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @api\n         */\n        _this.map = map;\n        /**\n         * The frame state at the time of the event.\n         * @type {?import(\"./PluggableMap.js\").FrameState}\n         * @api\n         */\n        _this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n        return _this;\n    }\n    return MapEvent;\n}(Event));\nexport default MapEvent;\n//# sourceMappingURL=MapEvent.js.map","/**\n * @module ol/MapEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered after a map frame is rendered.\n     * @event module:ol/MapEvent~MapEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered when the map starts moving.\n     * @event module:ol/MapEvent~MapEvent#movestart\n     * @api\n     */\n    MOVESTART: 'movestart',\n    /**\n     * Triggered after the map is moved.\n     * @event module:ol/MapEvent~MapEvent#moveend\n     * @api\n     */\n    MOVEEND: 'moveend',\n    /**\n     * Triggered when loading of additional map data (tiles, images, features) starts.\n     * @event module:ol/MapEvent~MapEvent#loadstart\n     * @api\n     */\n    LOADSTART: 'loadstart',\n    /**\n     * Triggered when loading of additional map data has completed.\n     * @event module:ol/MapEvent~MapEvent#loadend\n     * @api\n     */\n    LOADEND: 'loadend',\n};\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n//# sourceMappingURL=MapEventType.js.map","/**\n * @module ol/MapProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    LAYERGROUP: 'layergroup',\n    SIZE: 'size',\n    TARGET: 'target',\n    VIEW: 'view',\n};\n//# sourceMappingURL=MapProperty.js.map"],"names":["ol_control_LayerSwitcher","options","element","self","this","dcount","show_progress","oninfo","onextent","hasextent","extent","hastrash","trash","reordering","_layers","_layerGroup","layerGroup","getLayers","onchangeCheck","displayInLayerSwitcher","target","className","switcherClass","collapsed","classList","add","button","type","parent","addEventListener","e","toggle","dispatchEvent","contains","preventDefault","overflow","mouseover","remove","minibar","noScroll","topv","click","botv","_noScroll","panel_","panelContainer_","html","Math","max","min","wheelDelta","detail","stopPropagation","header_","set","drawDelay","selection","setTimeout","mbar","mousewheel","vertical","on","refresh","bind","prototype","tip","up","down","info","plus","layer","get","setMap","map","drawPanel","_listener","i","moveend","viewChange","size","change","getLayerGroup","show","hide","isOpen","setHeader","dir","height","h","hp","dh","offsetTop","top","li","querySelectorAll","lh","round","_setLayerForLI","listeners","push","setLayerOpacity","setLayerVisibility","key","querySelector","style","left","getOpacity","checked","getVisible","_clearLayerForLI","forEach","l","_getLayerForLI","testLayerVisibility","getPanel","getMap","drawPanel_","dragging_","scrollTop","drawList","switchLayerVisibility","layers","setVisible","res","getView","getResolution","zoom","getZoom","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","ex0","getExtent","ex","calculateExtent","getSize","dragOrdering_","pageY","dragElt","group","elt","currentTarget","parentNode","start","panel","pageY0","touches","length","changedTouches","stop","drop","isSelected","getSelection","collection","getArray","removeAt","j","insertAt","selectLayer","document","move","abs","innerHTML","position","offsetLeft","opacity","width","elementFromPoint","clientX","clientY","tagName","dragOpacity_","x","pageX","delta","nextElementSibling","setOpacity","ul","setVisibility","onInfo","zoomExtent","fit","removeLayer","getLength","call","createLi","_selectedLayer","layer_buttons","d","label","title","unselectable","userSelect","nb","p","setprogress_","layerswitcher_progress","op","offsetX","ul2","getLayerClass","getFeatures","silent","item","loaded","loading","draw","toFixed","getSource","window","ol","ext","input","ol_ext_input_Base","ol_Object","tout","createElement","setAttribute","undefined","step","appendChild","disabled","val","value","hidden","display","clearTimeout","_listenDrag","cback","handle","moving","listen","removeEventListener","setValue","v","Event","getValue","getInputElement","ol_ext_input_Checkbox","Element","trim","insertBefore","after","createTextNode","isChecked","ol_ext_input_Switch","ol_ext_input_Radio","ol_ext_element","attr","test","innerText","text","create","setStyle","addListener","opt","Object","assign","name","eventType","fn","useCapture","split","getStyle","el","st","s","styleProp","defaultView","ownerDocument","getComputedStyle","replace","toLowerCase","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","parseInt","offsetHeight","offsetWidth","rect","getBoundingClientRect","pageYOffset","documentElement","body","pageXOffset","scrollLeft","bottom","right","offset","getOffset","r","offsetParent","fixed","gleft","gtop","getRect","scale","isbar","scrollContainer","scrollbar","pos","speed","dt","onmove","page","scroll","updateCounter","updateMinibar","updateMinibarDelay","pheight","clientHeight","scrollHeight","onPointerDown","Date","onPointerMove","onPointerUp","animate","to","init","b","onMouseWheel","removeListener","eventName","event","CustomEvent","createEvent","initCustomEvent","ol_ext_inherits","child","constructor","inherits","NodeList","Array","removeChild","__extends","extendStatics","setPrototypeOf","__proto__","hasOwnProperty","TypeError","String","__","Property","LENGTH","CollectionEvent","_super","opt_element","opt_index","_this","index","Collection","opt_array","opt_options","once","un","unique_","unique","array_","ii","assertUnique_","updateLength_","clear","pop","extend","arr","f","array","elem","splice","n","prev","setAt","opt_except","ADD","REMOVE","Disposable","disposed","dispose","disposeInternal","Feature","opt_geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","geometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","getId","getStyleFunction","handleGeometryChange_","changed","opt_style","createStyleFunction","setId","id","removeChangeListener","obj","styles_1","isArray","ImageBase","resolution","pixelRatio","state","pixelRatio_","EventType","getImage","getPixelRatio","getState","load","ImageWrapper","src","crossOrigin","imageLoadFunction","ImageState","src_","image_","Image","unlisten_","imageLoadFunction_","handleImageError_","unlistenImage_","handleImageLoad_","listenImage","setImage","image","loadHandler","errorHandler","img","listening","decoding","listenerKeys","decode","then","catch","error","IDLE","LOADING","LOADED","ERROR","EMPTY","ImageTile","tileCoord","tileLoadFunction","crossOrigin_","tileLoadFunction_","getBlankImage","naturalWidth","naturalHeight","ctx","fillStyle","fillRect","canvas","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","begin","update","y","now","end","lastIndex","firstIndex","duration","dx","dy","atan2","sqrt","getDistance","getAngle","MapBrowserEvent","originalEvent","opt_dragging","opt_frameState","opt_activePointers","pixel_","coordinate_","dragging","activePointers","defineProperty","getEventPixel","pixel","enumerable","configurable","getCoordinateFromPixel","coordinate","MapBrowserEventHandler","moveTolerance","map_","clickTimeoutId_","emulateClicks_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","element_","pointerdownListenerKey_","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","relayMoveEvent_","boundHandleTouchMove_","handleTouchMove_","passive","emulateClick_","pointerEvent","newEvent","updateActivePointers_","pointerId","handlePointerUp_","defaultPrevented","isMouseActionButton_","property","doc","getOwnerDocument","handlePointerMove_","getRootNode","isMoving_","cancelable","SINGLECLICK","CLICK","DBLCLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","MapEvent","frameState","POSTRENDER","MOVESTART","MOVEEND","LOADSTART","LOADEND","LAYERGROUP","SIZE","TARGET","VIEW"],"sourceRoot":""}
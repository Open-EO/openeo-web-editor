{"version":3,"sources":["webpack:///./node_modules/ol-ext/control/LayerSwitcher.js","webpack:///./node_modules/ol/MapBrowserEventType.js","webpack:///./node_modules/ol/CollectionEventType.js","webpack:///./node_modules/ol/Kinetic.js","webpack:///./node_modules/ol/Observable.js","webpack:///./node_modules/ol/Feature.js","webpack:///./node_modules/ol/MapBrowserEvent.js","webpack:///./node_modules/ol/MapEventType.js","webpack:///./node_modules/ol/MapBrowserEventHandler.js","webpack:///./node_modules/ol/PluggableMap.js","webpack:///./node_modules/ol/Map.js","webpack:///./node_modules/ol/ImageBase.js","webpack:///./node_modules/ol/Image.js","webpack:///./node_modules/ol-ext/util/input/Base.js","webpack:///./node_modules/ol-ext/util/input/Checkbox.js","webpack:///./node_modules/ol-ext/util/input/Switch.js","webpack:///./node_modules/ol-ext/util/input/Radio.js","webpack:///./node_modules/ol-ext/util/element.js","webpack:///./node_modules/ol/MapEvent.js","webpack:///./node_modules/ol/ObjectEventType.js","webpack:///./node_modules/ol/ImageTile.js","webpack:///./node_modules/ol/AssertionError.js","webpack:///./node_modules/ol/ImageState.js","webpack:///./node_modules/mgrs/mgrs.js","webpack:///./node_modules/ol-ext/util/ext.js","webpack:///./node_modules/ol/Disposable.js","webpack:///./node_modules/ol/Object.js","webpack:///./node_modules/ol/Collection.js","webpack:///./node_modules/ol/MapProperty.js"],"names":["ol_control_LayerSwitcher","options","element","self","this","dcount","show_progress","oninfo","onextent","hasextent","extent","hastrash","trash","reordering","_layers","_layerGroup","layerGroup","getLayers","onchangeCheck","displayInLayerSwitcher","target","create","className","switcherClass","collapsed","classList","add","button","type","parent","addEventListener","e","toggle","dispatchEvent","contains","preventDefault","overflow","mouseover","remove","minibar","noScroll","topv","click","botv","_noScroll","panel_","panelContainer_","html","addListener","Math","max","min","wheelDelta","detail","stopPropagation","header_","call","set","drawDelay","selection","setTimeout","mbar","scrollDiv","mousewheel","vertical","on","refresh","bind","prototype","tip","up","down","info","plus","layer","get","setMap","map","drawPanel","_listener","i","moveend","viewChange","size","change","getLayerGroup","show","hide","isOpen","setHeader","setHTML","dir","hidden","setStyle","height","h","outerHeight","hp","dh","offsetTop","top","li","querySelectorAll","lh","getStyle","round","_setLayerForLI","listeners","push","setLayerOpacity","setLayerVisibility","key","querySelector","style","left","getOpacity","checked","getVisible","_clearLayerForLI","forEach","l","_getLayerForLI","testLayerVisibility","getPanel","getMap","drawPanel_","dragging_","scrollTop","drawList","switchLayerVisibility","layers","setVisible","res","getView","getResolution","zoom","getZoom","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","ex0","getExtent","ex","calculateExtent","getSize","dragOrdering_","pageY","dragElt","group","elt","currentTarget","parentNode","start","panel","pageY0","touches","length","changedTouches","stop","drop","isSelected","getSelection","collection","getArray","removeAt","j","insertAt","selectLayer","removeListener","document","move","abs","innerHTML","position","offsetLeft","opacity","width","outerWidth","offsetRect","elementFromPoint","clientX","clientY","tagName","dragOpacity_","x","pageX","delta","nextElementSibling","setOpacity","ul","setVisibility","onInfo","zoomExtent","fit","removeLayer","getLength","createLi","_selectedLayer","layer_buttons","d","label","title","unselectable","userSelect","nb","p","setprogress_","layerswitcher_progress","op","offsetX","ul2","getLayerClass","getFeatures","silent","item","loaded","loading","draw","toFixed","getSource","SINGLECLICK","CLICK","DBLCLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","ADD","REMOVE","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","begin","update","y","Date","now","end","lastIndex","firstIndex","duration","dx","dy","atan2","sqrt","getDistance","getAngle","__extends","extendStatics","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","TypeError","String","__","constructor","Observable","_super","_this","once","un","revision_","changed","CHANGE","getRevision","onInternal","listener","isArray","len","keys","onceInternal","ol_key","unInternal","unByKey","ii","removeEventListener","Feature","opt_geometryOrProperties","id_","undefined","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","geometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","getId","getStyleFunction","handleGeometryChange_","opt_style","createStyleFunction","setId","id","name","removeChangeListener","obj","styles_1","MapBrowserEvent","originalEvent","opt_dragging","opt_frameState","pixel_","coordinate_","dragging","defineProperty","getEventPixel","pixel","enumerable","configurable","getCoordinateFromPixel","coordinate","POSTRENDER","MOVESTART","MOVEEND","LOADSTART","LOADEND","MapBrowserEventHandler","moveTolerance","map_","clickTimeoutId_","emulateClicks_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","element_","pointerdownListenerKey_","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","relayEvent_","boundHandleTouchMove_","handleTouchMove_","EventType","TOUCHMOVE","passive","emulateClick_","pointerEvent","newEvent","MapBrowserEventType","clearTimeout","updateActivePointers_","event","pointerId","handlePointerUp_","defaultPrevented","isMouseActionButton_","property","value","doc","getOwnerDocument","handlePointerMove_","getRootNode","isMoving_","cancelable","disposeInternal","Target","removeLayerMapProperty","Layer","setMapInternal","setLayerMapProperty","PluggableMap","optionsInternal","createOptionsInternal","renderComplete_","loaded_","boundHandleBrowserEvent_","handleBrowserEvent","maxTilesLoading_","maxTilesLoading","pixelRatio_","pixelRatio","postRenderTimeoutHandle_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","createElement","window","overlayContainer_","zIndex","pointerEvents","appendChild","overlayContainerStopEvent_","mapBrowserEventHandler_","keyboardEventTarget_","keyboardEventTarget","targetChangeHandlerKeys_","controls","Collection","interactions","overlays_","overlays","overlayIdIndex_","renderer_","postRenderFunctions_","tileQueue_","TileQueue","getTilePriority","handleTileChange_","MapProperty","LAYERGROUP","handleLayerGroupChanged_","VIEW","handleViewChanged_","SIZE","handleSizeChanged_","TARGET","handleTargetChanged_","values","view","View","then","viewOptions","setView","CollectionEventType","addOverlayInternal_","overlay","toString","control","interaction","createRenderer","Error","addControl","getControls","addInteraction","getInteractions","addLayer","handleLayerAdd_","addOverlay","getOverlays","setTarget","forEachFeatureAtPixel","callback","opt_options","getCoordinateFromPixelInternal","hitTolerance","layerFilter","checkWrapped","forEachFeatureAtCoordinate","getFeaturesAtPixel","features","feature","getAllLayers","addLayersFrom","forEachLayerAtPixel","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","getEventCoordinateInternal","viewportPosition","getBoundingClientRect","eventPosition","getTarget","getTargetElement","getElementById","getProjection","frameState","pixelToCoordinateTransform","slice","getOverlayById","setLayers","clear","extend","getLoadingOrNotReady","layerStatesArray","getLayerStatesArray","state","visible","renderer","getRenderer","ready","source","getPixelFromCoordinate","viewCoordinate","getPixelFromCoordinateInternal","coordinateToPixelTransform","getOverlayContainer","getOverlayContainerStopEvent","targetElement","ownerDocument","tile","tileSourceKey","tileCenter","tileResolution","browserEvent","opt_type","mapBrowserEvent","handleMapBrowserEvent","eventType","WHEEL","KEYDOWN","rootNode","documentElement","interactionsArray","getActive","cont","handleEvent","propagationStopped","handlePostRender","tileQueue","isEmpty","maxTotalLoading","maxNewLoads","hints","viewHints","ViewHint","ANIMATING","INTERACTING","lowOnFrameBudget","time","getTilesLoading","reprioritize","loadMoreTiles","animate","hasListener","RENDERCOMPLETE","dispatchRenderEvent","MapEvent","MapEventType","postRenderFunctions","getAnimating","resolveConstraints","render","CONTEXTMENU","dispose","defaultView","KEYPRESS","RESIZE","updateSize","cancelAnimationFrame","handleViewPropertyChanged_","updateViewportSize_","ObjectEventType","PROPERTYCHANGE","Group","handleLayerRemove_","isRendered","renderSync","redrawText","layerStates","hasRenderer","handleFontsChanged","requestAnimationFrame","removeControl","removeInteraction","removeOverlay","previousFrameState","isDef","getHints","viewState","getState","declutterTree","center","resolution","rotation","index","layerIndex","usedTiles","wantedTiles","mapId","renderTargets","nextCenter","nextResolution","isNaN","nextRotation","nextExtent","renderFrame","apply","moveStart","idle","getCount","setLayerGroup","oldLayerGroup","setSize","computedStyle","getComputedStyle","offsetWidth","parseFloat","offsetHeight","getClientRects","console","warn","parseInt","setViewportSize","Map","onFocusOnly","Composite","ImageBase","getImage","getPixelRatio","load","ImageWrapper","src","crossOrigin","imageLoadFunction","ImageState","IDLE","src_","image_","Image","unlisten_","imageLoadFunction_","handleImageError_","ERROR","unlistenImage_","handleImageLoad_","LOADED","LOADING","listenImage","setImage","image","loadHandler","errorHandler","img","listening","decoding","listenerKeys","LOAD","decode","catch","error","ol","ext","input","ol_ext_input_Base","ol_Object","tout","setAttribute","step","disabled","val","display","_listenDrag","cback","handle","moving","listen","setValue","v","Event","getValue","getInputElement","ol_ext_input_Checkbox","Element","trim","insertBefore","after","createTextNode","isChecked","ol_ext_input_Switch","ol_ext_input_Radio","ol_ext_element","attr","test","innerText","text","opt","assign","log","fn","useCapture","split","el","st","s","styleProp","replace","toLowerCase","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","rect","pageYOffset","body","pageXOffset","scrollLeft","bottom","right","offset","getOffset","r","offsetParent","fixed","gleft","gtop","getRect","scale","isbar","scrollContainer","scrollbar","pos","speed","dt","onmove","page","scroll","updateCounter","updateMinibar","updateMinibarDelay","pheight","clientHeight","scrollHeight","onPointerDown","onPointerMove","onPointerUp","to","init","onMouseWheel","eventName","CustomEvent","createEvent","initCustomEvent","ImageTile","tileCoord","tileLoadFunction","crossOrigin_","tileLoadFunction_","getBlankImage","naturalWidth","naturalHeight","EMPTY","ctx","fillStyle","fillRect","canvas","AssertionError","code","path","message","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","A","I","O","V","Z","forward","ll","accuracy","encode","LLtoUTM","lat","lon","inverse","mgrs","bbox","UTMtoLL","toPoint","degToRad","deg","PI","radToDeg","rad","LongOrigin","eccPrimeSquared","N","T","C","M","LongOriginRad","ZoneNumber","Lat","Long","a","eccSquared","k0","LatRad","LongRad","floor","sin","tan","cos","UTMEasting","UTMNorthing","northing","easting","zoneNumber","zoneLetter","getLetterDesignator","utm","N1","T1","C1","R1","D","mu","phi1Rad","e1","pow","result","topRight","LetterDesignator","seasting","snorthing","get100kID","substr","setParm","get100kSetForZone","setColumn","setRow","getLetter100kID","column","row","parm","colOrigin","charCodeAt","rowOrigin","colInt","rowInt","rollover","twoLetter","fromCharCode","mgrsString","testChar","hunK","sb","charAt","substring","east100k","getEastingFromChar","north100k","getNorthingFromChar","getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sep","sepEasting","sepNorthing","curCol","eastingValue","rewindMarker","n","curRow","northingValue","ol_ext_inherits","child","inherits","NodeList","removeChild","Disposable","disposed","ObjectEvent","oldValue","BaseObject","opt_values","values_","getKeys","notify","concat","opt_silent","applyProperties","unset","Property","LENGTH","CollectionEvent","opt_element","opt_index","opt_array","unique_","unique","array_","assertUnique_","updateLength_","pop","arr","f","array","elem","splice","prev","setAt","opt_except"],"mappings":"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","file":"js/chunk-3a7d113d.cebf8510.js","sourcesContent":["/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport ol_ext_inherits from '../util/ext'\r\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable'\r\nimport ol_control_Control from 'ol/control/Control'\r\nimport ol_layer_Tile from 'ol/layer/Tile'\r\nimport ol_layer_Vector from 'ol/layer/Vector'\r\nimport ol_layer_VectorTile from 'ol/layer/VectorTile'\r\n// ol < 6 compatibility VectorImage is not defined\r\n// import ol_layer_VectorImage from 'ol/layer/VectorImage'\r\nimport ol_layer_Image from 'ol/layer/Image'\r\nimport ol_layer_Heatmap from 'ol/layer/Heatmap'\r\nimport {intersects as ol_extent_intersects} from 'ol/extent'\r\n\r\nimport ol_ext_element from '../util/element'\r\n\r\n/** Layer Switcher Control.\r\n * @fires select\r\n * @fires drawlist\r\n * @fires toggle\r\n * @fires reorder-start\r\n * @fires reorder-end\r\n * @fires layer:visible\r\n * @fires layer:opacity\r\n * \r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} options\r\n *  @param {boolean} options.selection enable layer selection when click on the title\r\n *  @param {function} options.displayInLayerSwitcher function that takes a layer and return a boolean if the layer is displayed in the switcher, default test the displayInLayerSwitcher layer attribute\r\n *  @param {boolean} options.show_progress show a progress bar on tile layers, default false\r\n *  @param {boolean} options.mouseover show the panel on mouseover, default false\r\n *  @param {boolean} options.reordering allow layer reordering, default true\r\n *  @param {boolean} options.trash add a trash button to delete the layer, default false\r\n *  @param {function} options.oninfo callback on click on info button, if none no info button is shown DEPRECATED: use on(info) instead\r\n *  @param {boolean} options.extent add an extent button to zoom to the extent of the layer\r\n *  @param {function} options.onextent callback when click on extent, default fits view to extent\r\n *  @param {number} options.drawDelay delay in ms to redraw the layer (usefull to prevent flickering when manipulating the layers)\r\n *  @param {boolean} options.collapsed collapse the layerswitcher at beginning, default true\r\n *  @param {ol.layer.Group} options.layerGroup a layer group to display in the switcher, default display all layers of the map\r\n *  @param {boolean} options.noScroll prevent handle scrolling, default false\r\n *  @param {function} options.onchangeCheck optional callback on click on checkbox, you can call this method for doing operations after check/uncheck a layer\r\n *\r\n * Layers attributes that control the switcher\r\n *\t- allwaysOnTop {boolean} true to force layer stay on top of the others while reordering, default false\r\n *\t- displayInLayerSwitcher {boolean} display the layer in switcher, default true\r\n *\t- noSwitcherDelete {boolean} to prevent layer deletion (w. trash option = true), default false\r\n */\r\nvar ol_control_LayerSwitcher = function(options) {\r\n  options = options || {};\r\n  var self = this;\r\n  this.dcount = 0;\r\n  this.show_progress = options.show_progress;\r\n  this.oninfo = (typeof (options.oninfo) == \"function\" ? options.oninfo: null);\r\n  this.onextent = (typeof (options.onextent) == \"function\" ? options.onextent: null);\r\n  this.hasextent = options.extent || options.onextent;\r\n  this.hastrash = options.trash;\r\n  this.reordering = (options.reordering!==false);\r\n  this._layers = [];\r\n  this._layerGroup = (options.layerGroup && options.layerGroup.getLayers) ? options.layerGroup : null;\r\n  this.onchangeCheck = (typeof (options.onchangeCheck) == \"function\" ? options.onchangeCheck : null);\r\n\r\n  // displayInLayerSwitcher\r\n  if (typeof(options.displayInLayerSwitcher) === 'function') {\r\n    this.displayInLayerSwitcher = options.displayInLayerSwitcher;\r\n  }\r\n\r\n  var element;\r\n  if (options.target) {\r\n    element = ol_ext_element.create('DIV', {\r\n      className: options.switcherClass || \"ol-layerswitcher\"\r\n    });\r\n  } else {\r\n    element = ol_ext_element.create('DIV', {\r\n      className: (options.switcherClass || \"ol-layerswitcher\") +' ol-unselectable ol-control'\r\n    });\r\n    if (options.collapsed !== false) element.classList.add('ol-collapsed'); \r\n    else element.classList.add('ol-forceopen'); \r\n  \r\n    this.button = ol_ext_element.create('BUTTON', {\r\n      type: 'button',\r\n      parent: element\r\n    });\r\n    this.button.addEventListener('touchstart', function(e){\r\n      element.classList.toggle('ol-forceopen');\r\n      element.classList.add('ol-collapsed');\r\n      self.dispatchEvent({ type: 'toggle', collapsed: element.classList.contains('ol-collapsed') });\r\n      e.preventDefault(); \r\n      self.overflow();\r\n    });\r\n    this.button.addEventListener('click', function() {\r\n      element.classList.toggle('ol-forceopen');\r\n      element.classList.add('ol-collapsed'); \r\n      self.dispatchEvent({ type: 'toggle', collapsed: !element.classList.contains('ol-forceopen') });\r\n      self.overflow();\r\n    });\r\n\r\n    if (options.mouseover) {\r\n      element.addEventListener ('mouseleave', function(){ \r\n        element.classList.add(\"ol-collapsed\"); \r\n        self.dispatchEvent({ type: 'toggle', collapsed: true });\r\n      });\r\n      element.addEventListener ('mouseover', function(){ \r\n        element.classList.remove(\"ol-collapsed\"); \r\n        self.dispatchEvent({ type: 'toggle', collapsed: false });\r\n      });\r\n    }\r\n\r\n    if (options.minibar) options.noScroll = true;\r\n    if (!options.noScroll) {\r\n      this.topv = ol_ext_element.create('DIV', {\r\n        className: 'ol-switchertopdiv',\r\n        parent: element,\r\n        click: function() {\r\n          self.overflow(\"+50%\");\r\n        }\r\n      });\r\n\r\n      this.botv = ol_ext_element.create('DIV', {\r\n        className: 'ol-switcherbottomdiv',\r\n        parent: element,\r\n        click: function() {\r\n          self.overflow(\"-50%\");\r\n        }\r\n      });\r\n    }\r\n    this._noScroll = options.noScroll;\r\n  }\r\n\r\n  this.panel_ = ol_ext_element.create ('UL', {\r\n    className: 'panel',\r\n  });\r\n  this.panelContainer_ = ol_ext_element.create ('DIV', {\r\n    className: 'panel-container',\r\n    html: this.panel_,\r\n    parent: element\r\n  });\r\n  // Handle mousewheel\r\n  if (!options.target && !options.noScroll) {\r\n    ol_ext_element.addListener (this.panel_, 'mousewheel DOMMouseScroll onmousewheel', function(e) {\r\n      if (self.overflow(Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))))) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }\r\n    });\r\n  }\r\n\r\n  this.header_ = ol_ext_element.create('LI', {\r\n    className: 'ol-header',\r\n    parent: this.panel_\r\n  });\r\n\r\n  ol_control_Control.call (this, {\r\n    element: element,\r\n    target: options.target\r\n  });\r\n\r\n  this.set('drawDelay',options.drawDelay||0);\r\n  this.set('selection', options.selection);\r\n\r\n  if (options.minibar) {\r\n    // Wait init complete (for child classes)\r\n    setTimeout(function() {\r\n      var mbar = ol_ext_element.scrollDiv(this.panelContainer_, {\r\n        mousewheel: true, \r\n        vertical: true, \r\n        minibar: true\r\n      });\r\n      this.on(['drawlist', 'toggle'], function() {\r\n        mbar.refresh();\r\n      })\r\n    }.bind(this));\r\n  }\r\n};\r\nol_ext_inherits(ol_control_LayerSwitcher, ol_control_Control);\r\n\r\n/** List of tips for internationalization purposes\r\n*/\r\nol_control_LayerSwitcher.prototype.tip = {\r\n  up: \"up/down\",\r\n  down: \"down\",\r\n  info: \"informations...\",\r\n  extent: \"zoom to extent\",\r\n  trash: \"remove layer\",\r\n  plus: \"expand/shrink\"\r\n};\r\n\r\n/** Test if a layer should be displayed in the switcher\r\n * @param {ol.layer} layer\r\n * @return {boolean} true if the layer is displayed\r\n */\r\nol_control_LayerSwitcher.prototype.displayInLayerSwitcher = function(layer) {\r\n  return (layer.get('displayInLayerSwitcher')!==false);\r\n};\r\n\r\n/**\r\n * Set the map instance the control is associated with.\r\n * @param {_ol_Map_} map The map instance.\r\n */\r\nol_control_LayerSwitcher.prototype.setMap = function(map) {\r\n  ol_control_Control.prototype.setMap.call(this, map);\r\n  this.drawPanel();\r\n  \r\n  if (this._listener) {\r\n    for (var i in this._listener) ol_Observable_unByKey(this._listener[i]);\r\n  }\r\n  this._listener = null;\r\n\r\n  // Get change (new layer added or removed)\r\n  if (map) {\r\n    this._listener = {\r\n      moveend: map.on('moveend', this.viewChange.bind(this)),\r\n      size: map.on('change:size', this.overflow.bind(this))\r\n    }\r\n    // Listen to a layer group\r\n    if (this._layerGroup) {\r\n      this._listener.change = this._layerGroup.getLayers().on('change:length', this.drawPanel.bind(this));\r\n    } else  {\r\n      //Listen to all layers\r\n      this._listener.change = map.getLayerGroup().getLayers().on('change:length', this.drawPanel.bind(this));\r\n    }\r\n  }\r\n};\r\n\r\n/** Show control\r\n */\r\nol_control_LayerSwitcher.prototype.show = function() {\r\n  this.element.classList.add('ol-forceopen');\r\n  this.overflow();\r\n  self.dispatchEvent({ type: 'toggle', collapsed: false });\r\n};\r\n\r\n/** Hide control\r\n */\r\nol_control_LayerSwitcher.prototype.hide = function() {\r\n  this.element.classList.remove('ol-forceopen');\r\n  this.overflow();\r\n  self.dispatchEvent({ type: 'toggle', collapsed: true });\r\n};\r\n\r\n/** Toggle control\r\n */\r\nol_control_LayerSwitcher.prototype.toggle = function() {\r\n  this.element.classList.toggle(\"ol-forceopen\");\r\n  this.overflow();\r\n};\r\n\r\n/** Is control open\r\n * @return {boolean}\r\n */\r\nol_control_LayerSwitcher.prototype.isOpen = function() {\r\n  return this.element.classList.contains(\"ol-forceopen\");\r\n};\r\n\r\n/** Add a custom header\r\n * @param {Element|string} html content html\r\n */\r\nol_control_LayerSwitcher.prototype.setHeader = function(html) {\r\n  ol_ext_element.setHTML(this.header_, html);\r\n};\r\n\r\n/** Calculate overflow and add scrolls\r\n * @param {Number} dir scroll direction -1|0|1|'+50%'|'-50%'\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.overflow = function(dir) {\t\r\n  if (this.button && !this._noScroll) {\r\n    // Nothing to show\r\n    if (ol_ext_element.hidden(this.panel_)) {\r\n      ol_ext_element.setStyle(this.element, { height: 'auto' });\r\n      return;\r\n    }\r\n    // Calculate offset\r\n    var h = ol_ext_element.outerHeight(this.element);\r\n    var hp = ol_ext_element.outerHeight(this.panel_);\r\n    var dh = this.button.offsetTop + ol_ext_element.outerHeight(this.button);\r\n    //var dh = this.button.position().top + this.button.outerHeight(true);\r\n\r\n    var top = this.panel_.offsetTop - dh;\r\n    if (hp > h-dh) {\r\n      // Bug IE: need to have an height defined\r\n      ol_ext_element.setStyle(this.element, { height: '100%' });\r\n      var li = this.panel_.querySelectorAll('li.visible .li-content')[0];\r\n      var lh = li ? 2 * ol_ext_element.getStyle(li, 'height') : 0;\r\n      switch (dir) {\r\n        case 1: top += lh; break;\r\n        case -1: top -= lh; break;\r\n        case \"+50%\": top += Math.round(h/2); break;\r\n        case \"-50%\": top -= Math.round(h/2); break;\r\n        default: break;\r\n      }\r\n      // Scroll div\r\n      if (top+hp <= h-3*dh/2) {\r\n        top = h-3*dh/2-hp;\r\n        ol_ext_element.hide(this.botv);\r\n      } else {\r\n        ol_ext_element.show(this.botv);\r\n      }\r\n      if (top >= 0) {\r\n        top = 0;\r\n        ol_ext_element.hide(this.topv);\r\n      } else {\r\n        ol_ext_element.show(this.topv);\r\n      }\r\n      // Scroll ?\r\n      ol_ext_element.setStyle(this.panel_, { top: top+\"px\" });\r\n      return true;\r\n    } else {\r\n      ol_ext_element.setStyle(this.element, { height: \"auto\" });\r\n      ol_ext_element.setStyle(this.panel_, { top: 0 });\r\n      ol_ext_element.hide(this.botv);\r\n      ol_ext_element.hide(this.topv);\r\n      return false;\r\n    }\r\n  }\r\n  else return false;\r\n};\r\n\r\n/** Set the layer associated with a li\r\n * @param {Element} li\r\n * @param {ol.layer} layer\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype._setLayerForLI = function(li, layer) {\r\n  var listeners = [];\r\n  if (layer.getLayers) {\r\n    listeners.push(layer.getLayers().on('change:length', this.drawPanel.bind(this)));\r\n  }\r\n  if (li) {\r\n    // Handle opacity change\r\n    listeners.push(layer.on('change:opacity', (function() {\r\n      this.setLayerOpacity(layer, li);\r\n    }).bind(this)));\r\n    // Handle visibility chage\r\n    listeners.push(layer.on('change:visible', (function() {\r\n      this.setLayerVisibility(layer, li);\r\n    }).bind(this)));\r\n  }\r\n  // Other properties\r\n  listeners.push(layer.on('propertychange', (function(e) {\r\n    if (e.key === 'displayInLayerSwitcher'\r\n      || e.key === 'openInLayerSwitcher') {\r\n      this.drawPanel(e);\r\n    }\r\n  }).bind(this)));\r\n  this._layers.push({ li:li, layer:layer, listeners: listeners });\r\n};\r\n\r\n/** Set opacity for a layer\r\n * @param {ol.layer.Layer} layer\r\n * @param {Element} li the list element\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.setLayerOpacity = function(layer, li) {\r\n  var i = li.querySelector('.layerswitcher-opacity-cursor')\r\n  if (i) i.style.left = (layer.getOpacity()*100)+\"%\"\r\n  this.dispatchEvent({ type: 'layer:opacity', layer: layer });\r\n};\r\n\r\n/** Set visibility for a layer\r\n * @param {ol.layer.Layer} layer\r\n * @param {Element} li the list element\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.setLayerVisibility = function(layer, li) {\r\n  var i = li.querySelector('.ol-visibility');\r\n  if (i) i.checked = layer.getVisible();\r\n  if (layer.getVisible()) li.classList.add('ol-visible');\r\n  else li.classList.remove('ol-visible');\r\n  this.dispatchEvent({ type: 'layer:visible', layer: layer });\r\n};\r\n\r\n/** Clear layers associated with li\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype._clearLayerForLI = function() {\r\n  this._layers.forEach(function (li) {\r\n    li.listeners.forEach(function(l) {\r\n      ol_Observable_unByKey(l);\r\n    });\r\n  })\r\n  this._layers = [];\r\n};\r\n\r\n/** Get the layer associated with a li\r\n * @param {Element} li\r\n * @return {ol.layer}\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype._getLayerForLI = function(li) {\r\n  for (var i=0, l; l=this._layers[i]; i++) {\r\n    if (l.li===li) return l.layer;\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * On view change hide layer depending on resolution / extent\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.viewChange = function() {\r\n  this.panel_.querySelectorAll('li').forEach( function(li) {\r\n    var l = this._getLayerForLI(li);\r\n    if (l) {\r\n      if (this.testLayerVisibility(l)) li.classList.remove('ol-layer-hidden');\r\n      else li.classList.add('ol-layer-hidden');\r\n    }\r\n  }.bind(this));\r\n};\r\n\r\n/** Get control panel\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.getPanel = function() {\r\n  return this.panelContainer_;\r\n};\r\n\r\n/** Draw the panel control (prevent multiple draw due to layers manipulation on the map with a delay function)\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.drawPanel = function() {\r\n  if (!this.getMap()) return;\r\n  var self = this;\r\n  // Multiple event simultaneously / draw once => put drawing in the event queue\r\n  this.dcount++;\r\n  setTimeout (function(){ self.drawPanel_(); }, this.get('drawDelay') || 0);\r\n};\r\n\r\n/** Delayed draw panel control \r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.drawPanel_ = function() {\r\n  if (--this.dcount || this.dragging_) return;\r\n  var scrollTop = this.panelContainer_.scrollTop;\r\n\r\n  // Remove existing layers\r\n  this._clearLayerForLI();\r\n  this.panel_.querySelectorAll('li').forEach (function(li) {\r\n    if (!li.classList.contains('ol-header')) li.remove();\r\n  }.bind(this));\r\n  // Draw list\r\n  if (this._layerGroup) this.drawList (this.panel_, this._layerGroup.getLayers());\r\n  else if (this.getMap()) this.drawList (this.panel_, this.getMap().getLayers());\r\n\r\n  // Reset scrolltop\r\n  this.panelContainer_.scrollTop = scrollTop;\r\n};\r\n\r\n/** Change layer visibility according to the baselayer option\r\n * @param {ol.layer}\r\n * @param {Array<ol.layer>} related layers\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.switchLayerVisibility = function(l, layers) {\r\n  if (!l.get('baseLayer')) {\r\n    l.setVisible(!l.getVisible());\r\n  } else {\r\n    if (!l.getVisible()) l.setVisible(true);\r\n    layers.forEach(function(li) {\r\n      if (l!==li && li.get('baseLayer') && li.getVisible()) li.setVisible(false);\r\n    });\r\n  }\r\n};\r\n\r\n/** Check if layer is on the map (depending on resolution / zoom and extent)\r\n * @param {ol.layer}\r\n * @return {boolean}\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.testLayerVisibility = function(layer) {\r\n  if (!this.getMap()) return true;\r\n  var res = this.getMap().getView().getResolution();\r\n  var zoom = this.getMap().getView().getZoom();\r\n  // Calculate visibility on resolution or zoom\r\n  if (layer.getMaxResolution()<=res || layer.getMinResolution()>=res) {\r\n    return false;\r\n  } else if (layer.getMinZoom && (layer.getMinZoom()>=zoom || layer.getMaxZoom()<zoom)) {\r\n    return false;\r\n  } else {\r\n    // Check extent\r\n    var ex0 = layer.getExtent();\r\n    if (ex0) {\r\n      var ex = this.getMap().getView().calculateExtent(this.getMap().getSize());\r\n      return ol_extent_intersects(ex, ex0);\r\n    }\r\n    return true;\r\n  }\r\n};\r\n\r\n\r\n/** Start ordering the list\r\n*\t@param {event} e drag event\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.dragOrdering_ = function(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n  // Get params\r\n  var self = this;\r\n  var elt = e.currentTarget.parentNode.parentNode;\r\n  var start = true;\r\n  var panel = this.panel_; \r\n  var pageY;\r\n  var pageY0 = e.pageY \r\n    || (e.touches && e.touches.length && e.touches[0].pageY) \r\n    || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n  var target, dragElt;\r\n  var layer, group;\r\n  elt.parentNode.classList.add('drag');\r\n\r\n  // Stop ordering\r\n  function stop() {\r\n    if (target) {\r\n      // Get drag on parent\r\n      var drop = layer;\r\n      var isSelected = self.getSelection() === drop;\r\n      if (drop && target) {\r\n        var collection ;\r\n        if (group) collection = group.getLayers();\r\n        else collection = self._layerGroup ?  self._layerGroup.getLayers() : self.getMap().getLayers();\r\n        var layers = collection.getArray();\r\n        // Switch layers\r\n        for (var i=0; i<layers.length; i++) {\r\n          if (layers[i]==drop) {\r\n            collection.removeAt (i);\r\n            break;\r\n          }\r\n        }\r\n        for (var j=0; j<layers.length; j++) {\r\n          if (layers[j] === target) {\r\n            if (i>j) collection.insertAt (j,drop);\r\n            else collection.insertAt (j+1,drop);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      if (isSelected) self.selectLayer(drop);\r\n      \r\n      self.dispatchEvent({ type: \"reorder-end\", layer: drop, group: group });\r\n    }\r\n    \r\n    elt.parentNode.querySelectorAll('li').forEach(function(li){\r\n      li.classList.remove('dropover');\r\n      li.classList.remove('dropover-after');\r\n      li.classList.remove('dropover-before');\r\n    });\r\n    elt.classList.remove(\"drag\");\r\n    elt.parentNode.classList.remove(\"drag\");\r\n    self.element.classList.remove('drag');\r\n    if (dragElt) dragElt.remove();\r\n\r\n    ol_ext_element.removeListener(document, 'mousemove touchmove', move);\r\n    ol_ext_element.removeListener(document, 'mouseup touchend touchcancel', stop);\r\n  }\r\n\r\n  // Ordering\r\n  function move(e) {\r\n    // First drag (more than 2 px) => show drag element (ghost)\r\n    pageY = e.pageY \r\n        || (e.touches && e.touches.length && e.touches[0].pageY) \r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n    if (start && Math.abs(pageY0 - pageY) > 2) {\r\n      start = false;\r\n      elt.classList.add(\"drag\");\r\n      layer = self._getLayerForLI(elt);\r\n      target = false;\r\n      group = self._getLayerForLI(elt.parentNode.parentNode);\r\n      // Ghost div\r\n      dragElt = ol_ext_element.create('LI', { \r\n        className: 'ol-dragover',\r\n        html: elt.innerHTML,\r\n        style: { \r\n          position: \"absolute\", \r\n          \"z-index\": 10000, \r\n          left: elt.offsetLeft, \r\n          opacity: 0.5,\r\n          width: ol_ext_element.outerWidth(elt),\r\n          height: ol_ext_element.getStyle(elt,'height'),\r\n        },\r\n        parent: panel \r\n      });\r\n      self.element.classList.add('drag');\r\n      self.dispatchEvent({ type: \"reorder-start\", layer: layer, group: group });\r\n    }\r\n    // Start a new drag sequence\r\n    if (!start) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      // Ghost div\r\n      ol_ext_element.setStyle(dragElt, { top: pageY - ol_ext_element.offsetRect(panel).top + panel.scrollTop +5 });\r\n      \r\n      var li;\r\n      if (!e.touches) {\r\n        li = e.target;\r\n      } else {\r\n        li = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\r\n      }\r\n      if (li.classList.contains(\"ol-switcherbottomdiv\")) {\r\n        self.overflow(-1);\r\n      } else if (li.classList.contains(\"ol-switchertopdiv\")) {\r\n        self.overflow(1);\r\n      }\r\n      // Get associated li\r\n      while (li && li.tagName!=='LI') {\r\n        li = li.parentNode;\r\n      }\r\n      if (!li || !li.classList.contains('dropover')) {\r\n        elt.parentNode.querySelectorAll('li').forEach(function(li) {\r\n          li.classList.remove('dropover');\r\n          li.classList.remove('dropover-after');\r\n          li.classList.remove('dropover-before');\r\n        });\r\n      }\r\n      if (li && li.parentNode.classList.contains('drag') && li !== elt) {\r\n        target = self._getLayerForLI(li);\r\n        // Don't mix layer level\r\n        if (target && !target.get('allwaysOnTop') == !layer.get('allwaysOnTop')) {\r\n          li.classList.add(\"dropover\");\r\n          li.classList.add((elt.offsetTop < li.offsetTop) ? 'dropover-after' : 'dropover-before');\r\n        } else {\r\n          target = false;\r\n        }\r\n        ol_ext_element.show(dragElt);\r\n      } else {\r\n        target = false;\r\n        if (li===elt) ol_ext_element.hide(dragElt);\r\n        else ol_ext_element.show(dragElt);\r\n      }\r\n      \r\n      if (!target) dragElt.classList.add(\"forbidden\");\r\n      else dragElt.classList.remove(\"forbidden\");\r\n    }\r\n  }\r\n\r\n  // Start ordering\r\n  ol_ext_element.addListener(document, 'mousemove touchmove', move);\r\n  ol_ext_element.addListener(document, 'mouseup touchend touchcancel', stop);\r\n};\r\n\r\n\r\n/** Change opacity on drag \r\n*\t@param {event} e drag event\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.dragOpacity_ = function(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n  var self = this\r\n  // Register start params\r\n  var elt = e.target;\r\n  var layer = this._getLayerForLI(elt.parentNode.parentNode.parentNode);\r\n  if (!layer) return;\r\n  var x = e.pageX \r\n    || (e.touches && e.touches.length && e.touches[0].pageX) \r\n    || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n  var start = ol_ext_element.getStyle (elt, 'left') - x;\r\n  self.dragging_ = true;\r\n\r\n  // stop dragging\r\n  function stop() {\r\n    ol_ext_element.removeListener(document, \"mouseup touchend touchcancel\", stop);\r\n    ol_ext_element.removeListener(document, \"mousemove touchmove\", move);\r\n    self.dragging_ = false;\r\n  }\r\n  // On draggin\r\n  function move(e) {\r\n    var x = e.pageX \r\n      || (e.touches && e.touches.length && e.touches[0].pageX) \r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n    var delta = (start + x) / ol_ext_element.getStyle(elt.parentNode, 'width');\r\n    var opacity = Math.max (0, Math.min(1, delta));\r\n    ol_ext_element.setStyle (elt, { left: (opacity*100) + \"%\" });\r\n    elt.parentNode.nextElementSibling.innerHTML = Math.round(opacity*100);\r\n    layer.setOpacity(opacity);\r\n  }\r\n  // Register move\r\n  ol_ext_element.addListener(document, \"mouseup touchend touchcancel\", stop);\r\n  ol_ext_element.addListener(document, \"mousemove touchmove\", move);\r\n};\r\n\r\n\r\n/** Render a list of layer\r\n * @param {Elemen} element to render\r\n * @layers {Array{ol.layer}} list of layer to show\r\n * @api stable\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.drawList = function(ul, collection) {\r\n  var self = this;\r\n  var layers = collection.getArray();\r\n\r\n  // Change layer visibility\r\n  var setVisibility = function(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    self.switchLayerVisibility(l, collection);\r\n    if (self.get('selection') && l.getVisible()) {\r\n      self.selectLayer(l);\r\n    }\r\n    if (self.onchangeCheck) {\r\n      self.onchangeCheck(l);\r\n    }\r\n  };\r\n  // Info button click\r\n  function onInfo(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault(); \r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    self.oninfo(l); \r\n    self.dispatchEvent({ type: \"info\", layer: l });\r\n  }\r\n  // Zoom to extent button\r\n  function zoomExtent(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault(); \r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    if (self.onextent) self.onextent(l); \r\n    else self.getMap().getView().fit (l.getExtent(), self.getMap().getSize()); \r\n    self.dispatchEvent({ type: \"extent\", layer: l });\r\n  }\r\n  // Remove a layer on trash click\r\n  function removeLayer(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    var li = this.parentNode.parentNode.parentNode.parentNode;\r\n    var layer, group = self._getLayerForLI(li);\r\n    // Remove the layer from a group or from a map\r\n    if (group) {\r\n      layer = self._getLayerForLI(this.parentNode.parentNode);\r\n      group.getLayers().remove(layer);\r\n      if (group.getLayers().getLength()==0 && !group.get('noSwitcherDelete')) {\r\n        removeLayer.call(li.querySelectorAll('.layerTrash')[0], e);\r\n      }\r\n    } else {\r\n      li = this.parentNode.parentNode;\r\n      self.getMap().removeLayer(self._getLayerForLI(li));\r\n    }\r\n  }\r\n\r\n  // Create a list for a layer\r\n  function createLi(layer) {\r\n    if (!this.displayInLayerSwitcher(layer)) {\r\n      this._setLayerForLI(null, layer);\r\n      return;\r\n    } \r\n\r\n    var li = ol_ext_element.create('LI', {\r\n      className: (layer.getVisible()?\"visible \":\" \")+(layer.get('baseLayer')?\"baselayer\":\"\"),\r\n      parent: ul\r\n    });\r\n    this._setLayerForLI(li, layer);\r\n    if (this._selectedLayer === layer) {\r\n      li.classList.add('ol-layer-select');\r\n    }\r\n\r\n    var layer_buttons = ol_ext_element.create('DIV', {\r\n      className: 'ol-layerswitcher-buttons',\r\n      parent: li\r\n    });\r\n\r\n    // Content div\r\n    var d = ol_ext_element.create('DIV', {\r\n      className: 'li-content',// + (this.testLayerVisibility(layer) ? '' : ' ol-layer-hidden'),\r\n      parent: li\r\n    });\r\n    \r\n    // Visibility\r\n    ol_ext_element.create('INPUT', {\r\n      type: layer.get('baseLayer') ? 'radio' : 'checkbox',\r\n      className: 'ol-visibility',\r\n      checked: layer.getVisible(),\r\n      click: setVisibility,\r\n      parent: d\r\n    });\r\n    // Label\r\n    var label = ol_ext_element.create('LABEL', {\r\n      title: layer.get('title') || layer.get('name'),\r\n      click: setVisibility,\r\n      unselectable: 'on',\r\n      style: {\r\n        userSelect: 'none'\r\n      },\r\n      parent: d\r\n    });\r\n    label.addEventListener('selectstart', function(){ return false; });\r\n    ol_ext_element.create('SPAN', {\r\n      html: layer.get('title') || layer.get('name'),\r\n      click: function(e) {\r\n        if (this.get('selection')) {\r\n          e.stopPropagation();\r\n          this.selectLayer(layer);\r\n        }\r\n      }.bind(this),\r\n      parent: label\r\n    });\r\n\r\n    //  up/down\r\n    if (this.reordering) {\r\n      if ( (i<layers.length-1 && (layer.get(\"allwaysOnTop\") || !layers[i+1].get(\"allwaysOnTop\")) )\r\n      || (i>0 && (!layer.get(\"allwaysOnTop\") || layers[i-1].get(\"allwaysOnTop\")) ) ) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerup ol-noscroll',\r\n          title: this.tip.up,\r\n          on: { 'mousedown touchstart': function(e) { self.dragOrdering_(e) } },\r\n          parent: layer_buttons\r\n        });\r\n      }\r\n    }\r\n\r\n    // Show/hide sub layers\r\n    if (layer.getLayers) {\r\n      var nb = 0;\r\n      layer.getLayers().forEach(function(l) {\r\n        if (self.displayInLayerSwitcher(l)) nb++;\r\n      });\r\n      if (nb) {\r\n        ol_ext_element.create('DIV', {\r\n          className: layer.get(\"openInLayerSwitcher\") ? \"collapse-layers\" : \"expend-layers\",\r\n          title: this.tip.plus,\r\n          click: function() {\r\n            var l = self._getLayerForLI(this.parentNode.parentNode);\r\n            l.set(\"openInLayerSwitcher\", !l.get(\"openInLayerSwitcher\") )\r\n          },\r\n          parent: layer_buttons\r\n        });\r\n      }\r\n    }\r\n\r\n    // Info button\r\n    if (this.oninfo) {\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerInfo',\r\n        title: this.tip.info,\r\n        click: onInfo,\r\n        parent: layer_buttons\r\n      });\r\n    }\r\n    // Layer remove\r\n    if (this.hastrash && !layer.get(\"noSwitcherDelete\")) {\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerTrash',\r\n        title: this.tip.trash,\r\n        click: removeLayer,\r\n        parent: layer_buttons\r\n      });\r\n    }\r\n    // Layer extent\r\n    if (this.hasextent && layers[i].getExtent()) {\r\n      var ex = layers[i].getExtent();\r\n      if (ex.length==4 && ex[0]<ex[2] && ex[1]<ex[3]) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerExtent',\r\n          title: this.tip.extent,\r\n          click: zoomExtent,\r\n          parent: layer_buttons  \r\n        });\r\n      }\r\n    }\r\n\r\n    // Progress\r\n    if (this.show_progress && layer instanceof ol_layer_Tile) {\r\n      var p = ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-progress',\r\n        parent: d\r\n      });\r\n      this.setprogress_(layer);\r\n      layer.layerswitcher_progress = ol_ext_element.create('DIV', { parent: p });\r\n    }\r\n\r\n    // Opacity\r\n    var opacity = ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity',\r\n      // Click on the opacity line\r\n      click: function(e){\r\n        if (e.target !== this) return;\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        var op = Math.max ( 0, Math.min( 1, e.offsetX / ol_ext_element.getStyle(this, 'width')));\r\n        self._getLayerForLI(this.parentNode.parentNode).setOpacity(op);\r\n      },\r\n      parent: d\r\n    });\r\n    // Start dragging\r\n    ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity-cursor ol-noscroll',\r\n      style: { left: (layer.getOpacity()*100)+\"%\" },\r\n      on: {\r\n        'mousedown touchstart': function(e) { self.dragOpacity_ (e); }\r\n      },\r\n      parent: opacity\r\n    });\r\n    // Percent\r\n    ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity-label',\r\n      html: Math.round(layer.getOpacity()*100),\r\n      parent: d\r\n    });\r\n\r\n    // Layer group\r\n    if (layer.getLayers) {\r\n      li.classList.add('ol-layer-group');\r\n      if (layer.get(\"openInLayerSwitcher\") === true) {\r\n        var ul2 = ol_ext_element.create('UL', {\r\n          parent: li\r\n        });\r\n        this.drawList (ul2, layer.getLayers());\r\n      }\r\n    }\r\n    li.classList.add(this.getLayerClass(layer));\r\n\r\n    // Dispatch a dralist event to allow customisation\r\n    this.dispatchEvent({ type:'drawlist', layer:layer, li:li });\r\n  }\r\n\r\n  // Add the layer list\r\n  for (var i=layers.length-1; i>=0; i--) { \r\n    createLi.call(this, layers[i]); \r\n  }\r\n\r\n  this.viewChange();\r\n\r\n  if (ul === this.panel_) this.overflow();\r\n};\r\n\r\n/** Select a layer\r\n * @param {ol.layer.Layer} layer\r\n * @returns {string} the layer classname\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.getLayerClass = function(layer) {\r\n  if (!layer) return 'none';\r\n  if (layer.getLayers) return 'ol-layer-group';\r\n  if (layer instanceof ol_layer_Vector) return 'ol-layer-vector';\r\n  if (layer instanceof ol_layer_VectorTile) return 'ol-layer-vectortile';\r\n  if (layer instanceof ol_layer_Tile) return 'ol-layer-tile';\r\n  if (layer instanceof ol_layer_Image) return 'ol-layer-image';\r\n  if (layer instanceof ol_layer_Heatmap) return 'ol-layer-heatmap';\r\n  /* ol < 6 compatibility VectorImage is not defined */\r\n  // if (layer instanceof ol_layer_VectorImage) return 'ol-layer-vectorimage';\r\n  if (layer.getFeatures) return 'ol-layer-vectorimage';\r\n  /* */\r\n  return 'unknown';\r\n};\r\n\r\n/** Select a layer\r\n * @param {ol.layer.Layer} layer\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.selectLayer = function(layer, silent) {\r\n  if (!layer) {\r\n    if (!this.getMap()) return;\r\n    layer = this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)\r\n  }\r\n  this._selectedLayer = layer;\r\n  this.drawPanel();\r\n  if (!silent) this.dispatchEvent({ type: 'select', layer: layer });\r\n};\r\n\r\n/** Get selected layer\r\n * @returns {ol.layer.Layer}\r\n */\r\nol_control_LayerSwitcher.prototype.getSelection = function() {\r\n  return this._selectedLayer;\r\n};\r\n\r\n/** Handle progress bar for a layer\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.setprogress_ = function(layer) {\r\n  if (!layer.layerswitcher_progress) {\r\n    var loaded = 0;\r\n    var loading = 0;\r\n    var draw = function() {\r\n      if (loading === loaded) {\r\n        loading = loaded = 0;\r\n        ol_ext_element.setStyle(layer.layerswitcher_progress, { width: 0 });// layer.layerswitcher_progress.width(0);\r\n      } else {\r\n        ol_ext_element.setStyle(layer.layerswitcher_progress, { width: (loaded / loading * 100).toFixed(1) + '%' });// layer.layerswitcher_progress.css('width', (loaded / loading * 100).toFixed(1) + '%');\r\n      }\r\n    }\r\n    layer.getSource().on('tileloadstart', function() {\r\n      loading++;\r\n      draw();\r\n    });\r\n    layer.getSource().on('tileloadend', function() {\r\n      loaded++;\r\n      draw();\r\n    });\r\n    layer.getSource().on('tileloaderror', function() {\r\n      loaded++;\r\n      draw();\r\n    });\r\n  }\r\n};\r\n\r\nexport default ol_control_LayerSwitcher\r\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    /**\n     * A true single click with no dragging and no double click. Note that this\n     * event is delayed by 250 ms to ensure that it is not a double click.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n     * @api\n     */\n    SINGLECLICK: 'singleclick',\n    /**\n     * A click with no dragging. A double click will fire two of this.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n     * @api\n     */\n    CLICK: EventType.CLICK,\n    /**\n     * A true double click, with no dragging.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n     * @api\n     */\n    DBLCLICK: EventType.DBLCLICK,\n    /**\n     * Triggered when a pointer is dragged.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n     * @api\n     */\n    POINTERDRAG: 'pointerdrag',\n    /**\n     * Triggered when a pointer is moved. Note that on touch devices this is\n     * triggered when the map is panned, so is not the same as mousemove.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n     * @api\n     */\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel',\n};\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n//# sourceMappingURL=MapBrowserEventType.js.map","/**\n * @module ol/CollectionEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when an item is added to the collection.\n     * @event module:ol/Collection.CollectionEvent#add\n     * @api\n     */\n    ADD: 'add',\n    /**\n     * Triggered when an item is removed from the collection.\n     * @event module:ol/Collection.CollectionEvent#remove\n     * @api\n     */\n    REMOVE: 'remove',\n};\n//# sourceMappingURL=CollectionEventType.js.map","/**\n * @module ol/Kinetic\n */\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nvar Kinetic = /** @class */ (function () {\n    /**\n     * @param {number} decay Rate of decay (must be negative).\n     * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n     * @param {number} delay Delay to consider to calculate the kinetic\n     *     initial values (milliseconds).\n     */\n    function Kinetic(decay, minVelocity, delay) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.decay_ = decay;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minVelocity_ = minVelocity;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.delay_ = delay;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.points_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        this.angle_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.initialVelocity_ = 0;\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    Kinetic.prototype.begin = function () {\n        this.points_.length = 0;\n        this.angle_ = 0;\n        this.initialVelocity_ = 0;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     */\n    Kinetic.prototype.update = function (x, y) {\n        this.points_.push(x, y, Date.now());\n    };\n    /**\n     * @return {boolean} Whether we should do kinetic animation.\n     */\n    Kinetic.prototype.end = function () {\n        if (this.points_.length < 6) {\n            // at least 2 points are required (i.e. there must be at least 6 elements\n            // in the array)\n            return false;\n        }\n        var delay = Date.now() - this.delay_;\n        var lastIndex = this.points_.length - 3;\n        if (this.points_[lastIndex + 2] < delay) {\n            // the last tracked point is too old, which means that the user stopped\n            // panning before releasing the map\n            return false;\n        }\n        // get the first point which still falls into the delay time\n        var firstIndex = lastIndex - 3;\n        while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n            firstIndex -= 3;\n        }\n        var duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n        // we don't want a duration of 0 (divide by zero)\n        // we also make sure the user panned for a duration of at least one frame\n        // (1/60s) to compute sane displacement values\n        if (duration < 1000 / 60) {\n            return false;\n        }\n        var dx = this.points_[lastIndex] - this.points_[firstIndex];\n        var dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n        this.angle_ = Math.atan2(dy, dx);\n        this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n        return this.initialVelocity_ > this.minVelocity_;\n    };\n    /**\n     * @return {number} Total distance travelled (pixels).\n     */\n    Kinetic.prototype.getDistance = function () {\n        return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n    };\n    /**\n     * @return {number} Angle of the kinetic panning animation (radians).\n     */\n    Kinetic.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    return Kinetic;\n}());\nexport default Kinetic;\n//# sourceMappingURL=Kinetic.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { listen, listenOnce, unlistenByKey } from './events.js';\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type, listener: (event: EventClass) => ?) => Return} OnSignature\n */\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return extends void ? void : Return[]} CombinedOnSignature\n */\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n/***\n * @template Return\n * @typedef {OnSignature<EventTypes, import(\"./events/Event.js\").default, Return> & CombinedOnSignature<EventTypes, Return>} ObservableOnSignature\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nvar Observable = /** @class */ (function (_super) {\n    __extends(Observable, _super);\n    function Observable() {\n        var _this = _super.call(this) || this;\n        _this.on =\n            /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (_this.onInternal);\n        _this.once =\n            /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (_this.onceInternal);\n        _this.un = /** @type {ObservableOnSignature<void>} */ (_this.unInternal);\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.revision_ = 0;\n        return _this;\n    }\n    /**\n     * Increases the revision counter and dispatches a 'change' event.\n     * @api\n     */\n    Observable.prototype.changed = function () {\n        ++this.revision_;\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * Get the version number for this object.  Each time the object is modified,\n     * its version number will be incremented.\n     * @return {number} Revision.\n     * @api\n     */\n    Observable.prototype.getRevision = function () {\n        return this.revision_;\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onInternal = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listen(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listen(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onceInternal = function (type, listener) {\n        var key;\n        if (Array.isArray(type)) {\n            var len = type.length;\n            key = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                key[i] = listenOnce(this, type[i], listener);\n            }\n        }\n        else {\n            key = listenOnce(this, /** @type {string} */ (type), listener);\n        }\n        /** @type {Object} */ (listener).ol_key = key;\n        return key;\n    };\n    /**\n     * Unlisten for a certain type of event.\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @protected\n     */\n    Observable.prototype.unInternal = function (type, listener) {\n        var key = /** @type {Object} */ (listener).ol_key;\n        if (key) {\n            unByKey(key);\n        }\n        else if (Array.isArray(type)) {\n            for (var i = 0, ii = type.length; i < ii; ++i) {\n                this.removeEventListener(type[i], listener);\n            }\n        }\n        else {\n            this.removeEventListener(type, listener);\n        }\n    };\n    return Observable;\n}(EventTarget));\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n    if (Array.isArray(key)) {\n        for (var i = 0, ii = key.length; i < ii; ++i) {\n            unlistenByKey(key[i]);\n        }\n    }\n    else {\n        unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n    }\n}\nexport default Observable;\n//# sourceMappingURL=Observable.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n/***\n * @template Geometry\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object~BaseObject} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n */\nvar Feature = /** @class */ (function (_super) {\n    __extends(Feature, _super);\n    /**\n     * @param {Geometry|ObjectWithGeometry<Geometry>} [opt_geometryOrProperties]\n     *     You may pass a Geometry object directly, or an object literal containing\n     *     properties. If you pass an object literal, you may include a Geometry\n     *     associated with a `geometry` key.\n     */\n    function Feature(opt_geometryOrProperties) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {FeatureOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {number|string|undefined}\n         */\n        _this.id_ = undefined;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.geometryName_ = 'geometry';\n        /**\n         * User provided style.\n         * @private\n         * @type {import(\"./style/Style.js\").StyleLike}\n         */\n        _this.style_ = null;\n        /**\n         * @private\n         * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n         */\n        _this.styleFunction_ = undefined;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.geometryChangeKey_ = null;\n        _this.addChangeListener(_this.geometryName_, _this.handleGeometryChanged_);\n        if (opt_geometryOrProperties) {\n            if (typeof (\n            /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry) === 'function') {\n                var geometry = /** @type {Geometry} */ (opt_geometryOrProperties);\n                _this.setGeometry(geometry);\n            }\n            else {\n                /** @type {Object<string, *>} */\n                var properties = opt_geometryOrProperties;\n                _this.setProperties(properties);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Clone this feature. If the original feature has a geometry it\n     * is also cloned. The feature id is not set in the clone.\n     * @return {Feature<Geometry>} The clone.\n     * @api\n     */\n    Feature.prototype.clone = function () {\n        var clone = /** @type {Feature<Geometry>} */ (new Feature(this.hasProperties() ? this.getProperties() : null));\n        clone.setGeometryName(this.getGeometryName());\n        var geometry = this.getGeometry();\n        if (geometry) {\n            clone.setGeometry(/** @type {Geometry} */ (geometry.clone()));\n        }\n        var style = this.getStyle();\n        if (style) {\n            clone.setStyle(style);\n        }\n        return clone;\n    };\n    /**\n     * Get the feature's default geometry.  A feature may have any number of named\n     * geometries.  The \"default\" geometry (the one that is rendered by default) is\n     * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n     * @return {Geometry|undefined} The default geometry for the feature.\n     * @api\n     * @observable\n     */\n    Feature.prototype.getGeometry = function () {\n        return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n    };\n    /**\n     * Get the feature identifier.  This is a stable identifier for the feature and\n     * is either set when reading data from a remote source or set explicitly by\n     * calling {@link module:ol/Feature~Feature#setId}.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Feature.prototype.getId = function () {\n        return this.id_;\n    };\n    /**\n     * Get the name of the feature's default geometry.  By default, the default\n     * geometry is named `geometry`.\n     * @return {string} Get the property name associated with the default geometry\n     *     for this feature.\n     * @api\n     */\n    Feature.prototype.getGeometryName = function () {\n        return this.geometryName_;\n    };\n    /**\n     * Get the feature's style. Will return what was provided to the\n     * {@link module:ol/Feature~Feature#setStyle} method.\n     * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n     * @api\n     */\n    Feature.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the feature's style function.\n     * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n     * representing the current style of this feature.\n     * @api\n     */\n    Feature.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChanged_ = function () {\n        if (this.geometryChangeKey_) {\n            unlistenByKey(this.geometryChangeKey_);\n            this.geometryChangeKey_ = null;\n        }\n        var geometry = this.getGeometry();\n        if (geometry) {\n            this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * Set the default geometry for the feature.  This will update the property\n     * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n     * @param {Geometry|undefined} geometry The new geometry.\n     * @api\n     * @observable\n     */\n    Feature.prototype.setGeometry = function (geometry) {\n        this.set(this.geometryName_, geometry);\n    };\n    /**\n     * Set the style for the feature to override the layer style.  This can be a\n     * single style object, an array of styles, or a function that takes a\n     * resolution and returns an array of styles. To unset the feature style, call\n     * `setStyle()` without arguments or a falsey value.\n     * @param {import(\"./style/Style.js\").StyleLike} [opt_style] Style for this feature.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setStyle = function (opt_style) {\n        this.style_ = opt_style;\n        this.styleFunction_ = !opt_style\n            ? undefined\n            : createStyleFunction(opt_style);\n        this.changed();\n    };\n    /**\n     * Set the feature id.  The feature id is considered stable and may be used when\n     * requesting features or comparing identifiers returned from a remote source.\n     * The feature id can be used with the\n     * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n     * @param {number|string|undefined} id The feature id.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setId = function (id) {\n        this.id_ = id;\n        this.changed();\n    };\n    /**\n     * Set the property name to be used when getting the feature's default geometry.\n     * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n     * this name will be returned.\n     * @param {string} name The property name of the default geometry.\n     * @api\n     */\n    Feature.prototype.setGeometryName = function (name) {\n        this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.geometryName_ = name;\n        this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.handleGeometryChanged_();\n    };\n    return Feature;\n}(BaseObject));\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n    if (typeof obj === 'function') {\n        return obj;\n    }\n    else {\n        /**\n         * @type {Array<import(\"./style/Style.js\").default>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof ( /** @type {?} */(obj).getZIndex) === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n            var style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n            styles_1 = [style];\n        }\n        return function () {\n            return styles_1;\n        };\n    }\n}\nexport default Feature;\n//# sourceMappingURL=Feature.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nvar MapBrowserEvent = /** @class */ (function (_super) {\n    __extends(MapBrowserEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {EVENT} originalEvent Original event.\n     * @param {boolean} [opt_dragging] Is the map currently being dragged?\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapBrowserEvent(type, map, originalEvent, opt_dragging, opt_frameState) {\n        var _this = _super.call(this, type, map, opt_frameState) || this;\n        /**\n         * The original browser event.\n         * @const\n         * @type {EVENT}\n         * @api\n         */\n        _this.originalEvent = originalEvent;\n        /**\n         * The map pixel relative to the viewport corresponding to the original browser event.\n         * @type {?import(\"./pixel.js\").Pixel}\n         */\n        _this.pixel_ = null;\n        /**\n         * The coordinate in the user projection corresponding to the original browser event.\n         * @type {?import(\"./coordinate.js\").Coordinate}\n         */\n        _this.coordinate_ = null;\n        /**\n         * Indicates if the map is currently being dragged. Only set for\n         * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n         *\n         * @type {boolean}\n         * @api\n         */\n        _this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n        return _this;\n    }\n    Object.defineProperty(MapBrowserEvent.prototype, \"pixel\", {\n        /**\n         * The map pixel relative to the viewport corresponding to the original event.\n         * @type {import(\"./pixel.js\").Pixel}\n         * @api\n         */\n        get: function () {\n            if (!this.pixel_) {\n                this.pixel_ = this.map.getEventPixel(this.originalEvent);\n            }\n            return this.pixel_;\n        },\n        set: function (pixel) {\n            this.pixel_ = pixel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MapBrowserEvent.prototype, \"coordinate\", {\n        /**\n         * The coordinate corresponding to the original browser event.  This will be in the user\n         * projection if one is set.  Otherwise it will be in the view projection.\n         * @type {import(\"./coordinate.js\").Coordinate}\n         * @api\n         */\n        get: function () {\n            if (!this.coordinate_) {\n                this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n            }\n            return this.coordinate_;\n        },\n        set: function (coordinate) {\n            this.coordinate_ = coordinate;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Prevents the default browser action.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n     * @api\n     */\n    MapBrowserEvent.prototype.preventDefault = function () {\n        _super.prototype.preventDefault.call(this);\n        if ('preventDefault' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n        }\n    };\n    /**\n     * Prevents further propagation of the current event.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n     * @api\n     */\n    MapBrowserEvent.prototype.stopPropagation = function () {\n        _super.prototype.stopPropagation.call(this);\n        if ('stopPropagation' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n        }\n    };\n    return MapBrowserEvent;\n}(MapEvent));\nexport default MapBrowserEvent;\n//# sourceMappingURL=MapBrowserEvent.js.map","/**\n * @module ol/MapEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered after a map frame is rendered.\n     * @event module:ol/MapEvent~MapEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered when the map starts moving.\n     * @event module:ol/MapEvent~MapEvent#movestart\n     * @api\n     */\n    MOVESTART: 'movestart',\n    /**\n     * Triggered after the map is moved.\n     * @event module:ol/MapEvent~MapEvent#moveend\n     * @api\n     */\n    MOVEEND: 'moveend',\n    /**\n     * Triggered when loading of additional map data (tiles, images, features) starts.\n     * @event module:ol/render/Event~RenderEvent#loadstart\n     * @api\n     */\n    LOADSTART: 'loadstart',\n    /**\n     * Triggered when loading of additional map data has completed.\n     * @event module:ol/render/Event~RenderEvent#loadend\n     * @api\n     */\n    LOADEND: 'loadend',\n};\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n//# sourceMappingURL=MapEventType.js.map","/**\n * @module ol/MapBrowserEventHandler\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport { PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { VOID } from './functions.js';\nimport { listen, unlistenByKey } from './events.js';\nvar MapBrowserEventHandler = /** @class */ (function (_super) {\n    __extends(MapBrowserEventHandler, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n     * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n     */\n    function MapBrowserEventHandler(map, moveTolerance) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * This is the element that we will listen to the real events on.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @private\n         */\n        _this.map_ = map;\n        /**\n         * @type {any}\n         * @private\n         */\n        _this.clickTimeoutId_;\n        /**\n         * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n         * @type {boolean}\n         */\n        _this.emulateClicks_ = false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.dragging_ = false;\n        /**\n         * @type {!Array<import(\"./events.js\").EventsKey>}\n         * @private\n         */\n        _this.dragListenerKeys_ = [];\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n        /**\n         * The most recent \"down\" type event (or null if none have occurred).\n         * Set on pointerdown.\n         * @type {PointerEvent|null}\n         * @private\n         */\n        _this.down_ = null;\n        var element = _this.map_.getViewport();\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.activePointers_ = 0;\n        /**\n         * @type {!Object<number, boolean>}\n         * @private\n         */\n        _this.trackedTouches_ = {};\n        _this.element_ = element;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.pointerdownListenerKey_ = listen(element, PointerEventType.POINTERDOWN, _this.handlePointerDown_, _this);\n        /**\n         * @type {PointerEvent}\n         * @private\n         */\n        _this.originalPointerMoveEvent_;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.relayedListenerKey_ = listen(element, PointerEventType.POINTERMOVE, _this.relayEvent_, _this);\n        /**\n         * @private\n         */\n        _this.boundHandleTouchMove_ = _this.handleTouchMove_.bind(_this);\n        _this.element_.addEventListener(EventType.TOUCHMOVE, _this.boundHandleTouchMove_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n        return _this;\n    }\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.emulateClick_ = function (pointerEvent) {\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.CLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        if (this.clickTimeoutId_ !== undefined) {\n            // double-click\n            clearTimeout(this.clickTimeoutId_);\n            this.clickTimeoutId_ = undefined;\n            newEvent = new MapBrowserEvent(MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n            this.dispatchEvent(newEvent);\n        }\n        else {\n            // click\n            this.clickTimeoutId_ = setTimeout(\n            /** @this {MapBrowserEventHandler} */\n            function () {\n                this.clickTimeoutId_ = undefined;\n                var newEvent = new MapBrowserEvent(MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n                this.dispatchEvent(newEvent);\n            }.bind(this), 250);\n        }\n    };\n    /**\n     * Keeps track on how many pointers are currently active.\n     *\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.updateActivePointers_ = function (pointerEvent) {\n        var event = pointerEvent;\n        if (event.type == MapBrowserEventType.POINTERUP ||\n            event.type == MapBrowserEventType.POINTERCANCEL) {\n            delete this.trackedTouches_[event.pointerId];\n        }\n        else if (event.type == MapBrowserEventType.POINTERDOWN) {\n            this.trackedTouches_[event.pointerId] = true;\n        }\n        this.activePointers_ = Object.keys(this.trackedTouches_).length;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerUp_ = function (pointerEvent) {\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        // We emulate click events on left mouse button click, touch contact, and pen\n        // contact. isMouseActionButton returns true in these cases (evt.button is set\n        // to 0).\n        // See http://www.w3.org/TR/pointerevents/#button-states\n        // We only fire click, singleclick, and doubleclick if nobody has called\n        // event.preventDefault().\n        if (this.emulateClicks_ &&\n            !newEvent.defaultPrevented &&\n            !this.dragging_ &&\n            this.isMouseActionButton_(pointerEvent)) {\n            this.emulateClick_(this.down_);\n        }\n        if (this.activePointers_ === 0) {\n            this.dragListenerKeys_.forEach(unlistenByKey);\n            this.dragListenerKeys_.length = 0;\n            this.dragging_ = false;\n            this.down_ = null;\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} If the left mouse button was pressed.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMouseActionButton_ = function (pointerEvent) {\n        return pointerEvent.button === 0;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerDown_ = function (pointerEvent) {\n        this.emulateClicks_ = this.activePointers_ === 0;\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        // Store a copy of the down event\n        this.down_ = /** @type {PointerEvent} */ ({});\n        for (var property in pointerEvent) {\n            var value = pointerEvent[property];\n            this.down_[property] = typeof value === 'function' ? VOID : value;\n        }\n        if (this.dragListenerKeys_.length === 0) {\n            var doc = this.map_.getOwnerDocument();\n            this.dragListenerKeys_.push(listen(doc, MapBrowserEventType.POINTERMOVE, this.handlePointerMove_, this), listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this), \n            /* Note that the listener for `pointercancel is set up on\n             * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n             * the `pointerup` and `pointermove` listeners.\n             *\n             * The reason for this is the following: `TouchSource.vacuumTouches_()`\n             * issues `pointercancel` events, when there was no `touchend` for a\n             * `touchstart`. Now, let's say a first `touchstart` is registered on\n             * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n             * But `documentPointerEventHandler_` doesn't know about the first\n             * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n             * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n             * only registered there.\n             */\n            listen(this.element_, MapBrowserEventType.POINTERCANCEL, this.handlePointerUp_, this));\n            if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n                this.dragListenerKeys_.push(listen(this.element_.getRootNode(), MapBrowserEventType.POINTERUP, this.handlePointerUp_, this));\n            }\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerMove_ = function (pointerEvent) {\n        // Between pointerdown and pointerup, pointermove events are triggered.\n        // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n        // moved a significant distance.\n        if (this.isMoving_(pointerEvent)) {\n            this.dragging_ = true;\n            var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent, this.dragging_);\n            this.dispatchEvent(newEvent);\n        }\n    };\n    /**\n     * Wrap and relay a pointer event.  Note that this requires that the type\n     * string for the MapBrowserEvent matches the PointerEvent type.\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.relayEvent_ = function (pointerEvent) {\n        this.originalPointerMoveEvent_ = pointerEvent;\n        var dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n        this.dispatchEvent(new MapBrowserEvent(pointerEvent.type, this.map_, pointerEvent, dragging));\n    };\n    /**\n     * Flexible handling of a `touch-action: none` css equivalent: because calling\n     * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n     * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n     * when an interaction (currently `DragPan` handles the event.\n     * @param {TouchEvent} event Event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handleTouchMove_ = function (event) {\n        // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n        // may not be initialized yet when we get here on a platform without native pointer events.\n        var originalEvent = this.originalPointerMoveEvent_;\n        if ((!originalEvent || originalEvent.defaultPrevented) &&\n            (typeof event.cancelable !== 'boolean' || event.cancelable === true)) {\n            event.preventDefault();\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} Is moving.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMoving_ = function (pointerEvent) {\n        return (this.dragging_ ||\n            Math.abs(pointerEvent.clientX - this.down_.clientX) >\n                this.moveTolerance_ ||\n            Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_);\n    };\n    /**\n     * Clean up.\n     */\n    MapBrowserEventHandler.prototype.disposeInternal = function () {\n        if (this.relayedListenerKey_) {\n            unlistenByKey(this.relayedListenerKey_);\n            this.relayedListenerKey_ = null;\n        }\n        this.element_.removeEventListener(EventType.TOUCHMOVE, this.boundHandleTouchMove_);\n        if (this.pointerdownListenerKey_) {\n            unlistenByKey(this.pointerdownListenerKey_);\n            this.pointerdownListenerKey_ = null;\n        }\n        this.dragListenerKeys_.forEach(unlistenByKey);\n        this.dragListenerKeys_.length = 0;\n        this.element_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return MapBrowserEventHandler;\n}(Target));\nexport default MapBrowserEventHandler;\n//# sourceMappingURL=MapBrowserEventHandler.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/PluggableMap\n */\nimport BaseObject from './Object.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport EventType from './events/EventType.js';\nimport Layer from './layer/Layer.js';\nimport LayerGroup, { GroupEvent } from './layer/Group.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport RenderEventType from './render/EventType.js';\nimport TileQueue, { getTilePriority } from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport { DEVICE_PIXEL_RATIO, PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { TRUE } from './functions.js';\nimport { apply as applyTransform, create as createTransform, } from './transform.js';\nimport { assert } from './asserts.js';\nimport { clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty, } from './extent.js';\nimport { fromUserCoordinate, toUserCoordinate } from './proj.js';\nimport { getUid } from './util.js';\nimport { hasArea } from './size.js';\nimport { listen, unlistenByKey } from './events.js';\nimport { removeNode } from './dom.js';\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate Animate.\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform CoordinateToPixelTransform.\n * @property {import(\"rbush\").default} declutterTree DeclutterTree.\n * @property {null|import(\"./extent.js\").Extent} extent Extent.\n * @property {import(\"./extent.js\").Extent} [nextExtent] Next extent during an animation series.\n * @property {number} index Index.\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray LayerStatesArray.\n * @property {number} layerIndex LayerIndex.\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform PixelToCoordinateTransform.\n * @property {Array<PostRenderFunction>} postRenderFunctions PostRenderFunctions.\n * @property {import(\"./size.js\").Size} size Size.\n * @property {TileQueue} tileQueue TileQueue.\n * @property {!Object<string, Object<string, boolean>>} usedTiles UsedTiles.\n * @property {Array<number>} viewHints ViewHints.\n * @property {!Object<string, Object<string, boolean>>} wantedTiles WantedTiles.\n * @property {string} mapId The id of the map.\n * @property {Object<string, boolean>} renderTargets Identifiers of previously rendered elements.\n */\n/**\n * @typedef {function(PluggableMap, ?FrameState): any} PostRenderFunction\n */\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>): boolean} [layerFilter] Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer~Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in css pixels. Pixels\n * inside the radius around the given position will be checked for features.\n * @property {boolean} [checkWrapped=true] Check-Wrapped Will check for for wrapped geometries inside the range of\n *   +/- 1 world width. Works only if a projection is used that can be wrapped.\n */\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls] Controls.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions] Interactions.\n * @property {HTMLElement|Document} keyboardEventTarget KeyboardEventTarget.\n * @property {Collection<import(\"./Overlay.js\").default>} overlays Overlays.\n * @property {Object<string, *>} values Values.\n */\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:layergroup'|'change:size'|'change:target'|'change:view'} MapObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<MapObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapBrowserEventType\").Types, import(\"./MapBrowserEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapEventType\").Types, import(\"./MapEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./render/EventType\").MapRenderEventTypes, import(\"./render/Event\").default, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|MapObjectEventTypes|\n *      import(\"./MapBrowserEventType\").Types|import(\"./MapEventType\").Types|\n *      import(\"./render/EventType\").MapRenderEventTypes, Return>} PluggableMapOnSignature\n */\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control.defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction.defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered. If passed by element, the container can be in a secondary document.\n * @property {View|Promise<import(\"./View.js\").ViewOptions>} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n */\nfunction removeLayerMapProperty(layer) {\n    if (layer instanceof Layer) {\n        layer.setMapInternal(null);\n        return;\n    }\n    if (layer instanceof LayerGroup) {\n        layer.getLayers().forEach(removeLayerMapProperty);\n    }\n}\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n * @param {PluggableMap} map Map.\n */\nfunction setLayerMapProperty(layer, map) {\n    if (layer instanceof Layer) {\n        layer.setMapInternal(map);\n        return;\n    }\n    if (layer instanceof LayerGroup) {\n        var layers = layer.getLayers().getArray();\n        for (var i = 0, ii = layers.length; i < ii; ++i) {\n            setLayerMapProperty(layers[i], map);\n        }\n    }\n}\n/**\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires import(\"./render/Event.js\").default#precompose\n * @fires import(\"./render/Event.js\").default#postcompose\n * @fires import(\"./render/Event.js\").default#rendercomplete\n * @api\n */\nvar PluggableMap = /** @class */ (function (_super) {\n    __extends(PluggableMap, _super);\n    /**\n     * @param {MapOptions} options Map options.\n     */\n    function PluggableMap(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {PluggableMapOnSignature<void>}\n         */\n        _this.un;\n        var optionsInternal = createOptionsInternal(options);\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.renderComplete_;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.loaded_ = true;\n        /** @private */\n        _this.boundHandleBrowserEvent_ = _this.handleBrowserEvent.bind(_this);\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.maxTilesLoading_ =\n            options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ =\n            options.pixelRatio !== undefined\n                ? options.pixelRatio\n                : DEVICE_PIXEL_RATIO;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.postRenderTimeoutHandle_;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.animationDelayKey_;\n        /**\n         * @private\n         */\n        _this.animationDelay_ = /** @this {PluggableMap} */ function () {\n            this.animationDelayKey_ = undefined;\n            this.renderFrame_(Date.now());\n        }.bind(_this);\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.coordinateToPixelTransform_ = createTransform();\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.pixelToCoordinateTransform_ = createTransform();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.frameIndex_ = 0;\n        /**\n         * @private\n         * @type {?FrameState}\n         */\n        _this.frameState_ = null;\n        /**\n         * The extent at the previous 'moveend' event.\n         * @private\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.previousExtent_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewPropertyListenerKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewChangeListenerKey_ = null;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.layerGroupPropertyListenerKeys_ = null;\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.viewport_ = document.createElement('div');\n        _this.viewport_.className =\n            'ol-viewport' + ('ontouchstart' in window ? ' ol-touch' : '');\n        _this.viewport_.style.position = 'relative';\n        _this.viewport_.style.overflow = 'hidden';\n        _this.viewport_.style.width = '100%';\n        _this.viewport_.style.height = '100%';\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainer_ = document.createElement('div');\n        _this.overlayContainer_.style.position = 'absolute';\n        _this.overlayContainer_.style.zIndex = '0';\n        _this.overlayContainer_.style.width = '100%';\n        _this.overlayContainer_.style.height = '100%';\n        _this.overlayContainer_.style.pointerEvents = 'none';\n        _this.overlayContainer_.className = 'ol-overlaycontainer';\n        _this.viewport_.appendChild(_this.overlayContainer_);\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainerStopEvent_ = document.createElement('div');\n        _this.overlayContainerStopEvent_.style.position = 'absolute';\n        _this.overlayContainerStopEvent_.style.zIndex = '0';\n        _this.overlayContainerStopEvent_.style.width = '100%';\n        _this.overlayContainerStopEvent_.style.height = '100%';\n        _this.overlayContainerStopEvent_.style.pointerEvents = 'none';\n        _this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n        _this.viewport_.appendChild(_this.overlayContainerStopEvent_);\n        /**\n         * @private\n         * @type {MapBrowserEventHandler}\n         */\n        _this.mapBrowserEventHandler_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.moveTolerance_ = options.moveTolerance;\n        /**\n         * @private\n         * @type {HTMLElement|Document}\n         */\n        _this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.targetChangeHandlerKeys_ = null;\n        /**\n         * @type {Collection<import(\"./control/Control.js\").default>}\n         * @protected\n         */\n        _this.controls = optionsInternal.controls || new Collection();\n        /**\n         * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n         * @protected\n         */\n        _this.interactions = optionsInternal.interactions || new Collection();\n        /**\n         * @type {Collection<import(\"./Overlay.js\").default>}\n         * @private\n         */\n        _this.overlays_ = optionsInternal.overlays;\n        /**\n         * A lookup of overlays by id.\n         * @private\n         * @type {Object<string, import(\"./Overlay.js\").default>}\n         */\n        _this.overlayIdIndex_ = {};\n        /**\n         * @type {import(\"./renderer/Map.js\").default|null}\n         * @private\n         */\n        _this.renderer_ = null;\n        /**\n         * @private\n         * @type {!Array<PostRenderFunction>}\n         */\n        _this.postRenderFunctions_ = [];\n        /**\n         * @private\n         * @type {TileQueue}\n         */\n        _this.tileQueue_ = new TileQueue(_this.getTilePriority.bind(_this), _this.handleTileChange_.bind(_this));\n        _this.addChangeListener(MapProperty.LAYERGROUP, _this.handleLayerGroupChanged_);\n        _this.addChangeListener(MapProperty.VIEW, _this.handleViewChanged_);\n        _this.addChangeListener(MapProperty.SIZE, _this.handleSizeChanged_);\n        _this.addChangeListener(MapProperty.TARGET, _this.handleTargetChanged_);\n        // setProperties will trigger the rendering of the map if the map\n        // is \"defined\" already.\n        _this.setProperties(optionsInternal.values);\n        var map = _this;\n        if (options.view && !(options.view instanceof View)) {\n            options.view.then(function (viewOptions) {\n                map.setView(new View(viewOptions));\n            });\n        }\n        _this.controls.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.controls.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            this.addOverlayInternal_(\n            /** @type {import(\"./Overlay.js\").default} */ (event.element));\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            var overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n            var id = overlay.getId();\n            if (id !== undefined) {\n                delete this.overlayIdIndex_[id.toString()];\n            }\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.controls.forEach(\n        /**\n         * @param {import(\"./control/Control.js\").default} control Control.\n         * @this {PluggableMap}\n         */\n        function (control) {\n            control.setMap(this);\n        }.bind(_this));\n        _this.interactions.forEach(\n        /**\n         * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n         * @this {PluggableMap}\n         */\n        function (interaction) {\n            interaction.setMap(this);\n        }.bind(_this));\n        _this.overlays_.forEach(_this.addOverlayInternal_.bind(_this));\n        return _this;\n    }\n    /**\n     * @abstract\n     * @return {import(\"./renderer/Map.js\").default} The map renderer\n     */\n    PluggableMap.prototype.createRenderer = function () {\n        throw new Error('Use a map type that has a createRenderer method');\n    };\n    /**\n     * Add the given control to the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @api\n     */\n    PluggableMap.prototype.addControl = function (control) {\n        this.getControls().push(control);\n    };\n    /**\n     * Add the given interaction to the map. If you want to add an interaction\n     * at another point of the collection use `getInteraction()` and the methods\n     * available on {@link module:ol/Collection~Collection}. This can be used to\n     * stop the event propagation from the handleEvent function. The interactions\n     * get to handle the events in the reverse order of this collection.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n     * @api\n     */\n    PluggableMap.prototype.addInteraction = function (interaction) {\n        this.getInteractions().push(interaction);\n    };\n    /**\n     * Adds the given layer to the top of this map. If you want to add a layer\n     * elsewhere in the stack, use `getLayers()` and the methods available on\n     * {@link module:ol/Collection~Collection}.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @api\n     */\n    PluggableMap.prototype.addLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        layers.push(layer);\n    };\n    /**\n     * @param {import(\"./layer/Group.js\").GroupEvent} event The layer add event.\n     * @private\n     */\n    PluggableMap.prototype.handleLayerAdd_ = function (event) {\n        setLayerMapProperty(event.layer, this);\n    };\n    /**\n     * Add the given overlay to the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @api\n     */\n    PluggableMap.prototype.addOverlay = function (overlay) {\n        this.getOverlays().push(overlay);\n    };\n    /**\n     * This deals with map's overlay collection changes.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @private\n     */\n    PluggableMap.prototype.addOverlayInternal_ = function (overlay) {\n        var id = overlay.getId();\n        if (id !== undefined) {\n            this.overlayIdIndex_[id.toString()] = overlay;\n        }\n        overlay.setMap(this);\n    };\n    /**\n     *\n     * Clean up.\n     */\n    PluggableMap.prototype.disposeInternal = function () {\n        this.setTarget(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Detect features that intersect a pixel on the viewport, and execute a\n     * callback with each intersecting feature. Layers included in the detection can\n     * be configured through the `layerFilter` option in `opt_options`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(import(\"./Feature.js\").FeatureLike, import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>, import(\"./geom/SimpleGeometry.js\").default): T} callback Feature callback. The callback will be\n     *     called with two arguments. The first argument is one\n     *     {@link module:ol/Feature~Feature feature} or\n     *     {@link module:ol/render/Feature~RenderFeature render feature} at the pixel, the second is\n     *     the {@link module:ol/layer/Layer~Layer layer} of the feature and will be null for\n     *     unmanaged layers. To stop detection, callback functions can return a\n     *     truthy value.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template T\n     * @api\n     */\n    PluggableMap.prototype.forEachFeatureAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_ || !this.renderer_) {\n            return;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.forEachFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, callback, null, layerFilter, null);\n    };\n    /**\n     * Get all features that intersect a pixel on the viewport.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n     * an empty array if none were found.\n     * @api\n     */\n    PluggableMap.prototype.getFeaturesAtPixel = function (pixel, opt_options) {\n        var features = [];\n        this.forEachFeatureAtPixel(pixel, function (feature) {\n            features.push(feature);\n        }, opt_options);\n        return features;\n    };\n    /**\n     * Get all layers from all layer groups.\n     * @return {Array<import(\"./layer/Layer.js\").default>} Layers.\n     * @api\n     */\n    PluggableMap.prototype.getAllLayers = function () {\n        var layers = [];\n        function addLayersFrom(layerGroup) {\n            layerGroup.forEach(function (layer) {\n                if (layer instanceof LayerGroup) {\n                    addLayersFrom(layer.getLayers());\n                }\n                else {\n                    layers.push(layer);\n                }\n            });\n        }\n        addLayersFrom(this.getLayers());\n        return layers;\n    };\n    /**\n     * Please the `layer.getData()` method for {@link module:ol/layer/Tile~TileLayer#getData tile layers} or\n     * {@link module:ol/layer/Image~ImageLayer#getData image layers} instead of using this method.\n     *\n     * Detect layers that have a color value at a pixel on the viewport, and\n     * execute a callback with each matching layer. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     *\n     * Note: In maps with more than one layer, this method will typically return pixel data\n     * representing the composed image of all layers visible at the given pixel – because layers\n     * will generally share the same rendering context.  To force layers to render separately, and\n     * to get pixel data representing only one layer at a time, you can assign each layer a unique\n     * `className` in its constructor.\n     *\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n     *     Layer callback. This callback will receive two arguments: first is the\n     *     {@link module:ol/layer/Layer~Layer layer}, second argument is an array representing\n     *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n     *     that do not currently support this argument. To stop detection, callback\n     *     functions can return a truthy value.\n     * @param {AtPixelOptions} [opt_options] Configuration options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template S,T\n     * @api\n     * @deprecated\n     */\n    PluggableMap.prototype.forEachLayerAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_ || !this.renderer_) {\n            return;\n        }\n        var options = opt_options || {};\n        var hitTolerance = options.hitTolerance !== undefined ? options.hitTolerance : 0;\n        var layerFilter = options.layerFilter || TRUE;\n        return this.renderer_.forEachLayerAtPixel(pixel, this.frameState_, hitTolerance, callback, layerFilter);\n    };\n    /**\n     * Detect if features intersect a pixel on the viewport. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {boolean} Is there a feature at the given pixel?\n     * @api\n     */\n    PluggableMap.prototype.hasFeatureAtPixel = function (pixel, opt_options) {\n        if (!this.frameState_ || !this.renderer_) {\n            return false;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.hasFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, layerFilter, null);\n    };\n    /**\n     * Returns the coordinate in user projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    PluggableMap.prototype.getEventCoordinate = function (event) {\n        return this.getCoordinateFromPixel(this.getEventPixel(event));\n    };\n    /**\n     * Returns the coordinate in view projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     */\n    PluggableMap.prototype.getEventCoordinateInternal = function (event) {\n        return this.getCoordinateFromPixelInternal(this.getEventPixel(event));\n    };\n    /**\n     * Returns the map pixel position for a browser event relative to the viewport.\n     * @param {UIEvent} event Event.\n     * @return {import(\"./pixel.js\").Pixel} Pixel.\n     * @api\n     */\n    PluggableMap.prototype.getEventPixel = function (event) {\n        var viewportPosition = this.viewport_.getBoundingClientRect();\n        var eventPosition = \n        //FIXME Are we really calling this with a TouchEvent anywhere?\n        'changedTouches' in event\n            ? /** @type {TouchEvent} */ (event).changedTouches[0]\n            : /** @type {MouseEvent} */ (event);\n        return [\n            eventPosition.clientX - viewportPosition.left,\n            eventPosition.clientY - viewportPosition.top,\n        ];\n    };\n    /**\n     * Get the target in which this map is rendered.\n     * Note that this returns what is entered as an option or in setTarget:\n     * if that was an element, it returns an element; if a string, it returns that.\n     * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n     *     map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getTarget = function () {\n        return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n    };\n    /**\n     * Get the DOM element into which this map is rendered. In contrast to\n     * `getTarget` this method always return an `Element`, or `null` if the\n     * map has no target.\n     * @return {HTMLElement} The element that the map is rendered in.\n     * @api\n     */\n    PluggableMap.prototype.getTargetElement = function () {\n        var target = this.getTarget();\n        if (target !== undefined) {\n            return typeof target === 'string'\n                ? document.getElementById(target)\n                : target;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * user projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     * @api\n     */\n    PluggableMap.prototype.getCoordinateFromPixel = function (pixel) {\n        return toUserCoordinate(this.getCoordinateFromPixelInternal(pixel), this.getView().getProjection());\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * map view projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     */\n    PluggableMap.prototype.getCoordinateFromPixelInternal = function (pixel) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n        }\n    };\n    /**\n     * Get the map controls. Modifying this collection changes the controls\n     * associated with the map.\n     * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n     * @api\n     */\n    PluggableMap.prototype.getControls = function () {\n        return this.controls;\n    };\n    /**\n     * Get the map overlays. Modifying this collection changes the overlays\n     * associated with the map.\n     * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n     * @api\n     */\n    PluggableMap.prototype.getOverlays = function () {\n        return this.overlays_;\n    };\n    /**\n     * Get an overlay by its identifier (the value returned by overlay.getId()).\n     * Note that the index treats string and numeric identifiers as the same. So\n     * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n     * @param {string|number} id Overlay identifier.\n     * @return {import(\"./Overlay.js\").default} Overlay.\n     * @api\n     */\n    PluggableMap.prototype.getOverlayById = function (id) {\n        var overlay = this.overlayIdIndex_[id.toString()];\n        return overlay !== undefined ? overlay : null;\n    };\n    /**\n     * Get the map interactions. Modifying this collection changes the interactions\n     * associated with the map.\n     *\n     * Interactions are used for e.g. pan, zoom and rotate.\n     * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n     * @api\n     */\n    PluggableMap.prototype.getInteractions = function () {\n        return this.interactions;\n    };\n    /**\n     * Get the layergroup associated with this map.\n     * @return {LayerGroup} A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getLayerGroup = function () {\n        return /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP));\n    };\n    /**\n     * Clear any existing layers and add layers to the map.\n     * @param {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>} layers The layers to be added to the map.\n     * @api\n     */\n    PluggableMap.prototype.setLayers = function (layers) {\n        var group = this.getLayerGroup();\n        if (layers instanceof Collection) {\n            group.setLayers(layers);\n            return;\n        }\n        var collection = group.getLayers();\n        collection.clear();\n        collection.extend(layers);\n    };\n    /**\n     * Get the collection of layers associated with this map.\n     * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n     * @api\n     */\n    PluggableMap.prototype.getLayers = function () {\n        var layers = this.getLayerGroup().getLayers();\n        return layers;\n    };\n    /**\n     * @return {boolean} Layers have sources that are still loading.\n     */\n    PluggableMap.prototype.getLoadingOrNotReady = function () {\n        var layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var state = layerStatesArray[i];\n            if (!state.visible) {\n                continue;\n            }\n            var renderer = state.layer.getRenderer();\n            if (renderer && !renderer.ready) {\n                return true;\n            }\n            var source = /** @type {import(\"./layer/Layer.js\").default} */ (state.layer).getSource();\n            if (source && source.loading) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the user\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.getPixelFromCoordinate = function (coordinate) {\n        var viewCoordinate = fromUserCoordinate(coordinate, this.getView().getProjection());\n        return this.getPixelFromCoordinateInternal(viewCoordinate);\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the map view\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     */\n    PluggableMap.prototype.getPixelFromCoordinateInternal = function (coordinate) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n        }\n    };\n    /**\n     * Get the map renderer.\n     * @return {import(\"./renderer/Map.js\").default|null} Renderer\n     */\n    PluggableMap.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Get the size of this map.\n     * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getSize = function () {\n        return /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE));\n    };\n    /**\n     * Get the view associated with this map. A view manages properties such as\n     * center and resolution.\n     * @return {View} The view that controls this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getView = function () {\n        return /** @type {View} */ (this.get(MapProperty.VIEW));\n    };\n    /**\n     * Get the element that serves as the map viewport.\n     * @return {HTMLElement} Viewport.\n     * @api\n     */\n    PluggableMap.prototype.getViewport = function () {\n        return this.viewport_;\n    };\n    /**\n     * Get the element that serves as the container for overlays.  Elements added to\n     * this container will let mousedown and touchstart events through to the map,\n     * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n     * events.\n     * @return {!HTMLElement} The map's overlay container.\n     */\n    PluggableMap.prototype.getOverlayContainer = function () {\n        return this.overlayContainer_;\n    };\n    /**\n     * Get the element that serves as a container for overlays that don't allow\n     * event propagation. Elements added to this container won't let mousedown and\n     * touchstart events through to the map, so clicks and gestures on an overlay\n     * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @return {!HTMLElement} The map's overlay container that stops events.\n     */\n    PluggableMap.prototype.getOverlayContainerStopEvent = function () {\n        return this.overlayContainerStopEvent_;\n    };\n    /**\n     * @return {!Document} The document where the map is displayed.\n     */\n    PluggableMap.prototype.getOwnerDocument = function () {\n        var targetElement = this.getTargetElement();\n        return targetElement ? targetElement.ownerDocument : document;\n    };\n    /**\n     * @param {import(\"./Tile.js\").default} tile Tile.\n     * @param {string} tileSourceKey Tile source key.\n     * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n     * @param {number} tileResolution Tile resolution.\n     * @return {number} Tile priority.\n     */\n    PluggableMap.prototype.getTilePriority = function (tile, tileSourceKey, tileCenter, tileResolution) {\n        return getTilePriority(this.frameState_, tile, tileSourceKey, tileCenter, tileResolution);\n    };\n    /**\n     * @param {UIEvent} browserEvent Browser event.\n     * @param {string} [opt_type] Type.\n     */\n    PluggableMap.prototype.handleBrowserEvent = function (browserEvent, opt_type) {\n        var type = opt_type || browserEvent.type;\n        var mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n        this.handleMapBrowserEvent(mapBrowserEvent);\n    };\n    /**\n     * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n     */\n    PluggableMap.prototype.handleMapBrowserEvent = function (mapBrowserEvent) {\n        if (!this.frameState_) {\n            // With no view defined, we cannot translate pixels into geographical\n            // coordinates so interactions cannot be used.\n            return;\n        }\n        var originalEvent = /** @type {PointerEvent} */ (mapBrowserEvent.originalEvent);\n        var eventType = originalEvent.type;\n        if (eventType === PointerEventType.POINTERDOWN ||\n            eventType === EventType.WHEEL ||\n            eventType === EventType.KEYDOWN) {\n            var doc = this.getOwnerDocument();\n            var rootNode = this.viewport_.getRootNode\n                ? this.viewport_.getRootNode()\n                : doc;\n            var target = /** @type {Node} */ (originalEvent.target);\n            if (\n            // Abort if the target is a child of the container for elements whose events are not meant\n            // to be handled by map interactions.\n            this.overlayContainerStopEvent_.contains(target) ||\n                // Abort if the event target is a child of the container that is no longer in the page.\n                // It's possible for the target to no longer be in the page if it has been removed in an\n                // event listener, this might happen in a Control that recreates it's content based on\n                // user interaction either manually or via a render in something like https://reactjs.org/\n                !(rootNode === doc ? doc.documentElement : rootNode).contains(target)) {\n                return;\n            }\n        }\n        mapBrowserEvent.frameState = this.frameState_;\n        if (this.dispatchEvent(mapBrowserEvent) !== false) {\n            var interactionsArray = this.getInteractions().getArray().slice();\n            for (var i = interactionsArray.length - 1; i >= 0; i--) {\n                var interaction = interactionsArray[i];\n                if (interaction.getMap() !== this ||\n                    !interaction.getActive() ||\n                    !this.getTargetElement()) {\n                    continue;\n                }\n                var cont = interaction.handleEvent(mapBrowserEvent);\n                if (!cont || mapBrowserEvent.propagationStopped) {\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @protected\n     */\n    PluggableMap.prototype.handlePostRender = function () {\n        var frameState = this.frameState_;\n        // Manage the tile queue\n        // Image loads are expensive and a limited resource, so try to use them\n        // efficiently:\n        // * When the view is static we allow a large number of parallel tile loads\n        //   to complete the frame as quickly as possible.\n        // * When animating or interacting, image loads can cause janks, so we reduce\n        //   the maximum number of loads per frame and limit the number of parallel\n        //   tile loads to remain reactive to view changes and to reduce the chance of\n        //   loading tiles that will quickly disappear from view.\n        var tileQueue = this.tileQueue_;\n        if (!tileQueue.isEmpty()) {\n            var maxTotalLoading = this.maxTilesLoading_;\n            var maxNewLoads = maxTotalLoading;\n            if (frameState) {\n                var hints = frameState.viewHints;\n                if (hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING]) {\n                    var lowOnFrameBudget = Date.now() - frameState.time > 8;\n                    maxTotalLoading = lowOnFrameBudget ? 0 : 8;\n                    maxNewLoads = lowOnFrameBudget ? 0 : 2;\n                }\n            }\n            if (tileQueue.getTilesLoading() < maxTotalLoading) {\n                tileQueue.reprioritize(); // FIXME only call if view has changed\n                tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n            }\n        }\n        if (frameState && this.renderer_ && !frameState.animate) {\n            if (this.renderComplete_ === true) {\n                if (this.hasListener(RenderEventType.RENDERCOMPLETE)) {\n                    this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n                }\n                if (this.loaded_ === false) {\n                    this.loaded_ = true;\n                    this.dispatchEvent(new MapEvent(MapEventType.LOADEND, this, frameState));\n                }\n            }\n            else if (this.loaded_ === true) {\n                this.loaded_ = false;\n                this.dispatchEvent(new MapEvent(MapEventType.LOADSTART, this, frameState));\n            }\n        }\n        var postRenderFunctions = this.postRenderFunctions_;\n        for (var i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n            postRenderFunctions[i](this, frameState);\n        }\n        postRenderFunctions.length = 0;\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleSizeChanged_ = function () {\n        if (this.getView() && !this.getView().getAnimating()) {\n            this.getView().resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTargetChanged_ = function () {\n        if (this.mapBrowserEventHandler_) {\n            for (var i = 0, ii = this.targetChangeHandlerKeys_.length; i < ii; ++i) {\n                unlistenByKey(this.targetChangeHandlerKeys_[i]);\n            }\n            this.targetChangeHandlerKeys_ = null;\n            this.viewport_.removeEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_);\n            this.viewport_.removeEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_);\n            this.mapBrowserEventHandler_.dispose();\n            this.mapBrowserEventHandler_ = null;\n            removeNode(this.viewport_);\n        }\n        // target may be undefined, null, a string or an Element.\n        // If it's a string we convert it to an Element before proceeding.\n        // If it's not now an Element we remove the viewport from the DOM.\n        // If it's an Element we append the viewport element to it.\n        var targetElement = this.getTargetElement();\n        if (!targetElement) {\n            if (this.renderer_) {\n                clearTimeout(this.postRenderTimeoutHandle_);\n                this.postRenderTimeoutHandle_ = undefined;\n                this.postRenderFunctions_.length = 0;\n                this.renderer_.dispose();\n                this.renderer_ = null;\n            }\n            if (this.animationDelayKey_) {\n                cancelAnimationFrame(this.animationDelayKey_);\n                this.animationDelayKey_ = undefined;\n            }\n        }\n        else {\n            targetElement.appendChild(this.viewport_);\n            if (!this.renderer_) {\n                this.renderer_ = this.createRenderer();\n            }\n            this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, this.moveTolerance_);\n            for (var key in MapBrowserEventType) {\n                this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[key], this.handleMapBrowserEvent.bind(this));\n            }\n            this.viewport_.addEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_, false);\n            this.viewport_.addEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n            var defaultView = this.getOwnerDocument().defaultView;\n            var keyboardEventTarget = !this.keyboardEventTarget_\n                ? targetElement\n                : this.keyboardEventTarget_;\n            this.targetChangeHandlerKeys_ = [\n                listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n                listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this),\n                listen(defaultView, EventType.RESIZE, this.updateSize, this),\n            ];\n        }\n        this.updateSize();\n        // updateSize calls setSize, so no need to call this.render\n        // ourselves here.\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTileChange_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewPropertyChanged_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewChanged_ = function () {\n        if (this.viewPropertyListenerKey_) {\n            unlistenByKey(this.viewPropertyListenerKey_);\n            this.viewPropertyListenerKey_ = null;\n        }\n        if (this.viewChangeListenerKey_) {\n            unlistenByKey(this.viewChangeListenerKey_);\n            this.viewChangeListenerKey_ = null;\n        }\n        var view = this.getView();\n        if (view) {\n            this.updateViewportSize_();\n            this.viewPropertyListenerKey_ = listen(view, ObjectEventType.PROPERTYCHANGE, this.handleViewPropertyChanged_, this);\n            this.viewChangeListenerKey_ = listen(view, EventType.CHANGE, this.handleViewPropertyChanged_, this);\n            view.resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleLayerGroupChanged_ = function () {\n        if (this.layerGroupPropertyListenerKeys_) {\n            this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n            this.layerGroupPropertyListenerKeys_ = null;\n        }\n        var layerGroup = this.getLayerGroup();\n        if (layerGroup) {\n            this.handleLayerAdd_(new GroupEvent('addlayer', layerGroup));\n            this.layerGroupPropertyListenerKeys_ = [\n                listen(layerGroup, ObjectEventType.PROPERTYCHANGE, this.render, this),\n                listen(layerGroup, EventType.CHANGE, this.render, this),\n                listen(layerGroup, 'addlayer', this.handleLayerAdd_, this),\n                listen(layerGroup, 'removelayer', this.handleLayerRemove_, this),\n            ];\n        }\n        this.render();\n    };\n    /**\n     * @return {boolean} Is rendered.\n     */\n    PluggableMap.prototype.isRendered = function () {\n        return !!this.frameState_;\n    };\n    /**\n     * Requests an immediate render in a synchronous manner.\n     * @api\n     */\n    PluggableMap.prototype.renderSync = function () {\n        if (this.animationDelayKey_) {\n            cancelAnimationFrame(this.animationDelayKey_);\n        }\n        this.animationDelay_();\n    };\n    /**\n     * Redraws all text after new fonts have loaded\n     */\n    PluggableMap.prototype.redrawText = function () {\n        var layerStates = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStates.length; i < ii; ++i) {\n            var layer = layerStates[i].layer;\n            if (layer.hasRenderer()) {\n                layer.getRenderer().handleFontsChanged();\n            }\n        }\n    };\n    /**\n     * Request a map rendering (at the next animation frame).\n     * @api\n     */\n    PluggableMap.prototype.render = function () {\n        if (this.renderer_ && this.animationDelayKey_ === undefined) {\n            this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n        }\n    };\n    /**\n     * Remove the given control from the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n     *     if the control was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeControl = function (control) {\n        return this.getControls().remove(control);\n    };\n    /**\n     * Remove the given interaction from the map.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n     * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n     *     undefined if the interaction was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeInteraction = function (interaction) {\n        return this.getInteractions().remove(interaction);\n    };\n    /**\n     * Removes the given layer from the map.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n     *     layer was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        return layers.remove(layer);\n    };\n    /**\n     * @param {import(\"./layer/Group.js\").GroupEvent} event The layer remove event.\n     * @private\n     */\n    PluggableMap.prototype.handleLayerRemove_ = function (event) {\n        removeLayerMapProperty(event.layer);\n    };\n    /**\n     * Remove the given overlay from the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n     *     if the overlay was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeOverlay = function (overlay) {\n        return this.getOverlays().remove(overlay);\n    };\n    /**\n     * @param {number} time Time.\n     * @private\n     */\n    PluggableMap.prototype.renderFrame_ = function (time) {\n        var _this = this;\n        var size = this.getSize();\n        var view = this.getView();\n        var previousFrameState = this.frameState_;\n        /** @type {?FrameState} */\n        var frameState = null;\n        if (size !== undefined && hasArea(size) && view && view.isDef()) {\n            var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n            var viewState = view.getState();\n            frameState = {\n                animate: false,\n                coordinateToPixelTransform: this.coordinateToPixelTransform_,\n                declutterTree: null,\n                extent: getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, size),\n                index: this.frameIndex_++,\n                layerIndex: 0,\n                layerStatesArray: this.getLayerGroup().getLayerStatesArray(),\n                pixelRatio: this.pixelRatio_,\n                pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n                postRenderFunctions: [],\n                size: size,\n                tileQueue: this.tileQueue_,\n                time: time,\n                usedTiles: {},\n                viewState: viewState,\n                viewHints: viewHints,\n                wantedTiles: {},\n                mapId: getUid(this),\n                renderTargets: {},\n            };\n            if (viewState.nextCenter && viewState.nextResolution) {\n                var rotation = isNaN(viewState.nextRotation)\n                    ? viewState.rotation\n                    : viewState.nextRotation;\n                frameState.nextExtent = getForViewAndSize(viewState.nextCenter, viewState.nextResolution, rotation, size);\n            }\n        }\n        this.frameState_ = frameState;\n        /** @type {import(\"./renderer/Map.js\").default} */ (this.renderer_).renderFrame(frameState);\n        if (frameState) {\n            if (frameState.animate) {\n                this.render();\n            }\n            Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n            if (previousFrameState) {\n                var moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                        !equals(frameState.extent, this.previousExtent_));\n                if (moveStart) {\n                    this.dispatchEvent(new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n                    this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n                }\n            }\n            var idle = this.previousExtent_ &&\n                !frameState.viewHints[ViewHint.ANIMATING] &&\n                !frameState.viewHints[ViewHint.INTERACTING] &&\n                !equals(frameState.extent, this.previousExtent_);\n            if (idle) {\n                this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n                clone(frameState.extent, this.previousExtent_);\n            }\n        }\n        this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n        this.renderComplete_ =\n            this.hasListener(MapEventType.LOADSTART) ||\n                this.hasListener(MapEventType.LOADEND) ||\n                this.hasListener(RenderEventType.RENDERCOMPLETE)\n                ? !this.tileQueue_.getTilesLoading() &&\n                    !this.tileQueue_.getCount() &&\n                    !this.getLoadingOrNotReady()\n                : undefined;\n        if (!this.postRenderTimeoutHandle_) {\n            this.postRenderTimeoutHandle_ = setTimeout(function () {\n                _this.postRenderTimeoutHandle_ = undefined;\n                _this.handlePostRender();\n            }, 0);\n        }\n    };\n    /**\n     * Sets the layergroup of this map.\n     * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setLayerGroup = function (layerGroup) {\n        var oldLayerGroup = this.getLayerGroup();\n        if (oldLayerGroup) {\n            this.handleLayerRemove_(new GroupEvent('removelayer', oldLayerGroup));\n        }\n        this.set(MapProperty.LAYERGROUP, layerGroup);\n    };\n    /**\n     * Set the size of this map.\n     * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setSize = function (size) {\n        this.set(MapProperty.SIZE, size);\n    };\n    /**\n     * Set the target element to render this map into.\n     * @param {HTMLElement|string} [target] The Element or id of the Element\n     *     that the map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setTarget = function (target) {\n        this.set(MapProperty.TARGET, target);\n    };\n    /**\n     * Set the view for this map.\n     * @param {View|Promise<import(\"./View.js\").ViewOptions>} view The view that controls this map.\n     * It is also possible to pass a promise that resolves to options for constructing a view.  This\n     * alternative allows view properties to be resolved by sources or other components that load\n     * view-related metadata.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setView = function (view) {\n        if (!view || view instanceof View) {\n            this.set(MapProperty.VIEW, view);\n            return;\n        }\n        this.set(MapProperty.VIEW, new View());\n        var map = this;\n        view.then(function (viewOptions) {\n            map.setView(new View(viewOptions));\n        });\n    };\n    /**\n     * Force a recalculation of the map viewport size.  This should be called when\n     * third-party code changes the size of the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.updateSize = function () {\n        var targetElement = this.getTargetElement();\n        var size = undefined;\n        if (targetElement) {\n            var computedStyle = getComputedStyle(targetElement);\n            var width = targetElement.offsetWidth -\n                parseFloat(computedStyle['borderLeftWidth']) -\n                parseFloat(computedStyle['paddingLeft']) -\n                parseFloat(computedStyle['paddingRight']) -\n                parseFloat(computedStyle['borderRightWidth']);\n            var height = targetElement.offsetHeight -\n                parseFloat(computedStyle['borderTopWidth']) -\n                parseFloat(computedStyle['paddingTop']) -\n                parseFloat(computedStyle['paddingBottom']) -\n                parseFloat(computedStyle['borderBottomWidth']);\n            if (!isNaN(width) && !isNaN(height)) {\n                size = [width, height];\n                if (!hasArea(size) &&\n                    !!(targetElement.offsetWidth ||\n                        targetElement.offsetHeight ||\n                        targetElement.getClientRects().length)) {\n                    // eslint-disable-next-line\n                    console.warn(\"No map visible because the map container's width or height are 0.\");\n                }\n            }\n        }\n        this.setSize(size);\n        this.updateViewportSize_();\n    };\n    /**\n     * Recomputes the viewport size and save it on the view object (if any)\n     * @private\n     */\n    PluggableMap.prototype.updateViewportSize_ = function () {\n        var view = this.getView();\n        if (view) {\n            var size = undefined;\n            var computedStyle = getComputedStyle(this.viewport_);\n            if (computedStyle.width && computedStyle.height) {\n                size = [\n                    parseInt(computedStyle.width, 10),\n                    parseInt(computedStyle.height, 10),\n                ];\n            }\n            view.setViewportSize(size);\n        }\n    };\n    return PluggableMap;\n}(BaseObject));\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n    /**\n     * @type {HTMLElement|Document}\n     */\n    var keyboardEventTarget = null;\n    if (options.keyboardEventTarget !== undefined) {\n        keyboardEventTarget =\n            typeof options.keyboardEventTarget === 'string'\n                ? document.getElementById(options.keyboardEventTarget)\n                : options.keyboardEventTarget;\n    }\n    /**\n     * @type {Object<string, *>}\n     */\n    var values = {};\n    var layerGroup = options.layers &&\n        typeof ( /** @type {?} */(options.layers).getLayers) === 'function'\n        ? /** @type {LayerGroup} */ (options.layers)\n        : new LayerGroup({ layers: /** @type {Collection} */ (options.layers) });\n    values[MapProperty.LAYERGROUP] = layerGroup;\n    values[MapProperty.TARGET] = options.target;\n    values[MapProperty.VIEW] =\n        options.view instanceof View ? options.view : new View();\n    var controls;\n    if (options.controls !== undefined) {\n        if (Array.isArray(options.controls)) {\n            controls = new Collection(options.controls.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.controls).getArray) === 'function', 47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n            controls = /** @type {Collection} */ (options.controls);\n        }\n    }\n    var interactions;\n    if (options.interactions !== undefined) {\n        if (Array.isArray(options.interactions)) {\n            interactions = new Collection(options.interactions.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.interactions).getArray) ===\n                'function', 48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n            interactions = /** @type {Collection} */ (options.interactions);\n        }\n    }\n    var overlays;\n    if (options.overlays !== undefined) {\n        if (Array.isArray(options.overlays)) {\n            overlays = new Collection(options.overlays.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.overlays).getArray) === 'function', 49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n            overlays = options.overlays;\n        }\n    }\n    else {\n        overlays = new Collection();\n    }\n    return {\n        controls: controls,\n        interactions: interactions,\n        keyboardEventTarget: keyboardEventTarget,\n        overlays: overlays,\n        values: values,\n    };\n}\nexport default PluggableMap;\n//# sourceMappingURL=PluggableMap.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Map\n */\nimport CompositeMapRenderer from './renderer/Composite.js';\nimport PluggableMap from './PluggableMap.js';\nimport { assign } from './obj.js';\nimport { defaults as defaultControls } from './control.js';\nimport { defaults as defaultInteractions } from './interaction.js';\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile~TileLayer} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~LayerGroup}\n * is a subclass of {@link module:ol/layer/Base~BaseLayer}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @api\n */\nvar Map = /** @class */ (function (_super) {\n    __extends(Map, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").MapOptions} options Map options.\n     */\n    function Map(options) {\n        options = assign({}, options);\n        if (!options.controls) {\n            options.controls = defaultControls();\n        }\n        if (!options.interactions) {\n            options.interactions = defaultInteractions({\n                onFocusOnly: true,\n            });\n        }\n        return _super.call(this, options) || this;\n    }\n    Map.prototype.createRenderer = function () {\n        return new CompositeMapRenderer(this);\n    };\n    return Map;\n}(PluggableMap));\nexport default Map;\n//# sourceMappingURL=Map.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageBase\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { abstract } from './util.js';\n/**\n * @abstract\n */\nvar ImageBase = /** @class */ (function (_super) {\n    __extends(ImageBase, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./ImageState.js\").default} state State.\n     */\n    function ImageBase(extent, resolution, pixelRatio, state) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.extent = extent;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @protected\n         * @type {number|undefined}\n         */\n        _this.resolution = resolution;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = state;\n        return _this;\n    }\n    /**\n     * @protected\n     */\n    ImageBase.prototype.changed = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    ImageBase.prototype.getExtent = function () {\n        return this.extent;\n    };\n    /**\n     * @abstract\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     */\n    ImageBase.prototype.getImage = function () {\n        return abstract();\n    };\n    /**\n     * @return {number} PixelRatio.\n     */\n    ImageBase.prototype.getPixelRatio = function () {\n        return this.pixelRatio_;\n    };\n    /**\n     * @return {number} Resolution.\n     */\n    ImageBase.prototype.getResolution = function () {\n        return /** @type {number} */ (this.resolution);\n    };\n    /**\n     * @return {import(\"./ImageState.js\").default} State.\n     */\n    ImageBase.prototype.getState = function () {\n        return this.state;\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageBase.prototype.load = function () {\n        abstract();\n    };\n    return ImageBase;\n}(EventTarget));\nexport default ImageBase;\n//# sourceMappingURL=ImageBase.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Image\n */\nimport EventType from './events/EventType.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport { IMAGE_DECODE } from './has.js';\nimport { getHeight } from './extent.js';\nimport { listenOnce, unlistenByKey } from './events.js';\n/**\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\nvar ImageWrapper = /** @class */ (function (_super) {\n    __extends(ImageWrapper, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {LoadFunction} imageLoadFunction Image load function.\n     */\n    function ImageWrapper(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n        var _this = _super.call(this, extent, resolution, pixelRatio, ImageState.IDLE) || this;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = ImageState.IDLE;\n        /**\n         * @private\n         * @type {LoadFunction}\n         */\n        _this.imageLoadFunction_ = imageLoadFunction;\n        return _this;\n    }\n    /**\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageWrapper.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageError_ = function () {\n        this.state = ImageState.ERROR;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageLoad_ = function () {\n        if (this.resolution === undefined) {\n            this.resolution = getHeight(this.extent) / this.image_.height;\n        }\n        this.state = ImageState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load the image or retry if loading previously failed.\n     * Loading is taken care of by the tile queue, and calling this method is\n     * only needed for preloading or for reloading in case of an error.\n     * @api\n     */\n    ImageWrapper.prototype.load = function () {\n        if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n            this.state = ImageState.LOADING;\n            this.changed();\n            this.imageLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n     */\n    ImageWrapper.prototype.setImage = function (image) {\n        this.image_ = image;\n        this.resolution = getHeight(this.extent) / this.image_.height;\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageWrapper;\n}(ImageBase));\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n    var img = /** @type {HTMLImageElement} */ (image);\n    var listening = true;\n    var decoding = false;\n    var loaded = false;\n    var listenerKeys = [\n        listenOnce(img, EventType.LOAD, function () {\n            loaded = true;\n            if (!decoding) {\n                loadHandler();\n            }\n        }),\n    ];\n    if (img.src && IMAGE_DECODE) {\n        decoding = true;\n        img\n            .decode()\n            .then(function () {\n            if (listening) {\n                loadHandler();\n            }\n        })\n            .catch(function (error) {\n            if (listening) {\n                if (loaded) {\n                    loadHandler();\n                }\n                else {\n                    errorHandler();\n                }\n            }\n        });\n    }\n    else {\n        listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n    }\n    return function unlisten() {\n        listening = false;\n        listenerKeys.forEach(unlistenByKey);\n    };\n}\nexport default ImageWrapper;\n//# sourceMappingURL=Image.js.map","/** Vanilla JS geographic inputs\r\n * color, size, width, font, symboles, dash, arrow, pattern\r\n */\r\nimport ol_ext_inherits from '../ext'\r\nimport ol_Object from 'ol/Object'\r\n\r\n/** @namespace  ol.ext.input\r\n */\r\n/*global ol*/\r\nif (window.ol) {\r\n  ol.ext.input = {};\r\n}\r\n\r\n/** Abstract base class; normally only used for creating subclasses and not instantiated in apps.    \r\n * @constructor\r\n * @extends {ol_Object}\r\n * @param {*} options\r\n *  @param {Element} [options.input] input element, if none create one\r\n *  @param {string} [options.type] input type, if no input\r\n *  @param {number} [options.min] input min, if no input\r\n *  @param {number} [options.max] input max, if no input\r\n *  @param {number} [options.step] input step, if no input\r\n *  @param {string|number} [options.val] input value\r\n *  @param {boolean} [options.checked] check input\r\n *  @param {boolean} [options.hidden] the input is display:none\r\n *  @param {boolean} [options.disabled] disable input\r\n *  @param {Element} [options.parent] parent element, if no input\r\n */\r\nvar ol_ext_input_Base = function(options) {\r\n  options = options || {};\r\n  \r\n  ol_Object.call(this);\r\n  \r\n  var input = this.input = options.input;\r\n  if (!input) {\r\n    input = this.input = document.createElement('INPUT');\r\n    if (options.type) input.setAttribute('type', options.type);\r\n    if (options.min !== undefined) input.setAttribute('min', options.min);\r\n    if (options.max !== undefined) input.setAttribute('max', options.max);\r\n    if (options.step !== undefined) input.setAttribute('step', options.step);\r\n    if (options.parent) options.parent.appendChild(input);\r\n  } \r\n  if (options.disabled) input.disabled = true;\r\n  if (options.checked !== undefined) input.checked = !!options.checked;\r\n  if (options.val !== undefined) input.value = options.val;\r\n  if (options.hidden) input.style.display = 'none';\r\n  input.addEventListener('focus', function() {\r\n    if (this.element) this.element.classList.add('ol-focus');\r\n  }.bind(this))\r\n  var tout;\r\n  input.addEventListener('focusout', function() {\r\n    if (this.element) {\r\n      if (tout) clearTimeout(tout);\r\n      tout = setTimeout(function() {\r\n        this.element.classList.remove('ol-focus');\r\n      }.bind(this), 0);\r\n    }\r\n  }.bind(this))\r\n};\r\nol_ext_inherits(ol_ext_input_Base, ol_Object);\r\n\r\n/** Listen to drag event\r\n * @param {Element} elt \r\n * @param {function} cback when draggin on the element\r\n * @private\r\n */\r\nol_ext_input_Base.prototype._listenDrag = function(elt, cback) {\r\n  var handle = function(e) {\r\n    this.moving = true;\r\n    var listen = function(e) {\r\n      if (e.type==='pointerup') {\r\n        document.removeEventListener('pointermove', listen);\r\n        document.removeEventListener('pointerup', listen);\r\n        document.removeEventListener('pointercancel', listen);\r\n        setTimeout(function() {\r\n          this.moving = false;\r\n        }.bind(this));\r\n      }\r\n      if (e.target === elt) cback(e);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }.bind(this);\r\n    document.addEventListener('pointermove', listen, false);\r\n    document.addEventListener('pointerup', listen, false);\r\n    document.addEventListener('pointercancel', listen, false);\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }.bind(this)\r\n  elt.addEventListener('mousedown', handle, false);\r\n  elt.addEventListener('touchstart', handle, false);\r\n};\r\n\r\n/** Set the current value\r\n */\r\n ol_ext_input_Base.prototype.setValue = function(v) {\r\n  if (v !== undefined) this.input.value = v;\r\n  this.input.dispatchEvent(new Event('change'));\r\n};\r\n\r\n/** Get the current getValue\r\n * @returns {string}\r\n */\r\nol_ext_input_Base.prototype.getValue = function() {\r\n  return this.input.value;\r\n};\r\n\r\n/** Get the input element\r\n * @returns {Element}\r\n */\r\nol_ext_input_Base.prototype.getInputElement = function() {\r\n  return this.input;\r\n};\r\n\r\nexport default ol_ext_input_Base\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Base from './Base'\r\n\r\n/** Checkbox input\r\n * @constructor\r\n * @extends {ol_ext_input_Base}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element|string} [options.html] label content\r\n *  @param {string} [options.after] label garnish (placed after)\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n *  @param {boolean} [options.autoClose=true]\r\n *  @param {boolean} [options.visible=false] display the input\r\n */\r\nvar ol_ext_input_Checkbox = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Base.call(this, options);\r\n\r\n  var label = this.element = document.createElement('LABEL');\r\n  if (options.html instanceof Element) label.appendChild(options.html)\r\n  else if (options.html !== undefined) label.innerHTML = options.html;\r\n  label.className = ('ol-ext-check ol-ext-checkbox '  + (options.className || '')).trim();\r\n\r\n  if (this.input.parentNode) this.input.parentNode.insertBefore(label, this.input);\r\n  label.appendChild(this.input);\r\n  label.appendChild(document.createElement('SPAN'));\r\n  if (options.after) {\r\n    label.appendChild(document.createTextNode(options.after));\r\n  }\r\n\r\n  // Handle change\r\n  this.input.addEventListener('change', function() {\r\n    this.dispatchEvent({ type: 'check', checked: this.input.checked, value: this.input.value });\r\n  }.bind(this));\r\n\r\n};\r\nol_ext_inherits(ol_ext_input_Checkbox, ol_ext_input_Base);\r\n  \r\nol_ext_input_Checkbox.prototype.isChecked = function () {\r\n  return this.input.checked;\r\n};\r\n\r\nexport default ol_ext_input_Checkbox\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Checkbox from './Checkbox'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Switch = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Checkbox.call(this, options);\r\n\r\n  this.element.className = ('ol-ext-toggle-switch ' + (options.className || '')).trim();\r\n};\r\nol_ext_inherits(ol_ext_input_Switch, ol_ext_input_Checkbox);\r\n  \r\nexport default ol_ext_input_Switch\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Checkbox from './Checkbox'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Radio = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Checkbox.call(this, options);\r\n\r\n  this.element.className = ('ol-ext-check ol-ext-radio ' + (options.className || '')).trim();\r\n};\r\nol_ext_inherits(ol_ext_input_Radio, ol_ext_input_Checkbox);\r\n  \r\nexport default ol_ext_input_Radio\r\n","/** Vanilla JS helper to manipulate DOM without jQuery\r\n * @see https://github.com/nefe/You-Dont-Need-jQuery\r\n * @see https://plainjs.com/javascript/\r\n * @see http://youmightnotneedjquery.com/\r\n */\r\nimport ol_ext_input_Checkbox from './input/Checkbox'\r\nimport ol_ext_input_Switch from './input/Switch'\r\nimport ol_ext_input_Radio from './input/Radio'\r\n\r\n/** @namespace ol.ext.element */\r\nvar ol_ext_element = {};\r\n\r\n/**\r\n * Create an element\r\n * @param {string} tagName The element tag, use 'TEXT' to create a text node\r\n * @param {*} options\r\n *  @param {string} options.className className The element class name \r\n *  @param {Element} options.parent Parent to append the element as child\r\n *  @param {Element|string} [options.html] Content of the element (if text is not set)\r\n *  @param {string} [options.text] Text content (if html is not set)\r\n *  @param {Element|string} [options.options] when tagName = SELECT a list of options as key:value to add to the select\r\n *  @param {string} options.* Any other attribut to add to the element\r\n */\r\nol_ext_element.create = function (tagName, options) {\r\n  options = options || {};\r\n  var elt;\r\n  // Create text node\r\n  if (tagName === 'TEXT') {\r\n    elt = document.createTextNode(options.html||'');\r\n    if (options.parent) options.parent.appendChild(elt);\r\n  } else {\r\n    // Other element\r\n    elt = document.createElement(tagName);\r\n    if (/button/i.test(tagName)) elt.setAttribute('type', 'button');\r\n    for (var attr in options) {\r\n      switch (attr) {\r\n        case 'className': {\r\n          if (options.className && options.className.trim) elt.setAttribute('class', options.className.trim());\r\n          break;\r\n        }\r\n        case 'text': {\r\n          elt.innerText = options.text;\r\n          break;\r\n        }\r\n        case 'html': {\r\n          if (options.html instanceof Element) elt.appendChild(options.html)\r\n          else if (options.html!==undefined) elt.innerHTML = options.html;\r\n          break;\r\n        }\r\n        case 'parent': {\r\n          if (options.parent) options.parent.appendChild(elt);\r\n          break;\r\n        }\r\n        case 'options': {\r\n          if (/select/i.test(tagName)) {\r\n            for (var i in options.options) {\r\n              ol_ext_element.create('OPTION', {\r\n                html: i,\r\n                value: options.options[i],\r\n                parent: elt          \r\n              })\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 'style': {\r\n          ol_ext_element.setStyle(elt, options.style);\r\n          break;\r\n        }\r\n        case 'change':\r\n        case 'click': {\r\n          ol_ext_element.addListener(elt, attr, options[attr]);\r\n          break;\r\n        }\r\n        case 'on': {\r\n          for (var e in options.on) {\r\n            ol_ext_element.addListener(elt, e, options.on[e]);\r\n          }\r\n          break;\r\n        }\r\n        case 'checked': {\r\n          elt.checked = !!options.checked;\r\n          break;\r\n        }\r\n        default: {\r\n          elt.setAttribute(attr, options[attr]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return elt;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {boolean} options.checked\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createSwitch = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    type: 'checkbox',\r\n    on: options.on,\r\n    click: options.click,\r\n    change: options.change,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  new ol_ext_input_Switch(opt);\r\n  return input;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {string} [options.name] input name\r\n *  @param {string} [options.type=checkbox] input type: radio or checkbox\r\n *  @param {string} options.value input value\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createCheck = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    name: options.name,\r\n    type: (options.type==='radio' ? 'radio' : 'checkbox'),\r\n    on: options.on,\r\n    parent: options.parent\r\n  });\r\n  console.log(input)\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  if (options.type === 'radio') {\r\n    new ol_ext_input_Radio(opt);\r\n  } else {\r\n    new ol_ext_input_Checkbox(opt);\r\n  }\r\n  return input;\r\n};\r\n\r\n/** Set inner html or append a child element to an element\r\n * @param {Element} element\r\n * @param {Element|string} html Content of the element\r\n */\r\nol_ext_element.setHTML = function(element, html) {\r\n  if (html instanceof Element) element.appendChild(html)\r\n  else if (html!==undefined) element.innerHTML = html;\r\n};\r\n\r\n/** Append text into an elemnt\r\n * @param {Element} element\r\n * @param {string} text text content\r\n */\r\nol_ext_element.appendText = function(element, text) {\r\n  element.appendChild(document.createTextNode(text||''));\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.addListener = function (element, eventType, fn, useCapture ) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.addEventListener(e, fn, useCapture);\r\n  });\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.removeListener = function (element, eventType, fn) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.removeEventListener(e, fn);\r\n  });\r\n};\r\n\r\n/**\r\n * Show an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.show = function (element) {\r\n  element.style.display = '';\r\n};\r\n\r\n/**\r\n * Hide an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.hide = function (element) {\r\n  element.style.display = 'none';\r\n};\r\n\r\n/**\r\n * Test if an element is hihdden\r\n * @param {Element} element\r\n * @return {boolean}\r\n */\r\nol_ext_element.hidden = function (element) {\r\n  return ol_ext_element.getStyle(element, 'display') === 'none';\r\n};\r\n\r\n/**\r\n * Toggle an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.toggle = function (element) {\r\n  element.style.display = (element.style.display==='none' ? '' : 'none');\r\n};\r\n\r\n/** Set style of an element\r\n * @param {DOMElement} el the element\r\n * @param {*} st list of style\r\n */\r\nol_ext_element.setStyle = function(el, st) {\r\n  for (var s in st) {\r\n    switch (s) {\r\n      case 'top':\r\n      case 'left':\r\n      case 'bottom':\r\n      case 'right':\r\n      case 'minWidth':\r\n      case 'maxWidth':\r\n      case 'width':\r\n      case 'height': {\r\n        if (typeof(st[s]) === 'number') {\r\n          el.style[s] = st[s]+'px';\r\n        } else {\r\n          el.style[s] = st[s];\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        el.style[s] = st[s];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get style propertie of an element\r\n * @param {DOMElement} el the element\r\n * @param {string} styleProp Propertie name\r\n * @return {*} style value\r\n */\r\nol_ext_element.getStyle = function(el, styleProp) {\r\n  var value, defaultView = (el.ownerDocument || document).defaultView;\r\n  // W3C standard way:\r\n  if (defaultView && defaultView.getComputedStyle) {\r\n    // sanitize property name to css notation\r\n    // (hypen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n    value = defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n  } else if (el.currentStyle) { // IE\r\n    // sanitize property name to camelCase\r\n    styleProp = styleProp.replace(/-(\\w)/g, function(str, letter) {\r\n      return letter.toUpperCase();\r\n    });\r\n    value = el.currentStyle[styleProp];\r\n    // convert other units to pixels on IE\r\n    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) { \r\n      return (function(value) {\r\n        var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;\r\n        el.runtimeStyle.left = el.currentStyle.left;\r\n        el.style.left = value || 0;\r\n        value = el.style.pixelLeft + \"px\";\r\n        el.style.left = oldLeft;\r\n        el.runtimeStyle.left = oldRsLeft;\r\n        return value;\r\n      })(value);\r\n    }\r\n  }\r\n  if (/px$/.test(value)) return parseInt(value);\r\n  return value;\r\n};\r\n\r\n/** Get outerHeight of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerHeight = function(elt) {\r\n  return elt.offsetHeight + ol_ext_element.getStyle(elt, 'marginBottom')\r\n};\r\n\r\n/** Get outerWidth of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerWidth = function(elt) {\r\n  return elt.offsetWidth + ol_ext_element.getStyle(elt, 'marginLeft')\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @return {*} \r\n */\r\nol_ext_element.offsetRect = function(elt) {\r\n  var rect = elt.getBoundingClientRect();\r\n  return {\r\n    top: rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0),\r\n    left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0),\r\n    height: rect.height || (rect.bottom - rect.top),\r\n    width: rect.width || (rect.right - rect.left)\r\n  }\r\n};\r\n\r\n/** Get element offset \r\n * @param {ELement} elt\r\n * @returns {Object} top/left offset\r\n */\r\nol_ext_element.getFixedOffset = function(elt) {\r\n  var offset = {\r\n    left:0,\r\n    top:0\r\n  };\r\n  var getOffset = function(parent) {\r\n    if (!parent) return offset;\r\n    // Check position when transform\r\n    if (ol_ext_element.getStyle(parent, 'position') === 'absolute'\r\n      && ol_ext_element.getStyle(parent, 'transform') !== \"none\") {\r\n      var r = parent.getBoundingClientRect();\r\n      offset.left += r.left; \r\n      offset.top += r.top; \r\n      return offset;\r\n    }\r\n    return getOffset(parent.offsetParent)\r\n  }\r\n  return getOffset(elt.offsetParent)\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @param {boolean} fixed get fixed position\r\n * @return {Object} \r\n */\r\nol_ext_element.positionRect = function(elt, fixed) {\r\n  var gleft = 0;\r\n  var gtop = 0;\r\n\r\n  var getRect = function( parent ) {\r\n    if (parent) {\r\n      gleft += parent.offsetLeft;\r\n      gtop += parent.offsetTop;\r\n      return getRect(parent.offsetParent);\r\n    } else {\r\n      var r = {\r\n        top: elt.offsetTop + gtop,\r\n        left: elt.offsetLeft + gleft\r\n      };\r\n      if (fixed) {\r\n        r.top -= (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        r.left -= (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0);\r\n      }\r\n      r.bottom = r.top + elt.offsetHeight;\r\n      r.right = r.top + elt.offsetWidth;\r\n      return r;\r\n    }\r\n  }; \r\n  return getRect(elt.offsetParent);\r\n}\r\n\r\n/** Make a div scrollable without scrollbar.\r\n * On touch devices the default behavior is preserved\r\n * @param {DOMElement} elt\r\n * @param {*} options\r\n *  @param {function} [options.onmove] a function that takes a boolean indicating that the div is scrolling\r\n *  @param {boolean} [options.vertical=false] \r\n *  @param {boolean} [options.animate=true] add kinetic to scroll\r\n *  @param {boolean} [options.mousewheel=false] enable mousewheel to scroll\r\n *  @param {boolean} [options.minibar=false] add a mini scrollbar to the parent element (only vertical scrolling)\r\n * @returns {Object} an object with a refresh function\r\n */\r\nol_ext_element.scrollDiv = function(elt, options) {\r\n  options = options || {};\r\n  var pos = false;\r\n  var speed = 0;\r\n  var d, dt = 0;\r\n\r\n  var onmove = (typeof(options.onmove) === 'function' ? options.onmove : function(){});\r\n  //var page = options.vertical ? 'pageY' : 'pageX';\r\n  var page = options.vertical ? 'screenY' : 'screenX';\r\n  var scroll = options.vertical ? 'scrollTop' : 'scrollLeft';\r\n  var moving = false;\r\n  // Factor scale content / container\r\n  var scale, isbar;\r\n\r\n  // Update the minibar\r\n  var updateCounter = 0;\r\n  var updateMinibar = function() {\r\n    if (scrollbar) {\r\n      updateCounter++;\r\n      setTimeout(updateMinibarDelay);\r\n    }\r\n  }\r\n  var updateMinibarDelay = function() {\r\n    if (scrollbar) {\r\n      updateCounter--;\r\n      // Prevent multi call\r\n      if (updateCounter) return;\r\n      // Container height\r\n      var pheight = elt.clientHeight;\r\n      // Content height\r\n      var height = elt.scrollHeight;\r\n      // Set scrollbar value\r\n      scale = pheight / height;\r\n      scrollbar.style.height = scale * 100 + '%';\r\n      scrollbar.style.top = (elt.scrollTop / height * 100) + '%';\r\n      scrollContainer.style.height = pheight + 'px';\r\n      // No scroll\r\n      if (pheight > height - .5) scrollContainer.classList.add('ol-100pc');\r\n      else scrollContainer.classList.remove('ol-100pc');\r\n    }\r\n  }\r\n  \r\n  // Handle pointer down\r\n  var onPointerDown = function(e) {\r\n    // Prevent scroll\r\n    if (e.target.classList.contains('ol-noscroll')) return;\r\n    // Start scrolling\r\n    moving = false;\r\n    pos = e[page];\r\n    dt = new Date();\r\n    elt.classList.add('ol-move');\r\n    // Prevent elt dragging\r\n    e.preventDefault();\r\n    // Listen scroll\r\n    window.addEventListener('pointermove', onPointerMove);\r\n    ol_ext_element.addListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  }\r\n\r\n  // Register scroll\r\n  var onPointerMove = function(e) {\r\n    moving = true;\r\n    if (pos !== false) {\r\n      var delta = (isbar ? -1/scale : 1) * (pos - e[page]);\r\n      elt[scroll] += delta;\r\n      d = new Date();\r\n      if (d-dt) {\r\n        speed = (speed + delta / (d - dt))/2;\r\n      }\r\n      pos = e[page];\r\n      dt = d;\r\n      // Tell we are moving\r\n      if (delta) onmove(true);\r\n    }\r\n  };\r\n  \r\n  // Animate scroll\r\n  var animate = function(to) {\r\n    var step = (to>0) ? Math.min(100, to/2) : Math.max(-100, to/2);\r\n    to -= step;\r\n    elt[scroll] += step;\r\n    if (-1 < to && to < 1) {\r\n      if (moving) setTimeout(function() { elt.classList.remove('ol-move'); });\r\n      else elt.classList.remove('ol-move');\r\n      moving = false;\r\n      onmove(false);\r\n    } else {\r\n      setTimeout(function() {\r\n        animate(to);\r\n      }, 40);\r\n    }\r\n  }\r\n  \r\n  // Initialize scroll container for minibar\r\n  var scrollContainer, scrollbar;\r\n  if (options.vertical && options.minibar) {\r\n    var init = function(b) {\r\n      // only once\r\n      elt.removeEventListener('pointermove', init);\r\n      elt.parentNode.classList.add('ol-miniscroll');\r\n      scrollbar = ol_ext_element.create('DIV');\r\n      scrollContainer = ol_ext_element.create('DIV', {\r\n        className: 'ol-scroll',\r\n        html: scrollbar\r\n      });\r\n      elt.parentNode.insertBefore(scrollContainer, elt);\r\n      // Move scrollbar\r\n      scrollbar.addEventListener('pointerdown', function(e) {\r\n        isbar = true;\r\n        onPointerDown(e)\r\n      });\r\n      // Handle mousewheel\r\n      if (options.mousewheel) {\r\n        ol_ext_element.addListener(scrollContainer, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n        ol_ext_element.addListener(scrollbar, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n      }\r\n      // Update on enter\r\n      elt.parentNode.addEventListener('pointerenter', updateMinibar);\r\n      // Update on resize\r\n      window.addEventListener('resize', updateMinibar);\r\n      // Update\r\n      if (b!==false) updateMinibar();\r\n    };\r\n    // Allready inserted in the DOM\r\n    if (elt.parentNode) init(false);\r\n    // or wait when ready\r\n    else elt.addEventListener('pointermove', init);\r\n    // Update on scroll\r\n    elt.addEventListener('scroll', function() {\r\n      updateMinibar();\r\n    });\r\n  }\r\n\r\n  // Enable scroll\r\n  elt.style['touch-action'] = 'none';\r\n  elt.style['overflow'] = 'hidden';\r\n  elt.classList.add('ol-scrolldiv');\r\n  \r\n  // Start scrolling\r\n  ol_ext_element.addListener(elt, ['pointerdown'], function(e) {\r\n    isbar = false;\r\n    onPointerDown(e)\r\n  });\r\n\r\n  // Prevet click when moving...\r\n  elt.addEventListener('click', function(e) {\r\n    if (elt.classList.contains('ol-move')) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  }, true);\r\n\r\n  // Stop scrolling\r\n  var onPointerUp = function(e) {\r\n    dt = new Date() - dt;\r\n    if (dt>100 || isbar) {\r\n      // User stop: no speed\r\n      speed = 0;\r\n    } else if (dt>0) {\r\n      // Calculate new speed\r\n      speed = ((speed||0) + (pos - e[page]) / dt) / 2;\r\n    }\r\n    animate(options.animate===false ? 0 : speed*200);\r\n    pos = false;\r\n    speed = 0;\r\n    dt = 0;\r\n    // Add class to handle click (on iframe / double-click)\r\n    if (!elt.classList.contains('ol-move')) {\r\n      elt.classList.add('ol-hasClick')\r\n      setTimeout(function() { elt.classList.remove('ol-hasClick'); }, 500);\r\n    } else {\r\n      elt.classList.remove('ol-hasClick');\r\n    }\r\n    isbar = false;\r\n    window.removeEventListener('pointermove', onPointerMove)\r\n    ol_ext_element.removeListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  };\r\n\r\n  // Handle mousewheel\r\n  var onMouseWheel = function(e) {\r\n    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\r\n    elt.classList.add('ol-move');\r\n    elt[scroll] -= delta*30;\r\n    elt.classList.remove('ol-move');\r\n    return false;\r\n  }\r\n  if (options.mousewheel) { // && !elt.classList.contains('ol-touch')) {\r\n    ol_ext_element.addListener(elt, \r\n      ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n      onMouseWheel\r\n    );\r\n  }\r\n\r\n  return { \r\n    refresh: updateMinibar\r\n  }\r\n};\r\n\r\n/** Dispatch an event to an Element \r\n * @param {string} eventName\r\n * @param {Element} element\r\n */\r\nol_ext_element.dispatchEvent = function (eventName, element) {\r\n  var event;\r\n  try {\r\n    event = new CustomEvent(eventName);\r\n  } catch(e) {\r\n    // Try customevent on IE\r\n    event = document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, {});\r\n  }\r\n  element.dispatchEvent(event);\r\n};\r\n\r\nexport default ol_ext_element\r\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nvar MapEvent = /** @class */ (function (_super) {\n    __extends(MapEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapEvent(type, map, opt_frameState) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The map where the event occurred.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @api\n         */\n        _this.map = map;\n        /**\n         * The frame state at the time of the event.\n         * @type {?import(\"./PluggableMap.js\").FrameState}\n         * @api\n         */\n        _this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n        return _this;\n    }\n    return MapEvent;\n}(Event));\nexport default MapEvent;\n//# sourceMappingURL=MapEvent.js.map","/**\n * @module ol/ObjectEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a property is changed.\n     * @event module:ol/Object.ObjectEvent#propertychange\n     * @api\n     */\n    PROPERTYCHANGE: 'propertychange',\n};\n/**\n * @typedef {'propertychange'} Types\n */\n//# sourceMappingURL=ObjectEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport { createCanvasContext2D } from './dom.js';\nimport { listenImage } from './Image.js';\nvar ImageTile = /** @class */ (function (_super) {\n    __extends(ImageTile, _super);\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"./TileState.js\").default} state State.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n     * @param {import(\"./Tile.js\").Options} [opt_options] Tile options.\n     */\n    function ImageTile(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n        var _this = _super.call(this, tileCoord, state, opt_options) || this;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ = crossOrigin;\n        /**\n         * Image URI\n         *\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        _this.key = src;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"./Tile.js\").LoadFunction}\n         */\n        _this.tileLoadFunction_ = tileLoadFunction;\n        return _this;\n    }\n    /**\n     * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageTile.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Sets an HTML image element for this tile (may be a Canvas or preloaded Image).\n     * @param {HTMLCanvasElement|HTMLImageElement} element Element.\n     */\n    ImageTile.prototype.setImage = function (element) {\n        this.image_ = element;\n        this.state = TileState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageError_ = function () {\n        this.state = TileState.ERROR;\n        this.unlistenImage_();\n        this.image_ = getBlankImage();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageLoad_ = function () {\n        var image = /** @type {HTMLImageElement} */ (this.image_);\n        if (image.naturalWidth && image.naturalHeight) {\n            this.state = TileState.LOADED;\n        }\n        else {\n            this.state = TileState.EMPTY;\n        }\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @api\n     */\n    ImageTile.prototype.load = function () {\n        if (this.state == TileState.ERROR) {\n            this.state = TileState.IDLE;\n            this.image_ = new Image();\n            if (this.crossOrigin_ !== null) {\n                this.image_.crossOrigin = this.crossOrigin_;\n            }\n        }\n        if (this.state == TileState.IDLE) {\n            this.state = TileState.LOADING;\n            this.changed();\n            this.tileLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageTile;\n}(Tile));\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n    var ctx = createCanvasContext2D(1, 1);\n    ctx.fillStyle = 'rgba(0,0,0,0)';\n    ctx.fillRect(0, 0, 1, 1);\n    return ctx.canvas;\n}\nexport default ImageTile;\n//# sourceMappingURL=ImageTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/AssertionError\n */\nimport { VERSION } from './util.js';\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nvar AssertionError = /** @class */ (function (_super) {\n    __extends(AssertionError, _super);\n    /**\n     * @param {number} code Error code.\n     */\n    function AssertionError(code) {\n        var _this = this;\n        var path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n        var message = 'Assertion failed. See https://openlayers.org/en/' +\n            path +\n            '/doc/errors/#' +\n            code +\n            ' for details.';\n        _this = _super.call(this, message) || this;\n        /**\n         * Error code. The meaning of the code can be found on\n         * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n         * the version found in the OpenLayers script's header comment if a version\n         * other than the latest is used).\n         * @type {number}\n         * @api\n         */\n        _this.code = code;\n        /**\n         * @type {string}\n         */\n        _this.name = 'AssertionError';\n        // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n        _this.message = message;\n        return _this;\n    }\n    return AssertionError;\n}(Error));\nexport default AssertionError;\n//# sourceMappingURL=AssertionError.js.map","/**\n * @module ol/ImageState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    ERROR: 3,\n    EMPTY: 4,\n};\n//# sourceMappingURL=ImageState.js.map","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100´k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n","/** @namespace  ol.ext\r\n */\r\n/*global ol*/\r\nif (window.ol && !ol.ext) {\r\n  ol.ext = {};\r\n}\r\n\r\n/** Inherit the prototype methods from one constructor into another.\r\n * replace deprecated ol method\r\n *\r\n * @param {!Function} childCtor Child constructor.\r\n * @param {!Function} parentCtor Parent constructor.\r\n * @function module:ol.inherits\r\n * @api\r\n */\r\nvar ol_ext_inherits = function(child,parent) {\r\n  child.prototype = Object.create(parent.prototype);\r\n  child.prototype.constructor = child;\r\n};\r\n\r\n// Compatibilty with ol > 5 to be removed when v6 is out\r\nif (window.ol) {\r\n  if (!ol.inherits) ol.inherits = ol_ext_inherits;\r\n}\r\n\r\n/* IE Polyfill */\r\n// NodeList.forEach\r\nif (window.NodeList && !NodeList.prototype.forEach) {\r\n  NodeList.prototype.forEach = Array.prototype.forEach;\r\n}\r\n// Element.remove\r\nif (window.Element && !Element.prototype.remove) {\r\n  Element.prototype.remove = function() {\r\n    if (this.parentNode) this.parentNode.removeChild(this);\r\n  }\r\n}\r\n/* End Polyfill */\r\n\r\nexport { ol_ext_inherits }\r\nexport default ol_ext_inherits\r\n","/**\n * @module ol/Disposable\n */\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = /** @class */ (function () {\n    function Disposable() {\n        /**\n         * The object has already been disposed.\n         * @type {boolean}\n         * @protected\n         */\n        this.disposed = false;\n    }\n    /**\n     * Clean up.\n     */\n    Disposable.prototype.dispose = function () {\n        if (!this.disposed) {\n            this.disposed = true;\n            this.disposeInternal();\n        }\n    };\n    /**\n     * Extension point for disposable objects.\n     * @protected\n     */\n    Disposable.prototype.disposeInternal = function () { };\n    return Disposable;\n}());\nexport default Disposable;\n//# sourceMappingURL=Disposable.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport { assign, isEmpty } from './obj.js';\nimport { getUid } from './util.js';\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nvar ObjectEvent = /** @class */ (function (_super) {\n    __extends(ObjectEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {string} key The property name.\n     * @param {*} oldValue The old value for `key`.\n     */\n    function ObjectEvent(type, key, oldValue) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The name of the property whose value is changing.\n         * @type {string}\n         * @api\n         */\n        _this.key = key;\n        /**\n         * The old value. To get the new value use `e.target.get(e.key)` where\n         * `e` is the event object.\n         * @type {*}\n         * @api\n         */\n        _this.oldValue = oldValue;\n        return _this;\n    }\n    return ObjectEvent;\n}(Event));\nexport { ObjectEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable~Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nvar BaseObject = /** @class */ (function (_super) {\n    __extends(BaseObject, _super);\n    /**\n     * @param {Object<string, *>} [opt_values] An object with key-value pairs.\n     */\n    function BaseObject(opt_values) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {ObjectOnSignature<void>}\n         */\n        _this.un;\n        // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n        // the same as the order in which they were created.  This also helps to\n        // ensure that object properties are always added in the same order, which\n        // helps many JavaScript engines generate faster code.\n        getUid(_this);\n        /**\n         * @private\n         * @type {Object<string, *>}\n         */\n        _this.values_ = null;\n        if (opt_values !== undefined) {\n            _this.setProperties(opt_values);\n        }\n        return _this;\n    }\n    /**\n     * Gets a value.\n     * @param {string} key Key name.\n     * @return {*} Value.\n     * @api\n     */\n    BaseObject.prototype.get = function (key) {\n        var value;\n        if (this.values_ && this.values_.hasOwnProperty(key)) {\n            value = this.values_[key];\n        }\n        return value;\n    };\n    /**\n     * Get a list of object property names.\n     * @return {Array<string>} List of property names.\n     * @api\n     */\n    BaseObject.prototype.getKeys = function () {\n        return (this.values_ && Object.keys(this.values_)) || [];\n    };\n    /**\n     * Get an object of all property names and values.\n     * @return {Object<string, *>} Object.\n     * @api\n     */\n    BaseObject.prototype.getProperties = function () {\n        return (this.values_ && assign({}, this.values_)) || {};\n    };\n    /**\n     * @return {boolean} The object has properties.\n     */\n    BaseObject.prototype.hasProperties = function () {\n        return !!this.values_;\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {*} oldValue Old value.\n     */\n    BaseObject.prototype.notify = function (key, oldValue) {\n        var eventType;\n        eventType = \"change:\".concat(key);\n        if (this.hasListener(eventType)) {\n            this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        }\n        eventType = ObjectEventType.PROPERTYCHANGE;\n        if (this.hasListener(eventType)) {\n            this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        }\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.addChangeListener = function (key, listener) {\n        this.addEventListener(\"change:\".concat(key), listener);\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.removeChangeListener = function (key, listener) {\n        this.removeEventListener(\"change:\".concat(key), listener);\n    };\n    /**\n     * Sets a value.\n     * @param {string} key Key name.\n     * @param {*} value Value.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.set = function (key, value, opt_silent) {\n        var values = this.values_ || (this.values_ = {});\n        if (opt_silent) {\n            values[key] = value;\n        }\n        else {\n            var oldValue = values[key];\n            values[key] = value;\n            if (oldValue !== value) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    /**\n     * Sets a collection of key-value pairs.  Note that this changes any existing\n     * properties and adds new ones (it does not remove any existing properties).\n     * @param {Object<string, *>} values Values.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.setProperties = function (values, opt_silent) {\n        for (var key in values) {\n            this.set(key, values[key], opt_silent);\n        }\n    };\n    /**\n     * Apply any properties from another object without triggering events.\n     * @param {BaseObject} source The source object.\n     * @protected\n     */\n    BaseObject.prototype.applyProperties = function (source) {\n        if (!source.values_) {\n            return;\n        }\n        assign(this.values_ || (this.values_ = {}), source.values_);\n    };\n    /**\n     * Unsets a property.\n     * @param {string} key Key name.\n     * @param {boolean} [opt_silent] Unset without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.unset = function (key, opt_silent) {\n        if (this.values_ && key in this.values_) {\n            var oldValue = this.values_[key];\n            delete this.values_[key];\n            if (isEmpty(this.values_)) {\n                this.values_ = null;\n            }\n            if (!opt_silent) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    return BaseObject;\n}(Observable));\nexport default BaseObject;\n//# sourceMappingURL=Object.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LENGTH: 'length',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nvar CollectionEvent = /** @class */ (function (_super) {\n    __extends(CollectionEvent, _super);\n    /**\n     * @param {import(\"./CollectionEventType.js\").default} type Type.\n     * @param {*} [opt_element] Element.\n     * @param {number} [opt_index] The index of the added or removed element.\n     */\n    function CollectionEvent(type, opt_element, opt_index) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The element that is added to or removed from the collection.\n         * @type {*}\n         * @api\n         */\n        _this.element = opt_element;\n        /**\n         * The index of the added or removed element.\n         * @type {number}\n         * @api\n         */\n        _this.index = opt_index;\n        return _this;\n    }\n    return CollectionEvent;\n}(Event));\nexport { CollectionEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nvar Collection = /** @class */ (function (_super) {\n    __extends(Collection, _super);\n    /**\n     * @param {Array<T>} [opt_array] Array.\n     * @param {Options} [opt_options] Collection options.\n     */\n    function Collection(opt_array, opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {CollectionOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.unique_ = !!options.unique;\n        /**\n         * @private\n         * @type {!Array<T>}\n         */\n        _this.array_ = opt_array ? opt_array : [];\n        if (_this.unique_) {\n            for (var i = 0, ii = _this.array_.length; i < ii; ++i) {\n                _this.assertUnique_(_this.array_[i], i);\n            }\n        }\n        _this.updateLength_();\n        return _this;\n    }\n    /**\n     * Remove all elements from the collection.\n     * @api\n     */\n    Collection.prototype.clear = function () {\n        while (this.getLength() > 0) {\n            this.pop();\n        }\n    };\n    /**\n     * Add elements to the collection.  This pushes each item in the provided array\n     * to the end of the collection.\n     * @param {!Array<T>} arr Array.\n     * @return {Collection<T>} This collection.\n     * @api\n     */\n    Collection.prototype.extend = function (arr) {\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            this.push(arr[i]);\n        }\n        return this;\n    };\n    /**\n     * Iterate over each element, calling the provided callback.\n     * @param {function(T, number, Array<T>): *} f The function to call\n     *     for every element. This function takes 3 arguments (the element, the\n     *     index and the array). The return value is ignored.\n     * @api\n     */\n    Collection.prototype.forEach = function (f) {\n        var array = this.array_;\n        for (var i = 0, ii = array.length; i < ii; ++i) {\n            f(array[i], i, array);\n        }\n    };\n    /**\n     * Get a reference to the underlying Array object. Warning: if the array\n     * is mutated, no events will be dispatched by the collection, and the\n     * collection's \"length\" property won't be in sync with the actual length\n     * of the array.\n     * @return {!Array<T>} Array.\n     * @api\n     */\n    Collection.prototype.getArray = function () {\n        return this.array_;\n    };\n    /**\n     * Get the element at the provided index.\n     * @param {number} index Index.\n     * @return {T} Element.\n     * @api\n     */\n    Collection.prototype.item = function (index) {\n        return this.array_[index];\n    };\n    /**\n     * Get the length of this collection.\n     * @return {number} The length of the array.\n     * @observable\n     * @api\n     */\n    Collection.prototype.getLength = function () {\n        return this.get(Property.LENGTH);\n    };\n    /**\n     * Insert an element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.insertAt = function (index, elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        this.array_.splice(index, 0, elem);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n    };\n    /**\n     * Remove the last element of the collection and return it.\n     * Return `undefined` if the collection is empty.\n     * @return {T|undefined} Element.\n     * @api\n     */\n    Collection.prototype.pop = function () {\n        return this.removeAt(this.getLength() - 1);\n    };\n    /**\n     * Insert the provided element at the end of the collection.\n     * @param {T} elem Element.\n     * @return {number} New length of the collection.\n     * @api\n     */\n    Collection.prototype.push = function (elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        var n = this.getLength();\n        this.insertAt(n, elem);\n        return this.getLength();\n    };\n    /**\n     * Remove the first occurrence of an element from the collection.\n     * @param {T} elem Element.\n     * @return {T|undefined} The removed element or undefined if none found.\n     * @api\n     */\n    Collection.prototype.remove = function (elem) {\n        var arr = this.array_;\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            if (arr[i] === elem) {\n                return this.removeAt(i);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Remove the element at the provided index and return it.\n     * Return `undefined` if the collection does not contain this index.\n     * @param {number} index Index.\n     * @return {T|undefined} Value.\n     * @api\n     */\n    Collection.prototype.removeAt = function (index) {\n        var prev = this.array_[index];\n        this.array_.splice(index, 1);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n        return prev;\n    };\n    /**\n     * Set the element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.setAt = function (index, elem) {\n        var n = this.getLength();\n        if (index < n) {\n            if (this.unique_) {\n                this.assertUnique_(elem, index);\n            }\n            var prev = this.array_[index];\n            this.array_[index] = elem;\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n        }\n        else {\n            for (var j = n; j < index; ++j) {\n                this.insertAt(j, undefined);\n            }\n            this.insertAt(index, elem);\n        }\n    };\n    /**\n     * @private\n     */\n    Collection.prototype.updateLength_ = function () {\n        this.set(Property.LENGTH, this.array_.length);\n    };\n    /**\n     * @private\n     * @param {T} elem Element.\n     * @param {number} [opt_except] Optional index to ignore.\n     */\n    Collection.prototype.assertUnique_ = function (elem, opt_except) {\n        for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n            if (this.array_[i] === elem && i !== opt_except) {\n                throw new AssertionError(58);\n            }\n        }\n    };\n    return Collection;\n}(BaseObject));\nexport default Collection;\n//# sourceMappingURL=Collection.js.map","/**\n * @module ol/MapProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    LAYERGROUP: 'layergroup',\n    SIZE: 'size',\n    TARGET: 'target',\n    VIEW: 'view',\n};\n//# sourceMappingURL=MapProperty.js.map"],"sourceRoot":""}
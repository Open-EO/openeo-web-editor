"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[3291],{953:(t,e,i)=>{i.d(e,{A:()=>r});class s{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new s({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const r=s},4087:(t,e,i)=>{function s(){throw new Error("Unimplemented abstract method.")}i.d(e,{b0:()=>s,v6:()=>n});let r=0;function n(t){return t.ol_uid||(t.ol_uid=String(++r))}},4863:(t,e,i)=>{i.d(e,{EN:()=>u,Li:()=>l,kZ:()=>_,pr:()=>a});var s=i(56758),r=i(57115),n=i(89718),o=i(70915),h=i(6782);function a(t){let e=t.getDefaultTileGrid();return e||(e=g(t),t.setDefaultTileGrid(e)),e}function l(t,e,i){const s=e[0],r=t.getTileCoordCenter(e),n=_(i);if(!(0,o.Ym)(n,r)){const e=(0,o.RG)(n),i=Math.ceil((n[0]-r[0])/e);return r[0]+=e*i,t.getTileCoordForCoordAndZ(r,s)}return e}function c(t,e,i,r){r=void 0!==r?r:"top-left";const n=d(t,e,i);return new s.A({extent:t,origin:(0,o.qF)(t,r),resolutions:n,tileSize:i})}function u(t){const e=t||{},i=e.extent||(0,n.get)("EPSG:3857").getExtent(),r={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:d(i,e.maxZoom,e.tileSize,e.maxResolution)};return new s.A(r)}function d(t,e,i,s){e=void 0!==e?e:r.L,i=(0,h.xq)(void 0!==i?i:r.R);const n=(0,o.Oq)(t),a=(0,o.RG)(t);s=s>0?s:Math.max(a/i[0],n/i[1]);const l=e+1,c=new Array(l);for(let r=0;r<l;++r)c[r]=s/Math.pow(2,r);return c}function g(t,e,i,s){const r=_(t);return c(r,e,i,s)}function _(t){t=(0,n.get)(t);let e=t.getExtent();if(!e){const i=180*n.METERS_PER_UNIT.degrees/t.getMetersPerUnit();e=(0,o.N)(-i,-i,i,i)}return e}},9703:(t,e,i)=>{i.d(e,{Bb:()=>c,T9:()=>f,Tl:()=>g,Zz:()=>_,cL:()=>o,dI:()=>v,e$:()=>u,hs:()=>d,k3:()=>l,lw:()=>h,vt:()=>n});var s=i(90588);const r=new Array(6);function n(){return[1,0,0,1,0,0]}function o(t){return a(t,1,0,0,1,0,0)}function h(t,e){const i=t[0],s=t[1],r=t[2],n=t[3],o=t[4],h=t[5],a=e[0],l=e[1],c=e[2],u=e[3],d=e[4],g=e[5];return t[0]=i*a+r*l,t[1]=s*a+n*l,t[2]=i*c+r*u,t[3]=s*c+n*u,t[4]=i*d+r*g+o,t[5]=s*d+n*g+h,t}function a(t,e,i,s,r,n,o){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t[4]=n,t[5]=o,t}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function c(t,e){const i=e[0],s=e[1];return e[0]=t[0]*i+t[2]*s+t[4],e[1]=t[1]*i+t[3]*s+t[5],e}function u(t,e){const i=Math.cos(e),s=Math.sin(e);return h(t,a(r,i,s,-s,i,0,0))}function d(t,e,i){return h(t,a(r,e,0,0,i,0,0))}function g(t,e,i){return h(t,a(r,1,0,0,1,e,i))}function _(t,e,i,s,r,n,o,h){const a=Math.sin(n),l=Math.cos(n);return t[0]=s*l,t[1]=r*a,t[2]=-s*a,t[3]=r*l,t[4]=o*s*l-h*s*a+e,t[5]=o*r*a+h*r*l+i,t}function f(t,e){const i=m(e);(0,s.v)(0!==i,"Transformation matrix cannot be inverted");const r=e[0],n=e[1],o=e[2],h=e[3],a=e[4],l=e[5];return t[0]=h/i,t[1]=-n/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*l-h*a)/i,t[5]=-(r*l-n*a)/i,t}function m(t){return t[0]*t[3]-t[1]*t[2]}const p=[1e6,1e6,1e6,1e6,2,2];function v(t){const e="matrix("+t.map((t,e)=>Math.round(t*p[e])/p[e]).join(", ")+")";return e}},10702:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(21483),r=i(4863);class n extends s.A{constructor(t){t=t||{};const e=void 0!==t.projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:(0,r.EN)({extent:(0,r.kZ)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}const o=n},10940:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(4087),r=i(6782);class n{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,r.xq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,s.b0)()}getImage(t){return(0,s.b0)()}getHitDetectionImage(){return(0,s.b0)()}getPixelRatio(t){return 1}getImageState(){return(0,s.b0)()}getImageSize(){return(0,s.b0)()}getOrigin(){return(0,s.b0)()}getSize(){return(0,s.b0)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.xq)(t)}listenImageChange(t){(0,s.b0)()}load(){(0,s.b0)()}unlistenImageChange(t){(0,s.b0)()}ready(){return Promise.resolve()}}const o=n},13628:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(6141),r=i(97907);class n{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,void 0!==t.color&&this.setColor(t.color)}clone(){const t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(null!==t&&"object"===typeof t&&"src"in t){const e=(0,r.J)(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===s.A.IDLE&&e.load(),e.getImageState()===s.A.LOADING&&(this.patternImage_=e)}this.color_=t}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const o=n},14969:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(90588);class r{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){while(this.canExpireCache())this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;while(e)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return(0,s.v)(void 0!==i,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return(0,s.v)(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,s.v)(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const n=r},16444:(t,e,i)=>{i.d(e,{A:()=>h});var s=i(34120),r=i(89718);class n extends s.A{constructor(t){super(),this.projection=(0,r.get)(t.projection),this.attributions_=o(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(t,i){e.viewResolver=t,e.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=o(t),this.changed()}setState(t){this.state_=t,this.changed()}}function o(t){return t?Array.isArray(t)?function(e){return t}:"function"===typeof t?t:function(e){return[t]}:null}const h=n},18469:(t,e,i)=>{i.d(e,{A:()=>s});const s={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},21483:(t,e,i)=>{i.d(e,{A:()=>A});var s=i(6837),r=i(40190),n=i(97404),o=i(70061),h=i(11078),a=i(18469),l=i(66017),c=i(42654),u=i(40186),d=i(4087);class g extends l.A{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===g.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=(0,d.v6)(e),s=e.getState();let r;s==h.A.LOADING?(this.tileLoadingKeys_[i]=!0,r=a.A.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=s==h.A.ERROR?a.A.TILELOADERROR:s==h.A.LOADED?a.A.TILELOADEND:void 0),void 0!=r&&this.dispatchEvent(new l.c(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),"undefined"!==typeof e?this.setKey(e):this.changed()}setUrl(t){const e=(0,c.Uu)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,c.Qz)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const s=(0,u.dp)(t,e,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const _=g;var f=i(89718),m=i(4863);class p extends _{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:v,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:r.A,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const s in this.tileCacheForProjection){const t=this.tileCacheForProjection[s];t.expireCache(t==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,f.equivalent)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!(0,f.equivalent)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,f.equivalent)(e,t)))return this.tileGrid;const i=(0,d.v6)(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=(0,m.pr)(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||(0,f.equivalent)(e,t))return this.tileCache;const i=(0,d.v6)(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new o.A(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,r,n,o){const a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,n),c=l?this.tileUrlFunction(l,r,n):void 0,u=new this.tileClass(a,void 0!==c?h.A.IDLE:h.A.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(s.A.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,e,i,s,r){const o=this.getProjection();if(!o||!r||(0,f.equivalent)(o,r))return this.getTileInternal(t,e,i,s,o||r);const h=this.getTileCacheForProjection(r),a=[t,e,i];let l;const c=(0,u.i7)(a);h.containsKey(c)&&(l=h.get(c));const d=this.getKey();if(l&&l.key==d)return l;const g=this.getTileGridForProjection(o),_=this.getTileGridForProjection(r),m=this.getTileCoordForTileUrlFunction(a,r),p=new n.A(o,g,r,_,a,m,this.getTilePixelRatio(s),this.getGutter(),(t,e,i,s)=>this.getTileInternal(t,e,i,s,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=d,l?(p.interimTile=l,p.refreshInterimChain(),h.replace(c,p)):h.set(c,p),p}getTileInternal(t,e,i,s,r){let n=null;const o=(0,u.dp)(t,e,i),a=this.getKey();if(this.tileCache.containsKey(o)){if(n=this.tileCache.get(o),n.key!=a){const l=n;n=this.createTile_(t,e,i,s,r,a),l.getState()==h.A.IDLE?n.interimTile=l.interimTile:n.interimTile=l,n.refreshInterimChain(),this.tileCache.replace(o,n)}}else n=this.createTile_(t,e,i,s,r,a),this.tileCache.set(o,n);return n}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const i=(0,f.get)(t);if(i){const t=(0,d.v6)(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function v(t,e){t.getImage().src=e}const A=p},27733:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(86936);class r extends s.A{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const n=r},29276:(t,e,i)=>{i.r(e),i.d(e,{createDefaultStyle:()=>c,createEditingStyle:()=>u,default:()=>g,toFunction:()=>a});var s=i(27733),r=i(13628),n=i(953),o=i(90588);class h{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=d,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"===typeof t&&(t=t.clone()),new h({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=d,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function a(t){let e;if("function"===typeof t)e=t;else{let i;if(Array.isArray(t))i=t;else{(0,o.v)("function"===typeof t.getZIndex,"Expected an `Style` or an array of `Style`");const e=t;i=[e]}e=function(){return i}}return e}let l=null;function c(t,e){if(!l){const t=new r.A({color:"rgba(255,255,255,0.4)"}),e=new n.A({color:"#3399CC",width:1.25});l=[new h({image:new s.A({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return l}function u(){const t={},e=[255,255,255,1],i=[0,153,255,1],o=3;return t["Polygon"]=[new h({fill:new r.A({color:[255,255,255,.5]})})],t["MultiPolygon"]=t["Polygon"],t["LineString"]=[new h({stroke:new n.A({color:e,width:o+2})}),new h({stroke:new n.A({color:i,width:o})})],t["MultiLineString"]=t["LineString"],t["Circle"]=t["Polygon"].concat(t["LineString"]),t["Point"]=[new h({image:new s.A({radius:2*o,fill:new r.A({color:i}),stroke:new n.A({color:e,width:o/2})}),zIndex:1/0})],t["MultiPoint"]=t["Point"],t["GeometryCollection"]=t["Polygon"].concat(t["LineString"],t["Point"]),t}function d(t){return t.getGeometry()}const g=h},40186:(t,e,i)=>{function s(t,e,i,s){return void 0!==s?(s[0]=t,s[1]=e,s[2]=i,s):[t,e,i]}function r(t,e,i){return t+"/"+e+"/"+i}function n(t){return r(t[0],t[1],t[2])}function o(t){return t.split("/").map(Number)}function h(t){return(t[1]<<t[0])+t[2]}function a(t,e){const i=t[0],s=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const n=e.getFullTileRange(i);return!n||n.containsXY(s,r)}i.d(e,{K:()=>o,N:()=>s,N5:()=>a,dp:()=>r,i7:()=>n,tW:()=>h})},42654:(t,e,i)=>{i.d(e,{FD:()=>h,Qz:()=>o,Uu:()=>a});var s=i(61597),r=i(40186);function n(t,e){const i=/\{z\}/g,s=/\{x\}/g,r=/\{y\}/g,n=/\{-y\}/g;return function(o,h,a){if(o)return t.replace(i,o[0].toString()).replace(s,o[1].toString()).replace(r,o[2].toString()).replace(n,function(){const t=o[0],i=e.getFullTileRange(t);if(!i)throw new Error("The {-y} placeholder requires a tile grid with extent");const s=i.getHeight()-o[2]-1;return s.toString()})}}function o(t,e){const i=t.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=n(t[r],e);return h(s)}function h(t){return 1===t.length?t[0]:function(e,i,n){if(!e)return;const o=(0,r.tW)(e),h=(0,s.xP)(o,t.length);return t[h](e,i,n)}}function a(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const s=i[1].charCodeAt(0),r=i[2].charCodeAt(0);let n;for(n=s;n<=r;++n)e.push(t.replace(i[0],String.fromCharCode(n)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const s=parseInt(i[2],10);for(let r=parseInt(i[1],10);r<=s;r++)e.push(t.replace(i[0],r.toString()));return e}return e.push(t),e}},49700:(t,e,i)=>{i.r(e),i.d(e,{default:()=>d});var s=i(6837),r=i(6141),n=i(10940),o=i(89352),h=i(90588),a=i(97907),l=i(4087);function c(t,e,i,s){return void 0!==i&&void 0!==s?[i/t,s/e]:void 0!==i?i/t:void 0!==s?s/e:1}class u extends n.A{constructor(t){t=t||{};const e=void 0!==t.opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,s=void 0!==t.scale?t.scale:1,n=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:i,scale:s,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:n,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const u=void 0!==t.img?t.img:null;let d,g=t.src;if((0,h.v)(!(void 0!==g&&u),"`image` and `src` cannot be provided at the same time"),void 0!==g&&0!==g.length||!u||(g=u.src||(0,l.v6)(u)),(0,h.v)(void 0!==g&&g.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,h.v)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?d=r.A.IDLE:void 0!==u&&(d="complete"in u?u.complete?u.src?r.A.LOADED:r.A.IDLE:r.A.LOADING:r.A.LOADED),this.color_=void 0!==t.color?(0,o._j)(t.color):null,this.iconImage_=(0,a.J)(u,g,this.crossOrigin_,d,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,i;if(t.size)[e,i]=t.size;else{const s=this.getImage(1);if(s.width&&s.height)e=s.width,i=s.height;else if(s instanceof HTMLImageElement){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const i=this.iconImage_.getSize();this.setScale(c(i[0],i[1],t.width,t.height))};return void this.listenImageChange(e)}}void 0!==e&&this.setScale(c(e,i,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new u({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==r.A.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==r.A.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(s.A.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(s.A.CHANGE,t)}ready(){return this.iconImage_.ready()}}const d=u},51462:(t,e,i)=>{function s(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}i.d(e,{d:()=>s})},54602:(t,e,i)=>{i.r(e),i.d(e,{VectorSourceEvent:()=>y,default:()=>C});var s=i(50071),r=i(32135),n=i(1685),o=i(6837),h=i(28450),a=i(95902),l=i(24778),c=i(16444),u=i(88280),d=i(74238),g=i(60942),_=i(90588),f=i(70915),m=i(66514),p=i(4087),v=i(43530),A=i(9438),x=i(21142);class y extends n.Ay{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class E extends c.A{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=d.tV,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,_.v)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,x.nF)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:g.Q7;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,r;this.featuresRtree_=e?new a.A:null,this.loadedExtentsRtree_=new a.A,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),e||void 0!==i||(i=new s.A(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,p.v6)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new y(u.A.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof l.Ay||(this.featureChangeKeys_[t]=[(0,A.KT)(e,o.A.CHANGE,this.handleFeatureChange_,this),(0,A.KT)(e,h.A.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(void 0!==e.getId()){const t=String(e.getId());if(t in this.idIndex_)if(e instanceof l.Ay){const s=this.idIndex_[t];s instanceof l.Ay?Array.isArray(s)?s.push(e):this.idIndex_[t]=[s,e]:i=!1}else i=!1;else this.idIndex_[t]=e}return i&&((0,_.v)(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],s=[];for(let r=0,n=t.length;r<n;r++){const e=t[r],s=(0,p.v6)(e);this.addToIndex_(s,e)&&i.push(e)}for(let r=0,n=i.length;r<n;r++){const t=i[r],n=(0,p.v6)(t);this.setupChangeEvents_(n,t);const o=t.getGeometry();if(o){const i=o.getExtent();e.push(i),s.push(t)}else this.nullGeometryFeatures_[n]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(u.A.ADDFEATURE))for(let r=0,n=i.length;r<n;r++)this.dispatchEvent(new y(u.A.ADDFEATURE,i[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(u.A.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(u.A.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(r.A.ADD,t=>{e||(e=!0,this.addFeature(t.element),e=!1)}),t.addEventListener(r.A.REMOVE,t=>{e||(e=!0,this.removeFeature(t.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){const e=this.featureChangeKeys_[t];e.forEach(A.JH)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new y(u.A.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){const s=i.getGeometry();if(s instanceof l.Ay||s.intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){const s=i.getGeometry();if(s instanceof l.Ay||s.intersectsExtent(t)){const t=e(i);if(t)return t}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,v.p)(this.nullGeometryFeatures_)||(0,m.X$)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){const i=e&&e.canWrapX()&&this.getWrapX();if(!i)return this.featuresRtree_.getInExtent(t);const s=(0,f.QJ)(t,e);return[].concat(...s.map(t=>this.featuresRtree_.getInExtent(t)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],s=t[1];let r=null;const n=[NaN,NaN];let o=1/0;const h=[-1/0,-1/0,1/0,1/0];return e=e||d.rT,this.featuresRtree_.forEachInExtent(h,function(t){if(e(t)){const e=t.getGeometry(),a=o;if(o=e instanceof l.Ay?0:e.closestPointXY(i,s,n,o),o<a){r=t;const e=Math.sqrt(o);h[0]=i-e,h[1]=s-e,h[2]=i+e,h[3]=s+e}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=(0,p.v6)(e),s=e.getGeometry();if(s){const t=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new y(u.A.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:(0,p.v6)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,v.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const s=this.loadedExtentsRtree_,r=this.strategy_(t,e,i);for(let n=0,o=r.length;n<o;++n){const t=r[n],o=s.forEachInExtent(t,function(e){return(0,f.ms)(e.extent,t)});o||(++this.loadingExtentsCount_,this.dispatchEvent(new y(u.A.FEATURESLOADSTART)),this.loader_.call(this,t,e,i,t=>{--this.loadingExtentsCount_,this.dispatchEvent(new y(u.A.FEATURESLOADEND,void 0,t))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new y(u.A.FEATURESLOADERROR))}),s.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(e){if((0,f.aI)(e.extent,t))return i=e,!0}),i&&e.remove(i)}removeFeatures(t){const e=[];for(let i=0,s=t.length;i<s;++i){const s=t[i],r=this.removeFeatureInternal(s);r&&e.push(r)}e.length>0&&this.changed()}removeFeature(t){if(!t)return;const e=this.removeFeatureInternal(t);e&&this.changed()}removeFeatureInternal(t){const e=(0,p.v6)(t);if(!(e in this.uidIndex_))return;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.featureChangeKeys_[e];i?.forEach(A.JH),delete this.featureChangeKeys_[e];const s=t.getId();if(void 0!==s){const e=s.toString(),i=this.idIndex_[e];i===t?delete this.idIndex_[e]:Array.isArray(i)&&(i.splice(i.indexOf(t),1),1===i.length&&(this.idIndex_[e]=i[0]))}return delete this.uidIndex_[e],this.hasListener(u.A.REMOVEFEATURE)&&this.dispatchEvent(new y(u.A.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_){const s=this.idIndex_[i];if(t instanceof l.Ay&&Array.isArray(s)&&s.includes(t))s.splice(s.indexOf(t),1);else if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}}return e}setLoader(t){this.loader_=t}setUrl(t){(0,_.v)(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader((0,x.nF)(t,this.format_))}}const C=E},55153:(t,e,i)=>{i.d(e,{A:()=>h,q:()=>n});var s=i(90588),r=i(43530);const n=1/0;class o{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,r.I)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(t){(0,s.v)(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=n&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,s=e.length,r=e[t],n=i[t],o=t;while(t<s>>1){const r=this.getLeftChildIndex_(t),n=this.getRightChildIndex_(t),o=n<s&&i[n]<i[r]?n:r;e[t]=e[o],i[t]=i[o],t=o}e[t]=r,i[t]=n,this.siftDown_(o,t)}siftDown_(t,e){const i=this.elements_,s=this.priorities_,r=i[e],n=s[e];while(e>t){const t=this.getParentIndex_(e);if(!(s[t]>n))break;i[e]=i[t],s[e]=s[t],e=t}i[e]=r,s[e]=n}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let s=0;const r=e.length;let o,h,a;for(h=0;h<r;++h)o=e[h],a=t(o),a==n?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=a,e[s++]=o);e.length=s,i.length=s,this.heapify_()}}const h=o},56758:(t,e,i)=>{i.d(e,{A:()=>f});var s=i(91110),r=i(57115),n=i(90588),o=i(61597),h=i(70915),a=i(40186),l=i(81969),c=i(66514),u=i(6782);const d=[0,0,0],g=5;class _{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,n.v)((0,c.WC)(this.resolutions_,(t,e)=>e-t,!0),"`resolutions` must be sorted in descending order"),!t.origins)for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(e){if(this.resolutions_[s]/this.resolutions_[s+1]!==e){e=void 0;break}}else e=this.resolutions_[s]/this.resolutions_[s+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,n.v)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=(0,h.Py)(i)),(0,n.v)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,n.v)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:r.R,(0,n.v)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((t,e)=>{const r=new s.A(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);r.minX=Math.max(t.minX,r.minX),r.maxX=Math.min(t.maxX,r.maxX),r.minY=Math.max(t.minY,r.minY),r.maxY=Math.min(t.maxY,r.maxY)}return r}):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const s=this.getTileRangeForExtentAndZ(t,e);for(let r=s.minX,n=s.maxX;r<=n;++r)for(let t=s.minY,o=s.maxY;t<=o;++t)i([e,r,t])}forEachTileCoordParentTileRange(t,e,i,r){let n,o,h,a=null,l=t[0]-1;2===this.zoomFactor_?(o=t[1],h=t[2]):a=this.getTileCoordExtent(t,r);while(l>=this.minZoom){if(void 0!==o&&void 0!==h?(o=Math.floor(o/2),h=Math.floor(h/2),n=(0,s.N)(o,o,h,h,i)):n=this.getTileRangeForExtentAndZ(a,l,i),e(l,n))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],r=2*t[2];return(0,s.N)(i,i+1,r,r+1,e)}const r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],n=t[1],o=t[2];if(e===r)return(0,s.N)(n,o,n,o,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-r),h=Math.floor(n*t),a=Math.floor(o*t);if(e<r)return(0,s.N)(h,h,a,a,i);const l=Math.floor(t*(n+1))-1,c=Math.floor(t*(o+1))-1;return(0,s.N)(h,l,a,c,i)}const h=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,d);const r=d[1],n=d[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,d);const o=d[1],h=d[2];return(0,s.N)(r,o,n,h,i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),s=(0,u.xq)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*s[0]*i,e[1]-(t[2]+.5)*s[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=(0,u.xq)(this.getTileSize(t[0]),this.tmpSize_),n=i[0]+t[1]*r[0]*s,o=i[1]-(t[2]+1)*r[1]*s,a=n+r[0]*s,l=o+r[1]*s;return(0,h.N)(n,o,a,l,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,s,r){const n=this.getZForResolution(i),h=i/this.getResolution(n),l=this.getOrigin(n),c=(0,u.xq)(this.getTileSize(n),this.tmpSize_);let d=h*(t-l[0])/i/c[0],_=h*(l[1]-e)/i/c[1];return s?(d=(0,o.mk)(d,g)-1,_=(0,o.mk)(_,g)-1):(d=(0,o.RI)(d,g),_=(0,o.RI)(_,g)),(0,a.N)(n,d,_,r)}getTileCoordForXYAndZ_(t,e,i,s,r){const n=this.getOrigin(i),h=this.getResolution(i),l=(0,u.xq)(this.getTileSize(i),this.tmpSize_);let c=(t-n[0])/h/l[0],d=(n[1]-e)/h/l[1];return s?(c=(0,o.mk)(c,g)-1,d=(0,o.mk)(d,g)-1):(c=(0,o.RI)(c,g),d=(0,o.RI)(d,g)),(0,a.N)(i,c,d,r)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=(0,c.FT)(this.resolutions_,t,e||0);return(0,o.qE)(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,l.sj)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let s=this.minZoom;s<e;++s)i[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=i}}const f=_},57115:(t,e,i)=>{i.d(e,{L:()=>s,R:()=>r});const s=42,r=256},66017:(t,e,i)=>{i.d(e,{A:()=>f,c:()=>_});var s=i(1685),r=i(16444),n=i(70061),o=i(11078),h=i(4087),a=i(90588),l=i(89718),c=i(40186),u=i(4863),d=i(6782);class g extends r.A{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&(0,d.xq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new n.A(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,s){const r=this.getTileCacheForProjection(t);if(!r)return!1;let n,h,a,l=!0;for(let u=i.minX;u<=i.maxX;++u)for(let t=i.minY;t<=i.maxY;++t)h=(0,c.dp)(e,u,t),a=!1,r.containsKey(h)&&(n=r.get(h),a=n.getState()===o.A.LOADED,a&&(a=!1!==s(n))),a||(l=!1);return l}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,s,r){return(0,h.b0)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,u.pr)(t)}getTileCacheForProjection(t){const e=this.getProjection();return(0,a.v)(null===e||(0,l.equivalent)(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),n=(0,d.xq)(s.getTileSize(t),this.tmpSize);return 1==r?n:(0,d.hs)(n,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=(0,u.Li)(i,t,e)),(0,c.N5)(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,s){}}class _ extends s.Ay{constructor(t,e){super(t),this.tile=e}}const f=g},81426:(t,e,i)=>{i.d(e,{A:()=>h});var s=i(13628),r=i(6782);const n="#333";class o{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,r.xq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new s.A({color:n}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new o({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.xq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const h=o},82241:(t,e,i)=>{i.d(e,{ue:()=>a});var s=i(6141),r=i(89352),n=i(68711);class o{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];0!==(3&t++)||i.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const s=h(t,e,i);return s in this.cache_?this.cache_[s]:null}getPattern(t,e,i){const s=h(t,e,i);return s in this.patternCache_?this.patternCache_[s]:null}set(t,e,i,r,o){const a=h(t,e,i),l=a in this.cache_;this.cache_[a]=r,o&&(r.getImageState()===s.A.IDLE&&r.load(),r.getImageState()===s.A.LOADING?r.ready().then(()=>{this.patternCache_[a]=(0,n.lr)().createPattern(r.getImage(1),"repeat")}):this.patternCache_[a]=(0,n.lr)().createPattern(r.getImage(1),"repeat")),l||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function h(t,e,i){const s=i?(0,r._j)(i):"null";return e+":"+t+":"+s}const a=new o},86936:(t,e,i)=>{i.d(e,{A:()=>c});var s=i(6141),r=i(10940),n=i(89352),o=i(77295),h=i(68711),a=i(38774);class l extends r.A{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?s.A.LOADING:s.A.LOADED,this.imageState_===s.A.LOADING&&this.ready().then(()=>this.imageState_=s.A.LOADED),this.render()}clone(){const t=this.getScale(),e=new l({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t];if(!e){const i=this.renderOptions_,s=(0,h.Y)(i.size*t,i.size*t);this.draw_(i,s,t),e=s.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let s=this.radius_,r=void 0===this.radius2_?s:this.radius2_;if(s<r){const t=s;s=r,r=t}const n=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/n,h=r*Math.sin(o),a=Math.sqrt(r*r-h*h),l=s-a,c=Math.sqrt(h*h+l*l),u=c/h;if("miter"===t&&u<=i)return u*e;const d=e/2/u,g=e/2*(l/c),_=Math.sqrt((s+d)*(s+d)+g*g),f=_-s;if(void 0===this.radius2_||"bevel"===t)return 2*f;const m=s*Math.sin(o),p=Math.sqrt(s*s-m*m),v=r-p,A=Math.sqrt(m*m+v*v),x=A/m;if(x<=i){const t=x*e/2-r-s;return 2*Math.max(f,t)}return 2*f}createRenderOptions(){let t,e=a._m,i=a._K,s=0,r=null,n=0,h=0;this.stroke_&&(t=(0,o.F)(this.stroke_.getColor()??a.NT),h=this.stroke_.getWidth()??a.aq,r=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??a._K,e=this.stroke_.getLineCap()??a._m,s=this.stroke_.getMiterLimit()??a.eL);const l=this.calculateLineJoinSize_(i,h,s),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:t,strokeWidth:h,size:u,lineCap:e,lineDash:r,lineDashOffset:n,lineJoin:i,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=a.qY),e.fillStyle=(0,o.F)(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let i=this.fill_.getColor(),s=0;"string"===typeof i&&(i=(0,n._j)(i)),null===i?s=1:Array.isArray(i)&&(s=4===i.length?i[3]:1),0===s&&(e=(0,h.Y)(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const s=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,n=2*Math.PI/e;for(let o=0;o<e;o++){const e=r+o*n,h=o%2===0?i:s;t.lineTo(h*Math.cos(e),h*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=a.qY,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const c=l},88280:(t,e,i)=>{i.d(e,{A:()=>s});const s={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},95902:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(35341),r=i(70915),n=i(4087),o=i(43530);class h{constructor(t){this.rbush_=new s(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,n.v6)(e)]=i}load(t,e){const i=new Array(e.length);for(let s=0,r=e.length;s<r;s++){const r=t[s],o=e[s],h={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:o};i[s]=h,this.items_[(0,n.v6)(o)]=h}this.rbush_.load(i)}remove(t){const e=(0,n.v6)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[(0,n.v6)(e)],s=[i.minX,i.minY,i.maxX,i.maxY];(0,r.aI)(s,t)||(this.remove(e),this.insert(t,e))}getAll(){const t=this.rbush_.all();return t.map(function(t){return t.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},i=this.rbush_.search(e);return i.map(function(t){return t.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let s=0,r=t.length;s<r;s++)if(i=e(t[s]),i)return i;return i}isEmpty(){return(0,o.p)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,r.N)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const a=h},97907:(t,e,i)=>{i.d(e,{J:()=>d});var s=i(79332),r=i(6837),n=i(6141),o=i(89352),h=i(68711),a=i(43938),l=i(82241);let c=null;class u extends s.A{constructor(t,e,i,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=void 0===s?n.A.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===n.A.LOADED){c||(c=(0,h.Y)(1,1,void 0,{willReadFrequently:!0})),c.drawImage(this.image_,0,0);try{c.getImageData(0,0,1,1),this.tainted_=!1}catch(t){c=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(r.A.CHANGE)}handleImageError_(){this.imageState_=n.A.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=n.A.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=(0,h.Y)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===n.A.IDLE){this.image_||this.initializeImage_(),this.imageState_=n.A.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,a.RA)(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==n.A.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const s=i.getContext("2d");s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=(0,o.oJ)(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=i}ready(){return this.ready_||(this.ready_=new Promise(t=>{this.imageState_===n.A.LOADED||this.imageState_===n.A.ERROR?t():this.addEventListener(r.A.CHANGE,function e(){this.imageState_!==n.A.LOADED&&this.imageState_!==n.A.ERROR||(this.removeEventListener(r.A.CHANGE,e),t())})})),this.ready_}}function d(t,e,i,s,r,n){let o=void 0===e?void 0:l.ue.get(e,i,r);return o||(o=new u(t,t&&"src"in t?t.src||void 0:e,i,s,r),l.ue.set(e,i,r,o,n)),n&&o&&!l.ue.getPattern(e,i,r)&&l.ue.set(e,i,r,o,n),o}}}]);
//# sourceMappingURL=3291.ed299200.js.map
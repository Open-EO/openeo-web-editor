{"version":3,"file":"js/1091.fdae215d.js","mappings":"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","sources":["webpack://@openeo/web-editor/./src/components/viewer/TableViewer.vue","webpack://@openeo/web-editor/src/components/viewer/TableViewer.vue","webpack://@openeo/web-editor/./src/components/viewer/TableViewer.vue?e8d1","webpack://@openeo/web-editor/./src/components/viewer/TableViewer.vue?e58d"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.content)?_c('Splitpanes',{staticClass:\"default-theme\",attrs:{\"horizontal\":\"\"}},[_c('Pane',{attrs:{\"id\":\"table\"}},[(_vm.content)?_c('div',{staticClass:\"tableViewer\"},[_c('table',[_c('thead',[_c('tr',_vm._l((_vm.header),function(label,col){return _c('th',{key:col},[(col !== 0)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.showCols),expression:\"showCols\"}],attrs:{\"type\":\"checkbox\",\"title\":\"Add column to diagram\"},domProps:{\"value\":col,\"checked\":Array.isArray(_vm.showCols)?_vm._i(_vm.showCols,col)>-1:(_vm.showCols)},on:{\"change\":function($event){var $$a=_vm.showCols,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=col,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.showCols=$$a.concat([$$v]))}else{$$i>-1&&(_vm.showCols=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.showCols=$$c}}}}):_vm._e(),_c('br'),_vm._v(\" \"+_vm._s(label)+\" \")])}),0)]),_c('tbody',_vm._l((_vm.content),function(cols,row){return _c('tr',{key:row},_vm._l((cols),function(value,col){return _c(col === 0 ? 'th': 'td',{key:col,tag:\"component\",class:(typeof value)},[(col === 0)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.showRows),expression:\"showRows\"}],attrs:{\"type\":\"checkbox\",\"title\":\"Add row to diagram\"},domProps:{\"value\":row,\"checked\":Array.isArray(_vm.showRows)?_vm._i(_vm.showRows,row)>-1:(_vm.showRows)},on:{\"change\":function($event){var $$a=_vm.showRows,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=row,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.showRows=$$a.concat([$$v]))}else{$$i>-1&&(_vm.showRows=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.showRows=$$c}}}}):_vm._e(),_vm._v(\" \"+_vm._s(_vm._f(\"locale\")(value))+\" \")])}),1)}),0)])]):_c('em',[_vm._v(\"No data retrieved.\")])]),(_vm.chart)?_c('Pane',{attrs:{\"id\":\"chart\",\"size\":50}},[_c('ScatterChart',_vm._b({},'ScatterChart',_vm.chart,false))],1):_vm._e()],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Splitpanes v-if=\"content\" horizontal class=\"default-theme\">\n\t\t<Pane id=\"table\">\n\t\t\t<div v-if=\"content\" class=\"tableViewer\">\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th v-for=\"(label, col) in header\" :key=\"col\">\n\t\t\t\t\t\t\t\t<input v-if=\"col !== 0\" type=\"checkbox\" v-model=\"showCols\" :value=\"col\" title=\"Add column to diagram\" /><br />\n\t\t\t\t\t\t\t\t{{ label }}\n\t\t\t\t\t\t\t</th> \n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr v-for=\"(cols, row) in content\" :key=\"row\">\n\t\t\t\t\t\t\t<component v-for=\"(value, col) in cols\" :key=\"col\" :is=\"col === 0 ? 'th': 'td'\" :class=\"(typeof value)\">\n\t\t\t\t\t\t\t\t<input v-if=\"col === 0\" type=\"checkbox\" v-model=\"showRows\" :value=\"row\" title=\"Add row to diagram\" />\n\t\t\t\t\t\t\t\t{{ value | locale }}\n\t\t\t\t\t\t\t</component>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<em v-else>No data retrieved.</em>\n\t\t</Pane>\n\t\t<Pane v-if=\"chart\" id=\"chart\" :size=\"50\">\n\t\t\t<ScatterChart v-bind=\"chart\" />\n\t\t</Pane>\n\t</Splitpanes>\n</template>\n\n<script>\nimport { Splitpanes, Pane } from 'splitpanes';\nimport ScatterChart from './ScatterChart.vue';\n\nimport CSV from '../../formats/csv';\nimport JSON_ from '../../formats/json';\n\nexport default {\n\tname: 'TableViewer',\n\tcomponents: {\n\t\tPane,\n\t\tScatterChart,\n\t\tSplitpanes,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\theader: null,\n\t\t\tcontent: null,\n\t\t\tshowRows: [],\n\t\t\tshowCols: []\n\t\t};\n\t},\n\tfilters: {\n\t\tlocale(value) {\n\t\t\treturn typeof value === 'number' ? value.toLocaleString() : value;\n\t\t}\n\t},\n\tcomputed: {\n\t\tchart() {\n\t\t\tif (this.showCols.length === 0 && this.showRows.length === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (this.showCols.length > 0 && this.showRows.length > 0) {\n\t\t\t\treturn {error: `You can only add either rows or columns to the diagram. Please unselect either all rows or all columns.`};\n\t\t\t}\n\n\t\t\tlet labels;\n\t\t\tlet datasets;\n\t\t\tif (this.showCols.length > 0) {\n\t\t\t\tlabels = this.content.map(rows => rows[0]);\n\t\t\t\tdatasets = this.showCols.map(col => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: this.header[col],\n\t\t\t\t\t\tdata: this.content.map(cols => cols[col])\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\telse { // rows\n\t\t\t\tlabels = this.header.slice(1);\n\t\t\t\tdatasets = this.showRows.map(row => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: this.content[row][0],\n\t\t\t\t\t\tdata: this.content[row].slice(1)\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn { labels, datasets };\n\t\t}\n\t},\n\tasync created() {\n\t\tif(this.data instanceof CSV) {\n\t\t\tlet array = this.data.getData();\n\t\t\tif (Array.isArray(array) && array.length > 0) {\n\t\t\t\t// ToDo: Implement time series parsing for headers... https://www.chartjs.org/docs/latest/axes/cartesian/timeseries.html\n\t\t\t\tthis.header = array.shift();\n\t\t\t\tthis.content = array;\n\t\t\t\tif (!this.content.every(x => !x || typeof x === 'number')) {\n\t\t\t\t\tthis.header.unshift(\"Row\");\n\t\t\t\t\tthis.content.forEach((arr, i) => arr.unshift(String(i+1)));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.data instanceof JSON_) {\n\t\t\tlet data = this.data.getData();\n\t\t\tlet keys = Object.keys(data);\n\t\t\tlet values = Object.values(data);\n\n\t\t\tlet headers = new Set();\n\t\t\tvalues.forEach(row => Object.keys(row).forEach(key => headers.add(key)));\n\t\t\tthis.header = Array.from(headers);\n\t\t\tthis.content = values.map(row => this.header.map(key => Array.isArray(row[key]) && row[key].length === 1 ? row[key][0] : row[key]));\n\n\t\t\tthis.header.unshift(\"\");\n\t\t\tthis.content.forEach((arr, i) => arr.unshift(keys[i]));\n\t\t}\n\t\telse {\n\t\t\tUtils.error(this, \"The format is not supported to be shown in a table.\");\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$emit('mounted', this);\n\t}\n};\n</script>\n\n<style lang=\"scss\">\n.tableViewer {\n\twidth: 100%;\n\theight: 100%;\n\toverflow: auto;\n\n\t> table {\n\t\twidth: 100%;\n\n\t\t> thead {\n\t\t\tposition: sticky;\n\t\t\ttop: 0px;\n\t\t\tbackground: #eee;\n\t\t\tz-index: 1;\n\n\t\t\tth {\n\t\t\t\tborder-top: 0;\n\t\t\t}\n\t\t}\n\n\t\t> tbody {\n\t\t\ttd.number {\n\t\t\t\ttext-align: right;\n\t\t\t}\n\n\t\t\tth {\n\t\t\t\ttext-align: left;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TableViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TableViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TableViewer.vue?vue&type=template&id=00bb78d2&\"\nimport script from \"./TableViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./TableViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TableViewer.vue?vue&type=style&index=0&id=00bb78d2&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","content","staticClass","attrs","_l","header","label","col","key","directives","name","rawName","value","showCols","expression","domProps","Array","isArray","_i","on","$event","$$a","$$el","target","$$c","checked","$$v","$$i","concat","slice","_e","_v","_s","cols","row","tag","class","showRows","_f","chart","_b","staticRenderFns","components","Pane","ScatterChart","Splitpanes","props","data","type","required","filters","locale","computed","error","labels","datasets","values","Utils","mounted","component"],"sourceRoot":""}
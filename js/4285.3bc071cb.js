"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[4285],{81148:(t,e,i)=>{var a=i(46518),s=i(69565),l=i(72652),r=i(79306),n=i(28551),o=i(1767),u=i(9539),h=i(84549),c=h("every",TypeError);a({target:"Iterator",proto:!0,real:!0,forced:c},{every:function(t){n(this);try{r(t)}catch(a){u(this,"throw",a)}if(c)return s(c,this,t);var e=o(this),i=0;return!l(e,function(e,a){if(!t(e,i++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},94285:(t,e,i)=>{i.r(e),i.d(e,{default:()=>c});var a=function(){var t=this,e=t._self._c;return e("div",{ref:"imageViewer",staticClass:"imageViewer",class:{fullscreen:t.fullScreen}},[t.error?[t._v(t._s(t.error))]:[e("div",{staticClass:"toolbar"},[t.play?t._e():e("span",{staticClass:"value",attrs:{title:t.valueTitle}},[t._v(t._s(t.valueText))]),e("FullscreenButton",{staticClass:"fullscreen-button",attrs:{element:()=>t.$refs.imageViewer},on:{changed:t.fullscreenToggled}}),e("button",{staticClass:"play-button",attrs:{title:"Play animation (if available)"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.togglePlay.apply(null,arguments)}}},[t.play?e("i",{staticClass:"fas fa-stop"}):e("i",{staticClass:"fas fa-play"})])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.context,expression:"!context"}],staticClass:"no-data"},[e("i",{staticClass:"fas fa-spinner fa-spin"}),t._v(" Loading image...")]),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.context&&!t.play,expression:"context && !play"}],ref:"canvas",style:t.style,attrs:{title:t.title},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.resize.apply(null,arguments)},mousemove:t.getPixelValue,mouseout:t.resetPixelValue}}),e("iframe",{directives:[{name:"show",rawName:"v-show",value:t.context&&t.play,expression:"context && play"}],ref:"iframe"},[e("body",{ref:"body",staticStyle:{margin:"auto",width:"100%",height:"100%","text-align":"center"}},[e("img",{ref:"image",style:t.style,attrs:{title:t.title},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.resize.apply(null,arguments)}}})])])]],2)},s=[],l=(i(81148),i(92622));const r="-",n={name:"ImageViewer",components:{FullscreenButton:l.A},props:{data:{type:Object,required:!0}},data(){return{fullScreen:!1,fullSize:!1,img:null,error:null,context:null,value:r,play:!1}},async mounted(){this.$emit("mounted",this),this.img=await this.data.getData()},computed:{style(){return this.fullSize||this.fullScreen?{"max-width":"none","max-height":"none","object-fit":"none",cursor:this.fullScreen?"auto":"zoom-out","box-sizing":"border-box"}:{"max-width":"100%","max-height":"100%",cursor:"zoom-in","object-fit":"contain","box-sizing":"border-box"}},title(){return this.fullScreen?"":this.fullSize?"Click to shrink (fit to screen)":"Click to enlarge (full size)"},valueTitle(){return this.fullScreen||this.fullSize?"":"Show in full size to get precise values"},valueText(){return this.fullScreen||this.fullSize?`Pixel Value: ${this.value}`:`Estimated Pixel Value: ${this.value}`}},watch:{img:{immediate:!0,handler(){this.updateContent()}},play:{immediate:!0,handler(){this.updateContent()}}},methods:{updateContent(){if(this.img)try{this.play?(this.$refs.image.src=this.img.src,this.$refs.iframe.contentWindow.document.body=this.$refs.body,this.$refs.iframe.style.width=`${this.img.naturalWidth}px`,this.$refs.iframe.style.height=`${this.img.naturalHeight}px`):(this.$refs.canvas.width=this.img.naturalWidth,this.$refs.canvas.height=this.img.naturalHeight,this.context=this.$refs.canvas.getContext("2d",{willReadFrequently:!0}),this.context.drawImage(this.img,0,0))}catch(t){this.error=t}},togglePlay(){this.play=!this.play},fullscreenToggled(t){this.fullScreen=t},resize(){this.fullScreen||(this.fullSize=!this.fullSize)},resetPixelValue(){this.value=r},getPixelValue(t){try{const e=this.$refs.canvas.getBoundingClientRect(),i=this.img.naturalWidth/e.width,a=this.img.naturalHeight/e.height,s=t.offsetX*i,l=t.offsetY*a,r=Array.from(this.context.getImageData(Math.ceil(s),Math.ceil(l),1,1).data),n=r.pop();0===n?this.value="no data":r.every(t=>t===r[0])?this.value=r[0]:this.value=r.join(" / ")}catch(e){this.value=r}}}},o=n;var u=i(81656),h=(0,u.A)(o,a,s,!1,null,"bb3bb0f6",null);const c=h.exports}}]);
//# sourceMappingURL=4285.3bc071cb.js.map
"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[5137],{87161:(t,e,i)=>{i.d(e,{Co:()=>g,rX:()=>h,sY:()=>_});var s=i(28641),o=i(68326),r=i(63432),n=i(33983);let a;const h=[];function c(t,e,i,s,o){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(s,o),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,s)+1,Math.max(i,o)),t.restore()}function u(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function l(){if(void 0===a){const t=(0,o.E4)(6,6,h);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",c(t,4,5,4,0),c(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;a=u(e,0)||u(e,4)||u(e,8),(0,o.jy)(t),h.push(t.canvas)}return a}function d(t,e,i,o){const n=(0,r.transform)(i,e,t);let a=(0,r.getPointResolution)(e,o,i);const h=e.getMetersPerUnit();void 0!==h&&(a*=h);const c=t.getMetersPerUnit();void 0!==c&&(a/=c);const u=t.getExtent();if(!u||(0,s.b8)(u,n)){const e=(0,r.getPointResolution)(t,a,n)/a;isFinite(e)&&e>0&&(a/=e)}return a}function g(t,e,i,o){const r=(0,s.qg)(i);let n=d(t,e,r,o);return(!isFinite(n)||n<=0)&&(0,s.H6)(i,(function(i){return n=d(t,e,i,o),isFinite(n)&&n>0})),n}function _(t,e,i,r,a,c,u,d,g,_,f,m){const T=(0,o.E4)(Math.round(i*t),Math.round(i*e),h);if(m||(T.imageSmoothingEnabled=!1),0===g.length)return T.canvas;function v(t){return Math.round(t*i)/i}T.scale(i,i),T.globalCompositeOperation="lighter";const E=(0,s.lJ)();g.forEach((function(t,e,i){(0,s.l7)(E,t.extent)}));const p=(0,s.dz)(E),M=(0,s.Cr)(E),x=(0,o.E4)(Math.round(i*p/r),Math.round(i*M/r),h);m||(x.imageSmoothingEnabled=!1);const W=i/r;g.forEach((function(t,e,i){const o=t.extent[0]-E[0],r=-(t.extent[3]-E[3]),n=(0,s.dz)(t.extent),a=(0,s.Cr)(t.extent);t.image.width>0&&t.image.height>0&&x.drawImage(t.image,_,_,t.image.width-2*_,t.image.height-2*_,o*W,r*W,n*W,a*W)}));const Z=(0,s.rL)(u);return d.getTriangles().forEach((function(t,e,s){const o=t.source,a=t.target;let h=o[0][0],u=o[0][1],d=o[1][0],g=o[1][1],_=o[2][0],f=o[2][1];const p=v((a[0][0]-Z[0])/c),M=v(-(a[0][1]-Z[1])/c),W=v((a[1][0]-Z[0])/c),b=v(-(a[1][1]-Z[1])/c),P=v((a[2][0]-Z[0])/c),I=v(-(a[2][1]-Z[1])/c),F=h,S=u;h=0,u=0,d-=F,g-=S,_-=F,f-=S;const j=[[d,g,0,0,W-p],[_,f,0,0,P-p],[0,0,d,g,b-M],[0,0,_,f,I-M]],C=(0,n.SV)(j);if(C){if(T.save(),T.beginPath(),l()||!m){T.moveTo(W,b);const t=4,e=p-W,i=M-b;for(let s=0;s<t;s++)T.lineTo(W+v((s+1)*e/t),b+v(s*i/(t-1))),s!=t-1&&T.lineTo(W+v((s+1)*e/t),b+v((s+1)*i/(t-1)));T.lineTo(P,I)}else T.moveTo(W,b),T.lineTo(p,M),T.lineTo(P,I);T.clip(),T.transform(C[0],C[2],C[1],C[3],p,M),T.translate(E[0]-F,E[3]-S),T.scale(r/i,-r/i),T.drawImage(x.canvas,0,0),T.restore()}})),(0,o.jy)(x),h.push(x.canvas),f&&(T.save(),T.globalCompositeOperation="source-over",T.strokeStyle="black",T.lineWidth=1,d.getTriangles().forEach((function(t,e,i){const s=t.target,o=(s[0][0]-Z[0])/c,r=-(s[0][1]-Z[1])/c,n=(s[1][0]-Z[0])/c,a=-(s[1][1]-Z[1])/c,h=(s[2][0]-Z[0])/c,u=-(s[2][1]-Z[1])/c;T.beginPath(),T.moveTo(n,a),T.lineTo(o,r),T.lineTo(h,u),T.closePath(),T.stroke()})),T.restore()),T.canvas}},16675:(t,e,i)=>{i.d(e,{Z:()=>_});var s=i(4773),o=i(85487),r=i(94806),n=i(37195),a=i(55476),h=i(87161),c=i(33983),u=i(28641),l=i(65818),d=i(68326);class g extends r.Z{constructor(t,e,i,o,r,l,d,g,_,f,m,T){super(r,n.Z.IDLE,{interpolate:!!T}),this.renderEdges_=void 0!==m&&m,this.pixelRatio_=d,this.gutter_=g,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=o,this.wrappedTileCoord_=l||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const v=o.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const M=E?(0,u.Ed)(v,E):v;if(0===(0,u.bg)(M))return void(this.state=n.Z.EMPTY);const x=t.getExtent();x&&(p=p?(0,u.Ed)(p,x):x);const W=o.getResolution(this.wrappedTileCoord_[0]),Z=(0,h.Co)(t,i,M,W);if(!isFinite(Z)||Z<=0)return void(this.state=n.Z.EMPTY);const b=void 0!==f?f:s.m;if(this.triangulation_=new a.Z(t,i,M,p,Z*b,W),0===this.triangulation_.getTriangles().length)return void(this.state=n.Z.EMPTY);this.sourceZ_=e.getZForResolution(Z);let P=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(P[1]=(0,c.uZ)(P[1],p[1],p[3]),P[3]=(0,c.uZ)(P[3],p[1],p[3])):P=(0,u.Ed)(P,p)),(0,u.bg)(P)){const t=e.getTileRangeForExtentAndZ(P,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=_(this.sourceZ_,e,i,d);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=n.Z.EMPTY)}else this.state=n.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{e&&e.getState()==n.Z.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=n.Z.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),s="number"===typeof i?i:i[0],o="number"===typeof i?i:i[1],r=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,h.sY)(s,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),r,c,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=n.Z.LOADED}this.changed()}load(){if(this.state==n.Z.IDLE){this.state=n.Z.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const i=e.getState();if(i==n.Z.IDLE||i==n.Z.LOADING){t++;const i=(0,l.oL)(e,o.Z.CHANGE,(function(s){const o=e.getState();o!=n.Z.LOADED&&o!=n.Z.ERROR&&o!=n.Z.EMPTY||((0,l.bN)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(i)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,i){const s=t.getState();s==n.Z.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(l.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,d.jy)(this.canvas_.getContext("2d")),h.rX.push(this.canvas_),this.canvas_=null),super.release()}}const _=g},55476:(t,e,i)=>{i.d(e,{Z:()=>c});var s=i(28641),o=i(63432),r=i(33983);const n=10,a=.25;class h{constructor(t,e,i,r,a,h){this.sourceProj_=t,this.targetProj_=e;let c={};const u=(0,o.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return c[e]||(c[e]=u(t)),c[e]},this.maxSourceExtent_=r,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&(0,s.dz)(r)>=(0,s.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,s.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,s.dz)(this.targetProj_.getExtent()):null;const l=(0,s.rL)(i),d=(0,s.Xv)(i),g=(0,s.w$)(i),_=(0,s.hC)(i),f=this.transformInv_(l),m=this.transformInv_(d),T=this.transformInv_(g),v=this.transformInv_(_),E=n+(h?Math.max(0,Math.ceil(Math.log2((0,s.bg)(i)/(h*h*256*256)))):0);if(this.addQuad_(l,d,g,_,f,m,T,v,E),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,i,s){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const s=Math.min(i[0][0],i[1][0],i[2][0]),o=Math.max(i[0][0],i[1][0],i[2][0]);o-s<this.sourceWorldWidth_/2&&(e.source=i)}}))}c={}}addTriangle_(t,e,i,s,o,r){this.triangles_.push({source:[s,o,r],target:[t,e,i]})}addQuad_(t,e,i,o,n,h,c,u,l){const d=(0,s.hI)([n,h,c,u]),g=this.sourceWorldWidth_?(0,s.dz)(d)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&g>.5&&g<1;let m=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const r=(0,s.hI)([t,e,i,o]),n=(0,s.dz)(r)/this.targetWorldWidth_;m=n>a||m}!f&&this.sourceProj_.isGlobal()&&g&&(m=g>a||m)}if(!m&&this.maxSourceExtent_&&isFinite(d[0])&&isFinite(d[1])&&isFinite(d[2])&&isFinite(d[3])&&!(0,s.kK)(d,this.maxSourceExtent_))return;let T=0;if(!m&&(!isFinite(n[0])||!isFinite(n[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(u[0])||!isFinite(u[1])))if(l>0)m=!0;else if(T=(isFinite(n[0])&&isFinite(n[1])?0:8)+(isFinite(h[0])&&isFinite(h[1])?0:4)+(isFinite(c[0])&&isFinite(c[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1),1!=T&&2!=T&&4!=T&&8!=T)return;if(l>0){if(!m){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],s=this.transformInv_(e);let o;if(f){const t=((0,r.$W)(n[0],_)+(0,r.$W)(c[0],_))/2;o=t-(0,r.$W)(s[0],_)}else o=(n[0]+c[0])/2-s[0];const a=(n[1]+c[1])/2-s[1],h=o*o+a*a;m=h>this.errorThresholdSquared_}if(m){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const s=[(e[0]+i[0])/2,(e[1]+i[1])/2],r=this.transformInv_(s),a=[(o[0]+t[0])/2,(o[1]+t[1])/2],d=this.transformInv_(a);this.addQuad_(t,e,s,a,n,h,r,d,l-1),this.addQuad_(a,s,i,o,d,r,c,u,l-1)}else{const s=[(t[0]+e[0])/2,(t[1]+e[1])/2],r=this.transformInv_(s),a=[(i[0]+o[0])/2,(i[1]+o[1])/2],d=this.transformInv_(a);this.addQuad_(t,s,a,o,n,r,d,u,l-1),this.addQuad_(s,e,i,a,r,h,c,d,l-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&T)&&this.addTriangle_(t,i,o,n,c,u),0==(14&T)&&this.addTriangle_(t,i,e,n,c,h),T&&(0==(13&T)&&this.addTriangle_(e,o,t,h,u,n),0==(7&T)&&this.addTriangle_(e,o,i,h,u,c))}calculateSourceExtent(){const t=(0,s.lJ)();return this.triangles_.forEach((function(e,i,o){const r=e.source;(0,s.Wj)(t,r[0]),(0,s.Wj)(t,r[1]),(0,s.Wj)(t,r[2])})),t}getTriangles(){return this.triangles_}}const c=h},4773:(t,e,i)=>{i.d(e,{m:()=>s});const s=.5},19307:(t,e,i)=>{i.d(e,{Is:()=>u,cA:()=>c,gn:()=>h});var s=i(33983),o=i(28641),r=i(65537);function n(t,e,i,s){const r=(0,o.dz)(e)/i[0],n=(0,o.Cr)(e)/i[1];return s?Math.min(t,Math.max(r,n)):Math.min(t,Math.min(r,n))}function a(t,e,i){let o=Math.min(t,e);const r=50;return o*=Math.log(1+r*Math.max(0,t/e-1))/r+1,i&&(o=Math.max(o,i),o/=Math.log(1+r*Math.max(0,i/t-1))/r+1),(0,s.uZ)(o,i/2,2*e)}function h(t,e,i,o){return e=void 0===e||e,function(h,c,u,l){if(void 0!==h){const d=t[0],g=t[t.length-1],_=i?n(d,i,u,o):d;if(l)return e?a(h,_,g):(0,s.uZ)(h,g,_);const f=Math.min(_,h),m=Math.floor((0,r.h7)(t,f,c));return t[m]>_&&m<t.length-1?t[m+1]:t[m]}}}function c(t,e,i,o,r,h){return o=void 0===o||o,i=void 0!==i?i:0,function(c,u,l,d){if(void 0!==c){const g=r?n(e,r,l,h):e;if(d)return o?a(c,g,i):(0,s.uZ)(c,i,g);const _=1e-9,f=Math.ceil(Math.log(e/g)/Math.log(t)-_),m=-u*(.5-_)+.5,T=Math.min(g,c),v=Math.floor(Math.log(e/T)/Math.log(t)+m),E=Math.max(f,v),p=e/Math.pow(t,E);return(0,s.uZ)(p,i,g)}}}function u(t,e,i,o,r){return i=void 0===i||i,function(h,c,u,l){if(void 0!==h){const c=o?n(t,o,u,r):t;return i&&l?a(h,c,e):(0,s.uZ)(h,e,c)}}}},60828:(t,e,i)=>{i.d(e,{Gw:()=>a,YP:()=>r,gE:()=>n,h$:()=>o});var s=i(33983);function o(t){if(void 0!==t)return 0}function r(t){if(void 0!==t)return t}function n(t){const e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?(t=Math.floor(t/e+.5)*e,t):void 0}}function a(t){return t=t||(0,s.Yr)(5),function(e,i){return i?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}},4307:(t,e,i)=>{function s(t){return t[0]>0&&t[1]>0}function o(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function r(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}i.d(e,{Pq:()=>r,bA:()=>o,py:()=>s})}}]);
//# sourceMappingURL=5137.2b1fc0ec.js.map
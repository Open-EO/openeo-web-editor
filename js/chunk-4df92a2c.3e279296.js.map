{"version":3,"sources":["webpack:///./src/components/openlayers/progress.js","webpack:///src/components/MapMixin.vue","webpack:///./src/components/MapMixin.vue","webpack:///./src/components/MapMixin.vue?59f8","webpack:///./src/components/TextEditor.vue?bd9b","webpack:///src/components/TextEditor.vue","webpack:///./src/components/TextEditor.vue?9144","webpack:///./src/components/TextEditor.vue","webpack:///./src/components/Viewer.vue?c0aa","webpack:///./src/components/WorkPanelMixin.js","webpack:///./src/components/VisualEditor.vue?413d","webpack:///./src/components/TextEditor.vue?e4e1","webpack:///./src/export/exporter.js","webpack:///./src/components/IDE.vue?dcbd","webpack:///./src/components/JobPanel.vue?4b24","webpack:///./src/components/VisualEditor.vue?3fed","webpack:///src/components/VisualEditor.vue","webpack:///./src/components/VisualEditor.vue?fdb7","webpack:///./src/components/VisualEditor.vue","webpack:///./src/components/ServicePanel.vue?c8eb","webpack:///./src/components/MapMixin.css?c3cc","webpack:///./src/components/ImageViewer.vue?e1c8","webpack:///./src/components/MapViewer.vue?ebb4","webpack:///src/components/MapViewer.vue","webpack:///./src/components/MapViewer.vue?b952","webpack:///./src/components/MapViewer.vue","webpack:///./src/components/UserWorkspace.vue?13f5","webpack:///./src/components/LogViewer.vue?55de","webpack:///./src/components/TextEditor.vue?9964","webpack:///./src/export/javascript.js","webpack:///./src/components/IDE.vue?9bf9","webpack:///./src/components/UserMenu.vue?409b","webpack:///src/components/UserMenu.vue","webpack:///./src/components/UserMenu.vue?194a","webpack:///./src/components/UserMenu.vue","webpack:///./src/components/UserWorkspace.vue?cfdc","webpack:///./src/components/JobPanel.vue?156e","webpack:///src/components/JobPanel.vue","webpack:///./src/components/JobPanel.vue?7f35","webpack:///./src/components/JobPanel.vue","webpack:///./src/components/ServicePanel.vue?6f6d","webpack:///src/components/ServicePanel.vue","webpack:///./src/components/ServicePanel.vue?7b25","webpack:///./src/components/ServicePanel.vue","webpack:///src/components/UserWorkspace.vue","webpack:///./src/components/UserWorkspace.vue?dec6","webpack:///./src/components/UserWorkspace.vue","webpack:///./src/components/Viewer.vue?431b","webpack:///./src/components/ImageViewer.vue?923d","webpack:///src/components/ImageViewer.vue","webpack:///./src/components/ImageViewer.vue?c18d","webpack:///./src/components/ImageViewer.vue","webpack:///./src/components/LogViewer.vue?55c0","webpack:///src/components/LogViewer.vue","webpack:///./src/components/LogViewer.vue?379a","webpack:///./src/components/LogViewer.vue","webpack:///src/components/Viewer.vue","webpack:///./src/components/Viewer.vue?c294","webpack:///./src/components/Viewer.vue","webpack:///src/components/IDE.vue","webpack:///./src/components/IDE.vue?bb34","webpack:///./src/components/IDE.vue","webpack:///./src/components/UserMenu.vue?b11a"],"names":["Progress","constructor","this","createHtml","loading","loaded","addLoading","update","addLoaded","percent","toFixed","label","innerText","progressBarInner","style","width","el","opacity","show","document","createElement","className","progressBar","appendChild","getControl","c","Control","element","render","staticRenderFns","mixins","props","id","type","required","center","default","zoom","editable","removableLayers","data","map","baseLayers","basemap","progress","fitOptions","padding","watch","mounted","methods","showMap","createMap","customControls","trash","opaque","attributionsCollapsible","source","baseLayer","title","noSwitcherDelete","visible","hasDefault","target","layers","view","showFullExtent","projection","mapOptions","fromLonLat","onShow","onHide","renderMap","getVisibleLayers","shownLayers","addGeoJson","sourceOpts","geojson","featureProjection","trackTileProgress","component","_vm","_h","$createElement","_c","_self","staticClass","class","languageString","_v","_s","_e","attrs","on","confirmClear","_t","canUndo","$event","editor","undo","canRedo","redo","window","name","components","FullscreenButton","value","language","placeholder","computed","editorOptions","indentUnit","lineNumbers","indentWithTabs","matchBrackets","autoCloseBrackets","readOnly","options","emitValue","updateState","commit","pg","emit","insert","text","updateContent","insertProcess","Utils","namespace","singular","plural","loadInitially","DataTable","columns","syncTimer","lastSyncTime","updateData","beforeDestroy","stopSyncTimer","mapState","mapGetters","mapActions","getTable","$refs","table","startSyncTimer","supportsList","setInterval","getSyncInterval","clearInterval","$config","dataRefreshInterval","obj","callback","old","Object","assign","updated","read","error","exception","nextSyncTime","Date","now","supportsCreate","isUpdate","length","setNoData","list","console","log","ProcessImpl","BaseProcess","process","exporter","super","node","generateFunction","Exporter","ProcessGraph","registry","connection","isObject","indent","code","fnCounter","allowEmpty","fillUndefinedParameters","createProcessGraphInstance","processRegistry","getJsonSchemaValidator","copyProcessGraphInstanceProperties","createProcessInstance","isKeyword","keyword","getKeywords","includes","toLowerCase","comment","generateImports","generateConnection","generateAuthentication","generateBuilder","generateMetadata","generateMissingParameter","generateFunctionParams","parameters","p","e","generateResult","makeNull","makeBoolean","val","makeArray","arr","join","makeObject","mapObject","key","makeString","str","JSON","stringify","makeNumber","num","Array","isArray","mapObjectValues","hasComment","newLine","generateMetadataEntry","args","onExporter","filter","newArgs","from_node","var","from_parameter","fnName","resolveArguments","getArgument","getCallbackParameters","execute","replacement","generateCallback","ordered","arguments","async","resolveCallback","orderArguments","getProcessGraph","getProcess","orderedArgs","param","optional","definedValueFound","i","pop","prefix","String","match","getTab","addCode","tabs","repeat","lines","trim","split","line","push","count","getServerUrl","getUrl","params","getProcessParameters","getResultNode","validate","reset","executeNodes","getStartNodes","isMath","_isMath","this$1","ref","blocks","hasSelection","deleteSelected","parent","editProcess","addParameter","highlightFormula","showExpressionModal","compactMode","toggleCompact","perfectScale","visualEditor","enabled","isFullScreen","showDiscoveryToolbar","onDrop","allowDrop","processes","collections","parentSchema","errorHandler","editParameter","openArgumentEditor","compact","selectionChanged","historyChanged","ModelBuilder","DiscoveryToolbar","defaultValue","formula","immediate","handler","event","reader","getNameField","description","schema","pattern","getDescriptionField","subtype","getOptionalField","getDefaultField","toggledBy","getExperimentalField","getDeprecatedField","getSchemaField","minItems","items","info","additionalProperties","properties","message","http","enum","returns","href","rel","newData","summary","categories","experimental","deprecated","examples","links","process_graph","js","save","openArgumentEditorForNode","processSpec","selectParameterName","events","clear","extents","geoJson","WMTSCapabilities","swipe","control","left","right","timeline","addRectangle","displayInLayerSwitcher","features","wrapX","toggleSwipeControl","addLayerToMap","layer","removeLayerFromMap","getLayerFromMap","updateGeoTiffLayer","url","crossOrigin","getWMTSTimes","responseType","matrixSet","defaultDate","minDate","maxDate","layerCollection","graduation","run","TIME","btns","html","group","updateXYZLayer","KEYWORDS","JavaScript","generateFormula","parse","parsed","variable","builderName","getParent","generateArguments","processId","process_id","arg","parameter","paramName","toFormulaString","escaped","toCode","resultNode","nodeToFormula","getArrayElementPlaceholder","getArgumentType","getRawArgument","index","findIndex","parentOperator","arrayElement","operator","Formula","reverseOperatorMapping","get","isArrayData","arrayOperatorMapping","convertValue","refNode","getNode","Error","argList","v","strongOps","weakOps","authenticated","isAuthenticated","showHelp","showServerInfo","resized","splitpaneSizeH","splitpaneSizeV","contextTitle","updateEditor","scopedSlots","_u","fn","importProcess","directives","rawName","expression","hasProcess","saveProcess","exportCode","validateProcess","proxy","login","_m","userName","budget","storageUsedPercent","profileLink","settingsLink","preventDefault","logout","apply","registerLink","passwordLink","serverUrl","disconnect","userLinks","_l","link","userInfo","default_plan","paymentLink","formatMegabyte","storageUsed","storage","quota","serverLinks","hasStorage","logoutUser","resetEditor","showJobInfo","row","supports","estimateJob","isJobInactive","editMetadata","showInEditor","deleteJob","queueJob","isJobActive","cancelJob","mayHaveResults","downloadResults","viewResults","showLogs","slot","createJobFromScript","executeProcess","WorkPanelMixinInstance","WorkPanelMixin","primaryKey","hide","computedValue","format","edit","status","stylable","created","sort","actions","filterable","watchers","jobUpdater","runId","deep","timeout","buttons","action","abortController","toast","level","jobCreated","getTitleField","getBillingPlanField","getBudgetField","normalizeToDefaultData","catch","executeWatchers","result","job","estimate","replaceProcess","updateTitle","serviceInfo","deleteService","isMapServiceSupported","viewService","createServiceFromScript","serviceCreated","getServiceTypeField","getEnabledField","getConfigField","service","toggleEnabled","FilePanel","JobPanel","CustomProcessPanel","ServicePanel","Tabs","Tab","showJobs","showServices","showCustomProcesses","showFiles","tab","active","logViewerIcons","icon","fullScreen","valueTitle","valueText","imageViewer","fullscreenToggled","fullSize","resize","getPixelValue","resetPixelValue","imageLoaded","img","context","showImage","showImageBlob","logs","Logs","isJob","isService","logIterator","onJobStatusUpdated","startWatcher","stopWatcher","DataViewer","ImageViewer","LogViewer","MapViewer","tabCounter","mapActive","collection","showWebService","removeWebService","showMapViewer","showSyncResults","showJobResults","faIcon","resource","uniqueTitle","makeTitle","OpenEO","Editor","Logo","Viewer","UserMenu","UserWorkspace","Splitpanes","Pane","resizeListener","userInfoUpdater","supportsJobUpdate","supportsServiceUpdate","supportsUserProcessUpdate","saveSupported","validateSupported","errors","showDataForm"],"mappings":"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,SAAUC,GAAW,OAAOzB,EAAOU,YAAce,GAAW,iBAAmBlO,EAAImO,iBAAiB,eAAiBnO,EAAIoO,mBAAmB,IAAI,MACx3GvR,EAAkB,G,oFC2DP,GACfyE,oBACAxE,gBACAyE,YACA8M,0BACAC,wBACA9M,yBAEAzE,OACAC,UACAM,UACAL,aACAG,YAEAqE,OACAxE,YACAG,kBAEA0P,QACA7P,YACAG,cAEA0Q,cACA7Q,YACAG,cAEAqQ,sBACAxQ,aACAG,YAEAsB,OACAzB,aAEAsR,iBAEA3M,aACA,iDACA,mDACA,0CACA2K,SACA,8DAGA/O,OACA,OACAuD,WACAI,WACAgM,eACAP,gBACA4B,aACAhB,kBAGAzP,OACA0D,OACAgN,aACAC,WACA,0EACA,IACA,uBACA,uCACA3I,mCAEA,kCACA,SACAjD,yBAPA,QASA,8BAMA7E,YACA,iDACAsE,UAEA,+FACAd,qBAEA,uBAEAsM,uBACAjL,4BAEAqL,sBACA,6EAEAC,oBACA,sBACA,uBAEAT,aACAgB,oBAEAjB,UACA,4DACA,MACA,oBAEA,OADA,sCACA,mBAIA,2BACA,iBACA,8BACA,gCACA,qBAWA,OAVAkB,mBACA,IACA,wCACA,4BACA,SACA9L,sDAGA8L,iEACAA,wBACA,sBAIAC,yBACA,OACApN,QACAH,OACAwN,6IACAnT,aACAoT,QACA9R,cACA+R,kBAEA5R,eAGA6R,4DACA,OACAxN,QACAH,OACAwN,kHACAnT,QACAkP,WACAkE,QACA9R,cACAiS,wBAIAC,oBACA,OACA1N,QACAH,gBACA3F,iBACAmT,iKACAjE,YACAkE,QACA9R,gBAEAG,aAGAgS,mBACA,OACA3N,QACAH,eACA3F,sBACAmT,+GACAO,qBACAxE,YACAkE,YAGAO,wBACA,OACA7N,QACAH,oBACA3F,qBACAmT,wGACAjE,YACAkE,QACA9R,gBAEAG,aAGAmS,sBACA,OACA9N,QACAH,kBACA3F,mBACAmT,qJACAjE,YACAkE,QACA9R,gBAEAG,aAGAoS,4CACA,wCACA,OACA/N,QACAH,OACA3F,QACAmT,mDACAC,QACA,CACArQ,yBACAzB,cACAiS,WAEA,CACAxQ,4BACAzB,aACAwS,WACAC,OACAzS,cACAiS,eAMAnC,eACAnH,0BACA,8CACA,OACA,6BACA,CACAnE,gBACAH,eACAwN,4FACAnT,gBACAkP,YACAkE,QACA9R,gBAGA,2CACA,CACAwE,mBACAH,kBACA3F,mBACAkP,YACAkE,QACA9R,aACAyS,OACAzS,iBAIA,0CACA,sCACA,CACAtB,mBACAmT,qFACAa,SAEA,8FACA,0EACA,CACAlO,mBACAH,kBACAwN,8QACAnT,eACAkP,YACAkE,QACA9R,cACA2S,sBACA3S,cACAC,UACA,WAEA2S,YACAC,SACApR,sBACAzB,eAEA6R,aACApQ,oBACAzB,cACAiS,sBAEAa,MACArR,yBACAzB,eACA+S,MACA,IACA,IACA,UAOA,CACAvO,iBACAH,gBACA3F,iBACAmT,gIACAjE,YACAkE,QACA9R,aACAyS,OACAzS,cACAC,UACA,aAEA2S,YACAnR,OACAA,cACAzB,eAEAyB,OACAA,oBACAzB,cACAiS,sBAEA7E,WACA3L,kBACAzB,cACAG,YAEA6S,SACAvR,0BAMA,CACA+C,cACAH,aACA3F,cACAmT,4EACAjE,YACAkE,QACA9R,aACAyS,OACAzS,cACAC,UACA,OACA,OAEA2S,YACAK,MACAxR,YACAzB,eAEAkT,KACAzR,iBACAoQ,2HACA7R,cACAG,iBAEAsB,OACAA,cACAzB,eAEAA,MACAyB,mBACAoQ,kHACA7R,oBAOA,oDACA,uIACA,8DACAmT,WACAtB,kCACAC,0BAIA,mCACA,wBACA,SACA/R,MACAqT,WACAvB,eACAwB,cACAC,gBACAC,cACAC,YACAC,SACAC,kBAGA,eACA,iCACA,KAGA,kBAGA3D,eACA,OACA,oBACA,2BACA,wBACA,uBACA,4BACA,0BACA,uBAEA,qDACA,iDACA,uCAIAgB,2CACA,OACA,0BACA,wCACA,kCACA,gCACA,0CACA,sCACA,+BAEA,iCAEAd,sBACA,+DACA0D,4EACA,IACAA,UACA,OACAhL,WAEA,GACAiL,uBAEA,6CACA,SACA/N,2BAGAgO,6BACA,mCACA,qBACA,+CACA,wBACAC,4EACAhL,YACAgL,MACA,EACA,KACAvT,IACAkH,iBAAA2F,cACA,kBAIA4D,2DACA,OACAvP,QACAmJ,aACArK,OACAF,WACA0T,sBACAlE,UAEA,KACA,wBACAmE,UAEA,6CAEApQ,eACA,iEACA,GACA,cAGAqQ,QACA,mBACA,0BAEA,mBAEArO,+BACA,IACA,kDACA,kBACA,4BACAE,QAEA,2DACA,SACAD,2BAGA,0BACA,uCACA6N,iBACA,CACAO,aCvjBsV,I,yBCQlVnR,EAAY,eACd,EACAnD,EACAC,GACA,EACA,KACA,KACA,MAIa,OAAAkD,E,sECnBf,W,oCCAA,W,oCCAA,W,yCCAA,IAAInD,EAAS,WAAa,IAAIoD,EAAI9E,KAAS+E,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACQ,MAAM,CAAC,GAAKX,EAAIhD,OACtHH,EAAkB,G,4MCyBP,GACfyE,iBACAxE,gBACAC,OACAoU,SACAlU,WACAG,kBAEAgU,SACAnU,YACAG,mBAGAI,OACA,OACA6T,oBACAC,OACAC,aACAC,UACAC,YAEAC,gBAGAzT,SACAsB,YACA,yDAGA,GAFA,mBAEA,EACA,2BACA,6BACA,iDAIA,gCACA,iDAGA,2BACAR,0CACAA,6CAEA,wCACA,0EACA,uEAIA4S,sBACA,4DACA,cACAjT,eACAkT,0BACApT,mBACAqT,UACA,+BAEA3S,uBACA4S,aAGA,qBACA,2CAKA,wBACA,6BACA,UACA,uBACA,MACA,iBACA,wBACA,MACA,QACAhP,4EAIAiP,qBACA,8BACA,cACA,4BACA,8BACA,yCAEA,yBACA,kCACA,sBAEA,0BACA,qCACA,yBAIA,2CACA,wBACA,qBACA,wBAIAC,iBACAC,sBAEA,qBAEAA,6CACAA,qDACAA,qDAGAC,sBACA,8BACA,GACA,yBAIAC,mBACA,sCACA,eACA,mBACA,SAGA,aAGAC,6BACA,kBACApV,KACA0B,mBACAF,mBACA6T,4DACAC,4BAIA,OADA,sBACA,GAIA,uBACA,uCACA,GACAxP,4DAGA,IAaA,EAbA,GACA9F,QACAqV,WACA3T,qBAWA,OAPA,iCACA,2CACA,0BAKA,qBACA,UACAuT,yBACA,MACA,WACA,SACA,kCACAlT,wBAEA,wCACAA,6BAEAkT,uDACA,MACA,QAEA,YADAnP,0EAIAmP,yBAGA,IACA,oDACA,8EACA,cACAvT,eACAC,oBACAH,mBACAqT,UACA,+BAEA3S,uBACA4S,aAIA,eAEA,wBACAhW,UAEAA,gBAEAmW,sBAEA,0CACA,SACAzM,iBAIA+M,kBACA,6BACA,iCACA,oBACA,SAEA,iDACA,SAGA,eAFA,IAKA,iDAGA,GAFA,+BAEA,8BACA,qBACAF,qCACAA,gDACA,oCAAAG,sBACA,iBACA,4CAGA,mCACA,OACA,OACA,OACA,OACA,+BACA,aACA,gBACA,wBACAP,QACAQ,wBAEA,IACAC,+BAGA,6BACA,aACA,qBACA,4BACA,UACAC,OAEA,UACAC,KAGA,oBACAlO,8BAEAlG,gBACA,kBACAE,QACAF,iCACAG,sBAEAkU,UAGA,SAOA,MANA,0BACAxW,uBACAyW,iBACAH,UACAC,YAGA,wCACA,6BAGA,GACAvR,uBAEA0R,yBACA,IACA,wCACAvU,oBACAwU,SAEA,6DACAC,iBACAA,iBACA,SACAzN,eAEAuN,QACA,SAEA,mCAEA,yBACA1W,gCACAqC,oEACAwU,iBAEA,yBAGA,kBACAlW,QACA0B,QACAK,WAmBA,OAjBAoU,2BACA,uCAEA,qEAGA,sBAEA,eACA,qCACA,gBACA,sCACA,sBAKA,GAGAC,8BACA,8BAGA,kHACA,+BACA,cACA1U,QACAF,0CACA6T,SAEA1T,sBAEA,cACA3B,QACA0B,QACAK,QACAkT,KAIA,OADA,sBACA,KC3YmV,I,wBCQ/UlS,EAAY,eACd,EACAnD,EACAC,GACA,EACA,KACA,KACA,MAIa,aAAAkD,E,kECnBf,W,gFCAA,W,yDCAA,W,6ICIA,MAAMsT,EAAW,CAChB,WACA,YACA,QACA,UACA,QACA,OACA,OACA,QACA,OACA,QACA,QACA,WACA,WACA,UACA,SACA,KACA,SACA,OACA,OACA,OACA,SACA,UACA,QACA,QACA,UACA,QACA,MAC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IACf9C,cACAxE,gBACAyE,YACA4b,iBACAD,kBACAgC,kBACAC,cACAC,aACAC,yBAEArhB,UACA,wCACA,wCAEA,mDACA,kDACA,kDACA,sCACA,sDAEA,iEAEAR,OACA,OACA8hB,cACAC,aACA7B,gBACA,SACA,UACA,cAIA9b,aACA,iCAEA3D,YACA,0CACA,+BACA,uBACA,IACAuhB,mCACA,SAEA,YADA1c,2DAIA,2BACA,uCAEA2c,kBACA,qBACA,wCAEAC,oBACA,4CAEAC,gBACA,sCAEAC,mBACA,wCACA,sBAEA,yBAEAC,oBACA,uBACA,kBACA,+CAGAjG,gCACA,uDACA,uBACAlb,EAAAohB,EAAAC,EAAA,WACAvC,kBACAA,oBAGA,gBACA,4DACA,MACA,OAEA,oBACA,qCACA7O,mBACA,uDACA,IACA,uCACA,8BACA,SACA7L,0EAIAzD,UACA,8DACAme,wBAEA,8BACAA,YAGAle,UACA,8DACAke,wBAEA,8BACAA,YAGAwC,eACA,2BAKA,qBACA,gCALA,qBACA,IAOAC,oBACA,SAGA,EACA,oBAGA,EANA,qBASA,2BACA,SACA,wEACAziB,cACAA,cAEA,mBACAA,cACAA,UAGAsF,mDAGA,8EACAA,uDAGA,IACA,yBACAtF,cACAA,0BACA,UAEA,eACA,gBACA,gBACA,iBACA,gBACA,0EACA,MACA,uBACA,iBACA,eACA,4EACA,MACA,iBACA,gDACA,qBACA,2EACA,MAGA,QACA,2BACA0iB,gFACA,MAEA,SACA,IACA,kDACA,mCACA,2BACAA,yEACA,OAEA,SACA1a,iBAGA1C,kGC/NgV,MCQ5U,I,UAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,OAIa,M,yECsCA,IACfxB,WACAxE,gBACAyE,YACA+M,yBACA6R,qBACAC,aACAC,UACAC,WACAC,gBACAC,mBACAC,cAEAjjB,OACA,OACAkjB,oBACAC,uBAGA/e,aACA,qDACA,uEACA,wDACA,0BAAAgf,wCACA,8BAAAC,4CACA,mCAAAC,6CACA1K,eACA,wEAEA2K,gBACA,6BACA,0DACA,kEACA,2EAGAlK,aACA,oCAEAmK,oBACA,yCAEA9K,iBACA,4BACA,WAGA,YAGAC,iBACA,4BACA,QAGA,SAIA,gBACA,8CACA,4CACA,oCAEA,uCACA9U,sDACA,uBACA,gGAEA,8BAEA,wBACA,oBACA,0DACA,mCAIAmC,gBACA,4BACAnC,yDAEA,6BACA+C,qCAGAnG,YACA,0CACA,+CACA,iFAEAgY,WACA,8BAGAiB,QACA,6BAGAT,gBACA,OACA5F,wBAEA,kDAGAiG,cACA,uDAGA,mBACA,0CAGA,wBACA,2BACA,8DAEA,oBACA,kDAEA,IACA,0DACA,YACAmK,8BACA,wDAGAne,uCAEA,SACAA,iDAIAuT,gBACA,mBACA,UACA,uBAIAtJ,eACA,oBAGAlK,iBACA,oCAGAmT,iBACA,0CAGAD,WACA,6BAGAmL,gCACA,4BACA,KACA,KACA,eACA,WAGArZ,sCACArK,mBAGA,OACAkB,QACAmJ,aACArK,OACAF,YAEA,KACA,wBACA2T,UAEA,wBACAA,YAEA,+CChP6U,MCQzU,I,UAAY,eACd,GACArU,EACAC,GACA,EACA,KACA,KACA,OAIa,gB,2CCnBf","file":"js/chunk-4df92a2c.3e279296.js","sourcesContent":["import { Control } from 'ol/control.js';\n\nexport default class Progress {\n\n\tconstructor() {\n\t\tthis.createHtml();\n\t\tthis.loading = 0;\n\t\tthis.loaded = 0;\n\t}\n\n\taddLoading() {\n\t\tthis.loading++;\n\t\tthis.update();\n\t};\n\n\taddLoaded() {\n\t\tthis.loaded++;\n\t\tthis.update();\n\t}\n\n\tupdate() {\n\t\tvar percent = (this.loaded / this.loading * 100).toFixed(1) + '%';\n\t\n\t\tthis.label.innerText = \"Loading Tiles (\" + percent + \")\";\n\t\tthis.progressBarInner.style.width = percent;\n\n\t\tif (this.loading === this.loaded) {\n\t\t\tthis.loading = 0;\n\t\t\tthis.loaded = 0;\n\t\t}\n\n\t\tthis.el.style.opacity = this.show() ? 1 : 0;\n\t}\n\n\tshow() {\n\t\treturn (this.loading > 0 && this.loaded <= this.loading);\n\t}\n\n\tcreateHtml() {\n\t\tthis.el = document.createElement('div');\n\t\tthis.el.className = 'ol-unselectable ol-progress-control';\n\t\tthis.progressBar = document.createElement('div');\n\t\tthis.progressBar.className = 'progress-bar';\n\t\tthis.progressBarInner = document.createElement('div');\n\t\tthis.progressBarInner.className = 'progress-bar-inner';\n\t\tthis.progressBar.appendChild(this.progressBarInner);\n\t\tthis.label = document.createElement('div');\n\t\tthis.label.className = 'progress-label';\n\t\tthis.el.appendChild(this.progressBar);\n\t\tthis.el.appendChild(this.label);\n\t}\n\t\n\tgetControl() {\n\t\tvar c = new Control({\n\t\t\telement: this.el\n\t\t});\n\t\treturn c;\n\t}\n\n}","<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport Utils from '../utils.js';\n\nimport 'ol/ol.css';\nimport { defaults as defaultControls, FullScreen, ScaleLine } from 'ol/control';\nimport { isEmpty as extentIsEmpty } from 'ol/extent';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport { fromLonLat } from 'ol/proj';\nimport TileLayer from 'ol/layer/Tile';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport XYZ from 'ol/source/XYZ';\n\nimport 'ol-ext/control/LayerSwitcher.css';\nimport LayerSwitcher from 'ol-ext/control/LayerSwitcher';\n\nimport Progress from './openlayers/progress';\n\nexport default {\n\tmixins: [EventBusMixin],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcenter: { // WGS84: lat, lon\n\t\t\ttype: Array,\n\t\t\tdefault: () => [0,0]\n\t\t},\n\t\tzoom: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1\n\t\t},\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tremovableLayers: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmap: null,\n\t\t\tbaseLayers: [],\n\t\t\tbasemap: null,\n\t\t\tprogress: null,\n\t\t\tfitOptions: {\n\t\t\t\tpadding: [30,30,30,30]\n\t\t\t}\n\t\t};\n\t},\n\twatch: {\n\t\tshow() {\n\t\t\tthis.showMap();\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.showMap();\n\t},\n\tmethods: {\n\t\tshowMap() {\n\t\t\tif (this.show) {\n\t\t\t\tthis.$nextTick(() => this.renderMap());\n\t\t\t}\n\t\t},\n\t\tcreateMap(showLayerSwitcher = false, projection = 'EPSG:3857') {\n\t\t\tif (this.map !== null) {\n\t\t\t\tthis.map.updateSize();\n\t\t\t\tthis.map.render();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.progress = new Progress();\n\t\t\tvar customControls = [\n\t\t\t\tnew FullScreen(),\n\t\t\t\tnew ScaleLine(),\n\t\t\t\tthis.progress.getControl()\n\t\t\t];\n\t\t\tif (showLayerSwitcher) {\n\t\t\t\tcustomControls.push(new LayerSwitcher({trash: this.removableLayers}));\n\t\t\t}\n\t\t\tlet basemapOptions = {\n\t\t\t\topaque: true,\n\t\t\t\tattributionsCollapsible: false\n\t\t\t};\n\t\t\tthis.baseLayers = [];\n\t\t\tif (Array.isArray(this.$config.basemaps)) {\n\t\t\t\tlet hasDefault = false;\n\t\t\t\tfor(let opts of this.$config.basemaps) {\n\t\t\t\t\tlet basemap = new XYZ(Object.assign({}, basemapOptions, opts));\n\t\t\t\t\tlet baselayer = new TileLayer({\n\t\t\t\t\t\tsource: this.trackTileProgress(basemap),\n\t\t\t\t\t\tbaseLayer: true,\n\t\t\t\t\t\ttitle: opts.title,\n\t\t\t\t\t\tnoSwitcherDelete: true,\n\t\t\t\t\t\tvisible: !hasDefault\n\t\t\t\t\t});\n\t\t\t\t\tthis.baseLayers.push(baselayer);\n\t\t\t\t\thasDefault = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet center = [this.center[1], this.center[0]];\n\t\t\tvar mapOptions = {\n\t\t\t\ttarget: this.id,\n\t\t\t\tlayers: this.baseLayers,\n\t\t\t\tview: new View({\n\t\t\t\t\tcenter: projection === 'EPSG:3857' ? fromLonLat(center) : center,\n\t\t\t\t\tzoom: this.zoom,\n\t\t\t\t\tshowFullExtent: true,\n\t\t\t\t\tprojection\n\t\t\t\t})\n\t\t\t};\n\t\t\tif (!this.editable) {\n\t\t\t\tmapOptions.interactions = [];\n\t\t\t\tmapOptions.controls = customControls;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmapOptions.controls = defaultControls().extend(customControls);\n\t\t\t}\n\t\t\tthis.map = new Map(mapOptions);\n\n\t\t\tthis.listen('windowResized', this.updateMapSize);\n\t\t},\n\n\t\tfromLonLat(coords) {\n\t\t\tif (this.map && this.map.getView().getProjection().getCode() === 'EPSG:3857') {\n\t\t\t\treturn fromLonLat(coords);\n\t\t\t}\n\t\t\treturn coords;\n\t\t},\n\n\t\tonShow() {\n\t\t\tthis.listen('windowResized', this.updateMapSize);\n\t\t},\n\t\tonHide() {\n\t\t\tthis.unlisten('windowResized');\n\t\t},\n\n\t\t// To be overridden by implementing components.\n\t\trenderMap() {\n\t\t\tthis.createMap();\n\t\t},\n\n\t\tasync updateMapSize() {\n\t\t\tif (this.map) {\n\t\t\t\tawait this.$nextTick();\n\t\t\t\tthis.map.updateSize();\n\t\t\t}\n\t\t},\n\n\t\tgetVisibleLayers() {\n\t\t\tlet shownLayers = [];\n\t\t\tlet layers = this.map.getLayers().getArray();\n\t\t\tfor(let layer of layers) {\n\t\t\t\tif (layer.get('userLayer') && layer.getVisible()) {\n\t\t\t\t\tshownLayers.push(layer);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn shownLayers;\n\t\t},\n\n\t\taddGeoJson(geojson) {\n\t\t\tvar sourceOpts = {};\n\t\t\tif (Utils.detectGeoJson(geojson)) {\n\t\t\t\tsourceOpts.features = (new GeoJSON()).readFeatures(\n\t\t\t\t\tgeojson,\n\t\t\t\t\t{\n\t\t\t\t\t\tfeatureProjection: this.map.getView().getProjection()\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\tvar source = new VectorSource(sourceOpts);\n\t\t\tvar layer = new VectorLayer({\n\t\t\t\ttitle: \"GeoJSON\",\n\t\t\t\tsource: source\n\t\t\t});\n\t\t\tthis.map.addLayer(layer);\n\t\t\tvar extent = source.getExtent();\n\t\t\tif (!extentIsEmpty(extent)) {\n\t\t\t\tthis.map.getView().fit(extent, this.fitOptions);\n\t\t\t}\n\t\t\treturn layer;\n\t\t},\n\n\t\ttrackTileProgress(source) {\n\t\t\tsource.on('tileloadstart', () => {\n\t\t\t\tthis.progress.addLoading();\n\t\t\t});\n\t\t\tsource.on('tileloadend', () => {\n\t\t\t\tthis.progress.addLoaded();\n\t\t\t});\n\t\t\tsource.on('tileloaderror', () => {\n\t\t\t\tthis.progress.addLoaded();\n\t\t\t});\n\t\t\treturn source;\n\t\t}\n\n\t}\n}\n</script>","var render, staticRenderFns\nimport script from \"./MapMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./MapMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapMixin.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"textEditor\",class:_vm.languageString},[_c('div',{staticClass:\"sourceHeader\"},[(_vm.title)?_c('strong',[_vm._v(_vm._s(_vm.title))]):_vm._e(),_c('div',{staticClass:\"sourceToolbar\"},[_c('span',{staticClass:\"sepr\"},[(_vm.editable)?_c('button',{attrs:{\"type\":\"button\",\"title\":\"New script / Clear current script\"},on:{\"click\":_vm.confirmClear}},[_c('i',{staticClass:\"fas fa-file\"})]):_vm._e(),_vm._t(\"file-toolbar\")],2),(_vm.editable)?_c('span',{staticClass:\"sepr\"},[_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canUndo,\"title\":\"Revert last change\"},on:{\"click\":function($event){return _vm.editor.undo()}}},[_c('i',{staticClass:\"fas fa-undo-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canRedo,\"title\":\"Redo last reverted change\"},on:{\"click\":function($event){return _vm.editor.redo()}}},[_c('i',{staticClass:\"fas fa-redo-alt\"})]),_vm._t(\"edit-toolbar\")],2):_vm._e(),_c('FullscreenButton',{attrs:{\"element\":_vm.element}}),_vm._t(\"toolbar\")],2)]),_c('div',{staticClass:\"sourceCodeEditor\",attrs:{\"id\":_vm.id}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"textEditor\" :class=\"languageString\">\n\t\t<div class=\"sourceHeader\">\n\t\t\t<strong v-if=\"title\">{{ title }}</strong>\n\t\t\t<div class=\"sourceToolbar\">\n\t\t\t\t<span class=\"sepr\">\n\t\t\t\t\t<button type=\"button\" v-if=\"editable\" @click=\"confirmClear\" title=\"New script / Clear current script\"><i class=\"fas fa-file\"></i></button>\n\t\t\t\t\t<slot name=\"file-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"editor.undo()\" :disabled=\"!canUndo\" title=\"Revert last change\"><i class=\"fas fa-undo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"editor.redo()\" :disabled=\"!canRedo\" title=\"Redo last reverted change\"><i class=\"fas fa-redo-alt\"></i></button>\n\t\t\t\t\t<slot name=\"edit-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<FullscreenButton :element=\"element\" />\n\t\t\t\t<slot name=\"toolbar\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id=\"id\" class=\"sourceCodeEditor\"></div>\n\t</div>\n</template>\n\n<script>\nimport Utils from '../utils.js';\nimport FullscreenButton from './FullscreenButton.vue';\nimport { ProcessGraph } from '@openeo/js-processgraphs';\n\nimport CodeMirror from 'codemirror';\nimport 'codemirror/lib/codemirror.css';\n\nimport 'codemirror/mode/javascript/javascript.js';\nimport 'codemirror/mode/markdown/markdown.js';\nimport 'codemirror/mode/mathematica/mathematica.js';\nimport 'codemirror/mode/python/python.js';\nimport 'codemirror/mode/r/r.js';\n\nimport 'codemirror/addon/display/placeholder.js';\n\nimport 'codemirror/addon/edit/matchbrackets.js';\nimport 'codemirror/addon/edit/closebrackets.js';\n\nimport 'codemirror/addon/lint/lint.css';\nimport 'codemirror/addon/lint/lint.js';\nimport 'codemirror/addon/lint/json-lint.js'\nimport jsonlint from 'jsonlint-mod';\nwindow.jsonlint = jsonlint;\n\nexport default {\n\tname: 'TextEditor',\n\tcomponents: {\n\t\tFullscreenButton\n\t},\n\tprops: {\n\t\tid: String,\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tvalue: {\n\t\t\trequired: true\n\t\t},\n\t\tlanguage: {\n\t\t\ttype: String,\n\t\t\tdefault: null // json, r, python, markdown, processgraph or null\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapGetters(['processes']),\n\t\tlanguageString() {\n\t\t\treturn typeof this.language === 'string' ? this.language.toLowerCase() : '';\n\t\t},\n\t\teditorOptions() {\n\t\t\tlet options = {\n\t\t\t\tindentUnit: 2,\n\t\t\t\tlineNumbers: true,\n\t\t\t\tindentWithTabs: true,\n\t\t\t\tmatchBrackets: true,\n\t\t\t\tautoCloseBrackets: true,\n\t\t\t\treadOnly: !this.editable,\n\t\t\t\tplaceholder: this.placeholder\n\t\t\t};\n\t\t\tswitch(this.languageString) {\n\t\t\t\tcase 'r':\n\t\t\t\t\toptions.mode = 'text/x-rsrc';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'python':\n\t\t\t\t\toptions.mode = 'text/x-python';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'math':\n\t\t\t\t\toptions.mode = 'text/x-mathematica'; // Use mathematica mode until we have something better for openEO\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'markdown':\n\t\t\t\t\toptions.mode = 'text/x-markdown';\n\t\t\t\t\toptions.lineWrapping = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'javascript':\n\t\t\t\t\toptions.mode = 'text/javascript';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'json':\n\t\t\t\tcase 'processgraph':\n\t\t\t\t\toptions.mode = 'application/json';\n\t\t\t\t\toptions.gutters = ['CodeMirror-lint-markers'];\n\t\t\t\t\toptions.lint = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanUndo: false,\n\t\t\tcanRedo: false,\n\t\t\teditor: null,\n\t\t\temitValue: this.value,\n\t\t\telement: null\n\t\t}\n\t},\n\twatch: {\n\t\tasync value() {\n\t\t\tif (this.emitValue !== this.value) {\n\t\t\t\tthis.updateContent();\n\t\t\t\tthis.editor.clearHistory();\n\t\t\t}\n\t\t},\n\t\teditorOptions() {\n\t\t\tfor(var key in this.editorOptions) {\n\t\t\t\tthis.editor.setOption(key, this.editorOptions[key]);\n\t\t\t}\n\t\t\tthis.updateContent();\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.editor = CodeMirror(document.getElementById(this.id), this.editorOptions);\n\t\tthis.editor.setSize(null, \"100%\");\n\t\tif (this.languageString === 'processgraph') {\n\t\t\tthis.editor.on(\"change\", () => this.updateState());\n\t\t}\n\t\tthis.updateContent();\n\n\t\t// Listen for changes only after first initialization\n\t\tthis.editor.on('changes', (cm, evt) => {\n\t\t\ttry {\n\t\t\t\t// Don't commit external changes (i.e. coming from the value prop)\n\t\t\t\tif (Object.values(evt).filter(e => e.origin === 'setValue').length === 0) {\n\t\t\t\t\tthis.commit();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.$emit('error', error);\n\t\t\t}\n\t\t});\n\n\t\tthis.element = this.$el;\n\t},\n\tmethods: {\n\t\tconfirmClear() {\n\t\t\tvar confirmed = confirm(\"Do you really want to clear the existing code?\");\n\t\t\tif (confirmed) {\n\t\t\t\tthis.insert(\"\");\n\t\t\t\tthis.emit(null);\n\t\t\t}\n\t\t},\n\t\tupdateState() {\n\t\t\t// Don't lint empty values\n\t\t\tthis.editor.setOption(\"lint\", !!this.editor.getValue().trim());\n\t\t\t// Update history state\n\t\t\tlet history = this.editor.getDoc().historySize();\n\t\t\tthis.canUndo = history.undo > 0;\n\t\t\tthis.canRedo = history.redo > 0;\n\t\t\t// Refresh editor\n\t\t\tthis.editor.refresh();\n\t\t\t// Refresh element for fullscreen\n\t\t\tthis.element = this.$el;\n\t\t},\n\t\tcommit() {\n\t\t\tvar value = this.editor.getValue();\n\t\t\tswitch(this.languageString) {\n\t\t\t\tcase 'math':\n\t\t\t\t\treturn this.emit(value.replace(/[\\r\\n\\t]+/, ' ')); // Replace line breaks and tabs with simple spaces\n\t\t\t\tcase 'processgraph':\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tvar process = JSON.parse(value);\n\t\t\t\t\t\tif (Utils.size(process) > 0) {\n\t\t\t\t\t\t\tvar pg = new ProcessGraph(process, this.processes);\n\t\t\t\t\t\t\tpg.allowEmpty();\n\t\t\t\t\t\t\tpg.parse();\n\t\t\t\t\t\t\treturn this.emit(process);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this.emit(null);\n\t\t\t\tcase 'json':\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\treturn this.emit(JSON.parse(value));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn this.emit(null);\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn this.emit(value);\n\t\t\t}\n\t\t},\n\t\temit(value) {\n\t\t\tthis.emitValue = value;\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\tinsert(text, replace = true) {\n\t\t\tif (typeof text !== 'string') {\n\t\t\t\ttext = String(text);\n\t\t\t}\n\t\t\tif (replace) {\n\t\t\t\t// Only update if it has really changed\n\t\t\t\tconst cmValue = this.editor.getValue();\n\t\t\t\tif (text !== cmValue) {\n\t\t\t\t\tconst scrollInfo = this.editor.getScrollInfo();\n\t\t\t\t\tthis.editor.setValue(text);\n\t\t\t\t\tthis.editor.scrollTo(scrollInfo.left, scrollInfo.top)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.editor.replaceSelection(text);\n\t\t\t}\n\t\t},\n\t\tupdateContent() {\n\t\t\tif (this.value) {\n\t\t\t\tswitch(this.languageString) {\n\t\t\t\t\tcase 'processgraph':\n\t\t\t\t\t\tif (Utils.isObject(this.value)) {\n\t\t\t\t\t\t\tthis.insert(JSON.stringify(this.value, null, this.editorOptions.indentUnit));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.insert(\"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'json':\n\t\t\t\t\t\tthis.insert(JSON.stringify(this.value, null, this.editorOptions.indentUnit));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.insert(this.value);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.insert(\"\");\n\t\t\t}\n\t\t\tthis.editor.getDoc().clearHistory();\n\t\t\tthis.updateState();\n\t\t},\n\n\t\tinsertProcess(node) {\n\t\t\ttry {\n\t\t\t\tthis.insert(JSON.stringify(node, null, 2), false);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\n\t}\n}\n</script>\n\n<style scoped>\n.textEditor {\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder: 1px solid #ddd;\n}\n.sourceCodeEditor {\n\tflex-grow: 1;\n\theight: 100%;\n\toverflow: hidden;\n}\n</style>\n<style>\n.textEditor.math .cm-operator {\n\tmargin: 0 0.2em;\n}\n.textEditor.markdown .CodeMirror-wrap pre {\n    word-break: break-word;\n}\n.CodeMirror-placeholder {\n\topacity: 0.5;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextEditor.vue?vue&type=template&id=100002bb&scoped=true&\"\nimport script from \"./TextEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./TextEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextEditor.vue?vue&type=style&index=0&id=100002bb&scoped=true&lang=css&\"\nimport style1 from \"./TextEditor.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"100002bb\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=style&index=0&lang=css&\"","import DataTable from '@openeo/vue-components/components/DataTable.vue';\nimport Utils from '../utils.js';\n\nexport default (namespace, singular, plural, loadInitially = true) => {\n\treturn {\n\t\tcomponents: {\n\t\t\tDataTable\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcolumns: {},\n\t\t\t\tsyncTimer: null,\n\t\t\t\tlastSyncTime: null\n\t\t\t};\n\t\t},\n\t\tmounted() {\n\t\t\tif (loadInitially) {\n\t\t\t\tthis.updateData();\n\t\t\t}\n\t\t},\n\t\tbeforeDestroy() {\n\t\t\tthis.stopSyncTimer();\n\t\t},\n\t\tcomputed: {\n\t\t\t...Utils.mapState(namespace, {data: namespace}),\n\t\t\t...Utils.mapGetters(namespace, ['supportsList', 'supportsCreate', 'supportsRead', 'supportsUpdate', 'supportsDelete'])\n\t\t},\n\t\tmethods: {\n\t\t\t...Utils.mapActions(namespace, ['list', 'create', 'read', 'update', 'delete']),\n\t\t\tgetTable() { // To be overridden\n\t\t\t\treturn this.$refs && this.$refs.table ? this.$refs.table : null;\n\t\t\t},\n\t\t\tonShow() {\n\t\t\t\tthis.updateData();\n\t\t\t\tthis.startSyncTimer();\n\t\t\t},\n\t\t\tonHide() {\n\t\t\t\tthis.stopSyncTimer();\n\t\t\t},\n\t\t\tstartSyncTimer() {\n\t\t\t\tif (this.supportsList && this.syncTimer === null) {\n\t\t\t\t\tthis.syncTimer = setInterval(this.updateData, this.getSyncInterval());\n\t\t\t\t}\n\t\t\t},\n\t\t\tstopSyncTimer() {\n\t\t\t\tif (this.syncTimer !== null) {\n\t\t\t\t\tclearInterval(this.syncTimer);\n\t\t\t\t\tthis.syncTimer = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetSyncInterval() {\n\t\t\t\treturn this.$config.dataRefreshInterval*60*1000; // Refresh data every x minutes\n\t\t\t},\n\t\t\tasync refreshElement(obj, callback = null) {\n\t\t\t\tvar old = Object.assign({}, obj);\n\t\t\t\ttry {\n\t\t\t\t\tlet updated = await this.read({data: obj});\n\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\tcallback(updated, old);\n\t\t\t\t\t}\n\t\t\t\t} catch(error) {\n\t\t\t\t\tUtils.exception(this, error, \"Load \" + singular + \" error\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync updateData() {\n\t\t\t\tvar table = this.getTable();\n\t\t\t\tvar nextSyncTime = Date.now() - this.getSyncInterval();\n\t\t\t\tif (!table || this.lastSyncTime > nextSyncTime) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (!this.supportsList) {\n\t\t\t\t\ttable.setNoData(\"Sorry, listing stored \" + plural + \" is not supported by the server.\");\n\t\t\t\t}\n\t\t\t\telse if (!this.supportsCreate) {\n\t\t\t\t\ttable.setNoData(\"Sorry, this feature is not supported by the server.\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar isUpdate = this.data.length > 0;\n\t\t\t\t\tif (!isUpdate) {\n\t\t\t\t\t\ttable.setNoData(\"Loading \" + plural + \"...\");\n\t\t\t\t\t}\n\t\t\t\t\tthis.lastSyncTime = Date.now();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet data = await this.list();\n\t\t\t\t\t\tif(data.length == 0) {\n\t\t\t\t\t\t\ttable.setNoData(\"Add your first \" + singular + \" here...\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\tif (!isUpdate) {\n\t\t\t\t\t\t\tUtils.exception(this, error);\n\t\t\t\t\t\t\ttable.setNoData(\"Sorry, unable to load data from the server.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=style&index=0&id=100002bb&scoped=true&lang=css&\"","import { BaseProcess, ProcessGraph } from '@openeo/js-processgraphs';\nimport Utils from \"../utils\";\n\nclass ProcessImpl extends BaseProcess {\n\tconstructor(process, exporter) {\n\t\tsuper(process);\n\t\tthis.exporter = exporter;\n\t}\n\tasync execute(node) {\n\t\tawait this.exporter.generateFunction(node);\n\t}\n}\n\nexport default class Exporter extends ProcessGraph {\n\n\tconstructor(process, registry, connection) {\n\t\tsuper(Utils.isObject(process) ? process : {}, registry);\n\t\tthis.connection = connection;\n\t\tthis.indent = 0;\n\t\tthis.code = [];\n\t\tthis.fnCounter = 1;\n\t\tthis.allowEmpty();\n\t\tthis.fillUndefinedParameters();\n\t}\n\n\t// inherited from ProcessGraph\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new Exporter(process, this.processRegistry, this.getJsonSchemaValidator());\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tcopyProcessGraphInstanceProperties(pg) {\n\t\tpg = super.copyProcessGraphInstanceProperties(pg);\n\t\tpg.connection = this.connection;\n\t\treturn pg;\n\t}\n\n\tcreateProcessInstance(process) {\n\t\treturn new ProcessImpl(process, this);\n\t}\n\n\tisKeyword(keyword) {\n\t\treturn this.getKeywords().includes(keyword.toLowerCase());\n\t}\n\n\t// Methods to be implemented by sub-class\n\n\tgetKeywords() {\n\t\treturn [];\n\t}\n\n\tcomment(/*comment*/) {}\n\n\tgenerateImports() {}\n\n\tgenerateConnection() {}\n\n\tgenerateAuthentication() {}\n\n\tgenerateBuilder() {}\n\n\tgenerateMetadata(/*key, value*/) {}\n\n\tgenerateMissingParameter() {}\n\n\tasync generateFunction(/*node*/) {}\n\n\tgenerateFunctionParams(parameters) {\n\t\treturn parameters.map(p => {\n\t\t\tif (typeof p.default !== 'undefined') {\n\t\t\t\treturn `${p.name} = ${this.e(p.default)}`;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn p.name;\n\t\t\t}\n\t\t});\n\t}\n\n\tasync generateCallback(/*callback, parameters, variable*/) {}\n\n\tgenerateResult(/*resultNode, callback*/) {}\n\n\tmakeNull() {\n\t\treturn \"null\";\n\t}\n\tmakeBoolean(val) {\n\t\treturn val ? \"true\" : \"false\";\n\t}\n\tmakeArray(arr) {\n\t\treturn `[${arr.join(', ')}]`;\n\t}\n\tmakeObject(obj) {\n\t\tlet arr = Utils.mapObject(obj, (val, key) => `${this.makeString(key)}: ${val}`);\n\t\treturn `{${arr.join(', ')}}`;\n\t}\n\tmakeString(str) {\n\t\treturn JSON.stringify(str);\n\t}\n\tmakeNumber(num) {\n\t\treturn num;\n\t}\n\n\t// Helpers\n\n\te(value) {\n\t\tif (value === null) {\n\t\t\treturn this.makeNull();\n\t\t}\n\t\telse if (typeof value === 'boolean') {\n\t\t\treturn this.makeBoolean(value);\n\t\t}\n\t\telse if (typeof value === 'number') {\n\t\t\treturn this.makeNumber(value);\n\t\t}\n\t\telse if (typeof value === 'string') {\n\t\t\treturn this.makeString(value);\n\t\t}\n\t\telse if (Array.isArray(value)) {\n\t\t\treturn this.makeArray(value.map(val => this.e(val)));\n\t\t}\n\t\telse if (Utils.isObject(value)) {\n\t\t\treturn this.makeObject(Utils.mapObjectValues(value, val => this.e(val)));\n\t\t}\n\t\telse if (typeof value === 'function') {\n\t\t\treturn value();\n\t\t}\n\t\telse {\n\t\t\treturn this.makeNull();\n\t\t}\n\t}\n\n\tgenerateMetadata() {\n\t\tlet hasComment = false;\n\t\tfor(let key in this.process) {\n\t\t\tif (key === 'process_graph') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet val = this.process[key];\n\t\t\tif (Array.isArray(val) && val.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if (typeof val === 'string' && val.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if (typeof val === 'boolean' && !val) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!hasComment) {\n\t\t\t\tthis.newLine();\n\t\t\t\tthis.comment(`Set the metadata for the process`);\n\t\t\t\thasComment = true;\n\t\t\t}\n\t\t\tthis.generateMetadataEntry(key, val);\n\t\t}\n\t}\n\n\tasync resolveArguments(args, onExporter, filter) {\n\t\tlet newArgs = Array.isArray(args) ? [] : {};\n\t\tfor(let key in args) {\n\t\t\tlet value = args[key];\n\t\t\tif (filter && filter(key, value)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (Utils.isObject(value)) {\n\t\t\t\tif (value.from_node) {\n\t\t\t\t\tnewArgs[key] = () => this.var(value.from_node);\n\t\t\t\t\tcontinue; \n\t\t\t\t}\n\t\t\t\telse if (value.from_parameter) {\n\t\t\t\t\tnewArgs[key] = () => this.var(value.from_parameter);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\telse if (value instanceof Exporter) {\n\t\t\t\t\tlet fnName = await onExporter(key);\n\t\t\t\t\tnewArgs[key] = () => fnName;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewArgs[key] = await this.resolveArguments(value, onExporter, filter);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (Array.isArray(value)) {\n\t\t\t\tnewArgs[key] = await this.resolveArguments(value, onExporter, filter);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnewArgs[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn newArgs;\n\t}\n\n\tasync resolveCallback(node, key) {\n\t\tlet callback = node.getArgument(key);\n\t\tlet parameters = callback.getCallbackParameters();\n\t\tawait callback.execute(parameters);\n\t\tlet fnName = this.var(`${key}${this.fnCounter++}`, 'fn_');\n\t\tlet replacement = await this.generateCallback(callback, parameters, fnName);\n\t\treturn replacement ? replacement : fnName;\n\t}\n\n\tasync generateArguments(node, ordered = false, filter = null) {\n\t\tlet args = await this.resolveArguments(node.arguments, async key => await this.resolveCallback(node, key), filter);\n\t\tif (ordered) {\n\t\t\targs = this.orderArguments(node, args);\n\t\t}\n\t\treturn args;\n\t}\n\n\torderArguments(node, args) {\n\t\tlet process = node.getProcessGraph().getProcess(node);\n\t\tif (process && Array.isArray(process.parameters)) {\n\t\t\tlet orderedArgs = process.parameters.map(param => {\n\t\t\t\tif (typeof args[param.name] !== 'undefined') {\n\t\t\t\t\treturn args[param.name];\n\t\t\t\t}\n\t\t\t\telse if (!param.optional) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet definedValueFound = false;\n\t\t\tfor(let i = orderedArgs.length-1; i >= 0; i--) {\n\t\t\t\tif (typeof orderedArgs[i] === 'undefined') {\n\t\t\t\t\tif (definedValueFound) {\n\t\t\t\t\t\torderedArgs[i] = null;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\torderedArgs.pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdefinedValueFound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn orderedArgs;\n\t\t}\n\t}\n\n\tvar(id, prefix = \"datacube\") {\n\t\tid = String(id);\n\t\tif (this.isKeyword(id)) {\n\t\t\treturn `${id}_`;\n\t\t}\n\t\tif (!id.match(/^[a-z_]\\w*$/)) {\n\t\t\treturn `${prefix}${id}`;\n\t\t}\n\t\telse {\n\t\t\treturn id;\n\t\t}\n\t}\n\n\tgetTab() {\n\t\treturn `\\t`;\n\t}\n\n\taddCode(code, prefix = '') {\n\t\tif (typeof code !== 'string') {\n\t\t\treturn;\n\t\t}\n\t\tlet tabs = this.getTab().repeat(this.indent);\n\t\tlet lines = code.trim().split(/\\r\\n|\\r|\\n/g);\n\t\tfor(let line of lines) {\n\t\t\tthis.code.push(`${tabs}${prefix}${line}\\n`);\n\t\t}\n\t}\n\n\tnewLine(count = 1) {\n\t\tfor(let i = 0; i < count; i++) {\n\t\t\tthis.addCode('');\n\t\t}\n\t}\n\n\tgetServerUrl() {\n\t\treturn this.connection.getUrl();\n\t}\n\n\tasync toCode(callback = false) {\n\t\tthis.code = [];\n\t\tif (!callback) {\n\t\t\tthis.comment(`Import required packages`);\n\t\t\tthis.generateImports();\n\t\t\tthis.newLine();\n\t\t\tthis.comment(`Connect to the back-end`);\n\t\t\tthis.generateConnection();\n\t\t\tthis.generateAuthentication();\n\t\t\tthis.newLine();\n\t\t\tthis.generateBuilder();\n\t\t\tthis.generateMetadata();\n\t\t\tthis.newLine();\n\t\t}\n\t\tlet params = this.getProcessParameters();\n\t\tif (params.length > 0) {\n\t\t\tthis.comment('ToDo: Here you need to set values for the parameters');\n\t\t\tfor(let param of params) {\n\t\t\t\tthis.generateMissingParameter(param);\n\t\t\t}\n\t\t\tthis.newLine();\n\t\t}\n\t\tawait this.execute();\n\t\tif (!callback) {\n\t\t\tthis.newLine();\n\t\t\tthis.comment(`The process can be executed synchronously (see below), as batch job or as web service now`);\n\t\t}\n\t\tthis.generateResult(this.getResultNode(), callback);\n\t\treturn this.code.join('').trim();\n\t}\n\n\tasync execute() {\n\t\tawait this.validate();\n\t\tthis.reset();\n\t\tawait this.executeNodes(this.getStartNodes());\n\t\treturn this.getResultNode();\n\t}\n\n\tisMath() {\n\t\tif (typeof this._isMath === 'undefined') {\n\t\t\t// Determine whether the process is just math\n\t\t\tthis._isMath = this.processRegistry.isMath(this);\n\t\t}\n\t\treturn this._isMath;\n\t}\n\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IDE.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JobPanel.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"visualEditor\",staticClass:\"visualEditor\"},[_c('div',{staticClass:\"sourceHeader\"},[(_vm.title)?_c('strong',[_vm._v(_vm._s(_vm.title))]):_vm._e(),_c('div',{staticClass:\"sourceToolbar\"},[(_vm.editable)?_c('span',{staticClass:\"sepr\"},[_c('button',{attrs:{\"type\":\"button\",\"title\":\"New script / Clear current script\"},on:{\"click\":_vm.confirmClear}},[_c('i',{staticClass:\"fas fa-file\"})]),_vm._t(\"file-toolbar\")],2):_vm._e(),(_vm.editable)?_c('span',{staticClass:\"sepr\"},[_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canUndo,\"title\":\"Revert last change\"},on:{\"click\":function($event){return _vm.$refs.blocks.undo()}}},[_c('i',{staticClass:\"fas fa-undo-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canRedo,\"title\":\"Redo last reverted change\"},on:{\"click\":function($event){return _vm.$refs.blocks.redo()}}},[_c('i',{staticClass:\"fas fa-redo-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.hasSelection,\"title\":\"Delete selected elements\"},on:{\"click\":function($event){return _vm.$refs.blocks.deleteSelected()}}},[_c('i',{staticClass:\"fas fa-trash\"})])]):_vm._e(),(_vm.editable)?_c('span',{staticClass:\"sepr\"},[(!_vm.parent)?_c('button',{attrs:{\"type\":\"button\",\"title\":\"Edit Process Metadata\"},on:{\"click\":function () { return _vm.editProcess(_vm.value); }}},[_c('i',{staticClass:\"fas fa-edit\"})]):_vm._e(),_c('button',{attrs:{\"type\":\"button\",\"title\":\"Add Parameter\"},on:{\"click\":_vm.addParameter}},[_c('i',{staticClass:\"fas fa-parking\"})]),(_vm.supportsMath)?_c('button',{class:{highlightFormula: _vm.isMath},attrs:{\"type\":\"button\",\"title\":\"Insert/Edit formula\"},on:{\"click\":_vm.showExpressionModal}},[_c('i',{staticClass:\"fas fa-square-root-alt\"})]):_vm._e()]):_vm._e(),_c('button',{class:{compactMode: _vm.compactMode},attrs:{\"type\":\"button\",\"title\":\"Compact Mode\"},on:{\"click\":function($event){return _vm.$refs.blocks.toggleCompact()}}},[_c('i',{staticClass:\"fas fa-compress-arrows-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"title\":\"Scale to perfect size\"},on:{\"click\":function($event){return _vm.$refs.blocks.perfectScale()}}},[_c('i',{staticClass:\"fas fa-arrows-alt\"})]),_c('FullscreenButton',{attrs:{\"element\":function () { return this$1.$refs.visualEditor; }},on:{\"changed\":function (enabled) {this$1.$refs.blocks.perfectScale(); _vm.isFullScreen = enabled}}}),_vm._t(\"toolbar\")],2)]),_c('div',{staticClass:\"editorSplitter\"},[((_vm.showDiscoveryToolbar || _vm.isFullScreen) && _vm.editable)?_c('DiscoveryToolbar',{staticClass:\"discoveryToolbar\",attrs:{\"onAddProcess\":_vm.insertProcess}}):_vm._e(),_c('div',{staticClass:\"graphBuilder\",on:{\"drop\":_vm.onDrop,\"dragover\":_vm.allowDrop}},[_c('ModelBuilder',{ref:\"blocks\",attrs:{\"editable\":_vm.editable,\"id\":_vm.id,\"processes\":_vm.processes,\"collections\":_vm.collections,\"parent\":_vm.parent,\"parentSchema\":_vm.parentSchema,\"value\":_vm.value},on:{\"input\":_vm.commit,\"error\":_vm.errorHandler,\"showProcess\":function (id, namespace) { return _vm.emit('showProcess', {id: id, namespace: namespace}); },\"showCollection\":function (id) { return _vm.emit('showCollection', id); },\"showParameter\":function (param) { return _vm.emit('showProcessParameter', param); },\"editParameter\":_vm.editParameter,\"editArguments\":_vm.openArgumentEditor,\"compactMode\":function (compact) { return this$1.compactMode = compact; },\"selectionChanged\":_vm.selectionChanged,\"historyChanged\":_vm.historyChanged}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"visualEditor\" ref=\"visualEditor\">\n\t\t<div class=\"sourceHeader\">\n\t\t\t<strong v-if=\"title\">{{ title }}</strong>\n\t\t\t<div class=\"sourceToolbar\">\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"confirmClear\" title=\"New script / Clear current script\"><i class=\"fas fa-file\"></i></button>\n\t\t\t\t\t<slot name=\"file-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.undo()\" :disabled=\"!canUndo\" title=\"Revert last change\"><i class=\"fas fa-undo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.redo()\" :disabled=\"!canRedo\" title=\"Redo last reverted change\"><i class=\"fas fa-redo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.deleteSelected()\" :disabled=\"!hasSelection\" title=\"Delete selected elements\"><i class=\"fas fa-trash\"></i></button>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" v-if=\"!parent\" @click=\"() => editProcess(value)\" title=\"Edit Process Metadata\"><i class=\"fas fa-edit\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"addParameter\" title=\"Add Parameter\"><i class=\"fas fa-parking\"></i></button>\n\t\t\t\t\t<button type=\"button\" v-if=\"supportsMath\" :class=\"{highlightFormula: isMath}\" @click=\"showExpressionModal\" title=\"Insert/Edit formula\"><i class=\"fas fa-square-root-alt\"></i></button>\n\t\t\t\t</span>\n\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.toggleCompact()\" :class=\"{compactMode: compactMode}\" title=\"Compact Mode\"><i class=\"fas fa-compress-arrows-alt\"></i></button>\n\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.perfectScale()\" title=\"Scale to perfect size\"><i class=\"fas fa-arrows-alt\"></i></button>\n\t\t\t\t<FullscreenButton :element=\"() => this.$refs.visualEditor\" @changed=\"enabled => {this.$refs.blocks.perfectScale(); isFullScreen = enabled}\" />\n\t\t\t\t<slot name=\"toolbar\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"editorSplitter\">\n\t\t\t<DiscoveryToolbar v-if=\"(showDiscoveryToolbar || isFullScreen) && editable\" class=\"discoveryToolbar\" :onAddProcess=\"insertProcess\" />\n\t\t\t<div class=\"graphBuilder\" @drop=\"onDrop\" @dragover=\"allowDrop\">\n\t\t\t\t<ModelBuilder\n\t\t\t\t\tref=\"blocks\"\n\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t:id=\"id\"\n\t\t\t\t\t:processes=\"processes\"\n\t\t\t\t\t:collections=\"collections\"\n\t\t\t\t\t:parent=\"parent\"\n\t\t\t\t\t:parentSchema=\"parentSchema\"\n\t\t\t\t\t:value=\"value\"\n\t\t\t\t\t@input=\"commit\"\n\t\t\t\t\t@error=\"errorHandler\"\n\t\t\t\t\t@showProcess=\"(id, namespace) => emit('showProcess', {id, namespace})\"\n\t\t\t\t\t@showCollection=\"id => emit('showCollection', id)\"\n\t\t\t\t\t@showParameter=\"param => emit('showProcessParameter', param)\"\n\t\t\t\t\t@editParameter=\"editParameter\"\n\t\t\t\t\t@editArguments=\"openArgumentEditor\"\n\t\t\t\t\t@compactMode=\"compact => this.compactMode = compact\"\n\t\t\t\t\t@selectionChanged=\"selectionChanged\"\n\t\t\t\t\t@historyChanged=\"historyChanged\"\n\t\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ModelBuilder from '@openeo/vue-components/components/ModelBuilder.vue';\nimport Utils from '../utils.js';\nimport DiscoveryToolbar from './DiscoveryToolbar.vue';\nimport EventBusMixin from './EventBusMixin.vue';\nimport FullscreenButton from './FullscreenButton.vue';\nimport { ProcessParameter } from '@openeo/js-commons';\nimport JavaScript from '../export/javascript';\n\nexport default {\n\tname: 'VisualEditor',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tModelBuilder,\n\t\tDiscoveryToolbar,\n\t\tFullscreenButton\n\t},\n\tprops: {\n\t\tid: String,\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => null\n\t\t},\n\t\tparent: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tparentSchema: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tshowDiscoveryToolbar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String\n\t\t},\n\t\tdefaultValue: {}\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection', 'collections']),\n\t\t...Utils.mapGetters(['processes', 'supportsMath']),\n\t\t...Utils.mapState('editor', ['initialNode']),\n\t\tisMath() {\n\t\t\treturn (this.supportsMath && this.processes.isMath(this.value));\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanUndo: false,\n\t\t\tcanRedo: false,\n\t\t\tcompactMode: false,\n\t\t\thasSelection: false,\n\t\t\tformula: null,\n\t\t\tisFullScreen: false\n\t\t};\n\t},\n\twatch: {\n\t\tvalue: {\n\t\t\timmediate: true,\n\t\t\thandler(value) {\n\t\t\t\tif (this.initialNode && Utils.isObject(value) && Utils.isObject(value.process_graph)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet node = this.initialNode;\n\t\t\t\t\t\tif (node == \"1\" && Utils.size(value.process_graph)) {\n\t\t\t\t\t\t\tnode = Object.keys(value.process_graph)[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.openArgumentEditorForNode(node);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tUtils.exception(this, error);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.setInitialNode(null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['setInitialNode']),\n\t\tcommit(value) {\n\t\t\t// Fix #115: Return the default value/null if no nodes are given\n\t\t\tif (typeof this.defaultValue !== 'undefined' && Utils.isObject(value) && Utils.size(value.process_graph) === 0) {\n\t\t\t\tvalue = this.defaultValue;\n\t\t\t}\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\terrorHandler(message, title = null) {\n\t\t\tUtils.exception(this, message, title)\n\t\t},\n\t\tselectionChanged(blocks, edges) {\n\t\t\tthis.hasSelection = Boolean(blocks.filter(block => block.$el.allowsDelete).length || edges.length);\n\t\t},\n\t\thistoryChanged(history, index) {\n\t\t\tthis.canUndo = !!history[index-1];\n\t\t\tthis.canRedo = !!history[index+1];\n\t\t},\n\t\tallowDrop(event) {\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tonDrop(event) {\n\t\t\tvar editorNodeJson = event.dataTransfer.getData(\"application/vnd.openeo-node\");\n\t\t\tif (editorNodeJson) {\n\t\t\t\tlet node = JSON.parse(editorNodeJson);\n\t\t\t\tthis.insertProcess(node, event.pageX, event.pageY);\n\t\t\t\treturn event.preventDefault();\n\t\t\t}\n\n\t\t\t// Read a JSON file that has been dropped\n\t\t\tlet files = event.dataTransfer.files;\n\t\t\tif (files.length === 1) {\n\t\t\t\tlet file = event.dataTransfer.files[0];\n\t\t\t\tif (file.type === 'application/json') {\n\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\treader.onload = async e => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet process = JSON.parse(e.target.result);\n\t\t\t\t\t\t\tawait this.$refs.blocks.import(process);\n\t\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\t\tUtils.exception(this, error, \"Parsing JSON file failed\");\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\treader.onerror = error => Utils.exception(this, error, \"Reading JSON file failed\");\n\t\t\t\t\treader.readAsText(file, \"UTF-8\");\n\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetNameField(value = undefined, name = \"name\") {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tdescription: 'A unique identifier. Must contain only letters (`a`-`z`), digits (`0`-`9`) and underscores (`_`). `snake_case` is recommended.',\n\t\t\t\tlabel: 'Name',\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tpattern: '^\\\\w+$'\n\t\t\t\t},\n\t\t\t\tdefault: null\n\t\t\t};\n\t\t},\n\t\tgetDescriptionField(value = undefined, optional = false, name = \"description\", label = \"Description\") {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tdescription: 'Provides a detailed description. CommonMark (Markdown) syntax can be used for rich text formatting.',\n\t\t\t\tlabel,\n\t\t\t\toptional,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tgetOptionalField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'optional',\n\t\t\t\tlabel: 'Optional',\n\t\t\t\tdescription: 'Parameters by default are required. CHeck this option to make the parameter optional. For optional parameters a default value should be specified.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetDefaultField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'default',\n\t\t\t\tlabel: 'Default Value',\n\t\t\t\tdescription: 'This value is used whenever the user of this process did not specify a value for this parameter.',\n\t\t\t\ttoggledBy: 'optional',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {}\n\t\t\t};\n\t\t},\n\t\tgetExperimentalField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'experimental',\n\t\t\t\tlabel: 'Experimental',\n\t\t\t\tdescription: 'Declares that this is experimental, which means that it is unstable and likely to change.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetDeprecatedField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'deprecated',\n\t\t\t\tlabel: 'Deprecated',\n\t\t\t\tdescription: 'Declares that this is deprecated with the potential to be removed in any of the next versions. It should be transitioned out of usage.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetSchemaField(value = undefined, name = \"schema\", label = \"Data Types\") {\n\t\t\tlet subtype = !value ? 'openeo-datatype' : 'json-schema';\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tlabel,\n\t\t\t\tdescription: 'Allowed data type(s) as JSON Schema.',\n\t\t\t\tschema: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Single data type',\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tsubtype\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Multiple data types',\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\tminItems: 2,\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\tsubtype\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t},\n\t\teditProcess(process) {\n\t\t\tprocess = Utils.isObject(process) ? process : {};\n\t\t\tlet returns = Utils.isObject(process.returns) ? process.returns : {};\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(process.id, 'id'),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.summary,\n\t\t\t\t\tname: 'summary',\n\t\t\t\t\tdescription: 'A very short description of the process with usually less than 60 characters.',\n\t\t\t\t\tlabel: 'Summary',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.getDescriptionField(process.description, true),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.categories,\n\t\t\t\t\tname: 'categories',\n\t\t\t\t\tlabel: 'Categories',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.getExperimentalField(process.experimental),\n\t\t\t\tthis.getDeprecatedField(process.deprecated),\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Parameters',\n\t\t\t\t\tdescription: 'The parameters can be edited directly in the \"Visual Model\" interface.',\n\t\t\t\t\tinfo: true\n\t\t\t\t},\n\t\t\t\tthis.getDescriptionField(returns.description, true, 'returns_description', 'Return Value > Description'),\n\t\t\t\tthis.getSchemaField(returns.schema, 'returns_schema', 'Return Value > Data Type'),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.exceptions,\n\t\t\t\t\tname: 'exceptions',\n\t\t\t\t\tdescription: 'Declares exceptions (errors) that might occur during execution of this process. This list is just for informative purposes.\\n\\nThe keys of the object are the error codes, which should only consist of alphanumerical characters. `PascalCase` is recommended.',\n\t\t\t\t\tlabel: 'Errors',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tadditionalProperties: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"message\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\t\ttitle: 'Error Message',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdescription: {\n\t\t\t\t\t\t\t\t\ttitle: 'Description',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thttp: {\n\t\t\t\t\t\t\t\t\ttitle: 'HTTP Status Code',\n\t\t\t\t\t\t\t\t\ttype: 'integer',\n\t\t\t\t\t\t\t\t\tenum: [\n\t\t\t\t\t\t\t\t\t\t400,\n\t\t\t\t\t\t\t\t\t\t500,\n\t\t\t\t\t\t\t\t\t\t501\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: process.examples,\n\t\t\t\t\tname: 'examples',\n\t\t\t\t\tlabel: 'Examples',\n\t\t\t\t\tdescription: 'Example calls for this process with specific values for the parameters (arguments) and the result (return value).',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"arguments\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Description',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\targuments: {\n\t\t\t\t\t\t\t\t\ttitle: 'Arguments',\n\t\t\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\t\t\tdefault: {}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\treturns: {\n\t\t\t\t\t\t\t\t\ttitle: 'Return Value'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: process.links,\n\t\t\t\t\tname: 'links',\n\t\t\t\t\tlabel: 'Links',\n\t\t\t\t\tdescription: 'Links related to this process, e.g. additional documentation.',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"href\",\n\t\t\t\t\t\t\t\t\"rel\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\thref: {\n\t\t\t\t\t\t\t\t\ttitle: 'URL',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trel: {\n\t\t\t\t\t\t\t\t\ttitle: 'Relation',\n\t\t\t\t\t\t\t\t\tdescription: 'For examples see [IANA relation types](https://www.iana.org/assignments/link-relations/link-relations.xhtml)',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tdefault: 'about'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\t\ttitle: 'Media Type',\n\t\t\t\t\t\t\t\t\tdescription: 'For examples see [IANA media types](https://www.iana.org/assignments/media-types/media-types.xhtml)',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Edit Process\", fields, async data => {\n\t\t\t\tlet newData = Utils.pickFromObject(data, ['id', 'summary', 'description', 'categories', 'experimental', 'deprecated', 'exception', 'examples', 'links']);\n\t\t\t\tif (typeof newData.description === 'string' || Utils.isObject(newData.schema)) {\n\t\t\t\t\tnewData.returns = {\n\t\t\t\t\t\tdescription: data.returns_description,\n\t\t\t\t\t\tschema: data.returns_schema\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet process = this.$refs.blocks.export(true);\n\t\t\t\tlet newProcess = Object.assign({}, process, newData);\n\t\t\t\tconst defaults = {\n\t\t\t\t\tid: \"\",\n\t\t\t\t\tsummary: \"\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tcategories: [],\n\t\t\t\t\texperimental: false,\n\t\t\t\t\tdeprecated: false,\n\t\t\t\t\texamples: [],\n\t\t\t\t\tlinks: [],\n\t\t\t\t\tprocess_graph: {},\n\t\t\t\t};\n\t\t\t\t// Clean up some defaults / empty values\n\t\t\t\tfor(let key in defaults) {\n\t\t\t\t\tif (Utils.equals(defaults[key], newProcess[key])) {\n\t\t\t\t\t\tdelete newProcess[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.commit(newProcess);\n\t\t\t});\n\t\t},\n\t\taddParameter() {\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(),\n\t\t\t\tthis.getDescriptionField(),\n\t\t\t\tthis.getOptionalField(),\n\t\t\t\tthis.getDefaultField(),\n\t\t\t\tthis.getExperimentalField(),\n\t\t\t\tthis.getDeprecatedField(),\n\t\t\t\tthis.getSchemaField()\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Add Parameter\", fields, async data => {\n\t\t\t\tif (typeof data.name === 'string' && data.name.length > 0) {\n\t\t\t\t\tawait this.$refs.blocks.addPgParameter(data);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\teditParameter(parameter, title = \"Edit Parameter\", saveCallback = null) {\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(parameter.name),\n\t\t\t\tthis.getDescriptionField(parameter.description),\n\t\t\t\tthis.getOptionalField(parameter.optional),\n\t\t\t\tthis.getDefaultField(parameter.default),\n\t\t\t\tthis.getExperimentalField(parameter.experimental),\n\t\t\t\tthis.getDeprecatedField(parameter.deprecated),\n\t\t\t\tthis.getSchemaField(parameter.schema)\n\t\t\t];\n\t\t\tthis.emit('showDataForm', title, fields, saveCallback);\n\t\t},\n\t\tshowExpressionModal() {\n\t\t\tlet js = new JavaScript(this.value, this.processes, this.connection, true);\n\t\t\tjs.setCallbackParameters(this.$refs.blocks.getPgParameters().map(block => block.spec));\n\t\t\ttry {\n\t\t\t\tjs.parse();\n\t\t\t\tlet props = {\n\t\t\t\t\tprocess: js\n\t\t\t\t};\n\t\t\t\tlet events = {\n\t\t\t\t\tsave: this.insertNodes\n\t\t\t\t};\n\t\t\t\tthis.emit('showModal', 'ExpressionModal', props, events);\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\t\topenArgumentEditorForNode(nodeId) {\n\t\t\tlet process = Utils.deepClone(this.value);\n\t\t\tlet node = process.process_graph[nodeId];\n\t\t\tlet processSpec = this.processes.get(node.process_id, node.namespace);\n\t\t\tthis.openArgumentEditor(\n\t\t\t\tprocessSpec.parameters.map(p => new ProcessParameter(p)).filter(p => p.isEditable()),\n\t\t\t\tnode.arguments,\n\t\t\t\tprocessSpec.id,\n\t\t\t\ttrue,\n\t\t\t\tnull,\n\t\t\t\tdata => {\n\t\t\t\t\tObject.assign(node, {arguments: data});\n\t\t\t\t\tthis.commit(process);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\topenArgumentEditor(parameters, data, title = \"Edit\", editable = true, selectParameterName = null, saveCallback = null, parent = null) {\n\t\t\tlet props = {\n\t\t\t\ttitle,\n\t\t\t\tparameters,\n\t\t\t\tdata,\n\t\t\t\teditable,\n\t\t\t\tselectParameterName,\n\t\t\t\tparent\n\t\t\t};\n\t\t\tlet events = {};\n\t\t\tif (typeof saveCallback === 'function') {\n\t\t\t\tevents.save = saveCallback;\n\t\t\t}\n\t\t\tthis.emit('showModal', 'ParameterModal', props, events);\n\t\t},\n\t\tconfirmClear() {\n\t\t\tvar confirmed = confirm(\"Do you really want to clear the existing model?\");\n\t\t\tif (confirmed) {\n\t\t\t\tthis.clear();\n\t\t\t}\n\t\t},\n\t\tclear() {\n\t\t\tif (this.$refs.blocks) {\n\t\t\t\tthis.$refs.blocks.clear();\n\t\t\t}\n\t\t\tthis.commit(null);\n\t\t},\n\t\tinsertProcess(node, x = null, y = null) {\n\t\t\ttry {\n\t\t\t\tvar pos = this.$refs.blocks.getPositionForPageXY(x, y);\n\t\t\t\tlet namespace = node.namespace;\n\t\t\t\tif (namespace === 'backend' || namespace === 'user') {\n\t\t\t\t\tnamespace = null;\n\t\t\t\t}\n\t\t\t\tthis.$refs.blocks.addProcess(node.process_id, node.arguments, pos, namespace);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\t\tasync insertNodes(nodes, replace = false) {\n\t\t\treturn await this.$refs.blocks.import({\n\t\t\t\tprocess_graph: nodes\n\t\t\t}, {\n\t\t\t\tclear: replace\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.visualEditor {\n\tbackground-color: white;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.visualEditor .vue-component.model-builder {\n\tmin-height: 100px;\n\tmin-width: 100px;\n}\n\n.visualEditor .editorSplitter {\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n\tflex-grow: 1;\n\theight: 100%;\n\toverflow: hidden;\n}\n\n.visualEditor .discoveryToolbar {\n\twidth: 25%;\n\tmin-width: 150px;\n\tborder-left: 1px solid #ddd;\n}\n.visualEditor.fullscreen .discoveryToolbar {\n\twidth: 15%;\n\tmin-width: 250px;\n}\n\n.graphBuilder {\n\theight: 100%;\n\tflex-grow: 1;\n}\n\n.visualEditor.fullscreen {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.visualEditor.fullscreen .editorSplitter {\n\theight: 100%;\n}\n\n.compactMode {\n\tcolor: green;\n}\n\n@keyframes glowing {\n  0% {\n    box-shadow: 0 0 3px green;\n  }\n  50% {\n    box-shadow: 0 0 10px green;\n  }\n  100% {\n    box-shadow: 0 0 3px green;\n  }\n}\n\n.highlightFormula {\n    animation: glowing 1500ms infinite;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VisualEditor.vue?vue&type=template&id=161fe350&\"\nimport script from \"./VisualEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./VisualEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VisualEditor.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServicePanel.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!./MapMixin.css?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageViewer.vue?vue&type=style&index=0&id=38f11af8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":_vm.id}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div :id=\"id\"></div>\n</template>\n\n<script>\nimport MapMixin from './MapMixin.vue';\nimport Utils from '../utils.js';\n\nimport Collection from 'ol/Collection';\nimport Feature from 'ol/Feature';\nimport LayerGroup from 'ol/layer/Group';\nimport { fromExtent as PolygonFromExtent } from 'ol/geom/Polygon';\nimport TileLayer from 'ol/layer/Tile';\nimport TileJSON from 'ol/source/TileJSON';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport XYZ from 'ol/source/XYZ';\nimport WMTSCapabilities from 'ol/format/WMTSCapabilities';\nimport WMTS, {optionsFromCapabilities} from 'ol/source/WMTS';\n\nimport 'ol-ext/control/Swipe.css';\nimport Swipe from 'ol-ext/control/Swipe';\n\nimport 'ol-ext/control/Timeline.css';\nimport Timeline from 'ol-ext/control/Timeline';\n\nexport default {\n\tname: 'MapViewer',\n\tmixins: [MapMixin],\n\tprops: {\n\t\textents: { // Array of Array (WGS84: west, south, east, north)\n\t\t\ttype: Array,\n\t\t\tdefault: () => null\n\t\t},\n\t\tgeoJson: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => null\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tWMTSCapabilities: {},\n\t\t\tswipe: {\n\t\t\t\tcontrol: null,\n\t\t\t\tleft: null,\n\t\t\t\tright: null\n\t\t\t},\n\t\t\ttimeline: null\n\t\t}\n\t},\n\tmethods: {\n\t\trenderMap() {\n\t\t\tlet showExtents = Array.isArray(this.extents) && this.extents.length > 0;\n\t\t\tthis.createMap(!showExtents);\n\n\t\t\tif (showExtents) {\n\t\t\t\tfor(let extent of this.extents) {\n\t\t\t\t\tvar bbox = Utils.extentToBBox(extent);\n\t\t\t\t\tthis.addRectangle(bbox.west, bbox.east, bbox.north, bbox.south);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Utils.isObject(this.geoJson)) {\n\t\t\t\tthis.geoJsonLayer = this.addGeoJson(this.geoJson);\n\t\t\t}\n\n\t\t\tlet layers = this.map.getLayers();\n\t\t\tlayers.on('add', () => this.toggleSwipeControl());\n\t\t\tlayers.on('remove', () => this.toggleSwipeControl());\n\n\t\t\tif (this.$listeners && this.$listeners.drop) {\n\t\t\t\tthis.map.getViewport().addEventListener('dragover', event => event.preventDefault());\n\t\t\t\tthis.map.getViewport().addEventListener('drop', this.$listeners.drop);\n\t\t\t}\n\t\t},\n\n\t\taddRectangle(w, e, n, s) {\n\t\t\tlet extent = [...this.fromLonLat([w, s]), ...this.fromLonLat([e, n])];\n\t\t\tlet layer = new VectorLayer({\n\t\t\t\ttitle: \"Extent\",\n\t\t\t\tdisplayInLayerSwitcher: false,\n\t\t\t\tsource: new VectorSource({\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tnew Feature(PolygonFromExtent(extent))\n\t\t\t\t\t],\n\t\t\t\t\tprojection: \"EPSG:4326\",\n\t\t\t\t\twrapX: false\n\t\t\t\t})\n\t\t\t});\n\t\t\tthis.map.addLayer(layer);\n\t\t\tthis.map.getView().fit(extent, this.fitOptions);\n\t\t\t// ToDo: The Collection component has some smart fitting behavior in setMapSize()\n\t\t\t// Implement something similar here, too.\n\t\t},\n\n\t\tasync showWebService(service) {\n\t\t\tswitch(service.type.toLowerCase()) {\n\t\t\t\tcase 'xyz':\n\t\t\t\t\tthis.updateXYZLayer(service);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'wmts':\n\t\t\t\t\tawait this.updateWMTSLayer(service);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tUtils.error(this, 'Sorry, the service type is not supported by the map.');\n\t\t\t}\n\t\t},\n\n\t\ttoggleSwipeControl() {\n\t\t\tvar shownLayers = this.getVisibleLayers();\n\t\t\tif (shownLayers.length === 2) {\n\t\t\t\tif (this.swipe.control === null) {\n\t\t\t\t\tthis.swipe.control = new Swipe();\n\t\t\t\t\tthis.map.addControl(this.swipe.control);\n\t\t\t\t}\n\t\t\t\tif (this.swipe.left !== shownLayers[0]) {\n\t\t\t\t\tthis.swipe.control.addLayer(shownLayers[0]);\n\t\t\t\t\tthis.swipe.left = shownLayers[0];\n\t\t\t\t}\n\t\t\t\tif (this.swipe.right !== shownLayers[1]) {\n\t\t\t\t\tthis.swipe.control.addLayer(shownLayers[1], true);\n\t\t\t\t\tthis.swipe.right = shownLayers[1];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.map.removeControl(this.swipe.control);\n\t\t\t\tthis.swipe.control = null;\n\t\t\t\tthis.swipe.left = null;\n\t\t\t\tthis.swipe.right = null;\n\t\t\t}\n\t\t},\n\n\t\taddLayerToMap(layer) {\n\t\t\tlayer.set('userLayer', true);\n\n\t\t\tthis.map.addLayer(layer);\n\n\t\t\tlayer.on('change', () => this.toggleSwipeControl());\n\t\t\tlayer.on('change:visible', () => this.toggleSwipeControl());\n\t\t\tlayer.on('change:zIndex', () => this.toggleSwipeControl());\n\t\t},\n\n\t\tremoveLayerFromMap(id) {\n\t\t\tlet layer = this.getLayerFromMap(id);\n\t\t\tif (layer) {\n\t\t\t\tthis.map.removeLayer(layer);\n\t\t\t}\n\t\t},\n\n\t\tgetLayerFromMap(id) {\n\t\t\tlet layers = this.map.getLayers().getArray();\n\t\t\tfor(let layer of layers) {\n\t\t\t\tif (layer.get('id') === id) {\n\t\t\t\t\treturn layer;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tupdateGeoTiffLayer(url, title = null) {\n\t\t\tvar layer = new TileLayer({\n\t\t\t\tid: url,\n\t\t\t\ttitle: title ? title : 'GeoTiff',\n\t\t\t\tsource: new TileJSON({\n\t\t\t\t\turl: 'http://tiles.rdnt.io/tiles?url=' + encodeURIComponent(url),\n\t\t\t\t\tcrossOrigin: 'anonymous'\n\t\t\t\t})\n\t\t\t});\n\t\t\tthis.addLayerToMap(layer);\n\t\t\treturn layer;\n\t\t\t// ToDo: Implement full/native GTiff support\n\t\t},\n\n\t\tasync addCollection(collection) {\n\t\t\tlet link = Utils.getPreviewLinkFromSTAC(collection);\n\t\t\tif (!link) {\n\t\t\t\tUtils.error(this, 'No visualizations found for collection');\n\t\t\t}\n\n\t\t\tlet service = {\n\t\t\t\tid: collection.id,\n\t\t\t\turl: link.href,\n\t\t\t\ttitle: collection.title || collection.id\n\t\t\t};\n\n\t\t\t// Remove other previewLayers, only show one at a time\n\t\t\tthis.map.getLayers().forEach(layer => {\n\t\t\t\tif (layer.get('previewLayer') && layer.get('id') !== service.id) {\n\t\t\t\t\tthis.map.removeLayer(layer);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlet layer;\n\t\t\tswitch(link.rel.toLowerCase()) {\n\t\t\t\tcase 'xyz':\n\t\t\t\t\tlayer = this.updateXYZLayer(service);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'wmts':\n\t\t\t\t\tlet layers = [];\n\t\t\t\t\tif (typeof link['wmts:layer'] === 'string') {\n\t\t\t\t\t\tlayers.push(link['wmts:layer']);\n\t\t\t\t\t}\n\t\t\t\t\telse if (Array.isArray(typeof link['wmts:layer'])) {\n\t\t\t\t\t\tlayers = layers.concat(link['wmts:layer']);\n\t\t\t\t\t}\n\t\t\t\t\tlayer = await this.updateWMTSLayer(service, layers, link['wmts:dimensions']);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tUtils.error(this, 'Sorry, the service type is not supported by the map.');\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlayer.set('previewLayer', true);\n\n\t\t\t// Fit to extent of collection\n\t\t\ttry {\n\t\t\t\tlet bbox = Utils.extentToBBox(collection.extent.spatial.bbox[0]);\n\t\t\t\tlet extent = [...this.fromLonLat([bbox.west, bbox.south]), ...this.fromLonLat([bbox.east, bbox.north])];\n\t\t\t\tlet extentLayer = new VectorLayer({\n\t\t\t\t\ttitle: \"Extent\",\n\t\t\t\t\tnoSwitcherDelete: true,\n\t\t\t\t\tsource: new VectorSource({\n\t\t\t\t\t\tfeatures: [\n\t\t\t\t\t\t\tnew Feature(PolygonFromExtent(extent))\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprojection: \"EPSG:4326\",\n\t\t\t\t\t\twrapX: false\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\n\t\t\t\tlet style = extentLayer.getStyle();\n\t\t\t\t// https://github.com/openlayers/openlayers/issues/10131\n\t\t\t\tif (typeof style === 'function') {\n\t\t\t\t\tstyle = style()[0];\n\t\t\t\t}\n\t\t\t\tstyle.setFill(null);\n\n\t\t\t\tlayer.getLayers().push(extentLayer);\n\n\t\t\t\tthis.map.getView().fit(extent, this.fitOptions);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t},\n\n\t\tgetWMTSTimes(capabilities, layerId) {\n\t\t\tconst layers = capabilities.Contents.Layer || [];\n\t\t\tlet layer = layers.find(l => l.Identifier == layerId);\n\t\t\tif (!layer || !layer.Dimension) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tlet timeDimension = layer.Dimension.find(d => d.Identifier === 'TIME');\n\t\t\tif (!timeDimension) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn timeDimension.Value.sort();\n\t\t},\n\n\t\tasync updateWMTSLayer(service, layerNames = [], dimensions = null, prefix = \"Service\") {\n\t\t\tthis.removeLayerFromMap(service.id);\n\n\t\t\tif (!this.WMTSCapabilities[service.url]) {\n\t\t\t\tlet url = new URL(service.url);\n\t\t\t\turl.searchParams.set('service', 'wmts');\n\t\t\t\turl.searchParams.set('request', 'GetCapabilities');\n\t\t\t\tlet response = await axios.get(url.toString(), { responseType: 'text' });\n\t\t\t\tvar parser = new WMTSCapabilities();\n\t\t\t\tthis.WMTSCapabilities[service.url] = parser.read(response.data);\n\t\t\t}\n\n\t\t\tlet capabilities = this.WMTSCapabilities[service.url];\n\t\t\tlet minDate = null;\n\t\t\tlet maxDate = null;\n\t\t\tlet defaultDate = null;\n\t\t\tlet source = null;\n\t\t\tlet title = Utils.getResourceTitle(service, prefix);\n\t\t\tlet layerCollection = new Collection();\n\t\t\tfor(let layer of layerNames) {\n\t\t\t\tlet options = optionsFromCapabilities(capabilities, {\n\t\t\t\t\tlayer,\n\t\t\t\t\tmatrixSet: 'EPSG:3857'\n\t\t\t\t});\n\t\t\t\tif (!defaultDate) {\n\t\t\t\t\tdefaultDate = new Date(options.dimensions.TIME);\n\t\t\t\t}\n\n\t\t\t\tlet times = this.getWMTSTimes(capabilities, layer);\n\t\t\t\tif (times.length) {\n\t\t\t\t\tlet min = new Date(times[0]);\n\t\t\t\t\tlet max = new Date(times[times.length -1]);\n\t\t\t\t\tif (!minDate || min < minDate) {\n\t\t\t\t\t\tminDate = min;\n\t\t\t\t\t}\n\t\t\t\t\tif (!maxDate || max > maxDate) {\n\t\t\t\t\t\tmaxDate = max;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Utils.isObject(dimensions)) {\n\t\t\t\t\tObject.assign(options.dimensions, dimensions);\n\t\t\t\t}\n\t\t\t\tsource = new WMTS(options);\n\t\t\t\tvar mapLayer = new TileLayer({\n\t\t\t\t\ttitle,\n\t\t\t\t\tsource: this.trackTileProgress(source),\n\t\t\t\t\tnoSwitcherDelete: true\n\t\t\t\t});\n\t\t\t\tlayerCollection.push(mapLayer);\n\t\t\t}\n\n\t\t\tif (minDate && maxDate) {\n\t\t\t\tthis.timeline = new Timeline({\n\t\t\t\t\tclassName: 'ol-pointer',\n\t\t\t\t\tgraduation: 'day',\n\t\t\t\t\tminDate: minDate,\n\t\t\t\t\tmaxDate: maxDate\n\t\t\t\t});\n\t\t\t\tlet run;\n\t\t\t\tthis.timeline.on('scroll', function(e) {\n\t\t\t\t\tif (!e.date || e.date > maxDate || e.date < minDate) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (run) {\n\t\t\t\t\t\twindow.clearTimeout(run);\n\t\t\t\t\t}\n\t\t\t\t\trun = window.setTimeout(() => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet date = e.date.toISOString().substr(0, 10);\n\t\t\t\t\t\t\tsource.updateDimensions({\n\t\t\t\t\t\t\t\tTIME: date\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet btns = document.getElementsByClassName('timeline-date-label');\n\t\t\t\t\t\t\tbtns[0].innerText = date;\n\t\t\t\t\t\t\tbtns[0].disabled = true;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trun = null;\n\t\t\t\t\t}, 500);\n\t\t\t\t});\n\t\t\t\tthis.map.addControl(this.timeline);\n\n\t\t\t\tthis.timeline.addButton({\n\t\t\t\t\tclassName: 'timeline-date-label',\n\t\t\t\t\ttitle: `The date that is shown on the map for the collection '${title}'`,\n\t\t\t\t\thtml: 'No date'\n\t\t\t\t});\n\t\t\t\tthis.timeline.setDate(defaultDate);\n\t\t\t}\n\n\t\t\tlet group = new LayerGroup({\n\t\t\t\tid: service.id,\n\t\t\t\ttitle,\n\t\t\t\tlayers: layerCollection\n\t\t\t});\n\t\t\tgroup.on('change:visible',  () => {\n\t\t\t\tif (this.timeline && this.timeline.element) {\n\t\t\t\t\t// Remove time selector on Map if not required any more https://github.com/Open-EO/openeo-web-editor/issues/207\n\t\t\t\t\tthis.timeline.element.style.display = group.getVisible() ? 'block' : 'none';\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.addLayerToMap(group);\n\n\t\t\tif (this.timeline) {\n\t\t\t\tthis.map.getLayers().on('remove', event => {\n\t\t\t\t\tif (event.element === group) {\n\t\t\t\t\t\tthis.map.removeControl(this.timeline);\n\t\t\t\t\t\tthis.timeline = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn group;\n\t\t},\n\n\t\tupdateXYZLayer(service, prefix = \"Service\") {\n\t\t\tthis.removeLayerFromMap(service.id);\n\n\t\t\t// Replace/add a query parameter with a unique ID so that OpenLayers doesn't load tiles from cache\n\t\t\tlet url = Utils.replaceParam(service.url, '__editorSessionId', new Date().getTime()).replace(/%7B/g, '{').replace(/%7D/g, '}');\n\t\t\tlet title = Utils.getResourceTitle(service, prefix);\n\t\t\tlet layer = new TileLayer({\n\t\t\t\ttitle,\n\t\t\t\tsource: this.trackTileProgress(new XYZ({\n\t\t\t\t\turl\n\t\t\t\t})),\n\t\t\t\tnoSwitcherDelete: true\n\t\t\t});\n\t\t\tlet group = new LayerGroup({\n\t\t\t\tid: service.id,\n\t\t\t\ttitle,\n\t\t\t\tlayers: [\n\t\t\t\t\tlayer\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.addLayerToMap(group);\n\t\t\treturn group;\n\t\t}\n\n\t}\n\n}\n</script>\n\n<style src=\"./MapMixin.css\"></style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapViewer.vue?vue&type=template&id=7d738f8a&\"\nimport script from \"./MapViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./MapViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapMixin.css?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserWorkspace.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogViewer.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=style&index=1&lang=css&\"","import Utils from \"../utils\";\nimport Exporter from \"./exporter\";\nimport { Formula } from '@openeo/js-client';\n\nconst KEYWORDS = [\n\t\"abstract\",\n\t\"arguments\",\n\t\"await\",\n\t\"boolean\",\n\t\"break\",\n\t\"byte\",\n\t\"case\",\n\t\"catch\",\n\t\"char\",\n\t\"class\",\n\t\"const\",\n\t\"continue\",\n\t\"debugger\",\n\t\"default\",\n\t\"delete\",\n\t\"do\",\n\t\"double\",\n\t\"else\",\n\t\"enum\",\n\t\"eval\",\n\t\"export\",\n\t\"extends\",\n\t\"false\",\n\t\"final\",\n\t\"finally\",\n\t\"float\",\n\t\"for\",\n\t\"function\",\n\t\"goto\",\n\t\"if\",\n\t\"implements\",\n\t\"import\",\n\t\"in\",\n\t\"instanceof\",\n\t\"int\",\n\t\"interface\",\n\t\"let\",\n\t\"long\",\n\t\"native\",\n\t\"new\",\n\t\"null\",\n\t\"package\",\n\t\"private\",\n\t\"protected\",\n\t\"public\",\n\t\"return\",\n\t\"short\",\n\t\"static\",\n\t\"super\",\n\t\"switch\",\n\t\"synchronized\",\n\t\"this\",\n\t\"throw\",\n\t\"throws\",\n\t\"transient\",\n\t\"true\",\n\t\"try\",\n\t\"typeof\",\n\t\"var\",\n\t\"void\",\n\t\"volatile\",\n\t\"while\",\n\t\"with\",\n\t\"yield\",\n\t// specific to this generator\n\t\"builder\",\n\t\"connection\",\n\t\"formula\",\n\t\"openeo\",\n\t\"result\"\n];\n\nexport default class JavaScript extends Exporter {\n\n\tconstructor(process, registry, connection, generateFormula = false) {\n\t\tsuper(process, registry, connection);\n\t\tthis.generateFormula = generateFormula;\n\t}\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new JavaScript(process, this.processRegistry, this.getJsonSchemaValidator(), this.generateFormula);\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tparse() {\n\t\tif (this.parsed) {\n\t\t\treturn;\n\t\t}\n\t\tsuper.parse();\n\t}\n\n\tgetKeywords() {\n\t\treturn KEYWORDS;\n\t}\n\n\tcomment(comment) {\n\t\tthis.addCode(comment, '// ');\n\t}\n\n\tgenerateImports() {\n\t\tthis.addCode(`import { OpenEO, Formula } from '@openeo/js-client';`);\n\t}\n\n\tgenerateConnection() {\n\t\tthis.addCode(`let connection = await OpenEO.connect('${this.getServerUrl()}');`);\n\t}\n\n\tgenerateAuthentication() {\n\t\tthis.comment(`ToDo: Here you need to add your authentication steps`);\n\t}\n\n\tgenerateBuilder() {\n\t\tthis.addCode(`let builder = await connection.buildProcess();`);\n\t}\n\n\tgenerateMetadataEntry(key, value) {\n\t\tthis.addCode(`builder.${key} = ${this.e(value)};`);\n\t}\n\n\tasync generateFunction(node) {\n\t\tlet variable = this.var(node.id);\n\t\tlet builderName = node.getParent() ? 'this' : 'builder';\n\t\tlet args = await this.generateArguments(node, !node.namespace);\n\n\t\tthis.comment(node.description);\n\t\tif (Utils.isObject(args)) {\n\t\t\tlet processId = node.namespace ? `${node.process_id}@${node.namespace}` : node.process_id;\n\t\t\tthis.addCode(`let ${variable} = ${builderName}.process(\"${processId}\", ${this.e(args)});`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`let ${variable} = ${builderName}.${node.process_id}(${args.map(arg => this.e(arg)).join(', ')});`);\n\t\t}\n\t}\n\n\tgenerateMissingParameter(parameter) {\n\t\tthis.comment(parameter.description);\n\t\tlet paramName = this.var(parameter.name, 'param');\n\t\tlet value = typeof parameter.default !== 'undefined' ? parameter.default : null;\n\t\tthis.addCode(`let ${paramName} = ${this.e(value)};`);\n\t}\n\n\tasync generateCallback(callback, parameters, variable) {\n\t\tif (this.generateFormula && callback && callback.isMath()) {\n\t\t\tlet formula = callback.toFormulaString();\n\t\t\tlet escaped = JSON.stringify(formula);\n\t\t\treturn `new Formula(${escaped})`;\n\t\t}\n\t\telse {\n\t\t\tlet params = this.generateFunctionParams(parameters);\n\t\t\tthis.newLine();\n\t\t\tthis.addCode(`let ${variable} = function(${params.join(', ')}) {`);\n\t\t\tthis.indent++;\n\t\t\tthis.addCode(await callback.toCode(true));\n\t\t\tthis.indent--;\n\t\t\tthis.addCode(`}`);\n\t\t}\n\t}\n\n\tgenerateResult(resultNode, callback) {\n\t\tif (!resultNode) {\n\t\t\treturn;\n\t\t}\n\t\tlet variable = this.var(resultNode.id);\n\t\tif (callback) {\n\t\t\tthis.addCode(`return ${variable};`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`let result = await connection.computeResult(${variable});`);\n\t\t}\n\t}\n\n\ttoFormulaString() {\n\t\tif (this.isMath()) {\n\t\t\treturn this.nodeToFormula(this.getResultNode());\n\t\t}\n\t\telse {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetArrayElementPlaceholder(node) {\n\t\tif (node.process_id === 'array_element') {\n\t\t\tif (node.getArgumentType('data') === 'parameter') {\n\t\t\t\tlet parameter = node.getRawArgument('data').from_parameter;\n\t\t\t\tlet index = this.getCallbackParameters().findIndex(param => param.name === parameter);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\treturn '$'.repeat(index+1) + (node.getArgument('label') || node.getArgument('index'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tnodeToFormula(node, parentOperator = null) {\n\t\tif (node.process_id === 'array_element') {\n\t\t\tlet arrayElement = this.getArrayElementPlaceholder(node);\n\t\t\tif (arrayElement) {\n\t\t\t\treturn arrayElement;\n\t\t\t}\n\t\t}\n\n\t\tlet operator = Formula.reverseOperatorMapping[node.process_id];\n\t\tlet process = this.processRegistry.get(node.process_id);\n\t\tlet isArrayData = (typeof Formula.arrayOperatorMapping[node.process_id] !== 'undefined');\n\n\t\tlet convertValue = value => {\n\t\t\tif (Utils.isObject(value)) {\n\t\t\t\tif (value.from_node) {\n\t\t\t\t\tlet refNode = node.getProcessGraph().getNode(value.from_node);\n\t\t\t\t\tif (refNode) {\n\t\t\t\t\t\tvalue = this.nodeToFormula(refNode, operator);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = '#' + value.from_node;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (value.from_parameter) {\n\t\t\t\t\tvalue = value.from_parameter;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error('Objects not allowed');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\n\t\t// Create the list of arguments\n\t\tlet argList = [];\n\t\tlet params = Array.isArray(process.parameters) ? process.parameters : [];\n\t\tfor(let parameter of params) {\n\t\t\tlet value = convertValue(node.getRawArgument(parameter.name));\n\n\t\t\tif (isArrayData && Array.isArray(value) && parameter.name === 'data') {\n\t\t\t\targList = value.map(v => convertValue(v));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if(typeof value !== 'undefined') {\n\t\t\t\targList.push(value);\n\t\t\t}\n\t\t\telse if(typeof parameter.default !== 'undefined') {\n\t\t\t\targList.push(parameter.default);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error('Argument for parameter \"' + parameter.name + '\" missing');\n\t\t\t}\n\t\t}\n\t\t \n\t\t // Filter null values for array data to handle ignore_nodata\n\t\tif (isArrayData) {\n\t\t\targList = argList.filter(v => v !== null);\n\t\t}\n\n\t\tif (operator) {\n\t\t\tlet strongOps = ['/', '*']; // \"Punktrechnung\" vor\n\t\t\tlet weakOps = ['-', '+']; // \"Strichrechung\"\n\t\t\tlet formula = argList\n\t\t\t\t.map(v => v < 0 ? '(' + v + ')' : v) // Put negative values in brackets\n\t\t\t\t.join(operator); // Merge everything together\n\t\t\t\n\t\t\t// Check whether brackets are required\n\t\t\tif (\n\t\t\t\t// No brackets on top-level\n\t\t\t\t!parentOperator\n\t\t\t\t// If operators are both weak, no brackets required\n\t\t\t\t|| (weakOps.includes(parentOperator) && weakOps.includes(operator))\n\t\t\t\t// If operators are both strong, no brackets required -> not correct, x/(a*b) needs it, see https://github.com/Open-EO/openeo-web-editor/issues/235\n//\t\t\t\t|| (strongOps.includes(parentOperator) && strongOps.includes(operator))\n\t\t\t\t// No brackets required for power, it's the strongest operation\n\t\t\t\t|| operator === '^'\n\t\t\t\t// If the parent operation is a weak operation (+/-) and this is a strong operation, no brackets required\n\t\t\t\t|| (weakOps.includes(parentOperator) && strongOps.includes(operator))\n\t\t\t) {\n\t\t\t\treturn formula;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn '(' + formula + ')';\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn node.process_id + '(' + argList.join(', ') + ')';\n\t\t}\n\t}\n\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"wrapper\"}},[_c('div',{class:{authenticated: _vm.isAuthenticated},attrs:{\"id\":\"ide\"}},[_c('header',{staticClass:\"navbar\"},[_c('Logo'),_c('ul',{attrs:{\"id\":\"menu\"}},[_c('li',[_c('div',{staticClass:\"menuItem\",attrs:{\"title\":\"Start a guided tour\"},on:{\"click\":_vm.showHelp}},[_c('i',{staticClass:\"fas fa-question fa-fw\"}),_vm._v(\" Help\")])]),_c('li',[_c('div',{staticClass:\"menuItem\",attrs:{\"title\":\"Get server information\"},on:{\"click\":_vm.showServerInfo}},[_c('i',{staticClass:\"fas fa-info fa-fw\"}),_vm._v(\" Server\")])]),_c('li',[_c('UserMenu')],1)])],1),_c('Splitpanes',{staticClass:\"default-theme\",on:{\"resize\":_vm.resized,\"pane-maximize\":_vm.resized}},[_c('Pane',{attrs:{\"id\":\"discovery\",\"size\":_vm.splitpaneSizeH[0]}},[_c('DiscoveryToolbar',{staticClass:\"toolbar tour-ide-discovery\",attrs:{\"onAddProcess\":_vm.insertProcess,\"collectionPreview\":true,\"persist\":true}})],1),_c('Pane',{attrs:{\"id\":\"workspace\",\"size\":_vm.splitpaneSizeH[1]}},[_c('Splitpanes',{staticClass:\"default-theme\",attrs:{\"horizontal\":\"\"},on:{\"resize\":_vm.resized,\"pane-maximize\":_vm.resized}},[_c('Pane',{attrs:{\"id\":\"editor\",\"size\":_vm.splitpaneSizeV[0]}},[_c('Editor',{ref:\"editor\",staticClass:\"mainEditor tour-ide-editor\",attrs:{\"id\":\"main\",\"value\":_vm.process,\"title\":_vm.contextTitle},on:{\"input\":_vm.updateEditor},scopedSlots:_vm._u([{key:\"file-toolbar\",fn:function(){return [_c('button',{attrs:{\"type\":\"button\",\"title\":\"Import process from external source\"},on:{\"click\":_vm.importProcess}},[_c('i',{staticClass:\"fas fa-cloud-download-alt\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.saveSupported),expression:\"saveSupported\"}],attrs:{\"type\":\"button\",\"disabled\":!_vm.hasProcess,\"title\":'Save to ' + _vm.contextTitle},on:{\"click\":_vm.saveProcess}},[_c('i',{staticClass:\"fas fa-save\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.hasProcess,\"title\":\"Export into another programming language\"},on:{\"click\":_vm.exportCode}},[_c('i',{staticClass:\"fas fa-file-export\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.validateSupported),expression:\"validateSupported\"}],attrs:{\"type\":\"button\",\"disabled\":!_vm.hasProcess,\"title\":\"Validate process on server-side\"},on:{\"click\":_vm.validateProcess}},[_c('i',{staticClass:\"fas fa-tasks\"})])]},proxy:true}])})],1),_c('Pane',{attrs:{\"id\":\"user\",\"size\":_vm.splitpaneSizeV[1]}},[(_vm.isAuthenticated)?_c('UserWorkspace',{staticClass:\"userContent tour-ide-workspace\"}):_c('div',{staticClass:\"message info\",attrs:{\"title\":\"Login is required to interact with the server.\"}},[_c('i',{staticClass:\"fas fa-sign-in-alt\"}),_c('span',{staticClass:\"login-message\"},[_c('strong',[_c('a',{on:{\"click\":_vm.login}},[_vm._v(\"Log in\")])]),_vm._v(\" is required to interact with the server.\")])])],1)],1)],1),_c('Pane',{attrs:{\"id\":\"viewer\",\"size\":_vm.splitpaneSizeH[2]}},[_c('Viewer',{staticClass:\"tour-ide-viewer\"})],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"UserMenu\"}},[_c('div',{staticClass:\"menuItem\"},[_vm._m(0),_c('div',{staticClass:\"data\"},[_c('span',{staticClass:\"name nowrap\"},[_c('i',{staticClass:\"fas fa-user\"}),_vm._v(\" \"+_vm._s(_vm.userName))]),(_vm.budget)?_c('span',{staticClass:\"credits nowrap\"},[_c('i',{staticClass:\"fas fa-dollar-sign fa-fw\"}),_vm._v(\" \"+_vm._s(_vm.budget))]):_vm._e(),(_vm.hasStorage)?_c('span',{staticClass:\"storage nowrap\"},[_c('i',{staticClass:\"fas fa-database fa-fw\"}),_vm._v(\" \"+_vm._s(_vm.storageUsedPercent)+\"% used\")]):_vm._e()])]),_c('div',{staticClass:\"dropdown\"},[(_vm.profileLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.profileLink.href,\"target\":\"_blank\"}},[_vm._v(\"Welcome, \"+_vm._s(_vm.userName)+\"!\")]):_c('div',{staticClass:\"item\"},[_vm._v(\"Welcome, \"+_vm._s(_vm.userName)+\"!\")]),(_vm.isAuthenticated)?[(_vm.settingsLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.settingsLink.href,\"target\":\"_blank\"}},[_c('i',{staticClass:\"fas fa-user-edit\"}),_vm._v(\" \"+_vm._s(_vm.settingsLink.title || 'Edit Profile'))]):_vm._e(),_c('a',{staticClass:\"item\",on:{\"click\":function($event){$event.preventDefault();return _vm.logout.apply(null, arguments)}}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"}),_vm._v(\" Logout\")])]:[_c('a',{staticClass:\"item\",on:{\"click\":function($event){$event.preventDefault();return _vm.login.apply(null, arguments)}}},[_c('i',{staticClass:\"fas fa-sign-in-alt\"}),_vm._v(\" Login\")]),(_vm.registerLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.registerLink.href,\"target\":\"_blank\"}},[_c('i',{staticClass:\"fas fa-user-plus\"}),_vm._v(\" Register\")]):_vm._e(),(_vm.passwordLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.passwordLink.href,\"target\":\"_blank\"}},[_c('i',{staticClass:\"fas fa-key\"}),_vm._v(\" Forgotten Password?\")]):_vm._e()],(!_vm.$config.serverUrl)?_c('a',{staticClass:\"item\",on:{\"click\":function($event){$event.preventDefault();return _vm.disconnect.apply(null, arguments)}}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"}),_vm._v(\" Disconnect\")]):_vm._e(),(_vm.userLinks.length > 0)?[_c('hr'),_vm._l((_vm.userLinks),function(link,key){return _c('a',{key:key,staticClass:\"item\",attrs:{\"href\":link.href,\"target\":\"_blank\",\"rel\":link.rel}},[_vm._v(_vm._s(link.title))])})]:_vm._e(),(_vm.budget || _vm.userInfo.default_plan || _vm.paymentLink)?[_c('hr'),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"Billing\")]),(_vm.userInfo.default_plan)?_c('div',{staticClass:\"secondary-text\"},[_vm._v(\"Plan: \"+_vm._s(_vm.userInfo.default_plan))]):_vm._e(),(_vm.budget)?_c('div',{staticClass:\"secondary-text\"},[_vm._v(\"Budget: \"+_vm._s(_vm.budget))]):_vm._e()]),(_vm.paymentLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.paymentLink.href,\"target\":\"_blank\"}},[_c('i',{staticClass:\"fas fa-credit-card\"}),_vm._v(\" \"+_vm._s(_vm.paymentLink.title || 'Recharge'))]):_vm._e()]:_vm._e(),(_vm.hasStorage)?[_c('hr'),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"Storage\")]),_c('div',{staticClass:\"secondary-text nowrap\"},[_vm._v(\"Used \"+_vm._s(_vm.formatMegabyte(_vm.storageUsed))+\" of \"+_vm._s(_vm.formatMegabyte(_vm.userInfo.storage.quota))+\".\")]),_c('div',{staticClass:\"storagePercent\"},[_c('div',{staticClass:\"used\",style:('width: ' + _vm.storageUsedPercent + '%')})])])]:_vm._e()],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"down\"},[_c('i',{staticClass:\"fas fa-chevron-down\"})])}]\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"UserMenu\">\n\t\t<div class=\"menuItem\">\n\t\t\t<div class=\"down\">\n\t\t\t\t<i class=\"fas fa-chevron-down\"></i>\n\t\t\t</div>\n\t\t\t<div class=\"data\">\n\t\t\t\t<span class=\"name nowrap\"><i class=\"fas fa-user\"></i> {{ userName }}</span>\n\t\t\t\t<span v-if=\"budget\" class=\"credits nowrap\"><i class=\"fas fa-dollar-sign fa-fw\"></i> {{ budget }}</span>\n\t\t\t\t<span v-if=\"hasStorage\" class=\"storage nowrap\"><i class=\"fas fa-database fa-fw\"></i> {{ storageUsedPercent }}% used</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"dropdown\">\n\t\t\t<a v-if=\"profileLink\" class=\"item\" :href=\"profileLink.href\" target=\"_blank\">Welcome, {{ userName }}!</a>\n\t\t\t<div v-else class=\"item\">Welcome, {{ userName }}!</div>\n\t\t\t<template v-if=\"isAuthenticated\">\n\t\t\t\t<a v-if=\"settingsLink\" class=\"item\" :href=\"settingsLink.href\" target=\"_blank\"><i class=\"fas fa-user-edit\"></i> {{ settingsLink.title || 'Edit Profile' }}</a>\n\t\t\t\t<a class=\"item\" @click.prevent=\"logout\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<a class=\"item\" @click.prevent=\"login\"><i class=\"fas fa-sign-in-alt\"></i> Login</a>\n\t\t\t\t<a v-if=\"registerLink\" class=\"item\" :href=\"registerLink.href\" target=\"_blank\"><i class=\"fas fa-user-plus\"></i> Register</a>\n\t\t\t\t<a v-if=\"passwordLink\" class=\"item\" :href=\"passwordLink.href\" target=\"_blank\"><i class=\"fas fa-key\"></i>  Forgotten Password?</a>\n\t\t\t</template>\n\t\t\t<a v-if=\"!$config.serverUrl\" class=\"item\" @click.prevent=\"disconnect\"><i class=\"fas fa-sign-out-alt\"></i> Disconnect</a>\n\t\t\t<template v-if=\"userLinks.length > 0\">\n\t\t\t\t<hr />\n\t\t\t\t<a v-for=\"(link, key) in userLinks\" :key=\"key\" :href=\"link.href\" target=\"_blank\" class=\"item\" :rel=\"link.rel\">{{ link.title }}</a>\n\t\t\t</template>\n\t\t\t<template v-if=\"budget || userInfo.default_plan || paymentLink\">\n\t\t\t\t<hr />\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<h4>Billing</h4>\n\t\t\t\t\t<div v-if=\"userInfo.default_plan\" class=\"secondary-text\">Plan: {{ userInfo.default_plan }}</div>\n\t\t\t\t\t<div v-if=\"budget\" class=\"secondary-text\">Budget: {{ budget }}</div>\n\t\t\t\t</div>\n\t\t\t\t<a v-if=\"paymentLink\" :href=\"paymentLink.href\" class=\"item\" target=\"_blank\"><i class=\"fas fa-credit-card\"></i> {{ paymentLink.title || 'Recharge' }}</a>\n\t\t\t</template>\n\t\t\t<template v-if=\"hasStorage\">\n\t\t\t\t<hr />\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<h4>Storage</h4>\n\t\t\t\t\t<div class=\"secondary-text nowrap\">Used {{ formatMegabyte(storageUsed) }} of {{ formatMegabyte(userInfo.storage.quota) }}.</div>\n\t\t\t\t\t<div class=\"storagePercent\"><div class=\"used\" :style=\"'width: ' + storageUsedPercent + '%'\"></div></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport Utils from '../utils.js';\n\nexport default {\n\tname: 'UserMenu',\n\tmixins: [EventBusMixin],\n\tcomputed: {\n\t\t...Utils.mapState(['userInfo', 'isAuthenticated']),\n\t\t...Utils.mapGetters(['currency', 'capabilities']),\n\t\tuserLinks() {\n\t\t\treturn Utils.friendlyLinks(this.userInfo.links, true, ['self', 'edit-form', 'payment', 'alternate']);\n\t\t},\n\t\tserverLinks() {\n\t\t\treturn this.capabilities ? this.capabilities.links() : [];\n\t\t},\n\t\tregisterLink() {\n\t\t\treturn this.serverLinks.find(link => link.rel === 'create-form');\n\t\t},\n\t\tpasswordLink() {\n\t\t\treturn this.serverLinks.find(link => link.rel === 'recovery-form');\n\t\t},\n\t\tsettingsLink() {\n\t\t\treturn Array.isArray(this.userInfo.links) ? this.userInfo.links.find(link => link.rel === 'edit-form') : undefined;\n\t\t},\n\t\tpaymentLink() {\n\t\t\treturn Array.isArray(this.userInfo.links) ? this.userInfo.links.find(link => link.rel === 'payment') : undefined;\n\t\t},\n\t\tprofileLink() {\n\t\t\treturn Array.isArray(this.userInfo.links) ? this.userInfo.links.find(link => link.rel === 'alternate') : undefined;\n\t\t},\n\t\thasStorage() {\n\t\t\treturn Utils.isObject(this.userInfo.storage) && typeof this.userInfo.storage.quota === 'number' && typeof this.userInfo.storage.free === 'number';\n\t\t},\n\t\tbudget() {\n\t\t\treturn Utils.formatBudget(this.userInfo.budget, this.currency);\n\t\t},\n\t\tuserName() {\n\t\t\tif (typeof this.userInfo.name === 'string') {\n\t\t\t\treturn this.userInfo.name;\n\t\t\t}\n\t\t\telse if (typeof this.userInfo.user_id === 'string') {\n\t\t\t\treturn this.userInfo.user_id;\n\t\t\t}\n\t\t\telse if (this.isAuthenticated) {\n\t\t\t\treturn 'User';\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn 'Guest';\n\t\t\t}\n\t\t},\n\t\tstorageUsed() {\n\t\t\tif (!this.hasStorage) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.userInfo.storage.quota - this.userInfo.storage.free;\n\t\t},\n\t\tstorageUsedPercent() {\n\t\t\tif (!this.hasStorage) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn Math.round(this.storageUsed / this.userInfo.storage.quota * 100);\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapActions({logoutUser: 'logout'}),\n\t\t...Utils.mapMutations('editor', {resetEditor: 'reset'}),\n\t\tasync logout() {\n\t\t\tawait this.logoutUser(false);\n\t\t\tUtils.ok(this, 'Logout successful.');\n\t\t},\n\t\tasync disconnect() {\n\t\t\tawait this.logoutUser(true);\n\t\t\tthis.resetEditor();\n\t\t\twindow.history.pushState({}, \"\", \"?\");\n\t\t},\n\t\tlogin() {\n\t\t\tthis.emit('showLogin');\n\t\t},\n\t\tformatMegabyte(num) {\n\t\t\tvar gb = 1024*1024*1024;\n\t\t\tif (num > gb) {\n\t\t\t\treturn Math.round(num/gb) + ' GB';\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn Math.round(num/(1024*1024)) + ' MB';\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.down {\n\twidth: 1em;\n\tpadding-right: 10px;\n}\n.name, .credits, .storage {\n\tdisplay: block;\n}\n.name {\n\tmax-width: 250px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\n.credits, .storage {\n\tmargin-top: 3px;\n\tfont-size: 12px;\n\tfont-weight: normal;\n}\n.storagePercent {\n\tbackground-color: green;\n\theight: 1em;\n\tborder-radius: 0.3em;\n\n\t.used {\n\t\tbackground-color: maroon;\n\t\twidth: 1px;\n\t\theight: 1em;\n\t\tborder-radius: 0.3em;\n\t}\n}\n.secondary-text {\n\tfont-size: 0.9em;\n\tline-height: 1.8em;\n\tcolor: #555;\n}\n.nowrap {\n\twhite-space: nowrap;\n}\nh4 {\n\tmargin: 0 0 10px 0;\n}\n.navButton {\n\tdisplay: block;\n\ttext-align: left;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserMenu.vue?vue&type=template&id=76333d38&scoped=true&\"\nimport script from \"./UserMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./UserMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserMenu.vue?vue&type=style&index=0&id=76333d38&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"76333d38\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Tabs',{ref:\"tabs\",attrs:{\"id\":\"userContent\"}},[(_vm.showJobs)?_c('Tab',{attrs:{\"id\":\"jobs\",\"name\":\"Data Processing\",\"icon\":\"fa-tasks\"},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},[_c('JobPanel')],1):_vm._e(),(_vm.showServices)?_c('Tab',{attrs:{\"id\":\"services\",\"name\":\"Web Services\",\"icon\":\"fa-cloud\"},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},[_c('ServicePanel')],1):_vm._e(),(_vm.showCustomProcesses)?_c('Tab',{attrs:{\"id\":\"customProcesses\",\"name\":\"Custom Processes\",\"icon\":\"fa-sitemap\"},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},[_c('CustomProcessPanel')],1):_vm._e(),(_vm.showFiles)?_c('Tab',{attrs:{\"id\":\"files\",\"name\":\"Files\",\"icon\":\"fa-file\"},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},[_c('FilePanel')],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DataTable',{ref:\"table\",staticClass:\"JobPanel\",attrs:{\"data\":_vm.data,\"columns\":_vm.columns},scopedSlots:_vm._u([{key:\"actions\",fn:function(p){return [_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsRead),expression:\"supportsRead\"}],attrs:{\"title\":\"Details\"},on:{\"click\":function($event){return _vm.showJobInfo(p.row)}}},[_c('i',{staticClass:\"fas fa-info\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('estimateJob')),expression:\"supports('estimateJob')\"}],attrs:{\"title\":\"Estimate\"},on:{\"click\":function($event){return _vm.estimateJob(p.row)}}},[_c('i',{staticClass:\"fas fa-file-invoice-dollar\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsUpdate),expression:\"supportsUpdate\"}],attrs:{\"title\":\"Edit metadata\",\"disabled\":!_vm.isJobInactive(p.row)},on:{\"click\":function($event){return _vm.editMetadata(p.row)}}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsRead),expression:\"supportsRead\"}],attrs:{\"title\":\"Edit process\"},on:{\"click\":function($event){return _vm.showInEditor(p.row)}}},[_c('i',{staticClass:\"fas fa-project-diagram\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsDelete),expression:\"supportsDelete\"}],attrs:{\"title\":\"Delete\"},on:{\"click\":function($event){return _vm.deleteJob(p.row)}}},[_c('i',{staticClass:\"fas fa-trash\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('startJob') && _vm.isJobInactive(p.row)),expression:\"supports('startJob') && isJobInactive(p.row)\"}],attrs:{\"title\":\"Start processing\"},on:{\"click\":function($event){return _vm.queueJob(p.row)}}},[_c('i',{staticClass:\"fas fa-play-circle\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('stopJob') && _vm.isJobActive(p.row)),expression:\"supports('stopJob') && isJobActive(p.row)\"}],attrs:{\"title\":\"Cancel processing\"},on:{\"click\":function($event){return _vm.cancelJob(p.row)}}},[_c('i',{staticClass:\"fas fa-stop-circle\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('downloadResults') && _vm.mayHaveResults(p.row)),expression:\"supports('downloadResults') && mayHaveResults(p.row)\"}],attrs:{\"title\":\"Download\"},on:{\"click\":function($event){return _vm.downloadResults(p.row)}}},[_c('i',{staticClass:\"fas fa-download\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('downloadResults') && _vm.mayHaveResults(p.row)),expression:\"supports('downloadResults') && mayHaveResults(p.row)\"}],attrs:{\"title\":\"View results\"},on:{\"click\":function($event){return _vm.viewResults(p.row, true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('debugJob')),expression:\"supports('debugJob')\"}],attrs:{\"title\":\"View logs\"},on:{\"click\":function($event){return _vm.showLogs(p.row)}}},[_c('i',{staticClass:\"fas fa-bug\"})])]}}])},[_c('template',{slot:\"toolbar\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsCreate),expression:\"supportsCreate\"}],attrs:{\"title\":\"Add new job for batch processing\",\"disabled\":!this.hasProcess},on:{\"click\":function($event){return _vm.createJobFromScript()}}},[_c('i',{staticClass:\"fas fa-plus\"}),_vm._v(\" Create Batch Job\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('computeResult')),expression:\"supports('computeResult')\"}],attrs:{\"title\":\"Run the process directly and view the results without storing them permanently\",\"disabled\":!this.hasProcess},on:{\"click\":_vm.executeProcess}},[_c('i',{staticClass:\"fas fa-play\"}),_vm._v(\" Run / Preview\")])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<DataTable ref=\"table\" :data=\"data\" :columns=\"columns\" class=\"JobPanel\">\n\t\t<template slot=\"toolbar\">\n\t\t\t<button title=\"Add new job for batch processing\" @click=\"createJobFromScript()\" v-show=\"supportsCreate\" :disabled=\"!this.hasProcess\"><i class=\"fas fa-plus\"></i> Create Batch Job</button>\n\t\t\t<button title=\"Run the process directly and view the results without storing them permanently\" @click=\"executeProcess\" v-show=\"supports('computeResult')\" :disabled=\"!this.hasProcess\"><i class=\"fas fa-play\"></i> Run / Preview</button>\n\t\t</template>\n\t\t<template #actions=\"p\">\n\t\t\t<button title=\"Details\" @click=\"showJobInfo(p.row)\" v-show=\"supportsRead\"><i class=\"fas fa-info\"></i></button>\n\t\t\t<button title=\"Estimate\" @click=\"estimateJob(p.row)\" v-show=\"supports('estimateJob')\"><i class=\"fas fa-file-invoice-dollar\"></i></button>\n\t\t\t<button title=\"Edit metadata\" @click=\"editMetadata(p.row)\" v-show=\"supportsUpdate\" :disabled=\"!isJobInactive(p.row)\"><i class=\"fas fa-edit\"></i></button>\n\t\t\t<button title=\"Edit process\" @click=\"showInEditor(p.row)\" v-show=\"supportsRead\"><i class=\"fas fa-project-diagram\"></i></button>\n\t\t\t<button title=\"Delete\" @click=\"deleteJob(p.row)\" v-show=\"supportsDelete\"><i class=\"fas fa-trash\"></i></button>\n\t\t\t<button title=\"Start processing\" @click=\"queueJob(p.row)\" v-show=\"supports('startJob') && isJobInactive(p.row)\"><i class=\"fas fa-play-circle\"></i></button>\n\t\t\t<button title=\"Cancel processing\" @click=\"cancelJob(p.row)\" v-show=\"supports('stopJob') && isJobActive(p.row)\"><i class=\"fas fa-stop-circle\"></i></button>\n\t\t\t<button title=\"Download\" @click=\"downloadResults(p.row)\" v-show=\"supports('downloadResults') && mayHaveResults(p.row)\"><i class=\"fas fa-download\"></i></button>\n\t\t\t<button title=\"View results\" @click=\"viewResults(p.row, true)\" v-show=\"supports('downloadResults') && mayHaveResults(p.row)\"><i class=\"fas fa-eye\"></i></button>\n\t\t\t<button title=\"View logs\" @click=\"showLogs(p.row)\" v-show=\"supports('debugJob')\"><i class=\"fas fa-bug\"></i></button>\n\t\t</template>\n\t</DataTable>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport WorkPanelMixin from './WorkPanelMixin';\nimport Utils from '../utils.js';\nimport { AbortController, Job } from '@openeo/js-client';\n\nconst WorkPanelMixinInstance = WorkPanelMixin('jobs', 'batch job', 'batch jobs');\n\nexport default {\n\tname: 'JobPanel',\n\tmixins: [WorkPanelMixinInstance, EventBusMixin],\n\tdata() {\n\t\treturn {\n\t\t\tcolumns: {\n\t\t\t\tid: {\n\t\t\t\t\tname: 'ID',\n\t\t\t\t\tprimaryKey: true,\n\t\t\t\t\thide: true\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\tname: 'Batch Job',\n\t\t\t\t\tcomputedValue: row => Utils.getResourceTitle(row),\n\t\t\t\t\tformat: value => Utils.formatIdOrTitle(value),\n\t\t\t\t\tedit: this.updateTitle\n\t\t\t\t},\n\t\t\t\tstatus: {\n\t\t\t\t\tname: 'Status',\n\t\t\t\t\tstylable: true\n\t\t\t\t},\n\t\t\t\tcreated: {\n\t\t\t\t\tname: 'Submitted',\n\t\t\t\t\tformat: 'Timestamp',\n\t\t\t\t\tsort: 'desc'\n\t\t\t\t},\n\t\t\t\tupdated: {\n\t\t\t\t\tname: 'Last update',\n\t\t\t\t\tformat: 'Timestamp'\n\t\t\t\t},\n\t\t\t\tactions: {\n\t\t\t\t\tname: 'Actions',\n\t\t\t\t\tfilterable: false,\n\t\t\t\t\tsort: false\n\t\t\t\t}\n\t\t\t},\n\t\t\twatchers: {},\n\t\t\tjobUpdater: null,\n\t\t\trunId: 0\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.listen('replaceProcess', this.replaceProcess);\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection']),\n\t\t...Utils.mapGetters(['supports', 'supportsBilling', 'supportsBillingPlans']),\n\t\t...Utils.mapGetters('editor', ['hasProcess']),\n\t\t...Utils.mapState('editor', ['process'])\n\t},\n\twatch: {\n\t\tdata: {\n\t\t\thandler: function(updatedJobs) {\n\t\t\t\t// Update Watchers\n\t\t\t\tthis.watchers = {};\n\t\t\t\tfor(let job of updatedJobs) {\n\t\t\t\t\tif (Utils.isActiveJobStatusCode(job.status)) {\n\t\t\t\t\t\tthis.watchers[job.id] = job;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapActions('jobs', ['queue', 'cancel']),\n\t\tstartSyncTimer() {\n\t\t\tWorkPanelMixinInstance.methods.startSyncTimer.call(this);\n\t\t\tthis.jobUpdater = setInterval(this.executeWatchers, 10000);\n\t\t},\n\t\tstopSyncTimer() {\n\t\t\tWorkPanelMixinInstance.methods.stopSyncTimer.call(this);\n\t\t\tif (this.jobUpdater !== null) {\n\t\t\t\tclearInterval(this.jobUpdater);\n\t\t\t}\n\t\t},\n\t\tshowInEditor(job) {\n\t\t\tthis.refreshElement(job, updatedJob => this.emit('editProcess', updatedJob));\n\t\t},\n\t\tasync executeProcess() {\n\t\t\tlet abortController = new AbortController();\n\t\t\tlet snotifyConfig = {\n\t\t\t\ttimeout: 0,\n\t\t\t\ttype: 'async',\n\t\t\t\tbuttons: [{\n\t\t\t\t\ttext: 'Cancel',\n\t\t\t\t\taction: toast => {\n\t\t\t\t\t\tabortController.abort();\n\t\t\t\t\t\tthis.$snotify.remove(toast.id, true);\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t};\n\t\t\tlet toast;\n\t\t\ttry {\n\t\t\t\tthis.runId++;\n\t\t\t\tlet message = \"A process is currently executed synchronously...\";\n\t\t\t\tlet title = `Run / Preview #${this.runId}`;\n\t\t\t\tlet endlessPromise = () => new Promise(() => {}); // Pass a promise to snotify that never resolves as we manually close the toast\n\t\t\t\ttoast = this.$snotify.async(message, title, endlessPromise, snotifyConfig);\n\t\t\t\tlet result = await this.connection.computeResult(this.process, null, null, abortController);\n\t\t\t\tthis.emit('viewSyncResult', result);\n\t\t\t} catch(error) {\n\t\t\t\tif (axios.isCancel(error)) {\n\t\t\t\t\t// Do nothing, we expected the cancellation\n\t\t\t\t}\n\t\t\t\telse if (typeof error.message === 'string' && Utils.isObject(error.response) && [400,500].includes(error.response.status)) {\n\t\t\t\t\tthis.emit('viewLogs', [{\n\t\t\t\t\t\tid: error.id,\n\t\t\t\t\t\tcode: error.code,\n\t\t\t\t\t\tlevel: 'error',\n\t\t\t\t\t\tmessage: error.message,\n\t\t\t\t\t\tlinks: error.links || []\n\t\t\t\t\t}]);\n\t\t\t\t\tUtils.error(this, \"Synchronous processing failed. Please see the logs for details.\", \"Processing Error\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tUtils.exception(this, error, \"Server Error\");\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (toast) {\n\t\t\t\t\tthis.$snotify.remove(toast.id, true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tjobCreated(job) {\n\t\t\tvar buttons = [];\n\t\t\tif (this.supports('estimateJob')) {\n\t\t\t\tbuttons.push({text: 'Estimate', action: () => this.estimateJob(job)});\n\t\t\t}\n\t\t\tif (this.supports('startJob')) {\n\t\t\t\tbuttons.push({text: 'Start processing', action: () => this.queueJob(job)});\n\t\t\t}\n\t\t\tif (this.supports('deleteJob')) {\n\t\t\t\tbuttons.push({text: 'Delete', action: () => this.deleteJob(job)});\n\t\t\t}\n\t\t\tUtils.confirm(this, 'Job \"' + Utils.getResourceTitle(job) + '\" created!', buttons);\n\t\t},\n\t\tgetTitleField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'title',\n\t\t\t\tlabel: 'Title',\n\t\t\t\tschema: {type: 'string'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetDescriptionField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'description',\n\t\t\t\tlabel: 'Description',\n\t\t\t\tschema: {type: 'string', subtype: 'commonmark'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\tdescription: 'CommonMark (Markdown) is allowed.',\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetBillingPlanField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tname: 'plan',\n\t\t\t\tlabel: 'Billing plan',\n\t\t\t\tschema: {type: 'string', subtype: 'billing-plan'},\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetBudgetField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'budget',\n\t\t\t\tlabel: 'Budget',\n\t\t\t\tschema: {type: 'number', subtype: 'budget'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tnormalizeToDefaultData(data) {\n\t\t\tif (typeof data.title !== 'undefined' && (typeof data.title !== 'string' || data.title.length === 0)) {\n\t\t\t\tdata.title = null;\n\t\t\t}\n\t\t\tif (typeof data.description !== 'undefined' && (typeof data.description !== 'string' || data.description.length === 0)) {\n\t\t\t\tdata.description = null;\n\t\t\t}\n\t\t\tif (typeof data.plan !== 'undefined' && (typeof data.plan !== 'string' || data.plan.length === 0)) {\n\t\t\t\tdata.plan = null;\n\t\t\t}\n\t\t\tif (typeof data.budget !== 'undefined' && (typeof data.budget !== 'number' || data.budget < 0)) {\n\t\t\t\tdata.budget = null;\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\tasync createJob(process, data) {\n\t\t\ttry {\n\t\t\t\tdata = this.normalizeToDefaultData(data);\n\t\t\t\tlet job = await this.create({parameters: [process, data.title, data.description, data.plan, data.budget]});\n\t\t\t\tthis.jobCreated(job);\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error, 'Create Job Error: ' + (data.title || ''));\n\t\t\t}\n\t\t},\n\t\tcreateJobFromScript() {\n\t\t\tvar fields = [\n\t\t\t\tthis.getTitleField(),\n\t\t\t\tthis.getDescriptionField(),\n\t\t\t\tthis.supportsBillingPlans ? this.getBillingPlanField() : null,\n\t\t\t\tthis.supportsBilling ? this.getBudgetField() : null\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Create new batch job\", fields, data => this.createJob(this.process, data));\n\t\t},\n\t\tdeleteJob(job) {\n\t\t\tif (!confirm(`Do you really want to delete the batch job \"${Utils.getResourceTitle(job)}\"?`)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.delete({data: job})\n\t\t\t\t.catch(error => Utils.exception(this, error, 'Delete Job Error: ' + Utils.getResourceTitle(job)));\n\t\t},\n\t\texecuteWatchers() {\n\t\t\tfor(var i in this.watchers) {\n\t\t\t\tthis.refreshElement(this.watchers[i], (updated, old) => {\n\t\t\t\t\tif (old.status !== 'finished' && updated.status === 'finished') {\n\t\t\t\t\t\tvar buttons = [];\n\t\t\t\t\t\tif (this.supports('downloadResults')) {\n\t\t\t\t\t\t\tbuttons.push({text: 'Download', action: () => this.downloadResults(updated)});\n\t\t\t\t\t\t\tbuttons.push({text: 'View', action: () => this.viewResults(updated)});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tUtils.confirm(this, 'Job \"' + Utils.getResourceTitle(updated) + '\" has finished!', buttons);\n\t\t\t\t\t}\n\t\t\t\t\telse if (old.status !== 'error' && updated.status === 'error') {\n\t\t\t\t\t\tUtils.error(this, 'Job \"' + Utils.getResourceTitle(updated) + '\" has stopped due to an error or timeout.');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (old.status !== updated.status) {\n\t\t\t\t\t\tthis.emit('jobStatusUpdated', updated, old);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tasync showJobInfo(job) {\n\t\t\tthis.refreshElement(job, async (updatedJob) => {\n\t\t\t\tlet result = null;\n\t\t\t\tif (updatedJob.status === 'finished') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresult = await updatedJob.getResultsAsStac();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tUtils.exception(this, error, \"Load Results Error: \" + Utils.getResourceTitle(updatedJob));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.emit('showModal', 'JobInfoModal', {job: updatedJob.getAll(), result});\n\t\t\t});\n\t\t},\n\t\tasync estimateJob(job) {\n\t\t\t// Doesn't need to go through job store as it doesn't change job-related data\n\t\t\ttry {\n\t\t\t\tlet estimate = await job.estimateJob();\n\t\t\t\tthis.emit('showModal', 'JobEstimateModal', {job: job.getAll(), estimate});\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, \"Job Estimate Error: \" + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tshowLogs(job) {\n\t\t\tthis.emit('viewLogs', job);\n\t\t},\n\t\treplaceProcess(job, process) {\n\t\t\tif (job instanceof Job) {\n\t\t\t\tif (this.isJobActive(job)) {\n\t\t\t\t\tUtils.error(this, \"Can't update process while batch job is running.\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.updateJob(job, {process: process});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\teditMetadata(oldJob) {\n\t\t\tthis.refreshElement(oldJob, job => {\n\t\t\t\tvar fields = [\n\t\t\t\t\tthis.getTitleField(job.title),\n\t\t\t\t\tthis.getDescriptionField(job.description),\n\t\t\t\t\tthis.supportsBillingPlans ? this.getBillingPlanField(job.plan) : null,\n\t\t\t\t\tthis.supportsBilling ? this.getBudgetField(job.budget) : null\n\t\t\t\t];\n\t\t\t\tthis.emit('showDataForm', \"Edit batch job\", fields, data => this.updateJob(job, data));\n\t\t\t});\n\t\t},\n\t\tupdateTitle(job, newTitle) {\n\t\t\tthis.updateJob(job, {title: newTitle});\n\t\t},\n\t\tasync updateJob(job, parameters) {\n\t\t\ttry {\n\t\t\t\tlet updatedJob = await this.update({data: job, parameters: this.normalizeToDefaultData(parameters)});\n\t\t\t\tUtils.ok(this, 'Job \"' + Utils.getResourceTitle(updatedJob) + '\" successfully updated.');\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Update Job Error: ' + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tasync queueJob(job) {\n\t\t\tthis.refreshElement(job, async (updatedJob) => {\n\t\t\t\tif (updatedJob.status === 'finished' && !confirm(`The batch job \"${Utils.getResourceTitle(updatedJob)}\" has already finished with results. Queueing the job again may discard all previous results! Do you really want to queue it again?`)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tlet updatedJob = await this.queue({data: job});\n\t\t\t\t\tUtils.ok(this, 'Job \"' + Utils.getResourceTitle(updatedJob) + '\" successfully queued.');\n\t\t\t\t} catch(error) {\n\t\t\t\t\tUtils.exception(this, error, 'Queue Job Error: ' + Utils.getResourceTitle(job));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tasync cancelJob(job) {\n\t\t\tif (!confirm(`Do you really want to cancel the execution of batch job \"${file.path}\"?`)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlet updatedJob = await this.cancel({data: job});\n\t\t\t\tUtils.ok(this, 'Job \"' + Utils.getResourceTitle(updatedJob) + '\" successfully canceled.');\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Cancel Job Error: ' + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tasync viewResults(job) {\t\t\t\n\t\t\t// Doesn't need to go through job store as it doesn't change job-related data\n\t\t\ttry {\n\t\t\t\tlet stac = await job.getResultsAsStac()\n\t\t\t\tif(Utils.size(stac.assets) == 0) {\n\t\t\t\t\tUtils.error(this, 'No results available for job \"' + Utils.getResourceTitle(job) + '\".');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.emit('viewJobResults', stac, job);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'View Result Error: ' + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tasync downloadResults(job) {\t\n\t\t\t// Doesn't need to go through job store as it doesn't change job-related data\n\t\t\ttry {\n\t\t\t\tlet result = await job.getResultsAsStac();\n\t\t\t\tif(Utils.size(result.assets) == 0) {\n\t\t\t\t\tUtils.error(this, 'No results available for job \"' + Utils.getResourceTitle(job) + '\".');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.emit('showModal', 'DownloadAssetsModal', {job, result});\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Download Result Error: ' + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tmayHaveResults(job) {\n\t\t\treturn (typeof job.status !== 'string' || job.status.toLowerCase() == 'finished'); // todo: We may also want to check for canceled or errored here.\n\t\t},\n\t\tisJobInactive(job) {\n\t\t\treturn Utils.isActiveJobStatusCode(job.status) !== true;\n\t\t},\n\t\tisJobActive(job) {\n\t\t\treturn Utils.isActiveJobStatusCode(job.status) !== false;\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.JobPanel {\n\t.title {\n\t\twidth: 25%;\n\n\t\t.id {\n\t\t\tcolor: #777;\n\t\t}\n\t}\n\t.consumed_credits, .updated, .created {\n\t\ttext-align: right;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JobPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JobPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JobPanel.vue?vue&type=template&id=3bcd07ae&\"\nimport script from \"./JobPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./JobPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./JobPanel.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DataTable',{ref:\"table\",staticClass:\"ServicePanel\",attrs:{\"data\":_vm.data,\"columns\":_vm.columns},scopedSlots:_vm._u([{key:\"actions\",fn:function(p){return [_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsRead),expression:\"supportsRead\"}],attrs:{\"title\":\"Details\"},on:{\"click\":function($event){return _vm.serviceInfo(p.row)}}},[_c('i',{staticClass:\"fas fa-info\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsUpdate),expression:\"supportsUpdate\"}],attrs:{\"title\":\"Edit metadata\"},on:{\"click\":function($event){return _vm.editMetadata(p.row)}}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsRead),expression:\"supportsRead\"}],attrs:{\"title\":\"Edit process\"},on:{\"click\":function($event){return _vm.showInEditor(p.row)}}},[_c('i',{staticClass:\"fas fa-project-diagram\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsDelete),expression:\"supportsDelete\"}],attrs:{\"title\":\"Delete\"},on:{\"click\":function($event){return _vm.deleteService(p.row)}}},[_c('i',{staticClass:\"fas fa-trash\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(p.row.enabled && _vm.isMapServiceSupported(p.row.type)),expression:\"p.row.enabled && isMapServiceSupported(p.row.type)\"}],attrs:{\"title\":\"View on map\"},on:{\"click\":function($event){return _vm.viewService(p.row)}}},[_c('i',{staticClass:\"fas fa-map\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('debugService')),expression:\"supports('debugService')\"}],attrs:{\"title\":\"View logs\"},on:{\"click\":function($event){return _vm.showLogs(p.row)}}},[_c('i',{staticClass:\"fas fa-bug\"})])]}}])},[_c('template',{slot:\"toolbar\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsCreate),expression:\"supportsCreate\"}],attrs:{\"title\":\"Add new service\",\"disabled\":!this.hasProcess},on:{\"click\":function($event){return _vm.createServiceFromScript()}}},[_c('i',{staticClass:\"fas fa-plus\"}),_vm._v(\" Create\")])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<DataTable ref=\"table\" :data=\"data\" :columns=\"columns\" class=\"ServicePanel\">\n\t\t<template slot=\"toolbar\">\n\t\t\t<button title=\"Add new service\" @click=\"createServiceFromScript()\" v-show=\"supportsCreate\" :disabled=\"!this.hasProcess\"><i class=\"fas fa-plus\"></i> Create</button>\n\t\t</template>\n\t\t<template #actions=\"p\">\n\t\t\t<button title=\"Details\" @click=\"serviceInfo(p.row)\" v-show=\"supportsRead\"><i class=\"fas fa-info\"></i></button>\n\t\t\t<button title=\"Edit metadata\" @click=\"editMetadata(p.row)\" v-show=\"supportsUpdate\"><i class=\"fas fa-edit\"></i></button>\n\t\t\t<button title=\"Edit process\" @click=\"showInEditor(p.row)\" v-show=\"supportsRead\"><i class=\"fas fa-project-diagram\"></i></button>\n\t\t\t<button title=\"Delete\" @click=\"deleteService(p.row)\" v-show=\"supportsDelete\"><i class=\"fas fa-trash\"></i></button>\n\t\t\t<button v-show=\"p.row.enabled && isMapServiceSupported(p.row.type)\" title=\"View on map\" @click=\"viewService(p.row)\"><i class=\"fas fa-map\"></i></button>\n\t\t\t<button title=\"View logs\" @click=\"showLogs(p.row)\" v-show=\"supports('debugService')\"><i class=\"fas fa-bug\"></i></button>\n\t\t</template>\n\t</DataTable>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport WorkPanelMixin from './WorkPanelMixin';\nimport Utils from '../utils';\nimport { Service } from '@openeo/js-client';\n\nexport default {\n\tname: 'ServicePanel',\n\tmixins: [WorkPanelMixin('services', 'web service', 'web services'), EventBusMixin],\n\tdata() {\n\t\treturn {\n\t\t\tcolumns: {\n\t\t\t\tid: {\n\t\t\t\t\tname: 'ID',\n\t\t\t\t\tprimaryKey: true,\n\t\t\t\t\thide: true\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\tname: 'Web Service',\n\t\t\t\t\tcomputedValue: row => Utils.getResourceTitle(row),\n\t\t\t\t\tformat: value => Utils.formatIdOrTitle(value),\n\t\t\t\t\tedit: this.updateTitle\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\tname: 'Type',\n\t\t\t\t\tformat: value => typeof value === 'string' ? value.toUpperCase() : value,\n\t\t\t\t},\n\t\t\t\tenabled: {\n\t\t\t\t\tname: 'Enabled',\n\t\t\t\t\tedit: this.toggleEnabled\n\t\t\t\t},\n\t\t\t\tcreated: {\n\t\t\t\t\tname: 'Submitted',\n\t\t\t\t\tformat: 'Timestamp',\n\t\t\t\t\tsort: 'desc'\n\t\t\t\t},\n\t\t\t\tactions: {\n\t\t\t\t\tname: 'Actions',\n\t\t\t\t\tfilterable: false,\n\t\t\t\t\tsort: false\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState('editor', ['process']),\n\t\t...Utils.mapGetters('editor', ['hasProcess']),\n\t\t...Utils.mapState(['serviceTypes']),\n\t\t...Utils.mapGetters(['supports', 'supportsBilling', 'supportsBillingPlans'])\n\t},\n\tmounted() {\n\t\tthis.listen('replaceProcess', this.replaceProcess);\n\t},\n\tmethods: {\n\t\tisMapServiceSupported(mapType) {\n\t\t\tif (typeof mapType !== 'string') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn this.$config.supportedMapServices.includes(mapType.toLowerCase());\n\t\t},\n\t\tshowInEditor(service) {\n\t\t\tthis.refreshElement(service, updatedService => this.emit('editProcess', updatedService));\n\t\t},\n\t\tshowLogs(service) {\n\t\t\tthis.emit('viewLogs', service);\n\t\t},\n\t\tserviceCreated(service) {\n\t\t\tvar buttons = [];\n\t\t\tif (this.isMapServiceSupported(service.type)) {\n\t\t\t\tbuttons.push({text: 'View on map', action: () => this.viewService(service)});\n\t\t\t}\n\t\t\tif (this.supportsRead) {\n\t\t\t\tbuttons.push({text: 'Details', action: () => this.serviceInfo(service)});\n\t\t\t}\n\t\t\tif (this.supportsDelete) {\n\t\t\t\tbuttons.push({text: 'Delete', action: () => this.deleteService(service)});\n\t\t\t}\n\t\t\tUtils.confirm(this, 'Web Service created!', buttons);\n\t\t},\n\t\tgetTitleField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'title',\n\t\t\t\tlabel: 'Title',\n\t\t\t\tschema: {type: 'string'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetDescriptionField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'description',\n\t\t\t\tlabel: 'Description',\n\t\t\t\tschema: {type: 'string', subtype: 'commonmark'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\tdescription: 'CommonMark (Markdown) is allowed.',\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetServiceTypeField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tname: 'type',\n\t\t\t\tlabel: 'Type',\n\t\t\t\tschema: {type: 'string', subtype: 'service-type'},\n\t\t\t\tvalue: value\n\t\t\t};\n\t\t},\n\t\tgetBillingPlanField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tname: 'plan',\n\t\t\t\tlabel: 'Billing plan',\n\t\t\t\tschema: {type: 'string', subtype: 'billing-plan'},\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetBudgetField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'budget',\n\t\t\t\tlabel: 'Budget',\n\t\t\t\tschema: {type: 'number', subtype: 'budget'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetEnabledField(value = true) {\n\t\t\treturn {\n\t\t\t\tname: 'enabled',\n\t\t\t\tlabel: 'Enabled',\n\t\t\t\tschema: {type: 'boolean'},\n\t\t\t\tdefault: true,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetConfigField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tname: 'configuration',\n\t\t\t\tlabel: 'Service Configuration',\n\t\t\t\tschema: {type: 'object', subtype: 'service-config'},\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tnormalizeToDefaultData(data) {\n\t\t\tif (typeof data.title !== 'undefined' && (typeof data.title !== 'string' || data.title.length === 0)) {\n\t\t\t\tdata.title = null;\n\t\t\t}\n\t\t\tif (typeof data.description !== 'undefined' && (typeof data.description !== 'string' || data.description.length === 0)) {\n\t\t\t\tdata.description = null;\n\t\t\t}\n\t\t\tif (typeof data.enabled !== 'undefined' && typeof data.enabled !== 'boolean') {\n\t\t\t\tdata.enabled = true;\n\t\t\t}\n\t\t\tif (typeof data.configuration !== 'undefined' && !Utils.isObject(data.configuration)) {\n\t\t\t\tdata.configuration = {};\n\t\t\t}\n\t\t\tif (typeof data.plan !== 'undefined' && (typeof data.plan !== 'string' || data.plan.length === 0)) {\n\t\t\t\tdata.plan = null;\n\t\t\t}\n\t\t\tif (typeof data.budget !== 'undefined' && (typeof data.budget !== 'number' || data.budget < 0)) {\n\t\t\t\tdata.budget = null;\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\tasync createService(script, data) {\n\t\t\tdata = this.normalizeToDefaultData(data);\n\t\t\ttry {\n\t\t\t\tlet service = await this.create({parameters: [script, data.type, data.title, data.description, data.enabled, data.configuration, data.plan, data.budget]});\n\t\t\t\tthis.serviceCreated(service);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Create Service Error: ' + (data.title || ''));\n\t\t\t}\n\t\t},\n\t\tcreateServiceFromScript() {\n\t\t\tvar fields = [\n\t\t\t\tthis.getTitleField(),\n\t\t\t\tthis.getDescriptionField(),\n\t\t\t\tthis.getServiceTypeField(),\n\t\t\t\tthis.getEnabledField(),\n\t\t\t\tthis.supportsBillingPlans ? this.getBillingPlanField() : null,\n\t\t\t\tthis.supportsBilling ? this.getBudgetField() : null,\n\t\t\t\tthis.getConfigField()\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Create new web service\", fields, data => this.createService(this.process, data));\n\t\t},\n\t\teditMetadata(oldService) {\n\t\t\tthis.refreshElement(oldService, service => {\n\t\t\t\tvar fields = [\n\t\t\t\t\tthis.getTitleField(service.title),\n\t\t\t\t\tthis.getDescriptionField(service.description),\n\t\t\t\t\tthis.getEnabledField(service.enabled),\n\t\t\t\t\tthis.supportsBillingPlans ? this.getBillingPlanField(service.plan) : null,\n\t\t\t\t\tthis.supportsBilling ? this.getBudgetField(service.budget) : null,\n\t\t\t\t\tthis.getConfigField(service.configuration)\n\t\t\t\t];\n\t\t\t\tthis.emit('showDataForm', \"Edit web service\", fields, data => this.updateService(service, data));\n\t\t\t});\n\t\t},\n\t\tserviceInfo(service) {\n\t\t\tthis.refreshElement(service, updatedService => {\n\t\t\t\tthis.emit('showModal', 'ServiceInfoModal', {service: updatedService.getAll()});\n\t\t\t});\n\t\t},\n\t\treplaceProcess(service, process) {\n\t\t\tif (service instanceof Service) {\n\t\t\t\tthis.updateService(service, {process: process});\n\t\t\t}\n\t\t},\n\t\tupdateTitle(service, newTitle) {\n\t\t\tthis.updateService(service, {title: newTitle});\n\t\t},\n\t\ttoggleEnabled(service) {\n\t\t\tthis.updateService(service, {enabled: !service.enabled});\n\t\t},\n\t\tasync updateService(service, parameters) {\n\t\t\ttry {\n\t\t\t\tlet updatedService = await this.update({data: service, parameters: this.normalizeToDefaultData(parameters)});\n\t\t\t\tUtils.ok(this, 'Service \"' + Utils.getResourceTitle(updatedService) + '\" successfully updated.');\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, \"Update Service Error: \" + Utils.getResourceTitle(service));\n\t\t\t}\n\t\t},\n\t\tasync deleteService(service) {\n\t\t\tif (!confirm(`Do you really want to delete the service \"${Utils.getResourceTitle(service)}\"?`)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait this.delete({data: service});\n\t\t\t\tthis.emit('removeWebService', service.id);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Delete Service Error: ' + Utils.getResourceTitle(service));\n\t\t\t}\n\t\t},\n\t\tviewService(service) {\n\t\t\tthis.emit('viewWebService', service);\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.ServicePanel .title {\n\twidth: 25%;\n}\n.ServicePanel .type {\n\ttext-align: center;\n}\n.ServicePanel .enabled {\n\ttext-align: center;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServicePanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServicePanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ServicePanel.vue?vue&type=template&id=3de52504&\"\nimport script from \"./ServicePanel.vue?vue&type=script&lang=js&\"\nexport * from \"./ServicePanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ServicePanel.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<Tabs id=\"userContent\" ref=\"tabs\">\n\t\t<Tab v-if=\"showJobs\" id=\"jobs\" name=\"Data Processing\" icon=\"fa-tasks\" @show=\"onShow\" @hide=\"onHide\">\n\t\t\t<JobPanel />\n\t\t</Tab>\n\t\t<Tab v-if=\"showServices\" id=\"services\" name=\"Web Services\" icon=\"fa-cloud\" @show=\"onShow\" @hide=\"onHide\">\n\t\t\t<ServicePanel />\n\t\t</Tab>\n\t\t<Tab v-if=\"showCustomProcesses\" id=\"customProcesses\" name=\"Custom Processes\" icon=\"fa-sitemap\" @show=\"onShow\" @hide=\"onHide\">\n\t\t\t<CustomProcessPanel />\n\t\t</Tab>\n\t\t<Tab v-if=\"showFiles\" id=\"files\" name=\"Files\" icon=\"fa-file\" @show=\"onShow\" @hide=\"onHide\">\n\t\t\t<FilePanel />\n\t\t</Tab>\n\t</Tabs>\n</template>\n\n<script>\nimport Utils from '../utils.js';\nimport Tabs from '@openeo/vue-components/components/Tabs.vue';\nimport Tab from '@openeo/vue-components/components/Tab.vue';\nimport FilePanel from './FilePanel.vue';\nimport JobPanel from './JobPanel.vue';\nimport CustomProcessPanel from './CustomProcessPanel.vue';\nimport ServicePanel from './ServicePanel.vue';\n\nexport default {\n\tname: 'UserWorkspace',\n\tcomponents: {\n\t\tFilePanel,\n\t\tJobPanel,\n\t\tCustomProcessPanel,\n\t\tServicePanel,\n\t\tTabs,\n\t\tTab\n\t},\n\tcomputed: {\n\t\t...Utils.mapGetters(['supports']),\n\t\tshowJobs() {\n\t\t\treturn (this.supports('listJobs') || this.supports('createJob'));\n\t\t},\n\t\tshowServices() {\n\t\t\treturn (this.supports('listServices') || this.supports('createService'));\n\t\t},\n\t\tshowCustomProcesses() {\n\t\t\treturn (this.supports('listUserProcesses') || this.supports('setUserProcess'));\n\t\t},\n\t\tshowFiles() {\n\t\t\treturn (this.supports('listFiles') || this.supports('uploadFile'));\n\t\t}\n\t},\n\tmethods: {\n\t\tonShow(tab) {\n\t\t\tif (tab.$children.length && typeof tab.$children[0].onShow === 'function') {\n\t\t\t\ttab.$children[0].onShow();\n\t\t\t}\n\t\t},\n\t\tonHide(tab) {\n\t\t\tif (tab.$children.length && typeof tab.$children[0].onHide === 'function') {\n\t\t\t\ttab.$children[0].onHide();\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style>\n#userContent .tabContent {\n\tpadding: 5px;\n}\n#userContent .data-table .title {\n\tword-break: break-all;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserWorkspace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserWorkspace.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserWorkspace.vue?vue&type=template&id=3fce6407&\"\nimport script from \"./UserWorkspace.vue?vue&type=script&lang=js&\"\nexport * from \"./UserWorkspace.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserWorkspace.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Tabs',{ref:\"tabs\",attrs:{\"id\":\"viewerContent\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('Tab',{attrs:{\"id\":\"mapView\",\"name\":\"Map\",\"icon\":\"fa-map\",\"selected\":true},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar tab = ref.tab;\nreturn [_c('MapViewer',{ref:\"mapViewer\",attrs:{\"id\":\"mapCanvas\",\"show\":tab.active,\"center\":[50.1725, 9.15],\"zoom\":6,\"removableLayers\":true},on:{\"drop\":function($event){return _vm.onDrop($event)}}})]}}])})]},proxy:true},{key:\"dynamic\",fn:function(ref){\nvar tab = ref.tab;\nreturn [(_vm.logViewerIcons.includes(tab.icon))?_c('LogViewer',{attrs:{\"data\":tab.data}}):(tab.icon === 'fa-image')?_c('ImageViewer',{attrs:{\"data\":tab.data}}):_c('DataViewer',{attrs:{\"data\":tab.data}})]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"imageViewer\",staticClass:\"imageViewer\",class:{'fullscreen': _vm.fullScreen}},[_c('div',{staticClass:\"toolbar\"},[_c('span',{staticClass:\"value\",attrs:{\"title\":_vm.valueTitle}},[_vm._v(_vm._s(_vm.valueText))]),_c('FullscreenButton',{staticClass:\"fullscreen-button\",attrs:{\"element\":function () { return _vm.$refs.imageViewer; }},on:{\"changed\":_vm.fullscreenToggled}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loaded),expression:\"!loaded\"}],staticClass:\"noDataMessage\"},[_c('i',{staticClass:\"fas fa-spinner fa-spin\"}),_vm._v(\" Loading image...\")]),_c('canvas',{ref:\"canvas\",class:{'fullsize': _vm.fullSize},attrs:{\"title\":_vm.title},on:{\"click\":_vm.resize,\"mousemove\":_vm.getPixelValue,\"mouseout\":_vm.resetPixelValue,\"load\":_vm.imageLoaded}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"imageViewer\" ref=\"imageViewer\" :class=\"{'fullscreen': fullScreen}\">\n\t\t<div class=\"toolbar\">\n\t\t\t<span class=\"value\" :title=\"valueTitle\">{{ valueText }}</span>\n\t\t\t<FullscreenButton class=\"fullscreen-button\" :element=\"() => $refs.imageViewer\" @changed=\"fullscreenToggled\" />\n\t\t</div>\n\t\t<div v-show=\"!loaded\" class=\"noDataMessage\"><i class=\"fas fa-spinner fa-spin\"></i> Loading image...</div>\n\t\t<canvas ref=\"canvas\" :class=\"{'fullsize': fullSize}\" :title=\"title\" @click=\"resize\" @mousemove=\"getPixelValue\" @mouseout=\"resetPixelValue\" @load=\"imageLoaded\" />\n\t</div>\n</template>\n\n<script>\nimport FullscreenButton from './FullscreenButton.vue';\nimport Utils from '../utils';\n\nexport default {\n\tname: 'ImageViewer',\n\tcomponents: {\n\t\tFullscreenButton\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tfullScreen: false,\n\t\t\tfullSize: false,\n\t\t\timg: null,\n\t\t\tloaded: false,\n\t\t\tcontext: null,\n\t\t\tvalue: '-'\n\t\t};\n\t},\n\tmounted() {\n\t\tif (this.data.blob) {\n\t\t\tthis.showImageBlob(this.data.blob);\n\t\t}\n\t\telse if (this.data.url) {\n\t\t\tthis.showImage(this.data.url);\n\t\t}\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\tif (this.fullScreen) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\treturn this.fullSize ? \"Click to shrink (fit to screen)\" : \"Click to enlarge (full size)\";\n\t\t},\n\t\tvalueTitle() {\n\t\t\treturn (this.fullScreen || this.fullSize) ? \"\" : \"Show in full size to get precise values\";\n\t\t},\n\t\tvalueText() {\n\t\t\tif (this.fullScreen || this.fullSize) {\n\t\t\t\treturn `Pixel Value: ${this.value}`;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn `Estimated Pixel Value: ${this.value}`;\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tshowImage(src) {\n\t\t\tthis.loaded = false;\n\t\t\tthis.img = new Image();\n\t\t\tthis.img.crossOrigin = \"Anonymous\";\n\t\t\tthis.img.onload = this.imageLoaded.bind(this)\n\t\t\tthis.img.src = src;\n\t\t},\n\t\tshowImageBlob(data) {\n\t\t\tthis.showImage(URL.createObjectURL(data));\n\t\t},\n\t\timageLoaded() {\n\t\t\tthis.loaded = true;\n\t\t\t\n\t\t\tthis.$refs.canvas.width = this.img.naturalWidth;\n\t\t\tthis.$refs.canvas.height = this.img.naturalHeight;\n\t\t\tthis.context = this.$refs.canvas.getContext('2d');\n\t\t\tthis.context.drawImage(this.img, 0, 0);\n\t\t},\n\t\tfullscreenToggled(open) {\n\t\t\tthis.fullScreen = open;\n\t\t},\n\t\tresize() {\n\t\t\tif (!this.fullScreen) {\n\t\t\t\tthis.fullSize = !this.fullSize;\n\t\t\t}\n\t\t},\n\t\tresetPixelValue() {\n\t\t\tthis.value = '-';\n\t\t},\n\t\tgetPixelValue(event) {\n\t\t\ttry {\n\t\t\t\tlet size = this.$refs.canvas.getBoundingClientRect();\n\t\t\t\tlet xScale = this.img.naturalWidth / size.width;\n\t\t\t\tlet yScale = this.img.naturalHeight / size.height;\n\t\t\t\tlet x = event.offsetX * xScale;\n\t\t\t\tlet y = event.offsetY * yScale;\n\t\t\t\tlet [r,g,b,a] = this.context.getImageData(Math.ceil(x), Math.ceil(y), 1, 1).data;\n\t\t\t\tif (a === 0) {\n\t\t\t\t\t// Transparent (no-data?)\n\t\t\t\t\tthis.value = 'no data';\n\t\t\t\t}\n\t\t\t\telse if (r == g && g === b) {\n\t\t\t\t\tif (a === 255) {\n\t\t\t\t\t\t// Grayscale\n\t\t\t\t\t\tthis.value = r;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Grayscale with Alpha\n\t\t\t\t\t\tthis.value = `${r}, Alpha: ${a}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.value = `Red: ${r}, Green: ${g}, Blue: ${b}, Alpha: ${a}`;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.value = 'n/a';\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n.imageViewer {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n\ttext-align: center;\n\tbackground-color: #eee;\n\toverflow: auto;\n}\n.toolbar {\n\tz-index: 1;\n    position: sticky;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\tpadding: 1em;\n\tbox-sizing: border-box;\n\ttext-align: left;\n}\n.fullscreen-button {\n\tfloat: right;\n}\n.value {\n\tdisplay: inline-block;\n\tbackground-color: rgba(255,255,255, 0.5);\n\tborder-radius: 5px;\n\tpadding: 5px;\n\tmargin: -5px;\n}\ncanvas {\n\tmax-width: 100%;\n\tmax-height: 100%;\n\tmargin: auto;\n\tcursor: zoom-in;\n\tobject-fit: contain;\n\tbox-sizing: border-box;\n\tbackground-color: white;\n}\ncanvas.fullsize, .fullscreen canvas {\n\tmax-width: none;\n\tmax-height: none;\n\tobject-fit: none;\n\tcursor: zoom-out;\n}\n.fullscreen canvas {\n\tcursor: auto;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImageViewer.vue?vue&type=template&id=38f11af8&scoped=true&\"\nimport script from \"./ImageViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImageViewer.vue?vue&type=style&index=0&id=38f11af8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38f11af8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"log-viewer\"},[(_vm.logs === null)?_c('div',{staticClass:\"noDataMessage\"},[_c('i',{staticClass:\"fas fa-spinner fa-spin fa-lg\"}),_vm._v(\" Loading logs...\")]):_c('Logs',{attrs:{\"logs\":_vm.logs}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"log-viewer\">\n\t\t<div v-if=\"logs === null\" class=\"noDataMessage\"><i class=\"fas fa-spinner fa-spin fa-lg\"></i> Loading logs...</div>\n\t\t<Logs v-else :logs=\"logs\" />\n\t</div>\n</template>\n\n<script>\nimport Utils from '../utils.js';\nimport EventBusMixin from './EventBusMixin.vue';\nimport Logs from '@openeo/vue-components/components/Logs.vue';\n\nexport default {\n\tname: 'LogViewer',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tLogs\n\t},\n\tprops: {\n\t\tdata: { // => JS Client Job/Service Object or Log Entries\n\t\t\ttype: [Object, Array],\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tlogs: null,\n\t\t\tsyncTimer: null\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection']),\n\t\tisJob() {\n\t\t\treturn Utils.isObject(this.data) && typeof this.data.debugJob === 'function';\n\t\t},\n\t\tisService() {\n\t\t\treturn Utils.isObject(this.data) && typeof this.data.debugService === 'function';\n\t\t},\n\t\tlogIterator() {\n\t\t\tif (this.isJob) {\n\t\t\t\treturn this.data.debugJob();\n\t\t\t}\n\t\t\telse if (this.isService) {\n\t\t\t\treturn this.data.debugService();\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t},\n\tcreated() {\n\t\tif (this.isJob) {\n\t\t\tthis.listen('jobStatusUpdated', this.onJobStatusUpdated);\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\tthis.onHide();\n\t},\n\tmethods: {\n\t\tonShow() {\n\t\t\tthis.loadNext();\n\t\t\tif (this.isJob) {\n\t\t\t\tthis.onJobStatusUpdated(this.data);\n\t\t\t}\n\t\t\telse if (this.isService) {\n\t\t\t\tthis.startWatcher();\n\t\t\t}\n\t\t},\n\t\tonHide() {\n\t\t\tthis.stopWatcher();\n\t\t},\n\t\tonJobStatusUpdated(job) {\n\t\t\tif (job !== this.data || typeof this.data.status !== 'string') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (Utils.isActiveJobStatusCode(this.data.status)) {\n\t\t\t\tthis.startWatcher();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.stopWatcher();\n\t\t\t}\n\t\t},\n\t\tstartWatcher() {\n\t\t\tif (this.syncTimer === null) {\n\t\t\t\tthis.syncTimer = setInterval(this.loadNext.bind(this), 10000);\n\t\t\t}\n\t\t},\n\t\tstopWatcher() {\n\t\t\tif (this.syncTimer !== null) {\n\t\t\t\tclearInterval(this.syncTimer);\n\t\t\t\tthis.syncTimer = null;\n\t\t\t}\n\t\t},\n\t\tasync loadNext() {\n\t\t\tif (this.logIterator) {\n\t\t\t\tlet logs = await this.logIterator.nextLogs();\n\t\t\t\tif (!Array.isArray(this.logs)) {\n\t\t\t\t\tthis.logs = [];\n\t\t\t\t}\n\t\t\t\tfor(let log of logs) {\n\t\t\t\t\tthis.logs.push(log);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(Array.isArray(this.data) && !this.logs) {\n\t\t\t\tthis.logs = this.data;\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style>\n.log-viewer, .vue-component.logs {\n\twidth: 100%;\n\theight: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LogViewer.vue?vue&type=template&id=4c2e9baf&\"\nimport script from \"./LogViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./LogViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LogViewer.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<Tabs id=\"viewerContent\" ref=\"tabs\">\n\t\t<template #default>\n\t\t\t<Tab id=\"mapView\" name=\"Map\" icon=\"fa-map\" :selected=\"true\" @show=\"onShow\" @hide=\"onHide\">\n\t\t\t\t<template #default=\"{ tab }\">\n\t\t\t\t\t<MapViewer id=\"mapCanvas\" ref=\"mapViewer\" :show=\"tab.active\" :center=\"[50.1725, 9.15]\" :zoom=\"6\" :removableLayers=\"true\" @drop=\"onDrop($event)\" />\n\t\t\t\t</template>\n\t\t\t</Tab>\n\t\t</template>\n\t\t<template #dynamic=\"{ tab }\">\n\t\t\t<LogViewer v-if=\"logViewerIcons.includes(tab.icon)\" :data=\"tab.data\" />\n\t\t\t<ImageViewer v-else-if=\"tab.icon === 'fa-image'\" :data=\"tab.data\" />\n\t\t\t<DataViewer v-else :data=\"tab.data\" />\n\t\t</template>\n\t</Tabs>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport Utils from '../utils.js';\nimport Tabs from '@openeo/vue-components/components/Tabs.vue';\nimport Tab from '@openeo/vue-components/components/Tab.vue';\nimport DataViewer from './DataViewer.vue';\nimport ImageViewer from './ImageViewer.vue';\nimport LogViewer from './LogViewer.vue';\nimport MapViewer from './MapViewer.vue'\nimport contentType from 'content-type';\nimport { OpenEO } from '@openeo/js-client';\nexport default {\n\tname: 'Viewer',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tTab,\n\t\tTabs,\n\t\tDataViewer,\n\t\tImageViewer,\n\t\tLogViewer,\n\t\tMapViewer\n\t},\n\tmounted() {\n\t\tthis.listen('viewBlob', this.showViewer);\n\t\tthis.listen('viewLink', this.showViewer);\n\n\t\tthis.listen('viewSyncResult', this.showSyncResults);\n\t\tthis.listen('viewJobResults', this.showJobResults);\n\t\tthis.listen('viewWebService', this.showWebService);\n\t\tthis.listen('viewLogs', this.showLogs);\n\t\tthis.listen('removeWebService', this.removeWebService);\n\n\t\tthis.listen('showCollectionPreview', this.showCollectionPreview);\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttabCounter: {},\n\t\t\tmapActive: false,\n\t\t\tlogViewerIcons: [\n\t\t\t\t'fa-bug',\n\t\t\t\t'fa-bomb',\n\t\t\t\t'fa-tasks'\n\t\t\t]\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection'])\n\t},\n\tmethods: {\n\t\t...Utils.mapActions(['describeCollection']),\n\t\tasync showCollectionPreview(collection) {\n\t\t\tif (typeof collection === 'string') {\n\t\t\t\ttry {\n\t\t\t\t\tcollection = await this.describeCollection(collection);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tUtils.error(this, \"Sorry, can't load collection '\" + collection + \"'.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.showMapViewer();\n\t\t\tawait this.$refs.mapViewer.addCollection(collection);\n\t\t},\n\t\tshowWebService(service) {\n\t\t\tthis.showMapViewer();\n\t\t\tthis.$refs.mapViewer.showWebService(service);\n\t\t},\n\t\tremoveWebService(id) {\n\t\t\tthis.$refs.mapViewer.removeLayerFromMap(id);\n\t\t},\n\t\tshowMapViewer() {\n\t\t\tthis.$refs.tabs.selectTab('mapView');\n\t\t},\n\t\tshowSyncResults(result) {\n\t\t\tif (Array.isArray(result.logs) && result.logs.length > 0) {\n\t\t\t\tthis.showLogs(result.logs);\n\t\t\t}\n\t\t\tthis.showViewer(result.data);\n\t\t},\n\t\tshowJobResults(item, job) {\n\t\t\tfor(var key in item.assets) {\n\t\t\t\tvar asset = item.assets[key];\n\t\t\t\tthis.showViewer(asset, this.makeTitle(key, job.id, true));\n\t\t\t}\n\t\t},\n\t\tshowLogs(resource, defaultTitle = 'Logs', faIcon = 'fa-bug') {\n\t\t\tlet title = Array.isArray(resource) ? defaultTitle : Utils.getResourceTitle(resource, true);\n\t\t\tthis.$refs.tabs.addTab(\n\t\t\t\ttitle, faIcon, resource, null, true, true,\n\t\t\t\ttab => this.onShow(tab),\n\t\t\t\ttab => this.onHide(tab)\n\t\t\t);\n\t\t},\n\t\tasync onDrop(event) {\n\t\t\tvar json = event.dataTransfer.getData(\"application/vnd.openeo-node\");\n\t\t\tif (!json) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet node = JSON.parse(json);\n\t\t\tif (node.process_id === 'load_collection') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tlet id = Utils.isObject(node.arguments) ? node.arguments.id : null;\n\t\t\t\ttry {\n\t\t\t\t\tlet collection = await this.describeCollection(id);\n\t\t\t\t\tthis.showCollectionPreview(collection);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tUtils.error(this, \"Sorry, can't load collection details for '\" + id + \"'.\");\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonShow(tab) {\n\t\t\tif (tab.$children.length && typeof tab.$children[0].onShow === 'function') {\n\t\t\t\ttab.$children[0].onShow();\n\t\t\t}\n\t\t\telse if (typeof tab.onShow === 'function') {\n\t\t\t\ttab.onShow();\n\t\t\t}\n\t\t},\n\t\tonHide(tab) {\n\t\t\tif (tab.$children.length && typeof tab.$children[0].onHide === 'function') {\n\t\t\t\ttab.$children[0].onHide();\n\t\t\t}\n\t\t\telse if (typeof tab.onHide === 'function') {\n\t\t\t\ttab.onHide();\n\t\t\t}\n\t\t},\n\t\tuniqueTitle(title) {\n\t\t\tif (!this.tabCounter[title]) {\n\t\t\t\tthis.tabCounter[title] = 1;\n\t\t\t\treturn title;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.tabCounter[title]++;\n\t\t\t\treturn title + \" (\" + this.tabCounter[title] + \")\";\n\t\t\t}\n\t\t},\n\t\tmakeTitle(title, type, inc = false) {\n\t\t\tif (!title) {\n\t\t\t\treturn this.uniqueTitle(type);\n\t\t\t}\n\t\t\telse if (inc) {\n\t\t\t\treturn this.uniqueTitle(title);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn title;\n\t\t\t}\n\t\t},\n\t\tasync showViewer(meta, title = null) {\n\t\t\tvar data = {};\n\t\t\tif (Utils.isObject(meta) && typeof meta.href === 'string' && typeof meta.type === 'string') {\n\t\t\t\tdata.type = meta.type;\n\t\t\t\tdata.url = meta.href;\n\t\t\t}\n\t\t\telse if (meta instanceof Blob) {\n\t\t\t\tdata.type = meta.type;\n\t\t\t\tdata.blob = meta;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tUtils.error(this, \"Sorry, invalid data received.\");\n\t\t\t}\n\n\t\t\tif (typeof data.type !== 'string' || data.type.indexOf('/') === -1 || data.type.indexOf('*') !== -1) {\n\t\t\t\tUtils.error(this, \"Sorry, can't detect content type.\");\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet mime = contentType.parse(data.type);\n\t\t\t\tdata.type = mime.type;\n\t\t\t\tdata.parameters = mime.parameters;\n\t\t\t} catch (error) {}\n\n\t\t\tswitch(data.type) {\n\t\t\t\tcase 'image/png':\n\t\t\t\tcase 'image/jpg':\n\t\t\t\tcase 'image/jpeg':\n\t\t\t\tcase 'image/gif':\n\t\t\t\t\tthis.$refs.tabs.addTab(this.makeTitle(title, \"Image\"), \"fa-image\", data, null, true, true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'application/json':\n\t\t\t\tcase 'text/plain':\n\t\t\t\tcase 'text/csv':\n\t\t\t\t\tthis.$refs.tabs.addTab(this.makeTitle(title, \"Data\"), \"fa-database\", data, null, true, true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'image/tiff':\n\t\t\t\t\tif (data.url && data.parameters.application === 'geotiff') {\n\t\t\t\t\t\tthis.showMapViewer();\n\t\t\t\t\t\tthis.$refs.mapViewer.updateGeoTiffLayer(data.url, this.makeTitle(title, \"GeoTiff\"));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t// else: Default behavior\n\t\t\t\tdefault:\n\t\t\t\t\tif (data.blob instanceof Blob) {\n\t\t\t\t\t\tOpenEO.Environment.saveToFile(data.blob, Utils.makeFileName(\"result\", data.type));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\telse if (data.url) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet response = await this.connection._get(data.url, \"\", \"blob\");\n\t\t\t\t\t\t\tlet filename = Utils.getFileNameFromURL(data.url);\n\t\t\t\t\t\t\tif (response.data instanceof Blob) {\n\t\t\t\t\t\t\t\tOpenEO.Environment.saveToFile(response.data, Utils.makeFileName(filename, data.type));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tUtils.error(this, 'Sorry, content type not supported by the viewer and can\\'t be downloaded.');\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style>\n#mapCanvas {\n\theight: 100%;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Viewer.vue?vue&type=template&id=77581cd5&\"\nimport script from \"./Viewer.vue?vue&type=script&lang=js&\"\nexport * from \"./Viewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Viewer.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div id=\"wrapper\">\n\t\t<div id=\"ide\" :class=\"{authenticated: isAuthenticated}\">\n\t\t\t<header class=\"navbar\">\n\t\t\t\t<Logo />\n\t\t\t\t<ul id=\"menu\">\n\t\t\t\t\t<li><div class=\"menuItem\" @click=\"showHelp\" title=\"Start a guided tour\"><i class=\"fas fa-question fa-fw\"></i> Help</div></li>\n\t\t\t\t\t<li><div class=\"menuItem\" @click=\"showServerInfo\" title=\"Get server information\"><i class=\"fas fa-info fa-fw\"></i> Server</div></li>\n\t\t\t\t\t<li><UserMenu /></li>\n\t\t\t\t</ul>\n\t\t\t</header>\n\t\t\t<Splitpanes class=\"default-theme\" @resize=\"resized\" @pane-maximize=\"resized\">\n\t\t\t\t<Pane id=\"discovery\" :size=\"splitpaneSizeH[0]\">\n\t\t\t\t\t<DiscoveryToolbar class=\"toolbar tour-ide-discovery\" :onAddProcess=\"insertProcess\" :collectionPreview=\"true\" :persist=\"true\" />\n\t\t\t\t</Pane>\n\t\t\t\t<Pane id=\"workspace\" :size=\"splitpaneSizeH[1]\">\n\t\t\t\t\t<Splitpanes class=\"default-theme\" horizontal @resize=\"resized\" @pane-maximize=\"resized\">\n\t\t\t\t\t\t<Pane id=\"editor\" :size=\"splitpaneSizeV[0]\">\n\t\t\t\t\t\t\t<Editor ref=\"editor\" class=\"mainEditor tour-ide-editor\" id=\"main\" :value=\"process\" @input=\"updateEditor\" :title=\"contextTitle\">\n\t\t\t\t\t\t\t\t<template #file-toolbar>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" @click=\"importProcess\" title=\"Import process from external source\"><i class=\"fas fa-cloud-download-alt\"></i></button>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" v-show=\"saveSupported\" :disabled=\"!hasProcess\" @click=\"saveProcess\" :title=\"'Save to ' + contextTitle\"><i class=\"fas fa-save\"></i></button>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" @click=\"exportCode\" :disabled=\"!hasProcess\" title=\"Export into another programming language\"><i class=\"fas fa-file-export\"></i></button>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" v-show=\"validateSupported\" :disabled=\"!hasProcess\" @click=\"validateProcess\" title=\"Validate process on server-side\"><i class=\"fas fa-tasks\"></i></button>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</Editor>\n\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t<Pane id=\"user\" :size=\"splitpaneSizeV[1]\">\n\t\t\t\t\t\t\t<UserWorkspace v-if=\"isAuthenticated\" class=\"userContent tour-ide-workspace\" />\n\t\t\t\t\t\t\t<div v-else class=\"message info\" title=\"Login is required to interact with the server.\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-sign-in-alt\"></i>\n\t\t\t\t\t\t\t\t<span class=\"login-message\"><strong><a @click=\"login\">Log in</a></strong> is required to interact with the server.</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Pane>\n\t\t\t\t\t</Splitpanes>\n\t\t\t\t</Pane>\n\t\t\t\t<Pane id=\"viewer\" :size=\"splitpaneSizeH[2]\">\n\t\t\t\t\t<Viewer class=\"tour-ide-viewer\" />\n\t\t\t\t</Pane>\n\t\t\t</Splitpanes>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport Utils from '../utils.js';\nimport UserMenu from './UserMenu.vue';\nimport UserWorkspace from './UserWorkspace.vue';\nimport Viewer from './Viewer.vue';\nimport Editor from './Editor.vue';\nimport Logo from './Logo.vue';\nimport DiscoveryToolbar from './DiscoveryToolbar.vue';\nimport { ProcessParameter } from '@openeo/js-commons';\nimport { Job, Service, UserProcess } from '@openeo/js-client';\nimport { Splitpanes, Pane } from 'splitpanes';\n\nexport default {\n\tname: 'IDE',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tDiscoveryToolbar,\n\t\tEditor,\n\t\tLogo,\n\t\tViewer,\n\t\tUserMenu,\n\t\tUserWorkspace,\n\t\tSplitpanes,\n\t\tPane\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tresizeListener: null,\n\t\t\tuserInfoUpdater: null\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection', 'isAuthenticated']),\n\t\t...Utils.mapState('editor', ['context', 'process', 'collectionPreview']),\n\t\t...Utils.mapGetters(['title', 'apiVersion', 'supports']),\n\t\t...Utils.mapGetters('jobs', {supportsJobUpdate: 'supportsUpdate'}),\n\t\t...Utils.mapGetters('services', {supportsServiceUpdate: 'supportsUpdate'}),\n\t\t...Utils.mapGetters('userProcesses', {supportsUserProcessUpdate: 'supportsUpdate'}),\n\t\tcontextTitle() {\n\t\t\treturn this.context !== null ? Utils.getResourceTitle(this.context, true) : ''\n\t\t},\n\t\tsaveSupported() {\n\t\t\treturn this.context !== null && (\n\t\t\t\t(this.context instanceof Job && this.supportsJobUpdate) ||\n\t\t\t\t(this.context instanceof Service && this.supportsServiceUpdate) ||\n\t\t\t\t(this.context instanceof UserProcess && this.supportsUserProcessUpdate)\n\t\t\t);\n\t\t},\n\t\thasProcess() {\n\t\t\treturn Utils.size(this.process) > 0;\n\t\t},\n\t\tvalidateSupported() {\n\t\t\treturn this.supports('validateProcess');\n\t\t},\n\t\tsplitpaneSizeH() {\n\t\t\tif (this.isAuthenticated) {\n\t\t\t\treturn [20,50,30];\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn [20,40,40];\n\t\t\t}\n\t\t},\n\t\tsplitpaneSizeV() {\n\t\t\tif (this.isAuthenticated) {\n\t\t\t\treturn [50,50];\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn [99,1];\n\t\t\t}\n\t\t}\n\t},\n\tasync mounted() {\n\t\tthis.listen('showDataForm', this.showDataForm);\n\t\tthis.listen('editProcess', this.editProcess);\n\t\tthis.listen('showLogin', this.login);\n\n\t\tthis.resizeListener = event => this.resized(event);\n\t\twindow.addEventListener('resize', this.resizeListener);\n\t\tif (this.isAuthenticated) {\n\t\t\tthis.userInfoUpdater = setInterval(this.describeAccount, this.$config.dataRefreshInterval*60*1000); // Refresh user data every x minutes\n\t\t}\n\t\tthis.emit('title', this.title);\n\n\t\tif (this.collectionPreview) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.emit('showCollectionPreview', this.collectionPreview);\n\t\t\t\tthis.setCollectionPreview(null);\n\t\t\t});\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\tif (this.resizeListener !== null) {\n\t\t\twindow.removeEventListener('resize', this.resizeListener);\n\t\t}\n\t\tif (this.userInfoUpdater !== null) {\n\t\t\tclearInterval(this.userInfoUpdater);\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapActions(['describeAccount']),\n\t\t...Utils.mapMutations(['discoveryCompleted']),\n\t\t...Utils.mapMutations('editor', ['setContext', 'setProcess', 'setCollectionPreview']),\n\n\t\tresized(event) {\n\t\t\tthis.emit('windowResized', event);\n\t\t},\n\n\t\tlogin() {\n\t\t\tthis.discoveryCompleted(false);\n\t\t},\n\n\t\timportProcess() {\n\t\t\tlet events = {\n\t\t\t\tsave: this.updateEditor\n\t\t\t};\n\t\t\tthis.emit('showModal', 'ImportProcessModal', {}, events);\n\t\t},\n\n\t\tsaveProcess() {\n\t\t\tthis.emit('replaceProcess', this.context, this.process);\n\t\t},\n\n\t\tasync exportCode() {\n\t\t\tthis.emit('showModal', 'ExportCodeModal');\n\t\t},\n\n\t\tasync validateProcess() {\n\t\t\tif (!this.validateSupported) {\n\t\t\t\treturn Utils.error(this, \"Server doesn't support validation\");\n\t\t\t}\n\t\t\telse if (!this.hasProcess) {\n\t\t\t\treturn Utils.info(this, 'Nothing to validate...');\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlet errors = await this.connection.validateProcess(this.process);\n\t\t\t\tif (errors.length > 0) {\n\t\t\t\t\terrors.forEach(error => error.level = 'error');\n\t\t\t\t\tthis.emit('viewLogs', errors, 'Validation Result', 'fa-tasks');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tUtils.ok(this, \"The process is valid\");\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error, \"Validation rejected\");\n\t\t\t}\n\t\t},\n\n\t\tupdateEditor(value) {\n\t\t\tthis.setProcess(value);\n\t\t\tif (value === null) {\n\t\t\t\tthis.setContext(null);\n\t\t\t}\n\t\t},\n\n\t\teditProcess(obj) {\n\t\t\tthis.setContext(obj);\n\t\t},\n\n\t\tinsertProcess(node) {\n\t\t\tthis.$refs.editor.insertProcess(node);\n\t\t},\n\n\t\tshowServerInfo() {\n\t\t\tthis.emit('showModal', 'ServerInfoModal');\n\t\t},\n\n\t\tshowHelp() {\n\t\t\tthis.emit('showTour', 'ide');\n\t\t},\n\n\t\tshowDataForm(title, fields, saveCallback = null, closeCallback = null) {\n\t\t\tvar editable = typeof saveCallback === 'function';\n\t\t\tvar data = {};\n\t\t\tvar parameters = [];\n\t\t\tfor(let field of fields) {\n\t\t\t\tif (field === null) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tparameters.push(new ProcessParameter(field));\n\t\t\t\tdata[field.name] = field.value;\n\t\t\t}\n\t\n\t\t\tlet props = {\n\t\t\t\ttitle,\n\t\t\t\tparameters,\n\t\t\t\tdata,\n\t\t\t\teditable\n\t\t\t};\n\t\t\tlet events = {};\n\t\t\tif (typeof saveCallback === 'function') {\n\t\t\t\tevents.save = saveCallback;\n\t\t\t}\n\t\t\tif (typeof closeCallback === 'function') {\n\t\t\t\tevents.closed = closeCallback;\n\t\t\t}\n\t\t\tthis.emit('showModal', 'ParameterModal', props, events);\n\t\t}\n\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../theme.scss';\n@import '~splitpanes/dist/splitpanes.css';\n\n.splitpanes.default-theme {\n  .splitpanes__pane {\n    background-color: transparent;\n  }\n  .splitpanes__splitter {\n\t  border: 0;\n  }\n  > * {\n\t-webkit-transition: none;\n\ttransition: none;\n  }\n}\n\n#ide {\n\tmargin-top: 80px;\n\theight: calc(100% - 80px);\n\tbackground-color: white;\n}\n#wrapper {\n\theight: 100%;\n}\n#workspace, #viewer {\n\theight: 100%;\n\tmin-width: 200px;\n\tpadding: 1rem;\n\tbox-sizing: border-box;\n}\n#workspace {\n\tmin-width: 300px;\n}\n#discovery {\n\theight: 100%;\n\toverflow: auto;\n\n\t.search-box {\n\t\tmargin: 1rem;\n\t}\n\t.category {\n\t\tpadding: 5px 1em;\n\t}\n}\n#user {\n\tmin-height: 2.5em;\n}\n#editor, .authenticated #user {\n\tmin-height: 150px;\n}\n#editor {\n\tpadding-bottom: 0.5rem;\n\n\t&:last-child {\n\t\tpadding-bottom: 0;\n\t}\n}\n\n#user {\n\tpadding-top: 0.5rem;\n\n\t.login-message {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n}\n#ide header.navbar {\n\twidth: 100%;\n\tbackground-color: $mainColor;\n\tcolor: white;\n\theight: 80px;\n\tposition: fixed;\n\ttop: 0;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tz-index: 100;\n}\n#ide .logo {\n\tflex-grow: 1;\n\talign-content: flex-start;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\tjustify-content: left;\n\tpadding-left: 1rem;\n}\n\n#menu {\n\tlist-style-type: none;\n\tmargin: 0 1rem;\n\tpadding: 0;\n\tdisplay: flex;\n\talign-items: center;\n\n\tli {\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t\theight: 80px;\n\n\t\t&:hover {\n\t\t\tbackground-color: white;\n\t\t\tcolor: $mainColor;\n\n\t\t\t.dropdown {\n\t\t\t\tdisplay: block;\n\t\t\t\tborder-color: #ddd;\n\t\t\t\tborder-style: solid;\n\t\t\t\tborder-width: 0 1px 1px 1px;\n\t\t\t}\n\t\t}\n\n\t\t.menuItem {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tcursor: pointer;\n\t\t\tpadding: 10px 20px;\n\t\t\theight: 60px;\n\t\t\tfont-size: 16px;\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t\t.dropdown {\n\t\t\tdisplay: none;\n\t\t\tposition: absolute;\n\t\t\tbackground-color: white;\n\t\t\tcolor: black;\n\t\t\tmin-width: 200px;\n\t\t\tbox-shadow: 8px 8px 8px 0px rgba(0,0,0,0.3);\n\t\t\ttop: 80px;\n\t\t\tright: -1px;\n\n\t\t\t.item {\n\t\t\t\tpadding: 10px;\n\t\t\t\tdisplay: block;\n\n\t\t\t\t&.separator {\n\t\t\t\t\tborder-bottom: 1px dotted $mainColor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thr {\n\t\t\t\tmargin: 5px 10px;\n\t\t\t}\n\n\t\t\ta.item:hover {\n\t\t\t\tbackground-color: $mainColor;\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.tabContent .dataTable,\n.tabContent table {\n\twidth: 100%;\n\tborder-collapse: collapse;\n\tfont-size: 0.95em;\n\n\ttd, th {\n\t\tborder: 1px solid #ddd;\n\t\tpadding: 3px;\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IDE.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IDE.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IDE.vue?vue&type=template&id=4081a329&\"\nimport script from \"./IDE.vue?vue&type=script&lang=js&\"\nexport * from \"./IDE.vue?vue&type=script&lang=js&\"\nimport style0 from \"./IDE.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=style&index=0&id=76333d38&lang=scss&scoped=true&\""],"sourceRoot":""}
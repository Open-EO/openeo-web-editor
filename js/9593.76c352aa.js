"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[9593,1276,7868,149,8503,1466,5310,1303,8552,7660,1372,2902],{15554:(e,t,a)=>{a.d(t,{Z:()=>i});const i={components:{FederationNotice:()=>a.e(5518).then(a.bind(a,15518)),FederationMissingNotice:()=>a.e(233).then(a.bind(a,50233))},props:{federation:{type:Object,default:()=>({})}}}},47982:(e,t,a)=>{a.d(t,{Z:()=>d});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vue-component collections"},[t("SearchableList",{attrs:{data:e.collections,identifierKey:"id",summaryKey:"title",keywordsKey:"keywords",showKeywords:e.showKeywords,showSummaryOnExpand:!1,externalSearchTerm:e.searchTerm,sort:e.sort,offerDetails:e.offerDetails,heading:e.heading,collapsed:e.collapsed,loadAdditionalData:e.loadAdditionalData,allowCopy:""},on:{detailsToggled:e.detailsToggled},scopedSlots:e._u([{key:"heading",fn:function(t){return[e._t("heading",null,null,t)]}},e.missing?{key:"content-start",fn:function(){return[t("FederationMissingNotice",{attrs:{missing:e.missing,federation:e.federation}})]},proxy:!0}:null,{key:"summary",fn:function(t){return[e._t("summary",null,null,t)]}},{key:"details",fn:function(a){return[t("Collection",{attrs:{data:a.item,mapOptions:e.mapOptions,federation:e.federation},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{staticClass:"hidden"})]},proxy:!0},{key:"before-description",fn:function(t){return[e._t("collection-before-description",null,null,t)]}},{key:"end",fn:function(t){return[e._t("collection-end",null,null,t)]}},{key:"spatial-extents",fn:function(t){return[e._t("collection-spatial-extents",null,null,t)]}},{key:"temporal-extents",fn:function(t){return[e._t("collection-temporal-extents",null,null,t)]}}],null,!0)})]}}],null,!0)})],1)},s=[],n=a(65973),o=a(15554);const r={name:"Collections",components:{Collection:()=>n.Z.loadAsyncComponent(Promise.all([a.e(5062),a.e(5834),a.e(8370),a.e(4533),a.e(2483)]).then(a.bind(a,24533))),SearchableList:()=>n.Z.loadAsyncComponent(a.e(1276).then(a.bind(a,91276)))},mixins:[o.Z],props:{collections:{type:Array,default:()=>[]},mapOptions:{type:Object,default:()=>({})},searchTerm:{type:String,default:null},sort:{type:Boolean,default:!0},offerDetails:{type:Boolean,default:!0},heading:{type:String,default:"Collections"},collapsed:{type:Boolean,default:null},loadAdditionalData:{type:Function,default:null},showKeywords:{type:Boolean,default:!1},missing:{type:Array,default:null},...o.Z.props},beforeCreate(){n.Z.enableHtmlProps(this)},methods:{detailsToggled(...e){this.$emit("detailsToggled",...e)}}},l=r;var c=a(1001),u=(0,c.Z)(l,i,s,!1,null,null,null);const d=u.exports},91276:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vue-component searchable-list",class:{expandable:null!==e.collapsed,expanded:e.showList,noResults:0===e.filteredCount}},[e._t("heading",(function(){return[e.heading?t("h2",{staticClass:"heading",on:{click:function(t){return e.toggleHeading(null)}}},[e._v(" "+e._s(e.heading)+" "),null!==e.filteredCount?[e._v("("+e._s(e.filteredCount)+"/"+e._s(e.totalCount)+")")]:[e._v("("+e._s(e.totalCount)+")")]],2):e._e()]}),{filteredCount:e.filteredCount,totalCount:e.totalCount}),null!==e.showList?t("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.showList,expression:"showList === true"}],staticClass:"body"},[e._t("content-start"),0===e.totalCount?[t("p",[e._v("No data available.")])]:[null===e.externalSearchTerm?t("SearchBox",{attrs:{placeholder:e.searchPlaceholder,minLength:e.searchMinLength},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}):e._e(),e._t("after-search-box",null,{filteredCount:e.filteredCount,summaries:e.summaries}),0===e.filteredCount?t("p",[e._v("No search results found.")]):t("ul",{staticClass:"list",class:{expandable:e.offerDetails}},e._l(e.summaries,(function(a,i){return t("li",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"summary.show"}],key:a.identifier,class:{expanded:e.showDetails[i]}},[t("summary",{staticClass:"summary",class:{experimental:a.experimental,deprecated:a.deprecated},on:{click:function(t){return e.toggleDetails(i)}}},[e._t("summary",(function(){return[t("strong",[e._v(" "+e._s(a.identifier)+" "),e.allowCopy&&e.canCopy?t("span",{staticClass:"copy",attrs:{title:"Copy identifier"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.copyIdentifier(t,a)}}},[e._v("📋")]):e._e()]),a.summary?t("small",{class:{hideOnExpand:!e.showSummaryOnExpand}},[e._v(e._s(a.summary))]):e._e(),e.showKeywords&&a.keywords.length>0?t("ul",{staticClass:"badges small block hideOnExpand"},e._l(a.keywords,(function(a){return t("li",{key:a,staticClass:"badge"},[e._v(e._s(a))])})),0):e._e()]}),{summary:a,item:a.data})],2),"boolean"===typeof e.showDetails[i]?t("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.showDetails[i],expression:"showDetails[i] === true"}],staticClass:"details"},[a.loaded?e._t("details",(function(){return[e._v(" No details available! ")]}),{summary:a,item:a.data}):t("Loading")],2):e._e()])})),0)]],2):e._e()],2)},s=[],n=a(65973),o=a(13739),r=a(20144),l=a(25108);const c={name:"SearchableList",components:{Loading:o.Z,SearchBox:()=>a.e(6450).then(a.bind(a,56450))},props:{data:{type:[Array,Object],default:()=>[]},identifierKey:{type:String,default:"id"},summaryKey:{type:String,default:"summary"},keywordsKey:{type:String,default:null},showKeywords:{type:Boolean,default:!1},externalSearchTerm:{type:String,default:null},searchPlaceholder:{type:String,default:"Search"},sort:{type:Boolean,default:!0},offerDetails:{type:Boolean,default:!0},showSummaryOnExpand:{type:Boolean,default:!0},heading:{type:String,default:null},collapsed:{type:Boolean,default:null},searchMinLength:{type:Number,default:2},loadAdditionalData:{type:Function,default:null},allowCopy:{type:Boolean,default:!1}},data(){return{searchTerm:"",showDetails:{},showList:!this.collapsed||null,summaries:[],canCopy:!1}},watch:{loadAdditionalData:{handler(){this.generateSummaries(this.summaries)}},data:{immediate:!0,handler(e,t){e!==t&&this.generateSummaries(e)}},externalSearchTerm:{immediate:!0,handler(e){this.searchTerm="string"===typeof e?e:""}},summaries:{immediate:!0,handler(){this.$emit("summaries",this.summaries)}},searchTerm:{immediate:!0,handler(e){e.length>=this.searchMinLength?this.summaries.forEach((e=>{this.$set(e,"show",n.Z.search(this.searchTerm,[e.identifier,e.summary].concat(e.keywords)))})):this.summaries.forEach((e=>this.$set(e,"show",!0))),this.$emit("summaries",this.summaries)}},collapsed(e){!1===e?this.showList=!0:null!==this.showList&&(this.showList=!1)}},computed:{totalCount(){return n.Z.size(this.data)},filteredCount(){return this.searchTerm.length>=this.searchMinLength?this.summaries.filter((e=>!0===e.show)).length:null}},mounted(){this.canCopy=navigator&&navigator.clipboard&&"function"===typeof navigator.clipboard.writeText},methods:{copyIdentifier(e,t){if(this.allowCopy&&this.canCopy){let a=e.composedPath()[0];navigator.clipboard.writeText(t.identifier).then((()=>this.toggleIcon(a,"✅"))).catch((()=>this.toggleIcon(a,"❌")))}},toggleIcon(e,t){if(e){let a=e.innerText;e.innerText=t,setTimeout((()=>e.innerText=a),2e3)}},generateSummaries(){let e="function"===typeof this.loadAdditionalData,t=[];for(let a in this.data){let i=this.data[a],s={identifier:a,summary:"",show:!0,loaded:!e,index:a,experimental:i.experimental,deprecated:i.deprecated,data:null};"string"===typeof this.identifierKey&&"string"===typeof i[this.identifierKey]&&(s.identifier=i[this.identifierKey]),"string"===typeof this.summaryKey&&"string"===typeof i[this.summaryKey]&&(s.summary=i[this.summaryKey]),"string"===typeof this.keywordsKey&&Array.isArray(i[this.keywordsKey])?s.keywords=i[this.keywordsKey]:s.keywords=[];let n=r.ZP.observable(s);n.data=i,t.push(n)}this.sort&&t.sort(((e,t)=>n.Z.compareStringCaseInsensitive(e.identifier,t.identifier))),this.summaries=t},toggleHeading(e=null){null!==this.collapsed&&(this.showList=null===e?!this.showList:e,this.$emit("headingToggled",this.showList),this.$parent&&this.$parent.$emit("headingToggled",this.showList))},async toggleDetails(e,t){if(!this.offerDetails)return;if("undefined"===typeof t&&(t=!this.showDetails[e]),"undefined"===typeof this.showDetails[e]&&!1===t)return;this.$set(this.showDetails,e,t);let a=this.summaries[e];if(t&&"function"===typeof this.loadAdditionalData&&!a.loaded)try{a.data=await this.loadAdditionalData(a.index,a.identifier,a.data),a.loaded=!0}catch(i){l.error(i)}this.$emit("detailsToggled",t,a.index,a.identifier,a.data)}}},u=c;var d=a(1001),p=(0,d.Z)(u,i,s,!1,null,null,null);const h=p.exports},98279:(e,t,a)=>{a.d(t,{Z:()=>y});var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:e.id}},[t("ProgressControl",{ref:"progress",attrs:{map:e.map}}),t("UserLocationControl",{attrs:{map:e.map}}),t("TextControl",{attrs:{text:e.help,map:e.map}})],1)},s=[],n=a(18840),o=a(79879),r=a(92420),l=a(63432),c=a(28641),u=a(47539),d=a(45723);const p={name:"MapAreaSelect",mixins:[n.Z],components:{TextControl:d.Z},props:{value:{type:[Object,Array],default:()=>null}},data(){let e=null;return o.Z.isObject(this.value)&&"west"in this.value&&"south"in this.value&&"east"in this.value&&"north"in this.value?e=[this.value.west,this.value.south,this.value.east,this.value.north]:Array.isArray(this.value)&&value.length>=4&&(e=this.value),{interaction:null,extent:e}},computed:{returnAsObject(){return!Array.isArray(this.value)},projectedExtent(){return this.extent?(0,l.$A)(this.extent,"EPSG:4326",this.map.getView().getProjection()):null},bbox(){return o.Z.extentToBBox(this.extent)},help(){return this.extent?"Click inside the bounding box to remove it.":"Click on the map to add a bounding box."}},methods:{update(e){e.extent?this.extent=(0,l.$A)(e.extent,this.map.getView().getProjection(),"EPSG:4326"):this.extent=null,this.$emit("input",this.returnAsObject?this.bbox:this.extent)},ensureValidExtent(e){return e?[Math.max(e[0],-180),Math.max(e[1],-90),Math.min(e[2],180),Math.min(e[3],90)]:e},async renderMap(){let e=!1!==o.Z.isBboxInWebMercator(this.bbox);await this.createMap(e?"EPSG:3857":"EPSG:4326"),this.addBasemaps();let t=e=>{if(!this.editable)return!1;if("singleclick"===e.type){if(!this.extent){let t=this.map.getSize().map((e=>.2*e)),a=this.map.getView().calculateExtent(t),i=[a[2]-a[0],a[3]-a[1]],s=[e.coordinate[0]-i[0],e.coordinate[1]-i[1],e.coordinate[0]+i[0],e.coordinate[1]+i[1]];return this.interaction.setExtent(s),!1}(0,c.jE)(this.projectedExtent,...e.coordinate)&&(this.interaction.setExtent(null),this.interaction.vertexOverlay_.getSource().clear(),this.interaction.vertexFeature_=null)}else if(this.interaction.handlingDownUpSequence||this.interaction.snapToVertex_(e.pixel,e.map))return!0;return!1};if(this.interaction=new r.Z({extent:this.projectedExtent,condition:t,boxStyle:(0,u.yF)(),pixelTolerance:15}),this.editable&&this.interaction.on("extentchanged",this.update),this.map.addInteraction(this.interaction),this.projectedExtent){var a=this.getFitOptions(this.editable?10:33);this.map.getView().fit(this.projectedExtent,a)}}}},h=p;var m=a(1001),f=(0,m.Z)(h,i,s,!1,null,null,null);const y=f.exports},47868:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"select-container"},[e.loaded?[t("MultiSelect",{key:e.type,ref:"htmlElement",attrs:{label:"label","track-by":"id",multiple:e.multiple,options:e.selectOptions,allowEmpty:!1,preselectFirst:e.preselect,disabled:!e.editable,deselectLabel:e.deselectLabel,taggable:e.taggable,tagPlaceholder:e.tagPlaceholder},on:{tag:e.addValue},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e.showDetails?t("button",{attrs:{type:"button",title:"Details"},on:{click:function(t){return e.$emit("onDetails")}}},[t("i",{staticClass:"fas fa-info"})]):e._e()]:t("div",{staticClass:"loading"},[t("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Loading options...")])],2)},s=[],n=(a(57658),a(30541),a(47907)),o=a.n(n),r=a(79879);const l={name:"SelectBox",components:{MultiSelect:o()},props:{value:{},type:{type:String,default:""},editable:{type:Boolean,default:!0},options:{type:[Array,Object]},schema:{type:Object},context:{},optionFilter:{type:Function,default:null}},computed:{...r.Z.mapGetters(["collectionDefaults"]),selectOptions(){let e=[];switch(this.type){case"band-name":let t=this.$store.state.collections.find((e=>e.id==this.context));if(r.Z.isObject(t)){try{e=t.summaries["eo:bands"].map((e=>e.name))}catch(s){}if(0===e.length&&r.Z.isObject(t["cube:dimensions"]))try{let a=Object.values(t["cube:dimensions"]).find((e=>"bands"===e.type));a&&Array.isArray(a.values)&&(e=a.values)}catch(s){}}break;case"collection-id":e=this.$store.state.collections;break;case"job-id":e=this.$store.state.jobs.jobs;break;case"file-path":case"file-paths":e=this.$store.state.files.files;break;case"epsg-code":e=this.$store.state.editor.epsgCodes;break;case"input-format":e=this.$store.state.fileFormats.getInputTypes();break;case"openeo-datatype":let i=a(9510),n={};for(let e of i.NATIVE_TYPES)n[e]={type:e};e=Object.assign(n,i.API_TYPES);break;case"output-format":e=this.$store.state.fileFormats.getOutputTypes();break;case"service-type":e=this.$store.state.serviceTypes;break;case"billing-plan":e=this.$store.state.connection.capabilities().listPlans();break;case"udf-runtime":e=Object.keys(this.$store.state.udfRuntimes);break;case"udf-runtime-version":e=this.context in this.$store.state.udfRuntimes?Object.keys(this.$store.state.udfRuntimes[this.context].versions):[];break}"function"===typeof this.optionFilter&&e&&"object"===typeof e&&(e=r.Z.isObject(e)?Object.fromEntries(Object.entries(e).filter((([e,t])=>this.optionFilter(t,e)))):e.filter(((e,t)=>this.optionFilter(e,t))));let t=[];switch(this.type){case"collection-id":return e.map((e=>this.e(e.id))).sort(this.sortByLabel);case"job-id":return e.map((e=>({id:e.id,label:r.Z.getResourceTitle(e)}))).sort(this.sortByLabel);case"openeo-datatype":for(let i in e){let a=e[i];t.push({id:i,label:a.title||r.Z.prettifyString(i),value:a})}return t;case"file-path":case"file-paths":return e.map((e=>this.e(e.path))).sort(((e,t)=>r.Z.sortByPath(e.id,t.id)));case"epsg-code":for(let i in e)t.push({id:Number.parseInt(i,10),label:i+": "+e[i]});return t;case"input-format":case"output-format":case"service-type":for(let i in e){let a=i.toUpperCase(),s=e[i].title;s?a!==s.toUpperCase()&&(s=`${s} - ${a}`):s=a,t.push({id:a,label:s})}return t.sort(this.sortByLabel);case"billing-plan":return e.map((e=>({id:e.name,label:e.name+(e.paid?" (paid)":" (free)")})));case"year":let a=(new Date).getFullYear(),s=Array.from({length:100},((e,t)=>this.e(String(a-t))));if("string"===typeof this.value&&this.value.length>0&&-1===s.findIndex((e=>e.id===this.value))){var i=this.e(this.value);this.value>a?s.unshift(i):s.push(this.e(this.value))}return s;case"band-name":case"udf-runtime":case"udf-runtime-version":return e.map((e=>this.e(e)));default:return r.Z.isObject(this.schema)&&this.schema.isEnum()?this.schema.getEnumChoices().map((e=>this.e(e))):Array.isArray(this.options)?this.options.map((e=>r.Z.isObject(e)?e:this.e(e))):[]}},showDetails(){return"collection-id"===this.type},deselectLabel(){return this.multiple?"Press enter to remove":""},tagPlaceholder(){return"year"===this.type?"Press enter to select":"Press enter to create a tag"},multiple(){return"file-paths"===this.type},taggable(){return"year"===this.type},preselect(){return this.multiple?!Array.isArray(this.selected)||0===this.selected.length:null===this.selected}},data(){return{selected:null,loaded:!1}},created(){this.loadData()},watch:{type(){this.loadData()},selected(e){let t;if(null===e)t=null;else if(this.multiple)Array.isArray(e)||(e=[e]),t=e.map((e=>e.id));else switch(this.type){case"epsg-code":var a=Number.parseInt(e.id);t=Number.isNaN(a)?null:a;break;case"openeo-datatype":t=e.value;break;case"year":t=String(e.id);break;default:t=e.id}this.$emit("input",t)},context(){switch(this.type){case"udf-runtime":case"udf-runtime-version":this.selected=null,this.preselectFirst();break;case"band-name":this.selected=null,this.loadData();break}}},methods:{...r.Z.mapActions(["describeCollection"]),...r.Z.mapActions("editor",["loadEpsgCodes"]),e(e){return{id:e,label:e}},async loadData(){this.loaded=!1,"epsg-code"===this.type?await this.loadEpsgCodes():"band-name"===this.type&&await this.describeCollection(this.context),this.initSelection(),this.loaded=!0},async preselectFirst(){await this.$nextTick();let e=this.$refs.htmlElement;e.preselectFirst&&Array.isArray(e.filteredOptions)&&e.filteredOptions.length&&e.select(e.filteredOptions[0])},initSelection(){let e=this.value;if(this.multiple&&Array.isArray(e))this.selected=this.selectOptions.filter((t=>e.includes(t.id)));else{switch(this.type){case"input-format":case"output-format":case"service-type":"string"===typeof e&&(e=e.toUpperCase());break}let t=this.selectOptions.find((t=>t.id===e));void 0!==t&&(this.selected=t)}},sortByLabel(e,t){return r.Z.compareStringCaseInsensitive(e.label,t.label)},addValue(e){this.selected=this.e(e)}}},c=l;var u=a(1001),d=(0,u.Z)(c,i,s,!1,null,null,null);const p=d.exports},45723:(e,t,a)=>{a.d(t,{Z:()=>u});var i=function(){var e=this,t=e._self._c;return e.texts.length>0?t("div",{staticClass:"ol-unselectable ol-control value",class:{pointer:e.texts.length>1},on:{click:e.toggle}},[e._v(" "+e._s(e.current)+" ")]):e._e()},s=[],n=a(77873);const o={name:"TextControl",mixins:[n.Z],data(){return{i:0}},computed:{texts(){return Array.isArray(this.text)?this.text:"string"===typeof this.text&&this.text.length>0?[this.text]:[]},current(){return 0===this.texts.length?"":this.texts[this.i%this.text.length]}},props:{text:{text:[String,Array],default:""}},methods:{toggle(){this.i++}}},r=o;var l=a(1001),c=(0,l.Z)(r,i,s,!1,null,"6d7a0f06",null);const u=c.exports},49331:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wizard-tab-content"},[t("WizardTab",{attrs:{pos:0,parent:e.parent,title:"Data Source",beforeChange:e.loadCollection}},[t("ChooseCollection",{attrs:{value:e.collection},on:{input:e.submitCollection}})],1),t("WizardTab",{attrs:{pos:1,parent:e.parent,title:"Spectral Index",beforeChange:()=>!!e.index.id}},[t("ChooseSpectralIndices",{attrs:{value:e.index,availableBands:e.availableBands},on:{input:e.submitIndex}})],1),t("WizardTab",{attrs:{pos:2,parent:e.parent,title:"Location",beforeChange:()=>null!==e.spatial_extent}},[t("ChooseBoundingBox",{model:{value:e.spatial_extent,callback:function(t){e.spatial_extent=t},expression:"spatial_extent"}})],1),t("WizardTab",{attrs:{pos:3,parent:e.parent,title:"Temporal Coverage",beforeChange:()=>null!==e.temporal_extent}},[t("ChooseTime",{model:{value:e.temporal_extent,callback:function(t){e.temporal_extent=t},expression:"temporal_extent"}})],1),t("WizardTab",{attrs:{pos:4,parent:e.parent,title:"Temporal Composite"}},[t("ChooseReducer",{attrs:{allowEmpty:"",text:"If you want, you can create a temporal composite by selecting the aggregation method below:"},model:{value:e.composite,callback:function(t){e.composite=t},expression:"composite"}})],1),t("WizardTab",{attrs:{pos:5,parent:e.parent,title:"File Format",beforeChange:()=>null!==e.format}},[t("ChooseFormat",{attrs:{gisDataType:"raster",scale:e.scale},on:{"update:scale":function(t){e.scale=t}},model:{value:e.format,callback:function(t){e.format=t},expression:"format"}})],1),t("WizardTab",{attrs:{pos:6,parent:e.parent,title:"Finish"}},[t("ChooseProcessingMode",{attrs:{title:e.jobTitle},on:{"update:title":function(t){e.jobTitle=t}},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}})],1)],1)},s=[],n=(a(57658),a(81489)),o=a(95310),r=a(71303),l=a(18552),c=a(37660),u=a(91372),d=a(7413),p=a(71484),h=a(6139),m=a(79879),f=a(25108);const y="created by Wizard",v=(e="Spectral Indices")=>`${e} ${y}`,g={A:"coastal",B:"blue",G:"green",Y:"yellow",R:"red",N:"nir",N2:"nir08",WV:"nir09",S1:"swir16",S2:"swir22",T1:"lwir11",T2:"lwir12"},b={name:"SpectralIndices",mixins:[p.Z],components:{ChooseBoundingBox:n["default"],ChooseCollection:o["default"],ChooseFormat:r["default"],ChooseProcessingMode:l["default"],ChooseReducer:c["default"],ChooseSpectralIndices:u["default"],ChooseTime:d["default"]},data(){return{availableBands:{},collection:null,composite:"",dimBands:"bands",dimT:"t",format:null,index:{},jobTitle:v(),mode:"",scale:null,spatial_extent:null,temporal_extent:null}},created(){this.scale=(!this.processes.has("apply")||!this.processes.has("linear_scale_range"))&&null},computed:{...m.Z.mapGetters(["processes","collectionDefaults"])},methods:{...m.Z.mapActions(["describeCollection"]),submitCollection(e){if(this.collection!==e||null==this.temporal_extent||null==this.spatial_extent){let t=this.collectionDefaults(e);this.collection===e&&null!=this.spatial_extent||(this.spatial_extent=t.spatial_extent),this.collection===e&&null!=this.temporal_extent||(this.temporal_extent=t.temporal_extent)}this.collection=e,this.parent.nextTab()},submitIndex(e){this.index=e,e.id&&this.jobTitle.endsWith(y)&&(this.jobTitle=v(e.id)),this.parent.nextTab()},createProcess(){let e=this.index.formula,t=[],a=[];for(let n in this.index.bands){let i=this.index.bands[n],s=this.availableBands[i].name;t.push(s),e=e.replaceAll(i,"$"+n),a.push(`- ${i} = ${s}`)}const i=new h.Builder(this.processes);let s=i.load_collection(this.collection,this.spatial_extent,this.temporal_extent,t).description("Load the data, including the bands:\r\n"+a.join("\r\n"));if(s=i.reduce_dimension(s,new h.Formula(e),this.dimBands).description(`Compute the ${this.index.id} (${this.index.summary}) for the bands dimension\r\nFormula: ${this.index.formula}`),this.composite){let e=(e,t,a)=>a[this.composite](e);s=i.reduce_dimension(s,e,this.dimT).description(`Compute the ${this.composite} over the temporal dimension`)}if(this.scale){let e=(e,t,a)=>a.linear_scale_range(e,-1,1,0,255);s=i.apply(s,e).description("Scales the values from [-1, 1] to [0, 255]")}return s=i.save_result(s,this.format).description(`Store as ${this.format}`),s.result=!0,i.toJSON()},async loadCollection(){if(null===this.collection)throw new Error("Please select a collection");let e;this.availableBands={};try{e=await this.describeCollection(this.collection)}catch(a){throw f.error(a),new Error("Can't load collection metadata, please try another collection.")}let t=e?.summaries&&e?.summaries["eo:bands"];if(Array.isArray(t)){const e=Object.values(g),a=Object.keys(g);for(let i in t){let s=t[i];if(!s.name)continue;let n=e.indexOf(s["common_name"]);-1!==n&&(this.availableBands[a[n]]=s)}}if(0===m.Z.size(this.availableBands))throw new Error("This collection doesn't support spectral indices as there are no compatible bands available.");if(m.Z.isObject(e["cube:dimensions"])){let t=Object.values(e["cube:dimensions"]),a=t.find((e=>"bands"===e.type));a&&a.name&&(this.dimBands=a.name);let i=t.find((e=>"temporal"===e.type));i&&i.name&&(this.dimT=i.name)}return!0},async finish(){this.$emit("input",{process:this.createProcess(),mode:this.mode,modeOptions:{title:this.jobTitle}})}}},x=b;var _=a(1001),w=(0,_.Z)(x,i,s,!1,null,null,null);const C=w.exports},58503:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var i=function(){var e=this,t=e._self._c;return e.active?t("div",{staticClass:"wizard-tab-container"},[e._t("default",null,{active:e.active})],2):e._e()},s=[];const n={name:"WizardTab",props:{parent:{type:Object,required:!0},pos:{type:Number,required:!0},title:{type:String,default:""},beforeChange:{type:Function},afterChange:{type:Function}},data(){return{active:!1,validationError:null,checked:!1}},mounted(){this.parent.addTab(this,this.pos)},beforeDestroy(){this.parent.removeTab(this)}},o=n;var r=a(1001),l=(0,r.Z)(o,i,s,!1,null,null,null);const c=l.exports},81489:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-bbox"},[t("p",[e._v("Please select the area of interest which you want to download data for.")]),t("MapAreaSelect",{staticClass:"map",attrs:{show:e.showMap,value:e.value},on:{input:e.update}})],1)},s=[],n=a(98279);const o={name:"ChooseBoundingBox",components:{MapAreaSelect:n.Z},props:{value:{type:Object,default:null}},data(){return{showMap:!0}},mounted(){window.setTimeout((()=>this.showMap=!0),1e3)},methods:{update(e){this.$emit("input",e)}}},r=o;var l=a(1001),c=(0,l.Z)(r,i,s,!1,null,"7457938e",null);const u=c.exports},95310:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-collection"},[t("p",[e._v("Please select the collection which you want to download data for.")]),t("Collections",{attrs:{heading:"",collections:e.filteredCollections,offerDetails:!1},scopedSlots:e._u([{key:"summary",fn:function({item:a}){return[t("div",{class:{element:!0,selected:a.id==e.value}},[t("div",{staticClass:"summary",on:{click:function(t){return e.update(a.id)}}},[t("strong",{attrs:{title:a.id}},[e._v(e._s(a.id))]),a.title?t("small",{attrs:{title:a.title}},[e._v(e._s(a.title))]):e._e()]),t("button",{staticClass:"button",attrs:{type:"button",title:"Show collection details"},on:{click:function(t){return e.showCollectionInfo(a.id)}}},[t("i",{staticClass:"fas fa-info"})])])]}}])})],1)},s=[],n=a(47982),o=a(79879),r=a(43334);const l={name:"ChooseCollection",mixins:[r.Z],components:{Collections:n.Z},props:{value:{type:String,default:null}},computed:{...o.Z.mapState(["collections"]),filteredCollections(){return this.collections.filter((e=>{if(!o.Z.isObject(e["cube:dimensions"]))return!0;let t=Object.values(e["cube:dimensions"]);if(4!==t.length)return!1;let a=t.find((e=>"bands"===e.type));if(a&&Array.isArray(a.values)&&1===a.values.length)return!1;let i=t.filter((e=>"temporal"===e.type));if(i.length>1)return!1;let s=t.filter((e=>"spatial"===e.type&&["x","y"].includes(e.axis)));return 2!==s.length}))}},methods:{...o.Z.mapActions(["describeCollection"]),async update(e){this.$emit("input",e)},showCollectionInfo(e){this.broadcast("showCollection",e)}}},c=l;var u=a(1001),d=(0,u.Z)(c,i,s,!1,null,null,null);const p=d.exports},71303:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-format"},[t("p",[e._v("Please select the file format you want to download data in.")]),t("SelectBox",{attrs:{type:"output-format",value:e.value,optionFilter:e.filterFormats},on:{input:e.setFormat}}),null!==e.scale?t("p",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.scaleBox,expression:"scaleBox"}],attrs:{type:"checkbox",id:"scale"},domProps:{checked:Array.isArray(e.scaleBox)?e._i(e.scaleBox,null)>-1:e.scaleBox},on:{change:function(t){var a=e.scaleBox,i=t.target,s=!!i.checked;if(Array.isArray(a)){var n=null,o=e._i(a,n);i.checked?o<0&&(e.scaleBox=a.concat([n])):o>-1&&(e.scaleBox=a.slice(0,o).concat(a.slice(o+1)))}else e.scaleBox=s}}}),e._v("  "),t("label",{attrs:{for:"scale"}},[e._v("Scale the values from [-1, 1] to [0, 255] (often required for PNG, GIF or JPEG).")])]):e._e()],1)},s=[],n=a(47868);const o={name:"ChooseFormat",components:{SelectBox:n["default"]},props:{value:{type:String,default:null},scale:{type:Boolean,default:null},gisDataType:{type:String,default:null}},computed:{scaleBox:{get(){return this.scale},set(e){this.$emit("update:scale",e)}},filterFormats(){return this.gisDataType?e=>!Array.isArray(e.gis_data_types)||0===e.gis_data_types.length||e.gis_data_types.includes(this.gisDataType):null}},methods:{setFormat(e){this.scaleBox=["bmp","gif","jpeg","jpg","png","webp"].includes(e.toLowerCase()),this.$emit("input",e)}}},r=o;var l=a(1001),c=(0,l.Z)(r,i,s,!1,null,null,null);const u=c.exports},18552:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-processing-mode"},[e.isAuthenticated&&(e.supportsJobs||e.supportsSync)?[t("p",[e._v("Please select how you'd like to execute this workflow?")]),t("ul",{staticClass:"mode"},[e.supportsJobs?t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{type:"radio",id:"job",value:"job"},domProps:{checked:e._q(e.mode,"job")},on:{change:function(t){e.mode="job"}}}),t("label",{attrs:{for:"job"}},[t("strong",[e._v("Batch Jobs")]),t("br"),e._v(" Slower processing mode for large amounts of data. Creates and queues a batch job."),t("br"),e._v(" It is recommended to provide a title for the batch job: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.titleInput,expression:"titleInput"}],ref:"title",attrs:{type:"text"},domProps:{value:e.titleInput},on:{input:function(t){t.target.composing||(e.titleInput=t.target.value)}}})])]):e._e(),e.supportsSync?t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{type:"radio",id:"sync",value:"sync"},domProps:{checked:e._q(e.mode,"sync")},on:{change:function(t){e.mode="sync"}}}),e._m(0)]):e._e(),e.supportsSync?t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{type:"radio",id:"model",value:""},domProps:{checked:e._q(e.mode,"")},on:{change:function(t){e.mode=""}}}),e._m(1)]):e._e()])]:t("p",[e._v(" The wizard has all information to create the workflow for you."),t("br"),e.isAuthenticated?[e._v("Unforntunately, this back-end can't process data,")]:[e._v("You are not logged in and thus you can't process data directly,")],e._v(" but you can insert the process into the visual model builder now. ")],2)],2)},s=[function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"sync"}},[t("strong",[e._v("Synchronous Processing")]),t("br"),e._v(" Fast processing mode for small amounts of data. ")])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"model"}},[t("strong",[e._v("Don't execute")]),t("br"),e._v(" Only show the generated workflow in the visual model builder. You can then export it or you can run it later. ")])}],n=a(79879);const o={name:"ChooseProcessingMode",props:{value:{type:String,default:null},title:{type:String,default:""}},data(){return{mode:this.value}},computed:{...n.Z.mapState(["isAuthenticated"]),...n.Z.mapGetters(["supports"]),titleInput:{get(){return this.title},set(e){this.$emit("update:title",e)}},supportsJobs(){return this.supports("createJob")&&this.supports("startJob")},supportsSync(){return this.supports("computeResult")}},watch:{value(){this.mode=this.value},mode(){this.$emit("input",this.mode),"job"===this.mode&&this.$refs.title.select()},title(){this.$emit("update:title",this.title)}}},r=o;var l=a(1001),c=(0,l.Z)(r,i,s,!1,null,"449febe3",null);const u=c.exports},37660:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-time"},[t("p",[e._v(e._s(e.text))]),t("SelectBox",{attrs:{options:e.options,value:e.value},on:{input:t=>e.$emit("input",t)}})],1)},s=[],n=(a(30541),a(47868)),o=a(79879);const r={name:"ChooseReducer",components:{SelectBox:n["default"]},props:{text:{type:String,default:"Please select a method for aggregation:"},allowEmpty:{type:Boolean,default:!1},value:{type:String,default:"mean"}},computed:{...o.Z.mapGetters(["processes"]),options(){let e=this.processes.all().filter((e=>{if(Array.isArray(e.categories)&&e.categories.includes("reducer")&&Array.isArray(e.parameters)&&"array_element"!==e.id){let t=e.parameters.filter((e=>!0!==e.optional));return 1===t.length&&"data"===t[0].name}return!1})).map((e=>({id:e.id,label:`${e.id} - ${e.summary}`})));return e.unshift({id:"",label:"No composite"}),e}}},l=r;var c=a(1001),u=(0,c.Z)(l,i,s,!1,null,null,null);const d=u.exports},91372:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-index"},[t("p",[e._v("Please select the spectral index you want to compute.")]),e.indices.length>0?t("SearchableList",{attrs:{heading:"",data:e.indices,offerDetails:!1,showKeywords:""},scopedSlots:e._u([{key:"summary",fn:function({item:a}){return[t("div",{class:{element:!0,selected:a.id==e.value.id}},[t("div",{staticClass:"summary",on:{click:function(t){return e.update(a)}}},[t("div",{staticClass:"title"},[t("strong",{attrs:{title:a.id}},[e._v(e._s(a.summary))]),t("ul",{staticClass:"badges small inline"},e._l(a.keywords,(function(i,s){return t("li",{key:i,class:{badge:!0,domain:s+1==a.keywords.length,[i]:s+1==a.keywords.length}},[e._v(e._s(i))])})),0)]),t("code",[e._v(e._s(a.formula))])]),t("button",{staticClass:"button",attrs:{type:"button",title:"Open website with additional details"},on:{click:function(t){return e.showDetails(a)}}},[t("i",{staticClass:"fas fa-info"})])])]}}],null,!1,970652951)}):e._e()],1)},s=[],n=(a(57658),a(91276)),o=a(43334);const r={g:"Gain factor (e.g. Used for EVI)",L:"Canopy background adjustment (e.g. Used for SAVI and EVI)",C1:"Coefficient 1 for the aerosol resistance term (e.g. Used for EVI)",C2:"Coefficient 2 for the aerosol resistance term (e.g. Used for EVI)",cexp:"Exponent used for OCVI",nexp:"Exponent used for GDVI",alpha:"Weighting coefficient used for WDRVI, BWDRVI and NDPI",beta:"Calibration parameter used for NDSIns",gamma:"Weighting coefficient used for ARVI",omega:"Weighting coefficient used for MBWI",sla:"Soil line slope",slb:"Soil line intercept",PAR:"Photosynthetically Active Radiation",k:"Slope parameter by soil used for NIRvH2",lambdaN:"NIR wavelength used for NIRvH2 and NDGI",lambdaR:"Red wavelength used for NIRvH2 and NDGI",lambdaG:"Green wavelength used for NDGI"},l={name:"ChooseSpectralIndices",mixins:[o.Z],components:{SearchableList:n["default"]},props:{value:{type:Object,default:()=>({})},availableBands:{type:Object,required:!0}},data(){return{indices:[]}},async created(){const{domains:e,indices:t}=await a.e(4434).then(a.t.bind(a,24434,19)),i=Object.keys(this.availableBands),s=Object.keys(r).join("|"),n=new RegExp(`(${s})`,"g");for(let a of t){const t=a[3],s=t.filter((e=>i.includes(e)));if(s.length!=t.length)continue;const o=a[4],r=Array.from(o.matchAll(n));if(r.length>0)continue;let l=a[5];l.length>0&&!l.includes("://")&&(l="https://doi.org/"+l),this.indices.push({id:a[0],summary:a[1],keywords:[...a[3],e[a[2]]],bands:t,formula:o,uri:l})}},methods:{showDetails(e){window.open(e.uri)},async update(e){this.$emit("input",e)}}},c=l;var u=a(1001),d=(0,u.Z)(c,i,s,!1,null,null,null);const p=d.exports},7413:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step choose-time"},[t("p",[e._v("Please select the days for which you want to download data for.")]),t("TemporalPicker",{attrs:{type:"temporal-interval",intervalType:"date",value:e.value},on:{input:t=>e.$emit("input",t)}})],1)},s=[],n=a(42325);const o={name:"ChooseTime",components:{TemporalPicker:n["default"]},props:{value:{type:Array,default:null}}},r=o;var l=a(1001),c=(0,l.Z)(r,i,s,!1,null,null,null);const u=c.exports},9510:(e,t,a)=>{a.r(t),a.d(t,{API_TYPES:()=>s,NATIVE_TYPES:()=>n});var i=a(79879);const s=i.Z.resolveJsonRefs(a(66027)).definitions,n=["string","integer","number","boolean","array","object"]},71484:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(58503);const s={components:{WizardTab:i["default"]},props:{parent:{type:Object,required:!0},options:{type:Object,default:()=>({})}},created(){for(let e in this.options)this[e]=this.options[e]}}},85117:(e,t,a)=>{var i=a(66330),s=TypeError;e.exports=function(e,t){if(!delete e[t])throw s("Cannot delete property "+i(t)+" of "+i(e))}},30541:(e,t,a)=>{var i=a(82109),s=a(47908),n=a(26244),o=a(83658),r=a(85117),l=a(7207),c=1!==[].unshift(0),u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},d=c||!u();i({target:"Array",proto:!0,arity:1,forced:d},{unshift:function(e){var t=s(this),a=n(t),i=arguments.length;if(i){l(a+i);var c=a;while(c--){var u=c+i;c in t?t[u]=t[c]:r(t,u)}for(var d=0;d<i;d++)t[d]=arguments[d]}return o(t,a+i)}})},92420:(e,t,a)=>{a.d(t,{Z:()=>T});var i=a(291),s=a(81090),n=a(92217),o=a(60188),r=a(14515),l=a(92371),c=a(22556),u=a(98683),d=a(28641),p=a(91900),h=a(47539),m=a(2033),f=a(63432),y=function(){var e=function(t,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},e(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),v={EXTENTCHANGED:"extentchanged"},g=function(e){function t(t){var a=e.call(this,v.EXTENTCHANGED)||this;return a.extent=t,a}return y(t,e),t}(i.ZP),b=function(e){function t(t){var a=this,i=t||{};return a=e.call(this,i)||this,a.on,a.once,a.un,a.condition_=i.condition?i.condition:u.Bx,a.extent_=null,a.pointerHandler_=null,a.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,a.snappedToVertex_=!1,a.extentFeature_=null,a.vertexFeature_=null,t||(t={}),a.extentOverlay_=new l.Z({source:new c.Z({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:x(),updateWhileAnimating:!0,updateWhileInteracting:!0}),a.vertexOverlay_=new l.Z({source:new c.Z({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:_(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&a.setExtent(t.extent),a}return y(t,e),t.prototype.snapToVertex_=function(e,t){var a=t.getCoordinateFromPixelInternal(e),i=function(e,t){return(0,p.Bs)(a,e)-(0,p.Bs)(a,t)},s=this.getExtentInternal();if(s){var n=S(s);n.sort(i);var o=n[0],r=(0,p.oL)(a,o),l=t.getPixelFromCoordinateInternal(r);if((0,p.TE)(e,l)<=this.pixelTolerance_){var c=t.getPixelFromCoordinateInternal(o[0]),u=t.getPixelFromCoordinateInternal(o[1]),d=(0,p.bI)(l,c),h=(0,p.bI)(l,u),m=Math.sqrt(Math.min(d,h));return this.snappedToVertex_=m<=this.pixelTolerance_,this.snappedToVertex_&&(r=d>h?o[1]:o[0]),r}}return null},t.prototype.handlePointerMove_=function(e){var t=e.pixel,a=e.map,i=this.snapToVertex_(t,a);i||(i=a.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(i)},t.prototype.createOrUpdateExtentFeature_=function(e){var t=this.extentFeature_;return t?e?t.setGeometry((0,m.oJ)(e)):t.setGeometry(void 0):(t=e?new s.Z((0,m.oJ)(e)):new s.Z({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t},t.prototype.createOrUpdatePointerFeature_=function(e){var t=this.vertexFeature_;if(t){var a=t.getGeometry();a.setCoordinates(e)}else t=new s.Z(new o.Z(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t);return t},t.prototype.handleEvent=function(t){return!t.originalEvent||!this.condition_(t)||(t.type!=n.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),e.prototype.handleEvent.call(this,t),!1)},t.prototype.handleDownEvent=function(e){var t=e.pixel,a=e.map,i=this.getExtentInternal(),s=this.snapToVertex_(t,a),n=function(e){var t=null,a=null;return e[0]==i[0]?t=i[2]:e[0]==i[2]&&(t=i[0]),e[1]==i[1]?a=i[3]:e[1]==i[3]&&(a=i[1]),null!==t&&null!==a?[t,a]:null};if(s&&i){var o=s[0]==i[0]||s[0]==i[2]?s[0]:null,r=s[1]==i[1]||s[1]==i[3]?s[1]:null;null!==o&&null!==r?this.pointerHandler_=w(n(s)):null!==o?this.pointerHandler_=C(n([o,i[1]]),n([o,i[3]])):null!==r&&(this.pointerHandler_=C(n([i[0],r]),n([i[2],r])))}else s=a.getCoordinateFromPixelInternal(t),this.setExtent([s[0],s[1],s[0],s[1]]),this.pointerHandler_=w(s);return!0},t.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}},t.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==(0,d.bg)(t)||this.setExtent(null),!1},t.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getExtent=function(){return(0,f.Fj)(this.getExtentInternal(),this.getMap().getView().getProjection())},t.prototype.getExtentInternal=function(){return this.extent_},t.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new g(this.extent_))},t}(r.Z);function x(){var e=(0,h.Ly)();return function(t,a){return e["Polygon"]}}function _(){var e=(0,h.Ly)();return function(t,a){return e["Point"]}}function w(e){return function(t){return(0,d.hI)([e,t])}}function C(e,t){return e[0]==t[0]?function(a){return(0,d.hI)([e,[a[0],t[1]]])}:e[1]==t[1]?function(a){return(0,d.hI)([e,[t[0],a[1]]])}:null}function S(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}const T=b}}]);
//# sourceMappingURL=9593.76c352aa.js.map
{"version":3,"file":"js/7648.30f35ba9.js","mappings":"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","sources":["webpack://@openeo/web-editor/src/components/maps/ControlMixin.vue","webpack://@openeo/web-editor/./src/components/maps/ControlMixin.vue?2120","webpack://@openeo/web-editor/./src/components/maps/ControlMixin.vue","webpack://@openeo/web-editor/src/components/maps/GeoJsonMixin.vue","webpack://@openeo/web-editor/./src/components/maps/GeoJsonMixin.vue?c6d3","webpack://@openeo/web-editor/./src/components/maps/GeoJsonMixin.vue","webpack://@openeo/web-editor/src/components/maps/ExtentMixin.vue","webpack://@openeo/web-editor/./src/components/maps/ExtentMixin.vue?105c","webpack://@openeo/web-editor/./src/components/maps/ExtentMixin.vue","webpack://@openeo/web-editor/./src/components/maps/ProgressControl.vue","webpack://@openeo/web-editor/src/components/maps/ProgressControl.vue","webpack://@openeo/web-editor/./src/components/maps/ProgressControl.vue?c057","webpack://@openeo/web-editor/./src/components/maps/ProgressControl.vue?33a4","webpack://@openeo/web-editor/./src/components/maps/UserLocationControl.vue","webpack://@openeo/web-editor/src/components/maps/UserLocationControl.vue","webpack://@openeo/web-editor/./src/components/maps/UserLocationControl.vue?7a81","webpack://@openeo/web-editor/./src/components/maps/UserLocationControl.vue?73c5","webpack://@openeo/web-editor/src/components/maps/MapMixin.vue","webpack://@openeo/web-editor/./src/components/maps/MapMixin.vue?e588","webpack://@openeo/web-editor/./src/components/maps/MapMixin.vue"],"sourcesContent":["<script>\nimport { Control } from 'ol/control.js';\n\nexport default {\n\tprops: {\n\t\tmap: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcontrol: null\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.control = new Control({\n\t\t\telement: this.$el\n\t\t});\n\t},\n\twatch: {\n\t\tmap(newMap) {\n\t\t\tif (newMap) {\n\t\t\t\tthis.map.addControl(this.control);\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tgetControl() {\n\t\t\treturn this.control;\n\t\t}\n\t}\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ControlMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ControlMixin.vue?vue&type=script&lang=js&\"","var render, staticRenderFns\nimport script from \"./ControlMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./ControlMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport Utils from '../../utils.js';\nimport EventBusMixin from '../EventBusMixin.js';\n\nimport { isEmpty as extentIsEmpty } from 'ol/extent';\nimport { singleClick } from 'ol/events/condition';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport Select from 'ol/interaction/Select';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\n\n// Requires the MapMixin to be included, too.\nexport default {\n\tmixins: [\n\t\tEventBusMixin\n\t],\n\tmethods: {\n\t\taddGeoJson(geojson, selectable = false, title = \"GeoJSON\", fillOrStyle = true) {\n\t\t\tlet source;\n\t\t\tif (geojson instanceof VectorSource) {\n\t\t\t\tsource = geojson;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsource = this.createGeoJsonSource(geojson, this.map.getView().getProjection());\n\t\t\t}\n\n\t\t\tlet layer = new VectorLayer({title, source});\n\t\t\tif (Utils.isObject(fillOrStyle)) {\n\t\t\t\tlayer.setStyle(fillOrStyle);\n\t\t\t}\n\t\t\telse if(!fillOrStyle && this.removeLayerFill) {\n\t\t\t\tthis.removeLayerFill(layer);\n\t\t\t}\n\t\t\tthis.map.addLayer(layer);\n\t\t\tlet extent = source.getExtent();\n\t\t\tif (!extentIsEmpty(extent)) {\n\t\t\t\tthis.map.getView().fit(extent, this.getFitOptions());\n\t\t\t}\n\n\t\t\tif (selectable) {\n\t\t\t\tvar select = new Select({\n\t\t\t\t\thitTolerance: 5,\n\t\t\t\t\tmulti: false,\n\t\t\t\t\tcondition: singleClick,\n\t\t\t\t\tlayers: [\n\t\t\t\t\t\tlayer\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tselect.on('select', this.onSelect);\n\t\t\t\tthis.map.addInteraction(select);\n\t\t\t}\n\n\t\t\treturn layer;\n\t\t},\n\t\tonSelect(event) {\n\t\t\tif (event.selected.length > 0) {\n\t\t\t\tlet feature = event.selected[0];\n\t\t\t\tlet props = Utils.omitFromObject(feature.getProperties(), ['geometry']);\n\t\t\t\tlet title = feature.getId() || \"Feature Properties\";\n\t\t\t\tthis.broadcast('showDataModal', props, title);\n\t\t\t}\n\t\t},\n\t\tcreateGeoJsonSource(geojson, projection) {\n\t\t\tlet features = [];\n\t\t\tif (Utils.detectGeoJson(geojson)) {\n\t\t\t\tfeatures = (new GeoJSON()).readFeatures(geojson, { featureProjection: projection })\n\t\t\t}\n\t\t\treturn new VectorSource({\n\t\t\t\tfeatures,\n\t\t\t\twrapX: false\n\t\t\t});\n\t\t}\n\t}\n};\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GeoJsonMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GeoJsonMixin.vue?vue&type=script&lang=js&\"","var render, staticRenderFns\nimport script from \"./GeoJsonMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./GeoJsonMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport GeoJsonMixin from './GeoJsonMixin.vue';\nimport Utils from '../../utils.js';\n\nimport Feature from 'ol/Feature';\nimport { fromExtent as PolygonFromExtent } from 'ol/geom/Polygon';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\n\nexport default {\n\tmixins: [GeoJsonMixin],\n\tmethods: {\n\t\t// data can be:\n\t\t// bbox: Array of Array (west, south, east, north - WGS84) or STAC Collection\n\t\t// geometry: GeoJSON Object (WGS84) or STAC Item\n\t\taddExtent(data, fill = true) {\n\t\t\tlet footprint = null;\n\t\t\tif (Utils.isObject(data)) {\n\t\t\t\tif (typeof data.west !== 'undefined' && typeof data.east !== 'undefined' && typeof data.south !== 'undefined' && typeof data.north !== 'undefined') {\n\t\t\t\t\tfootprint = [data];\n\t\t\t\t}\n\t\t\t\telse if (data.type === 'Collection') {\n\t\t\t\t\tfootprint = data.extent.spatial.bbox.map(bbox => Utils.extentToBBox(bbox));\n\t\t\t\t}\n\t\t\t\telse if (data.type !== 'Feature' || data.geometry || data.bbox) {\n\t\t\t\t\tfootprint = data;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tfootprint = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfootprint = data;\n\t\t\t}\n\n\t\t\tif (Array.isArray(footprint) && footprint.length > 0) {\n\t\t\t\treturn this.addRectangles(footprint, fill);\n\t\t\t}\n\t\t\telse if (footprint) {\n\t\t\t\treturn this.addGeoJson(footprint, false, \"Footprint\", fill);\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\taddRectangles(rectangles, fill = true) {\n\t\t\tlet mapProj = this.map.getView().getProjection();\n\t\t\tlet features = rectangles.map(bbox => {\n\t\t\t\tlet polygon = PolygonFromExtent([bbox.west, bbox.south, bbox.east, bbox.north]).transform(\"EPSG:4326\", mapProj);\n\t\t\t\treturn new Feature(polygon);\n\t\t\t});\n\t\t\tlet source = new VectorSource({\n\t\t\t\tfeatures,\n\t\t\t\tprojection: mapProj,\n\t\t\t\twrapX: false\n\t\t\t});\n\t\t\tlet layer = new VectorLayer({\n\t\t\t\ttitle: \"Bounding Boxes\",\n\t\t\t\tdisplayInLayerSwitcher: false,\n\t\t\t\tsource\n\t\t\t});\n\t\t\tif (!fill) {\n\t\t\t\tthis.removeLayerFill(layer);\n\t\t\t}\n\t\t\tthis.map.addLayer(layer);\n\t\t\t// ToDo: The Collection component has some smart fitting behavior in setMapSize()\n\t\t\t// Implement something similar here, too.\n\t\t\tthis.map.getView().fit(source.getExtent(), this.getFitOptions());\n\t\t\treturn layer;\n\t\t},\n\n\t\tremoveLayerFill(layer) {\n\t\t\tlet style = layer.getStyle();\n\t\t\t// https://github.com/openlayers/openlayers/issues/10131\n\t\t\tif (typeof style === 'function') {\n\t\t\t\tstyle = style()[0];\n\t\t\t}\n\t\t\tstyle.setFill(null);\n\t\t}\n\n\t}\n\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExtentMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExtentMixin.vue?vue&type=script&lang=js&\"","var render, staticRenderFns\nimport script from \"./ExtentMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./ExtentMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],staticClass:\"ol-unselectable ol-progress-control\"},[_c('div',{staticClass:\"progress-bar\"},[_c('div',{staticClass:\"progress-bar-inner\",style:({width: _vm.percent})})]),_c('div',{staticClass:\"progress-label\"},[_vm._v(_vm._s(_vm.label))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-show=\"show\" class=\"ol-unselectable ol-progress-control\">\n\t\t<div class=\"progress-bar\">\n\t\t\t<div class=\"progress-bar-inner\" :style=\"{width: percent}\" />\n\t\t</div>\n\t\t<div class=\"progress-label\">{{ label }}</div>\n\t</div>\n</template>\n\n<script>\nimport ControlMixin from './ControlMixin.vue';\n\nexport default {\n\tname: 'ProgressControl',\n\tmixins: [\n\t\tControlMixin\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tloading: 0,\n\t\t\tloaded: 0\n\t\t};\n\t},\n\tcomputed: {\n\t\tshow() {\n\t\t\treturn (this.loading > 0 && this.loaded <= this.loading);\n\t\t},\n\t\tpercent() {\n\t\t\treturn (this.loaded / this.loading * 100).toFixed(1) + '%';\n\t\t},\n\t\tlabel() {\n\t\t\treturn \"Loading Tiles (\" + this.percent + \")\";\n\t\t}\n\t},\n\tmethods: {\n\t\taddLoading() {\n\t\t\tthis.loading++;\n\t\t\tthis.update();\n\t\t},\n\t\taddLoaded() {\n\t\t\tthis.loaded++;\n\t\t\tthis.update();\n\t\t},\n\t\tupdate() {\n\t\t\tif (this.loading === this.loaded) {\n\t\t\t\tthis.loading = 0;\n\t\t\t\tthis.loaded = 0;\n\t\t\t}\n\n\t\t\tif (this.loading === this.loaded) {\n\t\t\t\tthis.loading = 0;\n\t\t\t\tthis.loaded = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.ol-progress-control {\n\topacity: 1;\n\ttransition: opacity 0.4s;\n\tbottom: calc(22px + 1em);\n    left: 8px;\n\tposition: absolute;\n\tbackground-color: rgba(0,60,136,.5);\n\tborder-radius: 4px;\n\tpadding: 2px;\n\twidth: 150px;\n\ttext-align: center;\n}\n.ol-progress-control .progress-label {\n\tfont-size: 10px;\n\tcolor: #fff;\n\tmargin-top: 2px;\n}\n.ol-progress-control .progress-bar {\n\tborder-radius: 4px;\n\tborder: 1px solid #fff;\n\theight: 10px;\n}\n.ol-progress-control .progress-bar-inner {\n\tbackground-color: #fff;\n\theight: 10px;\n\twidth: 0;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProgressControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProgressControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProgressControl.vue?vue&type=template&id=1da4d958&scoped=true&\"\nimport script from \"./ProgressControl.vue?vue&type=script&lang=js&\"\nexport * from \"./ProgressControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProgressControl.vue?vue&type=style&index=0&id=1da4d958&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1da4d958\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ol-location ol-unselectable ol-control\",staticStyle:{\"pointer-events\":\"auto\"}},[_c('button',{attrs:{\"type\":\"button\",\"title\":\"Go to your location\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.request.apply(null, arguments)}}},[_c('i',{staticClass:\"fas fa-location-arrow\"})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"ol-location ol-unselectable ol-control\" style=\"pointer-events: auto;\">\n\t\t<button type=\"button\" @click.prevent.stop=\"request\" title=\"Go to your location\">\n\t\t\t<i class=\"fas fa-location-arrow\"></i>\n\t\t</button>\n\t</div>\n</template>\n\n<script>\nimport ControlMixin from './ControlMixin.vue';\nimport { fromLonLat } from 'ol/proj';\n\nexport default {\n\tname: 'UserLocationControl',\n\tmixins: [\n\t\tControlMixin\n\t],\n\tmethods: {\n\t\trequest() {\n\t\t\tif (\"geolocation\" in navigator) {\n\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\tposition => {\n\t\t\t\t\t\tlet view = this.map.getView();\n\t\t\t\t\t\tlet coords = [position.coords.longitude, position.coords.latitude];\n\t\t\t\t\t\tview.setCenter(fromLonLat(coords, view.getProjection()));\n\t\t\t\t\t},\n\t\t\t\t\terror => Utils.error(this, error, \"Location Error\"),\n\t\t\t\t\t{\n\t\t\t\t\t\tmaximumAge: Infinity\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.ol-location {\n\tz-index: 0;\n\tleft: 0.5em;\n\ttop: calc(3.75em + 6px);\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserLocationControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserLocationControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserLocationControl.vue?vue&type=template&id=71051cba&scoped=true&\"\nimport script from \"./UserLocationControl.vue?vue&type=script&lang=js&\"\nexport * from \"./UserLocationControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserLocationControl.vue?vue&type=style&index=0&id=71051cba&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"71051cba\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport EventBusMixin from '../EventBusMixin.js';\nimport Utils from '../../utils.js';\n\nimport 'ol/ol.css';\nimport { defaults as defaultControls, FullScreen, ScaleLine } from 'ol/control';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport { fromLonLat } from 'ol/proj';\nimport Projection from 'ol/proj/Projection';\nimport ProjManager from './projManager';\nimport TileLayer from 'ol/layer/Tile';\nimport XYZ from 'ol/source/XYZ';\n\nimport 'ol-ext/control/LayerSwitcher.css';\nimport LayerSwitcher from 'ol-ext/control/LayerSwitcher';\n\nimport ProgressControl from './ProgressControl.vue';\nimport UserLocationControl from './UserLocationControl.vue';\n\nlet idCounter = 1;\n\nexport default {\n\tcomponents: {\n\t\tProgressControl,\n\t\tUserLocationControl\n\t},\n\tmixins: [EventBusMixin],\n\tprops: {\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tremovableLayers: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmap: null,\n\t\t\tid: `map_` + idCounter++\n\t\t};\n\t},\n\twatch: {\n\t\tasync show() {\n\t\t\tawait this.showMap();\n\t\t}\n\t},\n\tasync mounted() {\n\t\tawait this.showMap();\n\t},\n\tmethods: {\n\t\tasync showMap() {\n\t\t\tif (this.show) {\n\t\t\t\tawait this.$nextTick();\n\t\t\t\tawait this.renderMap();\n\t\t\t}\n\t\t},\n\t\tasync createMap(opts = 'EPSG:3857') {\n\t\t\tlet view;\n\t\t\tlet viewOpts = {\n\t\t\t\tshowFullExtent: true\n\t\t\t};\n\t\t\tif (typeof opts === 'string') { // A projection code\n\t\t\t\tviewOpts.projection = await ProjManager.get(opts);\n\t\t\t}\n\t\t\telse if (opts instanceof Projection) {\n\t\t\t\tviewOpts.projection = opts;\n\t\t\t}\n\t\t\telse if (opts instanceof View) {\n\t\t\t\tview = opts;\n\t\t\t}\n\t\t\telse if (Utils.isObject(opts)) {\n\t\t\t\tviewOpts = opts;\n\t\t\t}\n\n\t\t\tif (!view) {\n\t\t\t\tview = new View(viewOpts);\n\t\t\t\tif (!view.getCenter()) {\n\t\t\t\t\tlet location = this.$config.mapLocation;\n\t\t\t\t\tif (!Array.isArray(location) || location.length != 2) {\n\t\t\t\t\t\tlocation = [0,0];\n\t\t\t\t\t}\n\t\t\t\t\tview.setCenter(fromLonLat([location[1], location[0]], view.getProjection()));\n\t\t\t\t}\n\t\t\t\tif (!view.getZoom()) {\n\t\t\t\t\tview.setZoom(this.$config.mapZoom || 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.map !== null) {\n\t\t\t\tthis.map.updateSize();\n\t\t\t\tthis.map.render();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar customControls = [\n\t\t\t\tnew FullScreen(),\n\t\t\t\tnew ScaleLine()\n\t\t\t];\n\t\t\tvar mapOptions = {\n\t\t\t\ttarget: this.id,\n\t\t\t\tview\n\t\t\t};\n\t\t\tif (!this.editable) {\n\t\t\t\tmapOptions.interactions = [];\n\t\t\t\tmapOptions.controls = customControls;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmapOptions.controls = defaultControls().extend(customControls);\n\t\t\t}\n\t\t\tthis.map = new Map(mapOptions);\n\n\t\t\tthis.listen('windowResized', this.updateMapSize);\n\t\t\t\n\t\t\tlet layers = this.map.getLayers();\n\t\t\tlayers.on('add', evt => {\n\t\t\t\tlet layer = evt.element;\n\n\t\t\t\tlet events = layer.get('events');\n\t\t\t\tfor(let event in events) {\n\t\t\t\t\tthis.map.on(event, events[event]);\n\t\t\t\t}\n\t\t\t});\n\t\t\tlayers.on('remove', evt => {\n\t\t\t\tlet layer = evt.element;\n\n\t\t\t\tlet events = layer.get('events');\n\t\t\t\tfor(let event in events) {\n\t\t\t\t\tthis.map.un(event, events[event]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\taddLayerSwitcher() {\n\t\t\tthis.map.addControl(new LayerSwitcher({trash: this.removableLayers}));\n\t\t},\n\n\t\taddBasemaps() {\n\t\t\tlet basemapOptions = {\n\t\t\t\topaque: true,\n\t\t\t\tattributionsCollapsible: false,\n\t\t\t\twrapX: false\n\t\t\t};\n\t\t\tlet baselayers = [];\n\t\t\tif (Array.isArray(this.$config.basemaps)) {\n\t\t\t\tlet hasDefault = false;\n\t\t\t\tfor(let opts of this.$config.basemaps) {\n\t\t\t\t\tlet basemap = new XYZ(Object.assign({}, basemapOptions, opts));\n\t\t\t\t\tlet baselayer = new TileLayer({\n\t\t\t\t\t\tsource: this.trackTileProgress(basemap),\n\t\t\t\t\t\tbaseLayer: true,\n\t\t\t\t\t\ttitle: opts.title,\n\t\t\t\t\t\tnoSwitcherDelete: true,\n\t\t\t\t\t\tvisible: !hasDefault\n\t\t\t\t\t});\n\t\t\t\t\tbaselayers.push(baselayer);\n\t\t\t\t\tthis.map.addLayer(baselayer);\n\t\t\t\t\thasDefault = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn baselayers;\n\t\t},\n\n\t\tonShow() {\n\t\t\tthis.listen('windowResized', this.updateMapSize);\n\t\t},\n\t\tonHide() {\n\t\t\tthis.unlisten('windowResized');\n\t\t},\n\n\t\t// To be overridden by implementing components.\n\t\tasync renderMap() {\n\t\t\tawait this.createMap();\n\t\t\tthis.addBasemaps();\n\t\t},\n\n\t\tasync updateMapSize() {\n\t\t\tif (this.map) {\n\t\t\t\tawait this.$nextTick();\n\t\t\t\tthis.map.updateSize();\n\t\t\t}\n\t\t},\n\n\t\taddLayerToMap(layer) {\n\t\t\tlayer.set('userLayer', true);\n\t\t\tthis.map.addLayer(layer);\n\t\t},\n\t\tremoveLayerFromMap(id) {\n\t\t\tlet layer = this.getLayerFromMap(id);\n\t\t\tif (layer) {\n\t\t\t\tthis.map.removeLayer(layer);\n\t\t\t}\n\t\t},\n\t\tgetLayerFromMap(id) {\n\t\t\tlet layers = this.map.getLayers().getArray();\n\t\t\tfor(let layer of layers) {\n\t\t\t\tif (layer.get('id') === id) {\n\t\t\t\t\treturn layer;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetVisibleLayers() {\n\t\t\tlet shownLayers = [];\n\t\t\tlet layers = this.map.getLayers().getArray();\n\t\t\tfor(let layer of layers) {\n\t\t\t\tif (layer.get('userLayer') && layer.getVisible()) {\n\t\t\t\t\tshownLayers.push(layer);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn shownLayers;\n\t\t},\n\n\t\tgetFitOptions(paddingPc = 25) {\n\t\t\tlet fitOptions = {};\n\t\t\t// Make a bigger extent visible so that user can get a better overview\n\t\t\tvar size = this.map.getSize();\n\t\t\tif (size && paddingPc > 0) {\n\t\t\t\tfitOptions.padding = [size[0]*paddingPc/100, size[1]*paddingPc/100, size[0]*paddingPc/100, size[1]*paddingPc/100];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfitOptions.padding = [30,30,30,30];\n\t\t\t}\n\t\t\treturn fitOptions;\n\t\t},\n\n\t\ttrackTileProgress(source) {\n\t\t\tif (this.$refs.progress) {\n\t\t\t\tsource.on('tileloadstart', () => this.$refs.progress && this.$refs.progress.addLoading());\n\t\t\t\tlet loadedFn = () => this.$refs.progress && this.$refs.progress.addLoaded();\n\t\t\t\tsource.on('tileloadend', loadedFn);\n\t\t\t\tsource.on('tileloaderror', loadedFn);\n\t\t\t}\n\t\t\treturn source;\n\t\t},\n\n\t\tfromLonLat(coords) {\n\t\t\treturn fromLonLat(coords, this.map.getView().getProjection());\n\t\t},\n\t\ttoExtent(value) {\n\t\t\tlet extent = null;\n\t\t\tif (Utils.isObject(value) && \"west\" in value && \"south\" in value && \"east\" in value && \"north\" in value) {\n\t\t\t\textent = [value.west, value.south, value.east, value.north];\n\t\t\t}\n\t\t\telse if (Array.isArray(value) && value.length >= 4) {\n\t\t\t\textent = value;\n\t\t\t}\n\t\t\treturn extent;\n\t\t}\n\n\t}\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapMixin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapMixin.vue?vue&type=script&lang=js&\"","var render, staticRenderFns\nimport script from \"./MapMixin.vue?vue&type=script&lang=js&\"\nexport * from \"./MapMixin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["props","map","type","data","control","mounted","element","watch","methods","getControl","render","staticRenderFns","component","mixins","EventBusMixin","addGeoJson","source","title","layer","hitTolerance","multi","condition","layers","select","onSelect","createGeoJsonSource","features","featureProjection","wrapX","addExtent","footprint","addRectangles","projection","displayInLayerSwitcher","removeLayerFill","style","_vm","this","_c","_self","directives","name","rawName","value","show","expression","staticClass","width","percent","_v","_s","label","ControlMixin","loading","loaded","computed","addLoading","addLoaded","update","staticStyle","attrs","on","$event","preventDefault","stopPropagation","request","apply","arguments","navigator","position","view","error","maximumAge","idCounter","components","ProgressControl","UserLocationControl","default","editable","removableLayers","id","showFullExtent","viewOpts","location","target","mapOptions","addLayerSwitcher","trash","addBasemaps","opaque","attributionsCollapsible","baseLayer","noSwitcherDelete","visible","baselayers","hasDefault","onShow","onHide","addLayerToMap","removeLayerFromMap","getLayerFromMap","getVisibleLayers","shownLayers","getFitOptions","fitOptions","trackTileProgress","fromLonLat","toExtent","extent"],"sourceRoot":""}
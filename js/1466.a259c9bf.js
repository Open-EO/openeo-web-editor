"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[1466],{98279:(t,e,n)=>{n.d(e,{Z:()=>_});var r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:t.id}},[e("ProgressControl",{ref:"progress",attrs:{map:t.map}}),e("UserLocationControl",{attrs:{map:t.map}}),e("TextControl",{attrs:{text:t.help,map:t.map}})],1)},i=[],o=n(18840),a=n(79879),s=n(92420),l=n(63432),u=n(28641),h=n(47539),p=n(45723);const c={name:"MapAreaSelect",mixins:[o.Z],components:{TextControl:p.Z},props:{value:{type:[Object,Array],default:()=>null}},data(){let t=null;return a.Z.isObject(this.value)&&"west"in this.value&&"south"in this.value&&"east"in this.value&&"north"in this.value?t=[this.value.west,this.value.south,this.value.east,this.value.north]:Array.isArray(this.value)&&value.length>=4&&(t=this.value),{interaction:null,extent:t}},computed:{returnAsObject(){return!Array.isArray(this.value)},projectedExtent(){return this.extent?(0,l.$A)(this.extent,"EPSG:4326",this.map.getView().getProjection()):null},bbox(){return a.Z.extentToBBox(this.extent)},help(){return this.extent?"Click inside the bounding box to remove it.":"Click on the map to add a bounding box."}},methods:{update(t){t.extent?this.extent=(0,l.$A)(t.extent,this.map.getView().getProjection(),"EPSG:4326"):this.extent=null,this.$emit("input",this.returnAsObject?this.bbox:this.extent)},ensureValidExtent(t){return t?[Math.max(t[0],-180),Math.max(t[1],-90),Math.min(t[2],180),Math.min(t[3],90)]:t},async renderMap(){let t=!1!==a.Z.isBboxInWebMercator(this.bbox);await this.createMap(t?"EPSG:3857":"EPSG:4326"),this.addBasemaps();let e=t=>{if(!this.editable)return!1;if("singleclick"===t.type){if(!this.extent){let e=this.map.getSize().map((t=>.2*t)),n=this.map.getView().calculateExtent(e),r=[n[2]-n[0],n[3]-n[1]],i=[t.coordinate[0]-r[0],t.coordinate[1]-r[1],t.coordinate[0]+r[0],t.coordinate[1]+r[1]];return this.interaction.setExtent(i),!1}(0,u.jE)(this.projectedExtent,...t.coordinate)&&(this.interaction.setExtent(null),this.interaction.vertexOverlay_.getSource().clear(),this.interaction.vertexFeature_=null)}else if(this.interaction.handlingDownUpSequence||this.interaction.snapToVertex_(t.pixel,t.map))return!0;return!1};if(this.interaction=new s.Z({extent:this.projectedExtent,condition:e,boxStyle:(0,h.yF)(),pixelTolerance:15}),this.editable&&this.interaction.on("extentchanged",this.update),this.map.addInteraction(this.interaction),this.projectedExtent){var n=this.getFitOptions(this.editable?10:33);this.map.getView().fit(this.projectedExtent,n)}}}},x=c;var d=n(1001),v=(0,d.Z)(x,r,i,!1,null,null,null);const _=v.exports},45723:(t,e,n)=>{n.d(e,{Z:()=>h});var r=function(){var t=this,e=t._self._c;return t.texts.length>0?e("div",{staticClass:"ol-unselectable ol-control value",class:{pointer:t.texts.length>1},on:{click:t.toggle}},[t._v(" "+t._s(t.current)+" ")]):t._e()},i=[],o=n(77873);const a={name:"TextControl",mixins:[o.Z],data(){return{i:0}},computed:{texts(){return Array.isArray(this.text)?this.text:"string"===typeof this.text&&this.text.length>0?[this.text]:[]},current(){return 0===this.texts.length?"":this.texts[this.i%this.text.length]}},props:{text:{text:[String,Array],default:""}},methods:{toggle(){this.i++}}},s=a;var l=n(1001),u=(0,l.Z)(s,r,i,!1,null,"6d7a0f06",null);const h=u.exports},81489:(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step choose-bbox"},[e("p",[t._v("Please select the area of interest which you want to download data for.")]),e("MapAreaSelect",{staticClass:"map",attrs:{show:t.showMap,value:t.value},on:{input:t.update}})],1)},i=[],o=n(98279);const a={name:"ChooseBoundingBox",components:{MapAreaSelect:o.Z},props:{value:{type:Object,default:null}},data(){return{showMap:!0}},mounted(){window.setTimeout((()=>this.showMap=!0),1e3)},methods:{update(t){this.$emit("input",t)}}},s=a;var l=n(1001),u=(0,l.Z)(s,r,i,!1,null,"7457938e",null);const h=u.exports},92420:(t,e,n)=>{n.d(e,{Z:()=>P});var r=n(291),i=n(81090),o=n(92217),a=n(60188),s=n(14515),l=n(92371),u=n(22556),h=n(98683),p=n(28641),c=n(91900),x=n(47539),d=n(2033),v=n(63432),_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f={EXTENTCHANGED:"extentchanged"},g=function(t){function e(e){var n=t.call(this,f.EXTENTCHANGED)||this;return n.extent=e,n}return _(e,t),e}(r.ZP),y=function(t){function e(e){var n=this,r=e||{};return n=t.call(this,r)||this,n.on,n.once,n.un,n.condition_=r.condition?r.condition:h.Bx,n.extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new l.Z({source:new u.Z({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:m(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new l.Z({source:new u.Z({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:E(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return _(e,t),e.prototype.snapToVertex_=function(t,e){var n=e.getCoordinateFromPixelInternal(t),r=function(t,e){return(0,c.Bs)(n,t)-(0,c.Bs)(n,e)},i=this.getExtentInternal();if(i){var o=T(i);o.sort(r);var a=o[0],s=(0,c.oL)(n,a),l=e.getPixelFromCoordinateInternal(s);if((0,c.TE)(t,l)<=this.pixelTolerance_){var u=e.getPixelFromCoordinateInternal(a[0]),h=e.getPixelFromCoordinateInternal(a[1]),p=(0,c.bI)(l,u),x=(0,c.bI)(l,h),d=Math.sqrt(Math.min(p,x));return this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(s=p>x?a[1]:a[0]),s}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,n=t.map,r=this.snapToVertex_(e,n);r||(r=n.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(r)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry((0,d.oJ)(t)):e.setGeometry(void 0):(e=t?new i.Z((0,d.oJ)(t)):new i.Z({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;if(e){var n=e.getGeometry();n.setCoordinates(t)}else e=new i.Z(new a.Z(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e);return e},e.prototype.handleEvent=function(e){return!e.originalEvent||!this.condition_(e)||(e.type!=o.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,n=t.map,r=this.getExtentInternal(),i=this.snapToVertex_(e,n),o=function(t){var e=null,n=null;return t[0]==r[0]?e=r[2]:t[0]==r[2]&&(e=r[0]),t[1]==r[1]?n=r[3]:t[1]==r[3]&&(n=r[1]),null!==e&&null!==n?[e,n]:null};if(i&&r){var a=i[0]==r[0]||i[0]==r[2]?i[0]:null,s=i[1]==r[1]||i[1]==r[3]?i[1]:null;null!==a&&null!==s?this.pointerHandler_=w(o(i)):null!==a?this.pointerHandler_=b(o([a,r[1]]),o([a,r[3]])):null!==s&&(this.pointerHandler_=b(o([r[0],s]),o([r[2],s])))}else i=n.getCoordinateFromPixelInternal(e),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=w(i);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtentInternal();return e&&0!==(0,p.bg)(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return(0,v.Fj)(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new g(this.extent_))},e}(s.Z);function m(){var t=(0,x.Ly)();return function(e,n){return t["Polygon"]}}function E(){var t=(0,x.Ly)();return function(e,n){return t["Point"]}}function w(t){return function(e){return(0,p.hI)([t,e])}}function b(t,e){return t[0]==e[0]?function(n){return(0,p.hI)([t,[n[0],e[1]]])}:t[1]==e[1]?function(n){return(0,p.hI)([t,[e[0],n[1]]])}:null}function T(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}const P=y}}]);
//# sourceMappingURL=1466.a259c9bf.js.map
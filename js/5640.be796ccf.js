"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[5640],{835:(t,e,i)=>{i.d(e,{x:()=>s});const s={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"}},4961:(t,e,i)=>{i.d(e,{y2:()=>v,$i:()=>C,x$:()=>A,Ay:()=>D});var s=i(66429),n=i(40808),o=i(55799),r=i(9703),l=i(70915),a=i(38774),h=i(27016),c=i(66514),d=i(50904),u=i(87622);const f=(0,l.S5)(),g=[],_=[],x=[],p=[];function m(t){return t[3].declutterBox}const S=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function y(t,e){return"start"===e?e=S.test(t)?"right":"left":"end"===e&&(e=S.test(t)?"left":"right"),o.E[e]}function k(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}class T{constructor(t,e,i,s,o){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,r.vt)(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new n.A:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,i,s){const n=t+e+i+s;if(this.labels_[n])return this.labels_[n];const r=s?this.strokeStates[s]:null,l=i?this.fillStates[i]:null,h=this.textStates[e],c=this.pixelRatio,d=[h.scale[0]*c,h.scale[1]*c],u=Array.isArray(t),f=h.justify?o.E[h.justify]:y(Array.isArray(t)?t[0]:t,h.textAlign||a.MY),g=s&&r.lineWidth?r.lineWidth:0,_=u?t:t.split("\n").reduce(k,[]),{width:x,height:p,widths:m,heights:S,lineWidths:T}=(0,a.jT)(h,_),w=x+g,E=[],I=(w+2)*d[0],v=(p+g)*d[1],C={width:I<0?Math.floor(I):Math.ceil(I),height:v<0?Math.floor(v):Math.ceil(v),contextInstructions:E};1==d[0]&&1==d[1]||E.push("scale",d),s&&(E.push("strokeStyle",r.strokeStyle),E.push("lineWidth",g),E.push("lineCap",r.lineCap),E.push("lineJoin",r.lineJoin),E.push("miterLimit",r.miterLimit),E.push("setLineDash",[r.lineDash]),E.push("lineDashOffset",r.lineDashOffset)),i&&E.push("fillStyle",l.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const A=.5-f;let b=f*w+A*g;const R=[],L=[];let D,O=0,M=0,F=0,W=0;for(let o=0,a=_.length;o<a;o+=2){const t=_[o];if("\n"===t){M+=O,O=0,b=f*w+A*g,++W;continue}const e=_[o+1]||h.font;e!==D&&(s&&R.push("font",e),i&&L.push("font",e),D=e),O=Math.max(O,S[F]);const n=[t,b+A*m[F]+f*(m[F]-T[W]),.5*(g+O)+M];b+=m[F],s&&R.push("strokeText",n),i&&L.push("fillText",n),++F}return Array.prototype.push.apply(E,R),Array.prototype.push.apply(E,L),this.labels_[n]=C,C}replayTextBackground_(t,e,i,s,n,o,r){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignAndScaleFill_=o[2],this.fill_(t)),r&&(this.setStrokeStyle_(t,r),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,n,o,a,h,c,d,u,m,S,y,k,T){a*=m[0],h*=m[1];let w=i-a,E=s-h;const I=n+c>t?t-c:n,v=o+d>e?e-d:o,C=y[3]+I*m[0]+y[1],A=y[0]+v*m[1]+y[2],b=w-y[3],R=E-y[0];let L;return(k||0!==u)&&(g[0]=b,p[0]=b,g[1]=R,_[1]=R,_[0]=b+C,x[0]=_[0],x[1]=R+A,p[1]=x[1]),0!==u?(L=(0,r.Zz)((0,r.vt)(),i,s,1,1,u,-i,-s),(0,r.Bb)(L,g),(0,r.Bb)(L,_),(0,r.Bb)(L,x),(0,r.Bb)(L,p),(0,l.N)(Math.min(g[0],_[0],x[0],p[0]),Math.min(g[1],_[1],x[1],p[1]),Math.max(g[0],_[0],x[0],p[0]),Math.max(g[1],_[1],x[1],p[1]),f)):(0,l.N)(Math.min(b,b+C),Math.min(R,R+A),Math.max(b,b+C),Math.max(R,R+A),f),S&&(w=Math.round(w),E=Math.round(E)),{drawImageX:w,drawImageY:E,drawImageW:I,drawImageH:v,originX:c,originY:d,declutterBox:{minX:f[0],minY:f[1],maxX:f[2],maxY:f[3],value:T},canvasTransform:L,scale:m}}replayImageOrLabel_(t,e,i,s,n,o,r){const l=!(!o&&!r),h=s.declutterBox,c=r?r[2]*s.scale[0]/2:0,d=h.minX-c<=e[0]&&h.maxX+c>=0&&h.minY-c<=e[1]&&h.maxY+c>=0;return d&&(l&&this.replayTextBackground_(t,g,_,x,p,o,r),(0,a.Jw)(t,s.canvasTransform,n,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const i=(0,r.Bb)(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;t.save(),t.translate(i[0]%s,i[1]%s),1!==e&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const n=this.textStates[e],r=this.createLabel(t,e,s,i),l=this.strokeStates[i],h=this.pixelRatio,c=y(Array.isArray(t)?t[0]:t,n.textAlign||a.MY),d=o.E[n.textBaseline||a.M8],u=l&&l.lineWidth?l.lineWidth:0,f=r.width/h-2*n.scale[0],g=c*f+2*(.5-c)*u,_=d*r.height/h+2*(.5-d)*u;return{label:r,anchorX:g,anchorY:_}}execute_(t,e,i,n,o,f,g,_){const x=this.zIndexContext_;let p;this.pixelCoordinates_&&(0,c.aI)(i,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=(0,u.Rc)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,r.k3)(this.renderedTransform_,i));let S=0;const k=n.length;let T,w,E,I,v,C,A,b,R,L,D,O,M,F=0,W=0,Y=0,P=null,G=null;const B=this.coordinateCache_,N=this.viewRotation_,q=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,V={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},X=this.instructions!=n||this.overlaps?0:200;let H,z,J,K;while(S<k){const i=n[S],r=i[0];switch(r){case s.Ay.BEGIN_GEOMETRY:H=i[1],K=i[3],H.getGeometry()?void 0===g||(0,l.HY)(g,K.getExtent())?++S:S=i[2]+1:S=i[2],x&&(x.zIndex=i[4]);break;case s.Ay.BEGIN_PATH:W>X&&(this.fill_(t),W=0),Y>X&&(t.stroke(),Y=0),W||Y||(t.beginPath(),v=NaN,C=NaN),++S;break;case s.Ay.CIRCLE:F=i[1];const n=p[F],r=p[F+1],c=p[F+2],u=p[F+3],k=c-n,Z=u-r,U=Math.sqrt(k*k+Z*Z);t.moveTo(n+U,r),t.arc(n,r,U,0,2*Math.PI,!0),++S;break;case s.Ay.CLOSE_PATH:t.closePath(),++S;break;case s.Ay.CUSTOM:F=i[1],T=i[2];const j=i[3],$=i[4],Q=i[5];V.geometry=j,V.feature=H,S in B||(B[S]=[]);const tt=B[S];Q?Q(p,F,T,2,tt):(tt[0]=p[F],tt[1]=p[F+1],tt.length=2),x&&(x.zIndex=i[6]),$(tt,V),++S;break;case s.Ay.DRAW_IMAGE:F=i[1],T=i[2],R=i[3],w=i[4],E=i[5];let et=i[6];const it=i[7],st=i[8],nt=i[9],ot=i[10];let rt=i[11];const lt=i[12];let at=i[13];I=i[14]||"declutter";const ht=i[15];if(!R&&i.length>=20){L=i[19],D=i[20],O=i[21],M=i[22];const t=this.drawLabelWithPointPlacement_(L,D,O,M);R=t.label,i[3]=R;const e=i[23];w=(t.anchorX-e)*this.pixelRatio,i[4]=w;const s=i[24];E=(t.anchorY-s)*this.pixelRatio,i[5]=E,et=R.height,i[6]=et,at=R.width,i[13]=at}let ct,dt,ut,ft;i.length>25&&(ct=i[25]),i.length>17?(dt=i[16],ut=i[17],ft=i[18]):(dt=a.Tq,ut=!1,ft=!1),ot&&q?rt+=N:ot||q||(rt-=N);let gt=0;for(;F<T;F+=2){if(ct&&ct[gt++]<at/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(R.width,R.height,p[F],p[F+1],at,et,w,E,st,nt,rt,lt,o,dt,ut||ft,H),s=[t,e,R,i,it,ut?P:null,ft?G:null];if(_){let t,e,n,o,r;if(ht){const i=T-F;if(!ht[i]){ht[i]={args:s,declutterMode:I};continue}const o=ht[i];t=o.args,e=o.declutterMode,delete ht[i],n=m(t)}if(!t||"declutter"===e&&_.collides(n)||(o=!0),"declutter"===I&&_.collides(i.declutterBox)||(r=!0),"declutter"===e&&"declutter"===I){const t=o&&r;o=t,r=t}o&&("none"!==e&&_.insert(n),this.replayImageOrLabel_.apply(this,t)),r&&("none"!==I&&_.insert(i.declutterBox),this.replayImageOrLabel_.apply(this,s))}else this.replayImageOrLabel_.apply(this,s)}++S;break;case s.Ay.DRAW_CHARS:const _t=i[1],xt=i[2],pt=i[3],mt=i[4];M=i[5];const St=i[6],yt=i[7],kt=i[8];O=i[9];const Tt=i[10];L=i[11],D=i[12];const wt=[i[13],i[13]];I=i[14]||"declutter";const Et=this.textStates[D],It=Et.font,vt=[Et.scale[0]*yt,Et.scale[1]*yt];let Ct;It in this.widths_?Ct=this.widths_[It]:(Ct={},this.widths_[It]=Ct);const At=(0,d.k)(p,_t,xt,2),bt=Math.abs(vt[0])*(0,a.TA)(It,L,Ct);if(mt||bt<=At){const i=this.textStates[D].textAlign,s=(At-bt)*y(L,i),n=(0,h.w)(p,_t,xt,2,L,s,St,Math.abs(vt[0]),a.TA,It,Ct,q?0:this.viewRotation_);t:if(n){const i=[];let s,o,r,l,h;if(O)for(s=0,o=n.length;s<o;++s){h=n[s],r=h[4],l=this.createLabel(r,D,"",O),w=h[2]+(vt[0]<0?-Tt:Tt),E=pt*l.height+2*(.5-pt)*Tt*vt[1]/vt[0]-kt;const o=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,w,E,0,0,h[3],wt,!1,a.Tq,!1,H);if(_&&"declutter"===I&&_.collides(o.declutterBox))break t;i.push([t,e,l,o,1,null,null])}if(M)for(s=0,o=n.length;s<o;++s){h=n[s],r=h[4],l=this.createLabel(r,D,M,""),w=h[2],E=pt*l.height-kt;const o=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,w,E,0,0,h[3],wt,!1,a.Tq,!1,H);if(_&&"declutter"===I&&_.collides(o.declutterBox))break t;i.push([t,e,l,o,1,null,null])}_&&"none"!==I&&_.load(i.map(m));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++S;break;case s.Ay.END_GEOMETRY:if(void 0!==f){H=i[1];const t=f(H,K,I);if(t)return t}++S;break;case s.Ay.FILL:X?W++:this.fill_(t),++S;break;case s.Ay.MOVE_TO_LINE_TO:for(F=i[1],T=i[2],z=p[F],J=p[F+1],t.moveTo(z,J),v=z+.5|0,C=J+.5|0,F+=2;F<T;F+=2)z=p[F],J=p[F+1],A=z+.5|0,b=J+.5|0,F!=T-2&&A===v&&b===C||(t.lineTo(z,J),v=A,C=b);++S;break;case s.Ay.SET_FILL_STYLE:P=i,this.alignAndScaleFill_=i[2],W&&(this.fill_(t),W=0,Y&&(t.stroke(),Y=0)),t.fillStyle=i[1],++S;break;case s.Ay.SET_STROKE_STYLE:G=i,Y&&(t.stroke(),Y=0),this.setStrokeStyle_(t,i),++S;break;case s.Ay.STROKE:X?Y++:t.stroke(),++S;break;default:++S;break}}W&&this.fill_(t),Y&&t.stroke()}execute(t,e,i,s,n,o){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,n,void 0,void 0,o)}executeHitDetection(t,e,i,s,n){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,s,n)}}const w=T;var E=i(68711),I=i(43530);const v=["Polygon","Circle","LineString","Image","Text","Default"],C=["Image","Text"],A=v.filter(t=>!C.includes(t));class b{constructor(t,e,i,s,n,o,l){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,r.vt)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(n,l)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,e){for(const i in t){let s=this.executorsByZIndex_[i];void 0===s&&(s={},this.executorsByZIndex_[i]=s);const n=t[i];for(const t in n){const i=n[t];s[t]=new w(this.resolution_,this.pixelRatio_,this.overlaps_,i,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,s=t.length;e<s;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,n,o){s=Math.round(s);const a=2*s+1,h=(0,r.Zz)(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=(0,E.Y)(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;let f;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):d||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(f=(0,l.S5)(),(0,l.$C)(f,t),(0,l.r)(f,e*(this.renderBuffer_+s),f));const g=L(s);let _;function x(t,e,i){const r=u.getImageData(0,0,a,a).data;for(let l=0,h=g.length;l<h;l++)if(r[g[l]]>0){if(!o||"none"===i||"Image"!==_&&"Text"!==_||o.includes(t)){const i=(g[l]-3)/4,o=s-i%a,r=s-(i/a|0),h=n(t,e,o*o+r*r);if(h)return h}u.clearRect(0,0,a,a);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);let m,S,y,k,T;for(p.sort(c.V_),m=p.length-1;m>=0;--m){const t=p[m].toString();for(y=this.executorsByZIndex_[t],S=v.length-1;S>=0;--S)if(_=v[S],k=y[_],void 0!==k&&(T=k.executeHitDetection(u,h,i,x,f),T))return T}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],n=e[2],o=e[3],r=[i,s,i,o,n,o,n,s];return(0,u.Rc)(r,0,8,2,t,r),r}isEmpty(){return(0,I.p)(this.executorsByZIndex_)}execute(t,e,i,s,n,o,r){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(c.V_),o=o||v;const a=v.length;let h,d,u,f,g;for(r&&l.reverse(),h=0,d=l.length;h<d;++h){const c=l[h].toString();for(g=this.executorsByZIndex_[c],u=0,f=o.length;u<f;++u){const c=o[u],d=g[c];if(void 0!==d){const o=null===r?void 0:d.getZIndexContext(),f=o?o.getContext():t,g=this.maxExtent_&&"Image"!==c&&"Text"!==c;if(g&&(f.save(),this.clip(f,i)),o&&"Text"!==c&&"Image"!==c?o.pushFunction(t=>d.execute(t,e,i,s,n,r)):d.execute(f,e,i,s,n,r),g&&f.restore(),o){o.offset();const t=l[h]*a+u;this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(o)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(c.V_);for(let i=0,s=e.length;i<s;++i)t[e[i]].forEach(t=>{t.draw(this.renderedContext_),t.clear()}),t[e[i]].length=0}}const R={};function L(t){if(void 0!==R[t])return R[t];const e=2*t+1,i=t*t,s=new Array(i+1);for(let o=0;o<=t;++o)for(let n=0;n<=t;++n){const r=o*o+n*n;if(r>i)break;let l=s[r];l||(l=[],s[r]=l),l.push(4*((t+o)*e+(t+n))+3),o>0&&l.push(4*((t-o)*e+(t+n))+3),n>0&&(l.push(4*((t+o)*e+(t-n))+3),o>0&&l.push(4*((t-o)*e+(t-n))+3))}const n=[];for(let o=0,r=s.length;o<r;++o)s[o]&&n.push(...s[o]);return R[t]=n,n}const D=b},5986:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(6837),n=i(6141),o=i(11854),r=i(4087);class l extends o.A{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t}getFeatures(t){return(0,r.b0)()}getData(t){return null}prepareFrame(t){return(0,r.b0)()}renderFrame(t,e){return(0,r.b0)()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(s,n)=>{const o=this.loadedTileCallback.bind(this,i,s);return t.forEachLoadedTile(e,s,n,o)}}forEachFeatureAtCoordinate(t,e,i,s,n){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;e.getState()!==n.A.LOADED&&e.getState()!==n.A.ERROR||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=n.A.LOADED&&e!=n.A.ERROR&&t.addEventListener(s.A.CHANGE,this.boundHandleImageChange_),e==n.A.IDLE&&(t.load(),e=t.getState()),e==n.A.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const a=l},8130:(t,e,i)=>{i.d(e,{A:()=>u});var s=i(66429),n=i(11580),o=i(32826),r=i(77295),l=i(70915),a=i(38774),h=i(66514),c=i(56361);class d extends o.A{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,n=this.coordinates;let o=n.length;for(let r=0,a=t.length;r<a;r+=e)s[0]=t[r],s[1]=t[r+1],(0,l.Ym)(i,s)&&(n[o++]=s[0],n[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,i,s,o,r){const a=this.coordinates;let h=a.length;const c=this.getBufferedMaxExtent();r&&(e+=s);let d=t[e],u=t[e+1];const f=this.tmpCoordinate_;let g,_,x,p=!0;for(g=e+s;g<i;g+=s)f[0]=t[g],f[1]=t[g+1],x=(0,l.vz)(c,f),x!==_?(p&&(a[h++]=d,a[h++]=u,p=!1),a[h++]=f[0],a[h++]=f[1]):x===n.A.INTERSECTING?(a[h++]=f[0],a[h++]=f[1],p=!1):p=!0,d=f[0],u=f[1],_=x;return(o&&p||g===e+s)&&(a[h++]=d,a[h++]=u),h}drawCustomCoordinates_(t,e,i,s,n){for(let o=0,r=i.length;o<r;++o){const r=i[o],l=this.appendFlatLineCoordinates(t,e,r,s,!1,!1);n.push(l),e=r}return e}drawCustom(t,e,i,n,o){this.beginGeometry(t,e,o);const r=t.getType(),l=t.getStride(),a=this.coordinates.length;let h,d,u,f,g;switch(r){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),f=[];const e=t.getEndss();g=0;for(let t=0,i=e.length;t<i;++t){const i=[];g=this.drawCustomCoordinates_(h,g,e[t],l,i),f.push(i)}this.instructions.push([s.Ay.CUSTOM,a,f,t,i,c.Dz,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,f,t,n||i,c.Dz,o]);break;case"Polygon":case"MultiLineString":u=[],h="Polygon"==r?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),g=this.drawCustomCoordinates_(h,0,t.getEnds(),l,u),this.instructions.push([s.Ay.CUSTOM,a,u,t,i,c.cD,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,u,t,n||i,c.cD,o]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),d=this.appendFlatLineCoordinates(h,0,h.length,l,!1,!1),this.instructions.push([s.Ay.CUSTOM,a,d,t,i,c.n2,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,d,t,n||i,c.n2,o]);break;case"MultiPoint":h=t.getFlatCoordinates(),d=this.appendFlatPointCoordinates(h,l),d>a&&(this.instructions.push([s.Ay.CUSTOM,a,d,t,i,c.n2,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,d,t,n||i,c.n2,o]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),d=this.coordinates.length,this.instructions.push([s.Ay.CUSTOM,a,d,t,i,void 0,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,d,t,n||i,void 0,o]);break;default:}this.endGeometry(e)}beginGeometry(t,e,i){this.beginGeometryInstruction1_=[s.Ay.BEGIN_GEOMETRY,e,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[s.Ay.BEGIN_GEOMETRY,e,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let n,o,r=-1;for(e=0;e<i;++e)n=t[e],o=n[0],o==s.Ay.END_GEOMETRY?r=e:o==s.Ay.BEGIN_GEOMETRY&&(n[2]=e,(0,h.gI)(this.hitDetectionInstructions,r,e),r=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillPatternScale=e&&"object"===typeof e&&"src"in e?this.pixelRatio:1,i.fillStyle=(0,r.F)(e||a.qY)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=(0,r.F)(t||a.NT);const s=e.getLineCap();i.lineCap=void 0!==s?s:a._m;const n=e.getLineDash();i.lineDash=n?n.slice():a.Oq;const o=e.getLineDashOffset();i.lineDashOffset=o||a.vk;const l=e.getLineJoin();i.lineJoin=void 0!==l?l:a._K;const h=e.getWidth();i.lineWidth=void 0!==h?h:a.aq;const c=e.getMiterLimit();i.miterLimit=void 0!==c?c:a.eL,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[s.Ay.SET_FILL_STYLE,e];return"string"!==typeof e&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[s.Ay.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"===typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,n=t.lineDash,o=t.lineDashOffset,r=t.lineJoin,l=t.lineWidth,a=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||n!=t.currentLineDash&&!(0,h.aI)(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=r||t.currentLineWidth!=l||t.currentMiterLimit!=a)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=r,t.currentLineWidth=l,t.currentMiterLimit=a)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[s.Ay.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,l.o8)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,l.r)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const u=d},32627:(t,e,i)=>{i.d(e,{LW:()=>o,bA:()=>n,qS:()=>s});i(66570);const s=.985;function n(t,e){e=e||[];const i=256,s=i-1;return e[0]=Math.floor(t/i/i/i)/s,e[1]=Math.floor(t/i/i)%i/s,e[2]=Math.floor(t/i)%i/s,e[3]=t%i/s,e}function o(t){let e=0;const i=256,s=i-1;return e+=Math.round(t[0]*i*i*i*s),e+=Math.round(t[1]*i*i*s),e+=Math.round(t[2]*i*s),e+=Math.round(t[3]*s),e}},38774:(t,e,i)=>{i.d(e,{Jw:()=>R,M8:()=>p,MY:()=>x,NT:()=>_,Oq:()=>d,TA:()=>A,Tq:()=>m,ZV:()=>a,_K:()=>f,_m:()=>c,aq:()=>S,eL:()=>g,fZ:()=>E,jT:()=>b,qY:()=>h,vk:()=>u,yY:()=>y});var s=i(34120),n=i(7771),o=i(43530),r=i(68711),l=i(25176);const a="10px sans-serif",h="#000",c="round",d=[],u=0,f="round",g=10,_="#000",x="center",p="middle",m=[0,0,0,0],S=1,y=new s.A;let k,T=null;const w={},E=function(){const t=100,e="32px ",i=["monospace","serif"],s=i.length,n="wmytzilWMYTZIL@#/&?$%10";let r,a;function h(t,o,r){let l=!0;for(let h=0;h<s;++h){const s=i[h];if(a=C(t+" "+o+" "+e+s,n),r!=s){const i=C(t+" "+o+" "+e+r+","+s,n);l=l&&i!=a}}return!!l}function c(){let e=!0;const i=y.getKeys();for(let s=0,n=i.length;s<n;++s){const n=i[s];y.get(n)<t&&(h.apply(this,n.split("\n"))?((0,o.I)(w),T=null,k=void 0,y.set(n,t)):(y.set(n,y.get(n)+1,!0),e=!1))}e&&(clearInterval(r),r=void 0)}return function(e){const i=(0,l.K5)(e);if(!i)return;const s=i.families;for(let n=0,o=s.length;n<o;++n){const e=s[n],o=i.style+"\n"+i.weight+"\n"+e;void 0===y.get(o)&&(y.set(o,t,!0),h(i.style,i.weight,e)||(y.set(o,0,!0),void 0===r&&(r=setInterval(c,32))))}}}(),I=function(){let t;return function(e){let i=w[e];if(void 0==i){if(n.Wl){const t=(0,l.K5)(e),s=v(e,"Žg"),n=isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight);i=n*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);w[e]=i}return i}}();function v(t,e){return T||(T=(0,r.Y)(1,1)),t!=k&&(T.font=t,k=T.font),T.measureText(e)}function C(t,e){return v(t,e).width}function A(t,e,i){if(e in i)return i[e];const s=e.split("\n").reduce((e,i)=>Math.max(e,C(t,i)),0);return i[e]=s,s}function b(t,e){const i=[],s=[],n=[];let o=0,r=0,l=0,a=0;for(let h=0,c=e.length;h<=c;h+=2){const d=e[h];if("\n"===d||h===c){o=Math.max(o,r),n.push(r),r=0,l+=a,a=0;continue}const u=e[h+1]||t.font,f=C(u,d);i.push(f),r+=f;const g=I(u);s.push(g),a=Math.max(a,g)}return{width:o,height:l,widths:i,heights:s,lineWidths:n}}function R(t,e,i,s,n,o,r,l,a,h,c){t.save(),1!==i&&(void 0===t.globalAlpha?t.globalAlpha=t=>t.globalAlpha*=i:t.globalAlpha*=i),e&&t.transform.apply(t,e),s.contextInstructions?(t.translate(a,h),t.scale(c[0],c[1]),L(s,t)):c[0]<0||c[1]<0?(t.translate(a,h),t.scale(c[0],c[1]),t.drawImage(s,n,o,r,l,0,0,r,l)):t.drawImage(s,n,o,r,l,a,h,r*c[0],l*c[1]),t.restore()}function L(t,e){const i=t.contextInstructions;for(let s=0,n=i.length;s<n;s+=2)Array.isArray(i[s+1])?e[i[s]].apply(e,i[s+1]):e[i[s]]=i[s+1]}},40808:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(68711);class n{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,s.lr)(),{get:(t,e)=>{if("function"===typeof(0,s.lr)()[e])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,i),!0)})}pushMethodArgs_=(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this);pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let i=0,s=e.length;i<s;++i){const s=e[i];if("function"===typeof s){s(t);continue}const n=e[++i];if("function"===typeof t[s])t[s](...n);else{if("function"===typeof n){t[s]=n(t);continue}t[s]=n}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const o=n},55799:(t,e,i)=>{i.d(e,{A:()=>f,E:()=>d});var s=i(8130),n=i(66429),o=i(77295),r=i(38774),l=i(4087),a=i(70915),h=i(68297),c=i(87745);const d={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class u extends s.A{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[r.qY]={fillStyle:r.qY},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const s=this.textFillState_,o=this.textStrokeState_,l=this.textState_;if(""===this.text_||!l||!s&&!o)return;const d=this.coordinates;let u=d.length;const f=t.getType();let g=null,_=t.getStride();if("line"!==l.placement||"LineString"!=f&&"MultiLineString"!=f&&"Polygon"!=f&&"MultiPolygon"!=f){let s=l.overflow?null:[];switch(f){case"Point":case"MultiPoint":g=t.getFlatCoordinates();break;case"LineString":g=t.getFlatMidpoint();break;case"Circle":g=t.getCenter();break;case"MultiLineString":g=t.getFlatMidpoints(),_=2;break;case"Polygon":g=t.getFlatInteriorPoint(),l.overflow||s.push(g[2]/this.resolution),_=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();g=[];for(let t=0,i=e.length;t<i;t+=3)l.overflow||s.push(e[t+2]/this.resolution),g.push(e[t],e[t+1]);if(0===g.length)return;_=2;break;default:}const o=this.appendFlatPointCoordinates(g,_);if(o===u)return;if(s&&(o-u)/2!==g.length/_){let t=u/2;s=s.filter((e,i)=>{const s=d[2*(t+i)]===g[i*_]&&d[2*(t+i)+1]===g[i*_+1];return s||--t,s})}this.saveTextStates_(),(l.backgroundFill||l.backgroundStroke)&&(this.setFillStrokeStyle(l.backgroundFill,l.backgroundStroke),l.backgroundFill&&this.updateFillStyle(this.state,this.createFill),l.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,i);let a=l.padding;if(a!=r.Tq&&(l.scale[0]<0||l.scale[1]<0)){let t=l.padding[0],e=l.padding[1],i=l.padding[2],s=l.padding[3];l.scale[0]<0&&(e=-e,s=-s),l.scale[1]<0&&(t=-t,i=-i),a=[t,e,i,s]}const h=this.pixelRatio;this.instructions.push([n.Ay.DRAW_IMAGE,u,o,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,a==r.Tq?r.Tq:a.map(function(t){return t*h}),!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,s]);const c=1/h,x=this.state.fillStyle;l.backgroundFill&&(this.state.fillStyle=r.qY,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([n.Ay.DRAW_IMAGE,u,o,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[c,c],NaN,this.declutterMode_,this.declutterImageWithText_,a,!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?r.qY:this.fillKey_,this.textOffsetX_,this.textOffsetY_,s]),l.backgroundFill&&(this.state.fillStyle=x,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!(0,a.HY)(this.maxExtent,t.getExtent()))return;let s;if(g=t.getFlatCoordinates(),"LineString"==f)s=[g.length];else if("MultiLineString"==f)s=t.getEnds();else if("Polygon"==f)s=t.getEnds().slice(0,1);else if("MultiPolygon"==f){const e=t.getEndss();s=[];for(let t=0,i=e.length;t<i;++t)s.push(e[t][0])}this.beginGeometry(t,e,i);const n=l.repeat,o=n?void 0:l.textAlign;let r=0;for(let t=0,e=s.length;t<e;++t){let e;e=n?(0,h.W)(n*this.resolution,g,r,s[t],_):[g.slice(r,s[t])];for(let i=0,n=e.length;i<n;++i){const n=e[i];let a=0,h=n.length;if(void 0==o){const t=(0,c.z)(l.maxAngle,n,0,n.length,2);a=t[0],h=t[1]}for(let t=a;t<h;t+=_)d.push(n[t],n[t+1]);const f=d.length;r=s[t],this.drawChars_(u,f),u=f}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||r.MY,justify:e.justify,textBaseline:e.textBaseline||r.M8,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,l=this.textKey_,a=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,c=d[s.textBaseline],u=this.textOffsetY_*h,f=this.text_,g=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([n.Ay.DRAW_CHARS,t,e,c,s.overflow,a,s.maxAngle,h,u,o,g*h,f,l,1,this.declutterMode_]),this.hitDetectionInstructions.push([n.Ay.DRAW_CHARS,t,e,c,s.overflow,a?r.qY:a,s.maxAngle,h,u,o,g*h,f,l,1/h,this.declutterMode_])}setTextStyle(t,e){let i,s,n;if(t){const e=t.getFill();e?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=(0,o.F)(e.getColor()||r.qY)):(s=null,this.textFillState_=s);const a=t.getStroke();if(a){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);const t=a.getLineDash(),e=a.getLineDashOffset(),i=a.getWidth(),s=a.getMiterLimit();n.lineCap=a.getLineCap()||r._m,n.lineDash=t?t.slice():r.Oq,n.lineDashOffset=void 0===e?r.vk:e,n.lineJoin=a.getLineJoin()||r._K,n.lineWidth=void 0===i?r.aq:i,n.miterLimit=void 0===s?r.eL:s,n.strokeStyle=(0,o.F)(a.getColor()||r.NT)}else n=null,this.textStrokeState_=n;i=this.textState_;const h=t.getFont()||r.ZV;(0,r.fZ)(h);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=h,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||r.M8,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||r.Tq,i.scale=void 0===c?[1,1]:c;const d=t.getOffsetX(),u=t.getOffsetY(),f=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0===g?0:g,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,l.v6)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?"string"==typeof s.fillStyle?s.fillStyle:"|"+(0,l.v6)(s.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const f=u},56772:(t,e,i)=>{i.d(e,{A:()=>w});var s=i(16323),n=i(90025),o=i(74238),r=i(4087),l=i(9703),a=i(70915),h=i(82241),c=i(60764),d=i(6933);class u extends n.A{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){(0,r.b0)()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;(0,l.Zz)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,l.T9)(s,i)}forEachFeatureAtCoordinate(t,e,i,s,n,o,r,l){let h;const u=e.viewState;function f(t,e,i,s){return n.call(o,e,t?i:null,s)}const g=u.projection,_=(0,d.Li)(t.slice(),g),x=[[0,0]];if(g.canWrapX()&&s){const t=g.getExtent(),e=(0,a.RG)(t);x.push([-e,0],[e,0])}const p=e.layerStatesArray,m=p.length,S=[],y=[];for(let a=0;a<x.length;a++)for(let s=m-1;s>=0;--s){const n=p[s],o=n.layer;if(o.hasRenderer()&&(0,c.l)(n,u)&&r.call(l,o)){const s=o.getRenderer(),r=o.getSource();if(s&&r){const o=r.getWrapX()?_:t,l=f.bind(null,n.managed);y[0]=o[0]+x[a][0],y[1]=o[1]+x[a][1],h=s.forEachFeatureAtCoordinate(y,e,i,l,S)}if(h)return h}}if(0===S.length)return;const k=1/S.length;return S.forEach((t,e)=>t.distanceSq+=e*k),S.sort((t,e)=>t.distanceSq-e.distanceSq),S.some(t=>h=t.callback(t.feature,t.layer,t.geometry)),h}hasFeatureAtCoordinate(t,e,i,s,n,r){const l=this.forEachFeatureAtCoordinate(t,e,i,s,o.rT,this,n,r);return void 0!==l}getMap(){return this.map_}renderFrame(t){(0,r.b0)()}scheduleExpireIconCache(t){h.ue.canExpireCache()&&t.postRenderFunctions.push(f)}}function f(t,e){h.ue.expire()}const g=u;var _=i(28450),x=i(9960),p=i(83984),m=i(25176),S=i(38774),y=i(9438),k=i(68711);class T extends g{constructor(t){super(t),this.fontChangeListenerKey_=(0,y.KT)(S.yY,_.A.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=m.XI+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const s=new x.A(t,void 0,e);i.dispatchEvent(s)}}disposeInternal(){(0,y.JH)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(p.A.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(t,e){return t.zIndex-e.zIndex}),i=e.some(t=>t.layer instanceof s.A&&t.layer.getDeclutter());i&&(t.declutter={});const n=t.viewState;this.children_.length=0;const o=[];let r=null;for(let s=0,l=e.length;s<l;++s){const i=e[s];t.layerIndex=s;const l=i.layer,a=l.getSourceState();if(!(0,c.l)(i,n)||"ready"!=a&&"undefined"!=a){l.unrender();continue}const h=l.render(t,r);h&&(h!==r&&(this.children_.push(h),r=h),o.push(i))}this.declutter(t,o),(0,k.WM)(this.element_,this.children_),this.dispatchRenderEvent(p.A.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let i=e.length-1;i>=0;--i){const s=e[i],n=s.layer;n.getDeclutter()&&n.renderDeclutter(t,s)}e.forEach(e=>e.layer.renderDeferred(t))}}}const w=T},57849:(t,e,i)=>{i.d(e,{tF:()=>p,_7:()=>m,F8:()=>S});var s=i(32826),n=i(77295),o=i(9703),r=i(38774),l=i(66514),a=i(70915),h=i(61597),c=i(87622),d=i(62096);class u extends s.A{constructor(t,e,i,s,n,r,l){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?(0,h.Mg)(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=n,this.squaredTolerance_=r,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,o.vt)()}drawImages_(t,e,i,s){if(!this.image_)return;const n=(0,c.Rc)(t,e,i,s,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=a*this.imageOpacity_);let h=this.imageRotation_;0===this.transformRotation_&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,d=n.length;c<d;c+=2){const t=n[c]-this.imageAnchorX_,e=n[c+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const i=t+this.imageAnchorX_,s=e+this.imageAnchorY_;(0,o.Zz)(l,i,s,1,1,h,-i,-s),r.save(),r.transform.apply(r,l),r.translate(i,s),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=a)}drawText_(t,e,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const n=(0,c.Rc)(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let r=this.textRotation_;for(0===this.transformRotation_&&(r-=this.viewRotation_),this.textRotateWithView_&&(r+=this.viewRotation_);e<i;e+=s){const t=n[e]+this.textOffsetX_,i=n[e+1]+this.textOffsetY_;0!==r||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(t-this.textOffsetX_,i-this.textOffsetY_),o.rotate(r),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,t,i),this.textFillState_&&o.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,s,n){const o=this.context_,r=(0,c.Rc)(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(r[0],r[1]);let l=r.length;n&&(l-=2);for(let a=2;a<l;a+=2)o.lineTo(r[a],r[a+1]);return n&&o.closePath(),i}drawRings_(t,e,i,s){for(let n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,a.HY)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,d.v7)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],n=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){const e=t.getType();switch(e){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,a.HY)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,a.HY)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let s=0;const n=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,r=n.length;t<r;++t)s=this.moveToLineTo_(i,s,n[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,a.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,a.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const n=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,r=n.length;t<r;++t){const e=n[t];s=this.drawRings_(i,s,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,l.aI)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:r.MY;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:(0,n.F)(e||r.qY)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),s=e.getLineDash(),o=e.getLineDashOffset(),l=e.getLineJoin(),a=e.getWidth(),h=e.getMiterLimit(),c=s||r.Oq;this.strokeState_={lineCap:void 0!==i?i:r._m,lineDash:1===this.pixelRatio_?c:c.map(t=>t*this.pixelRatio_),lineDashOffset:(o||r.vk)*this.pixelRatio_,lineJoin:void 0!==l?l:r._K,lineWidth:(void 0!==a?a:r.aq)*this.pixelRatio_,miterLimit:void 0!==h?h:r.eL,strokeStyle:(0,n.F)(t||r.NT)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:(0,n.F)(t||r.qY)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),s=i.getLineDash(),o=i.getLineDashOffset(),l=i.getLineJoin(),a=i.getWidth(),h=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:r._m,lineDash:s||r.Oq,lineDashOffset:o||r.vk,lineJoin:void 0!==l?l:r._K,lineWidth:void 0!==a?a:r.aq,miterLimit:void 0!==h?h:r.eL,strokeStyle:(0,n.F)(t||r.NT)}}else this.textStrokeState_=null;const s=t.getFont(),o=t.getOffsetX(),l=t.getOffsetY(),a=t.getRotateWithView(),h=t.getRotation(),c=t.getScaleArray(),d=t.getText(),u=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:void 0!==s?s:r.ZV,textAlign:void 0!==u?u:r.MY,textBaseline:void 0!==f?f:r.M8},this.text_=void 0!==d?Array.isArray(d)?d.reduce((t,e,i)=>t+(i%2?" ":e),""):d:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==l?this.pixelRatio_*l:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==h?h:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}}const f=u;var g=i(49700),_=i(68711),x=i(89718);const p=.5;function m(t,e,i,s,n,o,r,h,c){const d=c?(0,x.toUserExtent)(n,c):n,u=t[0]*p,m=t[1]*p,S=(0,_.Y)(u,m);S.imageSmoothingEnabled=!1;const y=S.canvas,k=new f(S,p,n,null,r,h,c?(0,x.getTransformFromProjections)((0,x.getUserProjection)(),c):null),T=i.length,w=Math.floor(16777215/T),E={};for(let l=1;l<=T;++l){const t=i[l-1],e=t.getStyleFunction()||s;if(!e)continue;let n=e(t,o);if(!n)continue;Array.isArray(n)||(n=[n]);const r=l*w,h=r.toString(16).padStart(7,"#00000");for(let i=0,s=n.length;i<s;++i){const e=n[i],s=e.getGeometryFunction()(t);if(!s||!(0,a.HY)(d,s.getExtent()))continue;const o=e.clone(),r=o.getFill();r&&r.setColor(h);const l=o.getStroke();l&&(l.setColor(h),l.setLineDash(null)),o.setText(void 0);const c=e.getImage();if(c){const t=c.getImageSize();if(!t)continue;const e=(0,_.Y)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=h,e.fillRect(0,0,i.width,i.height),o.setImage(new g["default"]({img:i,anchor:c.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:c.getOrigin(),opacity:1,size:c.getSize(),scale:c.getScale(),rotation:c.getRotation(),rotateWithView:c.getRotateWithView()}))}const u=o.getZIndex()||0;let f=E[u];f||(f={},E[u]=f,f["Polygon"]=[],f["Circle"]=[],f["LineString"]=[],f["Point"]=[]);const x=s.getType();if("GeometryCollection"===x){const t=s.getGeometriesArrayRecursive();for(let e=0,i=t.length;e<i;++e){const i=t[e];f[i.getType().replace("Multi","")].push(i,o)}}else f[x.replace("Multi","")].push(s,o)}}const I=Object.keys(E).map(Number).sort(l.V_);for(let l=0,a=I.length;l<a;++l){const t=E[I[l]];for(const i in t){const s=t[i];for(let t=0,i=s.length;t<i;t+=2){k.setStyle(s[t+1]);for(let i=0,n=e.length;i<n;++i)k.setTransform(e[i]),k.drawGeometry(s[t])}}}return S.getImageData(0,0,y.width,y.height)}function S(t,e,i){const s=[];if(i){const n=Math.floor(Math.round(t[0])*p),o=Math.floor(Math.round(t[1])*p),r=4*((0,h.qE)(n,0,i.width-1)+(0,h.qE)(o,0,i.height-1)*i.width),l=i.data[r],a=i.data[r+1],c=i.data[r+2],d=c+256*(a+256*l),u=Math.floor(16777215/e.length);d&&d%u===0&&s.push(e[d/u-1])}return s}},66429:(t,e,i)=>{i.d(e,{Ay:()=>a,I5:()=>n,VD:()=>o,kx:()=>l,th:()=>r});const s={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},n=[s.FILL],o=[s.STROKE],r=[s.BEGIN_PATH],l=[s.CLOSE_PATH],a=s},70587:(t,e,i)=>{i.d(e,{A:()=>p});var s=i(8130),n=i(66429),o=i(70915);class r extends s.A{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!(0,o.Ym)(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const s=t.getFlatCoordinates(),r=t.getStride(),l=this.coordinates.length,a=this.appendFlatPointCoordinates(s,r);this.instructions.push([n.Ay.DRAW_IMAGE,l,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([n.Ay.DRAW_IMAGE,l,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const s=t.getFlatCoordinates(),r=[];for(let n=0,h=s.length;n<h;n+=t.getStride())this.maxExtent&&!(0,o.Ym)(this.maxExtent,s.slice(n,n+2))||r.push(s[n],s[n+1]);const l=this.coordinates.length,a=this.appendFlatPointCoordinates(r,2);this.instructions.push([n.Ay.DRAW_IMAGE,l,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([n.Ay.DRAW_IMAGE,l,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),n=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const l=r;var a=i(38774);class h extends s.A{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const o=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),l=[n.Ay.MOVE_TO_LINE_TO,o,r];return this.instructions.push(l),this.hitDetectionInstructions.push(l),i}drawLineString(t,e,i){const s=this.state,o=s.strokeStyle,r=s.lineWidth;if(void 0===o||void 0===r)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,a.Oq,a.vk],n.th);const l=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(l,0,l.length,h),this.hitDetectionInstructions.push(n.VD),this.endGeometry(e)}drawMultiLineString(t,e,i){const s=this.state,o=s.strokeStyle,r=s.lineWidth;if(void 0===o||void 0===r)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,a.Oq,a.vk],n.th);const l=t.getEnds(),h=t.getFlatCoordinates(),c=t.getStride();let d=0;for(let n=0,a=l.length;n<a;++n)d=this.drawFlatCoordinates_(h,d,l[n],c);this.hitDetectionInstructions.push(n.VD),this.endGeometry(e)}finish(){const t=this.state;return void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(n.VD),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(n.VD),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(n.th)}}const c=h;var d=i(83671);class u extends s.A{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const o=this.state,r=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,a=i.length;this.instructions.push(n.th),this.hitDetectionInstructions.push(n.th);for(let h=0;h<a;++h){const o=i[h],r=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,o,s,!0,!l),c=[n.Ay.MOVE_TO_LINE_TO,r,a];this.instructions.push(c),this.hitDetectionInstructions.push(c),l&&(this.instructions.push(n.kx),this.hitDetectionInstructions.push(n.kx)),e=o}return r&&(this.instructions.push(n.I5),this.hitDetectionInstructions.push(n.I5)),l&&(this.instructions.push(n.VD),this.hitDetectionInstructions.push(n.VD)),e}drawCircle(t,e,i){const s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([n.Ay.SET_FILL_STYLE,a.qY]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,a.Oq,a.vk]);const l=t.getFlatCoordinates(),h=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,h,!1,!1);const d=[n.Ay.CIRCLE,c];this.instructions.push(n.th,d),this.hitDetectionInstructions.push(n.th,d),void 0!==s.fillStyle&&(this.instructions.push(n.I5),this.hitDetectionInstructions.push(n.I5)),void 0!==s.strokeStyle&&(this.instructions.push(n.VD),this.hitDetectionInstructions.push(n.VD)),this.endGeometry(e)}drawPolygon(t,e,i){const s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([n.Ay.SET_FILL_STYLE,a.qY]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,a.Oq,a.vk]);const l=t.getEnds(),h=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(h,0,l,c),this.endGeometry(e)}drawMultiPolygon(t,e,i){const s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([n.Ay.SET_FILL_STYLE,a.qY]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,a.Oq,a.vk]);const l=t.getEndss(),h=t.getOrientedFlatCoordinates(),c=t.getStride();let d=0;for(let n=0,a=l.length;n<a;++n)d=this.drawFlatCoordinatess_(h,d,l[n],c);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=(0,d.n$)(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state,e=t.fillStyle;void 0!==e&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}const f=u;var g=i(55799);const _={Circle:f,Default:s.A,Image:l,LineString:c,Polygon:f,Text:g.A};class x{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const n=i[s].finish();t[e][s]=n}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let s=this.buildersByZIndex_[i];void 0===s&&(s={},this.buildersByZIndex_[i]=s);let n=s[e];if(void 0===n){const t=_[e];n=new t(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=n}return n}}const p=x},77048:(t,e,i)=>{i.d(e,{i7:()=>_,u7:()=>x});var s=i(27733),n=i(13628),o=i(49700),r=i(86936),l=i(953),a=i(29276),h=i(81426),c=i(49825),d=i(409),u=i(43530),f=i(6782);function g(t){return!0}function _(t){const e=(0,c.SR)(),i=p(t,e),s=(0,d.A)();return function(t,n){if(s.properties=t.getPropertiesInternal(),s.resolution=n,e.featureId){const e=t.getId();s.featureId=void 0!==e?e:null}return e.geometryType&&(s.geometryType=(0,c.Ye)(t.getGeometry())),i(s)}}function x(t){const e=(0,c.SR)(),i=t.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=m(t[r],e);const n=(0,d.A)(),o=new Array(i);return function(t,r){if(n.properties=t.getPropertiesInternal(),n.resolution=r,e.featureId){const e=t.getId();n.featureId=void 0!==e?e:null}let l=0;for(let e=0;e<i;++e){const t=s[e](n);t&&(o[l]=t,l+=1)}return o.length=l,o}}function p(t,e){const i=t.length,s=new Array(i);for(let n=0;n<i;++n){const i=t[n],o="filter"in i?(0,d.n)(i.filter,c.T8,e):g;let r;if(Array.isArray(i.style)){const t=i.style.length;r=new Array(t);for(let s=0;s<t;++s)r[s]=m(i.style[s],e)}else r=[m(i.style,e)];s[n]={filter:o,styles:r}}return function(e){const n=[];let o=!1;for(let r=0;r<i;++r){const i=s[r].filter;if(i(e)&&(!t[r].else||!o)){o=!0;for(const t of s[r].styles){const i=t(e);i&&n.push(i)}}}return n}}function m(t,e){const i=S(t,"",e),s=y(t,"",e),n=k(t,e),o=T(t,e),r=v(t,"z-index",e);if(!i&&!s&&!n&&!o&&!(0,u.p)(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const l=new a["default"];return function(t){let e=!0;if(i){const s=i(t);s&&(e=!1),l.setFill(s)}if(s){const i=s(t);i&&(e=!1),l.setStroke(i)}if(n){const i=n(t);i&&(e=!1),l.setText(i)}if(o){const i=o(t);i&&(e=!1),l.setImage(i)}return r&&l.setZIndex(r(t)),e?null:l}}function S(t,e,i){let s;if(s=e+"fill-pattern-src"in t?A(t,e+"fill-",i):R(t,e+"fill-color",i),!s)return null;const o=new n.A;return function(t){const e=s(t);return"none"===e?null:(o.setColor(e),o)}}function y(t,e,i){const s=v(t,e+"stroke-width",i),n=R(t,e+"stroke-color",i);if(!s&&!n)return null;const o=C(t,e+"stroke-line-cap",i),r=C(t,e+"stroke-line-join",i),a=L(t,e+"stroke-line-dash",i),h=v(t,e+"stroke-line-dash-offset",i),c=v(t,e+"stroke-miter-limit",i),d=new l.A;return function(t){if(n){const e=n(t);if("none"===e)return null;d.setColor(e)}if(s&&d.setWidth(s(t)),o){const e=o(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap");d.setLineCap(e)}if(r){const e=r(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join");d.setLineJoin(e)}return a&&d.setLineDash(a(t)),h&&d.setLineDashOffset(h(t)),c&&d.setMiterLimit(c(t)),d}}function k(t,e){const i="text-",s=C(t,i+"value",e);if(!s)return null;const n=S(t,i,e),o=S(t,i+"background-",e),r=y(t,i,e),l=y(t,i+"background-",e),a=C(t,i+"font",e),c=v(t,i+"max-angle",e),d=v(t,i+"offset-x",e),u=v(t,i+"offset-y",e),f=b(t,i+"overflow",e),g=C(t,i+"placement",e),_=v(t,i+"repeat",e),x=M(t,i+"scale",e),p=b(t,i+"rotate-with-view",e),m=v(t,i+"rotation",e),k=C(t,i+"align",e),T=C(t,i+"justify",e),w=C(t,i+"baseline",e),E=L(t,i+"padding",e),I=N(t,i+"declutter-mode"),A=new h.A({declutterMode:I});return function(t){if(A.setText(s(t)),n&&A.setFill(n(t)),o&&A.setBackgroundFill(o(t)),r&&A.setStroke(r(t)),l&&A.setBackgroundStroke(l(t)),a&&A.setFont(a(t)),c&&A.setMaxAngle(c(t)),d&&A.setOffsetX(d(t)),u&&A.setOffsetY(u(t)),f&&A.setOverflow(f(t)),g){const e=g(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");A.setPlacement(e)}if(_&&A.setRepeat(_(t)),x&&A.setScale(x(t)),p&&A.setRotateWithView(p(t)),m&&A.setRotation(m(t)),k){const e=k(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align");A.setTextAlign(e)}if(T){const e=T(t);if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify");A.setJustify(e)}if(w){const e=w(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");A.setTextBaseline(e)}return E&&A.setPadding(E(t)),A}}function T(t,e){return"icon-src"in t?w(t,e):"shape-points"in t?E(t,e):"circle-radius"in t?I(t,e):null}function w(t,e){const i="icon-",s=i+"src",n=X(t[s],s),r=D(t,i+"anchor",e),l=M(t,i+"scale",e),a=v(t,i+"opacity",e),h=D(t,i+"displacement",e),c=v(t,i+"rotation",e),d=b(t,i+"rotate-with-view",e),u=P(t,i+"anchor-origin"),f=G(t,i+"anchor-x-units"),g=G(t,i+"anchor-y-units"),_=q(t,i+"color"),x=Y(t,i+"cross-origin"),p=B(t,i+"offset"),m=P(t,i+"offset-origin"),S=F(t,i+"width"),y=F(t,i+"height"),k=W(t,i+"size"),T=N(t,i+"declutter-mode"),w=new o["default"]({src:n,anchorOrigin:u,anchorXUnits:f,anchorYUnits:g,color:_,crossOrigin:x,offset:p,offsetOrigin:m,height:y,width:S,size:k,declutterMode:T});return function(t){return a&&w.setOpacity(a(t)),h&&w.setDisplacement(h(t)),c&&w.setRotation(c(t)),d&&w.setRotateWithView(d(t)),l&&w.setScale(l(t)),r&&w.setAnchor(r(t)),w}}function E(t,e){const i="shape-",s=i+"points",n=i+"radius",o=H(t[s],s),l=H(t[n],n),a=S(t,i,e),h=y(t,i,e),c=M(t,i+"scale",e),d=D(t,i+"displacement",e),u=v(t,i+"rotation",e),f=b(t,i+"rotate-with-view",e),g=F(t,i+"radius2"),_=F(t,i+"angle"),x=N(t,i+"declutter-mode"),p=new r.A({points:o,radius:l,radius2:g,angle:_,declutterMode:x});return function(t){return a&&p.setFill(a(t)),h&&p.setStroke(h(t)),d&&p.setDisplacement(d(t)),u&&p.setRotation(u(t)),f&&p.setRotateWithView(f(t)),c&&p.setScale(c(t)),p}}function I(t,e){const i="circle-",n=S(t,i,e),o=y(t,i,e),r=v(t,i+"radius",e),l=M(t,i+"scale",e),a=D(t,i+"displacement",e),h=v(t,i+"rotation",e),c=b(t,i+"rotate-with-view",e),d=N(t,i+"declutter-mode"),u=new s.A({radius:5,declutterMode:d});return function(t){return r&&u.setRadius(r(t)),n&&u.setFill(n(t)),o&&u.setStroke(o(t)),a&&u.setDisplacement(a(t)),h&&u.setRotation(h(t)),c&&u.setRotateWithView(c(t)),l&&u.setScale(l(t)),u}}function v(t,e,i){if(!(e in t))return;const s=(0,d.n)(t[e],c.wl,i);return function(t){return H(s(t),e)}}function C(t,e,i){if(!(e in t))return null;const s=(0,d.n)(t[e],c.cT,i);return function(t){return X(s(t),e)}}function A(t,e,i){const s=C(t,e+"pattern-src",i),n=O(t,e+"pattern-offset",i),o=O(t,e+"pattern-size",i),r=R(t,e+"color",i);return function(t){return{src:s(t),offset:n&&n(t),size:o&&o(t),color:r&&r(t)}}}function b(t,e,i){if(!(e in t))return null;const s=(0,d.n)(t[e],c.T8,i);return function(t){const i=s(t);if("boolean"!==typeof i)throw new Error(`Expected a boolean for ${e}`);return i}}function R(t,e,i){if(!(e in t))return null;const s=(0,d.n)(t[e],c.mE|c.cT,i);return function(t){return z(s(t),e)}}function L(t,e,i){if(!(e in t))return null;const s=(0,d.n)(t[e],c.Fq,i);return function(t){return V(s(t),e)}}function D(t,e,i){if(!(e in t))return null;const s=(0,d.n)(t[e],c.Fq,i);return function(t){const i=V(s(t),e);if(2!==i.length)throw new Error(`Expected two numbers for ${e}`);return i}}function O(t,e,i){if(!(e in t))return null;const s=(0,d.n)(t[e],c.Fq,i);return function(t){return J(s(t),e)}}function M(t,e,i){if(!(e in t))return null;const s=(0,d.n)(t[e],c.Fq|c.wl,i);return function(t){return K(s(t),e)}}function F(t,e){const i=t[e];if(void 0!==i){if("number"!==typeof i)throw new Error(`Expected a number for ${e}`);return i}}function W(t,e){const i=t[e];if(void 0!==i){if("number"===typeof i)return(0,f.xq)(i);if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${e}`);if(2!==i.length||"number"!==typeof i[0]||"number"!==typeof i[1])throw new Error(`Expected a number or size array for ${e}`);return i}}function Y(t,e){const i=t[e];if(void 0!==i){if("string"!==typeof i)throw new Error(`Expected a string for ${e}`);return i}}function P(t,e){const i=t[e];if(void 0!==i){if("bottom-left"!==i&&"bottom-right"!==i&&"top-left"!==i&&"top-right"!==i)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return i}}function G(t,e){const i=t[e];if(void 0!==i){if("pixels"!==i&&"fraction"!==i)throw new Error(`Expected pixels or fraction for ${e}`);return i}}function B(t,e){const i=t[e];if(void 0!==i)return V(i,e)}function N(t,e){const i=t[e];if(void 0!==i){if("string"!==typeof i)throw new Error(`Expected a string for ${e}`);if("declutter"!==i&&"obstacle"!==i&&"none"!==i)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return i}}function q(t,e){const i=t[e];if(void 0!==i)return z(i,e)}function V(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const i=t.length;for(let s=0;s<i;++s)if("number"!==typeof t[s])throw new Error(`Expected an array of numbers for ${e}`);return t}function X(t,e){if("string"!==typeof t)throw new Error(`Expected a string for ${e}`);return t}function H(t,e){if("number"!==typeof t)throw new Error(`Expected a number for ${e}`);return t}function z(t,e){if("string"===typeof t)return t;const i=V(t,e),s=i.length;if(s<3||s>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return i}function J(t,e){const i=V(t,e);if(2!==i.length)throw new Error(`Expected an array of two numbers for ${e}`);return i}function K(t,e){return"number"===typeof t?t:J(t,e)}}}]);
//# sourceMappingURL=5640.be796ccf.js.map
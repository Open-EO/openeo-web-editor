"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[5072],{96113:(t,e,r)=>{r.d(e,{Z:()=>I});var i=r(4773),o=r(85487),n=r(94806),a=r(37195),s=r(28641),u=r(63432),h=r(33983),c=10,l=.25,d=function(){function t(t,e,r,i,o,n){this.sourceProj_=t,this.targetProj_=e;var a={},l=(0,u.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=l(t)),a[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&(0,s.dz)(i)==(0,s.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,s.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,s.dz)(this.targetProj_.getExtent()):null;var d=(0,s.rL)(r),_=(0,s.Xv)(r),f=(0,s.w$)(r),g=(0,s.hC)(r),v=this.transformInv_(d),p=this.transformInv_(_),m=this.transformInv_(f),T=this.transformInv_(g),E=c+(n?Math.max(0,Math.ceil((0,h.k3)((0,s.bg)(r)/(n*n*256*256)))):0);if(this.addQuad_(d,_,f,g,v,p,m,T,E),this.wrapsXInSource_){var M=1/0;this.triangles_.forEach((function(t,e,r){M=Math.min(M,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-M>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-M>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-M>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-M>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]),i=Math.max(e[0][0],e[1][0],e[2][0]);i-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,r,i,o,n){this.triangles_.push({source:[i,o,n],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,i,o,n,a,u,c){var d=(0,s.hI)([o,n,a,u]),_=this.sourceWorldWidth_?(0,s.dz)(d)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&_>.5&&_<1,v=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var p=(0,s.hI)([t,e,r,i]),m=(0,s.dz)(p)/this.targetWorldWidth_;v=m>l||v}!g&&this.sourceProj_.isGlobal()&&_&&(v=_>l||v)}if(!(!v&&this.maxSourceExtent_&&isFinite(d[0])&&isFinite(d[1])&&isFinite(d[2])&&isFinite(d[3]))||(0,s.kK)(d,this.maxSourceExtent_)){var T=0;if(!v&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(n[0])||!isFinite(n[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])))if(c>0)v=!0;else if(T=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(n[0])&&isFinite(n[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1),1!=T&&2!=T&&4!=T&&8!=T)return;if(c>0){if(!v){var E=[(t[0]+r[0])/2,(t[1]+r[1])/2],M=this.transformInv_(E),x=void 0;if(g){var W=((0,h.$W)(o[0],f)+(0,h.$W)(a[0],f))/2;x=W-(0,h.$W)(M[0],f)}else x=(o[0]+a[0])/2-M[0];var b=(o[1]+a[1])/2-M[1],Z=x*x+b*b;v=Z>this.errorThresholdSquared_}if(v){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var P=[(e[0]+r[0])/2,(e[1]+r[1])/2],I=this.transformInv_(P),y=[(i[0]+t[0])/2,(i[1]+t[1])/2],F=this.transformInv_(y);this.addQuad_(t,e,P,y,o,n,I,F,c-1),this.addQuad_(y,P,r,i,F,I,a,u,c-1)}else{var j=[(t[0]+e[0])/2,(t[1]+e[1])/2],w=this.transformInv_(j),S=[(r[0]+i[0])/2,(r[1]+i[1])/2],C=this.transformInv_(S);this.addQuad_(t,j,S,i,o,w,C,u,c-1),this.addQuad_(j,e,r,S,w,n,a,C,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&T)&&this.addTriangle_(t,r,i,o,a,u),0==(14&T)&&this.addTriangle_(t,r,e,o,a,n),T&&(0==(13&T)&&this.addTriangle_(e,i,t,n,u,o),0==(7&T)&&this.addTriangle_(e,i,r,n,u,a))}},t.prototype.calculateSourceExtent=function(){var t=(0,s.lJ)();return this.triangles_.forEach((function(e,r,i){var o=e.source;(0,s.Wj)(t,o[0]),(0,s.Wj)(t,o[1]),(0,s.Wj)(t,o[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();const _=d;var f,g=r(11481),v=r(69374),p=r(68326);function m(t,e,r,i,o){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(i,o),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(r,o)),t.restore()}function T(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function E(){if(void 0===f){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",m(t,4,5,4,0),m(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;f=T(e,0)||T(e,4)||T(e,8)}return f}function M(t,e,r,i){var o=(0,u.vs)(r,e,t),n=(0,u._Q)(e,i,r),a=e.getMetersPerUnit();void 0!==a&&(n*=a);var h=t.getMetersPerUnit();void 0!==h&&(n/=h);var c=t.getExtent();if(!c||(0,s.b8)(c,o)){var l=(0,u._Q)(t,n,o)/n;isFinite(l)&&l>0&&(n/=l)}return n}function x(t,e,r,i){var o=(0,s.qg)(r),n=M(t,e,o,i);return(!isFinite(n)||n<=0)&&(0,s.H6)(r,(function(r){return n=M(t,e,r,i),isFinite(n)&&n>0})),n}function W(t,e,r,i,o,n,a,u,c,l,d,_){var f=(0,p.E4)(Math.round(r*t),Math.round(r*e));if(_||(0,v.f0)(f,g.$),0===c.length)return f.canvas;function m(t){return Math.round(t*r)/r}f.scale(r,r),f.globalCompositeOperation="lighter";var T=(0,s.lJ)();c.forEach((function(t,e,r){(0,s.l7)(T,t.extent)}));var M=(0,s.dz)(T),x=(0,s.Cr)(T),W=(0,p.E4)(Math.round(r*M/i),Math.round(r*x/i));_||(0,v.f0)(W,g.$);var b=r/i;c.forEach((function(t,e,r){var i=t.extent[0]-T[0],o=-(t.extent[3]-T[3]),n=(0,s.dz)(t.extent),a=(0,s.Cr)(t.extent);t.image.width>0&&t.image.height>0&&W.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,i*b,o*b,n*b,a*b)}));var Z=(0,s.rL)(a);return u.getTriangles().forEach((function(t,e,o){var a=t.source,s=t.target,u=a[0][0],c=a[0][1],l=a[1][0],d=a[1][1],g=a[2][0],v=a[2][1],p=m((s[0][0]-Z[0])/n),M=m(-(s[0][1]-Z[1])/n),x=m((s[1][0]-Z[0])/n),b=m(-(s[1][1]-Z[1])/n),P=m((s[2][0]-Z[0])/n),I=m(-(s[2][1]-Z[1])/n),y=u,F=c;u=0,c=0,l-=y,d-=F,g-=y,v-=F;var j=[[l,d,0,0,x-p],[g,v,0,0,P-p],[0,0,l,d,b-M],[0,0,g,v,I-M]],w=(0,h.SV)(j);if(w){if(f.save(),f.beginPath(),E()||!_){f.moveTo(x,b);for(var S=4,C=p-x,L=M-b,G=0;G<S;G++)f.lineTo(x+m((G+1)*C/S),b+m(G*L/(S-1))),G!=S-1&&f.lineTo(x+m((G+1)*C/S),b+m((G+1)*L/(S-1)));f.lineTo(P,I)}else f.moveTo(x,b),f.lineTo(p,M),f.lineTo(P,I);f.clip(),f.transform(w[0],w[2],w[1],w[3],p,M),f.translate(T[0]-y,T[3]-F),f.scale(i/r,-i/r),f.drawImage(W.canvas,0,0),f.restore()}})),d&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,u.getTriangles().forEach((function(t,e,r){var i=t.target,o=(i[0][0]-Z[0])/n,a=-(i[0][1]-Z[1])/n,s=(i[1][0]-Z[0])/n,u=-(i[1][1]-Z[1])/n,h=(i[2][0]-Z[0])/n,c=-(i[2][1]-Z[1])/n;f.beginPath(),f.moveTo(s,u),f.lineTo(o,a),f.lineTo(h,c),f.closePath(),f.stroke()})),f.restore()),f.canvas}var b=r(65818),Z=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),P=function(t){function e(e,r,o,n,u,c,l,d,f,g,v,p){var m=t.call(this,u,a.Z.IDLE,{interpolate:!!p})||this;m.renderEdges_=void 0!==v&&v,m.pixelRatio_=l,m.gutter_=d,m.canvas_=null,m.sourceTileGrid_=r,m.targetTileGrid_=n,m.wrappedTileCoord_=c||u,m.sourceTiles_=[],m.sourcesListenerKeys_=null,m.sourceZ_=0;var T=n.getTileCoordExtent(m.wrappedTileCoord_),E=m.targetTileGrid_.getExtent(),M=m.sourceTileGrid_.getExtent(),W=E?(0,s.Ed)(T,E):T;if(0===(0,s.bg)(W))return m.state=a.Z.EMPTY,m;var b=e.getExtent();b&&(M=M?(0,s.Ed)(M,b):b);var Z=n.getResolution(m.wrappedTileCoord_[0]),P=x(e,o,W,Z);if(!isFinite(P)||P<=0)return m.state=a.Z.EMPTY,m;var I=void 0!==g?g:i.m;if(m.triangulation_=new _(e,o,W,M,P*I,Z),0===m.triangulation_.getTriangles().length)return m.state=a.Z.EMPTY,m;m.sourceZ_=r.getZForResolution(P);var y=m.triangulation_.calculateSourceExtent();if(M&&(e.canWrapX()?(y[1]=(0,h.uZ)(y[1],M[1],M[3]),y[3]=(0,h.uZ)(y[3],M[1],M[3])):y=(0,s.Ed)(y,M)),(0,s.bg)(y)){for(var F=r.getTileRangeForExtentAndZ(y,m.sourceZ_),j=F.minX;j<=F.maxX;j++)for(var w=F.minY;w<=F.maxY;w++){var S=f(m.sourceZ_,j,w,l);S&&m.sourceTiles_.push(S)}0===m.sourceTiles_.length&&(m.state=a.Z.EMPTY)}else m.state=a.Z.EMPTY;return m}return Z(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,i){e&&e.getState()==a.Z.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=a.Z.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),i="number"===typeof r?r:r[0],o="number"===typeof r?r:r[1],n=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=W(i,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),n,u,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=a.Z.LOADED}this.changed()},e.prototype.load=function(){if(this.state==a.Z.IDLE){this.state=a.Z.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,i){var n=e.getState();if(n==a.Z.IDLE||n==a.Z.LOADING){t++;var s=(0,b.oL)(e,o.Z.CHANGE,(function(r){var i=e.getState();i!=a.Z.LOADED&&i!=a.Z.ERROR&&i!=a.Z.EMPTY||((0,b.bN)(s),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(s)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,r){var i=t.getState();i==a.Z.IDLE&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(b.bN),this.sourcesListenerKeys_=null},e}(n.Z);const I=P},4773:(t,e,r)=>{r.d(e,{j:()=>o,m:()=>i});var i=.5,o=!0},19307:(t,e,r)=>{r.d(e,{Is:()=>c,cA:()=>h,gn:()=>u});var i=r(33983),o=r(28641),n=r(65537);function a(t,e,r,i){var n=(0,o.dz)(e)/r[0],a=(0,o.Cr)(e)/r[1];return i?Math.min(t,Math.max(n,a)):Math.min(t,Math.min(n,a))}function s(t,e,r){var o=Math.min(t,e),n=50;return o*=Math.log(1+n*Math.max(0,t/e-1))/n+1,r&&(o=Math.max(o,r),o/=Math.log(1+n*Math.max(0,r/t-1))/n+1),(0,i.uZ)(o,r/2,2*e)}function u(t,e,r,o){return function(u,h,c,l){if(void 0!==u){var d=t[0],_=t[t.length-1],f=r?a(d,r,c,o):d;if(l){var g=void 0===e||e;return g?s(u,f,_):(0,i.uZ)(u,_,f)}var v=Math.min(f,u),p=Math.floor((0,n.h7)(t,v,h));return t[p]>f&&p<t.length-1?t[p+1]:t[p]}}}function h(t,e,r,o,n,u){return function(h,c,l,d){if(void 0!==h){var _=n?a(e,n,l,u):e,f=void 0!==r?r:0;if(d){var g=void 0===o||o;return g?s(h,_,f):(0,i.uZ)(h,f,_)}var v=1e-9,p=Math.ceil(Math.log(e/_)/Math.log(t)-v),m=-c*(.5-v)+.5,T=Math.min(_,h),E=Math.floor(Math.log(e/T)/Math.log(t)+m),M=Math.max(p,E),x=e/Math.pow(t,M);return(0,i.uZ)(x,f,_)}}}function c(t,e,r,o,n){return function(u,h,c,l){if(void 0!==u){var d=o?a(t,o,c,n):t,_=void 0===r||r;return _&&l?s(u,d,e):(0,i.uZ)(u,e,d)}}}},60828:(t,e,r)=>{r.d(e,{Gw:()=>s,YP:()=>n,gE:()=>a,h$:()=>o});var i=r(33983);function o(t){return void 0!==t?0:void 0}function n(t){return void 0!==t?t:void 0}function a(t){var e=2*Math.PI/t;return function(t,r){return r?t:void 0!==t?(t=Math.floor(t/e+.5)*e,t):void 0}}function s(t){var e=t||(0,i.Yr)(5);return function(t,r){return r?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}},4307:(t,e,r)=>{function i(t){return t[0]>0&&t[1]>0}function o(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function n(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}r.d(e,{Pq:()=>n,bA:()=>o,py:()=>i})}}]);
//# sourceMappingURL=5072.f09c1063.js.map
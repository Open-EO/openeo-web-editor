{"version":3,"file":"js/7769.f4bae536.js","mappings":"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","sources":["webpack://@openeo/web-editor/./src/components/modals/ExpressionModal.vue","webpack://@openeo/web-editor/src/components/modals/ExpressionModal.vue","webpack://@openeo/web-editor/./src/components/modals/ExpressionModal.vue?83c3","webpack://@openeo/web-editor/./src/components/modals/ExpressionModal.vue?b6ae","webpack://@openeo/web-editor/./src/components/modals/Modal.vue","webpack://@openeo/web-editor/src/components/modals/Modal.vue","webpack://@openeo/web-editor/./src/components/modals/Modal.vue?7020","webpack://@openeo/web-editor/./src/components/modals/Modal.vue?5039"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"show\":_vm.show,\"width\":\"80%\",\"title\":\"Formula Editor\"},on:{\"closed\":function($event){return _vm.$emit('closed')}},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('div',{staticClass:\"content\"},[_c('TextEditor',{ref:\"editor\",staticClass:\"editor\",attrs:{\"id\":\"input\",\"language\":\"math\",\"placeholder\":\"e.g. x * 2.5 / (x - y)\"},on:{\"drop\":_vm.onDrop,\"dragover\":_vm.allowDrop},model:{value:(_vm.input),callback:function ($$v) {_vm.input=$$v},expression:\"input\"}}),_c('div',{staticClass:\"description\"},[_c('p',[_c('i',{staticClass:\"fas fa-info-circle\"}),_vm._v(\" Above you can insert a mathematical formula and it will be converted to openEO code for you.\")]),_c('p',[_c('strong',[_vm._v(\"Operators\")]),_vm._v(\":\"),_c('br'),_vm._l((_vm.operators),function(op){return _c('kbd',{key:op.op,staticClass:\"click\",attrs:{\"title\":op.title,\"draggable\":\"true\"},on:{\"click\":function($event){return _vm.broadcast('showProcess', {id: op.processId})},\"dragstart\":function($event){return _vm.onDrag($event, 'operators', op.op)}}},[_vm._v(_vm._s(op.op))])})],2),_c('p',[_vm._v(\"Supported \"),_c('strong',[_vm._v(\"mathematical functions\")]),_vm._v(\": \"),(_vm.mathProcesses.length)?[_c('br'),_vm._l((_vm.mathProcesses),function(func){return _c('kbd',{key:func.id,staticClass:\"click\",attrs:{\"title\":func.summary,\"draggable\":\"true\"},on:{\"click\":function($event){return _vm.broadcast('showProcess', func)},\"dragstart\":function($event){return _vm.onDrag($event, 'functions', func)}}},[_vm._v(_vm._s(func.id))])})]:[_vm._v(\"None\")]],2),_c('p',[_vm._v(\"Available \"),_c('strong',[_vm._v(\"output from processes\")]),_vm._v(\": \"),(_vm.results.length)?[_c('br'),_vm._l((_vm.results),function(id){return _c('kbd',{key:id,attrs:{\"draggable\":\"true\"},on:{\"dragstart\":function($event){return _vm.onDrag($event, 'results', id)}}},[_vm._v(\"#\"+_vm._s(id))])})]:[_vm._v(\"None\")]],2),_c('p',[_c('strong',[_vm._v(\"Parameters\")]),_vm._v(\": If a variable is found in the formula which can't be resolved to a pre-defined parameter, a new parameter will be created for it. Available pre-defined parameters: \"),(_vm.pgParameters.length)?[_c('br'),_vm._l((_vm.pgParameters),function(param){return _c('kbd',{key:param.id,staticClass:\"click\",attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){return _vm.broadcast('showProcessParameter', param)},\"dragstart\":function($event){return _vm.onDrag($event, 'pgParameters', param.name)}}},[_vm._v(_vm._s(param.name))])})]:[_vm._v(\"None\")]],2),(_vm.supportsArrayElement)?_c('p',[_vm._v(\"If the first pre-defined parameter is a (labeled) \"),_c('strong',[_vm._v(\"array\")]),_vm._v(\", the value for a specific index or label can be accessed by typing the numeric index or textual label with a \"),_c('kbd',[_vm._v(\"$\")]),_vm._v(\" in front, for example \"),_c('kbd',[_vm._v(\"$B1\")]),_vm._v(\" for the label B1 or \"),_c('kbd',[_vm._v(\"$0\")]),_vm._v(\" for the first element in the array. You can access subsequent parameters by adding additional $ characters at the beginning, e.g. \"),_c('kbd',[_vm._v(\"$$0\")]),_vm._v(\" for the first element of an array in the second parameter, \"),_c('kbd',[_vm._v(\"$$$0\")]),_vm._v(\" for the same behavior in the third parameter etc. Numeric labels are not supported.\")]):_vm._e()])],1)]},proxy:true},{key:\"footer\",fn:function(){return [_c('div',{staticClass:\"footer\"},[_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.createResult}},[_vm._v(\"Insert\")])])]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Modal :show=\"show\" width=\"80%\" title=\"Formula Editor\" @closed=\"$emit('closed')\">\n\t\t<template #default>\n\t\t\t<div class=\"content\">\n\t\t\t\t<TextEditor ref=\"editor\" id=\"input\" class=\"editor\" v-model=\"input\" language=\"math\" placeholder=\"e.g. x * 2.5 / (x - y)\" @drop=\"onDrop\" @dragover=\"allowDrop\" />\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p><i  class=\"fas fa-info-circle\"></i> Above you can insert a mathematical formula and it will be converted to openEO code for you.</p>\n\t\t\t\t\t<p><strong>Operators</strong>:<br />\n\t\t\t\t\t\t<kbd v-for=\"op in operators\" :key=\"op.op\" :title=\"op.title\" @click=\"broadcast('showProcess', {id: op.processId})\" class=\"click\" draggable=\"true\" @dragstart=\"onDrag($event, 'operators', op.op)\">{{ op.op }}</kbd>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Supported <strong>mathematical functions</strong>:\n\t\t\t\t\t\t<template v-if=\"mathProcesses.length\">\n\t\t\t\t\t\t\t<br /><kbd v-for=\"func in mathProcesses\" :key=\"func.id\" :title=\"func.summary\" @click=\"broadcast('showProcess', func)\" class=\"click\" draggable=\"true\" @dragstart=\"onDrag($event, 'functions', func)\">{{ func.id }}</kbd>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>None</template>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Available <strong>output from processes</strong>:\n\t\t\t\t\t\t<template v-if=\"results.length\">\n\t\t\t\t\t\t\t<br /><kbd v-for=\"id in results\" :key=\"id\" draggable=\"true\" @dragstart=\"onDrag($event, 'results', id)\">#{{ id }}</kbd> <!-- ToDo: Open non-editable parameter editor or process schema -->\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>None</template>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p><strong>Parameters</strong>: If a variable is found in the formula which can't be resolved to a pre-defined parameter, a new parameter will be created for it. Available pre-defined parameters:\n\t\t\t\t\t\t<template v-if=\"pgParameters.length\">\n\t\t\t\t\t\t\t<br /><kbd v-for=\"param in pgParameters\" :key=\"param.id\" @click=\"broadcast('showProcessParameter', param)\" class=\"click\" draggable=\"true\" @dragstart=\"onDrag($event, 'pgParameters', param.name)\">{{ param.name }}</kbd>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>None</template>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p v-if=\"supportsArrayElement\">If the first pre-defined parameter is a (labeled) <strong>array</strong>, the value for a specific index or label can be accessed by typing the numeric index or textual label with a <kbd>$</kbd> in front, for example <kbd>$B1</kbd> for the label B1 or <kbd>$0</kbd> for the first element in the array. You can access subsequent parameters by adding additional $ characters at the beginning, e.g. <kbd>$$0</kbd> for the first element of an array in the second parameter, <kbd>$$$0</kbd> for the same behavior in the third parameter etc. Numeric labels are not supported.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #footer>\n\t\t\t<div class=\"footer\">\n\t\t\t\t<button type=\"button\" @click=\"createResult\">Insert</button>\n\t\t\t</div>\n\t\t</template>\n\t</Modal>\n</template>\n\n<script>\nimport Modal from './Modal.vue';\nimport Utils from '../../utils.js';\nimport TextEditor from '../TextEditor.vue';\nimport EventBusMixin from '../EventBusMixin.js';\nimport Process from '../../process';\nimport { Formula } from '@openeo/js-client';\n\nexport default {\n\tname: 'ExpressionModal',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tModal,\n\t\tTextEditor\n\t},\n\tprops: {\n\t\tprocess: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({})\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshow: true,\n\t\t\tinput: '',\n\t\t\tarrayElements: {},\n\t\t\tresult: {},\n\t\t\treplace: false\n\t\t};\n\t},\n\tcreated() {\n\t\ttry {\n\t\t\tthis.importFormula();\n\t\t} catch (error) {\n\t\t\tconsole.info(error);\n\t\t}\n\n\t\tthis.arrayElements = {};\n\t\tif(!this.replace) {\n\t\t\t// If not replacing: Add all array_element calls for labels to the list so that we don't get duplicate array_element calls\n\t\t\tfor(let id in this.process.getNodes()) {\n\t\t\t\tlet node = this.process.getNode(id);\n\t\t\t\tif (node.process_id === 'array_element') {\n\t\t\t\t\tlet placeholder = this.process.getArrayElementPlaceholder(node);\n\t\t\t\t\tthis.arrayElements[placeholder] = {from_node: node.id};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapGetters(['processes']),\n\t\tmathProcesses() {\n\t\t\treturn this.processes.getMathProcesses();\n\t\t},\n\t\tpgParameters() {\n\t\t\treturn this.process.getCallbackParameters();\n\t\t},\n\t\toperators() {\n\t\t\tvar ops = [];\n\t\t\tfor(var op in Formula.operatorMapping) {\n\t\t\t\tlet processId = Formula.operatorMapping[op];\n\t\t\t\tlet title = this.processes.get(processId).summary;\n\t\t\t\tops.push({op, processId, title});\n\t\t\t}\n\t\t\treturn ops;\n\t\t},\n\t\tresults() {\n\t\t\tlet resultNodes = [];\n\t\t\tfor(var id in this.process.getNodes()) {\n\t\t\t\tvar node = this.process.getNode(id);\n\t\t\t\tvar p = this.processes.get(node.process_id);\n\t\t\t\tif (Process.isMathProcess(p)) {\n\t\t\t\t\tresultNodes.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn resultNodes;\n\t\t},\n\t\tsupportsArrayElement() {\n\t\t\t// A pg parameter needs to be available\n\t\t\tif (this.pgParameters.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// array_element must be supported\n\t\t\treturn this.processes.has('array_element');\n\t\t}\n\t},\n\tmethods: {\n\t\tonDrag(event, type, data) {\n\t\t\tswitch(type) {\n\t\t\t\tcase 'functions':\n\t\t\t\t\tlet params = (data.parameters || []).map(p => p.name);\n\t\t\t\t\tdata = data.id + '(' + params.join(', ') + ')';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'results':\n\t\t\t\t\tdata = '#' + data;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tevent.dataTransfer.setData(\"text/plain\", data);\n\t\t},\n\t\tallowDrop(event) {\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tonDrop(event) {\n\t\t\tvar text = event.dataTransfer.getData(\"text/plain\");\n\t\t\tif (text) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.$refs.editor.insert(text, false);\n\t\t\t}\n\t\t},\n\t\timportFormula() {\n\t\t\tlet formula = this.process.toFormulaString();\n\t\t\tif (formula) {\n\t\t\t\tthis.input = formula;\n\t\t\t\tthis.replace = true;\n\t\t\t}\n\t\t},\n\t\tcreateResult() {\n\t\t\tif (this.input.length === 0) {\n\t\t\t\tthis.show = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tthis.result = {};\n\t\t\t\tlet formula = new Formula(this.input);\n\t\t\t\tlet res = this.parseTree(formula.tree);\n\t\t\t\tif (!Utils.isObject(res) || !res.from_node) {\n\t\t\t\t\tthrow new Error('Invalid formula specified.');\n\t\t\t\t}\n\t\t\t\t// Set result node\n\t\t\t\tthis.result[res.from_node].result = true;\n\t\t\t\t// Send result\n\t\t\t\tthis.$emit('save', this.result, this.replace);\n\t\t\t\tthis.show = false;\n\t\t\t} catch(e) {\n\t\t\t\tUtils.exception(this, e);\n\t\t\t}\n\t\t},\n\t\tparseTree(tree) {\n\t\t\tlet key = Object.keys(tree)[0]; // There's never more than one property so no loop required\n\t\t\tswitch(key) {\n\t\t\t\tcase 'Number':\n\t\t\t\t\treturn Number.parseFloat(tree.Number);\n\t\t\t\tcase 'Identifier':\n\t\t\t\t\treturn this.getRef(tree.Identifier);\n\t\t\t\tcase 'Expression':\n\t\t\t\t\treturn this.parseTree(tree.Expression);\n\t\t\t\tcase 'FunctionCall':\n\t\t\t\t\tlet args = [];\n\t\t\t\t\tfor(let i in tree.FunctionCall.args) {\n\t\t\t\t\t\targs.push(this.parseTree(tree.FunctionCall.args[i]));\n\t\t\t\t\t}\n\t\t\t\t\treturn this.addProcess(tree.FunctionCall.name, args);\n\t\t\t\tcase 'Binary':\n\t\t\t\t\treturn this.addOperatorProcess(\n\t\t\t\t\t\ttree.Binary.operator,\n\t\t\t\t\t\tthis.parseTree(tree.Binary.left),\n\t\t\t\t\t\tthis.parseTree(tree.Binary.right)\n\t\t\t\t\t);\n\t\t\t\tcase 'Unary':\n\t\t\t\t\tlet val = this.parseTree(tree.Unary.expression);\n\t\t\t\t\tif (tree.Unary.operator === '-') {\n\t\t\t\t\t\tif (typeof val === 'number') {\n\t\t\t\t\t\t\treturn -val;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treturn this.addOperatorProcess('*', -1, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Operation ' + key + ' not supported.');\n\t\t\t}\n\t\t},\n\t\tgetRef(value) {\n\t\t\t// Convert native data types\n\t\t\tif (value === 'true') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (value === 'false') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse if (value === 'null') {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Output of a process\n\t\t\tif (typeof value === 'string' && value.startsWith('#')) {\n\t\t\t\tlet nodeId = value.substring(1);\n\t\t\t\tif (this.results.includes(nodeId)) {\n\t\t\t\t\treturn { from_node: nodeId };\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Array labels / indices\n\t\t\tif (this.supportsArrayElement && typeof value === 'string') {\n\t\t\t\tlet prefix = value.match(/^\\$+/);\n\t\t\t\tlet count = prefix ? prefix[0].length : 0;\n\t\t\t\tif (count > 0) {\n\t\t\t\t\tlet ref = value.substring(count);\n\t\t\t\t\tif (!(value in this.arrayElements)) {\n\t\t\t\t\t\t// ToDo: Check whether label is really supported - see implementation for supportsArrayElement()\n\t\t\t\t\t\tlet args = {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tfrom_parameter: this.pgParameters[count-1].name\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (ref.match(/^\\d+$/)) {\n\t\t\t\t\t\t\targs.index = Number.parseInt(ref, 10);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\targs.label = ref;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.arrayElements[value] = this.addProcess(\"array_element\", args);\n\t\t\t\t\t}\n\t\t\t\t\treturn this.arrayElements[value];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Everything else is a parameter\n\t\t\tif (this.pgParameters.filter(p => p.name === value).length === 0) {\n\t\t\t\t// ToDo: Add new parameter to process\n\t\t\t}\n\t\t\treturn { from_parameter: value };\n\t\t},\n\t\taddOperatorProcess(operator, left, right) {\n\t\t\tif (typeof Formula.operatorMapping[operator] !== 'undefined') {\n\t\t\t\tlet process = this.processes.get(Formula.operatorMapping[operator]);\n\t\t\t\tlet args = {};\n\t\t\t\tif (!process || !Array.isArray(process.parameters) || process.parameters.length < 2) {\n\t\t\t\t\tthrow new Error(\"Process for operator \" + operator + \" must have at least two parameters\");\n\t\t\t\t}\n\t\t\t\targs[process.parameters[0].name || 'x'] = left;\n\t\t\t\targs[process.parameters[1].name || 'y'] = right;\n\t\t\t\treturn this.addProcess(process, args);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error('Operator ' + operator + ' not supported.');\n\t\t\t}\n\t\t},\n\t\taddProcess(process, args) {\n\t\t\tif (typeof process === 'string') {\n\t\t\t\tprocess = this.processes.get(process);\n\t\t\t}\n\n\t\t\tif (!process) {\n\t\t\t\tthrow new Error(\"Process not available: \" + name);\n\t\t\t}\n\t\t\telse if (args.length > Utils.size(process.parameters)) {\n\t\t\t\tthrow new Error(\"Number of given arguments exceeds number of process parameters for process '\" + name + \"'.\");\n\t\t\t}\n\n\t\t\t// Convert arguments array to object\n\t\t\tif (Array.isArray(args)) {\n\t\t\t\tlet namedArgs = {};\n\t\t\t\tfor (let i in args) {\n\t\t\t\t\tlet parameter = process.parameters[i];\n\t\t\t\t\tnamedArgs[parameter.name] = args[i];\n\t\t\t\t}\n\t\t\t\targs = namedArgs;\n\t\t\t}\n\t\t\t// ToDo: Check all arguments against their schemas / check all required fields are given\n\n\t\t\t// Add node to result with unique id\n\t\t\tlet nodeId = Utils.getUniqueId();\n\t\t\tlet node = {\n\t\t\t\tprocess_id: process.id,\n\t\t\t\targuments: args\n\t\t\t};\n\t\t\tthis.result[nodeId] = node;\n\t\t\treturn { from_node: nodeId };\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.content {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n.content .textEditor {\n\tflex-grow: 1;\n}\n.description {\n\tmargin-top: 1rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n}\n.description p {\n\tmargin: 0.5em 0;\n}\n.editor {\n\twidth: 100%;\n\tmin-height: 4em;\n\theight: 10em;\n}\nkbd {\n\tfont-family: Consolas, \"Lucida Console\", monospace;\n\tdisplay: inline-block;\n\tborder-radius: 3px;\n\tpadding: 1px 5px;\n\tbox-shadow: 1px 1px 1px #777;\n\tmargin: 2px;\n\tfont-size: small;\n\tvertical-align: text-bottom;\n\tbackground: #eee;\n\tfont-weight: 600;\n\tcolor: #555;\n\tletter-spacing: 0.25px;\n}\nkbd.click {\n\tcursor: pointer;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExpressionModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExpressionModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExpressionModal.vue?vue&type=template&id=cc5174a6&scoped=true&\"\nimport script from \"./ExpressionModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ExpressionModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExpressionModal.vue?vue&type=style&index=0&id=cc5174a6&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cc5174a6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal\",style:({'z-index': _vm.zIndex}),on:{\"mousedown\":_vm.backgroundClose}},[_c(_vm.containerTag,{ref:\"container\",tag:\"component\",staticClass:\"modal-container\",class:{smooth: _vm.smooth},style:(_vm.style),on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.submitFunction.apply(null, arguments)}}},[_c('header',{staticClass:\"modal-header\",on:{\"mousedown\":_vm.startMove}},[_vm._t(\"header\",function(){return [_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('span',{staticClass:\"close\",on:{\"click\":_vm.close}},[_c('i',{staticClass:\"fa fa-times\",attrs:{\"aria-hidden\":\"true\"}})])]})],2),_c('main',{staticClass:\"modal-content\"},[_vm._t(\"default\")],2),_c('footer',{staticClass:\"modal-footer\"},[_vm._t(\"footer\",function(){return [(_vm.submitFunction)?_c('button',{attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.submitButtonText))]):_vm._e()]})],2)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"modal\" @mousedown=\"backgroundClose\" :style=\"{'z-index': zIndex}\">\n\t\t<component :is=\"containerTag\" ref=\"container\" class=\"modal-container\" :class=\"{smooth: smooth}\" :style=\"style\" @submit.prevent.stop=\"submitFunction\">\n\t\t\t<header class=\"modal-header\" @mousedown=\"startMove\">\n\t\t\t\t<slot name=\"header\">\n\t\t\t\t\t<h2>{{ title }}</h2>\n\t\t\t\t\t<span class=\"close\" @click=\"close\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></span>\n\t\t\t\t</slot>\n\t\t\t</header>\n\t\t\t<main class=\"modal-content\">\n\t\t\t\t<slot></slot>\n\t\t\t</main>\n\t\t\t<footer class=\"modal-footer\">\n\t\t\t\t<slot name=\"footer\">\n\t\t\t\t\t<button v-if=\"submitFunction\" type=\"submit\">{{ submitButtonText }}</button>\n\t\t\t\t</slot>\n\t\t\t</footer>\n\t\t</component>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from '../EventBusMixin.js';\nimport Utils from '../../utils.js';\n\nexport default {\n\tname: 'Modal',\n\tmixins: [EventBusMixin],\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\tminWidth: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\twidth: {\n\t\t\ttype: String,\n\t\t\tdefault: \"auto\"\n\t\t},\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tsubmitFunction: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\tsubmitButtonText: {\n\t\t\ttype: String,\n\t\t\tdefault: 'Submit'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tzIndex: 1000,\n\t\t\tposition: null,\n\t\t\tdragPosition: null,\n\t\t\tsmooth: false\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState('editor', ['hightestModalZIndex']),\n\t\tstyle() {\n\t\t\tlet style = {\n\t\t\t\t'width': this.width\n\t\t\t};\n\t\t\tif (this.minWidth) {\n\t\t\t\tstyle['min-width'] = this.minWidth;\n\t\t\t}\n\t\t\tif (Array.isArray(this.position)) {\n\t\t\t\tstyle.position = 'absolute';\n\t\t\t\tstyle.left = this.position[0] + 'px';\n\t\t\t\tstyle.top = this.position[1] + 'px';\n\t\t\t}\n\t\t\treturn style;\n\t\t},\n\t\tcontainerTag() {\n\t\t\treturn this.submitFunction ? 'form' : 'div';\n\t\t}\n\t},\n\twatch: {\n\t\tshow: {\n\t\t\timmediate: true,\n\t\t\thandler(show) {\n\t\t\t\tif (!show) {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.open();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twidth() {\n\t\t\tthis.smoothResize();\n\t\t},\n\t\tminWidth() {\n\t\t\tthis.smoothResize();\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['openModal', 'closeModal']),\n\t\tsmoothResize() {\n\t\t\tthis.smooth = true;\n\t\t\tsetTimeout(() => this.smooth = false, 600);\n\t\t},\n\t\tsubmit(event) {\n\t\t\tthis.submitFunction(event);\n\t\t},\n\t\topen() {\n\t\t\tthis.openModal();\n\t\t\tthis.zIndex = this.hightestModalZIndex;\n\t\t\twindow.addEventListener('keydown', this.escCloseListener);\n\t\t\tthis.$emit('shown');\n\t\t},\n\t\tclose() {\n\t\t\twindow.removeEventListener('keydown', this.escCloseListener);\n\t\t\tthis.closeModal();\n\t\t\tthis.$emit('closed');\n\t\t},\n\t\tstartMove(event) {\n\t\t\tif (event.target.tagName !== 'H2') {\n\t\t\t\tthis.dragPosition = [\n\t\t\t\t\tevent.clientX,\n\t\t\t\t\tevent.clientY\n\t\t\t\t];\n\n\t\t\t\tdocument.addEventListener('mousemove', this.move);\n\t\t\t\tdocument.addEventListener('mouseup', this.stopMove);\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tstopMove() {\n\t\t\tdocument.removeEventListener('mousemove', this.move);\n\t\t\tdocument.removeEventListener('mouseup', this.stopMove);\n\t\t},\n\t\tmove(event) {\n\t\t\tevent.preventDefault();\n\t\t\t// set the element's new position\n\t\t\tthis.position = [\n\t\t\t\tthis.$refs.container.offsetLeft - (this.dragPosition[0] - event.clientX),\n\t\t\t\tthis.$refs.container.offsetTop - (this.dragPosition[1] - event.clientY)\n\t\t\t];\n\t\t\t// Store for later\n\t\t\tthis.dragPosition = [\n\t\t\t\tevent.clientX,\n\t\t\t\tevent.clientY\n\t\t\t];\n\t\t},\n\t\tescCloseListener(event) {\n\t\t\tif (event.key == \"Escape\") { \n\t\t\t\tthis.close();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tbackgroundClose(event) {\n\t\t\tif (event.target === this.$el) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\">\n@import '../../../theme.scss';\n\n.modal {\n\tposition: fixed;\n\tz-index: 1000; /* Snotify has 9999 and is intentionally above the modals */\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0,0,0,0.4);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.modal .modal-container {\n\tbackground-color: #fff;\n\tborder: 1px solid #fff;\n\tmin-height: 50vh;\n\tmin-width: 300px;\n\twidth: 70%;\n\tmax-height: 96%;\n\tmax-width: 96%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbox-shadow: 8px 8px 8px 0px rgba(0,0,0,0.3);\n\tresize: both;\n\toverflow: hidden;\n\n\t&.smooth {\n\t\ttransition-timing-function: linear;\n\t\ttransition-property: width, height;\n\t\ttransition-duration: 0.5s;\n\t}\n}\n\n.modal .modal-header {\n\tbackground-color: $mainColor;\n\tcolor: white;\n\tmargin: 0;\n\theight: 1.5rem;\n\tpadding: 1rem;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tcursor: move;\n}\n\n.modal .modal-header h2 {\n\tdisplay: inline-block;\n\tmargin: 0;\n\tmargin-left: -0.5rem;\n\tpadding: 0.5rem;\n\tfont-size: 1.5rem;\n\tborder: 0;\n\tcursor: text;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n}\n\n.modal .modal-content {\n\tpadding: 1rem;\n\toverflow: auto;\n\tflex-grow: 1;\n}\n\n.modal .inline .modal-content {\n\tpadding: 0;\n}\n\n.modal .modal-footer:empty {\n\tdisplay: none;\n}\n\n.modal .modal-footer {\n\tbackground-color: #eee;\n\tmargin: 0;\n\tpadding: 1rem;\n\ttext-align: right;\n}\n\n.modal .close {\n\tfont-size: 1.5rem;\n\theight: 2rem;\n\twidth: 2rem;\n\tcolor: white;\n\tcursor: pointer;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.modal .close:hover, .modal .close:focus {\n\tcolor: red;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Modal.vue?vue&type=template&id=7a094955&\"\nimport script from \"./Modal.vue?vue&type=script&lang=js&\"\nexport * from \"./Modal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Modal.vue?vue&type=style&index=0&id=7a094955&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","show","on","$event","$emit","scopedSlots","_u","key","fn","staticClass","ref","onDrop","allowDrop","model","value","input","callback","$$v","expression","_v","_l","operators","op","title","broadcast","id","processId","onDrag","_s","mathProcesses","length","func","summary","results","pgParameters","param","name","supportsArrayElement","_e","proxy","createResult","staticRenderFns","mixins","EventBusMixin","components","Modal","TextEditor","props","process","type","Object","default","data","arrayElements","result","replace","created","importFormula","error","console","info","getNodes","node","getNode","process_id","placeholder","getArrayElementPlaceholder","from_node","computed","Utils","processes","getMathProcesses","getCallbackParameters","ops","Formula","get","push","resultNodes","p","Process","has","methods","event","params","parameters","map","join","dataTransfer","setData","preventDefault","text","getData","$refs","editor","insert","formula","toFormulaString","res","parseTree","tree","Error","e","keys","Number","parseFloat","getRef","Identifier","Expression","args","i","FunctionCall","addProcess","addOperatorProcess","Binary","operator","left","right","val","Unary","startsWith","nodeId","substring","includes","prefix","match","count","from_parameter","index","parseInt","label","filter","Array","isArray","namedArgs","parameter","arguments","component","style","zIndex","backgroundClose","containerTag","tag","class","smooth","stopPropagation","submitFunction","apply","startMove","_t","close","submitButtonText","String","minWidth","width","Boolean","Function","position","dragPosition","top","watch","immediate","handler","open","smoothResize","setTimeout","submit","openModal","hightestModalZIndex","window","addEventListener","escCloseListener","removeEventListener","closeModal","target","tagName","clientX","clientY","document","move","stopMove","container","offsetLeft","offsetTop","$el"],"sourceRoot":""}
(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[9873],{2736:()=>{},24149:t=>{"use strict";var e=RangeError;t.exports=function(t){if(t===t)return t;throw new e("NaN is not allowed")}},29314:(t,e,s)=>{"use strict";var n=s(46518),r=s(69565),i=s(28551),a=s(1767),o=s(24149),l=s(99590),c=s(9539),u=s(19462),d=s(30684),h=s(84549),m=s(96395),p=!m&&!d("drop",0),g=!m&&!p&&h("drop",RangeError),f=m||p||g,y=u(function(){var t,e,s=this.iterator,n=this.next;while(this.remaining)if(this.remaining--,t=i(r(n,s)),e=this.done=!!t.done,e)return;if(t=i(r(n,s)),e=this.done=!!t.done,!e)return t.value});n({target:"Iterator",proto:!0,real:!0,forced:f},{drop:function(t){var e;i(this);try{e=l(o(+t))}catch(s){c(this,"throw",s)}return g?r(g,this,e):new y(a(this),{remaining:e})}})},34043:()=>{},53672:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var n=s(54602),r=s(10972),i=s(16452),a=class extends r["default"]{constructor(t){var e=i.A.create("DIV",{className:(t.className||"")+" ol-timeline"+(t.target?"":" ol-unselectable ol-control")+(t.zoomButton?" ol-hasbutton":"")});super({element:e,target:t.target}),this._scrollDiv=i.A.create("DIV",{className:"ol-scroll",parent:this.element}),this._buttons=i.A.create("DIV",{className:"ol-buttons",parent:this.element}),t.zoomButton&&(this.addButton({className:"ol-zoom-in",handleClick:function(){var t=this.get("zoom");t>=1?t++:t=Math.min(1,t+.1),t=Math.round(100*t)/100,this.refresh(t)}.bind(this)}),this.addButton({className:"ol-zoom-out",handleClick:function(){var t=this.get("zoom");t>1?t--:t-=.1,t=Math.round(100*t)/100,this.refresh(t)}.bind(this)})),this._intervalDiv=i.A.create("DIV",{className:"ol-center-date",parent:this.element}),this.element.addEventListener("mouseover",function(){this._select&&this._select.elt.classList.remove("ol-select")}.bind(this));var s=null;this._scrollDiv.addEventListener("scroll",function(){this._setScrollLeft(),s&&(clearTimeout(s),s=null),s=setTimeout(function(){this.dispatchEvent({type:"scroll",date:this.getDate(),dateStart:this.getDate("start"),dateEnd:this.getDate("end")})}.bind(this),t.scrollTimeout||15)}.bind(this)),i.A.scrollDiv(this._scrollDiv,{onmove:function(t){this._moving=t}.bind(this)}),this._tline=[],this._scrollLeft=0,this.set("maxWidth",t.maxWidth||2e3),this.set("minDate",t.minDate||1/0),this.set("maxDate",t.maxDate||-1/0),this.set("graduation",t.graduation),this.set("minZoom",t.minZoom||.2),this.set("maxZoom",t.maxZoom||4),this.setInterval(t.interval),t.getHTML&&(this._getHTML=t.getHTML),t.getFeatureDate&&(this._getFeatureDate=t.getFeatureDate),t.endFeatureDate&&(this._endFeatureDate=t.endFeatureDate),this.setFeatures(t.features||t.source,t.zoom)}setMap(t){super.setMap(t),this.refresh(this.get("zoom")||1,!0)}addButton(t){this.element.classList.add("ol-hasbutton"),i.A.create("BUTTON",{className:t.className||void 0,title:t.title,html:t.html,click:t.handleClick,parent:this._buttons})}setInterval(t){"string"===typeof t&&(t=/s$/.test(t)?1e3*parseFloat(t):/mn$/.test(t)?1e3*parseFloat(t)*60:/h$/.test(t)?1e3*parseFloat(t)*3600:/d$/.test(t)?1e3*parseFloat(t)*3600*24:/y$/.test(t)?1e3*parseFloat(t)*3600*24*365:0),this.set("interval",t||0),t?this.element.classList.add("ol-interval"):this.element.classList.remove("ol-interval"),this.refresh(this.get("zoom"))}_getHTML(t){return t.get("name")||""}_getFeatureDate(t){return t&&t.get?t.get("date"):null}_endFeatureDate(){}isCollapsed(){return this.element.classList.contains("ol-collapsed")}collapse(t){t?this.element.classList.add("ol-collapsed"):this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"collapse",collapsed:this.isCollapsed()})}toggle(){this.element.classList.toggle("ol-collapsed"),this.dispatchEvent({type:"collapse",collapsed:this.isCollapsed()})}setFeatures(t,e){this._features=this._source=null,t instanceof n["default"]?this._source=t:this._features=t instanceof Array?t:[],this.refresh(e)}getFeatures(){return this._features||this._source.getFeatures()}refresh(t,e){if(this.getMap()){t||(t=this.get("zoom")),t=Math.min(this.get("maxZoom"),Math.max(this.get("minZoom"),t||1)),this.set("zoom",t),this._scrollDiv.innerHTML="";var s,n,r=this.getFeatures(),a=this._tline=[];r.forEach(function(t){(s=this._getFeatureDate(t))&&(s instanceof Date||(s=new Date(s)),this._endFeatureDate&&(n=this._endFeatureDate(t),n instanceof Date||(n=new Date(n))),isNaN(s)||a.push({date:s,end:isNaN(n)?null:n,feature:t}))}.bind(this)),a.sort(function(t,e){return t.date<e.date?-1:t.date===e.date?0:1});var o=i.A.create("DIV",{parent:this._scrollDiv}),l=this._minDate=Math.min(this.get("minDate"),a.length?a[0].date:1/0),c=this._maxDate=Math.max(this.get("maxDate"),a.length?a[a.length-1].date:-1/0);isFinite(l)||(this._minDate=l=new Date),isFinite(c)||(this._maxDate=c=new Date);var u=c-l,d=this.get("maxWidth"),h=this._scale=(u>d?d/u:1)*t;l=this._minDate=this._minDate-10/h,u=(c-l)*h,i.A.setStyle(o,{width:u,maxWidth:"unset"}),this._drawTime(o,l,c,h),this.get("interval")?i.A.setStyle(this._intervalDiv,{width:this.get("interval")*h}):i.A.setStyle(this._intervalDiv,{width:""});var m=[],p=i.A.getStyle(this._scrollDiv,"lineHeight"),g=i.A.create("DIV",{className:"ol-features",parent:o});a.forEach(function(t){for(var e=t.date,s=t.elt=i.A.create("DIV",{className:"ol-feature",style:{left:Math.round((e-l)*h)},html:this._getHTML(t.feature),parent:g}),n=s.querySelectorAll("img"),r=0;r<n.length;r++)n[r].ondragstart=function(){return!1};t.end&&i.A.setStyle(s,{minWidth:(t.end-e)*h,width:(t.end-e)*h,maxWidth:"unset"});var a,o,c=i.A.getStyle(s,"left");for(s.addEventListener("click",function(){this._moving||this.dispatchEvent({type:"select",feature:t.feature})}.bind(this)),a=0;o=m[a];a++)if(c>o)break;m[a]=c+i.A.getStyle(s,"width"),i.A.setStyle(s,{top:a*p})}.bind(this)),this._nbline=m.length,e&&this.setDate(this._minDate,{anim:!1,position:"start"}),this.dispatchEvent({type:"scroll",date:this.getDate(),dateStart:this.getDate("start"),dateEnd:this.getDate("end")})}}_getOffsetFromDate(t){return(t-this._minDate)*this._scale}_getDateFromOffset(t){return t/this._scale+this._minDate}_setScrollLeft(t){this._scrollLeft=t,void 0!==t&&(this._scrollDiv.scrollLeft=t)}_getScrollLeft(){return void 0===this._scrollLeft?this._scrollDiv.scrollLeft:this._scrollLeft}_drawTime(t,e,s,n){var r,a,o,l,c=i.A.create("DIV",{className:"ol-times",parent:t}),u=i.A.getStyle(c,"left"),d=i.A.getStyle(c,"height"),h=new Date(this._minDate).getFullYear();a=(new Date(0).setFullYear(String(h))-new Date(0).setFullYear(String(h-1)))*n;var m=Math.round(2*d/a)+1;while(1){if(r=new Date(0).setFullYear(h),r>this._maxDate)break;i.A.create("DIV",{className:"ol-time ol-year",style:{left:this._getOffsetFromDate(r)-u},html:h,parent:c}),h+=m}if(/day|month/.test(this.get("graduation"))&&(a=(new Date(0,0,1).setFullYear(String(h))-new Date(0,0,1).setFullYear(String(h-1)))*n,l=Math.max(1,Math.round(12/Math.round(a/d/2))),l<12)){h=new Date(this._minDate).getFullYear(),o=l+1;while(1){if(r=new Date(0,0,1),r.setFullYear(h),r.setMonth(o-1),r>this._maxDate)break;i.A.create("DIV",{className:"ol-time ol-month",style:{left:this._getOffsetFromDate(r)-u},html:r.toLocaleDateString(void 0,{month:"short"}),parent:c}),o+=l,o>12&&(h++,o=l+1)}}if("day"===this.get("graduation")){a=(new Date(0,1,1)-new Date(0,0,1))*n;var p=Math.max(1,Math.round(31/Math.round(a/d/2)));if(p<31){h=new Date(this._minDate).getFullYear(),o=0;var g=p;while(1)if(r=new Date(0,0,1),r.setFullYear(h),r.setMonth(o),r.setDate(g),isNaN(r))o++,o>12&&(o=1,h++),g=p;else{if(r>this._maxDate)break;if(g>1){var f=this._getOffsetFromDate(r);this._getOffsetFromDate(new Date(h,o+1,1))-f>d&&i.A.create("DIV",{className:"ol-time ol-day",style:{left:f-u},html:g,parent:c})}h=r.getFullYear(),o=r.getMonth(),g=r.getDate()+p,g>new Date(h,o+1,0).getDate()&&(o++,g=p)}}}}setDate(t,e){var s;if(e=e||{},t instanceof Date?s=t:(this.getFeatures().indexOf(t)>=0&&(s=this._getFeatureDate(t)),!s||s instanceof Date||(s=new Date(s)),s&&!isNaN(s)||(s=new Date(String(t)))),!isNaN(s)){!1===e.anim&&this._scrollDiv.classList.add("ol-move");var n=this._getOffsetFromDate(s);if("start"===e.position?n+=i.A.outerWidth(this._scrollDiv)/2-i.A.getStyle(this._scrollDiv,"marginLeft")/2:"end"===e.position&&(n-=i.A.outerWidth(this._scrollDiv)/2-i.A.getStyle(this._scrollDiv,"marginLeft")/2),this._setScrollLeft(n),!1===e.anim&&this._scrollDiv.classList.remove("ol-move"),t)for(var r,a=0;r=this._tline[a];a++)r.feature===t?(r.elt.classList.add("ol-select"),this._select=r):r.elt.classList.remove("ol-select")}}roundDate(t,e){switch(e){case"mn":return new Date(this._roundTo(t,6e4));case"hour":return new Date(this._roundTo(t,36e5));case"day":return new Date(this._roundTo(t,864e5));case"month":return t=new Date(this._roundTo(t,864e5)),t.getDate()>15&&(t=new Date(t.setMonth(t.getMonth()+1))),t=t.setDate(1),new Date(t);default:return new Date(t)}}getDate(t,e){var s;switch(e||(e=t),t){case"start":s=this.get("interval")?-i.A.getStyle(this._intervalDiv,"width")/2+i.A.getStyle(this._scrollDiv,"marginLeft")/2:-i.A.outerWidth(this._scrollDiv)/2+i.A.getStyle(this._scrollDiv,"marginLeft")/2;break;case"end":s=this.get("interval")?i.A.getStyle(this._intervalDiv,"width")/2-i.A.getStyle(this._scrollDiv,"marginLeft")/2:i.A.outerWidth(this._scrollDiv)/2-i.A.getStyle(this._scrollDiv,"marginLeft")/2;break;default:s=0;break}var n=this._getDateFromOffset(this._getScrollLeft()+s);return n=this.roundDate(n,e),new Date(n)}_roundTo(t,e){return Math.round(t/e)*e}getStartDate(){return new Date(this.get("minDate"))}getEndDate(){return new Date(this.get("maxDate"))}};const o=a},53885:(t,e,s)=>{"use strict";s.d(e,{A:()=>wt});var n=s(4087),r=s(33942);class i{read(t){if(!t)return null;if("string"===typeof t){const e=(0,r.qg)(t);return this.readFromDocument(e)}return(0,r.wz)(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}readFromNode(t){(0,n.b0)()}}const a=i,o="http://www.w3.org/1999/xlink";function l(t){return t.getAttributeNS(o,"href")}function c(t){const e=(0,r.mT)(t,!1);return u(e)}function u(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function d(t){const e=(0,r.mT)(t,!1);return h(e)}function h(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function m(t){return(0,r.mT)(t,!1).trim()}const p=[null,"http://www.opengis.net/ows/1.1"],g=(0,r.Dm)(p,{ServiceIdentification:(0,r.kW)(P),ServiceProvider:(0,r.kW)(O),OperationsMetadata:(0,r.kW)(q)});class f extends a{constructor(){super()}readFromNode(t){const e=(0,r.eY)({},g,t,[]);return e||null}}const y=(0,r.Dm)(p,{DeliveryPoint:(0,r.kW)(m),City:(0,r.kW)(m),AdministrativeArea:(0,r.kW)(m),PostalCode:(0,r.kW)(m),Country:(0,r.kW)(m),ElectronicMailAddress:(0,r.kW)(m)}),D=(0,r.Dm)(p,{Value:(0,r.c4)(V)}),v=(0,r.Dm)(p,{AllowedValues:(0,r.kW)(F)}),w=(0,r.Dm)(p,{Phone:(0,r.kW)(R),Address:(0,r.kW)(W)}),k=(0,r.Dm)(p,{HTTP:(0,r.kW)(I)}),_=(0,r.Dm)(p,{Get:(0,r.c4)(E),Post:void 0}),b=(0,r.Dm)(p,{DCP:(0,r.kW)($)}),x=(0,r.Dm)(p,{Operation:Y}),S=(0,r.Dm)(p,{Voice:(0,r.kW)(m),Facsimile:(0,r.kW)(m)}),L=(0,r.Dm)(p,{Constraint:(0,r.c4)(C)}),T=(0,r.Dm)(p,{IndividualName:(0,r.kW)(m),PositionName:(0,r.kW)(m),ContactInfo:(0,r.kW)(M)}),A=(0,r.Dm)(p,{Abstract:(0,r.kW)(m),AccessConstraints:(0,r.kW)(m),Fees:(0,r.kW)(m),Title:(0,r.kW)(m),ServiceTypeVersion:(0,r.kW)(m),ServiceType:(0,r.kW)(m)}),N=(0,r.Dm)(p,{ProviderName:(0,r.kW)(m),ProviderSite:(0,r.kW)(l),ServiceContact:(0,r.kW)(j)});function W(t,e){return(0,r.eY)({},y,t,e)}function F(t,e){return(0,r.eY)({},D,t,e)}function C(t,e){const s=t.getAttribute("name");if(s)return(0,r.eY)({name:s},v,t,e)}function M(t,e){return(0,r.eY)({},w,t,e)}function $(t,e){return(0,r.eY)({},k,t,e)}function E(t,e){const s=l(t);if(s)return(0,r.eY)({href:s},L,t,e)}function I(t,e){return(0,r.eY)({},_,t,e)}function Y(t,e){const s=t.getAttribute("name"),n=(0,r.eY)({},b,t,e);if(!n)return;const i=e[e.length-1];i[s]=n}function q(t,e){return(0,r.eY)({},x,t,e)}function R(t,e){return(0,r.eY)({},S,t,e)}function P(t,e){return(0,r.eY)({},A,t,e)}function j(t,e){return(0,r.eY)({},T,t,e)}function O(t,e){return(0,r.eY)({},N,t,e)}function V(t,e){return m(t)}const B=f;var z=s(70915);const H=[null,"http://www.opengis.net/wmts/1.0"],U=[null,"http://www.opengis.net/ows/1.1"],Q=(0,r.Dm)(H,{Contents:(0,r.kW)(at)});class Z extends a{constructor(){super(),this.owsParser_=new B}readFromNode(t){let e=t.getAttribute("version");e&&(e=e.trim());let s=this.owsParser_.readFromNode(t);return s?(s["version"]=e,s=(0,r.eY)(s,Q,t,[]),s||null):null}}const G=(0,r.Dm)(H,{Layer:(0,r.c4)(ot),TileMatrixSet:(0,r.c4)(lt)}),K=(0,r.Dm)(H,{Style:(0,r.c4)(ct),Format:(0,r.c4)(m),TileMatrixSetLink:(0,r.c4)(ut),Dimension:(0,r.c4)(dt),ResourceURL:(0,r.c4)(ht)},(0,r.Dm)(U,{Title:(0,r.kW)(m),Abstract:(0,r.kW)(m),WGS84BoundingBox:(0,r.kW)(mt),BoundingBox:(0,r.c4)(pt),Identifier:(0,r.kW)(m)})),J=(0,r.Dm)(H,{LegendURL:(0,r.c4)(gt)},(0,r.Dm)(U,{Title:(0,r.kW)(m),Identifier:(0,r.kW)(m)})),X=(0,r.Dm)(H,{TileMatrixSet:(0,r.kW)(m),TileMatrixSetLimits:(0,r.kW)(Dt)}),tt=(0,r.Dm)(H,{TileMatrixLimits:(0,r.VT)(vt)}),et=(0,r.Dm)(H,{TileMatrix:(0,r.kW)(m),MinTileRow:(0,r.kW)(d),MaxTileRow:(0,r.kW)(d),MinTileCol:(0,r.kW)(d),MaxTileCol:(0,r.kW)(d)}),st=(0,r.Dm)(H,{Default:(0,r.kW)(m),Value:(0,r.c4)(m)},(0,r.Dm)(U,{Identifier:(0,r.kW)(m)})),nt=(0,r.Dm)(U,{LowerCorner:(0,r.VT)(ft),UpperCorner:(0,r.VT)(ft)}),rt=(0,r.Dm)(H,{WellKnownScaleSet:(0,r.kW)(m),TileMatrix:(0,r.c4)(yt)},(0,r.Dm)(U,{SupportedCRS:(0,r.kW)(m),Identifier:(0,r.kW)(m),BoundingBox:(0,r.kW)(mt)})),it=(0,r.Dm)(H,{TopLeftCorner:(0,r.kW)(ft),ScaleDenominator:(0,r.kW)(c),TileWidth:(0,r.kW)(d),TileHeight:(0,r.kW)(d),MatrixWidth:(0,r.kW)(d),MatrixHeight:(0,r.kW)(d)},(0,r.Dm)(U,{Identifier:(0,r.kW)(m)}));function at(t,e){return(0,r.eY)({},G,t,e)}function ot(t,e){return(0,r.eY)({},K,t,e)}function lt(t,e){return(0,r.eY)({},rt,t,e)}function ct(t,e){const s=(0,r.eY)({},J,t,e);if(!s)return;const n="true"===t.getAttribute("isDefault");return s["isDefault"]=n,s}function ut(t,e){return(0,r.eY)({},X,t,e)}function dt(t,e){return(0,r.eY)({},st,t,e)}function ht(t,e){const s=t.getAttribute("format"),n=t.getAttribute("template"),r=t.getAttribute("resourceType"),i={};return s&&(i["format"]=s),n&&(i["template"]=n),r&&(i["resourceType"]=r),i}function mt(t,e){const s=(0,r.eY)([],nt,t,e);if(2==s.length)return(0,z.Tr)(s)}function pt(t,e){const s=t.getAttribute("crs"),n=(0,r.eY)([],nt,t,e);if(2==n.length)return{extent:(0,z.Tr)(n),crs:s}}function gt(t,e){const s={};return s["format"]=t.getAttribute("format"),s["href"]=l(t),s}function ft(t,e){const s=m(t).split(/\s+/);if(!s||2!=s.length)return;const n=+s[0],r=+s[1];return isNaN(n)||isNaN(r)?void 0:[n,r]}function yt(t,e){return(0,r.eY)({},it,t,e)}function Dt(t,e){return(0,r.eY)([],tt,t,e)}function vt(t,e){return(0,r.eY)({},et,t,e)}const wt=Z},62611:()=>{},66684:function(t,e,s){
/*!
 * @kirtandesai/ol-geocoder - v5.0.3
 * A geocoder extension compatible with OpenLayers v7.
 * https://github.com/kirtan-desai/ol-geocoder
 * Built: Thu Nov 17 2022 14:58:35 GMT-0500 (Eastern Standard Time)
 */
!function(e,n){t.exports=n(s(10972),s(29276),s(49700),s(82986),s(54602),s(44294),s(86717),s(89718))}(0,function(t,e,s,n,r,i,a,o){"use strict";function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c=l(t),u=l(e),d=l(s),h=l(n),m=l(r),p=l(i),g=l(a),f=l(o),y="gcd-container",D="gcd-button-control",v="gcd-input-query",w="gcd-input-reset",k={namespace:"ol-geocoder",spin:"gcd-pseudo-rotate",hidden:"gcd-hidden",address:"gcd-address",country:"gcd-country",city:"gcd-city",road:"gcd-road",olControl:"ol-control",glass:{container:"gcd-gl-container",control:"gcd-gl-control",button:"gcd-gl-btn",input:"gcd-gl-input",expanded:"gcd-gl-expanded",reset:"gcd-gl-reset",result:"gcd-gl-result"},inputText:{container:"gcd-txt-container",control:"gcd-txt-control",input:"gcd-txt-input",reset:"gcd-txt-reset",icon:"gcd-txt-glass",result:"gcd-txt-result"}},_={containerId:y,buttonControlId:D,inputQueryId:v,inputResetId:w,cssClasses:k};const b=Object.freeze({__proto__:null,containerId:y,buttonControlId:D,inputQueryId:v,inputResetId:w,cssClasses:k,default:_}),x="addresschosen",S="nominatim",L="reverse",T="glass-button",A="text-input",N="osm",W="mapquest",F="photon",C="bing",M="opencage",$={provider:N,placeholder:"Search for an address",featureStyle:null,targetType:T,lang:"en-US",limit:5,keepOpen:!1,preventDefault:!1,autoComplete:!1,autoCompleteMinLength:2,autoCompleteTimeout:200,debug:!1};function E(t,e="Assertion failed"){if(!t){if("undefined"!=typeof Error)throw new Error(e);throw e}}function I(t){const e=function(){if("performance"in window==0&&(window.performance={}),"now"in window.performance==0){let t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=()=>Date.now()-t}return window.performance.now()}().toString(36);return t?t+e:e}function Y(t){return/^\d+$/u.test(t)}function q(t,e,s){if(Array.isArray(t))return void t.forEach(t=>q(t,e));const n=Array.isArray(e)?e:e.split(/\s+/u);let r=n.length;for(;r--;)P(t,n[r])||B(t,n[r],s)}function R(t,e,s){if(Array.isArray(t))return void t.forEach(t=>R(t,e,s));const n=Array.isArray(e)?e:e.split(/\s+/u);let r=n.length;for(;r--;)P(t,n[r])&&z(t,n[r],s)}function P(t,e){return t.classList?t.classList.contains(e):V(e).test(t.className)}function j(t,e){return t.replace(/\{\s*([\w-]+)\s*\}/gu,(t,s)=>{const n=void 0===e[s]?"":e[s];return String(n).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")})}function O(t,e){let s;if(Array.isArray(t)){if(s=document.createElement(t[0]),t[1].id&&(s.id=t[1].id),t[1].classname&&(s.className=t[1].classname),t[1].attr){const{attr:e}=t[1];if(Array.isArray(e)){let t=-1;for(;++t<e.length;)s.setAttribute(e[t].name,e[t].value)}else s.setAttribute(e.name,e.value)}}else s=document.createElement(t);s.innerHTML=e;const n=document.createDocumentFragment();for(;s.childNodes[0];)n.append(s.childNodes[0]);return s.append(n),s}function V(t){return new RegExp(`(^|\\s+) ${t} (\\s+|$)`,"u")}function B(t,e,s){t.classList?t.classList.add(e):t.className=`${t.className} ${e}`.trim(),s&&Y(s)&&window.setTimeout(()=>z(t,e),s)}function z(t,e,s){t.classList?t.classList.remove(e):t.className=t.className.replace(V(e)," ").trim(),s&&Y(s)&&window.setTimeout(()=>B(t,e),s)}const H=b.cssClasses;class U{constructor(t){this.options=t,this.els=this.createControl()}createControl(){let t,e,s;return this.options.targetType===A?(e=`${H.namespace} ${H.inputText.container}`,t=O(["div",{id:b.containerId,classname:e}],U.input),s={container:t,control:t.querySelector(`.${H.inputText.control}`),input:t.querySelector(`.${H.inputText.input}`),reset:t.querySelector(`.${H.inputText.reset}`),result:t.querySelector(`.${H.inputText.result}`)}):(e=`${H.namespace} ${H.glass.container}`,t=O(["div",{id:b.containerId,classname:e}],U.glass),s={container:t,control:t.querySelector(`.${H.glass.control}`),button:t.querySelector(`.${H.glass.button}`),input:t.querySelector(`.${H.glass.input}`),reset:t.querySelector(`.${H.glass.reset}`),result:t.querySelector(`.${H.glass.result}`)}),s.input.placeholder=this.options.placeholder,s}}U.glass=`\n  <div class="${H.glass.control} ${H.olControl}">\n    <button type="button" id="${b.buttonControlId}" class="${H.glass.button}"></button>\n    <input type="text" id="${b.inputQueryId}" class="${H.glass.input}" autocomplete="off" placeholder="Search ...">\n    <a id="${b.inputResetId}" class="${H.glass.reset} ${H.hidden}"></a>\n  </div>\n  <ul class="${H.glass.result}"></ul>\n`,U.input=`\n  <div class="${H.inputText.control}">\n    <input type="text" id="${b.inputQueryId}" class="${H.inputText.input}" autocomplete="off" placeholder="Search ...">\n    <span class="${H.inputText.icon}"></span>\n    <button type="button" id="${b.inputResetId}" class="${H.inputText.reset} ${H.hidden}"></button>\n  </div>\n  <ul class="${H.inputText.result}"></ul>\n`;class Q{constructor(){this.settings={url:"https://photon.komoot.io/api/",params:{q:"",limit:10,lang:"en"},langs:["de","it","fr","en"]}}getParameters(t){return t.lang=t.lang.toLowerCase(),{url:this.settings.url,params:{q:t.query,limit:t.limit||this.settings.params.limit,lang:this.settings.langs.includes(t.lang)?t.lang:this.settings.params.lang}}}handleResponse(t){return 0===t.features.length?[]:t.features.map(t=>({lon:t.geometry.coordinates[0],lat:t.geometry.coordinates[1],address:{name:t.properties.name,postcode:t.properties.postcode,city:t.properties.city,state:t.properties.state,country:t.properties.country},original:{formatted:t.properties.name,details:t.properties}}))}}class Z{constructor(){this.settings={url:"https://nominatim.openstreetmap.org/search/",params:{q:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}}getParameters(t){return{url:this.settings.url,params:{q:t.query,format:this.settings.params.format,addressdetails:this.settings.params.addressdetails,limit:t.limit||this.settings.params.limit,countrycodes:t.countrycodes||this.settings.params.countrycodes,"accept-language":t.lang||this.settings.params["accept-language"]}}}handleResponse(t){return 0===t.length?[]:t.map(t=>({lon:t.lon,lat:t.lat,bbox:t.boundingbox,address:{name:t.display_name,road:t.address.road||"",houseNumber:t.address.house_number||"",postcode:t.address.postcode,city:t.address.city||t.address.town,state:t.address.state,country:t.address.country},original:{formatted:t.display_name,details:t.address}}))}}class G{constructor(){this.settings={url:"https://open.mapquestapi.com/nominatim/v1/search.php",params:{q:"",key:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}}getParameters(t){return{url:this.settings.url,params:{q:t.query,key:t.key,format:"json",addressdetails:1,limit:t.limit||this.settings.params.limit,countrycodes:t.countrycodes||this.settings.params.countrycodes,"accept-language":t.lang||this.settings.params["accept-language"]}}}handleResponse(t){return 0===t.length?[]:t.map(t=>({lon:t.lon,lat:t.lat,address:{name:t.address.neighbourhood||"",road:t.address.road||"",postcode:t.address.postcode,city:t.address.city||t.address.town,state:t.address.state,country:t.address.country},original:{formatted:t.display_name,details:t.address}}))}}class K{constructor(){this.settings={url:"https://dev.virtualearth.net/REST/v1/Locations",callbackName:"jsonp",params:{query:"",key:"",includeNeighborhood:0,maxResults:10}}}getParameters(t){return{url:this.settings.url,callbackName:this.settings.callbackName,params:{query:t.query,key:t.key,includeNeighborhood:t.includeNeighborhood||this.settings.params.includeNeighborhood,maxResults:t.maxResults||this.settings.params.maxResults}}}handleResponse(t){const{resources:e}=t.resourceSets[0];return 0===e.length?[]:e.map(t=>({lon:t.point.coordinates[1],lat:t.point.coordinates[0],address:{name:t.name},original:{formatted:t.address.formattedAddress,details:t.address}}))}}class J{constructor(){this.settings={url:"https://api.opencagedata.com/geocode/v1/json?",params:{q:"",key:"",limit:10,countrycode:"",pretty:1,no_annotations:1}}}getParameters(t){return{url:this.settings.url,params:{q:t.query,key:t.key,limit:t.limit||this.settings.params.limit,countrycode:t.countrycodes||this.settings.params.countrycodes}}}handleResponse(t){return 0===t.results.length?[]:t.results.map(t=>({lon:t.geometry.lng,lat:t.geometry.lat,address:{name:t.components.house_number||"",road:t.components.road||"",postcode:t.components.postcode,city:t.components.city||t.components.town,state:t.components.state,country:t.components.country},original:{formatted:t.formatted,details:t.components}}))}}function X(t){return new Promise((e,s)=>{const n=function(t,e){return e&&"object"==typeof e&&(t+=(/\?/u.test(t)?"&":"?")+tt(e)),t}(t.url,t.data),r={method:"GET",mode:"cors",credentials:"same-origin"};t.jsonp?function(t,e,s){const{head:n}=document,r=document.createElement("script"),i=`f${Math.round(Math.random()*Date.now())}`;r.setAttribute("src",`${t+(t.indexOf("?")>0?"&":"?")+e}=${i}`),window[i]=t=>{window[i]=void 0,setTimeout(()=>n.removeChild(r),0),s(t)},n.append(r)}(n,t.callbackName,e):fetch(n,r).then(t=>t.json()).then(e).catch(s)})}function tt(t){return Object.keys(t).reduce((e,s)=>(e.push("object"==typeof t[s]?tt(t[s]):`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`),e),[]).join("&")}const et=b.cssClasses;class st{constructor(t,e){this.Base=t,this.layerName=I("geocoder-layer-"),this.layer=new h.default({name:this.layerName,source:new m.default}),this.options=t.options,this.options.provider="string"==typeof this.options.provider?this.options.provider.toLowerCase():this.options.provider,this.provider=this.newProvider(),this.els=e,this.lastQuery="",this.container=this.els.container,this.registeredListeners={mapClick:!1},this.setListeners()}setListeners(){let t,e;const s=t=>{t.stopPropagation(),P(this.els.control,et.glass.expanded)?this.collapse():this.expand()};this.els.input.addEventListener("keypress",t=>{const e=t.target.value.trim();(t.key?"Enter"===t.key:t.which?13===t.which:t.keyCode&&13===t.keyCode)&&(t.preventDefault(),this.query(e))},!1),this.els.input.addEventListener("click",t=>t.stopPropagation(),!1),this.els.input.addEventListener("input",s=>{const n=s.target.value.trim();0!==n.length?R(this.els.reset,et.hidden):q(this.els.reset,et.hidden),this.options.autoComplete&&n!==e&&(e=n,t&&clearTimeout(t),t=setTimeout(()=>{n.length>=this.options.autoCompleteMinLength&&this.query(n)},this.options.autoCompleteTimeout))},!1),this.els.reset.addEventListener("click",t=>{this.els.input.focus(),this.els.input.value="",this.lastQuery="",q(this.els.reset,et.hidden),this.clearResults()},!1),this.options.targetType===T&&this.els.button.addEventListener("click",s,!1)}query(t){this.provider||(this.provider=this.newProvider());const e=this.provider.getParameters({query:t,key:this.options.key,lang:this.options.lang,countrycodes:this.options.countrycodes,limit:this.options.limit});if(this.lastQuery===t&&this.els.result.firstChild)return;this.lastQuery=t,this.clearResults(),q(this.els.reset,et.spin);const s={url:e.url,data:e.params};e.callbackName&&(s.jsonp=!0,s.callbackName=e.callbackName),X(s).then(t=>{this.options.debug&&console.info(t),R(this.els.reset,et.spin);const e=this.provider.handleResponse(t);e&&(this.createList(e),this.listenMapClick())}).catch(t=>{R(this.els.reset,et.spin);const e=O("li","<h5>Error! No internet connection?</h5>");this.els.result.append(e)})}createList(t){const e=this.els.result;t.forEach(t=>{let s;s=this.options.provider===N?`<span class="${et.road}">${t.address.name}</span>`:this.addressTemplate(t.address);const n=O("li",`<a href="#">${s}</a>`);n.addEventListener("click",e=>{e.preventDefault(),this.chosen(t,s,t.address,t.original)},!1),e.append(n)})}chosen(t,e,s,n){const r=this.Base.getMap(),i=[Number.parseFloat(t.lon),Number.parseFloat(t.lat)],a=r.getView().getProjection(),o=f.default.transform(i,"EPSG:4326",a);let{bbox:l}=t;l&&(l=f.default.transformExtent([l[2],l[1],l[3],l[0]],"EPSG:4326",a));const c={formatted:e,details:s,original:n};if(!1===this.options.keepOpen&&this.clearResults(!0),!0===this.options.preventDefault)this.Base.dispatchEvent({type:x,address:c,coordinate:o,bbox:l,place:t});else{l?r.getView().fit(l,{duration:500}):function(t,e,s=500,n=2.388657133911758){t.getView().animate({duration:s,resolution:n},{duration:s,center:e})}(r,o);const e=this.createFeature(o,c);this.Base.dispatchEvent({type:x,address:c,feature:e,coordinate:o,bbox:l,place:t})}}createFeature(t){const e=new g.default(new p.default(t));return this.addLayer(),e.setStyle(this.options.featureStyle),e.setId(I("geocoder-ft-")),this.getSource().addFeature(e),e}addressTemplate(t){const e=[];return t.name&&e.push(['<span class="',et.road,'">{name}</span>'].join("")),(t.road||t.building||t.house_number)&&e.push(['<span class="',et.road,'">{building} {road} {house_number}</span>'].join("")),(t.city||t.town||t.village)&&e.push(['<span class="',et.city,'">{postcode} {city} {town} {village}</span>'].join("")),(t.state||t.country)&&e.push(['<span class="',et.country,'">{state} {country}</span>'].join("")),j(e.join("<br>"),t)}newProvider(){switch(this.options.provider){case N:return new Z;case W:return new G;case F:return new Q;case C:return new K;case M:return new J;default:return this.options.provider}}expand(){R(this.els.input,et.spin),q(this.els.control,et.glass.expanded),window.setTimeout(()=>this.els.input.focus(),100),this.listenMapClick()}collapse(){this.els.input.value="",this.els.input.blur(),q(this.els.reset,et.hidden),R(this.els.control,et.glass.expanded),this.clearResults()}listenMapClick(){if(this.registeredListeners.mapClick)return;const t=this,e=this.Base.getMap().getTargetElement();this.registeredListeners.mapClick=!0,e.addEventListener("click",{handleEvent(s){t.clearResults(!0),e.removeEventListener(s.type,this,!1),t.registeredListeners.mapClick=!1}},!1)}clearResults(t){t&&this.options.targetType===T?this.collapse():function(t){for(;t.firstChild;)t.firstChild.remove()}(this.els.result)}getSource(){return this.layer.getSource()}addLayer(){let t=!1;const e=this.Base.getMap();e.getLayers().forEach(e=>{e===this.layer&&(t=!0)}),t||e.addLayer(this.layer)}}class nt extends c.default{constructor(t=S,e={}){let s,n;E("string"==typeof t,"@param `type` should be string!"),E(t===S||t===L,`@param 'type' should be '${S}'\n      or '${L}'!`),E("object"==typeof e,"@param `options` should be object!"),$.featureStyle=[new u.default({image:new d.default({scale:.7,src:"//cdn.rawgit.com/jonataswalker/map-utils/master/images/marker.png"})})];const r=new U(e);if(t===S&&(s=r.els.container),super({element:s}),!(this instanceof nt))return new nt;this.options=function(t,e){const s={};return Object.keys(t).forEach(e=>{Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])}),Object.keys(e).forEach(t=>{Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])}),s}($,e),this.container=s,t===S&&(n=new st(this,r.els),this.layer=n.layer)}getLayer(){return this.layer}getSource(){return this.getLayer().getSource()}setProvider(t){this.options.provider=t}setProviderKey(t){this.options.key=t}}return nt})},99590:(t,e,s)=>{"use strict";var n=s(91291),r=RangeError;t.exports=function(t){var e=n(t);if(e<0)throw new r("The argument can't be less than 0");return e}}}]);
//# sourceMappingURL=9873.77c87301.js.map
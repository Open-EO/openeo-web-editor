{"version":3,"file":"js/1160.70bc40fb.js","mappings":"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","sources":["webpack://@openeo/web-editor/./node_modules/earcut/src/earcut.js","webpack://@openeo/web-editor/./node_modules/color-parse/node_modules/color-name/index.js","webpack://@openeo/web-editor/./node_modules/color-parse/index.js","webpack://@openeo/web-editor/./node_modules/color-space/hsl.js","webpack://@openeo/web-editor/./node_modules/color-rgba/index.js","webpack://@openeo/web-editor/./node_modules/color-space/luv.js","webpack://@openeo/web-editor/./node_modules/color-space/lchuv.js","webpack://@openeo/web-editor/./node_modules/color-space/rgb.js","webpack://@openeo/web-editor/./node_modules/color-space/xyz.js","webpack://@openeo/web-editor/./node_modules/ol-ext/control/LayerSwitcher.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Base.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Checkbox.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Switch.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Radio.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/element.js","webpack://@openeo/web-editor/./node_modules/ol/Collection.js","webpack://@openeo/web-editor/./node_modules/ol/CollectionEventType.js","webpack://@openeo/web-editor/./node_modules/ol/DataTile.js","webpack://@openeo/web-editor/./node_modules/ol/Disposable.js","webpack://@openeo/web-editor/./node_modules/ol/Feature.js","webpack://@openeo/web-editor/./node_modules/ol/Image.js","webpack://@openeo/web-editor/./node_modules/ol/ImageState.js","webpack://@openeo/web-editor/./node_modules/ol/ImageTile.js","webpack://@openeo/web-editor/./node_modules/ol/Kinetic.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEvent.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEventHandler.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEventType.js","webpack://@openeo/web-editor/./node_modules/ol/MapEvent.js","webpack://@openeo/web-editor/./node_modules/ol/MapEventType.js","webpack://@openeo/web-editor/./node_modules/ol/MapProperty.js"],"sourcesContent":["'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","export default {\n\taliceblue: [240, 248, 255],\n\tantiquewhite: [250, 235, 215],\n\taqua: [0, 255, 255],\n\taquamarine: [127, 255, 212],\n\tazure: [240, 255, 255],\n\tbeige: [245, 245, 220],\n\tbisque: [255, 228, 196],\n\tblack: [0, 0, 0],\n\tblanchedalmond: [255, 235, 205],\n\tblue: [0, 0, 255],\n\tblueviolet: [138, 43, 226],\n\tbrown: [165, 42, 42],\n\tburlywood: [222, 184, 135],\n\tcadetblue: [95, 158, 160],\n\tchartreuse: [127, 255, 0],\n\tchocolate: [210, 105, 30],\n\tcoral: [255, 127, 80],\n\tcornflowerblue: [100, 149, 237],\n\tcornsilk: [255, 248, 220],\n\tcrimson: [220, 20, 60],\n\tcyan: [0, 255, 255],\n\tdarkblue: [0, 0, 139],\n\tdarkcyan: [0, 139, 139],\n\tdarkgoldenrod: [184, 134, 11],\n\tdarkgray: [169, 169, 169],\n\tdarkgreen: [0, 100, 0],\n\tdarkgrey: [169, 169, 169],\n\tdarkkhaki: [189, 183, 107],\n\tdarkmagenta: [139, 0, 139],\n\tdarkolivegreen: [85, 107, 47],\n\tdarkorange: [255, 140, 0],\n\tdarkorchid: [153, 50, 204],\n\tdarkred: [139, 0, 0],\n\tdarksalmon: [233, 150, 122],\n\tdarkseagreen: [143, 188, 143],\n\tdarkslateblue: [72, 61, 139],\n\tdarkslategray: [47, 79, 79],\n\tdarkslategrey: [47, 79, 79],\n\tdarkturquoise: [0, 206, 209],\n\tdarkviolet: [148, 0, 211],\n\tdeeppink: [255, 20, 147],\n\tdeepskyblue: [0, 191, 255],\n\tdimgray: [105, 105, 105],\n\tdimgrey: [105, 105, 105],\n\tdodgerblue: [30, 144, 255],\n\tfirebrick: [178, 34, 34],\n\tfloralwhite: [255, 250, 240],\n\tforestgreen: [34, 139, 34],\n\tfuchsia: [255, 0, 255],\n\tgainsboro: [220, 220, 220],\n\tghostwhite: [248, 248, 255],\n\tgold: [255, 215, 0],\n\tgoldenrod: [218, 165, 32],\n\tgray: [128, 128, 128],\n\tgreen: [0, 128, 0],\n\tgreenyellow: [173, 255, 47],\n\tgrey: [128, 128, 128],\n\thoneydew: [240, 255, 240],\n\thotpink: [255, 105, 180],\n\tindianred: [205, 92, 92],\n\tindigo: [75, 0, 130],\n\tivory: [255, 255, 240],\n\tkhaki: [240, 230, 140],\n\tlavender: [230, 230, 250],\n\tlavenderblush: [255, 240, 245],\n\tlawngreen: [124, 252, 0],\n\tlemonchiffon: [255, 250, 205],\n\tlightblue: [173, 216, 230],\n\tlightcoral: [240, 128, 128],\n\tlightcyan: [224, 255, 255],\n\tlightgoldenrodyellow: [250, 250, 210],\n\tlightgray: [211, 211, 211],\n\tlightgreen: [144, 238, 144],\n\tlightgrey: [211, 211, 211],\n\tlightpink: [255, 182, 193],\n\tlightsalmon: [255, 160, 122],\n\tlightseagreen: [32, 178, 170],\n\tlightskyblue: [135, 206, 250],\n\tlightslategray: [119, 136, 153],\n\tlightslategrey: [119, 136, 153],\n\tlightsteelblue: [176, 196, 222],\n\tlightyellow: [255, 255, 224],\n\tlime: [0, 255, 0],\n\tlimegreen: [50, 205, 50],\n\tlinen: [250, 240, 230],\n\tmagenta: [255, 0, 255],\n\tmaroon: [128, 0, 0],\n\tmediumaquamarine: [102, 205, 170],\n\tmediumblue: [0, 0, 205],\n\tmediumorchid: [186, 85, 211],\n\tmediumpurple: [147, 112, 219],\n\tmediumseagreen: [60, 179, 113],\n\tmediumslateblue: [123, 104, 238],\n\tmediumspringgreen: [0, 250, 154],\n\tmediumturquoise: [72, 209, 204],\n\tmediumvioletred: [199, 21, 133],\n\tmidnightblue: [25, 25, 112],\n\tmintcream: [245, 255, 250],\n\tmistyrose: [255, 228, 225],\n\tmoccasin: [255, 228, 181],\n\tnavajowhite: [255, 222, 173],\n\tnavy: [0, 0, 128],\n\toldlace: [253, 245, 230],\n\tolive: [128, 128, 0],\n\tolivedrab: [107, 142, 35],\n\torange: [255, 165, 0],\n\torangered: [255, 69, 0],\n\torchid: [218, 112, 214],\n\tpalegoldenrod: [238, 232, 170],\n\tpalegreen: [152, 251, 152],\n\tpaleturquoise: [175, 238, 238],\n\tpalevioletred: [219, 112, 147],\n\tpapayawhip: [255, 239, 213],\n\tpeachpuff: [255, 218, 185],\n\tperu: [205, 133, 63],\n\tpink: [255, 192, 203],\n\tplum: [221, 160, 221],\n\tpowderblue: [176, 224, 230],\n\tpurple: [128, 0, 128],\n\trebeccapurple: [102, 51, 153],\n\tred: [255, 0, 0],\n\trosybrown: [188, 143, 143],\n\troyalblue: [65, 105, 225],\n\tsaddlebrown: [139, 69, 19],\n\tsalmon: [250, 128, 114],\n\tsandybrown: [244, 164, 96],\n\tseagreen: [46, 139, 87],\n\tseashell: [255, 245, 238],\n\tsienna: [160, 82, 45],\n\tsilver: [192, 192, 192],\n\tskyblue: [135, 206, 235],\n\tslateblue: [106, 90, 205],\n\tslategray: [112, 128, 144],\n\tslategrey: [112, 128, 144],\n\tsnow: [255, 250, 250],\n\tspringgreen: [0, 255, 127],\n\tsteelblue: [70, 130, 180],\n\ttan: [210, 180, 140],\n\tteal: [0, 128, 128],\n\tthistle: [216, 191, 216],\n\ttomato: [255, 99, 71],\n\tturquoise: [64, 224, 208],\n\tviolet: [238, 130, 238],\n\twheat: [245, 222, 179],\n\twhite: [255, 255, 255],\n\twhitesmoke: [245, 245, 245],\n\tyellow: [255, 255, 0],\n\tyellowgreen: [154, 205, 50]\n}\n","/**\n * @module color-parse\n */\nimport names from 'color-name'\n\nexport default parse\n\n/**\n * Base hues\n * http://dev.w3.org/csswg/css-color/#typedef-named-hue\n */\n//FIXME: use external hue detector\nvar baseHues = {\n\tred: 0,\n\torange: 60,\n\tyellow: 120,\n\tgreen: 180,\n\tblue: 240,\n\tpurple: 300\n}\n\n/**\n * Parse color from the string passed\n *\n * @return {Object} A space indicator `space`, an array `values` and `alpha`\n */\nfunction parse(cstr) {\n\tvar m, parts = [], alpha = 1, space\n\n\t//numeric case\n\tif (typeof cstr === 'number') {\n\t\treturn { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\t}\n\tif (typeof cstr === 'number') return { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\n\tcstr = String(cstr).toLowerCase();\n\n\t//keyword\n\tif (names[cstr]) {\n\t\tparts = names[cstr].slice()\n\t\tspace = 'rgb'\n\t}\n\n\t//reserved words\n\telse if (cstr === 'transparent') {\n\t\talpha = 0\n\t\tspace = 'rgb'\n\t\tparts = [0, 0, 0]\n\t}\n\n\t//hex\n\telse if (cstr[0] === '#') {\n\t\tvar base = cstr.slice(1)\n\t\tvar size = base.length\n\t\tvar isShort = size <= 4\n\t\talpha = 1\n\n\t\tif (isShort) {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[0], 16),\n\t\t\t\tparseInt(base[1] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[2], 16)\n\t\t\t]\n\t\t\tif (size === 4) {\n\t\t\t\talpha = parseInt(base[3] + base[3], 16) / 255\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[3], 16),\n\t\t\t\tparseInt(base[4] + base[5], 16)\n\t\t\t]\n\t\t\tif (size === 8) {\n\t\t\t\talpha = parseInt(base[6] + base[7], 16) / 255\n\t\t\t}\n\t\t}\n\n\t\tif (!parts[0]) parts[0] = 0\n\t\tif (!parts[1]) parts[1] = 0\n\t\tif (!parts[2]) parts[2] = 0\n\n\t\tspace = 'rgb'\n\t}\n\n\t// color space\n\telse if (m = /^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\\s*\\(([^\\)]*)\\)/.exec(cstr)) {\n\t\tvar name = m[1]\n\t\tspace = name.replace(/a$/, '')\n\t\tvar dims = space === 'cmyk' ? 4 : space === 'gray' ? 1 : 3\n\t\tparts = m[2].trim().split(/\\s*[,\\/]\\s*|\\s+/)\n\n\t\t// color(srgb-linear x x x) -> srgb-linear(x x x)\n\t\tif (space === 'color') space = parts.shift()\n\n\t\tparts = parts.map(function (x, i) {\n\t\t\t//<percentage>\n\t\t\tif (x[x.length - 1] === '%') {\n\t\t\t\tx = parseFloat(x) / 100\n\t\t\t\t// alpha -> 0..1\n\t\t\t\tif (i === 3) return x\n\t\t\t\t// rgb -> 0..255\n\t\t\t\tif (space === 'rgb') return x * 255\n\t\t\t\t// hsl, hwb H -> 0..100\n\t\t\t\tif (space[0] === 'h') return x * 100\n\t\t\t\t// lch, lab L -> 0..100\n\t\t\t\tif (space[0] === 'l' && !i) return x * 100\n\t\t\t\t// lab A B -> -125..125\n\t\t\t\tif (space === 'lab') return x * 125\n\t\t\t\t// lch C -> 0..150, H -> 0..360\n\t\t\t\tif (space === 'lch') return i < 2 ? x * 150 : x * 360\n\t\t\t\t// oklch/oklab L -> 0..1\n\t\t\t\tif (space[0] === 'o' && !i) return x\n\t\t\t\t// oklab A B -> -0.4..0.4\n\t\t\t\tif (space === 'oklab') return x * 0.4\n\t\t\t\t// oklch C -> 0..0.4, H -> 0..360\n\t\t\t\tif (space === 'oklch') return i < 2 ? x * 0.4 : x * 360\n\t\t\t\t// color(xxx) -> 0..1\n\t\t\t\treturn x\n\t\t\t}\n\n\t\t\t//hue\n\t\t\tif (space[i] === 'h' || (i === 2 && space[space.length - 1] === 'h')) {\n\t\t\t\t//<base-hue>\n\t\t\t\tif (baseHues[x] !== undefined) return baseHues[x]\n\t\t\t\t//<deg>\n\t\t\t\tif (x.endsWith('deg')) return parseFloat(x)\n\t\t\t\t//<turn>\n\t\t\t\tif (x.endsWith('turn')) return parseFloat(x) * 360\n\t\t\t\tif (x.endsWith('grad')) return parseFloat(x) * 360 / 400\n\t\t\t\tif (x.endsWith('rad')) return parseFloat(x) * 180 / Math.PI\n\t\t\t}\n\t\t\tif (x === 'none') return 0\n\t\t\treturn parseFloat(x)\n\t\t});\n\n\t\talpha = parts.length > dims ? parts.pop() : 1\n\t}\n\n\t//named channels case\n\telse if (/[0-9](?:\\s|\\/|,)/.test(cstr)) {\n\t\tparts = cstr.match(/([0-9]+)/g).map(function (value) {\n\t\t\treturn parseFloat(value)\n\t\t})\n\n\t\tspace = cstr.match(/([a-z])/ig)?.join('')?.toLowerCase() || 'rgb'\n\t}\n\n\treturn {\n\t\tspace,\n\t\tvalues: parts,\n\t\talpha\n\t}\n}\n","/**\n * @module color-space/hsl\n */\nimport rgb from './rgb.js';\n\nexport default {\n\tname: 'hsl',\n\tmin: [0,0,0],\n\tmax: [360,100,100],\n\tchannel: ['hue', 'saturation', 'lightness'],\n\talias: ['HSL'],\n\n\trgb: function(hsl) {\n\t\tvar h = hsl[0]/360, s = hsl[1]/100, l = hsl[2]/100, t1, t2, t3, rgb, val, i=0;\n\n\t\tif (s === 0) return val = l * 255, [val, val, val];\n\n\t\tt2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\tt1 = 2 * l - t2;\n\n\t\trgb = [0, 0, 0];\n\t\tfor (;i<3;) {\n\t\t\tt3 = h + 1 / 3 * - (i - 1);\n\t\t\tt3 < 0 ? t3++ : t3 > 1 && t3--;\n\t\t\tval = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 :\n\t\t\t2 * t3 < 1 ? t2 :\n\t\t\t3 * t3 < 2 ?  t1 + (t2 - t1) * (2 / 3 - t3) * 6 :\n\t\t\tt1;\n\t\t\trgb[i++] = val * 255;\n\t\t}\n\n\t\treturn rgb;\n\t}\n};\n\n\n//extend rgb\nrgb.hsl = function(rgb) {\n\tvar r = rgb[0]/255,\n\t\t\tg = rgb[1]/255,\n\t\t\tb = rgb[2]/255,\n\t\t\tmin = Math.min(r, g, b),\n\t\t\tmax = Math.max(r, g, b),\n\t\t\tdelta = max - min,\n\t\t\th, s, l;\n\n\tif (max === min) {\n\t\th = 0;\n\t}\n\telse if (r === max) {\n\t\th = (g - b) / delta;\n\t}\n\telse if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t}\n\telse if (b === max) {\n\t\th = 4 + (r - g)/ delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t}\n\telse if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t}\n\telse {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n","/** @module  color-rgba */\nimport parse from 'color-parse'\nimport rgb from 'color-space/rgb.js'\nimport hsl from 'color-space/hsl.js'\n\nexport default function rgba(color) {\n\t// template literals\n\tif (Array.isArray(color) && color.raw) color = String.raw(...arguments)\n\tif (color instanceof Number) color = +color\n\n\tvar values, i, l\n\n\t//attempt to parse non-array arguments\n\tvar parsed = parse(color)\n\n\tif (!parsed.space) return []\n\n\tconst min = parsed.space[0] === 'h' ? hsl.min : rgb.min\n\tconst max = parsed.space[0] === 'h' ? hsl.max : rgb.max\n\n\tvalues = Array(3)\n\tvalues[0] = Math.min(Math.max(parsed.values[0], min[0]), max[0])\n\tvalues[1] = Math.min(Math.max(parsed.values[1], min[1]), max[1])\n\tvalues[2] = Math.min(Math.max(parsed.values[2], min[2]), max[2])\n\n\tif (parsed.space[0] === 'h') {\n\t\tvalues = hsl.rgb(values)\n\t}\n\n\tvalues.push(Math.min(Math.max(parsed.alpha, 0), 1))\n\n\treturn values\n}\n","/**\n * CIE LUV (C'est la vie)\n *\n * @module color-space/luv\n */\n import xyz from './xyz.js';\n\nexport default {\n\tname: 'luv',\n\t//NOTE: luv has no rigidly defined limits\n\t//easyrgb fails to get proper coords\n\t//boronine states no rigid limits\n\t//colorMine refers this ones:\n\tmin: [0,-134,-140],\n\tmax: [100,224,122],\n\tchannel: ['lightness', 'u', 'v'],\n\talias: ['LUV', 'cieluv', 'cie1976'],\n\n\txyz: function(arg, i, o){\n\t\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\t\tl = arg[0], u = arg[1], v = arg[2];\n\n\t\tif (l === 0) return [0,0,0];\n\n\t\t//get constants\n\t\t//var e = 0.008856451679035631; //(6/29)^3\n\t\tvar k = 0.0011070564598794539; //(3/29)^3\n\n\t\t//get illuminant/observer\n\t\ti = i || 'D65';\n\t\to = o || 2;\n\n\t\txn = xyz.whitepoint[o][i][0];\n\t\tyn = xyz.whitepoint[o][i][1];\n\t\tzn = xyz.whitepoint[o][i][2];\n\n\t\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\t\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\t\t// un = 0.19783000664283;\n\t\t// vn = 0.46831999493879;\n\n\n\t\t_u = u / (13 * l) + un || 0;\n\t\t_v = v / (13 * l) + vn || 0;\n\n\t\ty = l > 8 ? yn * Math.pow( (l + 16) / 116 , 3) : yn * l * k;\n\n\t\t//wikipedia method\n\t\tx = y * 9 * _u / (4 * _v) || 0;\n\t\tz = y * (12 - 3 * _u - 20 * _v) / (4 * _v) || 0;\n\n\t\t//boronine method\n\t\t//https://github.com/boronine/husl/blob/master/husl.coffee#L201\n\t\t// x = 0 - (9 * y * _u) / ((_u - 4) * _v - _u * _v);\n\t\t// z = (9 * y - (15 * _v * y) - (_v * x)) / (3 * _v);\n\n\t\treturn [x, y, z];\n\t}\n};\n\n// http://www.brucelindbloom.com/index.html?Equations.html\n// https://github.com/boronine/husl/blob/master/husl.coffee\n//i - illuminant\n//o - observer\nxyz.luv = function(arg, i, o) {\n\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\n\t//get constants\n\tvar e = 0.008856451679035631; //(6/29)^3\n\tvar k = 903.2962962962961; //(29/3)^3\n\n\t//get illuminant/observer coords\n\ti = i || 'D65';\n\to = o || 2;\n\n\txn = xyz.whitepoint[o][i][0];\n\tyn = xyz.whitepoint[o][i][1];\n\tzn = xyz.whitepoint[o][i][2];\n\n\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\n\n\tx = arg[0], y = arg[1], z = arg[2];\n\n\n\t_u = (4 * x) / (x + (15 * y) + (3 * z)) || 0;\n\t_v = (9 * y) / (x + (15 * y) + (3 * z)) || 0;\n\n\tvar yr = y/yn;\n\n\tl = yr <= e ? k * yr : 116 * Math.pow(yr, 1/3) - 16;\n\n\tu = 13 * l * (_u - un);\n\tv = 13 * l * (_v - vn);\n\n\treturn [l, u, v];\n};\n","/**\n * Cylindrical CIE LUV\n *\n * @module color-space/lchuv\n */\nimport luv from './luv.js';\nimport xyz from './xyz.js';\n\n//cylindrical luv\nvar lchuv = {\n\tname: 'lchuv',\n\tchannel: ['lightness', 'chroma', 'hue'],\n\talias: ['LCHuv', 'cielchuv'],\n\tmin: [0,0,0],\n\tmax: [100,100,360],\n\n\tluv: function(luv){\n\t\tvar l = luv[0],\n\t\tc = luv[1],\n\t\th = luv[2],\n\t\tu, v, hr;\n\n\t\thr = h / 360 * 2 * Math.PI;\n\t\tu = c * Math.cos(hr);\n\t\tv = c * Math.sin(hr);\n\t\treturn [l, u, v];\n\t},\n\n\txyz: function(arg) {\n\t\treturn luv.xyz(lchuv.luv(arg));\n\t}\n};\n\nexport default lchuv;\n\nluv.lchuv = function(luv){\n\tvar l = luv[0], u = luv[1], v = luv[2];\n\n\tvar c = Math.sqrt(u*u + v*v);\n\tvar hr = Math.atan2(v,u);\n\tvar h = hr * 360 / 2 / Math.PI;\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\treturn [l,c,h]\n};\n\nxyz.lchuv = function(arg){\n  return luv.lchuv(xyz.luv(arg));\n};\n","/**\n * RGB space.\n *\n * @module  color-space/rgb\n */\n\nexport default {\n\tname: 'rgb',\n\tmin: [0,0,0],\n\tmax: [255,255,255],\n\tchannel: ['red', 'green', 'blue'],\n\talias: ['RGB']\n};\n","/**\n * CIE XYZ\n *\n * @module  color-space/xyz\n */\nimport rgb from './rgb.js';\n\nvar xyz = {\n\tname: 'xyz',\n\tmin: [0,0,0],\n\tchannel: ['X','Y','Z'],\n\talias: ['XYZ', 'ciexyz', 'cie1931']\n};\n\n\n/**\n * Whitepoint reference values with observer/illuminant\n *\n * http://en.wikipedia.org/wiki/Standard_illuminant\n */\nxyz.whitepoint = {\n\t//1931 2\n\t2: {\n\t\t//incadescent\n\t\tA:[109.85, 100, 35.585],\n\t\t// B:[],\n\t\tC: [98.074, 100, 118.232],\n\t\tD50: [96.422, 100, 82.521],\n\t\tD55: [95.682, 100, 92.149],\n\t\t//daylight\n\t\tD65: [95.045592705167, 100, 108.9057750759878],\n\t\tD75: [94.972, 100, 122.638],\n\t\t//flourescent\n\t\t// F1: [],\n\t\tF2: [99.187, 100, 67.395],\n\t\t// F3: [],\n\t\t// F4: [],\n\t\t// F5: [],\n\t\t// F6:[],\n\t\tF7: [95.044, 100, 108.755],\n\t\t// F8: [],\n\t\t// F9: [],\n\t\t// F10: [],\n\t\tF11: [100.966, 100, 64.370],\n\t\t// F12: [],\n\t\tE: [100,100,100]\n\t},\n\n\t//1964  10\n\t10: {\n\t\t//incadescent\n\t\tA:[111.144, 100, 35.200],\n\t\tC: [97.285, 100, 116.145],\n\t\tD50: [96.720, 100, 81.427],\n\t\tD55: [95.799, 100, 90.926],\n\t\t//daylight\n\t\tD65: [94.811, 100, 107.304],\n\t\tD75: [94.416, 100, 120.641],\n\t\t//flourescent\n\t\tF2: [103.280, 100, 69.026],\n\t\tF7: [95.792, 100, 107.687],\n\t\tF11: [103.866, 100, 65.627],\n\t\tE: [100,100,100]\n\t}\n};\n\n\n/**\n * Top values are the whitepoints top values, default are D65\n */\nxyz.max = xyz.whitepoint[2].D65;\n\n\n/**\n * Transform xyz to rgb\n *\n * @param {Array} xyz Array of xyz values\n *\n * @return {Array} RGB values\n */\nxyz.rgb = function (_xyz, white) {\n\t//FIXME: make sure we have to divide like this. Probably we have to replace matrix as well then\n\twhite = white || xyz.whitepoint[2].E;\n\n\tvar x = _xyz[0] / white[0],\n\t\ty = _xyz[1] / white[1],\n\t\tz = _xyz[2] / white[2],\n\t\tr, g, b;\n\n\t// assume sRGB\n\t// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n\tr = (x * 3.240969941904521) + (y * -1.537383177570093) + (z * -0.498610760293);\n\tg = (x * -0.96924363628087) + (y * 1.87596750150772) + (z * 0.041555057407175);\n\tb = (x * 0.055630079696993) + (y * -0.20397695888897) + (z * 1.056971514242878);\n\n\tr = r > 0.0031308 ? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r = (r * 12.92);\n\n\tg = g > 0.0031308 ? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g = (g * 12.92);\n\n\tb = b > 0.0031308 ? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b = (b * 12.92);\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n}\n\n\n\n/**\n * RGB to XYZ\n *\n * @param {Array} rgb RGB channels\n *\n * @return {Array} XYZ channels\n */\nrgb.xyz = function(rgb, white) {\n\tvar r = rgb[0] / 255,\n\t\t\tg = rgb[1] / 255,\n\t\t\tb = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.41239079926595) + (g * 0.35758433938387) + (b * 0.18048078840183);\n\tvar y = (r * 0.21263900587151) + (g * 0.71516867876775) + (b * 0.072192315360733);\n\tvar z = (r * 0.019330818715591) + (g * 0.11919477979462) + (b * 0.95053215224966);\n\n\twhite = white || xyz.whitepoint[2].E;\n\n\treturn [x * white[0], y * white[1], z * white[2]];\n};\n\n\n\nexport default xyz;\n","/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable.js'\r\nimport ol_control_Control from 'ol/control/Control.js'\r\nimport ol_layer_Tile from 'ol/layer/Tile.js'\r\nimport ol_layer_Vector from 'ol/layer/Vector.js'\r\nimport ol_layer_VectorTile from 'ol/layer/VectorTile.js'\r\n// ol < 6 compatibility VectorImage is not defined\r\n// import ol_layer_VectorImage from 'ol/layer/VectorImage.js'\r\nimport ol_layer_Image from 'ol/layer/Image.js'\r\nimport ol_layer_Heatmap from 'ol/layer/Heatmap.js'\r\nimport {intersects as ol_extent_intersects} from 'ol/extent.js'\r\n\r\nimport ol_ext_element from '../util/element.js'\r\n\r\n/** Layer Switcher Control.\r\n * @fires select\r\n * @fires drawlist\r\n * @fires toggle\r\n * @fires reorder-start\r\n * @fires reorder-end\r\n * @fires layer:visible\r\n * @fires layer:opacity\r\n * \r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} options\r\n *  @param {boolean} options.selection enable layer selection when click on the title\r\n *  @param {function} options.displayInLayerSwitcher function that takes a layer and return a boolean if the layer is displayed in the switcher, default test the displayInLayerSwitcher layer attribute\r\n *  @param {boolean} options.show_progress show a progress bar on tile layers, default false\r\n *  @param {boolean} options.mouseover show the panel on mouseover, default false\r\n *  @param {boolean} options.reordering allow layer reordering, default true\r\n *  @param {boolean} options.trash add a trash button to delete the layer, default false\r\n *  @param {function} options.oninfo callback on click on info button, if none no info button is shown DEPRECATED: use on(info) instead\r\n *  @param {boolean} options.extent add an extent button to zoom to the extent of the layer\r\n *  @param {function} options.onextent callback when click on extent, default fits view to extent\r\n *  @param {number} options.drawDelay delay in ms to redraw the layer (usefull to prevent flickering when manipulating the layers)\r\n *  @param {boolean} options.collapsed collapse the layerswitcher at beginning, default true\r\n *  @param {ol.layer.Group} options.layerGroup a layer group to display in the switcher, default display all layers of the map\r\n *  @param {boolean} options.noScroll prevent handle scrolling, default false\r\n *  @param {function} options.onchangeCheck optional callback on click on checkbox, you can call this method for doing operations after check/uncheck a layer\r\n *\r\n * Layers attributes that control the switcher\r\n *\t- allwaysOnTop {boolean} true to force layer stay on top of the others while reordering, default false\r\n *\t- displayInLayerSwitcher {boolean} display the layer in switcher, default true\r\n *\t- noSwitcherDelete {boolean} to prevent layer deletion (w. trash option = true), default false\r\n */\r\nvar ol_control_LayerSwitcher = class olcontrolLayerSwitcher extends ol_control_Control {\r\n  constructor(options) {\r\n    options = options || {}\r\n    var element = ol_ext_element.create('DIV', {\r\n      className: options.switcherClass || 'ol-layerswitcher'\r\n    })\r\n    super({\r\n      element: element,\r\n      target: options.target\r\n    })\r\n    \r\n    var self = this\r\n    this.dcount = 0\r\n    this.show_progress = options.show_progress\r\n    this.oninfo = (typeof (options.oninfo) == 'function' ? options.oninfo : null)\r\n    this.onextent = (typeof (options.onextent) == 'function' ? options.onextent : null)\r\n    this.hasextent = options.extent || options.onextent\r\n    this.hastrash = options.trash\r\n    this.reordering = (options.reordering !== false)\r\n    this._layers = []\r\n    this._layerGroup = (options.layerGroup && options.layerGroup.getLayers) ? options.layerGroup : null\r\n    this.onchangeCheck = (typeof (options.onchangeCheck) == \"function\" ? options.onchangeCheck : null)\r\n\r\n    // displayInLayerSwitcher\r\n    if (typeof (options.displayInLayerSwitcher) === 'function') {\r\n      this.displayInLayerSwitcher = options.displayInLayerSwitcher\r\n    }\r\n\r\n    // Insert in the map\r\n    if (!options.target) {\r\n      element.classList.add('ol-unselectable')\r\n      element.classList.add('ol-control')\r\n      element.classList.add(options.collapsed !== false ? 'ol-collapsed' : 'ol-forceopen')\r\n\r\n      this.button = ol_ext_element.create('BUTTON', {\r\n        type: 'button',\r\n        parent: element\r\n      })\r\n      this.button.addEventListener('touchstart', function (e) {\r\n        element.classList.toggle('ol-forceopen')\r\n        element.classList.add('ol-collapsed')\r\n        self.dispatchEvent({ type: 'toggle', collapsed: element.classList.contains('ol-collapsed') })\r\n        e.preventDefault()\r\n        self.overflow()\r\n      })\r\n      this.button.addEventListener('click', function () {\r\n        element.classList.toggle('ol-forceopen')\r\n        element.classList.add('ol-collapsed')\r\n        self.dispatchEvent({ type: 'toggle', collapsed: !element.classList.contains('ol-forceopen') })\r\n        self.overflow()\r\n      })\r\n\r\n      if (options.mouseover) {\r\n        element.addEventListener('mouseleave', function () {\r\n          element.classList.add(\"ol-collapsed\")\r\n          self.dispatchEvent({ type: 'toggle', collapsed: true })\r\n        })\r\n        element.addEventListener('mouseover', function () {\r\n          element.classList.remove(\"ol-collapsed\")\r\n          self.dispatchEvent({ type: 'toggle', collapsed: false })\r\n        })\r\n      }\r\n\r\n      if (options.minibar)\r\n        options.noScroll = true\r\n      if (!options.noScroll) {\r\n        this.topv = ol_ext_element.create('DIV', {\r\n          className: 'ol-switchertopdiv',\r\n          parent: element,\r\n          click: function () {\r\n            self.overflow(\"+50%\")\r\n          }\r\n        })\r\n\r\n        this.botv = ol_ext_element.create('DIV', {\r\n          className: 'ol-switcherbottomdiv',\r\n          parent: element,\r\n          click: function () {\r\n            self.overflow(\"-50%\")\r\n          }\r\n        })\r\n      }\r\n      this._noScroll = options.noScroll\r\n    }\r\n\r\n    this.panel_ = ol_ext_element.create('UL', {\r\n      className: 'panel',\r\n    })\r\n    this.panelContainer_ = ol_ext_element.create('DIV', {\r\n      className: 'panel-container',\r\n      html: this.panel_,\r\n      parent: element\r\n    })\r\n    // Handle mousewheel\r\n    if (!options.target && !options.noScroll) {\r\n      ol_ext_element.addListener(this.panel_, 'mousewheel DOMMouseScroll onmousewheel', function (e) {\r\n        if (self.overflow(Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))))) {\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n        }\r\n      })\r\n    }\r\n\r\n    this.header_ = ol_ext_element.create('LI', {\r\n      className: 'ol-header',\r\n      parent: this.panel_\r\n    })\r\n\r\n    this.set('drawDelay', options.drawDelay || 0)\r\n    this.set('selection', options.selection)\r\n\r\n    if (options.minibar) {\r\n      // Wait init complete (for child classes)\r\n      setTimeout(function () {\r\n        var mbar = ol_ext_element.scrollDiv(this.panelContainer_, {\r\n          mousewheel: true,\r\n          vertical: true,\r\n          minibar: true\r\n        })\r\n        this.on(['drawlist', 'toggle'], function () {\r\n          mbar.refresh()\r\n        })\r\n      }.bind(this))\r\n    }\r\n  }\r\n  /** Test if a layer should be displayed in the switcher\r\n   * @param {ol.layer} layer\r\n   * @return {boolean} true if the layer is displayed\r\n   */\r\n  displayInLayerSwitcher(layer) {\r\n    return (layer.get('displayInLayerSwitcher') !== false)\r\n  }\r\n  /**\r\n   * Set the map instance the control is associated with.\r\n   * @param {_ol_Map_} map The map instance.\r\n   */\r\n  setMap(map) {\r\n    super.setMap(map)\r\n    this.drawPanel()\r\n\r\n    if (this._listener) {\r\n      for (var i in this._listener){\r\n        ol_Observable_unByKey(this._listener[i])\r\n      }\r\n    }\r\n    this._listener = null\r\n\r\n    // Get change (new layer added or removed)\r\n    if (map) {\r\n      this._listener = {\r\n        moveend: map.on('moveend', this.viewChange.bind(this)),\r\n        size: map.on('change:size', this.overflow.bind(this))\r\n      }\r\n      // Listen to a layer group\r\n      if (this._layerGroup) {\r\n        this._listener.change = this._layerGroup.getLayers().on('change:length', this.drawPanel.bind(this))\r\n      } else {\r\n        //Listen to all layers\r\n        this._listener.change = map.getLayerGroup().getLayers().on('change:length', this.drawPanel.bind(this))\r\n      }\r\n    }\r\n  }\r\n  /** Show control\r\n   */\r\n  show() {\r\n    this.element.classList.add('ol-forceopen')\r\n    this.overflow()\r\n    this.dispatchEvent({ type: 'toggle', collapsed: false })\r\n  }\r\n  /** Hide control\r\n   */\r\n  hide() {\r\n    this.element.classList.remove('ol-forceopen')\r\n    this.overflow()\r\n    this.dispatchEvent({ type: 'toggle', collapsed: true })\r\n  }\r\n  /** Toggle control\r\n   */\r\n  toggle() {\r\n    this.element.classList.toggle(\"ol-forceopen\")\r\n    this.overflow()\r\n    this.dispatchEvent({ type: 'toggle', collapsed: !this.isOpen() })\r\n  }\r\n  /** Is control open\r\n   * @return {boolean}\r\n   */\r\n  isOpen() {\r\n    return this.element.classList.contains(\"ol-forceopen\")\r\n  }\r\n  /** Add a custom header\r\n   * @param {Element|string} html content html\r\n   */\r\n  setHeader(html) {\r\n    ol_ext_element.setHTML(this.header_, html)\r\n  }\r\n  /** Calculate overflow and add scrolls\r\n   * @param {Number} dir scroll direction -1|0|1|'+50%'|'-50%'\r\n   * @private\r\n   */\r\n  overflow(dir) {\r\n    if (this.button && !this._noScroll) {\r\n      // Nothing to show\r\n      if (ol_ext_element.hidden(this.panel_)) {\r\n        ol_ext_element.setStyle(this.element, { height: 'auto' })\r\n        return\r\n      }\r\n      // Calculate offset\r\n      var h = ol_ext_element.outerHeight(this.element)\r\n      var hp = ol_ext_element.outerHeight(this.panel_)\r\n      var dh = this.button.offsetTop + ol_ext_element.outerHeight(this.button)\r\n      //var dh = this.button.position().top + this.button.outerHeight(true);\r\n      var top = this.panel_.offsetTop - dh\r\n      if (hp > h - dh) {\r\n        // Bug IE: need to have an height defined\r\n        ol_ext_element.setStyle(this.element, { height: '100%' })\r\n        var li = this.panel_.querySelectorAll('li.ol-visible .li-content')[0]\r\n        var lh = li ? 2 * ol_ext_element.getStyle(li, 'height') : 0\r\n        switch (dir) {\r\n          case 1: top += lh; break\r\n          case -1: top -= lh; break\r\n          case \"+50%\": top += Math.round(h / 2); break\r\n          case \"-50%\": top -= Math.round(h / 2); break\r\n          default: break\r\n        }\r\n        // Scroll div\r\n        if (top + hp <= h - 3 * dh / 2) {\r\n          top = h - 3 * dh / 2 - hp\r\n          ol_ext_element.hide(this.botv)\r\n        } else {\r\n          ol_ext_element.show(this.botv)\r\n        }\r\n        if (top >= 0) {\r\n          top = 0\r\n          ol_ext_element.hide(this.topv)\r\n        } else {\r\n          ol_ext_element.show(this.topv)\r\n        }\r\n        // Scroll ?\r\n        ol_ext_element.setStyle(this.panel_, { top: top + \"px\" })\r\n        return true\r\n      } else {\r\n        ol_ext_element.setStyle(this.element, { height: \"auto\" })\r\n        ol_ext_element.setStyle(this.panel_, { top: 0 })\r\n        ol_ext_element.hide(this.botv)\r\n        ol_ext_element.hide(this.topv)\r\n        return false\r\n      }\r\n    }\r\n    else\r\n      return false\r\n  }\r\n  /** Set the layer associated with a li\r\n   * @param {Element} li\r\n   * @param {ol.layer} layer\r\n   * @private\r\n   */\r\n  _setLayerForLI(li, layer) {\r\n    var listeners = []\r\n    if (layer.getLayers) {\r\n      listeners.push(layer.getLayers().on('change:length', this.drawPanel.bind(this)))\r\n    }\r\n    if (li) {\r\n      // Handle opacity change\r\n      listeners.push(layer.on('change:opacity', (function () {\r\n        this.setLayerOpacity(layer, li)\r\n      }).bind(this)))\r\n      // Handle visibility chage\r\n      listeners.push(layer.on('change:visible', (function () {\r\n        this.setLayerVisibility(layer, li)\r\n      }).bind(this)))\r\n    }\r\n    // Other properties\r\n    listeners.push(layer.on('propertychange', (function (e) {\r\n      if (e.key === 'displayInLayerSwitcher'\r\n        || e.key === 'openInLayerSwitcher'\r\n        || e.key === 'title'\r\n        || e.key === 'name') {\r\n        this.drawPanel(e)\r\n      }\r\n    }).bind(this)))\r\n    this._layers.push({ li: li, layer: layer, listeners: listeners })\r\n  }\r\n  /** Set opacity for a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @param {Element} li the list element\r\n   * @private\r\n   */\r\n  setLayerOpacity(layer, li) {\r\n    var i = li.querySelector('.layerswitcher-opacity-cursor')\r\n    if (i){\r\n      i.style.left = (layer.getOpacity() * 100) + \"%\"\r\n    }\r\n    this.dispatchEvent({ type: 'layer:opacity', layer: layer })\r\n  }\r\n  /** Set visibility for a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @param {Element} li the list element\r\n   * @api\r\n   */\r\n  setLayerVisibility(layer, li) {\r\n    var i = li.querySelector('.ol-visibility')\r\n    if (i) {\r\n      i.checked = layer.getVisible()\r\n    }\r\n    if (layer.getVisible()){\r\n      li.classList.add('ol-visible')\r\n    } else{\r\n      li.classList.remove('ol-visible')\r\n    }\r\n    this.dispatchEvent({ type: 'layer:visible', layer: layer })\r\n  }\r\n  /** Clear layers associated with li\r\n   * @private\r\n   */\r\n  _clearLayerForLI() {\r\n    this._layers.forEach(function (li) {\r\n      li.listeners.forEach(function (l) {\r\n        ol_Observable_unByKey(l)\r\n      })\r\n    })\r\n    this._layers = []\r\n  }\r\n  /** Get the layer associated with a li\r\n   * @param {Element} li\r\n   * @return {ol.layer}\r\n   * @private\r\n   */\r\n  _getLayerForLI(li) {\r\n    for (var i = 0, l; l = this._layers[i]; i++) {\r\n      if (l.li === li) {\r\n        return l.layer\r\n      }\r\n    }\r\n    return null\r\n  }\r\n  /**\r\n   * On view change hide layer depending on resolution / extent\r\n   * @private\r\n   */\r\n  viewChange() {\r\n    this.panel_.querySelectorAll('li').forEach(function (li) {\r\n      var l = this._getLayerForLI(li)\r\n      if (l) {\r\n        if (this.testLayerVisibility(l)) {\r\n          li.classList.remove('ol-layer-hidden')\r\n        } else {\r\n          li.classList.add('ol-layer-hidden')\r\n        }\r\n      }\r\n    }.bind(this))\r\n  }\r\n  /** Get control panel\r\n   * @api\r\n   */\r\n  getPanel() {\r\n    return this.panelContainer_\r\n  }\r\n  /** Draw the panel control (prevent multiple draw due to layers manipulation on the map with a delay function)\r\n   * @api\r\n   */\r\n  drawPanel() {\r\n    if (!this.getMap())\r\n      return\r\n    var self = this\r\n    // Multiple event simultaneously / draw once => put drawing in the event queue\r\n    this.dcount++\r\n    setTimeout(function () { self.drawPanel_() }, this.get('drawDelay') || 0)\r\n  }\r\n  /** Delayed draw panel control\r\n   * @private\r\n   */\r\n  drawPanel_() {\r\n    if (--this.dcount || this.dragging_) {\r\n      return\r\n    }\r\n    var scrollTop = this.panelContainer_.scrollTop\r\n\r\n    // Remove existing layers\r\n    this._clearLayerForLI()\r\n    this.panel_.querySelectorAll('li').forEach(function (li) {\r\n      if (!li.classList.contains('ol-header'))\r\n        li.remove()\r\n    }.bind(this))\r\n    // Draw list\r\n    if (this._layerGroup) {\r\n      this.drawList(this.panel_, this._layerGroup.getLayers())\r\n    } else if (this.getMap()) {\r\n      this.drawList(this.panel_, this.getMap().getLayers())\r\n    }\r\n    // Reset scrolltop\r\n    this.panelContainer_.scrollTop = scrollTop\r\n  }\r\n  /** Change layer visibility according to the baselayer option\r\n   * @param {ol.layer}\r\n   * @param {Array<ol.layer>} related layers\r\n   * @private\r\n   */\r\n  switchLayerVisibility(l, layers) {\r\n    if (!l.get('baseLayer')) {\r\n      l.setVisible(!l.getVisible())\r\n    } else {\r\n      if (!l.getVisible()) {\r\n        l.setVisible(true)\r\n      }\r\n      layers.forEach(function (li) {\r\n        if (l !== li && li.get('baseLayer') && li.getVisible()) {\r\n          li.setVisible(false)\r\n        }\r\n      })\r\n    }\r\n  }\r\n  /** Check if layer is on the map (depending on resolution / zoom and extent)\r\n   * @param {ol.layer}\r\n   * @return {boolean}\r\n   * @private\r\n   */\r\n  testLayerVisibility(layer) {\r\n    if (!this.getMap())\r\n      return true\r\n    var res = this.getMap().getView().getResolution()\r\n    var zoom = this.getMap().getView().getZoom()\r\n    // Calculate visibility on resolution or zoom\r\n    if (layer.getMaxResolution() <= res || layer.getMinResolution() >= res) {\r\n      return false\r\n    } else if (layer.getMinZoom && (layer.getMinZoom() >= zoom || layer.getMaxZoom() < zoom)) {\r\n      return false\r\n    } else {\r\n      // Check extent\r\n      var ex0 = layer.getExtent()\r\n      if (ex0) {\r\n        var ex = this.getMap().getView().calculateExtent(this.getMap().getSize())\r\n        return ol_extent_intersects(ex, ex0)\r\n      }\r\n      return true\r\n    }\r\n  }\r\n  /** Start ordering the list\r\n  *\t@param {event} e drag event\r\n  *\t@private\r\n  */\r\n  dragOrdering_(e) {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    // Get params\r\n    var self = this\r\n    var elt = e.currentTarget.parentNode.parentNode\r\n    var start = true\r\n    var panel = this.panel_\r\n    var pageY\r\n    var pageY0 = e.pageY\r\n      || (e.touches && e.touches.length && e.touches[0].pageY)\r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY)\r\n    var target, dragElt\r\n    var layer, group\r\n    elt.parentNode.classList.add('drag')\r\n\r\n    // Stop ordering\r\n    function stop() {\r\n      if (target) {\r\n        // Get drag on parent\r\n        var drop = layer\r\n        var isSelected = self.getSelection() === drop\r\n        if (drop && target) {\r\n          var collection\r\n          if (group)\r\n            collection = group.getLayers()\r\n          else\r\n            collection = self._layerGroup ? self._layerGroup.getLayers() : self.getMap().getLayers()\r\n          var layers = collection.getArray()\r\n          // Switch layers\r\n          for (var i = 0; i < layers.length; i++) {\r\n            if (layers[i] == drop) {\r\n              collection.removeAt(i)\r\n              break\r\n            }\r\n          }\r\n          for (var j = 0; j < layers.length; j++) {\r\n            if (layers[j] === target) {\r\n              if (i > j)\r\n                collection.insertAt(j, drop)\r\n              else\r\n                collection.insertAt(j + 1, drop)\r\n              break\r\n            }\r\n          }\r\n        }\r\n        if (isSelected)\r\n          self.selectLayer(drop)\r\n\r\n        self.dispatchEvent({ type: \"reorder-end\", layer: drop, group: group })\r\n      }\r\n\r\n      elt.parentNode.querySelectorAll('li').forEach(function (li) {\r\n        li.classList.remove('dropover')\r\n        li.classList.remove('dropover-after')\r\n        li.classList.remove('dropover-before')\r\n      })\r\n      elt.classList.remove(\"drag\")\r\n      elt.parentNode.classList.remove(\"drag\")\r\n      self.element.classList.remove('drag')\r\n      if (dragElt)\r\n        dragElt.remove()\r\n\r\n      ol_ext_element.removeListener(document, 'mousemove touchmove', move)\r\n      ol_ext_element.removeListener(document, 'mouseup touchend touchcancel', stop)\r\n    }\r\n\r\n    // Ordering\r\n    function move(e) {\r\n      // First drag (more than 2 px) => show drag element (ghost)\r\n      pageY = e.pageY\r\n        || (e.touches && e.touches.length && e.touches[0].pageY)\r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY)\r\n      if (start && Math.abs(pageY0 - pageY) > 2) {\r\n        start = false\r\n        elt.classList.add(\"drag\")\r\n        layer = self._getLayerForLI(elt)\r\n        target = false\r\n        group = self._getLayerForLI(elt.parentNode.parentNode)\r\n        // Ghost div\r\n        dragElt = ol_ext_element.create('LI', {\r\n          className: 'ol-dragover',\r\n          html: elt.innerHTML,\r\n          style: {\r\n            position: \"absolute\",\r\n            \"z-index\": 10000,\r\n            left: elt.offsetLeft,\r\n            opacity: 0.5,\r\n            width: ol_ext_element.outerWidth(elt),\r\n            height: ol_ext_element.getStyle(elt, 'height'),\r\n          },\r\n          parent: panel\r\n        })\r\n        self.element.classList.add('drag')\r\n        self.dispatchEvent({ type: \"reorder-start\", layer: layer, group: group })\r\n      }\r\n      // Start a new drag sequence\r\n      if (!start) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        // Ghost div\r\n        ol_ext_element.setStyle(dragElt, { top: pageY - ol_ext_element.offsetRect(panel).top + panel.scrollTop + 5 })\r\n\r\n        var li\r\n        if (!e.touches) {\r\n          li = e.target\r\n          \r\n          // Get the HTML node within web component on click drag\r\n          if(e.target.shadowRoot){\r\n            li = e.composedPath()[0]\r\n          }\r\n        } else {\r\n          li = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\r\n          \r\n          //Get actual HTML node within web component on touch drag\r\n          while(li.shadowRoot){\r\n            li = li.shadowRoot.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY)\r\n          }\r\n        }\r\n        if (li.classList.contains(\"ol-switcherbottomdiv\")) {\r\n          self.overflow(-1)\r\n        } else if (li.classList.contains(\"ol-switchertopdiv\")) {\r\n          self.overflow(1)\r\n        }\r\n        // Get associated li\r\n        while (li && li.tagName !== 'LI') {\r\n          li = li.parentNode\r\n        }\r\n        if (!li || !li.classList.contains('dropover')) {\r\n          elt.parentNode.querySelectorAll('li').forEach(function (li) {\r\n            li.classList.remove('dropover')\r\n            li.classList.remove('dropover-after')\r\n            li.classList.remove('dropover-before')\r\n          })\r\n        }\r\n        if (li && li.parentNode.classList.contains('drag') && li !== elt) {\r\n          target = self._getLayerForLI(li)\r\n          // Don't mix layer level\r\n          if (target && !target.get('allwaysOnTop') == !layer.get('allwaysOnTop')) {\r\n            li.classList.add(\"dropover\")\r\n            li.classList.add((elt.offsetTop < li.offsetTop) ? 'dropover-after' : 'dropover-before')\r\n          } else {\r\n            target = false\r\n          }\r\n          ol_ext_element.show(dragElt)\r\n        } else {\r\n          target = false\r\n          if (li === elt)\r\n            ol_ext_element.hide(dragElt)\r\n          else\r\n            ol_ext_element.show(dragElt)\r\n        }\r\n\r\n        if (!target)\r\n          dragElt.classList.add(\"forbidden\")\r\n        else\r\n          dragElt.classList.remove(\"forbidden\")\r\n      }\r\n    }\r\n\r\n    // Start ordering\r\n    ol_ext_element.addListener(document, 'mousemove touchmove', move)\r\n    ol_ext_element.addListener(document, 'mouseup touchend touchcancel', stop)\r\n  }\r\n  /** Change opacity on drag\r\n  *\t@param {event} e drag event\r\n  *\t@private\r\n  */\r\n  dragOpacity_(e) {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    var self = this\r\n    // Register start params\r\n    var elt = e.target\r\n    var layer = this._getLayerForLI(elt.parentNode.parentNode.parentNode)\r\n    if (!layer)\r\n      return\r\n    var x = e.pageX\r\n      || (e.touches && e.touches.length && e.touches[0].pageX)\r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX)\r\n    var start = ol_ext_element.getStyle(elt, 'left') - x\r\n    self.dragging_ = true\r\n\r\n    // stop dragging\r\n    function stop() {\r\n      ol_ext_element.removeListener(document, \"mouseup touchend touchcancel\", stop)\r\n      ol_ext_element.removeListener(document, \"mousemove touchmove\", move)\r\n      self.dragging_ = false\r\n    }\r\n    // On draggin\r\n    function move(e) {\r\n      var x = e.pageX\r\n        || (e.touches && e.touches.length && e.touches[0].pageX)\r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX)\r\n      var delta = (start + x) / ol_ext_element.getStyle(elt.parentNode, 'width')\r\n      var opacity = Math.max(0, Math.min(1, delta))\r\n      ol_ext_element.setStyle(elt, { left: (opacity * 100) + \"%\" })\r\n      elt.parentNode.nextElementSibling.innerHTML = Math.round(opacity * 100)\r\n      layer.setOpacity(opacity)\r\n    }\r\n    // Register move\r\n    ol_ext_element.addListener(document, \"mouseup touchend touchcancel\", stop)\r\n    ol_ext_element.addListener(document, \"mousemove touchmove\", move)\r\n  }\r\n  /** Render a list of layer\r\n   * @param {Elemen} element to render\r\n   * @layers {Array{ol.layer}} list of layer to show\r\n   * @api stable\r\n   * @private\r\n   */\r\n  drawList(ul, collection) {\r\n    var self = this\r\n    var layers = collection.getArray()\r\n\r\n    // Change layer visibility\r\n    var setVisibility = function (e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var l = self._getLayerForLI(this.parentNode.parentNode)\r\n      self.switchLayerVisibility(l, collection)\r\n      if (self.get('selection') && l.getVisible()) {\r\n        self.selectLayer(l)\r\n      }\r\n      if (self.onchangeCheck) {\r\n        self.onchangeCheck(l)\r\n      }\r\n    }\r\n    // Info button click\r\n    function onInfo(e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var l = self._getLayerForLI(this.parentNode.parentNode)\r\n      self.oninfo(l)\r\n      self.dispatchEvent({ type: \"info\", layer: l })\r\n    }\r\n    // Zoom to extent button\r\n    function zoomExtent(e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var l = self._getLayerForLI(this.parentNode.parentNode)\r\n      if (self.onextent) {\r\n        self.onextent(l)\r\n      } else {\r\n        self.getMap().getView().fit(l.getExtent(), self.getMap().getSize())\r\n      }\r\n      self.dispatchEvent({ type: \"extent\", layer: l })\r\n    }\r\n    // Remove a layer on trash click\r\n    function removeLayer(e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var li = this.parentNode.parentNode.parentNode.parentNode\r\n      var layer, group = self._getLayerForLI(li)\r\n      // Remove the layer from a group or from a map\r\n      if (group) {\r\n        layer = self._getLayerForLI(this.parentNode.parentNode)\r\n        group.getLayers().remove(layer)\r\n        if (group.getLayers().getLength() == 0 && !group.get('noSwitcherDelete')) {\r\n          removeLayer.call(li.querySelectorAll('.layerTrash')[0], e)\r\n        }\r\n      } else {\r\n        li = this.parentNode.parentNode\r\n        self.getMap().removeLayer(self._getLayerForLI(li))\r\n      }\r\n    }\r\n\r\n    // Create a list for a layer\r\n    function createLi(layer) {\r\n      if (!this.displayInLayerSwitcher(layer)) {\r\n        this._setLayerForLI(null, layer)\r\n        return\r\n      }\r\n\r\n      var li = ol_ext_element.create('LI', {\r\n        className: (layer.getVisible() ? \"ol-visible \" : \" \") + (layer.get('baseLayer') ? \"baselayer\" : \"\"),\r\n        parent: ul\r\n      })\r\n      this._setLayerForLI(li, layer)\r\n      if (this._selectedLayer === layer) {\r\n        li.classList.add('ol-layer-select')\r\n      }\r\n\r\n      var layer_buttons = ol_ext_element.create('DIV', {\r\n        className: 'ol-layerswitcher-buttons',\r\n        parent: li\r\n      })\r\n\r\n      // Content div\r\n      var d = ol_ext_element.create('DIV', {\r\n        className: 'li-content',\r\n        parent: li\r\n      })\r\n\r\n      // Visibility\r\n      ol_ext_element.create('INPUT', {\r\n        type: layer.get('baseLayer') ? 'radio' : 'checkbox',\r\n        className: 'ol-visibility',\r\n        checked: layer.getVisible(),\r\n        click: setVisibility,\r\n        parent: d\r\n      })\r\n      // Label\r\n      var label = ol_ext_element.create('LABEL', {\r\n        title: layer.get('title') || layer.get('name'),\r\n        click: setVisibility,\r\n        style: {\r\n          userSelect: 'none'\r\n        },\r\n        parent: d\r\n      })\r\n      label.addEventListener('selectstart', function () { return false })\r\n      ol_ext_element.create('SPAN', {\r\n        html: layer.get('title') || layer.get('name'),\r\n        click: function (e) {\r\n          if (this.get('selection')) {\r\n            e.stopPropagation()\r\n            this.selectLayer(layer)\r\n          }\r\n        }.bind(this),\r\n        parent: label\r\n      })\r\n\r\n      //  up/down\r\n      if (this.reordering) {\r\n        if ((i < layers.length - 1 && (layer.get(\"allwaysOnTop\") || !layers[i + 1].get(\"allwaysOnTop\")))\r\n          || (i > 0 && (!layer.get(\"allwaysOnTop\") || layers[i - 1].get(\"allwaysOnTop\")))) {\r\n          ol_ext_element.create('DIV', {\r\n            className: 'layerup ol-noscroll',\r\n            title: this.tip.up,\r\n            on: { 'mousedown touchstart': function (e) { self.dragOrdering_(e) } },\r\n            parent: layer_buttons\r\n          })\r\n        }\r\n      }\r\n\r\n      // Show/hide sub layers\r\n      if (layer.getLayers) {\r\n        var nb = 0\r\n        layer.getLayers().forEach(function (l) {\r\n          if (self.displayInLayerSwitcher(l))\r\n            nb++\r\n        })\r\n        if (nb) {\r\n          ol_ext_element.create('DIV', {\r\n            className: layer.get(\"openInLayerSwitcher\") ? \"collapse-layers\" : \"expend-layers\",\r\n            title: this.tip.plus,\r\n            click: function () {\r\n              var l = self._getLayerForLI(this.parentNode.parentNode)\r\n              l.set(\"openInLayerSwitcher\", !l.get(\"openInLayerSwitcher\"))\r\n            },\r\n            parent: layer_buttons\r\n          })\r\n        }\r\n      }\r\n\r\n      // Info button\r\n      if (this.oninfo) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerInfo',\r\n          title: this.tip.info,\r\n          click: onInfo,\r\n          parent: layer_buttons\r\n        })\r\n      }\r\n      // Layer remove\r\n      if (this.hastrash && !layer.get(\"noSwitcherDelete\")) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerTrash',\r\n          title: this.tip.trash,\r\n          click: removeLayer,\r\n          parent: layer_buttons\r\n        })\r\n      }\r\n      // Layer extent\r\n      if (this.hasextent && layers[i].getExtent()) {\r\n        var ex = layers[i].getExtent()\r\n        if (ex.length == 4 && ex[0] < ex[2] && ex[1] < ex[3]) {\r\n          ol_ext_element.create('DIV', {\r\n            className: 'layerExtent',\r\n            title: this.tip.extent,\r\n            click: zoomExtent,\r\n            parent: layer_buttons\r\n          })\r\n        }\r\n      }\r\n\r\n      // Progress\r\n      if (this.show_progress && layer instanceof ol_layer_Tile) {\r\n        var p = ol_ext_element.create('DIV', {\r\n          className: 'layerswitcher-progress',\r\n          parent: d\r\n        })\r\n        this.setprogress_(layer)\r\n        layer.layerswitcher_progress = ol_ext_element.create('DIV', { parent: p })\r\n      }\r\n\r\n      // Opacity\r\n      var opacity = ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-opacity',\r\n        // Click on the opacity line\r\n        click: function (e) {\r\n          if (e.target !== this)\r\n            return\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n          var op = Math.max(0, Math.min(1, e.offsetX / ol_ext_element.getStyle(this, 'width')))\r\n          self._getLayerForLI(this.parentNode.parentNode).setOpacity(op)\r\n          this.parentNode.querySelectorAll('.layerswitcher-opacity-label')[0].innerHTML = Math.round(op * 100)\r\n        },\r\n        parent: d\r\n      })\r\n      // Start dragging\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-opacity-cursor ol-noscroll',\r\n        style: { left: (layer.getOpacity() * 100) + \"%\" },\r\n        on: {\r\n          'mousedown touchstart': function (e) { self.dragOpacity_(e) }\r\n        },\r\n        parent: opacity\r\n      })\r\n      // Percent\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-opacity-label',\r\n        html: Math.round(layer.getOpacity() * 100),\r\n        parent: d\r\n      })\r\n\r\n      // Layer group\r\n      if (layer.getLayers) {\r\n        li.classList.add('ol-layer-group')\r\n        if (layer.get(\"openInLayerSwitcher\") === true) {\r\n          var ul2 = ol_ext_element.create('UL', {\r\n            parent: li\r\n          })\r\n          this.drawList(ul2, layer.getLayers())\r\n        }\r\n      }\r\n      li.classList.add(this.getLayerClass(layer))\r\n\r\n      // Dispatch a dralist event to allow customisation\r\n      this.dispatchEvent({ type: 'drawlist', layer: layer, li: li })\r\n    }\r\n\r\n    // Add the layer list\r\n    for (var i = layers.length - 1; i >= 0; i--) {\r\n      createLi.call(this, layers[i])\r\n    }\r\n\r\n    this.viewChange()\r\n\r\n    if (ul === this.panel_)\r\n      this.overflow()\r\n  }\r\n  /** Select a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @returns {string} the layer classname\r\n   * @api\r\n   */\r\n  getLayerClass(layer) {\r\n    if (!layer)\r\n      return 'none'\r\n    if (layer.getLayers)\r\n      return 'ol-layer-group'\r\n    if (layer instanceof ol_layer_Vector)\r\n      return 'ol-layer-vector'\r\n    if (layer instanceof ol_layer_VectorTile)\r\n      return 'ol-layer-vectortile'\r\n    if (layer instanceof ol_layer_Tile)\r\n      return 'ol-layer-tile'\r\n    if (layer instanceof ol_layer_Image)\r\n      return 'ol-layer-image'\r\n    if (layer instanceof ol_layer_Heatmap)\r\n      return 'ol-layer-heatmap'\r\n    /* ol < 6 compatibility VectorImage is not defined */\r\n    // if (layer instanceof ol_layer_VectorImage) return 'ol-layer-vectorimage';\r\n    if (layer.getFeatures)\r\n      return 'ol-layer-vectorimage'\r\n    /* */\r\n    return 'unknown'\r\n  }\r\n  /** Select a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @api\r\n   */\r\n  selectLayer(layer, silent) {\r\n    if (!layer) {\r\n      if (!this.getMap())\r\n        return\r\n      layer = this.getMap().getLayers().item(this.getMap().getLayers().getLength() - 1)\r\n    }\r\n    this._selectedLayer = layer\r\n    this.drawPanel()\r\n    if (!silent)\r\n      this.dispatchEvent({ type: 'select', layer: layer })\r\n  }\r\n  /** Get selected layer\r\n   * @returns {ol.layer.Layer}\r\n   */\r\n  getSelection() {\r\n    return this._selectedLayer\r\n  }\r\n  /** Handle progress bar for a layer\r\n  *\t@private\r\n  */\r\n  setprogress_(layer) {\r\n    if (!layer.layerswitcher_progress) {\r\n      var loaded = 0\r\n      var loading = 0\r\n      var draw = function () {\r\n        if (loading === loaded) {\r\n          loading = loaded = 0\r\n          ol_ext_element.setStyle(layer.layerswitcher_progress, { width: 0 }) // layer.layerswitcher_progress.width(0);\r\n        } else {\r\n          ol_ext_element.setStyle(layer.layerswitcher_progress, { width: (loaded / loading * 100).toFixed(1) + '%' }) // layer.layerswitcher_progress.css('width', (loaded / loading * 100).toFixed(1) + '%');\r\n        }\r\n      }\r\n      layer.getSource().on('tileloadstart', function () {\r\n        loading++\r\n        draw()\r\n      })\r\n      layer.getSource().on('tileloadend', function () {\r\n        loaded++\r\n        draw()\r\n      })\r\n      layer.getSource().on('tileloaderror', function () {\r\n        loaded++\r\n        draw()\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n/** List of tips for internationalization purposes\r\n*/\r\nol_control_LayerSwitcher.prototype.tip = {\r\n  up: \"up/down\",\r\n  down: \"down\",\r\n  info: \"informations...\",\r\n  extent: \"zoom to extent\",\r\n  trash: \"remove layer\",\r\n  plus: \"expand/shrink\"\r\n};\r\n\r\nexport default ol_control_LayerSwitcher\r\n","/** Vanilla JS geographic inputs\r\n * color, size, width, font, symboles, dash, arrow, pattern\r\n */\r\nimport ol_Object from 'ol/Object.js'\r\n\r\n/** Abstract base class; normally only used for creating subclasses and not instantiated in apps.    \r\n * @constructor\r\n * @extends {ol_Object}\r\n * @param {*} options\r\n *  @param {Element} [options.input] input element, if none create one\r\n *  @param {string} [options.type] input type, if no input\r\n *  @param {number} [options.min] input min, if no input\r\n *  @param {number} [options.max] input max, if no input\r\n *  @param {number} [options.step] input step, if no input\r\n *  @param {string|number} [options.val] input value\r\n *  @param {boolean} [options.checked] check input\r\n *  @param {boolean} [options.hidden] the input is display:none\r\n *  @param {boolean} [options.disabled] disable input\r\n *  @param {Element} [options.parent] parent element, if no input\r\n */\r\nvar ol_ext_input_Base = class olextinputBase extends ol_Object {\r\n  constructor(options) {\r\n    options = options || {};\r\n    super();\r\n\r\n    var input = this.input = options.input;\r\n    if (!input) {\r\n      input = this.input = document.createElement('INPUT');\r\n      if (options.type)\r\n        input.setAttribute('type', options.type);\r\n      if (options.min !== undefined)\r\n        input.setAttribute('min', options.min);\r\n      if (options.max !== undefined)\r\n        input.setAttribute('max', options.max);\r\n      if (options.step !== undefined)\r\n        input.setAttribute('step', options.step);\r\n      if (options.parent)\r\n        options.parent.appendChild(input);\r\n    }\r\n    if (options.disabled)\r\n      input.disabled = true;\r\n    if (options.checked !== undefined)\r\n      input.checked = !!options.checked;\r\n    if (options.val !== undefined)\r\n      input.value = options.val;\r\n    if (options.hidden)\r\n      input.style.display = 'none';\r\n    input.addEventListener('focus', function () {\r\n      if (this.element)\r\n        this.element.classList.add('ol-focus');\r\n    }.bind(this));\r\n    var tout;\r\n    input.addEventListener('focusout', function () {\r\n      if (this.element) {\r\n        if (tout)\r\n          clearTimeout(tout);\r\n        tout = setTimeout(function () {\r\n          this.element.classList.remove('ol-focus');\r\n        }.bind(this), 0);\r\n      }\r\n    }.bind(this));\r\n  }\r\n  /** Listen to drag event\r\n   * @param {Element} elt\r\n   * @param {function} cback when draggin on the element\r\n   * @private\r\n   */\r\n  _listenDrag(elt, cback) {\r\n    var handle = function (e) {\r\n      this.moving = true;\r\n      this.element.classList.add('ol-moving');\r\n      var listen = function (e) {\r\n        if (e.type === 'pointerup') {\r\n          document.removeEventListener('pointermove', listen);\r\n          document.removeEventListener('pointerup', listen);\r\n          document.removeEventListener('pointercancel', listen);\r\n          setTimeout(function () {\r\n            this.moving = false;\r\n            this.element.classList.remove('ol-moving');\r\n          }.bind(this));\r\n        }\r\n        if (e.target === elt)\r\n          cback(e);\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }.bind(this);\r\n      document.addEventListener('pointermove', listen, false);\r\n      document.addEventListener('pointerup', listen, false);\r\n      document.addEventListener('pointercancel', listen, false);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }.bind(this);\r\n    elt.addEventListener('mousedown', handle, false);\r\n    elt.addEventListener('touchstart', handle, false);\r\n  }\r\n  /** Set the current value\r\n   */\r\n  setValue(v) {\r\n    if (v !== undefined)\r\n      this.input.value = v;\r\n    this.input.dispatchEvent(new Event('change'));\r\n  }\r\n  /** Get the current getValue\r\n   * @returns {string}\r\n   */\r\n  getValue() {\r\n    return this.input.value;\r\n  }\r\n  /** Get the input element\r\n   * @returns {Element}\r\n   */\r\n  getInputElement() {\r\n    return this.input;\r\n  }\r\n}\r\n\r\nexport default ol_ext_input_Base\r\n","import ol_ext_input_Base from './Base.js'\r\n\r\n/** Checkbox input\r\n * @constructor\r\n * @extends {ol_ext_input_Base}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element|string} [options.html] label content\r\n *  @param {string} [options.after] label garnish (placed after)\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n *  @param {boolean} [options.autoClose=true]\r\n *  @param {boolean} [options.visible=false] display the input\r\n */\r\nvar ol_ext_input_Checkbox = class olextinputCheckbox extends ol_ext_input_Base {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    var label = this.element = document.createElement('LABEL');\r\n    if (options.html instanceof Element)\r\n      label.appendChild(options.html);\r\n    else if (options.html !== undefined)\r\n      label.innerHTML = options.html;\r\n    label.className = ('ol-ext-check ol-ext-checkbox ' + (options.className || '')).trim();\r\n\r\n    if (this.input.parentNode)\r\n      this.input.parentNode.insertBefore(label, this.input);\r\n    label.appendChild(this.input);\r\n    label.appendChild(document.createElement('SPAN'));\r\n    if (options.after) {\r\n      label.appendChild(document.createTextNode(options.after));\r\n    }\r\n\r\n    // Handle change\r\n    this.input.addEventListener('change', function () {\r\n      this.dispatchEvent({ type: 'check', checked: this.input.checked, value: this.input.value });\r\n    }.bind(this));\r\n\r\n  }\r\n  isChecked() {\r\n    return this.input.checked;\r\n  }\r\n}\r\n\r\nexport default ol_ext_input_Checkbox\r\n","import ol_ext_input_Checkbox from './Checkbox.js'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Switch = class olextinputSwitch extends ol_ext_input_Checkbox {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    this.element.className = ('ol-ext-toggle-switch ' + (options.className || '')).trim();\r\n  }\r\n};\r\n  \r\nexport default ol_ext_input_Switch\r\n","import ol_ext_input_Checkbox from './Checkbox.js'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Radio = class olextinputRadio extends ol_ext_input_Checkbox {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    this.element.className = ('ol-ext-check ol-ext-radio ' + (options.className || '')).trim();\r\n  }\r\n}\r\n  \r\nexport default ol_ext_input_Radio\r\n","/** Vanilla JS helper to manipulate DOM without jQuery\r\n * @see https://github.com/nefe/You-Dont-Need-jQuery\r\n * @see https://plainjs.com/javascript/\r\n * @see http://youmightnotneedjquery.com/\r\n */\r\nimport ol_Map from 'ol/Map.js'\r\nimport ol_ext_input_Checkbox from './input/Checkbox.js'\r\nimport ol_ext_input_Switch from './input/Switch.js'\r\nimport ol_ext_input_Radio from './input/Radio.js'\r\n\r\n/** @namespace ol.ext.element */\r\nvar ol_ext_element = {};\r\n\r\n/**\r\n * Create an element\r\n * @param {string} tagName The element tag, use 'TEXT' to create a text node\r\n * @param {*} options\r\n *  @param {string} options.className className The element class name \r\n *  @param {Element} options.parent Parent to append the element as child\r\n *  @param {Element|string} [options.html] Content of the element (if text is not set)\r\n *  @param {string} [options.text] Text content (if html is not set)\r\n *  @param {Element|string} [options.options] when tagName = SELECT a list of options as key:value to add to the select\r\n *  @param {string} options.* Any other attribut to add to the element\r\n */\r\nol_ext_element.create = function (tagName, options) {\r\n  options = options || {};\r\n  var elt;\r\n  // Create text node\r\n  if (tagName === 'TEXT') {\r\n    elt = document.createTextNode(options.html||'');\r\n    if (options.parent) options.parent.appendChild(elt);\r\n  } else {\r\n    // Other element\r\n    elt = document.createElement(tagName);\r\n    if (/button/i.test(tagName)) elt.setAttribute('type', 'button');\r\n    for (var attr in options) {\r\n      switch (attr) {\r\n        case 'className': {\r\n          if (options.className && options.className.trim) elt.setAttribute('class', options.className.trim());\r\n          break;\r\n        }\r\n        case 'text': {\r\n          elt.innerText = options.text;\r\n          break;\r\n        }\r\n        case 'html': {\r\n          if (options.html instanceof Element) elt.appendChild(options.html)\r\n          else if (options.html!==undefined) elt.innerHTML = options.html;\r\n          break;\r\n        }\r\n        case 'parent': {\r\n          if (options.parent) options.parent.appendChild(elt);\r\n          break;\r\n        }\r\n        case 'options': {\r\n          if (/select/i.test(tagName)) {\r\n            for (var i in options.options) {\r\n              ol_ext_element.create('OPTION', {\r\n                html: i,\r\n                value: options.options[i],\r\n                parent: elt          \r\n              })\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 'style': {\r\n          ol_ext_element.setStyle(elt, options.style);\r\n          break;\r\n        }\r\n        case 'change':\r\n        case 'click': {\r\n          ol_ext_element.addListener(elt, attr, options[attr]);\r\n          break;\r\n        }\r\n        case 'on': {\r\n          for (var e in options.on) {\r\n            ol_ext_element.addListener(elt, e, options.on[e]);\r\n          }\r\n          break;\r\n        }\r\n        case 'checked': {\r\n          elt.checked = !!options.checked;\r\n          break;\r\n        }\r\n        default: {\r\n          elt.setAttribute(attr, options[attr]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return elt;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {boolean} options.checked\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createSwitch = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    type: 'checkbox',\r\n    on: options.on,\r\n    click: options.click,\r\n    change: options.change,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  new ol_ext_input_Switch(opt);\r\n  return input;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {string} [options.name] input name\r\n *  @param {string} [options.type=checkbox] input type: radio or checkbox\r\n *  @param {string} options.value input value\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createCheck = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    name: options.name,\r\n    type: (options.type==='radio' ? 'radio' : 'checkbox'),\r\n    on: options.on,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  if (options.type === 'radio') {\r\n    new ol_ext_input_Radio(opt);\r\n  } else {\r\n    new ol_ext_input_Checkbox(opt);\r\n  }\r\n  return input;\r\n};\r\n\r\n/** Set inner html or append a child element to an element\r\n * @param {Element} element\r\n * @param {Element|string} html Content of the element\r\n */\r\nol_ext_element.setHTML = function(element, html) {\r\n  if (html instanceof Element) element.appendChild(html)\r\n  else if (html!==undefined) element.innerHTML = html;\r\n};\r\n\r\n/** Append text into an elemnt\r\n * @param {Element} element\r\n * @param {string} text text content\r\n */\r\nol_ext_element.appendText = function(element, text) {\r\n  element.appendChild(document.createTextNode(text||''));\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.addListener = function (element, eventType, fn, useCapture ) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.addEventListener(e, fn, useCapture);\r\n  });\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.removeListener = function (element, eventType, fn) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.removeEventListener(e, fn);\r\n  });\r\n};\r\n\r\n/**\r\n * Show an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.show = function (element) {\r\n  element.style.display = '';\r\n};\r\n\r\n/**\r\n * Hide an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.hide = function (element) {\r\n  element.style.display = 'none';\r\n};\r\n\r\n/**\r\n * Test if an element is hihdden\r\n * @param {Element} element\r\n * @return {boolean}\r\n */\r\nol_ext_element.hidden = function (element) {\r\n  return ol_ext_element.getStyle(element, 'display') === 'none';\r\n};\r\n\r\n/**\r\n * Toggle an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.toggle = function (element) {\r\n  element.style.display = (element.style.display==='none' ? '' : 'none');\r\n};\r\n\r\n/** Set style of an element\r\n * @param {DOMElement} el the element\r\n * @param {*} st list of style\r\n */\r\nol_ext_element.setStyle = function(el, st) {\r\n  for (var s in st) {\r\n    switch (s) {\r\n      case 'top':\r\n      case 'left':\r\n      case 'bottom':\r\n      case 'right':\r\n      case 'minWidth':\r\n      case 'maxWidth':\r\n      case 'width':\r\n      case 'height': {\r\n        if (typeof(st[s]) === 'number') {\r\n          el.style[s] = st[s]+'px';\r\n        } else {\r\n          el.style[s] = st[s];\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        el.style[s] = st[s];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get style propertie of an element\r\n * @param {DOMElement} el the element\r\n * @param {string} styleProp Propertie name\r\n * @return {*} style value\r\n */\r\nol_ext_element.getStyle = function(el, styleProp) {\r\n  var value, defaultView = (el.ownerDocument || document).defaultView;\r\n  // W3C standard way:\r\n  if (defaultView && defaultView.getComputedStyle) {\r\n    // sanitize property name to css notation\r\n    // (hypen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n    value = defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n  } else if (el.currentStyle) { // IE\r\n    // sanitize property name to camelCase\r\n    styleProp = styleProp.replace(/-(\\w)/g, function(str, letter) {\r\n      return letter.toUpperCase();\r\n    });\r\n    value = el.currentStyle[styleProp];\r\n    // convert other units to pixels on IE\r\n    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) { \r\n      return (function(value) {\r\n        var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;\r\n        el.runtimeStyle.left = el.currentStyle.left;\r\n        el.style.left = value || 0;\r\n        value = el.style.pixelLeft + \"px\";\r\n        el.style.left = oldLeft;\r\n        el.runtimeStyle.left = oldRsLeft;\r\n        return value;\r\n      })(value);\r\n    }\r\n  }\r\n  if (/px$/.test(value)) return parseInt(value);\r\n  return value;\r\n};\r\n\r\n/** Get outerHeight of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerHeight = function(elt) {\r\n  return elt.offsetHeight + ol_ext_element.getStyle(elt, 'marginBottom')\r\n};\r\n\r\n/** Get outerWidth of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerWidth = function(elt) {\r\n  return elt.offsetWidth + ol_ext_element.getStyle(elt, 'marginLeft')\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @return {*} \r\n */\r\nol_ext_element.offsetRect = function(elt) {\r\n  var rect = elt.getBoundingClientRect();\r\n  return {\r\n    top: rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0),\r\n    left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0),\r\n    height: rect.height || (rect.bottom - rect.top),\r\n    width: rect.width || (rect.right - rect.left)\r\n  }\r\n};\r\n\r\n/** Get element offset \r\n * @param {ELement} elt\r\n * @returns {Object} top/left offset\r\n */\r\nol_ext_element.getFixedOffset = function(elt) {\r\n  var offset = {\r\n    left:0,\r\n    top:0\r\n  };\r\n  var getOffset = function(parent) {\r\n    if (!parent) return offset;\r\n    // Check position when transform\r\n    if (ol_ext_element.getStyle(parent, 'position') === 'absolute'\r\n      && ol_ext_element.getStyle(parent, 'transform') !== \"none\") {\r\n      var r = parent.getBoundingClientRect();\r\n      offset.left += r.left; \r\n      offset.top += r.top; \r\n      return offset;\r\n    }\r\n    return getOffset(parent.offsetParent)\r\n  }\r\n  return getOffset(elt.offsetParent)\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @param {boolean} fixed get fixed position\r\n * @return {Object} \r\n */\r\nol_ext_element.positionRect = function(elt, fixed) {\r\n  var gleft = 0;\r\n  var gtop = 0;\r\n\r\n  var getRect = function( parent ) {\r\n    if (parent) {\r\n      gleft += parent.offsetLeft;\r\n      gtop += parent.offsetTop;\r\n      return getRect(parent.offsetParent);\r\n    } else {\r\n      var r = {\r\n        top: elt.offsetTop + gtop,\r\n        left: elt.offsetLeft + gleft\r\n      };\r\n      if (fixed) {\r\n        r.top -= (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        r.left -= (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0);\r\n      }\r\n      r.bottom = r.top + elt.offsetHeight;\r\n      r.right = r.top + elt.offsetWidth;\r\n      return r;\r\n    }\r\n  }; \r\n  return getRect(elt.offsetParent);\r\n}\r\n\r\n/** Make a div scrollable without scrollbar.\r\n * On touch devices the default behavior is preserved\r\n * @param {DOMElement} elt\r\n * @param {*} options\r\n *  @param {function} [options.onmove] a function that takes a boolean indicating that the div is scrolling\r\n *  @param {boolean} [options.vertical=false] \r\n *  @param {boolean} [options.animate=true] add kinetic to scroll\r\n *  @param {boolean} [options.mousewheel=false] enable mousewheel to scroll\r\n *  @param {boolean} [options.minibar=false] add a mini scrollbar to the parent element (only vertical scrolling)\r\n * @returns {Object} an object with a refresh function\r\n */\r\nol_ext_element.scrollDiv = function(elt, options) {\r\n  options = options || {};\r\n  var pos = false;\r\n  var speed = 0;\r\n  var d, dt = 0;\r\n\r\n  var onmove = (typeof(options.onmove) === 'function' ? options.onmove : function(){});\r\n  //var page = options.vertical ? 'pageY' : 'pageX';\r\n  var page = options.vertical ? 'screenY' : 'screenX';\r\n  var scroll = options.vertical ? 'scrollTop' : 'scrollLeft';\r\n  var moving = false;\r\n  // Factor scale content / container\r\n  var scale, isbar;\r\n\r\n  // Update the minibar\r\n  var updateCounter = 0;\r\n  var updateMinibar = function() {\r\n    if (scrollbar) {\r\n      updateCounter++;\r\n      setTimeout(updateMinibarDelay);\r\n    }\r\n  }\r\n  var updateMinibarDelay = function() {\r\n    if (scrollbar) {\r\n      updateCounter--;\r\n      // Prevent multi call\r\n      if (updateCounter) return;\r\n      // Container height\r\n      var pheight = elt.clientHeight;\r\n      // Content height\r\n      var height = elt.scrollHeight;\r\n      // Set scrollbar value\r\n      scale = pheight / height;\r\n      scrollbar.style.height = scale * 100 + '%';\r\n      scrollbar.style.top = (elt.scrollTop / height * 100) + '%';\r\n      scrollContainer.style.height = pheight + 'px';\r\n      // No scroll\r\n      if (pheight > height - .5) scrollContainer.classList.add('ol-100pc');\r\n      else scrollContainer.classList.remove('ol-100pc');\r\n    }\r\n  }\r\n  \r\n  // Handle pointer down\r\n  var onPointerDown = function(e) {\r\n    // Prevent scroll\r\n    if (e.target.classList.contains('ol-noscroll')) return;\r\n    // Start scrolling\r\n    moving = false;\r\n    pos = e[page];\r\n    dt = new Date();\r\n    elt.classList.add('ol-move');\r\n    // Prevent elt dragging\r\n    e.preventDefault();\r\n    // Listen scroll\r\n    window.addEventListener('pointermove', onPointerMove);\r\n    ol_ext_element.addListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  }\r\n\r\n  // Register scroll\r\n  var onPointerMove = function(e) {\r\n    if (pos !== false) {\r\n      var delta = (isbar ? -1/scale : 1) * (pos - e[page]);\r\n      moving = moving || Math.round(delta)\r\n      elt[scroll] += delta;\r\n      d = new Date();\r\n      if (d-dt) {\r\n        speed = (speed + delta / (d - dt))/2;\r\n      }\r\n      pos = e[page];\r\n      dt = d;\r\n      // Tell we are moving\r\n      if (delta) onmove(true);\r\n    } else {\r\n      moving = true;\r\n    }\r\n  };\r\n  \r\n  // Animate scroll\r\n  var animate = function(to) {\r\n    var step = (to>0) ? Math.min(100, to/2) : Math.max(-100, to/2);\r\n    to -= step;\r\n    elt[scroll] += step;\r\n    if (-1 < to && to < 1) {\r\n      if (moving) setTimeout(function() { elt.classList.remove('ol-move'); });\r\n      else elt.classList.remove('ol-move');\r\n      moving = false;\r\n      onmove(false);\r\n    } else {\r\n      setTimeout(function() {\r\n        animate(to);\r\n      }, 40);\r\n    }\r\n  }\r\n  \r\n  // Initialize scroll container for minibar\r\n  var scrollContainer, scrollbar;\r\n  if (options.vertical && options.minibar) {\r\n    var init = function(b) {\r\n      // only once\r\n      elt.removeEventListener('pointermove', init);\r\n      elt.parentNode.classList.add('ol-miniscroll');\r\n      scrollbar = ol_ext_element.create('DIV');\r\n      scrollContainer = ol_ext_element.create('DIV', {\r\n        className: 'ol-scroll',\r\n        html: scrollbar\r\n      });\r\n      elt.parentNode.insertBefore(scrollContainer, elt);\r\n      // Move scrollbar\r\n      scrollbar.addEventListener('pointerdown', function(e) {\r\n        isbar = true;\r\n        onPointerDown(e)\r\n      });\r\n      // Handle mousewheel\r\n      if (options.mousewheel) {\r\n        ol_ext_element.addListener(scrollContainer, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n        ol_ext_element.addListener(scrollbar, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n      }\r\n      // Update on enter\r\n      elt.parentNode.addEventListener('pointerenter', updateMinibar);\r\n      // Update on resize\r\n      window.addEventListener('resize', updateMinibar);\r\n      // Update\r\n      if (b!==false) updateMinibar();\r\n    };\r\n    // Allready inserted in the DOM\r\n    if (elt.parentNode) init(false);\r\n    // or wait when ready\r\n    else elt.addEventListener('pointermove', init);\r\n    // Update on scroll\r\n    elt.addEventListener('scroll', function() {\r\n      updateMinibar();\r\n    });\r\n  }\r\n\r\n  // Enable scroll\r\n  elt.style['touch-action'] = 'none';\r\n  elt.style['overflow'] = 'hidden';\r\n  elt.classList.add('ol-scrolldiv');\r\n  \r\n  // Start scrolling\r\n  ol_ext_element.addListener(elt, ['pointerdown'], function(e) {\r\n    isbar = false;\r\n    onPointerDown(e)\r\n  });\r\n\r\n  // Prevet click when moving...\r\n  elt.addEventListener('click', function(e) {\r\n    if (elt.classList.contains('ol-move')) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  }, true);\r\n\r\n  // Stop scrolling\r\n  var onPointerUp = function(e) {\r\n    dt = new Date() - dt;\r\n    if (dt>100 || isbar) {\r\n      // User stop: no speed\r\n      speed = 0;\r\n    } else if (dt>0) {\r\n      // Calculate new speed\r\n      speed = ((speed||0) + (pos - e[page]) / dt) / 2;\r\n    }\r\n    animate(options.animate===false ? 0 : speed*200);\r\n    pos = false;\r\n    speed = 0;\r\n    dt = 0;\r\n    // Add class to handle click (on iframe / double-click)\r\n    if (!elt.classList.contains('ol-move')) {\r\n      elt.classList.add('ol-hasClick')\r\n      setTimeout(function() { elt.classList.remove('ol-hasClick'); }, 500);\r\n    } else {\r\n      elt.classList.remove('ol-hasClick');\r\n    }\r\n    isbar = false;\r\n    window.removeEventListener('pointermove', onPointerMove)\r\n    ol_ext_element.removeListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  };\r\n\r\n  // Handle mousewheel\r\n  var onMouseWheel = function(e) {\r\n    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\r\n    elt.classList.add('ol-move');\r\n    elt[scroll] -= delta*30;\r\n    elt.classList.remove('ol-move');\r\n    return false;\r\n  }\r\n  if (options.mousewheel) { // && !elt.classList.contains('ol-touch')) {\r\n    ol_ext_element.addListener(elt, \r\n      ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n      onMouseWheel\r\n    );\r\n  }\r\n\r\n  return { \r\n    refresh: updateMinibar\r\n  }\r\n};\r\n\r\n/** Dispatch an event to an Element \r\n * @param {string} eventName\r\n * @param {Element} element\r\n */\r\nol_ext_element.dispatchEvent = function (eventName, element) {\r\n  var event;\r\n  try {\r\n    event = new CustomEvent(eventName);\r\n  } catch(e) {\r\n    // Try customevent on IE\r\n    event = document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, {});\r\n  }\r\n  element.dispatchEvent(event);\r\n};\r\n\r\n/** Set cursor\r\n * @param {Element|ol/Map} elt\r\n * @param {string} cursor\r\n */\r\nol_ext_element.setCursor = function(elt, cursor) {\r\n  if (elt instanceof ol_Map) elt = elt.getTargetElement()\r\n  // prevent flashing on mobile device\r\n  if (!('ontouchstart' in window) && elt instanceof Element) {\r\n    elt.style.cursor = cursor;\r\n  }\r\n}\r\n\r\nexport default ol_ext_element\r\n","/**\n * @module ol/Collection\n */\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LENGTH: 'length',\n};\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n * @template T\n */\nexport class CollectionEvent extends Event {\n  /**\n   * @param {import(\"./CollectionEventType.js\").default} type Type.\n   * @param {T} element Element.\n   * @param {number} index The index of the added or removed element.\n   */\n  constructor(type, element, index) {\n    super(type);\n\n    /**\n     * The element that is added to or removed from the collection.\n     * @type {T}\n     * @api\n     */\n    this.element = element;\n\n    /**\n     * The index of the added or removed element.\n     * @type {number}\n     * @api\n     */\n    this.index = index;\n  }\n}\n\n/***\n * @template T\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent<T>, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nclass Collection extends BaseObject {\n  /**\n   * @param {Array<T>} [array] Array.\n   * @param {Options} [options] Collection options.\n   */\n  constructor(array, options) {\n    super();\n\n    /***\n     * @type {CollectionOnSignature<T, import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {CollectionOnSignature<T, import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {CollectionOnSignature<T, void>}\n     */\n    this.un;\n\n    options = options || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.unique_ = !!options.unique;\n\n    /**\n     * @private\n     * @type {!Array<T>}\n     */\n    this.array_ = array ? array : [];\n\n    if (this.unique_) {\n      for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n        this.assertUnique_(this.array_[i], i);\n      }\n    }\n\n    this.updateLength_();\n  }\n\n  /**\n   * Remove all elements from the collection.\n   * @api\n   */\n  clear() {\n    while (this.getLength() > 0) {\n      this.pop();\n    }\n  }\n\n  /**\n   * Add elements to the collection.  This pushes each item in the provided array\n   * to the end of the collection.\n   * @param {!Array<T>} arr Array.\n   * @return {Collection<T>} This collection.\n   * @api\n   */\n  extend(arr) {\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      this.push(arr[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Iterate over each element, calling the provided callback.\n   * @param {function(T, number, Array<T>): *} f The function to call\n   *     for every element. This function takes 3 arguments (the element, the\n   *     index and the array). The return value is ignored.\n   * @api\n   */\n  forEach(f) {\n    const array = this.array_;\n    for (let i = 0, ii = array.length; i < ii; ++i) {\n      f(array[i], i, array);\n    }\n  }\n\n  /**\n   * Get a reference to the underlying Array object. Warning: if the array\n   * is mutated, no events will be dispatched by the collection, and the\n   * collection's \"length\" property won't be in sync with the actual length\n   * of the array.\n   * @return {!Array<T>} Array.\n   * @api\n   */\n  getArray() {\n    return this.array_;\n  }\n\n  /**\n   * Get the element at the provided index.\n   * @param {number} index Index.\n   * @return {T} Element.\n   * @api\n   */\n  item(index) {\n    return this.array_[index];\n  }\n\n  /**\n   * Get the length of this collection.\n   * @return {number} The length of the array.\n   * @observable\n   * @api\n   */\n  getLength() {\n    return this.get(Property.LENGTH);\n  }\n\n  /**\n   * Insert an element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  insertAt(index, elem) {\n    if (index < 0 || index > this.getLength()) {\n      throw new Error('Index out of bounds: ' + index);\n    }\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    this.array_.splice(index, 0, elem);\n    this.updateLength_();\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem, index),\n    );\n  }\n\n  /**\n   * Remove the last element of the collection and return it.\n   * Return `undefined` if the collection is empty.\n   * @return {T|undefined} Element.\n   * @api\n   */\n  pop() {\n    return this.removeAt(this.getLength() - 1);\n  }\n\n  /**\n   * Insert the provided element at the end of the collection.\n   * @param {T} elem Element.\n   * @return {number} New length of the collection.\n   * @api\n   */\n  push(elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    const n = this.getLength();\n    this.insertAt(n, elem);\n    return this.getLength();\n  }\n\n  /**\n   * Remove the first occurrence of an element from the collection.\n   * @param {T} elem Element.\n   * @return {T|undefined} The removed element or undefined if none found.\n   * @api\n   */\n  remove(elem) {\n    const arr = this.array_;\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      if (arr[i] === elem) {\n        return this.removeAt(i);\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Remove the element at the provided index and return it.\n   * Return `undefined` if the collection does not contain this index.\n   * @param {number} index Index.\n   * @return {T|undefined} Value.\n   * @api\n   */\n  removeAt(index) {\n    if (index < 0 || index >= this.getLength()) {\n      return undefined;\n    }\n    const prev = this.array_[index];\n    this.array_.splice(index, 1);\n    this.updateLength_();\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.REMOVE, prev, index)\n      ),\n    );\n    return prev;\n  }\n\n  /**\n   * Set the element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  setAt(index, elem) {\n    const n = this.getLength();\n    if (index >= n) {\n      this.insertAt(index, elem);\n      return;\n    }\n    if (index < 0) {\n      throw new Error('Index out of bounds: ' + index);\n    }\n    if (this.unique_) {\n      this.assertUnique_(elem, index);\n    }\n    const prev = this.array_[index];\n    this.array_[index] = elem;\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.REMOVE, prev, index)\n      ),\n    );\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.ADD, elem, index)\n      ),\n    );\n  }\n\n  /**\n   * @private\n   */\n  updateLength_() {\n    this.set(Property.LENGTH, this.array_.length);\n  }\n\n  /**\n   * @private\n   * @param {T} elem Element.\n   * @param {number} [except] Optional index to ignore.\n   */\n  assertUnique_(elem, except) {\n    for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n      if (this.array_[i] === elem && i !== except) {\n        throw new Error('Duplicate item added to a unique collection');\n      }\n    }\n  }\n}\n\nexport default Collection;\n","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection.CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection.CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove',\n};\n","/**\n * @module ol/DataTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\n\n/**\n * @typedef {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement|ImageBitmap} ImageLike\n */\n\n/**\n * @typedef {Uint8Array|Uint8ClampedArray|Float32Array|DataView} ArrayLike\n */\n\n/**\n * Data that can be used with a DataTile.\n * @typedef {ArrayLike|ImageLike} Data\n */\n\n/**\n * @param {Data} data Tile data.\n * @return {ImageLike|null} The image-like data.\n */\nexport function asImageLike(data) {\n  return data instanceof Image ||\n    data instanceof HTMLCanvasElement ||\n    data instanceof HTMLVideoElement ||\n    data instanceof ImageBitmap\n    ? data\n    : null;\n}\n\n/**\n * @param {Data} data Tile data.\n * @return {ArrayLike|null} The array-like data.\n */\nexport function asArrayLike(data) {\n  return data instanceof Uint8Array ||\n    data instanceof Uint8ClampedArray ||\n    data instanceof Float32Array ||\n    data instanceof DataView\n    ? data\n    : null;\n}\n\n/**\n * @type {CanvasRenderingContext2D|null}\n */\nlet sharedContext = null;\n\n/**\n * @param {ImageLike} image The image.\n * @return {Uint8ClampedArray} The data.\n */\nexport function toArray(image) {\n  if (!sharedContext) {\n    sharedContext = createCanvasContext2D(\n      image.width,\n      image.height,\n      undefined,\n      {willReadFrequently: true},\n    );\n  }\n  const canvas = sharedContext.canvas;\n  const width = image.width;\n  if (canvas.width !== width) {\n    canvas.width = width;\n  }\n  const height = image.height;\n  if (canvas.height !== height) {\n    canvas.height = height;\n  }\n  sharedContext.clearRect(0, 0, width, height);\n  sharedContext.drawImage(image, 0, 0);\n  return sharedContext.getImageData(0, 0, width, height).data;\n}\n\n/**\n * @type {import('./size.js').Size}\n */\nconst defaultSize = [256, 256];\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @property {function(): Promise<Data>} loader Data loader.  For loaders that generate images,\n * the promise should not resolve until the image is loaded.\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n * @property {import('./size.js').Size} [size=[256, 256]] Tile size.\n * @api\n */\n\nclass DataTile extends Tile {\n  /**\n   * @param {Options} options Tile options.\n   */\n  constructor(options) {\n    const state = TileState.IDLE;\n\n    super(options.tileCoord, state, {\n      transition: options.transition,\n      interpolate: options.interpolate,\n    });\n\n    /**\n     * @type {function(): Promise<Data>}\n     * @private\n     */\n    this.loader_ = options.loader;\n\n    /**\n     * @type {Data}\n     * @private\n     */\n    this.data_ = null;\n\n    /**\n     * @type {Error}\n     * @private\n     */\n    this.error_ = null;\n\n    /**\n     * @type {import('./size.js').Size|null}\n     * @private\n     */\n    this.size_ = options.size || null;\n  }\n\n  /**\n   * Get the tile size.\n   * @return {import('./size.js').Size} Tile size.\n   */\n  getSize() {\n    if (this.size_) {\n      return this.size_;\n    }\n    const imageData = asImageLike(this.data_);\n    if (imageData) {\n      return [imageData.width, imageData.height];\n    }\n    return defaultSize;\n  }\n\n  /**\n   * Get the data for the tile.\n   * @return {Data} Tile data.\n   * @api\n   */\n  getData() {\n    return this.data_;\n  }\n\n  /**\n   * Get any loading error.\n   * @return {Error} Loading error.\n   * @api\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @api\n   */\n  load() {\n    if (this.state !== TileState.IDLE && this.state !== TileState.ERROR) {\n      return;\n    }\n    this.state = TileState.LOADING;\n    this.changed();\n\n    const self = this;\n    this.loader_()\n      .then(function (data) {\n        self.data_ = data;\n        self.state = TileState.LOADED;\n        self.changed();\n      })\n      .catch(function (error) {\n        self.error_ = error;\n        self.state = TileState.ERROR;\n        self.changed();\n      });\n  }\n}\n\nexport default DataTile;\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @protected\n     */\n    this.disposed = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed) {\n      this.disposed = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport {assert} from './asserts.js';\nimport {listen, unlistenByKey} from './events.js';\n\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n\n/***\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object~BaseObject} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature.js';\n * import Polygon from 'ol/geom/Polygon.js';\n * import Point from 'ol/geom/Point.js';\n *\n * const feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon',\n * });\n *\n * // get the polygon geometry\n * const poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * const point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n */\nclass Feature extends BaseObject {\n  /**\n   * @param {Geometry|ObjectWithGeometry<Geometry>} [geometryOrProperties]\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n  constructor(geometryOrProperties) {\n    super();\n\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {FeatureOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = undefined;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.geometryName_ = 'geometry';\n\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n    this.style_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n    this.styleFunction_ = undefined;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.geometryChangeKey_ = null;\n\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n\n    if (geometryOrProperties) {\n      if (\n        typeof (\n          /** @type {?} */ (geometryOrProperties).getSimplifiedGeometry\n        ) === 'function'\n      ) {\n        const geometry = /** @type {Geometry} */ (geometryOrProperties);\n        this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        const properties = geometryOrProperties;\n        this.setProperties(properties);\n      }\n    }\n  }\n\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature<Geometry>} The clone.\n   * @api\n   */\n  clone() {\n    const clone = /** @type {Feature<Geometry>} */ (\n      new Feature(this.hasProperties() ? this.getProperties() : null)\n    );\n    clone.setGeometryName(this.getGeometryName());\n    const geometry = this.getGeometry();\n    if (geometry) {\n      clone.setGeometry(/** @type {Geometry} */ (geometry.clone()));\n    }\n    const style = this.getStyle();\n    if (style) {\n      clone.setStyle(style);\n    }\n    return clone;\n  }\n\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {Geometry|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n  getGeometry() {\n    return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n  getGeometryName() {\n    return this.geometryName_;\n  }\n\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChanged_() {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n    const geometry = this.getGeometry();\n    if (geometry) {\n      this.geometryChangeKey_ = listen(\n        geometry,\n        EventType.CHANGE,\n        this.handleGeometryChange_,\n        this,\n      );\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {Geometry|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n  setGeometry(geometry) {\n    this.set(this.geometryName_, geometry);\n  }\n\n  /**\n   * Set the style for the feature to override the layer style.  This can be a\n   * single style object, an array of styles, or a function that takes a\n   * resolution and returns an array of styles. To unset the feature style, call\n   * `setStyle()` without arguments or a falsey value.\n   * @param {import(\"./style/Style.js\").StyleLike} [style] Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n  setStyle(style) {\n    this.style_ = style;\n    this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n    this.changed();\n  }\n\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n  setId(id) {\n    this.id_ = id;\n    this.changed();\n  }\n\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n  setGeometryName(name) {\n    this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.geometryName_ = name;\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.handleGeometryChanged_();\n  }\n}\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  }\n  /**\n   * @type {Array<import(\"./style/Style.js\").default>}\n   */\n  let styles;\n  if (Array.isArray(obj)) {\n    styles = obj;\n  } else {\n    assert(\n      typeof (/** @type {?} */ (obj).getZIndex) === 'function',\n      'Expected an `ol/style/Style` or an array of `ol/style/Style.js`',\n    );\n    const style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n    styles = [style];\n  }\n  return function () {\n    return styles;\n  };\n}\nexport default Feature;\n","/**\n * @module ol/Image\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport ImageState from './ImageState.js';\nimport {CREATE_IMAGE_BITMAP, IMAGE_DECODE} from './has.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport {toPromise} from './functions.js';\n\n/**\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(import(\"./Image.js\").default, string): void} LoadFunction\n * @api\n */\n\n/**\n * @typedef {Object} ImageObject\n * @property {import(\"./extent.js\").Extent} [extent] Extent, if different from the requested one.\n * @property {import(\"./resolution.js\").ResolutionLike} [resolution] Resolution, if different from the requested one.\n * When x and y resolution are different, use the array type (`[xResolution, yResolution]`).\n * @property {number} [pixelRatio] Pixel ratio, if different from the requested one.\n * @property {import('./DataTile.js').ImageLike} image Image.\n */\n\n/**\n * Loader function used for image sources. Receives extent, resolution and pixel ratio as arguments.\n * For images that cover any extent and resolution (static images), the loader function should not accept\n * any arguments. The function returns an {@link import(\"./DataTile.js\").ImageLike image}, an\n * {@link import(\"./Image.js\").ImageObject image object}, or a promise for the same.\n * For loaders that generate images, the promise should not resolve until the image is loaded.\n * If the returned image does not match the extent, resolution or pixel ratio passed to the loader,\n * it has to return an {@link import(\"./Image.js\").ImageObject image object} with the `image` and the\n * correct `extent`, `resolution` and `pixelRatio`.\n *\n * @typedef {function(import(\"./extent.js\").Extent, number, number, (function(HTMLImageElement, string): void)=): import(\"./DataTile.js\").ImageLike|ImageObject|Promise<import(\"./DataTile.js\").ImageLike|ImageObject>} Loader\n * @api\n */\n\n/**\n * Loader function used for image sources. Receives extent, resolution and pixel ratio as arguments.\n * The function returns a promise for an  {@link import(\"./Image.js\").ImageObject image object}.\n *\n * @typedef {function(import(\"./extent.js\").Extent, number, number, (function(HTMLImageElement, string): void)=): import(\"./DataTile.js\").ImageLike|ImageObject|Promise<import(\"./DataTile.js\").ImageLike|ImageObject>} ImageObjectPromiseLoader\n */\n\nclass ImageWrapper extends EventTarget {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|Array<number>|undefined} resolution Resolution. If provided as array, x and y\n   * resolution will be assumed.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"./ImageState.js\").default|import(\"./Image.js\").Loader} stateOrLoader State.\n   */\n  constructor(extent, resolution, pixelRatio, stateOrLoader) {\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.extent = extent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number|Array<number>|undefined}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state =\n      typeof stateOrLoader === 'function' ? ImageState.IDLE : stateOrLoader;\n\n    /**\n     * @private\n     * @type {import('./DataTile.js').ImageLike|null}\n     */\n    this.image_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"./Image.js\").Loader}\n     */\n    this.loader = typeof stateOrLoader === 'function' ? stateOrLoader : null;\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  getExtent() {\n    return this.extent;\n  }\n\n  /**\n   * @return {import('./DataTile.js').ImageLike} Image.\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * @return {number} PixelRatio.\n   */\n  getPixelRatio() {\n    return this.pixelRatio_;\n  }\n\n  /**\n   * @return {number|Array<number>} Resolution.\n   */\n  getResolution() {\n    return /** @type {number} */ (this.resolution);\n  }\n\n  /**\n   * @return {import(\"./ImageState.js\").default} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      if (this.loader) {\n        this.state = ImageState.LOADING;\n        this.changed();\n        const resolution = this.getResolution();\n        const requestResolution = Array.isArray(resolution)\n          ? resolution[0]\n          : resolution;\n        toPromise(() =>\n          this.loader(\n            this.getExtent(),\n            requestResolution,\n            this.getPixelRatio(),\n          ),\n        )\n          .then((image) => {\n            if ('image' in image) {\n              this.image_ = image.image;\n            }\n            if ('extent' in image) {\n              this.extent = image.extent;\n            }\n            if ('resolution' in image) {\n              this.resolution = image.resolution;\n            }\n            if ('pixelRatio' in image) {\n              this.pixelRatio_ = image.pixelRatio;\n            }\n            if (\n              image instanceof HTMLImageElement ||\n              image instanceof ImageBitmap ||\n              image instanceof HTMLCanvasElement ||\n              image instanceof HTMLVideoElement\n            ) {\n              this.image_ = image;\n            }\n            this.state = ImageState.LOADED;\n          })\n          .catch((error) => {\n            this.state = ImageState.ERROR;\n            console.error(error); // eslint-disable-line no-console\n          })\n          .finally(() => this.changed());\n      }\n    }\n  }\n\n  /**\n   * @param {import('./DataTile.js').ImageLike} image The image.\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * @param {number|Array<number>} resolution Resolution.\n   */\n  setResolution(resolution) {\n    this.resolution = resolution;\n  }\n}\n\n/**\n * @param {import('./DataTile.js').ImageLike} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n  const img = /** @type {HTMLImageElement} */ (image);\n  let listening = true;\n  let decoding = false;\n  let loaded = false;\n\n  const listenerKeys = [\n    listenOnce(img, EventType.LOAD, function () {\n      loaded = true;\n      if (!decoding) {\n        loadHandler();\n      }\n    }),\n  ];\n\n  if (img.src && IMAGE_DECODE) {\n    decoding = true;\n    img\n      .decode()\n      .then(function () {\n        if (listening) {\n          loadHandler();\n        }\n      })\n      .catch(function (error) {\n        if (listening) {\n          if (loaded) {\n            loadHandler();\n          } else {\n            errorHandler();\n          }\n        }\n      });\n  } else {\n    listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n  }\n\n  return function unlisten() {\n    listening = false;\n    listenerKeys.forEach(unlistenByKey);\n  };\n}\n\n/**\n * Loads an image.\n * @param {HTMLImageElement} image Image, not yet loaded.\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\n * @return {Promise<HTMLImageElement>} Promise resolving to an `HTMLImageElement`.\n * @api\n */\nexport function load(image, src) {\n  return new Promise((resolve, reject) => {\n    function handleLoad() {\n      unlisten();\n      resolve(image);\n    }\n    function handleError() {\n      unlisten();\n      reject(new Error('Image load error'));\n    }\n    function unlisten() {\n      image.removeEventListener('load', handleLoad);\n      image.removeEventListener('error', handleError);\n    }\n    image.addEventListener('load', handleLoad);\n    image.addEventListener('error', handleError);\n    if (src) {\n      image.src = src;\n    }\n  });\n}\n\n/**\n * @param {HTMLImageElement} image Image, not yet loaded.\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\n * @return {Promise<HTMLImageElement>} Promise resolving to an `HTMLImageElement`.\n */\nexport function decodeFallback(image, src) {\n  if (src) {\n    image.src = src;\n  }\n  return image.src && IMAGE_DECODE\n    ? new Promise((resolve, reject) =>\n        image\n          .decode()\n          .then(() => resolve(image))\n          .catch((e) =>\n            image.complete && image.width ? resolve(image) : reject(e),\n          ),\n      )\n    : load(image);\n}\n\n/**\n * Loads an image and decodes it to an `ImageBitmap` if `createImageBitmap()` is supported. Returns\n * the loaded image otherwise.\n * @param {HTMLImageElement} image Image, not yet loaded.\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\n * @return {Promise<ImageBitmap|HTMLImageElement>} Promise resolving to an `ImageBitmap` or an\n * `HTMLImageElement` if `createImageBitmap()` is not supported.\n * @api\n */\nexport function decode(image, src) {\n  if (src) {\n    image.src = src;\n  }\n  return image.src && IMAGE_DECODE && CREATE_IMAGE_BITMAP\n    ? image\n        .decode()\n        .then(() => createImageBitmap(image))\n        .catch((e) => {\n          if (image.complete && image.width) {\n            return image;\n          }\n          throw e;\n        })\n    : decodeFallback(image);\n}\n\nexport default ImageWrapper;\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4,\n};\n","/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenImage} from './Image.js';\n\nclass ImageTile extends Tile {\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"./TileState.js\").default} state State.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @param {import(\"./Tile.js\").Options} [options] Tile options.\n   */\n  constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, options) {\n    super(tileCoord, state, options);\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * Image URI\n     *\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    this.key = src;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n  }\n\n  /**\n   * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Sets an HTML image element for this tile (may be a Canvas or preloaded Image).\n   * @param {HTMLCanvasElement|HTMLImageElement} element Element.\n   */\n  setImage(element) {\n    this.image_ = element;\n    this.state = TileState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = TileState.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    const image = /** @type {HTMLImageElement} */ (this.image_);\n    if (image.naturalWidth && image.naturalHeight) {\n      this.state = TileState.LOADED;\n    } else {\n      this.state = TileState.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   *\n   * To retry loading tiles on failed requests, use a custom `tileLoadFunction`\n   * that checks for error status codes and reloads only when the status code is\n   * 408, 429, 500, 502, 503 and 504, and only when not too many retries have been\n   * made already:\n   *\n   * ```js\n   * const retryCodes = [408, 429, 500, 502, 503, 504];\n   * const retries = {};\n   * source.setTileLoadFunction((tile, src) => {\n   *   const image = tile.getImage();\n   *   fetch(src)\n   *     .then((response) => {\n   *       if (retryCodes.includes(response.status)) {\n   *         retries[src] = (retries[src] || 0) + 1;\n   *         if (retries[src] <= 3) {\n   *           setTimeout(() => tile.load(), retries[src] * 1000);\n   *         }\n   *         return Promise.reject();\n   *       }\n   *       return response.blob();\n   *     })\n   *     .then((blob) => {\n   *       const imageUrl = URL.createObjectURL(blob);\n   *       image.src = imageUrl;\n   *       setTimeout(() => URL.revokeObjectURL(imageUrl), 5000);\n   *     })\n   *     .catch(() => tile.setState(3)); // error\n   * });\n   * ```\n   *\n   * @api\n   */\n  load() {\n    if (this.state == TileState.ERROR) {\n      this.state = TileState.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n      this.tileLoadFunction_(this, this.src_);\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this),\n      );\n    }\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  const ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n","/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nclass Kinetic {\n  /**\n   * @param {number} decay Rate of decay (must be negative).\n   * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n   * @param {number} delay Delay to consider to calculate the kinetic\n   *     initial values (milliseconds).\n   */\n  constructor(decay, minVelocity, delay) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.decay_ = decay;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minVelocity_ = minVelocity;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delay_ = delay;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.points_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  begin() {\n    this.points_.length = 0;\n    this.angle_ = 0;\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update(x, y) {\n    this.points_.push(x, y, Date.now());\n  }\n\n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end() {\n    if (this.points_.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false;\n    }\n    const delay = Date.now() - this.delay_;\n    const lastIndex = this.points_.length - 3;\n    if (this.points_[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false;\n    }\n\n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3;\n    while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n      firstIndex -= 3;\n    }\n\n    const duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n    // we don't want a duration of 0 (divide by zero)\n    // we also make sure the user panned for a duration of at least one frame\n    // (1/60s) to compute sane displacement values\n    if (duration < 1000 / 60) {\n      return false;\n    }\n\n    const dx = this.points_[lastIndex] - this.points_[firstIndex];\n    const dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n    this.angle_ = Math.atan2(dy, dx);\n    this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n    return this.initialVelocity_ > this.minVelocity_;\n  }\n\n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance() {\n    return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n  }\n\n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  getAngle() {\n    return this.angle_;\n  }\n}\n\nexport default Kinetic;\n","/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nclass MapBrowserEvent extends MapEvent {\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./Map.js\").default} map Map.\n   * @param {EVENT} originalEvent Original event.\n   * @param {boolean} [dragging] Is the map currently being dragged?\n   * @param {import(\"./Map.js\").FrameState} [frameState] Frame state.\n   * @param {Array<PointerEvent>} [activePointers] Active pointers.\n   */\n  constructor(type, map, originalEvent, dragging, frameState, activePointers) {\n    super(type, map, frameState);\n\n    /**\n     * The original browser event.\n     * @const\n     * @type {EVENT}\n     * @api\n     */\n    this.originalEvent = originalEvent;\n\n    /**\n     * The map pixel relative to the viewport corresponding to the original browser event.\n     * @type {?import(\"./pixel.js\").Pixel}\n     */\n    this.pixel_ = null;\n\n    /**\n     * The coordinate in the user projection corresponding to the original browser event.\n     * @type {?import(\"./coordinate.js\").Coordinate}\n     */\n    this.coordinate_ = null;\n\n    /**\n     * Indicates if the map is currently being dragged. Only set for\n     * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n     *\n     * @type {boolean}\n     * @api\n     */\n    this.dragging = dragging !== undefined ? dragging : false;\n\n    /**\n     * @type {Array<PointerEvent>|undefined}\n     */\n    this.activePointers = activePointers;\n  }\n\n  /**\n   * The map pixel relative to the viewport corresponding to the original event.\n   * @type {import(\"./pixel.js\").Pixel}\n   * @api\n   */\n  get pixel() {\n    if (!this.pixel_) {\n      this.pixel_ = this.map.getEventPixel(this.originalEvent);\n    }\n    return this.pixel_;\n  }\n  set pixel(pixel) {\n    this.pixel_ = pixel;\n  }\n\n  /**\n   * The coordinate corresponding to the original browser event.  This will be in the user\n   * projection if one is set.  Otherwise it will be in the view projection.\n   * @type {import(\"./coordinate.js\").Coordinate}\n   * @api\n   */\n  get coordinate() {\n    if (!this.coordinate_) {\n      this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n    }\n    return this.coordinate_;\n  }\n  set coordinate(coordinate) {\n    this.coordinate_ = coordinate;\n  }\n\n  /**\n   * Prevents the default browser action.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n   * @api\n   */\n  preventDefault() {\n    super.preventDefault();\n    if ('preventDefault' in this.originalEvent) {\n      /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n    }\n  }\n\n  /**\n   * Prevents further propagation of the current event.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n   * @api\n   */\n  stopPropagation() {\n    super.stopPropagation();\n    if ('stopPropagation' in this.originalEvent) {\n      /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n    }\n  }\n}\n\nexport default MapBrowserEvent;\n","/**\n * @module ol/MapBrowserEventHandler\n */\n\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport {PASSIVE_EVENT_LISTENERS} from './has.js';\nimport {listen, unlistenByKey} from './events.js';\n\nclass MapBrowserEventHandler extends Target {\n  /**\n   * @param {import(\"./Map.js\").default} map The map with the viewport to listen to events on.\n   * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n   */\n  constructor(map, moveTolerance) {\n    super(map);\n\n    /**\n     * This is the element that we will listen to the real events on.\n     * @type {import(\"./Map.js\").default}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {ReturnType<typeof setTimeout>}\n     * @private\n     */\n    this.clickTimeoutId_;\n\n    /**\n     * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n     * @type {boolean}\n     */\n    this.emulateClicks_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_ = false;\n\n    /**\n     * @type {!Array<import(\"./events.js\").EventsKey>}\n     * @private\n     */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n\n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * Set on pointerdown.\n     * @type {PointerEvent|null}\n     * @private\n     */\n    this.down_ = null;\n\n    const element = this.map_.getViewport();\n\n    /**\n     * @type {Array<PointerEvent>}\n     * @private\n     */\n    this.activePointers_ = [];\n\n    /**\n     * @type {!Object<number, Event>}\n     * @private\n     */\n    this.trackedTouches_ = {};\n\n    this.element_ = element;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.pointerdownListenerKey_ = listen(\n      element,\n      PointerEventType.POINTERDOWN,\n      this.handlePointerDown_,\n      this,\n    );\n\n    /**\n     * @type {PointerEvent}\n     * @private\n     */\n    this.originalPointerMoveEvent_;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.relayedListenerKey_ = listen(\n      element,\n      PointerEventType.POINTERMOVE,\n      this.relayMoveEvent_,\n      this,\n    );\n\n    /**\n     * @private\n     */\n    this.boundHandleTouchMove_ = this.handleTouchMove_.bind(this);\n\n    this.element_.addEventListener(\n      EventType.TOUCHMOVE,\n      this.boundHandleTouchMove_,\n      PASSIVE_EVENT_LISTENERS ? {passive: false} : false,\n    );\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  emulateClick_(pointerEvent) {\n    let newEvent = new MapBrowserEvent(\n      MapBrowserEventType.CLICK,\n      this.map_,\n      pointerEvent,\n    );\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== undefined) {\n      // double-click\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = undefined;\n      newEvent = new MapBrowserEvent(\n        MapBrowserEventType.DBLCLICK,\n        this.map_,\n        pointerEvent,\n      );\n      this.dispatchEvent(newEvent);\n    } else {\n      // click\n      this.clickTimeoutId_ = setTimeout(() => {\n        this.clickTimeoutId_ = undefined;\n        const newEvent = new MapBrowserEvent(\n          MapBrowserEventType.SINGLECLICK,\n          this.map_,\n          pointerEvent,\n        );\n        this.dispatchEvent(newEvent);\n      }, 250);\n    }\n  }\n\n  /**\n   * Keeps track on how many pointers are currently active.\n   *\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  updateActivePointers_(pointerEvent) {\n    const event = pointerEvent;\n    const id = event.pointerId;\n\n    if (\n      event.type == MapBrowserEventType.POINTERUP ||\n      event.type == MapBrowserEventType.POINTERCANCEL\n    ) {\n      delete this.trackedTouches_[id];\n      for (const pointerId in this.trackedTouches_) {\n        if (this.trackedTouches_[pointerId].target !== event.target) {\n          // Some platforms assign a new pointerId when the target changes.\n          // If this happens, delete one tracked pointer. If there is more\n          // than one tracked pointer for the old target, it will be cleared\n          // by subsequent POINTERUP events from other pointers.\n          delete this.trackedTouches_[pointerId];\n          break;\n        }\n      }\n    } else if (\n      event.type == MapBrowserEventType.POINTERDOWN ||\n      event.type == MapBrowserEventType.POINTERMOVE\n    ) {\n      this.trackedTouches_[id] = event;\n    }\n    this.activePointers_ = Object.values(this.trackedTouches_);\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerUp_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserEvent(\n      MapBrowserEventType.POINTERUP,\n      this.map_,\n      pointerEvent,\n      undefined,\n      undefined,\n      this.activePointers_,\n    );\n    this.dispatchEvent(newEvent);\n\n    // We emulate click events on left mouse button click, touch contact, and pen\n    // contact. isMouseActionButton returns true in these cases (evt.button is set\n    // to 0).\n    // See http://www.w3.org/TR/pointerevents/#button-states\n    // We only fire click, singleclick, and doubleclick if nobody has called\n    // event.preventDefault().\n    if (\n      this.emulateClicks_ &&\n      !newEvent.defaultPrevented &&\n      !this.dragging_ &&\n      this.isMouseActionButton_(pointerEvent)\n    ) {\n      this.emulateClick_(this.down_);\n    }\n\n    if (this.activePointers_.length === 0) {\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} If the left mouse button was pressed.\n   * @private\n   */\n  isMouseActionButton_(pointerEvent) {\n    return pointerEvent.button === 0;\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerDown_(pointerEvent) {\n    this.emulateClicks_ = this.activePointers_.length === 0;\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserEvent(\n      MapBrowserEventType.POINTERDOWN,\n      this.map_,\n      pointerEvent,\n      undefined,\n      undefined,\n      this.activePointers_,\n    );\n    this.dispatchEvent(newEvent);\n\n    this.down_ = new PointerEvent(pointerEvent.type, pointerEvent);\n    Object.defineProperty(this.down_, 'target', {\n      writable: false,\n      value: pointerEvent.target,\n    });\n\n    if (this.dragListenerKeys_.length === 0) {\n      const doc = this.map_.getOwnerDocument();\n      this.dragListenerKeys_.push(\n        listen(\n          doc,\n          MapBrowserEventType.POINTERMOVE,\n          this.handlePointerMove_,\n          this,\n        ),\n        listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n         * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n         * the `pointerup` and `pointermove` listeners.\n         *\n         * The reason for this is the following: `TouchSource.vacuumTouches_()`\n         * issues `pointercancel` events, when there was no `touchend` for a\n         * `touchstart`. Now, let's say a first `touchstart` is registered on\n         * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n         * But `documentPointerEventHandler_` doesn't know about the first\n         * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n         * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n         * only registered there.\n         */\n        listen(\n          this.element_,\n          MapBrowserEventType.POINTERCANCEL,\n          this.handlePointerUp_,\n          this,\n        ),\n      );\n      if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n        this.dragListenerKeys_.push(\n          listen(\n            this.element_.getRootNode(),\n            MapBrowserEventType.POINTERUP,\n            this.handlePointerUp_,\n            this,\n          ),\n        );\n      }\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerMove_(pointerEvent) {\n    // Between pointerdown and pointerup, pointermove events are triggered.\n    // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n    // moved a significant distance.\n    if (this.isMoving_(pointerEvent)) {\n      this.updateActivePointers_(pointerEvent);\n      this.dragging_ = true;\n      const newEvent = new MapBrowserEvent(\n        MapBrowserEventType.POINTERDRAG,\n        this.map_,\n        pointerEvent,\n        this.dragging_,\n        undefined,\n        this.activePointers_,\n      );\n      this.dispatchEvent(newEvent);\n    }\n  }\n\n  /**\n   * Wrap and relay a pointermove event.\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  relayMoveEvent_(pointerEvent) {\n    this.originalPointerMoveEvent_ = pointerEvent;\n    const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(\n      new MapBrowserEvent(\n        MapBrowserEventType.POINTERMOVE,\n        this.map_,\n        pointerEvent,\n        dragging,\n      ),\n    );\n  }\n\n  /**\n   * Flexible handling of a `touch-action: none` css equivalent: because calling\n   * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n   * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n   * when an interaction (currently `DragPan` handles the event.\n   * @param {TouchEvent} event Event.\n   * @private\n   */\n  handleTouchMove_(event) {\n    // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n    // may not be initialized yet when we get here on a platform without native pointer events,\n    // when elm-pep is used as pointer events polyfill.\n    const originalEvent = this.originalPointerMoveEvent_;\n    if (\n      (!originalEvent || originalEvent.defaultPrevented) &&\n      (typeof event.cancelable !== 'boolean' || event.cancelable === true)\n    ) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} Is moving.\n   * @private\n   */\n  isMoving_(pointerEvent) {\n    return (\n      this.dragging_ ||\n      Math.abs(pointerEvent.clientX - this.down_.clientX) >\n        this.moveTolerance_ ||\n      Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_\n    );\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    if (this.relayedListenerKey_) {\n      unlistenByKey(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    this.element_.removeEventListener(\n      EventType.TOUCHMOVE,\n      this.boundHandleTouchMove_,\n    );\n\n    if (this.pointerdownListenerKey_) {\n      unlistenByKey(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n\n    this.element_ = null;\n    super.disposeInternal();\n  }\n}\n\nexport default MapBrowserEventHandler;\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel',\n};\n\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n","/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map event.\n */\nclass MapEvent extends Event {\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./Map.js\").default} map Map.\n   * @param {?import(\"./Map.js\").FrameState} [frameState] Frame state.\n   */\n  constructor(type, map, frameState) {\n    super(type);\n\n    /**\n     * The map where the event occurred.\n     * @type {import(\"./Map.js\").default}\n     * @api\n     */\n    this.map = map;\n\n    /**\n     * The frame state at the time of the event.\n     * @type {?import(\"./Map.js\").FrameState}\n     * @api\n     */\n    this.frameState = frameState !== undefined ? frameState : null;\n  }\n}\n\nexport default MapEvent;\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend',\n\n  /**\n   * Triggered when loading of additional map data (tiles, images, features) starts.\n   * @event module:ol/MapEvent~MapEvent#loadstart\n   * @api\n   */\n  LOADSTART: 'loadstart',\n\n  /**\n   * Triggered when loading of additional map data has completed.\n   * @event module:ol/MapEvent~MapEvent#loadend\n   * @api\n   */\n  LOADEND: 'loadend',\n};\n\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view',\n};\n"],"names":["earcut","data","holeIndices","dim","minX","minY","maxX","maxY","x","y","invSize","hasHoles","length","outerLen","outerNode","linkedList","triangles","next","prev","eliminateHoles","i","Math","max","earcutLinked","start","end","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","again","p","steiner","area","ear","pass","indexCurve","stop","isEarHashed","isEar","push","cureLocalIntersections","splitEarcut","a","b","c","ax","bx","cx","ay","by","cy","x0","y0","x1","y1","pointInTriangle","minZ","zOrder","maxZ","prevZ","n","nextZ","z","intersects","locallyInside","isValidDiagonal","splitPolygon","len","list","queue","getLeftmost","sort","compareX","eliminateHole","hole","bridge","findHoleBridge","bridgeReverse","m","hx","hy","qx","Infinity","tan","mx","my","tanMin","abs","sectorContainsSector","sortLinked","q","e","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","r","p1","p2","q1","q2","o1","sign","o2","o3","o4","onSegment","min","num","inside","a2","Node","b2","an","bp","this","sum","j","module","exports","deviation","polygonArea","trianglesArea","flatten","result","vertices","holes","dimensions","holeIndex","d","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","baseHues","parse","cstr","space","parts","alpha","values","String","toLowerCase","slice","base","size","isShort","parseInt","exec","name","replace","dims","trim","split","shift","map","parseFloat","undefined","endsWith","PI","pop","test","match","value","join","channel","alias","rgb","hsl","t1","t2","t3","val","h","s","l","rgba","color","Array","isArray","raw","arguments","Number","parsed","g","delta","xyz","arg","o","_u","_v","u","v","xn","yn","zn","un","vn","k","whitepoint","pow","luv","yr","lchuv","hr","cos","sin","sqrt","atan2","A","C","D50","D55","D65","D75","F2","F7","F11","E","_xyz","ol_control_LayerSwitcher","constructor","options","element","create","className","switcherClass","super","target","self","dcount","show_progress","oninfo","onextent","hasextent","extent","hastrash","trash","reordering","_layers","_layerGroup","layerGroup","getLayers","onchangeCheck","displayInLayerSwitcher","classList","add","collapsed","button","type","parent","addEventListener","toggle","dispatchEvent","contains","preventDefault","overflow","mouseover","remove","minibar","noScroll","topv","click","botv","_noScroll","panel_","panelContainer_","html","addListener","wheelDelta","detail","stopPropagation","header_","set","drawDelay","selection","setTimeout","mbar","scrollDiv","mousewheel","vertical","on","refresh","bind","layer","get","setMap","drawPanel","_listener","moveend","viewChange","change","getLayerGroup","show","hide","isOpen","setHeader","setHTML","dir","hidden","setStyle","height","outerHeight","hp","dh","offsetTop","top","li","querySelectorAll","lh","getStyle","round","_setLayerForLI","listeners","setLayerOpacity","setLayerVisibility","key","querySelector","style","left","getOpacity","checked","getVisible","_clearLayerForLI","forEach","_getLayerForLI","testLayerVisibility","getPanel","getMap","drawPanel_","dragging_","scrollTop","drawList","switchLayerVisibility","layers","setVisible","res","getView","getResolution","zoom","getZoom","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","ex0","getExtent","ex","calculateExtent","getSize","dragOrdering_","pageY","dragElt","group","elt","currentTarget","parentNode","panel","pageY0","touches","changedTouches","drop","isSelected","getSelection","collection","getArray","removeAt","insertAt","selectLayer","removeListener","document","move","innerHTML","position","offsetLeft","opacity","width","outerWidth","offsetRect","elementFromPoint","clientX","clientY","shadowRoot","composedPath","tagName","dragOpacity_","pageX","nextElementSibling","setOpacity","ul","setVisibility","onInfo","zoomExtent","fit","removeLayer","getLength","call","createLi","_selectedLayer","layer_buttons","label","title","userSelect","tip","up","nb","plus","info","setprogress_","layerswitcher_progress","op","offsetX","ul2","getLayerClass","getFeatures","silent","item","loaded","loading","draw","toFixed","getSource","prototype","down","ol_ext_input_Base","ol_Object","tout","input","createElement","setAttribute","step","appendChild","disabled","display","clearTimeout","_listenDrag","cback","handle","moving","listen","removeEventListener","setValue","Event","getValue","getInputElement","ol_ext_input_Checkbox","Element","insertBefore","after","createTextNode","isChecked","ol_ext_input_Switch","ol_ext_input_Radio","ol_ext_element","attr","innerText","text","opt","Object","assign","eventType","fn","useCapture","el","st","styleProp","defaultView","ownerDocument","getComputedStyle","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","offsetHeight","offsetWidth","rect","getBoundingClientRect","window","pageYOffset","documentElement","body","pageXOffset","scrollLeft","bottom","right","offset","getOffset","offsetParent","fixed","gleft","gtop","getRect","scale","isbar","scrollContainer","scrollbar","pos","speed","dt","onmove","page","scroll","updateCounter","updateMinibar","updateMinibarDelay","pheight","clientHeight","scrollHeight","onPointerDown","Date","onPointerMove","onPointerUp","animate","to","init","onMouseWheel","eventName","event","CustomEvent","createEvent","initCustomEvent","cursor","getTargetElement","Property","LENGTH","CollectionEvent","index","Collection","array","once","unique_","unique","array_","ii","assertUnique_","updateLength_","clear","extend","arr","f","elem","Error","splice","ADD","REMOVE","setAt","except","asImageLike","Image","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","asArrayLike","Uint8Array","Uint8ClampedArray","Float32Array","DataView","sharedContext","toArray","image","willReadFrequently","canvas","clearRect","drawImage","getImageData","defaultSize","DataTile","state","IDLE","tileCoord","transition","interpolate","loader_","loader","data_","error_","size_","imageData","getData","getError","load","ERROR","LOADING","changed","then","LOADED","catch","error","Disposable","disposed","dispose","disposeInternal","Feature","geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","geometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","getId","getStyleFunction","handleGeometryChange_","CHANGE","createStyleFunction","setId","id","removeChangeListener","obj","styles","listenImage","loadHandler","errorHandler","img","listening","decoding","listenerKeys","LOAD","src","decode","Promise","resolve","reject","handleLoad","unlisten","handleError","decodeFallback","complete","EMPTY","ImageTile","crossOrigin","tileLoadFunction","crossOrigin_","src_","image_","unlisten_","tileLoadFunction_","getImage","setImage","unlistenImage_","handleImageError_","getBlankImage","handleImageLoad_","naturalWidth","naturalHeight","ctx","fillStyle","fillRect","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","begin","update","now","lastIndex","firstIndex","duration","dx","dy","getDistance","getAngle","MapBrowserEvent","originalEvent","dragging","frameState","activePointers","pixel_","coordinate_","pixel","getEventPixel","coordinate","getCoordinateFromPixel","MapBrowserEventHandler","moveTolerance","map_","clickTimeoutId_","emulateClicks_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","element_","pointerdownListenerKey_","POINTERDOWN","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","POINTERMOVE","relayMoveEvent_","boundHandleTouchMove_","handleTouchMove_","TOUCHMOVE","passive","emulateClick_","pointerEvent","newEvent","CLICK","DBLCLICK","SINGLECLICK","updateActivePointers_","pointerId","POINTERUP","POINTERCANCEL","handlePointerUp_","defaultPrevented","isMouseActionButton_","PointerEvent","defineProperty","writable","doc","getOwnerDocument","handlePointerMove_","getRootNode","isMoving_","POINTERDRAG","cancelable","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","MapEvent","POSTRENDER","MOVESTART","MOVEEND","LOADSTART","LOADEND","LAYERGROUP","SIZE","TARGET","VIEW"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./node_modules/ol/MapBrowserEventType.js","webpack:///./node_modules/ol/CollectionEventType.js","webpack:///./node_modules/ol/Kinetic.js","webpack:///./node_modules/ol/Observable.js","webpack:///./node_modules/ol/Feature.js","webpack:///./node_modules/ol/MapBrowserEvent.js","webpack:///./node_modules/ol/MapEventType.js","webpack:///./node_modules/ol/MapBrowserEventHandler.js","webpack:///./node_modules/ol/PluggableMap.js","webpack:///./node_modules/ol/Map.js","webpack:///./node_modules/ol/ImageBase.js","webpack:///./node_modules/ol/Image.js","webpack:///./node_modules/ol/MapEvent.js","webpack:///./node_modules/ol/ObjectEventType.js","webpack:///./node_modules/ol/ImageTile.js","webpack:///./node_modules/ol/ImageState.js","webpack:///./node_modules/ol/Disposable.js","webpack:///./node_modules/ol/DataTile.js","webpack:///./node_modules/ol/Object.js","webpack:///./node_modules/ol/Collection.js","webpack:///./node_modules/ol/MapProperty.js"],"names":["SINGLECLICK","CLICK","DBLCLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","ADD","REMOVE","Kinetic","decay","minVelocity","delay","this","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","prototype","begin","length","update","x","y","push","Date","now","end","lastIndex","firstIndex","duration","dx","dy","Math","atan2","sqrt","getDistance","getAngle","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","call","TypeError","String","__","constructor","create","Observable","_super","_this","on","once","un","revision_","changed","dispatchEvent","CHANGE","getRevision","onInternal","type","listener","isArray","len","keys","i","onceInternal","key","ol_key","unInternal","unByKey","ii","removeEventListener","Feature","opt_geometryOrProperties","id_","undefined","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","geometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","style","getStyle","setStyle","get","getId","getStyleFunction","handleGeometryChange_","set","opt_style","createStyleFunction","setId","id","name","removeChangeListener","obj","styles_1","MapBrowserEvent","map","originalEvent","opt_dragging","opt_frameState","pixel_","coordinate_","dragging","defineProperty","getEventPixel","pixel","enumerable","configurable","getCoordinateFromPixel","coordinate","preventDefault","stopPropagation","POSTRENDER","MOVESTART","MOVEEND","LOADSTART","LOADEND","MapBrowserEventHandler","moveTolerance","map_","clickTimeoutId_","emulateClicks_","dragging_","dragListenerKeys_","moveTolerance_","down_","element","getViewport","activePointers_","trackedTouches_","element_","pointerdownListenerKey_","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","relayEvent_","boundHandleTouchMove_","handleTouchMove_","bind","addEventListener","EventType","TOUCHMOVE","passive","emulateClick_","pointerEvent","newEvent","MapBrowserEventType","clearTimeout","setTimeout","updateActivePointers_","event","pointerId","handlePointerUp_","defaultPrevented","isMouseActionButton_","forEach","button","property","value","doc","getOwnerDocument","handlePointerMove_","getRootNode","isMoving_","cancelable","abs","clientX","clientY","disposeInternal","Target","removeLayerMapProperty","layer","Layer","setMapInternal","getLayers","setLayerMapProperty","layers","getArray","PluggableMap","options","optionsInternal","createOptionsInternal","renderComplete_","loaded_","boundHandleBrowserEvent_","handleBrowserEvent","maxTilesLoading_","maxTilesLoading","pixelRatio_","pixelRatio","postRenderTimeoutHandle_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","document","createElement","className","window","position","overflow","width","height","overlayContainer_","zIndex","pointerEvents","appendChild","overlayContainerStopEvent_","mapBrowserEventHandler_","keyboardEventTarget_","keyboardEventTarget","targetChangeHandlerKeys_","controls","Collection","interactions","overlays_","overlays","overlayIdIndex_","renderer_","postRenderFunctions_","tileQueue_","TileQueue","getTilePriority","handleTileChange_","MapProperty","LAYERGROUP","handleLayerGroupChanged_","VIEW","handleViewChanged_","SIZE","handleSizeChanged_","TARGET","handleTargetChanged_","values","view","View","then","viewOptions","setView","CollectionEventType","setMap","addOverlayInternal_","overlay","toString","control","interaction","createRenderer","Error","addControl","getControls","addInteraction","getInteractions","addLayer","getLayerGroup","handleLayerAdd_","addOverlay","getOverlays","setTarget","forEachFeatureAtPixel","callback","opt_options","getCoordinateFromPixelInternal","hitTolerance","layerFilter","checkWrapped","forEachFeatureAtCoordinate","getFeaturesAtPixel","features","feature","getAllLayers","addLayersFrom","layerGroup","forEachLayerAtPixel","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","getEventCoordinateInternal","viewportPosition","getBoundingClientRect","eventPosition","changedTouches","left","top","getTarget","getTargetElement","target","getElementById","getView","getProjection","frameState","pixelToCoordinateTransform","slice","getOverlayById","setLayers","group","collection","clear","extend","getLoadingOrNotReady","layerStatesArray","getLayerStatesArray","state","visible","renderer","getRenderer","ready","source","getSource","loading","getPixelFromCoordinate","viewCoordinate","getPixelFromCoordinateInternal","coordinateToPixelTransform","getSize","getOverlayContainer","getOverlayContainerStopEvent","targetElement","ownerDocument","tile","tileSourceKey","tileCenter","tileResolution","browserEvent","opt_type","mapBrowserEvent","handleMapBrowserEvent","eventType","WHEEL","KEYDOWN","rootNode","contains","documentElement","interactionsArray","getMap","getActive","cont","handleEvent","propagationStopped","handlePostRender","tileQueue","isEmpty","maxTotalLoading","maxNewLoads","hints","viewHints","ViewHint","ANIMATING","INTERACTING","lowOnFrameBudget","time","getTilesLoading","reprioritize","loadMoreTiles","animate","hasListener","RENDERCOMPLETE","dispatchRenderEvent","MapEvent","MapEventType","postRenderFunctions","getAnimating","resolveConstraints","render","CONTEXTMENU","dispose","defaultView","KEYPRESS","RESIZE","updateSize","cancelAnimationFrame","handleViewPropertyChanged_","updateViewportSize_","ObjectEventType","PROPERTYCHANGE","Group","handleLayerRemove_","isRendered","renderSync","redrawText","layerStates","hasRenderer","handleFontsChanged","requestAnimationFrame","removeControl","remove","removeInteraction","removeLayer","removeOverlay","size","previousFrameState","isDef","getHints","viewState","getState","declutterTree","extent","center","resolution","rotation","index","layerIndex","usedTiles","wantedTiles","mapId","renderTargets","nextCenter","nextResolution","isNaN","nextRotation","nextExtent","renderFrame","apply","moveStart","idle","getCount","setLayerGroup","oldLayerGroup","setSize","computedStyle","getComputedStyle","offsetWidth","parseFloat","offsetHeight","getClientRects","console","warn","parseInt","setViewportSize","Map","onFocusOnly","Composite","ImageBase","getExtent","getImage","getPixelRatio","getResolution","load","ImageWrapper","src","crossOrigin","imageLoadFunction","ImageState","IDLE","src_","image_","Image","unlisten_","imageLoadFunction_","handleImageError_","ERROR","unlistenImage_","handleImageLoad_","LOADED","LOADING","listenImage","setImage","image","loadHandler","errorHandler","img","listening","decoding","loaded","listenerKeys","LOAD","decode","catch","error","ImageTile","tileCoord","tileLoadFunction","crossOrigin_","tileLoadFunction_","getBlankImage","naturalWidth","naturalHeight","EMPTY","ctx","fillStyle","fillRect","canvas","Disposable","disposed","DataTile","transition","interpolate","loader_","loader","data_","error_","getData","getError","self","data","ObjectEvent","oldValue","BaseObject","opt_values","values_","getKeys","notify","concat","opt_silent","applyProperties","unset","Property","LENGTH","CollectionEvent","opt_element","opt_index","opt_array","unique_","unique","array_","assertUnique_","updateLength_","getLength","pop","arr","f","array","item","insertAt","elem","splice","removeAt","n","prev","setAt","j","opt_except"],"mappings":"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","file":"js/chunk-e19d906a.adc79e70.js","sourcesContent":["/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    /**\n     * A true single click with no dragging and no double click. Note that this\n     * event is delayed by 250 ms to ensure that it is not a double click.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n     * @api\n     */\n    SINGLECLICK: 'singleclick',\n    /**\n     * A click with no dragging. A double click will fire two of this.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n     * @api\n     */\n    CLICK: EventType.CLICK,\n    /**\n     * A true double click, with no dragging.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n     * @api\n     */\n    DBLCLICK: EventType.DBLCLICK,\n    /**\n     * Triggered when a pointer is dragged.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n     * @api\n     */\n    POINTERDRAG: 'pointerdrag',\n    /**\n     * Triggered when a pointer is moved. Note that on touch devices this is\n     * triggered when the map is panned, so is not the same as mousemove.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n     * @api\n     */\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel',\n};\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n//# sourceMappingURL=MapBrowserEventType.js.map","/**\n * @module ol/CollectionEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when an item is added to the collection.\n     * @event module:ol/Collection.CollectionEvent#add\n     * @api\n     */\n    ADD: 'add',\n    /**\n     * Triggered when an item is removed from the collection.\n     * @event module:ol/Collection.CollectionEvent#remove\n     * @api\n     */\n    REMOVE: 'remove',\n};\n//# sourceMappingURL=CollectionEventType.js.map","/**\n * @module ol/Kinetic\n */\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nvar Kinetic = /** @class */ (function () {\n    /**\n     * @param {number} decay Rate of decay (must be negative).\n     * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n     * @param {number} delay Delay to consider to calculate the kinetic\n     *     initial values (milliseconds).\n     */\n    function Kinetic(decay, minVelocity, delay) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.decay_ = decay;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minVelocity_ = minVelocity;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.delay_ = delay;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.points_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        this.angle_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.initialVelocity_ = 0;\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    Kinetic.prototype.begin = function () {\n        this.points_.length = 0;\n        this.angle_ = 0;\n        this.initialVelocity_ = 0;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     */\n    Kinetic.prototype.update = function (x, y) {\n        this.points_.push(x, y, Date.now());\n    };\n    /**\n     * @return {boolean} Whether we should do kinetic animation.\n     */\n    Kinetic.prototype.end = function () {\n        if (this.points_.length < 6) {\n            // at least 2 points are required (i.e. there must be at least 6 elements\n            // in the array)\n            return false;\n        }\n        var delay = Date.now() - this.delay_;\n        var lastIndex = this.points_.length - 3;\n        if (this.points_[lastIndex + 2] < delay) {\n            // the last tracked point is too old, which means that the user stopped\n            // panning before releasing the map\n            return false;\n        }\n        // get the first point which still falls into the delay time\n        var firstIndex = lastIndex - 3;\n        while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n            firstIndex -= 3;\n        }\n        var duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n        // we don't want a duration of 0 (divide by zero)\n        // we also make sure the user panned for a duration of at least one frame\n        // (1/60s) to compute sane displacement values\n        if (duration < 1000 / 60) {\n            return false;\n        }\n        var dx = this.points_[lastIndex] - this.points_[firstIndex];\n        var dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n        this.angle_ = Math.atan2(dy, dx);\n        this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n        return this.initialVelocity_ > this.minVelocity_;\n    };\n    /**\n     * @return {number} Total distance travelled (pixels).\n     */\n    Kinetic.prototype.getDistance = function () {\n        return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n    };\n    /**\n     * @return {number} Angle of the kinetic panning animation (radians).\n     */\n    Kinetic.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    return Kinetic;\n}());\nexport default Kinetic;\n//# sourceMappingURL=Kinetic.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { listen, listenOnce, unlistenByKey } from './events.js';\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type, listener: (event: EventClass) => ?) => Return} OnSignature\n */\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return extends void ? void : Return[]} CombinedOnSignature\n */\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n/***\n * @template Return\n * @typedef {OnSignature<EventTypes, import(\"./events/Event.js\").default, Return> & CombinedOnSignature<EventTypes, Return>} ObservableOnSignature\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nvar Observable = /** @class */ (function (_super) {\n    __extends(Observable, _super);\n    function Observable() {\n        var _this = _super.call(this) || this;\n        _this.on =\n            /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (_this.onInternal);\n        _this.once =\n            /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (_this.onceInternal);\n        _this.un = /** @type {ObservableOnSignature<void>} */ (_this.unInternal);\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.revision_ = 0;\n        return _this;\n    }\n    /**\n     * Increases the revision counter and dispatches a 'change' event.\n     * @api\n     */\n    Observable.prototype.changed = function () {\n        ++this.revision_;\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * Get the version number for this object.  Each time the object is modified,\n     * its version number will be incremented.\n     * @return {number} Revision.\n     * @api\n     */\n    Observable.prototype.getRevision = function () {\n        return this.revision_;\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onInternal = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listen(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listen(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onceInternal = function (type, listener) {\n        var key;\n        if (Array.isArray(type)) {\n            var len = type.length;\n            key = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                key[i] = listenOnce(this, type[i], listener);\n            }\n        }\n        else {\n            key = listenOnce(this, /** @type {string} */ (type), listener);\n        }\n        /** @type {Object} */ (listener).ol_key = key;\n        return key;\n    };\n    /**\n     * Unlisten for a certain type of event.\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @protected\n     */\n    Observable.prototype.unInternal = function (type, listener) {\n        var key = /** @type {Object} */ (listener).ol_key;\n        if (key) {\n            unByKey(key);\n        }\n        else if (Array.isArray(type)) {\n            for (var i = 0, ii = type.length; i < ii; ++i) {\n                this.removeEventListener(type[i], listener);\n            }\n        }\n        else {\n            this.removeEventListener(type, listener);\n        }\n    };\n    return Observable;\n}(EventTarget));\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n    if (Array.isArray(key)) {\n        for (var i = 0, ii = key.length; i < ii; ++i) {\n            unlistenByKey(key[i]);\n        }\n    }\n    else {\n        unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n    }\n}\nexport default Observable;\n//# sourceMappingURL=Observable.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n/***\n * @template Geometry\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object~BaseObject} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n */\nvar Feature = /** @class */ (function (_super) {\n    __extends(Feature, _super);\n    /**\n     * @param {Geometry|ObjectWithGeometry<Geometry>} [opt_geometryOrProperties]\n     *     You may pass a Geometry object directly, or an object literal containing\n     *     properties. If you pass an object literal, you may include a Geometry\n     *     associated with a `geometry` key.\n     */\n    function Feature(opt_geometryOrProperties) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {FeatureOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {number|string|undefined}\n         */\n        _this.id_ = undefined;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.geometryName_ = 'geometry';\n        /**\n         * User provided style.\n         * @private\n         * @type {import(\"./style/Style.js\").StyleLike}\n         */\n        _this.style_ = null;\n        /**\n         * @private\n         * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n         */\n        _this.styleFunction_ = undefined;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.geometryChangeKey_ = null;\n        _this.addChangeListener(_this.geometryName_, _this.handleGeometryChanged_);\n        if (opt_geometryOrProperties) {\n            if (typeof (\n            /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry) === 'function') {\n                var geometry = /** @type {Geometry} */ (opt_geometryOrProperties);\n                _this.setGeometry(geometry);\n            }\n            else {\n                /** @type {Object<string, *>} */\n                var properties = opt_geometryOrProperties;\n                _this.setProperties(properties);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Clone this feature. If the original feature has a geometry it\n     * is also cloned. The feature id is not set in the clone.\n     * @return {Feature<Geometry>} The clone.\n     * @api\n     */\n    Feature.prototype.clone = function () {\n        var clone = /** @type {Feature<Geometry>} */ (new Feature(this.hasProperties() ? this.getProperties() : null));\n        clone.setGeometryName(this.getGeometryName());\n        var geometry = this.getGeometry();\n        if (geometry) {\n            clone.setGeometry(/** @type {Geometry} */ (geometry.clone()));\n        }\n        var style = this.getStyle();\n        if (style) {\n            clone.setStyle(style);\n        }\n        return clone;\n    };\n    /**\n     * Get the feature's default geometry.  A feature may have any number of named\n     * geometries.  The \"default\" geometry (the one that is rendered by default) is\n     * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n     * @return {Geometry|undefined} The default geometry for the feature.\n     * @api\n     * @observable\n     */\n    Feature.prototype.getGeometry = function () {\n        return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n    };\n    /**\n     * Get the feature identifier.  This is a stable identifier for the feature and\n     * is either set when reading data from a remote source or set explicitly by\n     * calling {@link module:ol/Feature~Feature#setId}.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Feature.prototype.getId = function () {\n        return this.id_;\n    };\n    /**\n     * Get the name of the feature's default geometry.  By default, the default\n     * geometry is named `geometry`.\n     * @return {string} Get the property name associated with the default geometry\n     *     for this feature.\n     * @api\n     */\n    Feature.prototype.getGeometryName = function () {\n        return this.geometryName_;\n    };\n    /**\n     * Get the feature's style. Will return what was provided to the\n     * {@link module:ol/Feature~Feature#setStyle} method.\n     * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n     * @api\n     */\n    Feature.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the feature's style function.\n     * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n     * representing the current style of this feature.\n     * @api\n     */\n    Feature.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChanged_ = function () {\n        if (this.geometryChangeKey_) {\n            unlistenByKey(this.geometryChangeKey_);\n            this.geometryChangeKey_ = null;\n        }\n        var geometry = this.getGeometry();\n        if (geometry) {\n            this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * Set the default geometry for the feature.  This will update the property\n     * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n     * @param {Geometry|undefined} geometry The new geometry.\n     * @api\n     * @observable\n     */\n    Feature.prototype.setGeometry = function (geometry) {\n        this.set(this.geometryName_, geometry);\n    };\n    /**\n     * Set the style for the feature to override the layer style.  This can be a\n     * single style object, an array of styles, or a function that takes a\n     * resolution and returns an array of styles. To unset the feature style, call\n     * `setStyle()` without arguments or a falsey value.\n     * @param {import(\"./style/Style.js\").StyleLike} [opt_style] Style for this feature.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setStyle = function (opt_style) {\n        this.style_ = opt_style;\n        this.styleFunction_ = !opt_style\n            ? undefined\n            : createStyleFunction(opt_style);\n        this.changed();\n    };\n    /**\n     * Set the feature id.  The feature id is considered stable and may be used when\n     * requesting features or comparing identifiers returned from a remote source.\n     * The feature id can be used with the\n     * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n     * @param {number|string|undefined} id The feature id.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setId = function (id) {\n        this.id_ = id;\n        this.changed();\n    };\n    /**\n     * Set the property name to be used when getting the feature's default geometry.\n     * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n     * this name will be returned.\n     * @param {string} name The property name of the default geometry.\n     * @api\n     */\n    Feature.prototype.setGeometryName = function (name) {\n        this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.geometryName_ = name;\n        this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.handleGeometryChanged_();\n    };\n    return Feature;\n}(BaseObject));\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n    if (typeof obj === 'function') {\n        return obj;\n    }\n    else {\n        /**\n         * @type {Array<import(\"./style/Style.js\").default>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof ( /** @type {?} */(obj).getZIndex) === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n            var style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n            styles_1 = [style];\n        }\n        return function () {\n            return styles_1;\n        };\n    }\n}\nexport default Feature;\n//# sourceMappingURL=Feature.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nvar MapBrowserEvent = /** @class */ (function (_super) {\n    __extends(MapBrowserEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {EVENT} originalEvent Original event.\n     * @param {boolean} [opt_dragging] Is the map currently being dragged?\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapBrowserEvent(type, map, originalEvent, opt_dragging, opt_frameState) {\n        var _this = _super.call(this, type, map, opt_frameState) || this;\n        /**\n         * The original browser event.\n         * @const\n         * @type {EVENT}\n         * @api\n         */\n        _this.originalEvent = originalEvent;\n        /**\n         * The map pixel relative to the viewport corresponding to the original browser event.\n         * @type {?import(\"./pixel.js\").Pixel}\n         */\n        _this.pixel_ = null;\n        /**\n         * The coordinate in the user projection corresponding to the original browser event.\n         * @type {?import(\"./coordinate.js\").Coordinate}\n         */\n        _this.coordinate_ = null;\n        /**\n         * Indicates if the map is currently being dragged. Only set for\n         * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n         *\n         * @type {boolean}\n         * @api\n         */\n        _this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n        return _this;\n    }\n    Object.defineProperty(MapBrowserEvent.prototype, \"pixel\", {\n        /**\n         * The map pixel relative to the viewport corresponding to the original event.\n         * @type {import(\"./pixel.js\").Pixel}\n         * @api\n         */\n        get: function () {\n            if (!this.pixel_) {\n                this.pixel_ = this.map.getEventPixel(this.originalEvent);\n            }\n            return this.pixel_;\n        },\n        set: function (pixel) {\n            this.pixel_ = pixel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MapBrowserEvent.prototype, \"coordinate\", {\n        /**\n         * The coordinate corresponding to the original browser event.  This will be in the user\n         * projection if one is set.  Otherwise it will be in the view projection.\n         * @type {import(\"./coordinate.js\").Coordinate}\n         * @api\n         */\n        get: function () {\n            if (!this.coordinate_) {\n                this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n            }\n            return this.coordinate_;\n        },\n        set: function (coordinate) {\n            this.coordinate_ = coordinate;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Prevents the default browser action.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n     * @api\n     */\n    MapBrowserEvent.prototype.preventDefault = function () {\n        _super.prototype.preventDefault.call(this);\n        if ('preventDefault' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n        }\n    };\n    /**\n     * Prevents further propagation of the current event.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n     * @api\n     */\n    MapBrowserEvent.prototype.stopPropagation = function () {\n        _super.prototype.stopPropagation.call(this);\n        if ('stopPropagation' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n        }\n    };\n    return MapBrowserEvent;\n}(MapEvent));\nexport default MapBrowserEvent;\n//# sourceMappingURL=MapBrowserEvent.js.map","/**\n * @module ol/MapEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered after a map frame is rendered.\n     * @event module:ol/MapEvent~MapEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered when the map starts moving.\n     * @event module:ol/MapEvent~MapEvent#movestart\n     * @api\n     */\n    MOVESTART: 'movestart',\n    /**\n     * Triggered after the map is moved.\n     * @event module:ol/MapEvent~MapEvent#moveend\n     * @api\n     */\n    MOVEEND: 'moveend',\n    /**\n     * Triggered when loading of additional map data (tiles, images, features) starts.\n     * @event module:ol/render/Event~RenderEvent#loadstart\n     * @api\n     */\n    LOADSTART: 'loadstart',\n    /**\n     * Triggered when loading of additional map data has completed.\n     * @event module:ol/render/Event~RenderEvent#loadend\n     * @api\n     */\n    LOADEND: 'loadend',\n};\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n//# sourceMappingURL=MapEventType.js.map","/**\n * @module ol/MapBrowserEventHandler\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport { PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { VOID } from './functions.js';\nimport { listen, unlistenByKey } from './events.js';\nvar MapBrowserEventHandler = /** @class */ (function (_super) {\n    __extends(MapBrowserEventHandler, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n     * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n     */\n    function MapBrowserEventHandler(map, moveTolerance) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * This is the element that we will listen to the real events on.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @private\n         */\n        _this.map_ = map;\n        /**\n         * @type {any}\n         * @private\n         */\n        _this.clickTimeoutId_;\n        /**\n         * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n         * @type {boolean}\n         */\n        _this.emulateClicks_ = false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.dragging_ = false;\n        /**\n         * @type {!Array<import(\"./events.js\").EventsKey>}\n         * @private\n         */\n        _this.dragListenerKeys_ = [];\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n        /**\n         * The most recent \"down\" type event (or null if none have occurred).\n         * Set on pointerdown.\n         * @type {PointerEvent|null}\n         * @private\n         */\n        _this.down_ = null;\n        var element = _this.map_.getViewport();\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.activePointers_ = 0;\n        /**\n         * @type {!Object<number, boolean>}\n         * @private\n         */\n        _this.trackedTouches_ = {};\n        _this.element_ = element;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.pointerdownListenerKey_ = listen(element, PointerEventType.POINTERDOWN, _this.handlePointerDown_, _this);\n        /**\n         * @type {PointerEvent}\n         * @private\n         */\n        _this.originalPointerMoveEvent_;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.relayedListenerKey_ = listen(element, PointerEventType.POINTERMOVE, _this.relayEvent_, _this);\n        /**\n         * @private\n         */\n        _this.boundHandleTouchMove_ = _this.handleTouchMove_.bind(_this);\n        _this.element_.addEventListener(EventType.TOUCHMOVE, _this.boundHandleTouchMove_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n        return _this;\n    }\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.emulateClick_ = function (pointerEvent) {\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.CLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        if (this.clickTimeoutId_ !== undefined) {\n            // double-click\n            clearTimeout(this.clickTimeoutId_);\n            this.clickTimeoutId_ = undefined;\n            newEvent = new MapBrowserEvent(MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n            this.dispatchEvent(newEvent);\n        }\n        else {\n            // click\n            this.clickTimeoutId_ = setTimeout(\n            /** @this {MapBrowserEventHandler} */\n            function () {\n                this.clickTimeoutId_ = undefined;\n                var newEvent = new MapBrowserEvent(MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n                this.dispatchEvent(newEvent);\n            }.bind(this), 250);\n        }\n    };\n    /**\n     * Keeps track on how many pointers are currently active.\n     *\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.updateActivePointers_ = function (pointerEvent) {\n        var event = pointerEvent;\n        if (event.type == MapBrowserEventType.POINTERUP ||\n            event.type == MapBrowserEventType.POINTERCANCEL) {\n            delete this.trackedTouches_[event.pointerId];\n        }\n        else if (event.type == MapBrowserEventType.POINTERDOWN) {\n            this.trackedTouches_[event.pointerId] = true;\n        }\n        this.activePointers_ = Object.keys(this.trackedTouches_).length;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerUp_ = function (pointerEvent) {\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        // We emulate click events on left mouse button click, touch contact, and pen\n        // contact. isMouseActionButton returns true in these cases (evt.button is set\n        // to 0).\n        // See http://www.w3.org/TR/pointerevents/#button-states\n        // We only fire click, singleclick, and doubleclick if nobody has called\n        // event.preventDefault().\n        if (this.emulateClicks_ &&\n            !newEvent.defaultPrevented &&\n            !this.dragging_ &&\n            this.isMouseActionButton_(pointerEvent)) {\n            this.emulateClick_(this.down_);\n        }\n        if (this.activePointers_ === 0) {\n            this.dragListenerKeys_.forEach(unlistenByKey);\n            this.dragListenerKeys_.length = 0;\n            this.dragging_ = false;\n            this.down_ = null;\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} If the left mouse button was pressed.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMouseActionButton_ = function (pointerEvent) {\n        return pointerEvent.button === 0;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerDown_ = function (pointerEvent) {\n        this.emulateClicks_ = this.activePointers_ === 0;\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        // Store a copy of the down event\n        this.down_ = /** @type {PointerEvent} */ ({});\n        for (var property in pointerEvent) {\n            var value = pointerEvent[property];\n            this.down_[property] = typeof value === 'function' ? VOID : value;\n        }\n        if (this.dragListenerKeys_.length === 0) {\n            var doc = this.map_.getOwnerDocument();\n            this.dragListenerKeys_.push(listen(doc, MapBrowserEventType.POINTERMOVE, this.handlePointerMove_, this), listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this), \n            /* Note that the listener for `pointercancel is set up on\n             * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n             * the `pointerup` and `pointermove` listeners.\n             *\n             * The reason for this is the following: `TouchSource.vacuumTouches_()`\n             * issues `pointercancel` events, when there was no `touchend` for a\n             * `touchstart`. Now, let's say a first `touchstart` is registered on\n             * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n             * But `documentPointerEventHandler_` doesn't know about the first\n             * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n             * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n             * only registered there.\n             */\n            listen(this.element_, MapBrowserEventType.POINTERCANCEL, this.handlePointerUp_, this));\n            if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n                this.dragListenerKeys_.push(listen(this.element_.getRootNode(), MapBrowserEventType.POINTERUP, this.handlePointerUp_, this));\n            }\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerMove_ = function (pointerEvent) {\n        // Between pointerdown and pointerup, pointermove events are triggered.\n        // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n        // moved a significant distance.\n        if (this.isMoving_(pointerEvent)) {\n            this.dragging_ = true;\n            var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent, this.dragging_);\n            this.dispatchEvent(newEvent);\n        }\n    };\n    /**\n     * Wrap and relay a pointer event.  Note that this requires that the type\n     * string for the MapBrowserEvent matches the PointerEvent type.\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.relayEvent_ = function (pointerEvent) {\n        this.originalPointerMoveEvent_ = pointerEvent;\n        var dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n        this.dispatchEvent(new MapBrowserEvent(pointerEvent.type, this.map_, pointerEvent, dragging));\n    };\n    /**\n     * Flexible handling of a `touch-action: none` css equivalent: because calling\n     * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n     * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n     * when an interaction (currently `DragPan` handles the event.\n     * @param {TouchEvent} event Event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handleTouchMove_ = function (event) {\n        // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n        // may not be initialized yet when we get here on a platform without native pointer events.\n        var originalEvent = this.originalPointerMoveEvent_;\n        if ((!originalEvent || originalEvent.defaultPrevented) &&\n            (typeof event.cancelable !== 'boolean' || event.cancelable === true)) {\n            event.preventDefault();\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} Is moving.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMoving_ = function (pointerEvent) {\n        return (this.dragging_ ||\n            Math.abs(pointerEvent.clientX - this.down_.clientX) >\n                this.moveTolerance_ ||\n            Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_);\n    };\n    /**\n     * Clean up.\n     */\n    MapBrowserEventHandler.prototype.disposeInternal = function () {\n        if (this.relayedListenerKey_) {\n            unlistenByKey(this.relayedListenerKey_);\n            this.relayedListenerKey_ = null;\n        }\n        this.element_.removeEventListener(EventType.TOUCHMOVE, this.boundHandleTouchMove_);\n        if (this.pointerdownListenerKey_) {\n            unlistenByKey(this.pointerdownListenerKey_);\n            this.pointerdownListenerKey_ = null;\n        }\n        this.dragListenerKeys_.forEach(unlistenByKey);\n        this.dragListenerKeys_.length = 0;\n        this.element_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return MapBrowserEventHandler;\n}(Target));\nexport default MapBrowserEventHandler;\n//# sourceMappingURL=MapBrowserEventHandler.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/PluggableMap\n */\nimport BaseObject from './Object.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport EventType from './events/EventType.js';\nimport Layer from './layer/Layer.js';\nimport LayerGroup, { GroupEvent } from './layer/Group.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport RenderEventType from './render/EventType.js';\nimport TileQueue, { getTilePriority } from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport { DEVICE_PIXEL_RATIO, PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { TRUE } from './functions.js';\nimport { apply as applyTransform, create as createTransform, } from './transform.js';\nimport { assert } from './asserts.js';\nimport { clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty, } from './extent.js';\nimport { fromUserCoordinate, toUserCoordinate } from './proj.js';\nimport { getUid } from './util.js';\nimport { hasArea } from './size.js';\nimport { listen, unlistenByKey } from './events.js';\nimport { removeNode } from './dom.js';\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate Animate.\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform CoordinateToPixelTransform.\n * @property {import(\"rbush\").default} declutterTree DeclutterTree.\n * @property {null|import(\"./extent.js\").Extent} extent Extent.\n * @property {import(\"./extent.js\").Extent} [nextExtent] Next extent during an animation series.\n * @property {number} index Index.\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray LayerStatesArray.\n * @property {number} layerIndex LayerIndex.\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform PixelToCoordinateTransform.\n * @property {Array<PostRenderFunction>} postRenderFunctions PostRenderFunctions.\n * @property {import(\"./size.js\").Size} size Size.\n * @property {TileQueue} tileQueue TileQueue.\n * @property {!Object<string, Object<string, boolean>>} usedTiles UsedTiles.\n * @property {Array<number>} viewHints ViewHints.\n * @property {!Object<string, Object<string, boolean>>} wantedTiles WantedTiles.\n * @property {string} mapId The id of the map.\n * @property {Object<string, boolean>} renderTargets Identifiers of previously rendered elements.\n */\n/**\n * @typedef {function(PluggableMap, ?FrameState): any} PostRenderFunction\n */\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>): boolean} [layerFilter] Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer~Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in css pixels. Pixels\n * inside the radius around the given position will be checked for features.\n * @property {boolean} [checkWrapped=true] Check-Wrapped Will check for for wrapped geometries inside the range of\n *   +/- 1 world width. Works only if a projection is used that can be wrapped.\n */\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls] Controls.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions] Interactions.\n * @property {HTMLElement|Document} keyboardEventTarget KeyboardEventTarget.\n * @property {Collection<import(\"./Overlay.js\").default>} overlays Overlays.\n * @property {Object<string, *>} values Values.\n */\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:layergroup'|'change:size'|'change:target'|'change:view'} MapObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<MapObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapBrowserEventType\").Types, import(\"./MapBrowserEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapEventType\").Types, import(\"./MapEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./render/EventType\").MapRenderEventTypes, import(\"./render/Event\").default, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|MapObjectEventTypes|\n *      import(\"./MapBrowserEventType\").Types|import(\"./MapEventType\").Types|\n *      import(\"./render/EventType\").MapRenderEventTypes, Return>} PluggableMapOnSignature\n */\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control.defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction.defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered. If passed by element, the container can be in a secondary document.\n * @property {View|Promise<import(\"./View.js\").ViewOptions>} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n */\nfunction removeLayerMapProperty(layer) {\n    if (layer instanceof Layer) {\n        layer.setMapInternal(null);\n        return;\n    }\n    if (layer instanceof LayerGroup) {\n        layer.getLayers().forEach(removeLayerMapProperty);\n    }\n}\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n * @param {PluggableMap} map Map.\n */\nfunction setLayerMapProperty(layer, map) {\n    if (layer instanceof Layer) {\n        layer.setMapInternal(map);\n        return;\n    }\n    if (layer instanceof LayerGroup) {\n        var layers = layer.getLayers().getArray();\n        for (var i = 0, ii = layers.length; i < ii; ++i) {\n            setLayerMapProperty(layers[i], map);\n        }\n    }\n}\n/**\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires import(\"./render/Event.js\").default#precompose\n * @fires import(\"./render/Event.js\").default#postcompose\n * @fires import(\"./render/Event.js\").default#rendercomplete\n * @api\n */\nvar PluggableMap = /** @class */ (function (_super) {\n    __extends(PluggableMap, _super);\n    /**\n     * @param {MapOptions} options Map options.\n     */\n    function PluggableMap(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {PluggableMapOnSignature<void>}\n         */\n        _this.un;\n        var optionsInternal = createOptionsInternal(options);\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.renderComplete_;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.loaded_ = true;\n        /** @private */\n        _this.boundHandleBrowserEvent_ = _this.handleBrowserEvent.bind(_this);\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.maxTilesLoading_ =\n            options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ =\n            options.pixelRatio !== undefined\n                ? options.pixelRatio\n                : DEVICE_PIXEL_RATIO;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.postRenderTimeoutHandle_;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.animationDelayKey_;\n        /**\n         * @private\n         */\n        _this.animationDelay_ = /** @this {PluggableMap} */ function () {\n            this.animationDelayKey_ = undefined;\n            this.renderFrame_(Date.now());\n        }.bind(_this);\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.coordinateToPixelTransform_ = createTransform();\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.pixelToCoordinateTransform_ = createTransform();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.frameIndex_ = 0;\n        /**\n         * @private\n         * @type {?FrameState}\n         */\n        _this.frameState_ = null;\n        /**\n         * The extent at the previous 'moveend' event.\n         * @private\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.previousExtent_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewPropertyListenerKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewChangeListenerKey_ = null;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.layerGroupPropertyListenerKeys_ = null;\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.viewport_ = document.createElement('div');\n        _this.viewport_.className =\n            'ol-viewport' + ('ontouchstart' in window ? ' ol-touch' : '');\n        _this.viewport_.style.position = 'relative';\n        _this.viewport_.style.overflow = 'hidden';\n        _this.viewport_.style.width = '100%';\n        _this.viewport_.style.height = '100%';\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainer_ = document.createElement('div');\n        _this.overlayContainer_.style.position = 'absolute';\n        _this.overlayContainer_.style.zIndex = '0';\n        _this.overlayContainer_.style.width = '100%';\n        _this.overlayContainer_.style.height = '100%';\n        _this.overlayContainer_.style.pointerEvents = 'none';\n        _this.overlayContainer_.className = 'ol-overlaycontainer';\n        _this.viewport_.appendChild(_this.overlayContainer_);\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainerStopEvent_ = document.createElement('div');\n        _this.overlayContainerStopEvent_.style.position = 'absolute';\n        _this.overlayContainerStopEvent_.style.zIndex = '0';\n        _this.overlayContainerStopEvent_.style.width = '100%';\n        _this.overlayContainerStopEvent_.style.height = '100%';\n        _this.overlayContainerStopEvent_.style.pointerEvents = 'none';\n        _this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n        _this.viewport_.appendChild(_this.overlayContainerStopEvent_);\n        /**\n         * @private\n         * @type {MapBrowserEventHandler}\n         */\n        _this.mapBrowserEventHandler_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.moveTolerance_ = options.moveTolerance;\n        /**\n         * @private\n         * @type {HTMLElement|Document}\n         */\n        _this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.targetChangeHandlerKeys_ = null;\n        /**\n         * @type {Collection<import(\"./control/Control.js\").default>}\n         * @protected\n         */\n        _this.controls = optionsInternal.controls || new Collection();\n        /**\n         * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n         * @protected\n         */\n        _this.interactions = optionsInternal.interactions || new Collection();\n        /**\n         * @type {Collection<import(\"./Overlay.js\").default>}\n         * @private\n         */\n        _this.overlays_ = optionsInternal.overlays;\n        /**\n         * A lookup of overlays by id.\n         * @private\n         * @type {Object<string, import(\"./Overlay.js\").default>}\n         */\n        _this.overlayIdIndex_ = {};\n        /**\n         * @type {import(\"./renderer/Map.js\").default|null}\n         * @private\n         */\n        _this.renderer_ = null;\n        /**\n         * @private\n         * @type {!Array<PostRenderFunction>}\n         */\n        _this.postRenderFunctions_ = [];\n        /**\n         * @private\n         * @type {TileQueue}\n         */\n        _this.tileQueue_ = new TileQueue(_this.getTilePriority.bind(_this), _this.handleTileChange_.bind(_this));\n        _this.addChangeListener(MapProperty.LAYERGROUP, _this.handleLayerGroupChanged_);\n        _this.addChangeListener(MapProperty.VIEW, _this.handleViewChanged_);\n        _this.addChangeListener(MapProperty.SIZE, _this.handleSizeChanged_);\n        _this.addChangeListener(MapProperty.TARGET, _this.handleTargetChanged_);\n        // setProperties will trigger the rendering of the map if the map\n        // is \"defined\" already.\n        _this.setProperties(optionsInternal.values);\n        var map = _this;\n        if (options.view && !(options.view instanceof View)) {\n            options.view.then(function (viewOptions) {\n                map.setView(new View(viewOptions));\n            });\n        }\n        _this.controls.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.controls.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            this.addOverlayInternal_(\n            /** @type {import(\"./Overlay.js\").default} */ (event.element));\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            var overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n            var id = overlay.getId();\n            if (id !== undefined) {\n                delete this.overlayIdIndex_[id.toString()];\n            }\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.controls.forEach(\n        /**\n         * @param {import(\"./control/Control.js\").default} control Control.\n         * @this {PluggableMap}\n         */\n        function (control) {\n            control.setMap(this);\n        }.bind(_this));\n        _this.interactions.forEach(\n        /**\n         * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n         * @this {PluggableMap}\n         */\n        function (interaction) {\n            interaction.setMap(this);\n        }.bind(_this));\n        _this.overlays_.forEach(_this.addOverlayInternal_.bind(_this));\n        return _this;\n    }\n    /**\n     * @abstract\n     * @return {import(\"./renderer/Map.js\").default} The map renderer\n     */\n    PluggableMap.prototype.createRenderer = function () {\n        throw new Error('Use a map type that has a createRenderer method');\n    };\n    /**\n     * Add the given control to the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @api\n     */\n    PluggableMap.prototype.addControl = function (control) {\n        this.getControls().push(control);\n    };\n    /**\n     * Add the given interaction to the map. If you want to add an interaction\n     * at another point of the collection use `getInteraction()` and the methods\n     * available on {@link module:ol/Collection~Collection}. This can be used to\n     * stop the event propagation from the handleEvent function. The interactions\n     * get to handle the events in the reverse order of this collection.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n     * @api\n     */\n    PluggableMap.prototype.addInteraction = function (interaction) {\n        this.getInteractions().push(interaction);\n    };\n    /**\n     * Adds the given layer to the top of this map. If you want to add a layer\n     * elsewhere in the stack, use `getLayers()` and the methods available on\n     * {@link module:ol/Collection~Collection}.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @api\n     */\n    PluggableMap.prototype.addLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        layers.push(layer);\n    };\n    /**\n     * @param {import(\"./layer/Group.js\").GroupEvent} event The layer add event.\n     * @private\n     */\n    PluggableMap.prototype.handleLayerAdd_ = function (event) {\n        setLayerMapProperty(event.layer, this);\n    };\n    /**\n     * Add the given overlay to the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @api\n     */\n    PluggableMap.prototype.addOverlay = function (overlay) {\n        this.getOverlays().push(overlay);\n    };\n    /**\n     * This deals with map's overlay collection changes.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @private\n     */\n    PluggableMap.prototype.addOverlayInternal_ = function (overlay) {\n        var id = overlay.getId();\n        if (id !== undefined) {\n            this.overlayIdIndex_[id.toString()] = overlay;\n        }\n        overlay.setMap(this);\n    };\n    /**\n     *\n     * Clean up.\n     */\n    PluggableMap.prototype.disposeInternal = function () {\n        this.setTarget(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Detect features that intersect a pixel on the viewport, and execute a\n     * callback with each intersecting feature. Layers included in the detection can\n     * be configured through the `layerFilter` option in `opt_options`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(import(\"./Feature.js\").FeatureLike, import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>, import(\"./geom/SimpleGeometry.js\").default): T} callback Feature callback. The callback will be\n     *     called with two arguments. The first argument is one\n     *     {@link module:ol/Feature~Feature feature} or\n     *     {@link module:ol/render/Feature~RenderFeature render feature} at the pixel, the second is\n     *     the {@link module:ol/layer/Layer~Layer layer} of the feature and will be null for\n     *     unmanaged layers. To stop detection, callback functions can return a\n     *     truthy value.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template T\n     * @api\n     */\n    PluggableMap.prototype.forEachFeatureAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_ || !this.renderer_) {\n            return;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.forEachFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, callback, null, layerFilter, null);\n    };\n    /**\n     * Get all features that intersect a pixel on the viewport.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n     * an empty array if none were found.\n     * @api\n     */\n    PluggableMap.prototype.getFeaturesAtPixel = function (pixel, opt_options) {\n        var features = [];\n        this.forEachFeatureAtPixel(pixel, function (feature) {\n            features.push(feature);\n        }, opt_options);\n        return features;\n    };\n    /**\n     * Get all layers from all layer groups.\n     * @return {Array<import(\"./layer/Layer.js\").default>} Layers.\n     * @api\n     */\n    PluggableMap.prototype.getAllLayers = function () {\n        var layers = [];\n        function addLayersFrom(layerGroup) {\n            layerGroup.forEach(function (layer) {\n                if (layer instanceof LayerGroup) {\n                    addLayersFrom(layer.getLayers());\n                }\n                else {\n                    layers.push(layer);\n                }\n            });\n        }\n        addLayersFrom(this.getLayers());\n        return layers;\n    };\n    /**\n     * Please the `layer.getData()` method for {@link module:ol/layer/Tile~TileLayer#getData tile layers} or\n     * {@link module:ol/layer/Image~ImageLayer#getData image layers} instead of using this method.\n     *\n     * Detect layers that have a color value at a pixel on the viewport, and\n     * execute a callback with each matching layer. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     *\n     * Note: In maps with more than one layer, this method will typically return pixel data\n     * representing the composed image of all layers visible at the given pixel  because layers\n     * will generally share the same rendering context.  To force layers to render separately, and\n     * to get pixel data representing only one layer at a time, you can assign each layer a unique\n     * `className` in its constructor.\n     *\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n     *     Layer callback. This callback will receive two arguments: first is the\n     *     {@link module:ol/layer/Layer~Layer layer}, second argument is an array representing\n     *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n     *     that do not currently support this argument. To stop detection, callback\n     *     functions can return a truthy value.\n     * @param {AtPixelOptions} [opt_options] Configuration options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template S,T\n     * @api\n     * @deprecated\n     */\n    PluggableMap.prototype.forEachLayerAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_ || !this.renderer_) {\n            return;\n        }\n        var options = opt_options || {};\n        var hitTolerance = options.hitTolerance !== undefined ? options.hitTolerance : 0;\n        var layerFilter = options.layerFilter || TRUE;\n        return this.renderer_.forEachLayerAtPixel(pixel, this.frameState_, hitTolerance, callback, layerFilter);\n    };\n    /**\n     * Detect if features intersect a pixel on the viewport. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {boolean} Is there a feature at the given pixel?\n     * @api\n     */\n    PluggableMap.prototype.hasFeatureAtPixel = function (pixel, opt_options) {\n        if (!this.frameState_ || !this.renderer_) {\n            return false;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.hasFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, layerFilter, null);\n    };\n    /**\n     * Returns the coordinate in user projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    PluggableMap.prototype.getEventCoordinate = function (event) {\n        return this.getCoordinateFromPixel(this.getEventPixel(event));\n    };\n    /**\n     * Returns the coordinate in view projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     */\n    PluggableMap.prototype.getEventCoordinateInternal = function (event) {\n        return this.getCoordinateFromPixelInternal(this.getEventPixel(event));\n    };\n    /**\n     * Returns the map pixel position for a browser event relative to the viewport.\n     * @param {UIEvent} event Event.\n     * @return {import(\"./pixel.js\").Pixel} Pixel.\n     * @api\n     */\n    PluggableMap.prototype.getEventPixel = function (event) {\n        var viewportPosition = this.viewport_.getBoundingClientRect();\n        var eventPosition = \n        //FIXME Are we really calling this with a TouchEvent anywhere?\n        'changedTouches' in event\n            ? /** @type {TouchEvent} */ (event).changedTouches[0]\n            : /** @type {MouseEvent} */ (event);\n        return [\n            eventPosition.clientX - viewportPosition.left,\n            eventPosition.clientY - viewportPosition.top,\n        ];\n    };\n    /**\n     * Get the target in which this map is rendered.\n     * Note that this returns what is entered as an option or in setTarget:\n     * if that was an element, it returns an element; if a string, it returns that.\n     * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n     *     map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getTarget = function () {\n        return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n    };\n    /**\n     * Get the DOM element into which this map is rendered. In contrast to\n     * `getTarget` this method always return an `Element`, or `null` if the\n     * map has no target.\n     * @return {HTMLElement} The element that the map is rendered in.\n     * @api\n     */\n    PluggableMap.prototype.getTargetElement = function () {\n        var target = this.getTarget();\n        if (target !== undefined) {\n            return typeof target === 'string'\n                ? document.getElementById(target)\n                : target;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * user projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     * @api\n     */\n    PluggableMap.prototype.getCoordinateFromPixel = function (pixel) {\n        return toUserCoordinate(this.getCoordinateFromPixelInternal(pixel), this.getView().getProjection());\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * map view projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     */\n    PluggableMap.prototype.getCoordinateFromPixelInternal = function (pixel) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n        }\n    };\n    /**\n     * Get the map controls. Modifying this collection changes the controls\n     * associated with the map.\n     * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n     * @api\n     */\n    PluggableMap.prototype.getControls = function () {\n        return this.controls;\n    };\n    /**\n     * Get the map overlays. Modifying this collection changes the overlays\n     * associated with the map.\n     * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n     * @api\n     */\n    PluggableMap.prototype.getOverlays = function () {\n        return this.overlays_;\n    };\n    /**\n     * Get an overlay by its identifier (the value returned by overlay.getId()).\n     * Note that the index treats string and numeric identifiers as the same. So\n     * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n     * @param {string|number} id Overlay identifier.\n     * @return {import(\"./Overlay.js\").default} Overlay.\n     * @api\n     */\n    PluggableMap.prototype.getOverlayById = function (id) {\n        var overlay = this.overlayIdIndex_[id.toString()];\n        return overlay !== undefined ? overlay : null;\n    };\n    /**\n     * Get the map interactions. Modifying this collection changes the interactions\n     * associated with the map.\n     *\n     * Interactions are used for e.g. pan, zoom and rotate.\n     * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n     * @api\n     */\n    PluggableMap.prototype.getInteractions = function () {\n        return this.interactions;\n    };\n    /**\n     * Get the layergroup associated with this map.\n     * @return {LayerGroup} A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getLayerGroup = function () {\n        return /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP));\n    };\n    /**\n     * Clear any existing layers and add layers to the map.\n     * @param {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>} layers The layers to be added to the map.\n     * @api\n     */\n    PluggableMap.prototype.setLayers = function (layers) {\n        var group = this.getLayerGroup();\n        if (layers instanceof Collection) {\n            group.setLayers(layers);\n            return;\n        }\n        var collection = group.getLayers();\n        collection.clear();\n        collection.extend(layers);\n    };\n    /**\n     * Get the collection of layers associated with this map.\n     * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n     * @api\n     */\n    PluggableMap.prototype.getLayers = function () {\n        var layers = this.getLayerGroup().getLayers();\n        return layers;\n    };\n    /**\n     * @return {boolean} Layers have sources that are still loading.\n     */\n    PluggableMap.prototype.getLoadingOrNotReady = function () {\n        var layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var state = layerStatesArray[i];\n            if (!state.visible) {\n                continue;\n            }\n            var renderer = state.layer.getRenderer();\n            if (renderer && !renderer.ready) {\n                return true;\n            }\n            var source = /** @type {import(\"./layer/Layer.js\").default} */ (state.layer).getSource();\n            if (source && source.loading) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the user\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.getPixelFromCoordinate = function (coordinate) {\n        var viewCoordinate = fromUserCoordinate(coordinate, this.getView().getProjection());\n        return this.getPixelFromCoordinateInternal(viewCoordinate);\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the map view\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     */\n    PluggableMap.prototype.getPixelFromCoordinateInternal = function (coordinate) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n        }\n    };\n    /**\n     * Get the map renderer.\n     * @return {import(\"./renderer/Map.js\").default|null} Renderer\n     */\n    PluggableMap.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Get the size of this map.\n     * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getSize = function () {\n        return /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE));\n    };\n    /**\n     * Get the view associated with this map. A view manages properties such as\n     * center and resolution.\n     * @return {View} The view that controls this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getView = function () {\n        return /** @type {View} */ (this.get(MapProperty.VIEW));\n    };\n    /**\n     * Get the element that serves as the map viewport.\n     * @return {HTMLElement} Viewport.\n     * @api\n     */\n    PluggableMap.prototype.getViewport = function () {\n        return this.viewport_;\n    };\n    /**\n     * Get the element that serves as the container for overlays.  Elements added to\n     * this container will let mousedown and touchstart events through to the map,\n     * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n     * events.\n     * @return {!HTMLElement} The map's overlay container.\n     */\n    PluggableMap.prototype.getOverlayContainer = function () {\n        return this.overlayContainer_;\n    };\n    /**\n     * Get the element that serves as a container for overlays that don't allow\n     * event propagation. Elements added to this container won't let mousedown and\n     * touchstart events through to the map, so clicks and gestures on an overlay\n     * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @return {!HTMLElement} The map's overlay container that stops events.\n     */\n    PluggableMap.prototype.getOverlayContainerStopEvent = function () {\n        return this.overlayContainerStopEvent_;\n    };\n    /**\n     * @return {!Document} The document where the map is displayed.\n     */\n    PluggableMap.prototype.getOwnerDocument = function () {\n        var targetElement = this.getTargetElement();\n        return targetElement ? targetElement.ownerDocument : document;\n    };\n    /**\n     * @param {import(\"./Tile.js\").default} tile Tile.\n     * @param {string} tileSourceKey Tile source key.\n     * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n     * @param {number} tileResolution Tile resolution.\n     * @return {number} Tile priority.\n     */\n    PluggableMap.prototype.getTilePriority = function (tile, tileSourceKey, tileCenter, tileResolution) {\n        return getTilePriority(this.frameState_, tile, tileSourceKey, tileCenter, tileResolution);\n    };\n    /**\n     * @param {UIEvent} browserEvent Browser event.\n     * @param {string} [opt_type] Type.\n     */\n    PluggableMap.prototype.handleBrowserEvent = function (browserEvent, opt_type) {\n        var type = opt_type || browserEvent.type;\n        var mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n        this.handleMapBrowserEvent(mapBrowserEvent);\n    };\n    /**\n     * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n     */\n    PluggableMap.prototype.handleMapBrowserEvent = function (mapBrowserEvent) {\n        if (!this.frameState_) {\n            // With no view defined, we cannot translate pixels into geographical\n            // coordinates so interactions cannot be used.\n            return;\n        }\n        var originalEvent = /** @type {PointerEvent} */ (mapBrowserEvent.originalEvent);\n        var eventType = originalEvent.type;\n        if (eventType === PointerEventType.POINTERDOWN ||\n            eventType === EventType.WHEEL ||\n            eventType === EventType.KEYDOWN) {\n            var doc = this.getOwnerDocument();\n            var rootNode = this.viewport_.getRootNode\n                ? this.viewport_.getRootNode()\n                : doc;\n            var target = /** @type {Node} */ (originalEvent.target);\n            if (\n            // Abort if the target is a child of the container for elements whose events are not meant\n            // to be handled by map interactions.\n            this.overlayContainerStopEvent_.contains(target) ||\n                // Abort if the event target is a child of the container that is no longer in the page.\n                // It's possible for the target to no longer be in the page if it has been removed in an\n                // event listener, this might happen in a Control that recreates it's content based on\n                // user interaction either manually or via a render in something like https://reactjs.org/\n                !(rootNode === doc ? doc.documentElement : rootNode).contains(target)) {\n                return;\n            }\n        }\n        mapBrowserEvent.frameState = this.frameState_;\n        if (this.dispatchEvent(mapBrowserEvent) !== false) {\n            var interactionsArray = this.getInteractions().getArray().slice();\n            for (var i = interactionsArray.length - 1; i >= 0; i--) {\n                var interaction = interactionsArray[i];\n                if (interaction.getMap() !== this ||\n                    !interaction.getActive() ||\n                    !this.getTargetElement()) {\n                    continue;\n                }\n                var cont = interaction.handleEvent(mapBrowserEvent);\n                if (!cont || mapBrowserEvent.propagationStopped) {\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @protected\n     */\n    PluggableMap.prototype.handlePostRender = function () {\n        var frameState = this.frameState_;\n        // Manage the tile queue\n        // Image loads are expensive and a limited resource, so try to use them\n        // efficiently:\n        // * When the view is static we allow a large number of parallel tile loads\n        //   to complete the frame as quickly as possible.\n        // * When animating or interacting, image loads can cause janks, so we reduce\n        //   the maximum number of loads per frame and limit the number of parallel\n        //   tile loads to remain reactive to view changes and to reduce the chance of\n        //   loading tiles that will quickly disappear from view.\n        var tileQueue = this.tileQueue_;\n        if (!tileQueue.isEmpty()) {\n            var maxTotalLoading = this.maxTilesLoading_;\n            var maxNewLoads = maxTotalLoading;\n            if (frameState) {\n                var hints = frameState.viewHints;\n                if (hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING]) {\n                    var lowOnFrameBudget = Date.now() - frameState.time > 8;\n                    maxTotalLoading = lowOnFrameBudget ? 0 : 8;\n                    maxNewLoads = lowOnFrameBudget ? 0 : 2;\n                }\n            }\n            if (tileQueue.getTilesLoading() < maxTotalLoading) {\n                tileQueue.reprioritize(); // FIXME only call if view has changed\n                tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n            }\n        }\n        if (frameState && this.renderer_ && !frameState.animate) {\n            if (this.renderComplete_ === true) {\n                if (this.hasListener(RenderEventType.RENDERCOMPLETE)) {\n                    this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n                }\n                if (this.loaded_ === false) {\n                    this.loaded_ = true;\n                    this.dispatchEvent(new MapEvent(MapEventType.LOADEND, this, frameState));\n                }\n            }\n            else if (this.loaded_ === true) {\n                this.loaded_ = false;\n                this.dispatchEvent(new MapEvent(MapEventType.LOADSTART, this, frameState));\n            }\n        }\n        var postRenderFunctions = this.postRenderFunctions_;\n        for (var i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n            postRenderFunctions[i](this, frameState);\n        }\n        postRenderFunctions.length = 0;\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleSizeChanged_ = function () {\n        if (this.getView() && !this.getView().getAnimating()) {\n            this.getView().resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTargetChanged_ = function () {\n        if (this.mapBrowserEventHandler_) {\n            for (var i = 0, ii = this.targetChangeHandlerKeys_.length; i < ii; ++i) {\n                unlistenByKey(this.targetChangeHandlerKeys_[i]);\n            }\n            this.targetChangeHandlerKeys_ = null;\n            this.viewport_.removeEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_);\n            this.viewport_.removeEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_);\n            this.mapBrowserEventHandler_.dispose();\n            this.mapBrowserEventHandler_ = null;\n            removeNode(this.viewport_);\n        }\n        // target may be undefined, null, a string or an Element.\n        // If it's a string we convert it to an Element before proceeding.\n        // If it's not now an Element we remove the viewport from the DOM.\n        // If it's an Element we append the viewport element to it.\n        var targetElement = this.getTargetElement();\n        if (!targetElement) {\n            if (this.renderer_) {\n                clearTimeout(this.postRenderTimeoutHandle_);\n                this.postRenderTimeoutHandle_ = undefined;\n                this.postRenderFunctions_.length = 0;\n                this.renderer_.dispose();\n                this.renderer_ = null;\n            }\n            if (this.animationDelayKey_) {\n                cancelAnimationFrame(this.animationDelayKey_);\n                this.animationDelayKey_ = undefined;\n            }\n        }\n        else {\n            targetElement.appendChild(this.viewport_);\n            if (!this.renderer_) {\n                this.renderer_ = this.createRenderer();\n            }\n            this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, this.moveTolerance_);\n            for (var key in MapBrowserEventType) {\n                this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[key], this.handleMapBrowserEvent.bind(this));\n            }\n            this.viewport_.addEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_, false);\n            this.viewport_.addEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n            var defaultView = this.getOwnerDocument().defaultView;\n            var keyboardEventTarget = !this.keyboardEventTarget_\n                ? targetElement\n                : this.keyboardEventTarget_;\n            this.targetChangeHandlerKeys_ = [\n                listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n                listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this),\n                listen(defaultView, EventType.RESIZE, this.updateSize, this),\n            ];\n        }\n        this.updateSize();\n        // updateSize calls setSize, so no need to call this.render\n        // ourselves here.\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTileChange_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewPropertyChanged_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewChanged_ = function () {\n        if (this.viewPropertyListenerKey_) {\n            unlistenByKey(this.viewPropertyListenerKey_);\n            this.viewPropertyListenerKey_ = null;\n        }\n        if (this.viewChangeListenerKey_) {\n            unlistenByKey(this.viewChangeListenerKey_);\n            this.viewChangeListenerKey_ = null;\n        }\n        var view = this.getView();\n        if (view) {\n            this.updateViewportSize_();\n            this.viewPropertyListenerKey_ = listen(view, ObjectEventType.PROPERTYCHANGE, this.handleViewPropertyChanged_, this);\n            this.viewChangeListenerKey_ = listen(view, EventType.CHANGE, this.handleViewPropertyChanged_, this);\n            view.resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleLayerGroupChanged_ = function () {\n        if (this.layerGroupPropertyListenerKeys_) {\n            this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n            this.layerGroupPropertyListenerKeys_ = null;\n        }\n        var layerGroup = this.getLayerGroup();\n        if (layerGroup) {\n            this.handleLayerAdd_(new GroupEvent('addlayer', layerGroup));\n            this.layerGroupPropertyListenerKeys_ = [\n                listen(layerGroup, ObjectEventType.PROPERTYCHANGE, this.render, this),\n                listen(layerGroup, EventType.CHANGE, this.render, this),\n                listen(layerGroup, 'addlayer', this.handleLayerAdd_, this),\n                listen(layerGroup, 'removelayer', this.handleLayerRemove_, this),\n            ];\n        }\n        this.render();\n    };\n    /**\n     * @return {boolean} Is rendered.\n     */\n    PluggableMap.prototype.isRendered = function () {\n        return !!this.frameState_;\n    };\n    /**\n     * Requests an immediate render in a synchronous manner.\n     * @api\n     */\n    PluggableMap.prototype.renderSync = function () {\n        if (this.animationDelayKey_) {\n            cancelAnimationFrame(this.animationDelayKey_);\n        }\n        this.animationDelay_();\n    };\n    /**\n     * Redraws all text after new fonts have loaded\n     */\n    PluggableMap.prototype.redrawText = function () {\n        var layerStates = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStates.length; i < ii; ++i) {\n            var layer = layerStates[i].layer;\n            if (layer.hasRenderer()) {\n                layer.getRenderer().handleFontsChanged();\n            }\n        }\n    };\n    /**\n     * Request a map rendering (at the next animation frame).\n     * @api\n     */\n    PluggableMap.prototype.render = function () {\n        if (this.renderer_ && this.animationDelayKey_ === undefined) {\n            this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n        }\n    };\n    /**\n     * Remove the given control from the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n     *     if the control was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeControl = function (control) {\n        return this.getControls().remove(control);\n    };\n    /**\n     * Remove the given interaction from the map.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n     * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n     *     undefined if the interaction was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeInteraction = function (interaction) {\n        return this.getInteractions().remove(interaction);\n    };\n    /**\n     * Removes the given layer from the map.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n     *     layer was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        return layers.remove(layer);\n    };\n    /**\n     * @param {import(\"./layer/Group.js\").GroupEvent} event The layer remove event.\n     * @private\n     */\n    PluggableMap.prototype.handleLayerRemove_ = function (event) {\n        removeLayerMapProperty(event.layer);\n    };\n    /**\n     * Remove the given overlay from the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n     *     if the overlay was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeOverlay = function (overlay) {\n        return this.getOverlays().remove(overlay);\n    };\n    /**\n     * @param {number} time Time.\n     * @private\n     */\n    PluggableMap.prototype.renderFrame_ = function (time) {\n        var _this = this;\n        var size = this.getSize();\n        var view = this.getView();\n        var previousFrameState = this.frameState_;\n        /** @type {?FrameState} */\n        var frameState = null;\n        if (size !== undefined && hasArea(size) && view && view.isDef()) {\n            var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n            var viewState = view.getState();\n            frameState = {\n                animate: false,\n                coordinateToPixelTransform: this.coordinateToPixelTransform_,\n                declutterTree: null,\n                extent: getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, size),\n                index: this.frameIndex_++,\n                layerIndex: 0,\n                layerStatesArray: this.getLayerGroup().getLayerStatesArray(),\n                pixelRatio: this.pixelRatio_,\n                pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n                postRenderFunctions: [],\n                size: size,\n                tileQueue: this.tileQueue_,\n                time: time,\n                usedTiles: {},\n                viewState: viewState,\n                viewHints: viewHints,\n                wantedTiles: {},\n                mapId: getUid(this),\n                renderTargets: {},\n            };\n            if (viewState.nextCenter && viewState.nextResolution) {\n                var rotation = isNaN(viewState.nextRotation)\n                    ? viewState.rotation\n                    : viewState.nextRotation;\n                frameState.nextExtent = getForViewAndSize(viewState.nextCenter, viewState.nextResolution, rotation, size);\n            }\n        }\n        this.frameState_ = frameState;\n        /** @type {import(\"./renderer/Map.js\").default} */ (this.renderer_).renderFrame(frameState);\n        if (frameState) {\n            if (frameState.animate) {\n                this.render();\n            }\n            Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n            if (previousFrameState) {\n                var moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                        !equals(frameState.extent, this.previousExtent_));\n                if (moveStart) {\n                    this.dispatchEvent(new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n                    this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n                }\n            }\n            var idle = this.previousExtent_ &&\n                !frameState.viewHints[ViewHint.ANIMATING] &&\n                !frameState.viewHints[ViewHint.INTERACTING] &&\n                !equals(frameState.extent, this.previousExtent_);\n            if (idle) {\n                this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n                clone(frameState.extent, this.previousExtent_);\n            }\n        }\n        this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n        this.renderComplete_ =\n            this.hasListener(MapEventType.LOADSTART) ||\n                this.hasListener(MapEventType.LOADEND) ||\n                this.hasListener(RenderEventType.RENDERCOMPLETE)\n                ? !this.tileQueue_.getTilesLoading() &&\n                    !this.tileQueue_.getCount() &&\n                    !this.getLoadingOrNotReady()\n                : undefined;\n        if (!this.postRenderTimeoutHandle_) {\n            this.postRenderTimeoutHandle_ = setTimeout(function () {\n                _this.postRenderTimeoutHandle_ = undefined;\n                _this.handlePostRender();\n            }, 0);\n        }\n    };\n    /**\n     * Sets the layergroup of this map.\n     * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setLayerGroup = function (layerGroup) {\n        var oldLayerGroup = this.getLayerGroup();\n        if (oldLayerGroup) {\n            this.handleLayerRemove_(new GroupEvent('removelayer', oldLayerGroup));\n        }\n        this.set(MapProperty.LAYERGROUP, layerGroup);\n    };\n    /**\n     * Set the size of this map.\n     * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setSize = function (size) {\n        this.set(MapProperty.SIZE, size);\n    };\n    /**\n     * Set the target element to render this map into.\n     * @param {HTMLElement|string} [target] The Element or id of the Element\n     *     that the map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setTarget = function (target) {\n        this.set(MapProperty.TARGET, target);\n    };\n    /**\n     * Set the view for this map.\n     * @param {View|Promise<import(\"./View.js\").ViewOptions>} view The view that controls this map.\n     * It is also possible to pass a promise that resolves to options for constructing a view.  This\n     * alternative allows view properties to be resolved by sources or other components that load\n     * view-related metadata.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setView = function (view) {\n        if (!view || view instanceof View) {\n            this.set(MapProperty.VIEW, view);\n            return;\n        }\n        this.set(MapProperty.VIEW, new View());\n        var map = this;\n        view.then(function (viewOptions) {\n            map.setView(new View(viewOptions));\n        });\n    };\n    /**\n     * Force a recalculation of the map viewport size.  This should be called when\n     * third-party code changes the size of the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.updateSize = function () {\n        var targetElement = this.getTargetElement();\n        var size = undefined;\n        if (targetElement) {\n            var computedStyle = getComputedStyle(targetElement);\n            var width = targetElement.offsetWidth -\n                parseFloat(computedStyle['borderLeftWidth']) -\n                parseFloat(computedStyle['paddingLeft']) -\n                parseFloat(computedStyle['paddingRight']) -\n                parseFloat(computedStyle['borderRightWidth']);\n            var height = targetElement.offsetHeight -\n                parseFloat(computedStyle['borderTopWidth']) -\n                parseFloat(computedStyle['paddingTop']) -\n                parseFloat(computedStyle['paddingBottom']) -\n                parseFloat(computedStyle['borderBottomWidth']);\n            if (!isNaN(width) && !isNaN(height)) {\n                size = [width, height];\n                if (!hasArea(size) &&\n                    !!(targetElement.offsetWidth ||\n                        targetElement.offsetHeight ||\n                        targetElement.getClientRects().length)) {\n                    // eslint-disable-next-line\n                    console.warn(\"No map visible because the map container's width or height are 0.\");\n                }\n            }\n        }\n        this.setSize(size);\n        this.updateViewportSize_();\n    };\n    /**\n     * Recomputes the viewport size and save it on the view object (if any)\n     * @private\n     */\n    PluggableMap.prototype.updateViewportSize_ = function () {\n        var view = this.getView();\n        if (view) {\n            var size = undefined;\n            var computedStyle = getComputedStyle(this.viewport_);\n            if (computedStyle.width && computedStyle.height) {\n                size = [\n                    parseInt(computedStyle.width, 10),\n                    parseInt(computedStyle.height, 10),\n                ];\n            }\n            view.setViewportSize(size);\n        }\n    };\n    return PluggableMap;\n}(BaseObject));\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n    /**\n     * @type {HTMLElement|Document}\n     */\n    var keyboardEventTarget = null;\n    if (options.keyboardEventTarget !== undefined) {\n        keyboardEventTarget =\n            typeof options.keyboardEventTarget === 'string'\n                ? document.getElementById(options.keyboardEventTarget)\n                : options.keyboardEventTarget;\n    }\n    /**\n     * @type {Object<string, *>}\n     */\n    var values = {};\n    var layerGroup = options.layers &&\n        typeof ( /** @type {?} */(options.layers).getLayers) === 'function'\n        ? /** @type {LayerGroup} */ (options.layers)\n        : new LayerGroup({ layers: /** @type {Collection} */ (options.layers) });\n    values[MapProperty.LAYERGROUP] = layerGroup;\n    values[MapProperty.TARGET] = options.target;\n    values[MapProperty.VIEW] =\n        options.view instanceof View ? options.view : new View();\n    var controls;\n    if (options.controls !== undefined) {\n        if (Array.isArray(options.controls)) {\n            controls = new Collection(options.controls.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.controls).getArray) === 'function', 47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n            controls = /** @type {Collection} */ (options.controls);\n        }\n    }\n    var interactions;\n    if (options.interactions !== undefined) {\n        if (Array.isArray(options.interactions)) {\n            interactions = new Collection(options.interactions.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.interactions).getArray) ===\n                'function', 48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n            interactions = /** @type {Collection} */ (options.interactions);\n        }\n    }\n    var overlays;\n    if (options.overlays !== undefined) {\n        if (Array.isArray(options.overlays)) {\n            overlays = new Collection(options.overlays.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.overlays).getArray) === 'function', 49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n            overlays = options.overlays;\n        }\n    }\n    else {\n        overlays = new Collection();\n    }\n    return {\n        controls: controls,\n        interactions: interactions,\n        keyboardEventTarget: keyboardEventTarget,\n        overlays: overlays,\n        values: values,\n    };\n}\nexport default PluggableMap;\n//# sourceMappingURL=PluggableMap.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Map\n */\nimport CompositeMapRenderer from './renderer/Composite.js';\nimport PluggableMap from './PluggableMap.js';\nimport { assign } from './obj.js';\nimport { defaults as defaultControls } from './control.js';\nimport { defaults as defaultInteractions } from './interaction.js';\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile~TileLayer} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~LayerGroup}\n * is a subclass of {@link module:ol/layer/Base~BaseLayer}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @api\n */\nvar Map = /** @class */ (function (_super) {\n    __extends(Map, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").MapOptions} options Map options.\n     */\n    function Map(options) {\n        options = assign({}, options);\n        if (!options.controls) {\n            options.controls = defaultControls();\n        }\n        if (!options.interactions) {\n            options.interactions = defaultInteractions({\n                onFocusOnly: true,\n            });\n        }\n        return _super.call(this, options) || this;\n    }\n    Map.prototype.createRenderer = function () {\n        return new CompositeMapRenderer(this);\n    };\n    return Map;\n}(PluggableMap));\nexport default Map;\n//# sourceMappingURL=Map.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageBase\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { abstract } from './util.js';\n/**\n * @abstract\n */\nvar ImageBase = /** @class */ (function (_super) {\n    __extends(ImageBase, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./ImageState.js\").default} state State.\n     */\n    function ImageBase(extent, resolution, pixelRatio, state) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.extent = extent;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @protected\n         * @type {number|undefined}\n         */\n        _this.resolution = resolution;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = state;\n        return _this;\n    }\n    /**\n     * @protected\n     */\n    ImageBase.prototype.changed = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    ImageBase.prototype.getExtent = function () {\n        return this.extent;\n    };\n    /**\n     * @abstract\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     */\n    ImageBase.prototype.getImage = function () {\n        return abstract();\n    };\n    /**\n     * @return {number} PixelRatio.\n     */\n    ImageBase.prototype.getPixelRatio = function () {\n        return this.pixelRatio_;\n    };\n    /**\n     * @return {number} Resolution.\n     */\n    ImageBase.prototype.getResolution = function () {\n        return /** @type {number} */ (this.resolution);\n    };\n    /**\n     * @return {import(\"./ImageState.js\").default} State.\n     */\n    ImageBase.prototype.getState = function () {\n        return this.state;\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageBase.prototype.load = function () {\n        abstract();\n    };\n    return ImageBase;\n}(EventTarget));\nexport default ImageBase;\n//# sourceMappingURL=ImageBase.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Image\n */\nimport EventType from './events/EventType.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport { IMAGE_DECODE } from './has.js';\nimport { getHeight } from './extent.js';\nimport { listenOnce, unlistenByKey } from './events.js';\n/**\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\nvar ImageWrapper = /** @class */ (function (_super) {\n    __extends(ImageWrapper, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {LoadFunction} imageLoadFunction Image load function.\n     */\n    function ImageWrapper(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n        var _this = _super.call(this, extent, resolution, pixelRatio, ImageState.IDLE) || this;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = ImageState.IDLE;\n        /**\n         * @private\n         * @type {LoadFunction}\n         */\n        _this.imageLoadFunction_ = imageLoadFunction;\n        return _this;\n    }\n    /**\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageWrapper.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageError_ = function () {\n        this.state = ImageState.ERROR;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageLoad_ = function () {\n        if (this.resolution === undefined) {\n            this.resolution = getHeight(this.extent) / this.image_.height;\n        }\n        this.state = ImageState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load the image or retry if loading previously failed.\n     * Loading is taken care of by the tile queue, and calling this method is\n     * only needed for preloading or for reloading in case of an error.\n     * @api\n     */\n    ImageWrapper.prototype.load = function () {\n        if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n            this.state = ImageState.LOADING;\n            this.changed();\n            this.imageLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n     */\n    ImageWrapper.prototype.setImage = function (image) {\n        this.image_ = image;\n        this.resolution = getHeight(this.extent) / this.image_.height;\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageWrapper;\n}(ImageBase));\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n    var img = /** @type {HTMLImageElement} */ (image);\n    var listening = true;\n    var decoding = false;\n    var loaded = false;\n    var listenerKeys = [\n        listenOnce(img, EventType.LOAD, function () {\n            loaded = true;\n            if (!decoding) {\n                loadHandler();\n            }\n        }),\n    ];\n    if (img.src && IMAGE_DECODE) {\n        decoding = true;\n        img\n            .decode()\n            .then(function () {\n            if (listening) {\n                loadHandler();\n            }\n        })\n            .catch(function (error) {\n            if (listening) {\n                if (loaded) {\n                    loadHandler();\n                }\n                else {\n                    errorHandler();\n                }\n            }\n        });\n    }\n    else {\n        listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n    }\n    return function unlisten() {\n        listening = false;\n        listenerKeys.forEach(unlistenByKey);\n    };\n}\nexport default ImageWrapper;\n//# sourceMappingURL=Image.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nvar MapEvent = /** @class */ (function (_super) {\n    __extends(MapEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapEvent(type, map, opt_frameState) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The map where the event occurred.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @api\n         */\n        _this.map = map;\n        /**\n         * The frame state at the time of the event.\n         * @type {?import(\"./PluggableMap.js\").FrameState}\n         * @api\n         */\n        _this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n        return _this;\n    }\n    return MapEvent;\n}(Event));\nexport default MapEvent;\n//# sourceMappingURL=MapEvent.js.map","/**\n * @module ol/ObjectEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a property is changed.\n     * @event module:ol/Object.ObjectEvent#propertychange\n     * @api\n     */\n    PROPERTYCHANGE: 'propertychange',\n};\n/**\n * @typedef {'propertychange'} Types\n */\n//# sourceMappingURL=ObjectEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport { createCanvasContext2D } from './dom.js';\nimport { listenImage } from './Image.js';\nvar ImageTile = /** @class */ (function (_super) {\n    __extends(ImageTile, _super);\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"./TileState.js\").default} state State.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n     * @param {import(\"./Tile.js\").Options} [opt_options] Tile options.\n     */\n    function ImageTile(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n        var _this = _super.call(this, tileCoord, state, opt_options) || this;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ = crossOrigin;\n        /**\n         * Image URI\n         *\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        _this.key = src;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"./Tile.js\").LoadFunction}\n         */\n        _this.tileLoadFunction_ = tileLoadFunction;\n        return _this;\n    }\n    /**\n     * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageTile.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Sets an HTML image element for this tile (may be a Canvas or preloaded Image).\n     * @param {HTMLCanvasElement|HTMLImageElement} element Element.\n     */\n    ImageTile.prototype.setImage = function (element) {\n        this.image_ = element;\n        this.state = TileState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageError_ = function () {\n        this.state = TileState.ERROR;\n        this.unlistenImage_();\n        this.image_ = getBlankImage();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageLoad_ = function () {\n        var image = /** @type {HTMLImageElement} */ (this.image_);\n        if (image.naturalWidth && image.naturalHeight) {\n            this.state = TileState.LOADED;\n        }\n        else {\n            this.state = TileState.EMPTY;\n        }\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @api\n     */\n    ImageTile.prototype.load = function () {\n        if (this.state == TileState.ERROR) {\n            this.state = TileState.IDLE;\n            this.image_ = new Image();\n            if (this.crossOrigin_ !== null) {\n                this.image_.crossOrigin = this.crossOrigin_;\n            }\n        }\n        if (this.state == TileState.IDLE) {\n            this.state = TileState.LOADING;\n            this.changed();\n            this.tileLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageTile;\n}(Tile));\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n    var ctx = createCanvasContext2D(1, 1);\n    ctx.fillStyle = 'rgba(0,0,0,0)';\n    ctx.fillRect(0, 0, 1, 1);\n    return ctx.canvas;\n}\nexport default ImageTile;\n//# sourceMappingURL=ImageTile.js.map","/**\n * @module ol/ImageState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    ERROR: 3,\n    EMPTY: 4,\n};\n//# sourceMappingURL=ImageState.js.map","/**\n * @module ol/Disposable\n */\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = /** @class */ (function () {\n    function Disposable() {\n        /**\n         * The object has already been disposed.\n         * @type {boolean}\n         * @protected\n         */\n        this.disposed = false;\n    }\n    /**\n     * Clean up.\n     */\n    Disposable.prototype.dispose = function () {\n        if (!this.disposed) {\n            this.disposed = true;\n            this.disposeInternal();\n        }\n    };\n    /**\n     * Extension point for disposable objects.\n     * @protected\n     */\n    Disposable.prototype.disposeInternal = function () { };\n    return Disposable;\n}());\nexport default Disposable;\n//# sourceMappingURL=Disposable.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/DataTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\n/**\n * Data that can be used with a DataTile.  For increased browser compatibility, use\n * Uint8Array instead of Uint8ClampedArray where possible.\n * @typedef {Uint8Array|Uint8ClampedArray|Float32Array|DataView} Data\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @property {function(): Promise<Data>} loader Data loader.\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n * @api\n */\nvar DataTile = /** @class */ (function (_super) {\n    __extends(DataTile, _super);\n    /**\n     * @param {Options} options Tile options.\n     */\n    function DataTile(options) {\n        var _this = this;\n        var state = TileState.IDLE;\n        _this = _super.call(this, options.tileCoord, state, {\n            transition: options.transition,\n            interpolate: options.interpolate,\n        }) || this;\n        /**\n         * @type {function(): Promise<Data>}\n         * @private\n         */\n        _this.loader_ = options.loader;\n        /**\n         * @type {Data}\n         * @private\n         */\n        _this.data_ = null;\n        /**\n         * @type {Error}\n         * @private\n         */\n        _this.error_ = null;\n        return _this;\n    }\n    /**\n     * Get the data for the tile.\n     * @return {Data} Tile data.\n     * @api\n     */\n    DataTile.prototype.getData = function () {\n        return this.data_;\n    };\n    /**\n     * Get any loading error.\n     * @return {Error} Loading error.\n     * @api\n     */\n    DataTile.prototype.getError = function () {\n        return this.error_;\n    };\n    /**\n     * Load not yet loaded URI.\n     * @api\n     */\n    DataTile.prototype.load = function () {\n        this.state = TileState.LOADING;\n        this.changed();\n        var self = this;\n        this.loader_()\n            .then(function (data) {\n            self.data_ = data;\n            self.state = TileState.LOADED;\n            self.changed();\n        })\n            .catch(function (error) {\n            self.error_ = error;\n            self.state = TileState.ERROR;\n            self.changed();\n        });\n    };\n    return DataTile;\n}(Tile));\nexport default DataTile;\n//# sourceMappingURL=DataTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport { assign, isEmpty } from './obj.js';\nimport { getUid } from './util.js';\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nvar ObjectEvent = /** @class */ (function (_super) {\n    __extends(ObjectEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {string} key The property name.\n     * @param {*} oldValue The old value for `key`.\n     */\n    function ObjectEvent(type, key, oldValue) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The name of the property whose value is changing.\n         * @type {string}\n         * @api\n         */\n        _this.key = key;\n        /**\n         * The old value. To get the new value use `e.target.get(e.key)` where\n         * `e` is the event object.\n         * @type {*}\n         * @api\n         */\n        _this.oldValue = oldValue;\n        return _this;\n    }\n    return ObjectEvent;\n}(Event));\nexport { ObjectEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable~Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nvar BaseObject = /** @class */ (function (_super) {\n    __extends(BaseObject, _super);\n    /**\n     * @param {Object<string, *>} [opt_values] An object with key-value pairs.\n     */\n    function BaseObject(opt_values) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {ObjectOnSignature<void>}\n         */\n        _this.un;\n        // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n        // the same as the order in which they were created.  This also helps to\n        // ensure that object properties are always added in the same order, which\n        // helps many JavaScript engines generate faster code.\n        getUid(_this);\n        /**\n         * @private\n         * @type {Object<string, *>}\n         */\n        _this.values_ = null;\n        if (opt_values !== undefined) {\n            _this.setProperties(opt_values);\n        }\n        return _this;\n    }\n    /**\n     * Gets a value.\n     * @param {string} key Key name.\n     * @return {*} Value.\n     * @api\n     */\n    BaseObject.prototype.get = function (key) {\n        var value;\n        if (this.values_ && this.values_.hasOwnProperty(key)) {\n            value = this.values_[key];\n        }\n        return value;\n    };\n    /**\n     * Get a list of object property names.\n     * @return {Array<string>} List of property names.\n     * @api\n     */\n    BaseObject.prototype.getKeys = function () {\n        return (this.values_ && Object.keys(this.values_)) || [];\n    };\n    /**\n     * Get an object of all property names and values.\n     * @return {Object<string, *>} Object.\n     * @api\n     */\n    BaseObject.prototype.getProperties = function () {\n        return (this.values_ && assign({}, this.values_)) || {};\n    };\n    /**\n     * @return {boolean} The object has properties.\n     */\n    BaseObject.prototype.hasProperties = function () {\n        return !!this.values_;\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {*} oldValue Old value.\n     */\n    BaseObject.prototype.notify = function (key, oldValue) {\n        var eventType;\n        eventType = \"change:\".concat(key);\n        if (this.hasListener(eventType)) {\n            this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        }\n        eventType = ObjectEventType.PROPERTYCHANGE;\n        if (this.hasListener(eventType)) {\n            this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        }\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.addChangeListener = function (key, listener) {\n        this.addEventListener(\"change:\".concat(key), listener);\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.removeChangeListener = function (key, listener) {\n        this.removeEventListener(\"change:\".concat(key), listener);\n    };\n    /**\n     * Sets a value.\n     * @param {string} key Key name.\n     * @param {*} value Value.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.set = function (key, value, opt_silent) {\n        var values = this.values_ || (this.values_ = {});\n        if (opt_silent) {\n            values[key] = value;\n        }\n        else {\n            var oldValue = values[key];\n            values[key] = value;\n            if (oldValue !== value) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    /**\n     * Sets a collection of key-value pairs.  Note that this changes any existing\n     * properties and adds new ones (it does not remove any existing properties).\n     * @param {Object<string, *>} values Values.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.setProperties = function (values, opt_silent) {\n        for (var key in values) {\n            this.set(key, values[key], opt_silent);\n        }\n    };\n    /**\n     * Apply any properties from another object without triggering events.\n     * @param {BaseObject} source The source object.\n     * @protected\n     */\n    BaseObject.prototype.applyProperties = function (source) {\n        if (!source.values_) {\n            return;\n        }\n        assign(this.values_ || (this.values_ = {}), source.values_);\n    };\n    /**\n     * Unsets a property.\n     * @param {string} key Key name.\n     * @param {boolean} [opt_silent] Unset without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.unset = function (key, opt_silent) {\n        if (this.values_ && key in this.values_) {\n            var oldValue = this.values_[key];\n            delete this.values_[key];\n            if (isEmpty(this.values_)) {\n                this.values_ = null;\n            }\n            if (!opt_silent) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    return BaseObject;\n}(Observable));\nexport default BaseObject;\n//# sourceMappingURL=Object.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LENGTH: 'length',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nvar CollectionEvent = /** @class */ (function (_super) {\n    __extends(CollectionEvent, _super);\n    /**\n     * @param {import(\"./CollectionEventType.js\").default} type Type.\n     * @param {*} [opt_element] Element.\n     * @param {number} [opt_index] The index of the added or removed element.\n     */\n    function CollectionEvent(type, opt_element, opt_index) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The element that is added to or removed from the collection.\n         * @type {*}\n         * @api\n         */\n        _this.element = opt_element;\n        /**\n         * The index of the added or removed element.\n         * @type {number}\n         * @api\n         */\n        _this.index = opt_index;\n        return _this;\n    }\n    return CollectionEvent;\n}(Event));\nexport { CollectionEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nvar Collection = /** @class */ (function (_super) {\n    __extends(Collection, _super);\n    /**\n     * @param {Array<T>} [opt_array] Array.\n     * @param {Options} [opt_options] Collection options.\n     */\n    function Collection(opt_array, opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {CollectionOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.unique_ = !!options.unique;\n        /**\n         * @private\n         * @type {!Array<T>}\n         */\n        _this.array_ = opt_array ? opt_array : [];\n        if (_this.unique_) {\n            for (var i = 0, ii = _this.array_.length; i < ii; ++i) {\n                _this.assertUnique_(_this.array_[i], i);\n            }\n        }\n        _this.updateLength_();\n        return _this;\n    }\n    /**\n     * Remove all elements from the collection.\n     * @api\n     */\n    Collection.prototype.clear = function () {\n        while (this.getLength() > 0) {\n            this.pop();\n        }\n    };\n    /**\n     * Add elements to the collection.  This pushes each item in the provided array\n     * to the end of the collection.\n     * @param {!Array<T>} arr Array.\n     * @return {Collection<T>} This collection.\n     * @api\n     */\n    Collection.prototype.extend = function (arr) {\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            this.push(arr[i]);\n        }\n        return this;\n    };\n    /**\n     * Iterate over each element, calling the provided callback.\n     * @param {function(T, number, Array<T>): *} f The function to call\n     *     for every element. This function takes 3 arguments (the element, the\n     *     index and the array). The return value is ignored.\n     * @api\n     */\n    Collection.prototype.forEach = function (f) {\n        var array = this.array_;\n        for (var i = 0, ii = array.length; i < ii; ++i) {\n            f(array[i], i, array);\n        }\n    };\n    /**\n     * Get a reference to the underlying Array object. Warning: if the array\n     * is mutated, no events will be dispatched by the collection, and the\n     * collection's \"length\" property won't be in sync with the actual length\n     * of the array.\n     * @return {!Array<T>} Array.\n     * @api\n     */\n    Collection.prototype.getArray = function () {\n        return this.array_;\n    };\n    /**\n     * Get the element at the provided index.\n     * @param {number} index Index.\n     * @return {T} Element.\n     * @api\n     */\n    Collection.prototype.item = function (index) {\n        return this.array_[index];\n    };\n    /**\n     * Get the length of this collection.\n     * @return {number} The length of the array.\n     * @observable\n     * @api\n     */\n    Collection.prototype.getLength = function () {\n        return this.get(Property.LENGTH);\n    };\n    /**\n     * Insert an element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.insertAt = function (index, elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        this.array_.splice(index, 0, elem);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n    };\n    /**\n     * Remove the last element of the collection and return it.\n     * Return `undefined` if the collection is empty.\n     * @return {T|undefined} Element.\n     * @api\n     */\n    Collection.prototype.pop = function () {\n        return this.removeAt(this.getLength() - 1);\n    };\n    /**\n     * Insert the provided element at the end of the collection.\n     * @param {T} elem Element.\n     * @return {number} New length of the collection.\n     * @api\n     */\n    Collection.prototype.push = function (elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        var n = this.getLength();\n        this.insertAt(n, elem);\n        return this.getLength();\n    };\n    /**\n     * Remove the first occurrence of an element from the collection.\n     * @param {T} elem Element.\n     * @return {T|undefined} The removed element or undefined if none found.\n     * @api\n     */\n    Collection.prototype.remove = function (elem) {\n        var arr = this.array_;\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            if (arr[i] === elem) {\n                return this.removeAt(i);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Remove the element at the provided index and return it.\n     * Return `undefined` if the collection does not contain this index.\n     * @param {number} index Index.\n     * @return {T|undefined} Value.\n     * @api\n     */\n    Collection.prototype.removeAt = function (index) {\n        var prev = this.array_[index];\n        this.array_.splice(index, 1);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n        return prev;\n    };\n    /**\n     * Set the element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.setAt = function (index, elem) {\n        var n = this.getLength();\n        if (index < n) {\n            if (this.unique_) {\n                this.assertUnique_(elem, index);\n            }\n            var prev = this.array_[index];\n            this.array_[index] = elem;\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n        }\n        else {\n            for (var j = n; j < index; ++j) {\n                this.insertAt(j, undefined);\n            }\n            this.insertAt(index, elem);\n        }\n    };\n    /**\n     * @private\n     */\n    Collection.prototype.updateLength_ = function () {\n        this.set(Property.LENGTH, this.array_.length);\n    };\n    /**\n     * @private\n     * @param {T} elem Element.\n     * @param {number} [opt_except] Optional index to ignore.\n     */\n    Collection.prototype.assertUnique_ = function (elem, opt_except) {\n        for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n            if (this.array_[i] === elem && i !== opt_except) {\n                throw new AssertionError(58);\n            }\n        }\n    };\n    return Collection;\n}(BaseObject));\nexport default Collection;\n//# sourceMappingURL=Collection.js.map","/**\n * @module ol/MapProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    LAYERGROUP: 'layergroup',\n    SIZE: 'size',\n    TARGET: 'target',\n    VIEW: 'view',\n};\n//# sourceMappingURL=MapProperty.js.map"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./node_modules/ol/layer/VectorTileRenderType.js","webpack:///./node_modules/ol/layer/Layer.js","webpack:///./node_modules/ol/interaction/Select.js","webpack:///./node_modules/ol/obj.js","webpack:///./node_modules/ol/interaction/DoubleClickZoom.js","webpack:///./node_modules/ol/interaction/DragPan.js","webpack:///./node_modules/ol/interaction/DragRotate.js","webpack:///./node_modules/ol/interaction/DragBox.js","webpack:///./node_modules/ol/interaction/DragZoom.js","webpack:///./node_modules/ol/interaction/KeyboardPan.js","webpack:///./node_modules/ol/interaction/KeyboardZoom.js","webpack:///./node_modules/ol/interaction/MouseWheelZoom.js","webpack:///./node_modules/ol/interaction/PinchRotate.js","webpack:///./node_modules/ol/interaction/PinchZoom.js","webpack:///./node_modules/ol/interaction.js","webpack:///./node_modules/ol/layer/Vector.js","webpack:///./node_modules/ol/interaction/Pointer.js","webpack:///./node_modules/ol/interaction/Interaction.js","webpack:///./node_modules/ol/layer/Heatmap.js","webpack:///./node_modules/ol/layer/BaseTile.js","webpack:///./node_modules/ol/layer/Tile.js","webpack:///./node_modules/ol/layer/Base.js","webpack:///./node_modules/ol/has.js","webpack:///./node_modules/ol/loadingstrategy.js","webpack:///./node_modules/ol/math.js","webpack:///./node_modules/ol/layer/VectorTile.js","webpack:///./node_modules/ol/layer/Group.js","webpack:///./node_modules/ol/layer/TileProperty.js","webpack:///./node_modules/ol/interaction/Draw.js","webpack:///./node_modules/ol/layer/BaseVector.js","webpack:///./node_modules/ol/interaction/Snap.js","webpack:///./node_modules/ol/interaction/Property.js","webpack:///./node_modules/ol/layer/BaseImage.js","webpack:///./node_modules/ol/layer/Image.js","webpack:///./node_modules/ol/layer/Property.js"],"names":["IMAGE","HYBRID","VECTOR","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","Layer","_super","options","_this","baseOptions","source","on","once","un","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","renderer_","render","map","setMap","addChangeListener","SOURCE","handleSourcePropertyChange_","setSource","getLayersArray","opt_array","array","push","getLayerStatesArray","opt_states","states","getLayerState","getSource","get","getSourceState","getState","UNDEFINED","handleSourceChange_","changed","CHANGE","getFeatures","pixel","Promise","resolve","frameState","target","layerRenderer","getRenderer","prepareFrame","renderFrame","setMapInternal","set","MAP","getMapInternal","PRECOMPOSE","evt","renderEvent","layerStatesArray","layerState","some","arrayLayerState","layer","createRenderer","hasRenderer","disposeInternal","dispose","inView","viewState","visible","resolution","minResolution","maxResolution","zoom","minZoom","maxZoom","SelectEventType","SELECT","SelectEvent","type","selected","deselected","mapBrowserEvent","originalFeatureStyles","Select","opt_options","layerFilter","boundAddFeature_","addFeature_","bind","boundRemoveFeature_","removeFeature_","condition_","condition","addCondition_","addCondition","removeCondition_","removeCondition","toggleCondition_","toggleCondition","multi_","multi","filter_","filter","hitTolerance_","hitTolerance","style_","undefined","style","getDefaultStyleFunction","features_","features","layers","layers_1","layerFilter_","featureLayerAssociation_","addFeatureLayerAssociation_","feature","getHitTolerance","getLayer","setHitTolerance","currentMap","getMap","forEach","restorePreviousStyle_","addEventListener","ADD","REMOVE","applySelectedStyle_","removeEventListener","element","getAllLayers","find","hasFeature","getStyle","key","setStyle","interactions","getInteractions","getArray","i","length","interaction","lastIndexOf","removeFeatureLayerAssociation_","handleEvent","add","remove","toggle","forEachFeatureAtPixel","getLength","item","index","indexOf","splice","extend","j","dispatchEvent","styles","POLYGON","LINE_STRING","GEOMETRY_COLLECTION","getGeometry","getType","assign","var_sources","output","ii","arguments","clear","object","property","getValues","values","isEmpty","DoubleClickZoom","delta_","delta","duration_","duration","stopEvent","MapBrowserEventType","DBLCLICK","browserEvent","anchor","coordinate","shiftKey","view","getView","preventDefault","Interaction","DragPan","stopDown","kinetic_","kinetic","lastCentroid","lastPointersCount_","panning_","onFocusOnly","noKinetic_","handleDragEvent","beginInteraction","targetPointers","centroid","update","getResolution","getRotation","adjustCenterInternal","begin","originalEvent","handleUpEvent","end","distance","getDistance","angle","getAngle","center","getCenterInternal","centerpx","getPixelFromCoordinateInternal","dest","getCoordinateFromPixelInternal","Math","cos","sin","animateInternal","getConstrainedCenter","easing","endInteraction","handleDownEvent","getAnimating","cancelAnimations","Pointer","DragRotate","lastAngle_","getConstraints","rotation","size","getSize","offset","theta","atan2","adjustRotationInternal","DragBoxEventType","BOXSTART","BOXDRAG","BOXEND","BOXCANCEL","DragBoxEvent","Event","DragBox","box_","className","minArea_","minArea","onBoxEnd","startPixel_","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","startPixel","endPixel","width","height","setPixels","completeBox","event","DragZoom","out_","out","geometry","rotatedExtent","rotatedExtentForGeometry","getResolutionForExtentInternal","factor","clone","scale","fitInternal","KeyboardPan","defaultCondition_","pixelDelta_","pixelDelta","EventType","KEYDOWN","keyEvent","keyCode","KeyCode","DOWN","LEFT","RIGHT","UP","mapUnitsDelta","deltaX","deltaY","KeyboardZoom","KEYPRESS","charCode","charCodeAt","Mode","TRACKPAD","WHEEL","MouseWheelZoom","totalDelta_","lastDelta_","maxDelta_","maxDelta","timeout_","timeout","useAnchor_","useAnchor","constrainResolution_","constrainResolution","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","deltaPerZoom_","endInteraction_","wheelEvent","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","now","Date","abs","getConstrainResolution","clearTimeout","setTimeout","adjustZoom","timeLeft","max","handleWheelZoom_","setMouseAnchor","PinchRotate","pointerOptions","anchor_","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","clientY","clientX","viewportPosition","getViewport","getBoundingClientRect","left","top","handlingDownUpSequence","PinchZoom","lastDistance_","lastScaleDelta_","scaleDelta","dx","dy","sqrt","adjustResolutionInternal","direction","defaults","Collection","Kinetic","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","VectorLayer","PointerInteraction","handleMoveEvent","trackedPointers_","getPointerCount","updateTrackedPointers_","POINTERDRAG","POINTERUP","handledUp","POINTERDOWN","handled","POINTERMOVE","isPointerDraggingEvent","event_1","id","pointerId","toString","pointerEvents","map_","setActive","getActive","ACTIVE","active","pan","opt_duration","currentCenter","zoomByDelta","opt_anchor","currentZoom","getZoom","newZoom","getConstrainedZoom","newResolution","getResolutionForZoom","animate","Property","BLUR","GRADIENT","RADIUS","DEFAULT_GRADIENT","Heatmap","gradient","radius","blur","weight","gradient_","handleGradientChanged_","setGradient","setBlur","setRadius","weightFunction_","setRenderOrder","getBlur","getGradient","getRadius","createGradient","colors","getClassName","attributes","name","callback","vertexShader","fragmentShader","hitVertexShader","hitFragmentShader","uniforms","u_size","u_blurSlope","postProcesses","u_gradientTexture","u_opacity","getOpacity","renderDeclutter","context","createLinearGradient","step","addColorStop","fillStyle","fillRect","canvas","BaseTileLayer","preload","useInterimTilesOnError","setPreload","setUseInterimTilesOnError","getPreload","TileProperty","PRELOAD","getUseInterimTilesOnError","USE_INTERIM_TILES_ON_ERROR","BaseTile","TileLayer","BaseLayer","background_","background","properties","OPACITY","opacity","VISIBLE","Z_INDEX","zIndex","MAX_RESOLUTION","Infinity","MIN_RESOLUTION","MIN_ZOOM","MAX_ZOOM","className_","setProperties","state_","getBackground","opt_managed","state","managed","getZIndex","round","sourceState","getVisible","extent","getExtent","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","EXTENT","setBackground","opt_background","setExtent","setMaxResolution","setMinResolution","setMaxZoom","setMinZoom","setOpacity","setVisible","setZIndex","zindex","ua","navigator","userAgent","toLowerCase","FIREFOX","WEBKIT","MAC","DEVICE_PIXEL_RATIO","devicePixelRatio","WORKER_OFFSCREEN_CANVAS","WorkerGlobalScope","OffscreenCanvas","self","IMAGE_DECODE","Image","decode","PASSIVE_EVENT_LISTENERS","passive","defineProperty","window","error","all","clamp","value","min","cosh","x","y","exp","log2","log","LOG2E","squaredSegmentDistance","x1","y1","x2","y2","t","squaredDistance","solveLinearSystem","mat","n","maxRow","maxEl","r","absValue","tmp","coef","k","l","m","toDegrees","angleInRadians","PI","toRadians","angleInDegrees","modulo","a","lerp","toFixed","decimals","pow","floor","ceil","VectorTileLayer","renderMode","console","warn","renderMode_","getRenderMode","GroupEvent","LAYERS","LayerGroup","layersListenerKeys_","listenerKeys_","handleLayersChanged_","isArray","slice","unique","setLayers","handleLayerChange_","getLayers","handleLayersAdd_","handleLayersRemove_","layersArray","registerLayerListeners_","listenerKeys","PROPERTYCHANGE","handleLayerGroupAdd_","handleLayerGroupRemove_","collectionEvent","collection","currentLayers","pos","ownLayerState","defaultZIndex","READY","POINT","CIRCLE","DrawEventType","DRAWSTART","DRAWEND","DRAWABORT","DrawEvent","Draw","shouldHandle_","downPx_","downTimeout_","lastDragTime_","pointerType_","freehand_","source_","snapTolerance_","snapTolerance","type_","getMode","stopClick_","stopClick","minPoints_","minPoints","maxPoints_","maxPoints","finishCondition_","finishCondition","geometryFunction","Constructor_1","mode_1","coordinates","projection","circle","NaN","squaredLength","setCenterAndRadius","userProjection","transform","setCoordinates","concat","geometryFunction_","dragVertexDelay_","dragVertexDelay","finishCoordinate_","sketchFeature_","sketchPoint_","sketchCoords_","sketchLine_","sketchLineCoords_","squaredClickTolerance_","clickTolerance","overlay_","useSpatialIndex","wrapX","updateWhileInteracting","geometryName_","geometryName","freehandCondition_","freehand","freehandCondition","updateState_","getOverlay","CONTEXTMENU","move","pass","addToDrawing_","handlePointerMove_","pointerType","startDrawing_","startingToDraw","finishDrawing","atFinish_","abortDrawing","downPx","clickPx","modifyDrawing_","createOrUpdateSketchPoint_","at","potentiallyDone","potentiallyFinishCoordinates","mode","sketchCoords","finishCoordinate","finishPixel","getPixelFromCoordinate","sketchPointGeom","updateSketchFeatures_","createOrUpdateCustomSketchLine_","ring","getLinearRing","sketchLineGeom","setFlatCoordinates","getLayout","getFlatCoordinates","setGeometry","start","getProjection","setGeometryName","last","done","pop","removeLastPoint","sketchFeature","abortDrawing_","getCoordinates","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","addFeature","appendCoordinates","newDrawing","shift","ending","lineString","sketchFeatures","overlaySource","addFeatures","Error","RENDER_ORDER","BaseVectorLayer","renderBuffer","updateWhileAnimating","declutter_","declutter","renderBuffer_","styleFunction_","updateWhileAnimating_","updateWhileInteracting_","getDeclutter","getRenderBuffer","getRenderOrder","getStyleFunction","getUpdateWhileAnimating","getUpdateWhileInteracting","declutterTree","renderOrder","opt_style","getFeatureFromEvent","tempSegment","Snap","vertex_","vertex","edge_","edge","featuresListenerKeys_","featureChangeListenerKeys_","indexedFeaturesExtents_","pendingFeatures_","pixelTolerance_","pixelTolerance","rBush_","SEGMENT_WRITERS_","writePointGeometry_","writeLineStringGeometry_","writePolygonGeometry_","writeMultiPointGeometry_","writeMultiLineStringGeometry_","writeMultiPolygonGeometry_","writeGeometryCollectionGeometry_","writeCircleGeometry_","opt_listen","register","feature_uid","segmentWriter","handleFeatureChange_","forEachFeatureAdd_","forEachFeatureRemove_","removeFeature","getFeatures_","result","snapTo","snapped","vertexPixel","handleFeatureAdd_","handleFeatureRemove_","uid","updateFeature_","featuresToUpdate","opt_unlisten","unregister","rBush","nodesToRemove_1","forEachInExtent","node","keys","ADDFEATURE","REMOVEFEATURE","pixelCoordinate","lowerLeft","getCoordinateFromPixel","upperRight","box","segments","getInExtent","segment","closestSegmentData","projectedCoordinate","minSquaredDistance","segmentData","closestSegment","pixel1","pixel2","squaredDist1","squaredDist2","dist","isCircle","circleGeometry","polygon","insert","geometries","getGeometriesArray","lines","jj","points","polygons","kk","rings","BaseImageLayer","BaseImage","ImageLayer"],"mappings":"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","file":"js/chunk-4fbfa8a9.229e4066.js","sourcesContent":["/**\n * @module ol/layer/VectorTileRenderType\n */\n/**\n * @enum {string}\n * Render mode for vector tiles:\n * @api\n */\nexport default {\n    /**\n     * Vector tiles are rendered as images. Great performance, but\n     * point symbols and texts are always rotated with the view and pixels are\n     * scaled during zoom animations\n     * @api\n     * @deprecated\n     */\n    IMAGE: 'image',\n    /**\n     * Polygon and line elements are rendered as images, so pixels\n     * are scaled during zoom animations. Point symbols and texts are accurately\n     * rendered as vectors and can stay upright on rotated views.\n     * @api\n     */\n    HYBRID: 'hybrid',\n    /**\n     * Everything is rendered as vectors. Use this mode for improved\n     * performance on vector tile layers with only a few rendered features (e.g.\n     * for highlighting a subset of features of another layer with the same\n     * source).\n     * @api\n     */\n    VECTOR: 'vector',\n};\n//# sourceMappingURL=VectorTileRenderType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Layer\n */\nimport BaseLayer from './Base.js';\nimport EventType from '../events/EventType.js';\nimport LayerProperty from './Property.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\nimport { assert } from '../asserts.js';\nimport { assign } from '../obj.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @typedef {function(import(\"../PluggableMap.js\").FrameState):HTMLElement} RenderFunction\n */\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:source', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../render/EventType\").LayerRenderEventTypes, import(\"../render/Event\").default, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|'change:source'|\n *     import(\"../render/EventType\").LayerRenderEventTypes, Return>} LayerOnSignature\n */\n/**\n * @template {import(\"../source/Source.js\").default} SourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {SourceType} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer~Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default} [map] Map.\n * @property {RenderFunction} [render] Render function. Takes the frame state as input and is expected to return an\n * HTML element. Will overwrite the default rendering for the layer.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @typedef {Object} State\n * @property {import(\"./Layer.js\").default} layer Layer.\n * @property {number} opacity Opacity, the value is rounded to two digits to appear after the decimal point.\n * @property {import(\"../source/State.js\").default} sourceState SourceState.\n * @property {boolean} visible Visible.\n * @property {boolean} managed Managed.\n * @property {import(\"../extent.js\").Extent} [extent] Extent.\n * @property {number} zIndex ZIndex.\n * @property {number} maxResolution Maximum resolution.\n * @property {number} minResolution Minimum resolution.\n * @property {number} minZoom Minimum zoom.\n * @property {number} maxZoom Maximum zoom.\n */\n/**\n * @classdesc\n * Base class from which all layer types are derived. This should only be instantiated\n * in the case where a custom layer is be added to the map with a custom `render` function.\n * Such a function can be specified in the `options` object, and is expected to return an HTML element.\n *\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}. Components\n * like {@link module:ol/interaction/Draw~Draw} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * Please note that for performance reasons several layers might get rendered to\n * the same HTML element, which will cause {@link import(\"../PluggableMap.js\").default#forEachLayerAtPixel map.forEachLayerAtPixel()} to\n * give false positives. To avoid this, apply different `className` properties to the\n * layers at creation time.\n *\n * @fires import(\"../render/Event.js\").RenderEvent#prerender\n * @fires import(\"../render/Event.js\").RenderEvent#postrender\n *\n * @template {import(\"../source/Source.js\").default} SourceType\n * @template {import(\"../renderer/Layer.js\").default} RendererType\n * @api\n */\nvar Layer = /** @class */ (function (_super) {\n    __extends(Layer, _super);\n    /**\n     * @param {Options<SourceType>} options Layer options.\n     */\n    function Layer(options) {\n        var _this = this;\n        var baseOptions = assign({}, options);\n        delete baseOptions.source;\n        _this = _super.call(this, baseOptions) || this;\n        /***\n         * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {LayerOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapPrecomposeKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapRenderKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.sourceChangeKey_ = null;\n        /**\n         * @private\n         * @type {RendererType}\n         */\n        _this.renderer_ = null;\n        // Overwrite default render method with a custom one\n        if (options.render) {\n            _this.render = options.render;\n        }\n        if (options.map) {\n            _this.setMap(options.map);\n        }\n        _this.addChangeListener(LayerProperty.SOURCE, _this.handleSourcePropertyChange_);\n        var source = options.source\n            ? /** @type {SourceType} */ (options.source)\n            : null;\n        _this.setSource(source);\n        return _this;\n    }\n    /**\n     * @param {Array<import(\"./Layer.js\").default>} [opt_array] Array of layers (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    Layer.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array ? opt_array : [];\n        array.push(this);\n        return array;\n    };\n    /**\n     * @param {Array<import(\"./Layer.js\").State>} [opt_states] Optional list of layer states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    Layer.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states ? opt_states : [];\n        states.push(this.getLayerState());\n        return states;\n    };\n    /**\n     * Get the layer source.\n     * @return {SourceType} The layer source (or `null` if not yet set).\n     * @observable\n     * @api\n     */\n    Layer.prototype.getSource = function () {\n        return /** @type {SourceType} */ (this.get(LayerProperty.SOURCE)) || null;\n    };\n    /**\n     * @return {import(\"../source/State.js\").default} Source state.\n     */\n    Layer.prototype.getSourceState = function () {\n        var source = this.getSource();\n        return !source ? SourceState.UNDEFINED : source.getState();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourceChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourcePropertyChange_ = function () {\n        if (this.sourceChangeKey_) {\n            unlistenByKey(this.sourceChangeKey_);\n            this.sourceChangeKey_ = null;\n        }\n        var source = this.getSource();\n        if (source) {\n            this.sourceChangeKey_ = listen(source, EventType.CHANGE, this.handleSourceChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * @param {import(\"../pixel\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n     * an array of features.\n     */\n    Layer.prototype.getFeatures = function (pixel) {\n        if (!this.renderer_) {\n            return new Promise(function (resolve) { return resolve([]); });\n        }\n        return this.renderer_.getFeatures(pixel);\n    };\n    /**\n     * In charge to manage the rendering of the layer. One layer type is\n     * bounded with one layer renderer.\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target which the renderer may (but need not) use\n     * for rendering its content.\n     * @return {HTMLElement} The rendered element.\n     */\n    Layer.prototype.render = function (frameState, target) {\n        var layerRenderer = this.getRenderer();\n        if (layerRenderer.prepareFrame(frameState)) {\n            return layerRenderer.renderFrame(frameState, target);\n        }\n    };\n    /**\n     * For use inside the library only.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    Layer.prototype.setMapInternal = function (map) {\n        this.set(LayerProperty.MAP, map);\n    };\n    /**\n     * For use inside the library only.\n     * @return {import(\"../PluggableMap.js\").default} Map.\n     */\n    Layer.prototype.getMapInternal = function () {\n        return this.get(LayerProperty.MAP);\n    };\n    /**\n     * Sets the layer to be rendered on top of other layers on a map. The map will\n     * not manage this layer in its layers collection, and the callback in\n     * {@link module:ol/Map~Map#forEachLayerAtPixel} will receive `null` as layer. This\n     * is useful for temporary layers. To remove an unmanaged layer from the map,\n     * use `#setMap(null)`.\n     *\n     * To add the layer to a map and have it managed by the map, use\n     * {@link module:ol/Map~Map#addLayer} instead.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    Layer.prototype.setMap = function (map) {\n        if (this.mapPrecomposeKey_) {\n            unlistenByKey(this.mapPrecomposeKey_);\n            this.mapPrecomposeKey_ = null;\n        }\n        if (!map) {\n            this.changed();\n        }\n        if (this.mapRenderKey_) {\n            unlistenByKey(this.mapRenderKey_);\n            this.mapRenderKey_ = null;\n        }\n        if (map) {\n            this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function (evt) {\n                var renderEvent = \n                /** @type {import(\"../render/Event.js\").default} */ (evt);\n                var layerStatesArray = renderEvent.frameState.layerStatesArray;\n                var layerState = this.getLayerState(false);\n                // A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both.\n                assert(!layerStatesArray.some(function (arrayLayerState) {\n                    return arrayLayerState.layer === layerState.layer;\n                }), 67);\n                layerStatesArray.push(layerState);\n            }, this);\n            this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n            this.changed();\n        }\n    };\n    /**\n     * Set the layer source.\n     * @param {SourceType} source The layer source.\n     * @observable\n     * @api\n     */\n    Layer.prototype.setSource = function (source) {\n        this.set(LayerProperty.SOURCE, source);\n    };\n    /**\n     * Get the renderer for this layer.\n     * @return {RendererType} The layer renderer.\n     */\n    Layer.prototype.getRenderer = function () {\n        if (!this.renderer_) {\n            this.renderer_ = this.createRenderer();\n        }\n        return this.renderer_;\n    };\n    /**\n     * @return {boolean} The layer has a renderer.\n     */\n    Layer.prototype.hasRenderer = function () {\n        return !!this.renderer_;\n    };\n    /**\n     * Create a renderer for this layer.\n     * @return {RendererType} A layer renderer.\n     * @protected\n     */\n    Layer.prototype.createRenderer = function () {\n        return null;\n    };\n    /**\n     * Clean up.\n     */\n    Layer.prototype.disposeInternal = function () {\n        if (this.renderer_) {\n            this.renderer_.dispose();\n            delete this.renderer_;\n        }\n        this.setSource(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    return Layer;\n}(BaseLayer));\n/**\n * Return `true` if the layer is visible and if the provided view state\n * has resolution and zoom levels that are in range of the layer's min/max.\n * @param {State} layerState Layer state.\n * @param {import(\"../View.js\").State} viewState View state.\n * @return {boolean} The layer is visible at the given view state.\n */\nexport function inView(layerState, viewState) {\n    if (!layerState.visible) {\n        return false;\n    }\n    var resolution = viewState.resolution;\n    if (resolution < layerState.minResolution ||\n        resolution >= layerState.maxResolution) {\n        return false;\n    }\n    var zoom = viewState.zoom;\n    return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\nexport default Layer;\n//# sourceMappingURL=Layer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Select\n */\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Interaction from './Interaction.js';\nimport VectorLayer from '../layer/Vector.js';\nimport { TRUE } from '../functions.js';\nimport { clear } from '../obj.js';\nimport { createEditingStyle } from '../style/Style.js';\nimport { extend, includes } from '../array.js';\nimport { getUid } from '../util.js';\nimport { never, shiftKeyOnly, singleClick } from '../events/condition.js';\n/**\n * @enum {string}\n */\nvar SelectEventType = {\n    /**\n     * Triggered when feature(s) has been (de)selected.\n     * @event SelectEvent#select\n     * @api\n     */\n    SELECT: 'select',\n};\n/**\n * A function that takes an {@link module:ol/Feature} or\n * {@link module:ol/render/Feature} and an\n * {@link module:ol/layer/Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>):boolean} FilterFunction\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [addCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is the event\n * for the selected features as a whole. By default, this is\n * {@link module:ol/events/condition.singleClick}. Clicking on a feature selects that\n * feature and removes any that were in the selection. Clicking outside any\n * feature removes all from the selection.\n * See `toggle`, `add`, `remove` options for adding/removing extra features to/\n * from the selection.\n * @property {Array<import(\"../layer/Layer.js\").default>|function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} [layers]\n * A list of layers from which features should be selected. Alternatively, a\n * filter function can be provided. The function will be called for each layer\n * in the map and should return `true` for layers that you want to be\n * selectable. If the option is absent, all visible layers will be considered\n * selectable.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style]\n * Style for the selected features. By default the default edit style is used\n * (see {@link module:ol/style/Style~Style}). Set to `null` if this interaction should not apply\n * any style changes for selected features.\n * If set to a falsey value, the selected feature's style will not change.\n * @property {import(\"../events/condition.js\").Condition} [removeCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [toggleCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is in addition\n * to the `condition` event. By default,\n * {@link module:ol/events/condition.shiftKeyOnly}, i.e. pressing `shift` as\n * well as the `condition` event, adds that feature to the current selection if\n * it is not currently selected, and removes it if it is. See `add` and `remove`\n * if you want to use different events instead of a toggle.\n * @property {boolean} [multi=false] A boolean that determines if the default\n * behaviour should select only single features or all (overlapping) features at\n * the clicked map position. The default of `false` means single select.\n * @property {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} [features]\n * Collection where the interaction will place selected features. Optional. If\n * not set the interaction will create a collection. In any case the collection\n * used by the interaction is returned by\n * {@link module:ol/interaction/Select~Select#getFeatures}.\n * @property {FilterFunction} [filter] A function\n * that takes an {@link module:ol/Feature} and an\n * {@link module:ol/layer/Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside\n * the radius around the given position will be checked for features.\n */\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Select~Select} instances are instances of\n * this type.\n */\nvar SelectEvent = /** @class */ (function (_super) {\n    __extends(SelectEvent, _super);\n    /**\n     * @param {SelectEventType} type The event type.\n     * @param {Array<import(\"../Feature.js\").default>} selected Selected features.\n     * @param {Array<import(\"../Feature.js\").default>} deselected Deselected features.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Associated\n     *     {@link module:ol/MapBrowserEvent}.\n     */\n    function SelectEvent(type, selected, deselected, mapBrowserEvent) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * Selected features array.\n         * @type {Array<import(\"../Feature.js\").default>}\n         * @api\n         */\n        _this.selected = selected;\n        /**\n         * Deselected features array.\n         * @type {Array<import(\"../Feature.js\").default>}\n         * @api\n         */\n        _this.deselected = deselected;\n        /**\n         * Associated {@link module:ol/MapBrowserEvent}.\n         * @type {import(\"../MapBrowserEvent.js\").default}\n         * @api\n         */\n        _this.mapBrowserEvent = mapBrowserEvent;\n        return _this;\n    }\n    return SelectEvent;\n}(Event));\nexport { SelectEvent };\n/**\n * Original feature styles to reset to when features are no longer selected.\n * @type {Object<number, import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction>}\n */\nvar originalFeatureStyles = {};\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'select', SelectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'select', Return>} SelectOnSignature\n */\n/**\n * @classdesc\n * Interaction for selecting vector features. By default, selected features are\n * styled differently, so this interaction can be used for visual highlighting,\n * as well as selecting features for other actions, such as modification or\n * output. There are three ways of controlling which features are selected:\n * using the browser event as defined by the `condition` and optionally the\n * `toggle`, `add`/`remove`, and `multi` options; a `layers` filter; and a\n * further feature filter using the `filter` option.\n *\n * @fires SelectEvent\n * @api\n */\nvar Select = /** @class */ (function (_super) {\n    __extends(Select, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Select(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {SelectOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         */\n        _this.boundAddFeature_ = _this.addFeature_.bind(_this);\n        /**\n         * @private\n         */\n        _this.boundRemoveFeature_ = _this.removeFeature_.bind(_this);\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : singleClick;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.addCondition_ = options.addCondition ? options.addCondition : never;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.removeCondition_ = options.removeCondition\n            ? options.removeCondition\n            : never;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.toggleCondition_ = options.toggleCondition\n            ? options.toggleCondition\n            : shiftKeyOnly;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.multi_ = options.multi ? options.multi : false;\n        /**\n         * @private\n         * @type {FilterFunction}\n         */\n        _this.filter_ = options.filter ? options.filter : TRUE;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n        /**\n         * @private\n         * @type {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null}\n         */\n        _this.style_ =\n            options.style !== undefined ? options.style : getDefaultStyleFunction();\n        /**\n         * @private\n         * @type {import(\"../Collection.js\").default}\n         */\n        _this.features_ = options.features || new Collection();\n        /** @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} */\n        var layerFilter;\n        if (options.layers) {\n            if (typeof options.layers === 'function') {\n                layerFilter = options.layers;\n            }\n            else {\n                var layers_1 = options.layers;\n                layerFilter = function (layer) {\n                    return includes(layers_1, layer);\n                };\n            }\n        }\n        else {\n            layerFilter = TRUE;\n        }\n        /**\n         * @private\n         * @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean}\n         */\n        _this.layerFilter_ = layerFilter;\n        /**\n         * An association between selected feature (key)\n         * and layer (value)\n         * @private\n         * @type {Object<string, import(\"../layer/Layer.js\").default>}\n         */\n        _this.featureLayerAssociation_ = {};\n        return _this;\n    }\n    /**\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../layer/Layer.js\").default} layer Layer.\n     * @private\n     */\n    Select.prototype.addFeatureLayerAssociation_ = function (feature, layer) {\n        this.featureLayerAssociation_[getUid(feature)] = layer;\n    };\n    /**\n     * Get the selected features.\n     * @return {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} Features collection.\n     * @api\n     */\n    Select.prototype.getFeatures = function () {\n        return this.features_;\n    };\n    /**\n     * Returns the Hit-detection tolerance.\n     * @return {number} Hit tolerance in pixels.\n     * @api\n     */\n    Select.prototype.getHitTolerance = function () {\n        return this.hitTolerance_;\n    };\n    /**\n     * Returns the associated {@link module:ol/layer/Vector~Vector vector layer} of\n     * a selected feature.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature\n     * @return {import('../layer/Vector.js').default} Layer.\n     * @api\n     */\n    Select.prototype.getLayer = function (feature) {\n        return /** @type {import('../layer/Vector.js').default} */ (this.featureLayerAssociation_[getUid(feature)]);\n    };\n    /**\n     * Hit-detection tolerance. Pixels inside the radius around the given position\n     * will be checked for features.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @api\n     */\n    Select.prototype.setHitTolerance = function (hitTolerance) {\n        this.hitTolerance_ = hitTolerance;\n    };\n    /**\n     * Remove the interaction from its current map, if any,  and attach it to a new\n     * map, if any. Pass `null` to just remove the interaction from the current map.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    Select.prototype.setMap = function (map) {\n        var currentMap = this.getMap();\n        if (currentMap && this.style_) {\n            this.features_.forEach(this.restorePreviousStyle_.bind(this));\n        }\n        _super.prototype.setMap.call(this, map);\n        if (map) {\n            this.features_.addEventListener(CollectionEventType.ADD, this.boundAddFeature_);\n            this.features_.addEventListener(CollectionEventType.REMOVE, this.boundRemoveFeature_);\n            if (this.style_) {\n                this.features_.forEach(this.applySelectedStyle_.bind(this));\n            }\n        }\n        else {\n            this.features_.removeEventListener(CollectionEventType.ADD, this.boundAddFeature_);\n            this.features_.removeEventListener(CollectionEventType.REMOVE, this.boundRemoveFeature_);\n        }\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n     * @private\n     */\n    Select.prototype.addFeature_ = function (evt) {\n        var feature = evt.element;\n        if (this.style_) {\n            this.applySelectedStyle_(feature);\n        }\n        if (!this.getLayer(feature)) {\n            var layer = /** @type {VectorLayer} */ (this.getMap()\n                .getAllLayers()\n                .find(function (layer) {\n                if (layer instanceof VectorLayer &&\n                    layer.getSource() &&\n                    layer.getSource().hasFeature(feature)) {\n                    return layer;\n                }\n            }));\n            if (layer) {\n                this.addFeatureLayerAssociation_(feature, layer);\n            }\n        }\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n     * @private\n     */\n    Select.prototype.removeFeature_ = function (evt) {\n        var feature = evt.element;\n        if (this.style_) {\n            this.restorePreviousStyle_(feature);\n        }\n    };\n    /**\n     * @return {import(\"../style/Style.js\").StyleLike|null} Select style.\n     */\n    Select.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @private\n     */\n    Select.prototype.applySelectedStyle_ = function (feature) {\n        var key = getUid(feature);\n        if (!(key in originalFeatureStyles)) {\n            originalFeatureStyles[key] = feature.getStyle();\n        }\n        feature.setStyle(this.style_);\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @private\n     */\n    Select.prototype.restorePreviousStyle_ = function (feature) {\n        var interactions = this.getMap().getInteractions().getArray();\n        for (var i = interactions.length - 1; i >= 0; --i) {\n            var interaction = interactions[i];\n            if (interaction !== this &&\n                interaction instanceof Select &&\n                interaction.getStyle() &&\n                interaction.getFeatures().getArray().lastIndexOf(feature) !== -1) {\n                feature.setStyle(interaction.getStyle());\n                return;\n            }\n        }\n        var key = getUid(feature);\n        feature.setStyle(originalFeatureStyles[key]);\n        delete originalFeatureStyles[key];\n    };\n    /**\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @private\n     */\n    Select.prototype.removeFeatureLayerAssociation_ = function (feature) {\n        delete this.featureLayerAssociation_[getUid(feature)];\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} and may change the\n     * selected state of features.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {Select}\n     */\n    Select.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!this.condition_(mapBrowserEvent)) {\n            return true;\n        }\n        var add = this.addCondition_(mapBrowserEvent);\n        var remove = this.removeCondition_(mapBrowserEvent);\n        var toggle = this.toggleCondition_(mapBrowserEvent);\n        var set = !add && !remove && !toggle;\n        var map = mapBrowserEvent.map;\n        var features = this.getFeatures();\n        var deselected = [];\n        var selected = [];\n        if (set) {\n            // Replace the currently selected feature(s) with the feature(s) at the\n            // pixel, or clear the selected feature(s) if there is no feature at\n            // the pixel.\n            clear(this.featureLayerAssociation_);\n            map.forEachFeatureAtPixel(mapBrowserEvent.pixel, \n            /**\n             * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n             * @param {import(\"../layer/Layer.js\").default} layer Layer.\n             * @return {boolean|undefined} Continue to iterate over the features.\n             */\n            function (feature, layer) {\n                if (this.filter_(feature, layer)) {\n                    this.addFeatureLayerAssociation_(feature, layer);\n                    selected.push(feature);\n                    return !this.multi_;\n                }\n            }.bind(this), {\n                layerFilter: this.layerFilter_,\n                hitTolerance: this.hitTolerance_,\n            });\n            for (var i = features.getLength() - 1; i >= 0; --i) {\n                var feature = features.item(i);\n                var index = selected.indexOf(feature);\n                if (index > -1) {\n                    // feature is already selected\n                    selected.splice(index, 1);\n                }\n                else {\n                    features.remove(feature);\n                    deselected.push(feature);\n                }\n            }\n            if (selected.length !== 0) {\n                features.extend(selected);\n            }\n        }\n        else {\n            // Modify the currently selected feature(s).\n            map.forEachFeatureAtPixel(mapBrowserEvent.pixel, \n            /**\n             * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n             * @param {import(\"../layer/Layer.js\").default} layer Layer.\n             * @return {boolean|undefined} Continue to iterate over the features.\n             */\n            function (feature, layer) {\n                if (this.filter_(feature, layer)) {\n                    if ((add || toggle) && !includes(features.getArray(), feature)) {\n                        this.addFeatureLayerAssociation_(feature, layer);\n                        selected.push(feature);\n                    }\n                    else if ((remove || toggle) &&\n                        includes(features.getArray(), feature)) {\n                        deselected.push(feature);\n                        this.removeFeatureLayerAssociation_(feature);\n                    }\n                    return !this.multi_;\n                }\n            }.bind(this), {\n                layerFilter: this.layerFilter_,\n                hitTolerance: this.hitTolerance_,\n            });\n            for (var j = deselected.length - 1; j >= 0; --j) {\n                features.remove(deselected[j]);\n            }\n            features.extend(selected);\n        }\n        if (selected.length > 0 || deselected.length > 0) {\n            this.dispatchEvent(new SelectEvent(SelectEventType.SELECT, selected, deselected, mapBrowserEvent));\n        }\n        return true;\n    };\n    return Select;\n}(Interaction));\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n    var styles = createEditingStyle();\n    extend(styles[GeometryType.POLYGON], styles[GeometryType.LINE_STRING]);\n    extend(styles[GeometryType.GEOMETRY_COLLECTION], styles[GeometryType.LINE_STRING]);\n    return function (feature) {\n        if (!feature.getGeometry()) {\n            return null;\n        }\n        return styles[feature.getGeometry().getType()];\n    };\n}\nexport default Select;\n//# sourceMappingURL=Select.js.map","/**\n * @module ol/obj\n */\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport var assign = typeof Object.assign === 'function'\n    ? Object.assign\n    : function (target, var_sources) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n        var output = Object(target);\n        for (var i = 1, ii = arguments.length; i < ii; ++i) {\n            var source = arguments[i];\n            if (source !== undefined && source !== null) {\n                for (var key in source) {\n                    if (source.hasOwnProperty(key)) {\n                        output[key] = source[key];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n    for (var property in object) {\n        delete object[property];\n    }\n}\n/**\n * Polyfill for Object.values().  Get an array of property values from an object.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values\n *\n * @param {!Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport var getValues = typeof Object.values === 'function'\n    ? Object.values\n    : function (object) {\n        var values = [];\n        for (var property in object) {\n            values.push(object[property]);\n        }\n        return values;\n    };\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n    var property;\n    for (property in object) {\n        return false;\n    }\n    return !property;\n}\n//# sourceMappingURL=obj.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nvar DoubleClickZoom = /** @class */ (function (_super) {\n    __extends(DoubleClickZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DoubleClickZoom(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.delta_ = options.delta ? options.delta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n     * doubleclick) and eventually zooms the map.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     */\n    DoubleClickZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        var stopEvent = false;\n        if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n            var browserEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n            var map = mapBrowserEvent.map;\n            var anchor = mapBrowserEvent.coordinate;\n            var delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n            var view = map.getView();\n            zoomByDelta(view, delta, anchor, this.duration_);\n            browserEvent.preventDefault();\n            stopEvent = true;\n        }\n        return !stopEvent;\n    };\n    return DoubleClickZoom;\n}(Interaction));\nexport default DoubleClickZoom;\n//# sourceMappingURL=DoubleClickZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragPan\n */\nimport PointerInteraction, { centroid as centroidFromPointers, } from './Pointer.js';\nimport { FALSE } from '../functions.js';\nimport { all, focusWithTabindex, noModifierKeys, primaryAction, } from '../events/condition.js';\nimport { easeOut } from '../easing.js';\nimport { rotate as rotateCoordinate, scale as scaleCoordinate, } from '../coordinate.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.noModifierKeys} and {@link module:ol/events/condition.primaryAction}.\n * @property {boolean} [onFocusOnly=false] When the map's target has a `tabindex` attribute set,\n * the interaction will only handle events when the map has the focus.\n * @property {import(\"../Kinetic.js\").default} [kinetic] Kinetic inertia to apply to the pan.\n */\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nvar DragPan = /** @class */ (function (_super) {\n    __extends(DragPan, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragPan(opt_options) {\n        var _this = _super.call(this, {\n            stopDown: FALSE,\n        }) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {import(\"../Kinetic.js\").default|undefined}\n         */\n        _this.kinetic_ = options.kinetic;\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.lastCentroid = null;\n        /**\n         * @type {number}\n         */\n        _this.lastPointersCount_;\n        /**\n         * @type {boolean}\n         */\n        _this.panning_ = false;\n        var condition = options.condition\n            ? options.condition\n            : all(noModifierKeys, primaryAction);\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.onFocusOnly\n            ? all(focusWithTabindex, condition)\n            : condition;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.noKinetic_ = false;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    DragPan.prototype.handleDragEvent = function (mapBrowserEvent) {\n        if (!this.panning_) {\n            this.panning_ = true;\n            this.getMap().getView().beginInteraction();\n        }\n        var targetPointers = this.targetPointers;\n        var centroid = centroidFromPointers(targetPointers);\n        if (targetPointers.length == this.lastPointersCount_) {\n            if (this.kinetic_) {\n                this.kinetic_.update(centroid[0], centroid[1]);\n            }\n            if (this.lastCentroid) {\n                var delta = [\n                    this.lastCentroid[0] - centroid[0],\n                    centroid[1] - this.lastCentroid[1],\n                ];\n                var map = mapBrowserEvent.map;\n                var view = map.getView();\n                scaleCoordinate(delta, view.getResolution());\n                rotateCoordinate(delta, view.getRotation());\n                view.adjustCenterInternal(delta);\n            }\n        }\n        else if (this.kinetic_) {\n            // reset so we don't overestimate the kinetic energy after\n            // after one finger down, tiny drag, second finger down\n            this.kinetic_.begin();\n        }\n        this.lastCentroid = centroid;\n        this.lastPointersCount_ = targetPointers.length;\n        mapBrowserEvent.originalEvent.preventDefault();\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragPan.prototype.handleUpEvent = function (mapBrowserEvent) {\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (this.targetPointers.length === 0) {\n            if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n                var distance = this.kinetic_.getDistance();\n                var angle = this.kinetic_.getAngle();\n                var center = view.getCenterInternal();\n                var centerpx = map.getPixelFromCoordinateInternal(center);\n                var dest = map.getCoordinateFromPixelInternal([\n                    centerpx[0] - distance * Math.cos(angle),\n                    centerpx[1] - distance * Math.sin(angle),\n                ]);\n                view.animateInternal({\n                    center: view.getConstrainedCenter(dest),\n                    duration: 500,\n                    easing: easeOut,\n                });\n            }\n            if (this.panning_) {\n                this.panning_ = false;\n                view.endInteraction();\n            }\n            return false;\n        }\n        else {\n            if (this.kinetic_) {\n                // reset so we don't overestimate the kinetic energy after\n                // after one finger up, tiny drag, second finger up\n                this.kinetic_.begin();\n            }\n            this.lastCentroid = null;\n            return true;\n        }\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragPan.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            this.lastCentroid = null;\n            // stop any current animation\n            if (view.getAnimating()) {\n                view.cancelAnimations();\n            }\n            if (this.kinetic_) {\n                this.kinetic_.begin();\n            }\n            // No kinetic as soon as more than one pointer on the screen is\n            // detected. This is to prevent nasty pans after pinch.\n            this.noKinetic_ = this.targetPointers.length > 1;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return DragPan;\n}(PointerInteraction));\nexport default DragPan;\n//# sourceMappingURL=DragPan.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragRotate\n */\nimport PointerInteraction from './Pointer.js';\nimport { FALSE } from '../functions.js';\nimport { altShiftKeysOnly, mouseActionButton, mouseOnly, } from '../events/condition.js';\nimport { disable } from '../rotationconstraint.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nvar DragRotate = /** @class */ (function (_super) {\n    __extends(DragRotate, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragRotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            stopDown: FALSE,\n        }) || this;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastAngle_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    DragRotate.prototype.handleDragEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return;\n        }\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (view.getConstraints().rotation === disable) {\n            return;\n        }\n        var size = map.getSize();\n        var offset = mapBrowserEvent.pixel;\n        var theta = Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n        if (this.lastAngle_ !== undefined) {\n            var delta = theta - this.lastAngle_;\n            view.adjustRotationInternal(-delta);\n        }\n        this.lastAngle_ = theta;\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragRotate.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return true;\n        }\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        view.endInteraction(this.duration_);\n        return false;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragRotate.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return false;\n        }\n        if (mouseActionButton(mapBrowserEvent) &&\n            this.condition_(mapBrowserEvent)) {\n            var map = mapBrowserEvent.map;\n            map.getView().beginInteraction();\n            this.lastAngle_ = undefined;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return DragRotate;\n}(PointerInteraction));\nexport default DragRotate;\n//# sourceMappingURL=DragRotate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport PointerInteraction from './Pointer.js';\nimport RenderBox from '../render/Box.js';\nimport { mouseActionButton } from '../events/condition.js';\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default, import(\"../pixel.js\").Pixel, import(\"../pixel.js\").Pixel):boolean} EndCondition\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~mouseActionButton}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:DragBox, import(\"../MapBrowserEvent.js\").default):void} [onBoxEnd] Code to execute just\n * before `boxend` is fired.\n */\n/**\n * @enum {string}\n */\nvar DragBoxEventType = {\n    /**\n     * Triggered upon drag box start.\n     * @event DragBoxEvent#boxstart\n     * @api\n     */\n    BOXSTART: 'boxstart',\n    /**\n     * Triggered on drag when box is active.\n     * @event DragBoxEvent#boxdrag\n     * @api\n     */\n    BOXDRAG: 'boxdrag',\n    /**\n     * Triggered upon drag box end.\n     * @event DragBoxEvent#boxend\n     * @api\n     */\n    BOXEND: 'boxend',\n    /**\n     * Triggered upon drag box canceled.\n     * @event DragBoxEvent#boxcancel\n     * @api\n     */\n    BOXCANCEL: 'boxcancel',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nvar DragBoxEvent = /** @class */ (function (_super) {\n    __extends(DragBoxEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Originating event.\n     */\n    function DragBoxEvent(type, coordinate, mapBrowserEvent) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The coordinate of the drag event.\n         * @const\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @api\n         */\n        _this.coordinate = coordinate;\n        /**\n         * @const\n         * @type {import(\"../MapBrowserEvent.js\").default}\n         * @api\n         */\n        _this.mapBrowserEvent = mapBrowserEvent;\n        return _this;\n    }\n    return DragBoxEvent;\n}(Event));\nexport { DragBoxEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'boxcancel'|'boxdrag'|'boxend'|'boxstart', DragBoxEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'boxcancel'|'boxdrag'|'boxend', Return>} DragBoxOnSignature\n */\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom}).\n *\n * @fires DragBoxEvent\n * @api\n */\nvar DragBox = /** @class */ (function (_super) {\n    __extends(DragBox, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragBox(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {DragBoxOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {DragBoxOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {DragBoxOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @type {import(\"../render/Box.js\").default}\n         * @private\n         */\n        _this.box_ = new RenderBox(options.className || 'ol-dragbox');\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n        if (options.onBoxEnd) {\n            _this.onBoxEnd = options.onBoxEnd;\n        }\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         * @private\n         */\n        _this.startPixel_ = null;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : mouseActionButton;\n        /**\n         * @private\n         * @type {EndCondition}\n         */\n        _this.boxEndCondition_ = options.boxEndCondition\n            ? options.boxEndCondition\n            : _this.defaultBoxEndCondition;\n        return _this;\n    }\n    /**\n     * The default condition for determining whether the boxend event\n     * should fire.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent The originating MapBrowserEvent\n     *     leading to the box end.\n     * @param {import(\"../pixel.js\").Pixel} startPixel The starting pixel of the box.\n     * @param {import(\"../pixel.js\").Pixel} endPixel The end pixel of the box.\n     * @return {boolean} Whether or not the boxend condition should be fired.\n     */\n    DragBox.prototype.defaultBoxEndCondition = function (mapBrowserEvent, startPixel, endPixel) {\n        var width = endPixel[0] - startPixel[0];\n        var height = endPixel[1] - startPixel[1];\n        return width * width + height * height >= this.minArea_;\n    };\n    /**\n     * Returns geometry of last drawn box.\n     * @return {import(\"../geom/Polygon.js\").default} Geometry.\n     * @api\n     */\n    DragBox.prototype.getGeometry = function () {\n        return this.box_.getGeometry();\n    };\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    DragBox.prototype.handleDragEvent = function (mapBrowserEvent) {\n        this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n        this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG, mapBrowserEvent.coordinate, mapBrowserEvent));\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragBox.prototype.handleUpEvent = function (mapBrowserEvent) {\n        this.box_.setMap(null);\n        var completeBox = this.boxEndCondition_(mapBrowserEvent, this.startPixel_, mapBrowserEvent.pixel);\n        if (completeBox) {\n            this.onBoxEnd(mapBrowserEvent);\n        }\n        this.dispatchEvent(new DragBoxEvent(completeBox ? DragBoxEventType.BOXEND : DragBoxEventType.BOXCANCEL, mapBrowserEvent.coordinate, mapBrowserEvent));\n        return false;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragBox.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.condition_(mapBrowserEvent)) {\n            this.startPixel_ = mapBrowserEvent.pixel;\n            this.box_.setMap(mapBrowserEvent.map);\n            this.box_.setPixels(this.startPixel_, this.startPixel_);\n            this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART, mapBrowserEvent.coordinate, mapBrowserEvent));\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     */\n    DragBox.prototype.onBoxEnd = function (event) { };\n    return DragBox;\n}(PointerInteraction));\nexport default DragBox;\n//# sourceMappingURL=DragBox.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragZoom\n */\nimport DragBox from './DragBox.js';\nimport { easeOut } from '../easing.js';\nimport { shiftKeyOnly } from '../events/condition.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the parent default\n * `boxEndCondition` function.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nvar DragZoom = /** @class */ (function (_super) {\n    __extends(DragZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var condition = options.condition ? options.condition : shiftKeyOnly;\n        _this = _super.call(this, {\n            condition: condition,\n            className: options.className || 'ol-dragzoom',\n            minArea: options.minArea,\n        }) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 200;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.out_ = options.out !== undefined ? options.out : false;\n        return _this;\n    }\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     */\n    DragZoom.prototype.onBoxEnd = function (event) {\n        var map = this.getMap();\n        var view = /** @type {!import(\"../View.js\").default} */ (map.getView());\n        var geometry = this.getGeometry();\n        if (this.out_) {\n            var rotatedExtent = view.rotatedExtentForGeometry(geometry);\n            var resolution = view.getResolutionForExtentInternal(rotatedExtent);\n            var factor = view.getResolution() / resolution;\n            geometry = geometry.clone();\n            geometry.scale(factor * factor);\n        }\n        view.fitInternal(geometry, {\n            duration: this.duration_,\n            easing: easeOut,\n        });\n    };\n    return DragZoom;\n}(DragBox));\nexport default DragZoom;\n//# sourceMappingURL=DragZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/KeyboardPan\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, { pan } from './Interaction.js';\nimport KeyCode from '../events/KeyCode.js';\nimport { noModifierKeys, targetNotEditable } from '../events/condition.js';\nimport { rotate as rotateCoordinate } from '../coordinate.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.noModifierKeys} and\n * {@link module:ol/events/condition.targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nvar KeyboardPan = /** @class */ (function (_super) {\n    __extends(KeyboardPan, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function KeyboardPan(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n         * @return {boolean} Combined condition result.\n         */\n        _this.defaultCondition_ = function (mapBrowserEvent) {\n            return (noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent));\n        };\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ =\n            options.condition !== undefined\n                ? options.condition\n                : _this.defaultCondition_;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 100;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelDelta_ =\n            options.pixelDelta !== undefined ? options.pixelDelta : 128;\n        return _this;\n    }\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n     * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n     * pressed).\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {KeyboardPan}\n     */\n    KeyboardPan.prototype.handleEvent = function (mapBrowserEvent) {\n        var stopEvent = false;\n        if (mapBrowserEvent.type == EventType.KEYDOWN) {\n            var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n            var keyCode = keyEvent.keyCode;\n            if (this.condition_(mapBrowserEvent) &&\n                (keyCode == KeyCode.DOWN ||\n                    keyCode == KeyCode.LEFT ||\n                    keyCode == KeyCode.RIGHT ||\n                    keyCode == KeyCode.UP)) {\n                var map = mapBrowserEvent.map;\n                var view = map.getView();\n                var mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n                var deltaX = 0, deltaY = 0;\n                if (keyCode == KeyCode.DOWN) {\n                    deltaY = -mapUnitsDelta;\n                }\n                else if (keyCode == KeyCode.LEFT) {\n                    deltaX = -mapUnitsDelta;\n                }\n                else if (keyCode == KeyCode.RIGHT) {\n                    deltaX = mapUnitsDelta;\n                }\n                else {\n                    deltaY = mapUnitsDelta;\n                }\n                var delta = [deltaX, deltaY];\n                rotateCoordinate(delta, view.getRotation());\n                pan(view, delta, this.duration_);\n                keyEvent.preventDefault();\n                stopEvent = true;\n            }\n        }\n        return !stopEvent;\n    };\n    return KeyboardPan;\n}(Interaction));\nexport default KeyboardPan;\n//# sourceMappingURL=KeyboardPan.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport { targetNotEditable } from '../events/condition.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nvar KeyboardZoom = /** @class */ (function (_super) {\n    __extends(KeyboardZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function KeyboardZoom(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : targetNotEditable;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.delta_ = options.delta ? options.delta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 100;\n        return _this;\n    }\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n     * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n     * key pressed was '+' or '-').\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {KeyboardZoom}\n     */\n    KeyboardZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        var stopEvent = false;\n        if (mapBrowserEvent.type == EventType.KEYDOWN ||\n            mapBrowserEvent.type == EventType.KEYPRESS) {\n            var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n            var charCode = keyEvent.charCode;\n            if (this.condition_(mapBrowserEvent) &&\n                (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n                var map = mapBrowserEvent.map;\n                var delta = charCode == '+'.charCodeAt(0) ? this.delta_ : -this.delta_;\n                var view = map.getView();\n                zoomByDelta(view, delta, undefined, this.duration_);\n                keyEvent.preventDefault();\n                stopEvent = true;\n            }\n        }\n        return !stopEvent;\n    };\n    return KeyboardZoom;\n}(Interaction));\nexport default KeyboardZoom;\n//# sourceMappingURL=KeyboardZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport { DEVICE_PIXEL_RATIO, FIREFOX } from '../has.js';\nimport { all, always, focusWithTabindex } from '../events/condition.js';\nimport { clamp } from '../math.js';\n/**\n * @enum {string}\n */\nexport var Mode = {\n    TRACKPAD: 'trackpad',\n    WHEEL: 'wheel',\n};\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.always}.\n * @property {boolean} [onFocusOnly=false] When the map's target has a `tabindex` attribute set,\n * the interaction will only handle events when the map has the focus.\n * @property {number} [maxDelta=1] Maximum mouse wheel delta.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n * @property {boolean} [constrainResolution=false] If true, the mouse wheel zoom\n * event will always animate to the closest zoom level after an interaction;\n * false means intermediary zoom levels are allowed.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nvar MouseWheelZoom = /** @class */ (function (_super) {\n    __extends(MouseWheelZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function MouseWheelZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, \n        /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.totalDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.lastDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = options.maxDelta !== undefined ? options.maxDelta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.useAnchor_ =\n            options.useAnchor !== undefined ? options.useAnchor : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.constrainResolution_ =\n            options.constrainResolution !== undefined\n                ? options.constrainResolution\n                : false;\n        var condition = options.condition ? options.condition : always;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.onFocusOnly\n            ? all(focusWithTabindex, condition)\n            : condition;\n        /**\n         * @private\n         * @type {?import(\"../coordinate.js\").Coordinate}\n         */\n        _this.lastAnchor_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.startTime_ = undefined;\n        /**\n         * @private\n         * @type {?}\n         */\n        _this.timeoutId_;\n        /**\n         * @private\n         * @type {Mode|undefined}\n         */\n        _this.mode_ = undefined;\n        /**\n         * Trackpad events separated by this delay will be considered separate\n         * interactions.\n         * @type {number}\n         */\n        _this.trackpadEventGap_ = 400;\n        /**\n         * @type {?}\n         */\n        _this.trackpadTimeoutId_;\n        /**\n         * The number of delta values per zoom level\n         * @private\n         * @type {number}\n         */\n        _this.deltaPerZoom_ = 300;\n        return _this;\n    }\n    /**\n     * @private\n     */\n    MouseWheelZoom.prototype.endInteraction_ = function () {\n        this.trackpadTimeoutId_ = undefined;\n        var view = this.getMap().getView();\n        view.endInteraction(undefined, this.lastDelta_ ? (this.lastDelta_ > 0 ? 1 : -1) : 0, this.lastAnchor_);\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n     * zooms the map.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     */\n    MouseWheelZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!this.condition_(mapBrowserEvent)) {\n            return true;\n        }\n        var type = mapBrowserEvent.type;\n        if (type !== EventType.WHEEL) {\n            return true;\n        }\n        var map = mapBrowserEvent.map;\n        var wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n        wheelEvent.preventDefault();\n        if (this.useAnchor_) {\n            this.lastAnchor_ = mapBrowserEvent.coordinate;\n        }\n        // Delta normalisation inspired by\n        // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n        var delta;\n        if (mapBrowserEvent.type == EventType.WHEEL) {\n            delta = wheelEvent.deltaY;\n            if (FIREFOX && wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n                delta /= DEVICE_PIXEL_RATIO;\n            }\n            if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n                delta *= 40;\n            }\n        }\n        if (delta === 0) {\n            return false;\n        }\n        else {\n            this.lastDelta_ = delta;\n        }\n        var now = Date.now();\n        if (this.startTime_ === undefined) {\n            this.startTime_ = now;\n        }\n        if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n            this.mode_ = Math.abs(delta) < 4 ? Mode.TRACKPAD : Mode.WHEEL;\n        }\n        var view = map.getView();\n        if (this.mode_ === Mode.TRACKPAD &&\n            !(view.getConstrainResolution() || this.constrainResolution_)) {\n            if (this.trackpadTimeoutId_) {\n                clearTimeout(this.trackpadTimeoutId_);\n            }\n            else {\n                if (view.getAnimating()) {\n                    view.cancelAnimations();\n                }\n                view.beginInteraction();\n            }\n            this.trackpadTimeoutId_ = setTimeout(this.endInteraction_.bind(this), this.timeout_);\n            view.adjustZoom(-delta / this.deltaPerZoom_, this.lastAnchor_);\n            this.startTime_ = now;\n            return false;\n        }\n        this.totalDelta_ += delta;\n        var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n        clearTimeout(this.timeoutId_);\n        this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n        return false;\n    };\n    /**\n     * @private\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    MouseWheelZoom.prototype.handleWheelZoom_ = function (map) {\n        var view = map.getView();\n        if (view.getAnimating()) {\n            view.cancelAnimations();\n        }\n        var delta = -clamp(this.totalDelta_, -this.maxDelta_ * this.deltaPerZoom_, this.maxDelta_ * this.deltaPerZoom_) / this.deltaPerZoom_;\n        if (view.getConstrainResolution() || this.constrainResolution_) {\n            // view has a zoom constraint, zoom by 1\n            delta = delta ? (delta > 0 ? 1 : -1) : 0;\n        }\n        zoomByDelta(view, delta, this.lastAnchor_, this.duration_);\n        this.mode_ = undefined;\n        this.totalDelta_ = 0;\n        this.lastAnchor_ = null;\n        this.startTime_ = undefined;\n        this.timeoutId_ = undefined;\n    };\n    /**\n     * Enable or disable using the mouse's location as an anchor when zooming\n     * @param {boolean} useAnchor true to zoom to the mouse's location, false\n     * to zoom to the center of the map\n     * @api\n     */\n    MouseWheelZoom.prototype.setMouseAnchor = function (useAnchor) {\n        this.useAnchor_ = useAnchor;\n        if (!useAnchor) {\n            this.lastAnchor_ = null;\n        }\n    };\n    return MouseWheelZoom;\n}(Interaction));\nexport default MouseWheelZoom;\n//# sourceMappingURL=MouseWheelZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/PinchRotate\n */\nimport PointerInteraction, { centroid as centroidFromPointers, } from './Pointer.js';\nimport { FALSE } from '../functions.js';\nimport { disable } from '../rotationconstraint.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchRotate = /** @class */ (function (_super) {\n    __extends(PinchRotate, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function PinchRotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastAngle_ = undefined;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.rotating_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.rotationDelta_ = 0.0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    PinchRotate.prototype.handleDragEvent = function (mapBrowserEvent) {\n        var rotationDelta = 0.0;\n        var touch0 = this.targetPointers[0];\n        var touch1 = this.targetPointers[1];\n        // angle between touches\n        var angle = Math.atan2(touch1.clientY - touch0.clientY, touch1.clientX - touch0.clientX);\n        if (this.lastAngle_ !== undefined) {\n            var delta = angle - this.lastAngle_;\n            this.rotationDelta_ += delta;\n            if (!this.rotating_ && Math.abs(this.rotationDelta_) > this.threshold_) {\n                this.rotating_ = true;\n            }\n            rotationDelta = delta;\n        }\n        this.lastAngle_ = angle;\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (view.getConstraints().rotation === disable) {\n            return;\n        }\n        // rotate anchor point.\n        // FIXME: should be the intersection point between the lines:\n        //     touch0,touch1 and previousTouch0,previousTouch1\n        var viewportPosition = map.getViewport().getBoundingClientRect();\n        var centroid = centroidFromPointers(this.targetPointers);\n        centroid[0] -= viewportPosition.left;\n        centroid[1] -= viewportPosition.top;\n        this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n        // rotate\n        if (this.rotating_) {\n            map.render();\n            view.adjustRotationInternal(rotationDelta, this.anchor_);\n        }\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchRotate.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length < 2) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            view.endInteraction(this.duration_);\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchRotate.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length >= 2) {\n            var map = mapBrowserEvent.map;\n            this.anchor_ = null;\n            this.lastAngle_ = undefined;\n            this.rotating_ = false;\n            this.rotationDelta_ = 0.0;\n            if (!this.handlingDownUpSequence) {\n                map.getView().beginInteraction();\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return PinchRotate;\n}(PointerInteraction));\nexport default PinchRotate;\n//# sourceMappingURL=PinchRotate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/PinchZoom\n */\nimport PointerInteraction, { centroid as centroidFromPointers, } from './Pointer.js';\nimport { FALSE } from '../functions.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchZoom = /** @class */ (function (_super) {\n    __extends(PinchZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function PinchZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 400;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastDistance_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.lastScaleDelta_ = 1;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    PinchZoom.prototype.handleDragEvent = function (mapBrowserEvent) {\n        var scaleDelta = 1.0;\n        var touch0 = this.targetPointers[0];\n        var touch1 = this.targetPointers[1];\n        var dx = touch0.clientX - touch1.clientX;\n        var dy = touch0.clientY - touch1.clientY;\n        // distance between touches\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        if (this.lastDistance_ !== undefined) {\n            scaleDelta = this.lastDistance_ / distance;\n        }\n        this.lastDistance_ = distance;\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (scaleDelta != 1.0) {\n            this.lastScaleDelta_ = scaleDelta;\n        }\n        // scale anchor point.\n        var viewportPosition = map.getViewport().getBoundingClientRect();\n        var centroid = centroidFromPointers(this.targetPointers);\n        centroid[0] -= viewportPosition.left;\n        centroid[1] -= viewportPosition.top;\n        this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n        // scale, bypass the resolution constraint\n        map.render();\n        view.adjustResolutionInternal(scaleDelta, this.anchor_);\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchZoom.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length < 2) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            var direction = this.lastScaleDelta_ > 1 ? 1 : -1;\n            view.endInteraction(this.duration_, direction);\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchZoom.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length >= 2) {\n            var map = mapBrowserEvent.map;\n            this.anchor_ = null;\n            this.lastDistance_ = undefined;\n            this.lastScaleDelta_ = 1;\n            if (!this.handlingDownUpSequence) {\n                map.getView().beginInteraction();\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return PinchZoom;\n}(PointerInteraction));\nexport default PinchZoom;\n//# sourceMappingURL=PinchZoom.js.map","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport Kinetic from './Kinetic.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\nexport { default as DoubleClickZoom } from './interaction/DoubleClickZoom.js';\nexport { default as DragAndDrop } from './interaction/DragAndDrop.js';\nexport { default as DragBox } from './interaction/DragBox.js';\nexport { default as DragPan } from './interaction/DragPan.js';\nexport { default as DragRotate } from './interaction/DragRotate.js';\nexport { default as DragRotateAndZoom } from './interaction/DragRotateAndZoom.js';\nexport { default as DragZoom } from './interaction/DragZoom.js';\nexport { default as Draw } from './interaction/Draw.js';\nexport { default as Extent } from './interaction/Extent.js';\nexport { default as Interaction } from './interaction/Interaction.js';\nexport { default as KeyboardPan } from './interaction/KeyboardPan.js';\nexport { default as KeyboardZoom } from './interaction/KeyboardZoom.js';\nexport { default as Modify } from './interaction/Modify.js';\nexport { default as MouseWheelZoom } from './interaction/MouseWheelZoom.js';\nexport { default as PinchRotate } from './interaction/PinchRotate.js';\nexport { default as PinchZoom } from './interaction/PinchZoom.js';\nexport { default as Pointer } from './interaction/Pointer.js';\nexport { default as Select } from './interaction/Select.js';\nexport { default as Snap } from './interaction/Snap.js';\nexport { default as Translate } from './interaction/Translate.js';\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or double click zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction} instances and insert\n * them into a {@link module:ol/Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. Changing the order can\n * be of interest if the event propagation needs to be stopped at a point.\n * The default set of interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {DefaultsOptions} [opt_options] Defaults options.\n * @return {import(\"./Collection.js\").default<import(\"./interaction/Interaction.js\").default>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n    var options = opt_options ? opt_options : {};\n    var interactions = new Collection();\n    var kinetic = new Kinetic(-0.005, 0.05, 100);\n    var altShiftDragRotate = options.altShiftDragRotate !== undefined\n        ? options.altShiftDragRotate\n        : true;\n    if (altShiftDragRotate) {\n        interactions.push(new DragRotate());\n    }\n    var doubleClickZoom = options.doubleClickZoom !== undefined ? options.doubleClickZoom : true;\n    if (doubleClickZoom) {\n        interactions.push(new DoubleClickZoom({\n            delta: options.zoomDelta,\n            duration: options.zoomDuration,\n        }));\n    }\n    var dragPan = options.dragPan !== undefined ? options.dragPan : true;\n    if (dragPan) {\n        interactions.push(new DragPan({\n            onFocusOnly: options.onFocusOnly,\n            kinetic: kinetic,\n        }));\n    }\n    var pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate : true;\n    if (pinchRotate) {\n        interactions.push(new PinchRotate());\n    }\n    var pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n    if (pinchZoom) {\n        interactions.push(new PinchZoom({\n            duration: options.zoomDuration,\n        }));\n    }\n    var keyboard = options.keyboard !== undefined ? options.keyboard : true;\n    if (keyboard) {\n        interactions.push(new KeyboardPan());\n        interactions.push(new KeyboardZoom({\n            delta: options.zoomDelta,\n            duration: options.zoomDuration,\n        }));\n    }\n    var mouseWheelZoom = options.mouseWheelZoom !== undefined ? options.mouseWheelZoom : true;\n    if (mouseWheelZoom) {\n        interactions.push(new MouseWheelZoom({\n            onFocusOnly: options.onFocusOnly,\n            duration: options.zoomDuration,\n        }));\n    }\n    var shiftDragZoom = options.shiftDragZoom !== undefined ? options.shiftDragZoom : true;\n    if (shiftDragZoom) {\n        interactions.push(new DragZoom({\n            duration: options.zoomDuration,\n        }));\n    }\n    return interactions;\n}\n//# sourceMappingURL=interaction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Vector\n */\nimport BaseVectorLayer from './BaseVector.js';\nimport CanvasVectorLayerRenderer from '../renderer/canvas/VectorLayer.js';\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default} VectorSourceType\n * @extends {BaseVectorLayer<VectorSourceType, CanvasVectorLayerRenderer>}\n * @api\n */\nvar VectorLayer = /** @class */ (function (_super) {\n    __extends(VectorLayer, _super);\n    /**\n     * @param {import(\"./BaseVector.js\").Options<VectorSourceType>} [opt_options] Options.\n     */\n    function VectorLayer(opt_options) {\n        return _super.call(this, opt_options) || this;\n    }\n    VectorLayer.prototype.createRenderer = function () {\n        return new CanvasVectorLayerRenderer(this);\n    };\n    return VectorLayer;\n}(BaseVectorLayer));\nexport default VectorLayer;\n//# sourceMappingURL=Vector.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Pointer\n */\nimport Interaction from './Interaction.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport { getValues } from '../obj.js';\n/**\n * @typedef {Object} Options\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(import(\"../MapBrowserEvent.js\").default):void} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(import(\"../MapBrowserEvent.js\").default):void} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events.\n * This functions is also called during a drag sequence, so during a drag\n * sequence both the `handleDragEvent` function and this function are called.\n * If `handleDownEvent` is defined and it returns true this function will not\n * be called during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} [stopDown]\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nvar PointerInteraction = /** @class */ (function (_super) {\n    __extends(PointerInteraction, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function PointerInteraction(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, \n        /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)) || this;\n        if (options.handleDownEvent) {\n            _this.handleDownEvent = options.handleDownEvent;\n        }\n        if (options.handleDragEvent) {\n            _this.handleDragEvent = options.handleDragEvent;\n        }\n        if (options.handleMoveEvent) {\n            _this.handleMoveEvent = options.handleMoveEvent;\n        }\n        if (options.handleUpEvent) {\n            _this.handleUpEvent = options.handleUpEvent;\n        }\n        if (options.stopDown) {\n            _this.stopDown = options.stopDown;\n        }\n        /**\n         * @type {boolean}\n         * @protected\n         */\n        _this.handlingDownUpSequence = false;\n        /**\n         * @type {!Object<string, PointerEvent>}\n         * @private\n         */\n        _this.trackedPointers_ = {};\n        /**\n         * @type {Array<PointerEvent>}\n         * @protected\n         */\n        _this.targetPointers = [];\n        return _this;\n    }\n    /**\n     * Returns the current number of pointers involved in the interaction,\n     * e.g. `2` when two fingers are used.\n     * @return {number} The number of pointers.\n     * @api\n     */\n    PointerInteraction.prototype.getPointerCount = function () {\n        return this.targetPointers.length;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     * @protected\n     */\n    PointerInteraction.prototype.handleDownEvent = function (mapBrowserEvent) {\n        return false;\n    };\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @protected\n     */\n    PointerInteraction.prototype.handleDragEvent = function (mapBrowserEvent) { };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} and may call into\n     * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n     * detected.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @api\n     */\n    PointerInteraction.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!mapBrowserEvent.originalEvent) {\n            return true;\n        }\n        var stopEvent = false;\n        this.updateTrackedPointers_(mapBrowserEvent);\n        if (this.handlingDownUpSequence) {\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n                this.handleDragEvent(mapBrowserEvent);\n                // prevent page scrolling during dragging\n                mapBrowserEvent.originalEvent.preventDefault();\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n                var handledUp = this.handleUpEvent(mapBrowserEvent);\n                this.handlingDownUpSequence =\n                    handledUp && this.targetPointers.length > 0;\n            }\n        }\n        else {\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n                var handled = this.handleDownEvent(mapBrowserEvent);\n                this.handlingDownUpSequence = handled;\n                stopEvent = this.stopDown(handled);\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n                this.handleMoveEvent(mapBrowserEvent);\n            }\n        }\n        return !stopEvent;\n    };\n    /**\n     * Handle pointer move events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @protected\n     */\n    PointerInteraction.prototype.handleMoveEvent = function (mapBrowserEvent) { };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     * @protected\n     */\n    PointerInteraction.prototype.handleUpEvent = function (mapBrowserEvent) {\n        return false;\n    };\n    /**\n     * This function is used to determine if \"down\" events should be propagated\n     * to other interactions or should be stopped.\n     * @param {boolean} handled Was the event handled by the interaction?\n     * @return {boolean} Should the `down` event be stopped?\n     */\n    PointerInteraction.prototype.stopDown = function (handled) {\n        return handled;\n    };\n    /**\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @private\n     */\n    PointerInteraction.prototype.updateTrackedPointers_ = function (mapBrowserEvent) {\n        if (isPointerDraggingEvent(mapBrowserEvent)) {\n            var event_1 = mapBrowserEvent.originalEvent;\n            var id = event_1.pointerId.toString();\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n                delete this.trackedPointers_[id];\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n                this.trackedPointers_[id] = event_1;\n            }\n            else if (id in this.trackedPointers_) {\n                // update only when there was a pointerdown event for this pointer\n                this.trackedPointers_[id] = event_1;\n            }\n            this.targetPointers = getValues(this.trackedPointers_);\n        }\n    };\n    return PointerInteraction;\n}(Interaction));\n/**\n * @param {Array<PointerEvent>} pointerEvents List of events.\n * @return {import(\"../pixel.js\").Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n    var length = pointerEvents.length;\n    var clientX = 0;\n    var clientY = 0;\n    for (var i = 0; i < length; i++) {\n        clientX += pointerEvents[i].clientX;\n        clientY += pointerEvents[i].clientY;\n    }\n    return [clientX / length, clientY / length];\n}\n/**\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n */\nfunction isPointerDraggingEvent(mapBrowserEvent) {\n    var type = mapBrowserEvent.type;\n    return (type === MapBrowserEventType.POINTERDOWN ||\n        type === MapBrowserEventType.POINTERDRAG ||\n        type === MapBrowserEventType.POINTERUP);\n}\nexport default PointerInteraction;\n//# sourceMappingURL=Pointer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport InteractionProperty from './Property.js';\nimport { easeOut, linear } from '../easing.js';\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active', Return>} InteractionOnSignature\n */\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return). The interactions\n * are traversed in reverse order of the interactions collection of the map.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nvar Interaction = /** @class */ (function (_super) {\n    __extends(Interaction, _super);\n    /**\n     * @param {InteractionOptions} [opt_options] Options.\n     */\n    function Interaction(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {InteractionOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {InteractionOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {InteractionOnSignature<void>}\n         */\n        _this.un;\n        if (opt_options && opt_options.handleEvent) {\n            _this.handleEvent = opt_options.handleEvent;\n        }\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = null;\n        _this.setActive(true);\n        return _this;\n    }\n    /**\n     * Return whether the interaction is currently active.\n     * @return {boolean} `true` if the interaction is active, `false` otherwise.\n     * @observable\n     * @api\n     */\n    Interaction.prototype.getActive = function () {\n        return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n    };\n    /**\n     * Get the map associated with this interaction.\n     * @return {import(\"../PluggableMap.js\").default} Map.\n     * @api\n     */\n    Interaction.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event}.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @api\n     */\n    Interaction.prototype.handleEvent = function (mapBrowserEvent) {\n        return true;\n    };\n    /**\n     * Activate or deactivate the interaction.\n     * @param {boolean} active Active.\n     * @observable\n     * @api\n     */\n    Interaction.prototype.setActive = function (active) {\n        this.set(InteractionProperty.ACTIVE, active);\n    };\n    /**\n     * Remove the interaction from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    Interaction.prototype.setMap = function (map) {\n        this.map_ = map;\n    };\n    return Interaction;\n}(BaseObject));\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {import(\"../coordinate.js\").Coordinate} delta Delta.\n * @param {number} [opt_duration] Duration.\n */\nexport function pan(view, delta, opt_duration) {\n    var currentCenter = view.getCenterInternal();\n    if (currentCenter) {\n        var center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]];\n        view.animateInternal({\n            duration: opt_duration !== undefined ? opt_duration : 250,\n            easing: linear,\n            center: view.getConstrainedCenter(center),\n        });\n    }\n}\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] Anchor coordinate in the user projection.\n * @param {number} [opt_duration] Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n    var currentZoom = view.getZoom();\n    if (currentZoom === undefined) {\n        return;\n    }\n    var newZoom = view.getConstrainedZoom(currentZoom + delta);\n    var newResolution = view.getResolutionForZoom(newZoom);\n    if (view.getAnimating()) {\n        view.cancelAnimations();\n    }\n    view.animate({\n        resolution: newResolution,\n        anchor: opt_anchor,\n        duration: opt_duration !== undefined ? opt_duration : 250,\n        easing: easeOut,\n    });\n}\nexport default Interaction;\n//# sourceMappingURL=Interaction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Heatmap\n */\nimport BaseVector from './BaseVector.js';\nimport WebGLPointsLayerRenderer from '../renderer/webgl/PointsLayer.js';\nimport { assign } from '../obj.js';\nimport { clamp } from '../math.js';\nimport { createCanvasContext2D } from '../dom.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Array<string>} [gradient=['#00f', '#0ff', '#0f0', '#ff0', '#f00']] The color gradient\n * of the heatmap, specified as an array of CSS color strings.\n * @property {number} [radius=8] Radius size in pixels.\n * @property {number} [blur=15] Blur size in pixels.\n * @property {string|function(import(\"../Feature.js\").default):number} [weight='weight'] The feature\n * attribute to use for the weight or a function that returns a weight from a feature. Weight values\n * should range from 0 to 1 (and values outside will be clamped to that range).\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    BLUR: 'blur',\n    GRADIENT: 'gradient',\n    RADIUS: 'radius',\n};\n/**\n * @const\n * @type {Array<string>}\n */\nvar DEFAULT_GRADIENT = ['#00f', '#0ff', '#0f0', '#ff0', '#f00'];\n/**\n * @classdesc\n * Layer for rendering vector data as a heatmap.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n * @extends {BaseVector<import(\"../source/Vector.js\").default, WebGLPointsLayerRenderer>}\n * @api\n */\nvar Heatmap = /** @class */ (function (_super) {\n    __extends(Heatmap, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Heatmap(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.gradient;\n        delete baseOptions.radius;\n        delete baseOptions.blur;\n        delete baseOptions.weight;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.gradient_ = null;\n        _this.addChangeListener(Property.GRADIENT, _this.handleGradientChanged_);\n        _this.setGradient(options.gradient ? options.gradient : DEFAULT_GRADIENT);\n        _this.setBlur(options.blur !== undefined ? options.blur : 15);\n        _this.setRadius(options.radius !== undefined ? options.radius : 8);\n        var weight = options.weight ? options.weight : 'weight';\n        if (typeof weight === 'string') {\n            _this.weightFunction_ = function (feature) {\n                return feature.get(weight);\n            };\n        }\n        else {\n            _this.weightFunction_ = weight;\n        }\n        // For performance reasons, don't sort the features before rendering.\n        // The render order is not relevant for a heatmap representation.\n        _this.setRenderOrder(null);\n        return _this;\n    }\n    /**\n     * Return the blur size in pixels.\n     * @return {number} Blur size in pixels.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.getBlur = function () {\n        return /** @type {number} */ (this.get(Property.BLUR));\n    };\n    /**\n     * Return the gradient colors as array of strings.\n     * @return {Array<string>} Colors.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.getGradient = function () {\n        return /** @type {Array<string>} */ (this.get(Property.GRADIENT));\n    };\n    /**\n     * Return the size of the radius in pixels.\n     * @return {number} Radius size in pixel.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.getRadius = function () {\n        return /** @type {number} */ (this.get(Property.RADIUS));\n    };\n    /**\n     * @private\n     */\n    Heatmap.prototype.handleGradientChanged_ = function () {\n        this.gradient_ = createGradient(this.getGradient());\n    };\n    /**\n     * Set the blur size in pixels.\n     * @param {number} blur Blur size in pixels.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.setBlur = function (blur) {\n        this.set(Property.BLUR, blur);\n    };\n    /**\n     * Set the gradient colors as array of strings.\n     * @param {Array<string>} colors Gradient.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.setGradient = function (colors) {\n        this.set(Property.GRADIENT, colors);\n    };\n    /**\n     * Set the size of the radius in pixels.\n     * @param {number} radius Radius size in pixel.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.setRadius = function (radius) {\n        this.set(Property.RADIUS, radius);\n    };\n    Heatmap.prototype.createRenderer = function () {\n        return new WebGLPointsLayerRenderer(this, {\n            className: this.getClassName(),\n            attributes: [\n                {\n                    name: 'weight',\n                    callback: function (feature) {\n                        var weight = this.weightFunction_(feature);\n                        return weight !== undefined ? clamp(weight, 0, 1) : 1;\n                    }.bind(this),\n                },\n            ],\n            vertexShader: \"\\n        precision mediump float;\\n        uniform mat4 u_projectionMatrix;\\n        uniform mat4 u_offsetScaleMatrix;\\n        uniform float u_size;\\n        attribute vec2 a_position;\\n        attribute float a_index;\\n        attribute float a_weight;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n\\n        void main(void) {\\n          mat4 offsetMatrix = u_offsetScaleMatrix;\\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\\n          v_texCoord = vec2(u, v);\\n          v_weight = a_weight;\\n        }\",\n            fragmentShader: \"\\n        precision mediump float;\\n        uniform float u_blurSlope;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n\\n        void main(void) {\\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\\n        }\",\n            hitVertexShader: \"\\n        precision mediump float;\\n        uniform mat4 u_projectionMatrix;\\n        uniform mat4 u_offsetScaleMatrix;\\n        uniform float u_size;\\n        attribute vec2 a_position;\\n        attribute float a_index;\\n        attribute float a_weight;\\n        attribute vec4 a_hitColor;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n        varying vec4 v_hitColor;\\n\\n        void main(void) {\\n          mat4 offsetMatrix = u_offsetScaleMatrix;\\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\\n          v_texCoord = vec2(u, v);\\n          v_hitColor = a_hitColor;\\n          v_weight = a_weight;\\n        }\",\n            hitFragmentShader: \"\\n        precision mediump float;\\n        uniform float u_blurSlope;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n        varying vec4 v_hitColor;\\n\\n        void main(void) {\\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\\n          if (alpha < 0.05) {\\n            discard;\\n          }\\n\\n          gl_FragColor = v_hitColor;\\n        }\",\n            uniforms: {\n                u_size: function () {\n                    return (this.get(Property.RADIUS) + this.get(Property.BLUR)) * 2;\n                }.bind(this),\n                u_blurSlope: function () {\n                    return (this.get(Property.RADIUS) / Math.max(1, this.get(Property.BLUR)));\n                }.bind(this),\n            },\n            postProcesses: [\n                {\n                    fragmentShader: \"\\n            precision mediump float;\\n\\n            uniform sampler2D u_image;\\n            uniform sampler2D u_gradientTexture;\\n            uniform float u_opacity;\\n\\n            varying vec2 v_texCoord;\\n\\n            void main() {\\n              vec4 color = texture2D(u_image, v_texCoord);\\n              gl_FragColor.a = color.a * u_opacity;\\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\\n              gl_FragColor.rgb *= gl_FragColor.a;\\n            }\",\n                    uniforms: {\n                        u_gradientTexture: function () {\n                            return this.gradient_;\n                        }.bind(this),\n                        u_opacity: function () {\n                            return this.getOpacity();\n                        }.bind(this),\n                    },\n                },\n            ],\n        });\n    };\n    Heatmap.prototype.renderDeclutter = function () { };\n    return Heatmap;\n}(BaseVector));\n/**\n * @param {Array<string>} colors A list of colored.\n * @return {HTMLCanvasElement} canvas with gradient texture.\n */\nfunction createGradient(colors) {\n    var width = 1;\n    var height = 256;\n    var context = createCanvasContext2D(width, height);\n    var gradient = context.createLinearGradient(0, 0, width, height);\n    var step = 1 / (colors.length - 1);\n    for (var i = 0, ii = colors.length; i < ii; ++i) {\n        gradient.addColorStop(i * step, colors[i]);\n    }\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, width, height);\n    return context.canvas;\n}\nexport default Heatmap;\n//# sourceMappingURL=Heatmap.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseTile\n */\nimport Layer from './Layer.js';\nimport TileProperty from './TileProperty.js';\nimport { assign } from '../obj.js';\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:source'|'change:preload'|'change:useInterimTilesOnError', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../render/EventType\").LayerRenderEventTypes, import(\"../render/Event\").default, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|\n *   'change:source'|'change:preload'|'change:useInterimTilesOnError'|import(\"../render/EventType\").LayerRenderEventTypes, Return>} BaseTileLayerOnSignature\n */\n/**\n * @template {import(\"../source/Tile.js\").default} TileSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {TileSourceType} [source] Source for this layer.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Tile.js\").default} TileSourceType\n * @template {import(\"../renderer/Layer.js\").default} RendererType\n * @extends {Layer<TileSourceType, RendererType>}\n * @api\n */\nvar BaseTileLayer = /** @class */ (function (_super) {\n    __extends(BaseTileLayer, _super);\n    /**\n     * @param {Options<TileSourceType>} [opt_options] Tile layer options.\n     */\n    function BaseTileLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.preload;\n        delete baseOptions.useInterimTilesOnError;\n        _this = _super.call(this, baseOptions) || this;\n        /***\n         * @type {BaseTileLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {BaseTileLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {BaseTileLayerOnSignature<void>}\n         */\n        _this.un;\n        _this.setPreload(options.preload !== undefined ? options.preload : 0);\n        _this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined\n            ? options.useInterimTilesOnError\n            : true);\n        return _this;\n    }\n    /**\n     * Return the level as number to which we will preload tiles up to.\n     * @return {number} The level to preload tiles up to.\n     * @observable\n     * @api\n     */\n    BaseTileLayer.prototype.getPreload = function () {\n        return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n    };\n    /**\n     * Set the level as number to which we will preload tiles up to.\n     * @param {number} preload The level to preload tiles up to.\n     * @observable\n     * @api\n     */\n    BaseTileLayer.prototype.setPreload = function (preload) {\n        this.set(TileProperty.PRELOAD, preload);\n    };\n    /**\n     * Whether we use interim tiles on error.\n     * @return {boolean} Use interim tiles on error.\n     * @observable\n     * @api\n     */\n    BaseTileLayer.prototype.getUseInterimTilesOnError = function () {\n        return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n    };\n    /**\n     * Set whether we use interim tiles on error.\n     * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n     * @observable\n     * @api\n     */\n    BaseTileLayer.prototype.setUseInterimTilesOnError = function (useInterimTilesOnError) {\n        this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n    };\n    return BaseTileLayer;\n}(Layer));\nexport default BaseTileLayer;\n//# sourceMappingURL=BaseTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Tile\n */\nimport BaseTileLayer from './BaseTile.js';\nimport CanvasTileLayerRenderer from '../renderer/canvas/TileLayer.js';\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Tile.js\").default} TileSourceType\n * @extends BaseTileLayer<TileSourceType, CanvasTileLayerRenderer>\n * @api\n */\nvar TileLayer = /** @class */ (function (_super) {\n    __extends(TileLayer, _super);\n    /**\n     * @param {import(\"./BaseTile.js\").Options<TileSourceType>} [opt_options] Tile layer options.\n     */\n    function TileLayer(opt_options) {\n        return _super.call(this, opt_options) || this;\n    }\n    TileLayer.prototype.createRenderer = function () {\n        return new CanvasTileLayerRenderer(this);\n    };\n    return TileLayer;\n}(BaseTileLayer));\nexport default TileLayer;\n//# sourceMappingURL=Tile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Base\n */\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport { abstract } from '../util.js';\nimport { assert } from '../asserts.js';\nimport { assign } from '../obj.js';\nimport { clamp } from '../math.js';\n/**\n * A css color, or a function called with a view resolution returning a css color.\n *\n * @typedef {string|function(number):string} BackgroundColor\n * @api\n */\n/**\n * @typedef {import(\"../ObjectEventType\").Types|'change:extent'|'change:maxResolution'|'change:maxZoom'|\n *    'change:minResolution'|'change:minZoom'|'change:opacity'|'change:visible'|'change:zIndex'} BaseLayerObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<BaseLayerObjectEventTypes, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|BaseLayerObjectEventTypes, Return>} BaseLayerOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nvar BaseLayer = /** @class */ (function (_super) {\n    __extends(BaseLayer, _super);\n    /**\n     * @param {Options} options Layer options.\n     */\n    function BaseLayer(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {BaseLayerOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @type {BackgroundColor|false}\n         * @private\n         */\n        _this.background_ = options.background;\n        /**\n         * @type {Object<string, *>}\n         */\n        var properties = assign({}, options);\n        if (typeof options.properties === 'object') {\n            delete properties.properties;\n            assign(properties, options.properties);\n        }\n        properties[LayerProperty.OPACITY] =\n            options.opacity !== undefined ? options.opacity : 1;\n        assert(typeof properties[LayerProperty.OPACITY] === 'number', 64); // Layer opacity must be a number\n        properties[LayerProperty.VISIBLE] =\n            options.visible !== undefined ? options.visible : true;\n        properties[LayerProperty.Z_INDEX] = options.zIndex;\n        properties[LayerProperty.MAX_RESOLUTION] =\n            options.maxResolution !== undefined ? options.maxResolution : Infinity;\n        properties[LayerProperty.MIN_RESOLUTION] =\n            options.minResolution !== undefined ? options.minResolution : 0;\n        properties[LayerProperty.MIN_ZOOM] =\n            options.minZoom !== undefined ? options.minZoom : -Infinity;\n        properties[LayerProperty.MAX_ZOOM] =\n            options.maxZoom !== undefined ? options.maxZoom : Infinity;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.className_ =\n            properties.className !== undefined ? options.className : 'ol-layer';\n        delete properties.className;\n        _this.setProperties(properties);\n        /**\n         * @type {import(\"./Layer.js\").State}\n         * @private\n         */\n        _this.state_ = null;\n        return _this;\n    }\n    /**\n     * Get the background for this layer.\n     * @return {BackgroundColor|false} Layer background.\n     */\n    BaseLayer.prototype.getBackground = function () {\n        return this.background_;\n    };\n    /**\n     * @return {string} CSS class name.\n     */\n    BaseLayer.prototype.getClassName = function () {\n        return this.className_;\n    };\n    /**\n     * This method is not meant to be called by layers or layer renderers because the state\n     * is incorrect if the layer is included in a layer group.\n     *\n     * @param {boolean} [opt_managed] Layer is managed.\n     * @return {import(\"./Layer.js\").State} Layer state.\n     */\n    BaseLayer.prototype.getLayerState = function (opt_managed) {\n        /** @type {import(\"./Layer.js\").State} */\n        var state = this.state_ ||\n            /** @type {?} */ ({\n                layer: this,\n                managed: opt_managed === undefined ? true : opt_managed,\n            });\n        var zIndex = this.getZIndex();\n        state.opacity = clamp(Math.round(this.getOpacity() * 100) / 100, 0, 1);\n        state.sourceState = this.getSourceState();\n        state.visible = this.getVisible();\n        state.extent = this.getExtent();\n        state.zIndex = zIndex === undefined && !state.managed ? Infinity : zIndex;\n        state.maxResolution = this.getMaxResolution();\n        state.minResolution = Math.max(this.getMinResolution(), 0);\n        state.minZoom = this.getMinZoom();\n        state.maxZoom = this.getMaxZoom();\n        this.state_ = state;\n        return state;\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").default>} [opt_array] Array of layers (to be\n     *     modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    BaseLayer.prototype.getLayersArray = function (opt_array) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").State>} [opt_states] Optional list of layer\n     *     states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    BaseLayer.prototype.getLayerStatesArray = function (opt_states) {\n        return abstract();\n    };\n    /**\n     * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n     * will be visible regardless of extent.\n     * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getExtent = function () {\n        return /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT));\n    };\n    /**\n     * Return the maximum resolution of the layer.\n     * @return {number} The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n    };\n    /**\n     * Return the minimum resolution of the layer.\n     * @return {number} The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n    };\n    /**\n     * Return the minimum zoom level of the layer.\n     * @return {number} The minimum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_ZOOM));\n    };\n    /**\n     * Return the maximum zoom level of the layer.\n     * @return {number} The maximum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_ZOOM));\n    };\n    /**\n     * Return the opacity of the layer (between 0 and 1).\n     * @return {number} The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getOpacity = function () {\n        return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n    };\n    /**\n     * @abstract\n     * @return {import(\"../source/State.js\").default} Source state.\n     */\n    BaseLayer.prototype.getSourceState = function () {\n        return abstract();\n    };\n    /**\n     * Return the visibility of the layer (`true` or `false`).\n     * @return {boolean} The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getVisible = function () {\n        return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n    };\n    /**\n     * Return the Z-index of the layer, which is used to order layers before\n     * rendering. The default Z-index is 0.\n     * @return {number} The Z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getZIndex = function () {\n        return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n    };\n    /**\n     * Sets the backgrlound color.\n     * @param {BackgroundColor} [opt_background] Background color.\n     */\n    BaseLayer.prototype.setBackground = function (opt_background) {\n        this.background_ = opt_background;\n        this.changed();\n    };\n    /**\n     * Set the extent at which the layer is visible.  If `undefined`, the layer\n     * will be visible at all extents.\n     * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setExtent = function (extent) {\n        this.set(LayerProperty.EXTENT, extent);\n    };\n    /**\n     * Set the maximum resolution at which the layer is visible.\n     * @param {number} maxResolution The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxResolution = function (maxResolution) {\n        this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n    };\n    /**\n     * Set the minimum resolution at which the layer is visible.\n     * @param {number} minResolution The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinResolution = function (minResolution) {\n        this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n    };\n    /**\n     * Set the maximum zoom (exclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} maxZoom The maximum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxZoom = function (maxZoom) {\n        this.set(LayerProperty.MAX_ZOOM, maxZoom);\n    };\n    /**\n     * Set the minimum zoom (inclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} minZoom The minimum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinZoom = function (minZoom) {\n        this.set(LayerProperty.MIN_ZOOM, minZoom);\n    };\n    /**\n     * Set the opacity of the layer, allowed values range from 0 to 1.\n     * @param {number} opacity The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setOpacity = function (opacity) {\n        assert(typeof opacity === 'number', 64); // Layer opacity must be a number\n        this.set(LayerProperty.OPACITY, opacity);\n    };\n    /**\n     * Set the visibility of the layer (`true` or `false`).\n     * @param {boolean} visible The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setVisible = function (visible) {\n        this.set(LayerProperty.VISIBLE, visible);\n    };\n    /**\n     * Set Z-index of the layer, which is used to order layers before rendering.\n     * The default Z-index is 0.\n     * @param {number} zindex The z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setZIndex = function (zindex) {\n        this.set(LayerProperty.Z_INDEX, zindex);\n    };\n    /**\n     * Clean up.\n     */\n    BaseLayer.prototype.disposeInternal = function () {\n        if (this.state_) {\n            this.state_.layer = null;\n            this.state_ = null;\n        }\n        _super.prototype.disposeInternal.call(this);\n    };\n    return BaseLayer;\n}(BaseObject));\nexport default BaseLayer;\n//# sourceMappingURL=Base.js.map","/**\n * @module ol/has\n */\nvar ua = typeof navigator !== 'undefined' && typeof navigator.userAgent !== 'undefined'\n    ? navigator.userAgent.toLowerCase()\n    : '';\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport var FIREFOX = ua.indexOf('firefox') !== -1;\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport var SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport var WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport var MAC = ua.indexOf('macintosh') !== -1;\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport var DEVICE_PIXEL_RATIO = typeof devicePixelRatio !== 'undefined' ? devicePixelRatio : 1;\n/**\n * The execution context is a worker with OffscreenCanvas available.\n * @const\n * @type {boolean}\n */\nexport var WORKER_OFFSCREEN_CANVAS = typeof WorkerGlobalScope !== 'undefined' &&\n    typeof OffscreenCanvas !== 'undefined' &&\n    self instanceof WorkerGlobalScope; //eslint-disable-line\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport var IMAGE_DECODE = typeof Image !== 'undefined' && Image.prototype.decode;\n/**\n * @type {boolean}\n */\nexport var PASSIVE_EVENT_LISTENERS = (function () {\n    var passive = false;\n    try {\n        var options = Object.defineProperty({}, 'passive', {\n            get: function () {\n                passive = true;\n            },\n        });\n        window.addEventListener('_', null, options);\n        window.removeEventListener('_', null, options);\n    }\n    catch (error) {\n        // passive not supported\n    }\n    return passive;\n})();\n//# sourceMappingURL=has.js.map","/**\n * @module ol/loadingstrategy\n */\nimport { fromUserExtent, fromUserResolution, toUserExtent } from './proj.js';\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n    return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n    return [extent];\n}\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number, import(\"./proj.js\").Projection): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n    return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj.js\").Projection} projection Projection.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function (extent, resolution, projection) {\n        var z = tileGrid.getZForResolution(fromUserResolution(resolution, projection));\n        var tileRange = tileGrid.getTileRangeForExtentAndZ(fromUserExtent(extent, projection), z);\n        /** @type {Array<import(\"./extent.js\").Extent>} */\n        var extents = [];\n        /** @type {import(\"./tilecoord.js\").TileCoord} */\n        var tileCoord = [z, 0, 0];\n        for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n            for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n                extents.push(toUserExtent(tileGrid.getTileCoordExtent(tileCoord), projection));\n            }\n        }\n        return extents;\n    });\n}\n//# sourceMappingURL=loadingstrategy.js.map","/**\n * @module ol/math\n */\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport var cosh = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var cosh;\n    if ('cosh' in Math) {\n        // The environment supports the native Math.cosh function, use it\n        cosh = Math.cosh;\n    }\n    else {\n        //  else, use the reference implementation of MDN:\n        cosh = function (x) {\n            var y = /** @type {Math} */ (Math).exp(x);\n            return (y + 1 / y) / 2;\n        };\n    }\n    return cosh;\n})();\n/**\n * Return the base 2 logarithm of a given number. The method will use the\n * native `Math.log2` function if it is available, otherwise the base 2\n * logarithm will be calculated via the reference implementation of the\n * Mozilla developer network.\n *\n * @param {number} x X.\n * @return {number} Base 2 logarithm of x.\n */\nexport var log2 = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var log2;\n    if ('log2' in Math) {\n        // The environment supports the native Math.log2 function, use it\n        log2 = Math.log2;\n    }\n    else {\n        //  else, use the reference implementation of MDN:\n        log2 = function (x) {\n            return Math.log(x) * Math.LOG2E;\n        };\n    }\n    return log2;\n})();\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    if (dx !== 0 || dy !== 0) {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            x1 = x2;\n            y1 = y2;\n        }\n        else if (t > 0) {\n            x1 += dx * t;\n            y1 += dy * t;\n        }\n    }\n    return squaredDistance(x, y, x1, y1);\n}\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    return dx * dx + dy * dy;\n}\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n    var n = mat.length;\n    for (var i = 0; i < n; i++) {\n        // Find max in the i-th column (ignoring i - 1 first rows)\n        var maxRow = i;\n        var maxEl = Math.abs(mat[i][i]);\n        for (var r = i + 1; r < n; r++) {\n            var absValue = Math.abs(mat[r][i]);\n            if (absValue > maxEl) {\n                maxEl = absValue;\n                maxRow = r;\n            }\n        }\n        if (maxEl === 0) {\n            return null; // matrix is singular\n        }\n        // Swap max row with i-th (current) row\n        var tmp = mat[maxRow];\n        mat[maxRow] = mat[i];\n        mat[i] = tmp;\n        // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n        for (var j = i + 1; j < n; j++) {\n            var coef = -mat[j][i] / mat[i][i];\n            for (var k = i; k < n + 1; k++) {\n                if (i == k) {\n                    mat[j][k] = 0;\n                }\n                else {\n                    mat[j][k] += coef * mat[i][k];\n                }\n            }\n        }\n    }\n    // Solve Ax=b for upper triangular matrix A (mat)\n    var x = new Array(n);\n    for (var l = n - 1; l >= 0; l--) {\n        x[l] = mat[l][n] / mat[l][l];\n        for (var m = l - 1; m >= 0; m--) {\n            mat[m][n] -= mat[m][l] * x[l];\n        }\n    }\n    return x;\n}\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n    return (angleInRadians * 180) / Math.PI;\n}\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n    return (angleInDegrees * Math.PI) / 180;\n}\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n    var r = a % b;\n    return r * b < 0 ? r + b : r;\n}\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n    return a + x * (b - a);\n}\n/**\n * Returns a number with a limited number of decimal digits.\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The input number with a limited number of decimal digits.\n */\nexport function toFixed(n, decimals) {\n    var factor = Math.pow(10, decimals);\n    return Math.round(n * factor) / factor;\n}\n/**\n * Rounds a number to the nearest integer value considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The nearest integer.\n */\nexport function round(n, decimals) {\n    return Math.round(toFixed(n, decimals));\n}\n/**\n * Rounds a number to the next smaller integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next smaller integer.\n */\nexport function floor(n, decimals) {\n    return Math.floor(toFixed(n, decimals));\n}\n/**\n * Rounds a number to the next bigger integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next bigger integer.\n */\nexport function ceil(n, decimals) {\n    return Math.ceil(toFixed(n, decimals));\n}\n//# sourceMappingURL=math.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/VectorTile\n */\nimport BaseVectorLayer from './BaseVector.js';\nimport CanvasVectorTileLayerRenderer from '../renderer/canvas/VectorTileLayer.js';\nimport TileProperty from './TileProperty.js';\nimport VectorTileRenderType from './VectorTileRenderType.js';\nimport { assert } from '../asserts.js';\nimport { assign } from '../obj.js';\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:source'|'change:preload'|'change:useInterimTilesOnError', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../render/EventType\").LayerRenderEventTypes, import(\"../render/Event\").default, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:source'|'change:preload'|'change:useInterimTilesOnError'|import(\"../render/EventType\").LayerRenderEventTypes, Return>} VectorTileLayerOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the tile extent used by the\n * renderer when getting features from the vector tile for the rendering or hit-detection.\n * Recommended value: Vector tiles are usually generated with a buffer, so this value should match\n * the largest possible buffer of the used tiles. It should be at least the size of the largest\n * point symbol or line width.\n * @property {import(\"./VectorTileRenderType.js\").default|string} [renderMode='hybrid'] Render mode for vector tiles:\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels are scaled during zoom\n *    animations. Point symbols and texts are accurately rendered as vectors and can stay upright on\n *    rotated views.\n *  * `'vector'`: Everything is rendered as vectors. Use this mode for improved performance on vector\n *    tile layers with only a few rendered features (e.g. for highlighting a subset of features of\n *    another layer with the same source).\n * @property {import(\"../source/VectorTile.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n *\n * As an optimization decluttered features from layers with the same `className` are rendered above\n * the fill and stroke styles of all of those layers regardless of z-index.  To opt out of this\n * behavior and place declutterd features with their own layer configure the layer with a `className`\n * other than `ol-layer`.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style] Layer style. When set to `null`, only\n * features that have their own style will be rendered. See {@link module:ol/style/Style~Style} for the default style\n * which will be used if this is not set.\n * @property {import(\"./Base.js\").BackgroundColor|false} [background] Background color for the layer. If not specified, no\n * background will be rendered.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will be\n * recreated during animations. This means that no vectors will be shown clipped, but the setting\n * will have a performance impact for large amounts of vector data. When set to `false`, batches\n * will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will be\n * recreated during interactions. See also `updateWhileAnimating`.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @classdesc\n * Layer for vector tile data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @param {Options} [opt_options] Options.\n * @extends {BaseVectorLayer<import(\"../source/VectorTile.js\").default, CanvasVectorTileLayerRenderer>}\n * @api\n */\nvar VectorTileLayer = /** @class */ (function (_super) {\n    __extends(VectorTileLayer, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function VectorTileLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = /** @type {Object} */ (assign({}, options));\n        delete baseOptions.preload;\n        delete baseOptions.useInterimTilesOnError;\n        _this = _super.call(this, \n        /** @type {import(\"./BaseVector.js\").Options<import(\"../source/VectorTile.js\").default>} */ (baseOptions)) || this;\n        /***\n         * @type {VectorTileLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {VectorTileLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {VectorTileLayerOnSignature<void>}\n         */\n        _this.un;\n        if (options.renderMode === VectorTileRenderType.IMAGE) {\n            //FIXME deprecated - remove this check in v7.\n            //eslint-disable-next-line\n            console.warn('renderMode: \"image\" is deprecated. Option ignored.');\n            options.renderMode = undefined;\n        }\n        var renderMode = options.renderMode || VectorTileRenderType.HYBRID;\n        assert(renderMode == VectorTileRenderType.HYBRID ||\n            renderMode == VectorTileRenderType.VECTOR, 28); // `renderMode` must be `'hybrid'` or `'vector'`.\n        /**\n         * @private\n         * @type {import(\"./VectorTileRenderType.js\").default}\n         */\n        _this.renderMode_ = renderMode;\n        _this.setPreload(options.preload ? options.preload : 0);\n        _this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined\n            ? options.useInterimTilesOnError\n            : true);\n        /**\n         * @return {import(\"./Base.js\").BackgroundColor} Background color.\n         * @function\n         * @api\n         */\n        _this.getBackground;\n        /**\n         * @param {import(\"./Base.js\").BackgroundColor} background Background color.\n         * @function\n         * @api\n         */\n        _this.setBackground;\n        return _this;\n    }\n    VectorTileLayer.prototype.createRenderer = function () {\n        return new CanvasVectorTileLayerRenderer(this);\n    };\n    /**\n     * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n     * that resolves with an array of features. The array will either contain the topmost feature\n     * when a hit was detected, or it will be empty.\n     *\n     * The hit detection algorithm used for this method is optimized for performance, but is less\n     * accurate than the one used in {@link import(\"../PluggableMap.js\").default#getFeaturesAtPixel map.getFeaturesAtPixel()}: Text\n     * is not considered, and icons are only represented by their bounding box instead of the exact\n     * image.\n     *\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with an array of features.\n     * @api\n     */\n    VectorTileLayer.prototype.getFeatures = function (pixel) {\n        return _super.prototype.getFeatures.call(this, pixel);\n    };\n    /**\n     * @return {import(\"./VectorTileRenderType.js\").default} The render mode.\n     */\n    VectorTileLayer.prototype.getRenderMode = function () {\n        return this.renderMode_;\n    };\n    /**\n     * Return the level as number to which we will preload tiles up to.\n     * @return {number} The level to preload tiles up to.\n     * @observable\n     * @api\n     */\n    VectorTileLayer.prototype.getPreload = function () {\n        return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n    };\n    /**\n     * Whether we use interim tiles on error.\n     * @return {boolean} Use interim tiles on error.\n     * @observable\n     * @api\n     */\n    VectorTileLayer.prototype.getUseInterimTilesOnError = function () {\n        return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n    };\n    /**\n     * Set the level as number to which we will preload tiles up to.\n     * @param {number} preload The level to preload tiles up to.\n     * @observable\n     * @api\n     */\n    VectorTileLayer.prototype.setPreload = function (preload) {\n        this.set(TileProperty.PRELOAD, preload);\n    };\n    /**\n     * Set whether we use interim tiles on error.\n     * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n     * @observable\n     * @api\n     */\n    VectorTileLayer.prototype.setUseInterimTilesOnError = function (useInterimTilesOnError) {\n        this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n    };\n    return VectorTileLayer;\n}(BaseVectorLayer));\nexport default VectorTileLayer;\n//# sourceMappingURL=VectorTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Group\n */\nimport BaseLayer from './Base.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport SourceState from '../source/State.js';\nimport { assert } from '../asserts.js';\nimport { assign, clear } from '../obj.js';\nimport { getIntersection } from '../extent.js';\nimport { getUid } from '../util.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @typedef {'addlayer'|'removelayer'} EventType\n */\n/**\n * @classdesc\n * A layer group triggers 'addlayer' and 'removelayer' events when layers are added to or removed from\n * the group or one of its child groups.  When a layer group is added to or removed from another layer group,\n * a single event will be triggered (instead of one per layer in the group added or removed).\n */\nvar GroupEvent = /** @class */ (function (_super) {\n    __extends(GroupEvent, _super);\n    /**\n     * @param {EventType} type The event type.\n     * @param {BaseLayer} layer The layer.\n     */\n    function GroupEvent(type, layer) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The added or removed layer.\n         * @type {BaseLayer}\n         * @api\n         */\n        _this.layer = layer;\n        return _this;\n    }\n    return GroupEvent;\n}(Event));\nexport { GroupEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:layers', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|'change:layers', Return>} GroupOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Array<import(\"./Base.js\").default>|import(\"../Collection.js\").default<import(\"./Base.js\").default>} [layers] Child layers.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LAYERS: 'layers',\n};\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nvar LayerGroup = /** @class */ (function (_super) {\n    __extends(LayerGroup, _super);\n    /**\n     * @param {Options} [opt_options] Layer options.\n     */\n    function LayerGroup(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        var baseOptions = /** @type {Options} */ (assign({}, options));\n        delete baseOptions.layers;\n        var layers = options.layers;\n        _this = _super.call(this, baseOptions) || this;\n        /***\n         * @type {GroupOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {GroupOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {GroupOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.layersListenerKeys_ = [];\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n         */\n        _this.listenerKeys_ = {};\n        _this.addChangeListener(Property.LAYERS, _this.handleLayersChanged_);\n        if (layers) {\n            if (Array.isArray(layers)) {\n                layers = new Collection(layers.slice(), { unique: true });\n            }\n            else {\n                assert(typeof ( /** @type {?} */(layers).getArray) === 'function', 43); // Expected `layers` to be an array or a `Collection`\n            }\n        }\n        else {\n            layers = new Collection(undefined, { unique: true });\n        }\n        _this.setLayers(layers);\n        return _this;\n    }\n    /**\n     * @private\n     */\n    LayerGroup.prototype.handleLayerChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    LayerGroup.prototype.handleLayersChanged_ = function () {\n        this.layersListenerKeys_.forEach(unlistenByKey);\n        this.layersListenerKeys_.length = 0;\n        var layers = this.getLayers();\n        this.layersListenerKeys_.push(listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this), listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this));\n        for (var id in this.listenerKeys_) {\n            this.listenerKeys_[id].forEach(unlistenByKey);\n        }\n        clear(this.listenerKeys_);\n        var layersArray = layers.getArray();\n        for (var i = 0, ii = layersArray.length; i < ii; i++) {\n            var layer = layersArray[i];\n            this.registerLayerListeners_(layer);\n            this.dispatchEvent(new GroupEvent('addlayer', layer));\n        }\n        this.changed();\n    };\n    /**\n     * @param {BaseLayer} layer The layer.\n     */\n    LayerGroup.prototype.registerLayerListeners_ = function (layer) {\n        var listenerKeys = [\n            listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n            listen(layer, EventType.CHANGE, this.handleLayerChange_, this),\n        ];\n        if (layer instanceof LayerGroup) {\n            listenerKeys.push(listen(layer, 'addlayer', this.handleLayerGroupAdd_, this), listen(layer, 'removelayer', this.handleLayerGroupRemove_, this));\n        }\n        this.listenerKeys_[getUid(layer)] = listenerKeys;\n    };\n    /**\n     * @param {GroupEvent} event The layer group event.\n     */\n    LayerGroup.prototype.handleLayerGroupAdd_ = function (event) {\n        this.dispatchEvent(new GroupEvent('addlayer', event.layer));\n    };\n    /**\n     * @param {GroupEvent} event The layer group event.\n     */\n    LayerGroup.prototype.handleLayerGroupRemove_ = function (event) {\n        this.dispatchEvent(new GroupEvent('removelayer', event.layer));\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n     * @private\n     */\n    LayerGroup.prototype.handleLayersAdd_ = function (collectionEvent) {\n        var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n        this.registerLayerListeners_(layer);\n        this.dispatchEvent(new GroupEvent('addlayer', layer));\n        this.changed();\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n     * @private\n     */\n    LayerGroup.prototype.handleLayersRemove_ = function (collectionEvent) {\n        var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n        var key = getUid(layer);\n        this.listenerKeys_[key].forEach(unlistenByKey);\n        delete this.listenerKeys_[key];\n        this.dispatchEvent(new GroupEvent('removelayer', layer));\n        this.changed();\n    };\n    /**\n     * Returns the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n     * in this group.\n     * @return {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} Collection of\n     *   {@link module:ol/layer/Base layers} that are part of this group.\n     * @observable\n     * @api\n     */\n    LayerGroup.prototype.getLayers = function () {\n        return /** @type {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} */ (this.get(Property.LAYERS));\n    };\n    /**\n     * Set the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n     * in this group.\n     * @param {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} layers Collection of\n     *   {@link module:ol/layer/Base layers} that are part of this group.\n     * @observable\n     * @api\n     */\n    LayerGroup.prototype.setLayers = function (layers) {\n        var collection = this.getLayers();\n        if (collection) {\n            var currentLayers = collection.getArray();\n            for (var i = 0, ii = currentLayers.length; i < ii; ++i) {\n                this.dispatchEvent(new GroupEvent('removelayer', currentLayers[i]));\n            }\n        }\n        this.set(Property.LAYERS, layers);\n    };\n    /**\n     * @param {Array<import(\"./Layer.js\").default>} [opt_array] Array of layers (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    LayerGroup.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array !== undefined ? opt_array : [];\n        this.getLayers().forEach(function (layer) {\n            layer.getLayersArray(array);\n        });\n        return array;\n    };\n    /**\n     * Get the layer states list and use this groups z-index as the default\n     * for all layers in this and nested groups, if it is unset at this point.\n     * If opt_states is not provided and this group's z-index is undefined\n     * 0 is used a the default z-index.\n     * @param {Array<import(\"./Layer.js\").State>} [opt_states] Optional list\n     * of layer states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    LayerGroup.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states !== undefined ? opt_states : [];\n        var pos = states.length;\n        this.getLayers().forEach(function (layer) {\n            layer.getLayerStatesArray(states);\n        });\n        var ownLayerState = this.getLayerState();\n        var defaultZIndex = ownLayerState.zIndex;\n        if (!opt_states && ownLayerState.zIndex === undefined) {\n            defaultZIndex = 0;\n        }\n        for (var i = pos, ii = states.length; i < ii; i++) {\n            var layerState = states[i];\n            layerState.opacity *= ownLayerState.opacity;\n            layerState.visible = layerState.visible && ownLayerState.visible;\n            layerState.maxResolution = Math.min(layerState.maxResolution, ownLayerState.maxResolution);\n            layerState.minResolution = Math.max(layerState.minResolution, ownLayerState.minResolution);\n            layerState.minZoom = Math.max(layerState.minZoom, ownLayerState.minZoom);\n            layerState.maxZoom = Math.min(layerState.maxZoom, ownLayerState.maxZoom);\n            if (ownLayerState.extent !== undefined) {\n                if (layerState.extent !== undefined) {\n                    layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n                }\n                else {\n                    layerState.extent = ownLayerState.extent;\n                }\n            }\n            if (layerState.zIndex === undefined) {\n                layerState.zIndex = defaultZIndex;\n            }\n        }\n        return states;\n    };\n    /**\n     * @return {import(\"../source/State.js\").default} Source state.\n     */\n    LayerGroup.prototype.getSourceState = function () {\n        return SourceState.READY;\n    };\n    return LayerGroup;\n}(BaseLayer));\nexport default LayerGroup;\n//# sourceMappingURL=Group.js.map","/**\n * @module ol/layer/TileProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    PRELOAD: 'preload',\n    USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError',\n};\n//# sourceMappingURL=TileProperty.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Draw\n */\nimport Circle from '../geom/Circle.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport Feature from '../Feature.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport InteractionProperty from './Property.js';\nimport LineString from '../geom/LineString.js';\nimport MapBrowserEvent from '../MapBrowserEvent.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport PointerInteraction from './Pointer.js';\nimport Polygon, { fromCircle, makeRegular } from '../geom/Polygon.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorSource from '../source/Vector.js';\nimport { FALSE, TRUE } from '../functions.js';\nimport { always, noModifierKeys, shiftKeyOnly } from '../events/condition.js';\nimport { boundingExtent, getBottomLeft, getBottomRight, getTopLeft, getTopRight, } from '../extent.js';\nimport { createEditingStyle } from '../style/Style.js';\nimport { fromUserCoordinate, getUserProjection } from '../proj.js';\nimport { squaredDistance as squaredCoordinateDistance } from '../coordinate.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../geom/GeometryType.js\").default} type Geometry type of\n * the geometries being drawn with this instance.\n * @property {number} [clickTolerance=6] The maximum distance in pixels between\n * \"down\" and \"up\" for a \"up\" event to be considered a \"click\" event and\n * actually add a point/vertex to the geometry being drawn.  The default of `6`\n * was chosen for the draw interaction to behave correctly on mouse as well as\n * on touch devices.\n * @property {import(\"../Collection.js\").default<Feature>} [features]\n * Destination collection for the drawn features.\n * @property {VectorSource} [source] Destination source for\n * the drawn features.\n * @property {number} [dragVertexDelay=500] Delay in milliseconds after pointerdown\n * before the current vertex can be dragged to its exact position.\n * @property {number} [snapTolerance=12] Pixel distance for snapping to the\n * drawing finish. Must be greater than `0`.\n * @property {boolean} [stopClick=false] Stop click, singleclick, and\n * doubleclick events from firing during drawing.\n * @property {number} [maxPoints] The number of points that can be drawn before\n * a polygon ring or line string is finished. By default there is no\n * restriction.\n * @property {number} [minPoints] The number of points that must be drawn\n * before a polygon ring or line string can be finished. Default is `3` for\n * polygon rings and `2` for line strings.\n * @property {import(\"../events/condition.js\").Condition} [finishCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether the drawing can be finished. Not used when drawing\n * POINT or MULTI_POINT geometries.\n * @property {import(\"../style/Style.js\").StyleLike} [style]\n * Style for sketch features.\n * @property {GeometryFunction} [geometryFunction]\n * Function that is called when a geometry's coordinates are updated.\n * @property {string} [geometryName] Geometry name to use for features created\n * by the draw interaction.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default {@link module:ol/events/condition.noModifierKeys}, i.e. a click,\n * adds a vertex or deactivates freehand drawing.\n * @property {boolean} [freehand=false] Operate in freehand mode for lines,\n * polygons, and circles.  This makes the interaction always operate in freehand\n * mode and takes precedence over any `freehandCondition` option.\n * @property {import(\"../events/condition.js\").Condition} [freehandCondition]\n * Condition that activates freehand drawing for lines and polygons. This\n * function takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and\n * returns a boolean to indicate whether that event should be handled. The\n * default is {@link module:ol/events/condition.shiftKeyOnly}, meaning that the\n * Shift key activates freehand drawing.\n * @property {boolean} [wrapX=false] Wrap the world horizontally on the sketch\n * overlay.\n */\n/**\n * Coordinate type when drawing points.\n * @typedef {import(\"../coordinate.js\").Coordinate} PointCoordType\n */\n/**\n * Coordinate type when drawing lines.\n * @typedef {Array<import(\"../coordinate.js\").Coordinate>} LineCoordType\n */\n/**\n * Coordinate type when drawing polygons.\n * @typedef {Array<Array<import(\"../coordinate.js\").Coordinate>>} PolyCoordType\n */\n/**\n * Types used for drawing coordinates.\n * @typedef {PointCoordType|LineCoordType|PolyCoordType} SketchCoordType\n */\n/**\n * Function that takes an array of coordinates and an optional existing geometry\n * and a projection as arguments, and returns a geometry. The optional existing\n * geometry is the geometry that is returned when the function is called without\n * a second argument.\n * @typedef {function(!SketchCoordType, import(\"../geom/SimpleGeometry.js\").default,\n *     import(\"../proj/Projection.js\").default):\n *     import(\"../geom/SimpleGeometry.js\").default} GeometryFunction\n */\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n * @enum {string}\n */\nvar Mode = {\n    POINT: 'Point',\n    LINE_STRING: 'LineString',\n    POLYGON: 'Polygon',\n    CIRCLE: 'Circle',\n};\n/**\n * @enum {string}\n */\nvar DrawEventType = {\n    /**\n     * Triggered upon feature draw start\n     * @event DrawEvent#drawstart\n     * @api\n     */\n    DRAWSTART: 'drawstart',\n    /**\n     * Triggered upon feature draw end\n     * @event DrawEvent#drawend\n     * @api\n     */\n    DRAWEND: 'drawend',\n    /**\n     * Triggered upon feature draw abortion\n     * @event DrawEvent#drawabort\n     * @api\n     */\n    DRAWABORT: 'drawabort',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Draw~Draw} instances are\n * instances of this type.\n */\nvar DrawEvent = /** @class */ (function (_super) {\n    __extends(DrawEvent, _super);\n    /**\n     * @param {DrawEventType} type Type.\n     * @param {Feature} feature The feature drawn.\n     */\n    function DrawEvent(type, feature) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The feature being drawn.\n         * @type {Feature}\n         * @api\n         */\n        _this.feature = feature;\n        return _this;\n    }\n    return DrawEvent;\n}(Event));\nexport { DrawEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'drawabort'|'drawend'|'drawstart', DrawEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'drawabort'|'drawend'|'drawstart', Return>} DrawOnSignature\n */\n/**\n * @classdesc\n * Interaction for drawing feature geometries.\n *\n * @fires DrawEvent\n * @api\n */\nvar Draw = /** @class */ (function (_super) {\n    __extends(Draw, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function Draw(options) {\n        var _this = this;\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /***\n         * @type {DrawOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {DrawOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {DrawOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.shouldHandle_ = false;\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         * @private\n         */\n        _this.downPx_ = null;\n        /**\n         * @type {?}\n         * @private\n         */\n        _this.downTimeout_;\n        /**\n         * @type {number|undefined}\n         * @private\n         */\n        _this.lastDragTime_;\n        /**\n         * Pointer type of the last pointermove event\n         * @type {string}\n         * @private\n         */\n        _this.pointerType_;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.freehand_ = false;\n        /**\n         * Target source for drawn features.\n         * @type {VectorSource}\n         * @private\n         */\n        _this.source_ = options.source ? options.source : null;\n        /**\n         * Target collection for drawn features.\n         * @type {import(\"../Collection.js\").default<Feature>}\n         * @private\n         */\n        _this.features_ = options.features ? options.features : null;\n        /**\n         * Pixel distance for snapping.\n         * @type {number}\n         * @private\n         */\n        _this.snapTolerance_ = options.snapTolerance ? options.snapTolerance : 12;\n        /**\n         * Geometry type.\n         * @type {import(\"../geom/GeometryType.js\").default}\n         * @private\n         */\n        _this.type_ = /** @type {import(\"../geom/GeometryType.js\").default} */ (options.type);\n        /**\n         * Drawing mode (derived from geometry type.\n         * @type {Mode}\n         * @private\n         */\n        _this.mode_ = getMode(_this.type_);\n        /**\n         * Stop click, singleclick, and doubleclick events from firing during drawing.\n         * Default is `false`.\n         * @type {boolean}\n         * @private\n         */\n        _this.stopClick_ = !!options.stopClick;\n        /**\n         * The number of points that must be drawn before a polygon ring or line\n         * string can be finished.  The default is 3 for polygon rings and 2 for\n         * line strings.\n         * @type {number}\n         * @private\n         */\n        _this.minPoints_ = options.minPoints\n            ? options.minPoints\n            : _this.mode_ === Mode.POLYGON\n                ? 3\n                : 2;\n        /**\n         * The number of points that can be drawn before a polygon ring or line string\n         * is finished. The default is no restriction.\n         * @type {number}\n         * @private\n         */\n        _this.maxPoints_ =\n            _this.mode_ === Mode.CIRCLE\n                ? 2\n                : options.maxPoints\n                    ? options.maxPoints\n                    : Infinity;\n        /**\n         * A function to decide if a potential finish coordinate is permissible\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.finishCondition_ = options.finishCondition\n            ? options.finishCondition\n            : TRUE;\n        var geometryFunction = options.geometryFunction;\n        if (!geometryFunction) {\n            var mode_1 = _this.mode_;\n            if (mode_1 === Mode.CIRCLE) {\n                /**\n                 * @param {!LineCoordType} coordinates The coordinates.\n                 * @param {import(\"../geom/SimpleGeometry.js\").default|undefined} geometry Optional geometry.\n                 * @param {import(\"../proj/Projection.js\").default} projection The view projection.\n                 * @return {import(\"../geom/SimpleGeometry.js\").default} A geometry.\n                 */\n                geometryFunction = function (coordinates, geometry, projection) {\n                    var circle = geometry\n                        ? /** @type {Circle} */ (geometry)\n                        : new Circle([NaN, NaN]);\n                    var center = fromUserCoordinate(coordinates[0], projection);\n                    var squaredLength = squaredCoordinateDistance(center, fromUserCoordinate(coordinates[coordinates.length - 1], projection));\n                    circle.setCenterAndRadius(center, Math.sqrt(squaredLength));\n                    var userProjection = getUserProjection();\n                    if (userProjection) {\n                        circle.transform(projection, userProjection);\n                    }\n                    return circle;\n                };\n            }\n            else {\n                var Constructor_1;\n                if (mode_1 === Mode.POINT) {\n                    Constructor_1 = Point;\n                }\n                else if (mode_1 === Mode.LINE_STRING) {\n                    Constructor_1 = LineString;\n                }\n                else if (mode_1 === Mode.POLYGON) {\n                    Constructor_1 = Polygon;\n                }\n                /**\n                 * @param {!LineCoordType} coordinates The coordinates.\n                 * @param {import(\"../geom/SimpleGeometry.js\").default|undefined} geometry Optional geometry.\n                 * @param {import(\"../proj/Projection.js\").default} projection The view projection.\n                 * @return {import(\"../geom/SimpleGeometry.js\").default} A geometry.\n                 */\n                geometryFunction = function (coordinates, geometry, projection) {\n                    if (geometry) {\n                        if (mode_1 === Mode.POLYGON) {\n                            if (coordinates[0].length) {\n                                // Add a closing coordinate to match the first\n                                geometry.setCoordinates([\n                                    coordinates[0].concat([coordinates[0][0]]),\n                                ]);\n                            }\n                            else {\n                                geometry.setCoordinates([]);\n                            }\n                        }\n                        else {\n                            geometry.setCoordinates(coordinates);\n                        }\n                    }\n                    else {\n                        geometry = new Constructor_1(coordinates);\n                    }\n                    return geometry;\n                };\n            }\n        }\n        /**\n         * @type {GeometryFunction}\n         * @private\n         */\n        _this.geometryFunction_ = geometryFunction;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.dragVertexDelay_ =\n            options.dragVertexDelay !== undefined ? options.dragVertexDelay : 500;\n        /**\n         * Finish coordinate for the feature (first point for polygons, last point for\n         * linestrings).\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @private\n         */\n        _this.finishCoordinate_ = null;\n        /**\n         * Sketch feature.\n         * @type {Feature}\n         * @private\n         */\n        _this.sketchFeature_ = null;\n        /**\n         * Sketch point.\n         * @type {Feature<Point>}\n         * @private\n         */\n        _this.sketchPoint_ = null;\n        /**\n         * Sketch coordinates. Used when drawing a line or polygon.\n         * @type {SketchCoordType}\n         * @private\n         */\n        _this.sketchCoords_ = null;\n        /**\n         * Sketch line. Used when drawing polygon.\n         * @type {Feature<LineString>}\n         * @private\n         */\n        _this.sketchLine_ = null;\n        /**\n         * Sketch line coordinates. Used when drawing a polygon or circle.\n         * @type {LineCoordType}\n         * @private\n         */\n        _this.sketchLineCoords_ = null;\n        /**\n         * Squared tolerance for handling up events.  If the squared distance\n         * between a down and up event is greater than this tolerance, up events\n         * will not be handled.\n         * @type {number}\n         * @private\n         */\n        _this.squaredClickTolerance_ = options.clickTolerance\n            ? options.clickTolerance * options.clickTolerance\n            : 36;\n        /**\n         * Draw overlay where our sketch features are drawn.\n         * @type {VectorLayer}\n         * @private\n         */\n        _this.overlay_ = new VectorLayer({\n            source: new VectorSource({\n                useSpatialIndex: false,\n                wrapX: options.wrapX ? options.wrapX : false,\n            }),\n            style: options.style ? options.style : getDefaultStyleFunction(),\n            updateWhileInteracting: true,\n        });\n        /**\n         * Name of the geometry attribute for newly created features.\n         * @type {string|undefined}\n         * @private\n         */\n        _this.geometryName_ = options.geometryName;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : noModifierKeys;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.freehandCondition_;\n        if (options.freehand) {\n            _this.freehandCondition_ = always;\n        }\n        else {\n            _this.freehandCondition_ = options.freehandCondition\n                ? options.freehandCondition\n                : shiftKeyOnly;\n        }\n        _this.addChangeListener(InteractionProperty.ACTIVE, _this.updateState_);\n        return _this;\n    }\n    /**\n     * Remove the interaction from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    Draw.prototype.setMap = function (map) {\n        _super.prototype.setMap.call(this, map);\n        this.updateState_();\n    };\n    /**\n     * Get the overlay layer that this interaction renders sketch features to.\n     * @return {VectorLayer} Overlay layer.\n     * @api\n     */\n    Draw.prototype.getOverlay = function () {\n        return this.overlay_;\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} and may actually draw or finish the drawing.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @api\n     */\n    Draw.prototype.handleEvent = function (event) {\n        if (event.originalEvent.type === EventType.CONTEXTMENU) {\n            // Avoid context menu for long taps when drawing on mobile\n            event.originalEvent.preventDefault();\n        }\n        this.freehand_ =\n            this.mode_ !== Mode.POINT && this.freehandCondition_(event);\n        var move = event.type === MapBrowserEventType.POINTERMOVE;\n        var pass = true;\n        if (!this.freehand_ &&\n            this.lastDragTime_ &&\n            event.type === MapBrowserEventType.POINTERDRAG) {\n            var now = Date.now();\n            if (now - this.lastDragTime_ >= this.dragVertexDelay_) {\n                this.downPx_ = event.pixel;\n                this.shouldHandle_ = !this.freehand_;\n                move = true;\n            }\n            else {\n                this.lastDragTime_ = undefined;\n            }\n            if (this.shouldHandle_ && this.downTimeout_ !== undefined) {\n                clearTimeout(this.downTimeout_);\n                this.downTimeout_ = undefined;\n            }\n        }\n        if (this.freehand_ &&\n            event.type === MapBrowserEventType.POINTERDRAG &&\n            this.sketchFeature_ !== null) {\n            this.addToDrawing_(event.coordinate);\n            pass = false;\n        }\n        else if (this.freehand_ &&\n            event.type === MapBrowserEventType.POINTERDOWN) {\n            pass = false;\n        }\n        else if (move && this.getPointerCount() < 2) {\n            pass = event.type === MapBrowserEventType.POINTERMOVE;\n            if (pass && this.freehand_) {\n                this.handlePointerMove_(event);\n                if (this.shouldHandle_) {\n                    // Avoid page scrolling when freehand drawing on mobile\n                    event.originalEvent.preventDefault();\n                }\n            }\n            else if (event.originalEvent.pointerType === 'mouse' ||\n                (event.type === MapBrowserEventType.POINTERDRAG &&\n                    this.downTimeout_ === undefined)) {\n                this.handlePointerMove_(event);\n            }\n        }\n        else if (event.type === MapBrowserEventType.DBLCLICK) {\n            pass = false;\n        }\n        return _super.prototype.handleEvent.call(this, event) && pass;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @return {boolean} If the event was consumed.\n     */\n    Draw.prototype.handleDownEvent = function (event) {\n        this.shouldHandle_ = !this.freehand_;\n        if (this.freehand_) {\n            this.downPx_ = event.pixel;\n            if (!this.finishCoordinate_) {\n                this.startDrawing_(event.coordinate);\n            }\n            return true;\n        }\n        else if (this.condition_(event)) {\n            this.lastDragTime_ = Date.now();\n            this.downTimeout_ = setTimeout(function () {\n                this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE, event.map, event.originalEvent, false, event.frameState));\n            }.bind(this), this.dragVertexDelay_);\n            this.downPx_ = event.pixel;\n            return true;\n        }\n        else {\n            this.lastDragTime_ = undefined;\n            return false;\n        }\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @return {boolean} If the event was consumed.\n     */\n    Draw.prototype.handleUpEvent = function (event) {\n        var pass = true;\n        if (this.getPointerCount() === 0) {\n            if (this.downTimeout_) {\n                clearTimeout(this.downTimeout_);\n                this.downTimeout_ = undefined;\n            }\n            this.handlePointerMove_(event);\n            if (this.shouldHandle_) {\n                var startingToDraw = !this.finishCoordinate_;\n                if (startingToDraw) {\n                    this.startDrawing_(event.coordinate);\n                }\n                if (!startingToDraw && this.freehand_) {\n                    this.finishDrawing();\n                }\n                else if (!this.freehand_ &&\n                    (!startingToDraw || this.mode_ === Mode.POINT)) {\n                    if (this.atFinish_(event.pixel)) {\n                        if (this.finishCondition_(event)) {\n                            this.finishDrawing();\n                        }\n                    }\n                    else {\n                        this.addToDrawing_(event.coordinate);\n                    }\n                }\n                pass = false;\n            }\n            else if (this.freehand_) {\n                this.abortDrawing();\n            }\n        }\n        if (!pass && this.stopClick_) {\n            event.preventDefault();\n        }\n        return pass;\n    };\n    /**\n     * Handle move events.\n     * @param {import(\"../MapBrowserEvent.js\").default} event A move event.\n     * @private\n     */\n    Draw.prototype.handlePointerMove_ = function (event) {\n        this.pointerType_ = event.originalEvent.pointerType;\n        if (this.downPx_ &&\n            ((!this.freehand_ && this.shouldHandle_) ||\n                (this.freehand_ && !this.shouldHandle_))) {\n            var downPx = this.downPx_;\n            var clickPx = event.pixel;\n            var dx = downPx[0] - clickPx[0];\n            var dy = downPx[1] - clickPx[1];\n            var squaredDistance = dx * dx + dy * dy;\n            this.shouldHandle_ = this.freehand_\n                ? squaredDistance > this.squaredClickTolerance_\n                : squaredDistance <= this.squaredClickTolerance_;\n            if (!this.shouldHandle_) {\n                return;\n            }\n        }\n        if (this.finishCoordinate_) {\n            this.modifyDrawing_(event.coordinate);\n        }\n        else {\n            this.createOrUpdateSketchPoint_(event.coordinate.slice());\n        }\n    };\n    /**\n     * Determine if an event is within the snapping tolerance of the start coord.\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {boolean} The event is within the snapping tolerance of the start.\n     * @private\n     */\n    Draw.prototype.atFinish_ = function (pixel) {\n        var at = false;\n        if (this.sketchFeature_) {\n            var potentiallyDone = false;\n            var potentiallyFinishCoordinates = [this.finishCoordinate_];\n            var mode = this.mode_;\n            if (mode === Mode.POINT) {\n                at = true;\n            }\n            else if (mode === Mode.CIRCLE) {\n                at = this.sketchCoords_.length === 2;\n            }\n            else if (mode === Mode.LINE_STRING) {\n                potentiallyDone = this.sketchCoords_.length > this.minPoints_;\n            }\n            else if (mode === Mode.POLYGON) {\n                var sketchCoords = /** @type {PolyCoordType} */ (this.sketchCoords_);\n                potentiallyDone = sketchCoords[0].length > this.minPoints_;\n                potentiallyFinishCoordinates = [\n                    sketchCoords[0][0],\n                    sketchCoords[0][sketchCoords[0].length - 2],\n                ];\n            }\n            if (potentiallyDone) {\n                var map = this.getMap();\n                for (var i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n                    var finishCoordinate = potentiallyFinishCoordinates[i];\n                    var finishPixel = map.getPixelFromCoordinate(finishCoordinate);\n                    var dx = pixel[0] - finishPixel[0];\n                    var dy = pixel[1] - finishPixel[1];\n                    var snapTolerance = this.freehand_ ? 1 : this.snapTolerance_;\n                    at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance;\n                    if (at) {\n                        this.finishCoordinate_ = finishCoordinate;\n                        break;\n                    }\n                }\n            }\n        }\n        return at;\n    };\n    /**\n     * @param {import(\"../coordinate\").Coordinate} coordinates Coordinate.\n     * @private\n     */\n    Draw.prototype.createOrUpdateSketchPoint_ = function (coordinates) {\n        if (!this.sketchPoint_) {\n            this.sketchPoint_ = new Feature(new Point(coordinates));\n            this.updateSketchFeatures_();\n        }\n        else {\n            var sketchPointGeom = this.sketchPoint_.getGeometry();\n            sketchPointGeom.setCoordinates(coordinates);\n        }\n    };\n    /**\n     * @param {import(\"../geom/Polygon.js\").default} geometry Polygon geometry.\n     * @private\n     */\n    Draw.prototype.createOrUpdateCustomSketchLine_ = function (geometry) {\n        if (!this.sketchLine_) {\n            this.sketchLine_ = new Feature();\n        }\n        var ring = geometry.getLinearRing(0);\n        var sketchLineGeom = this.sketchLine_.getGeometry();\n        if (!sketchLineGeom) {\n            sketchLineGeom = new LineString(ring.getFlatCoordinates(), ring.getLayout());\n            this.sketchLine_.setGeometry(sketchLineGeom);\n        }\n        else {\n            sketchLineGeom.setFlatCoordinates(ring.getLayout(), ring.getFlatCoordinates());\n            sketchLineGeom.changed();\n        }\n    };\n    /**\n     * Start the drawing.\n     * @param {import(\"../coordinate.js\").Coordinate} start Start coordinate.\n     * @private\n     */\n    Draw.prototype.startDrawing_ = function (start) {\n        var projection = this.getMap().getView().getProjection();\n        this.finishCoordinate_ = start;\n        if (this.mode_ === Mode.POINT) {\n            this.sketchCoords_ = start.slice();\n        }\n        else if (this.mode_ === Mode.POLYGON) {\n            this.sketchCoords_ = [[start.slice(), start.slice()]];\n            this.sketchLineCoords_ = this.sketchCoords_[0];\n        }\n        else {\n            this.sketchCoords_ = [start.slice(), start.slice()];\n        }\n        if (this.sketchLineCoords_) {\n            this.sketchLine_ = new Feature(new LineString(this.sketchLineCoords_));\n        }\n        var geometry = this.geometryFunction_(this.sketchCoords_, undefined, projection);\n        this.sketchFeature_ = new Feature();\n        if (this.geometryName_) {\n            this.sketchFeature_.setGeometryName(this.geometryName_);\n        }\n        this.sketchFeature_.setGeometry(geometry);\n        this.updateSketchFeatures_();\n        this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n    };\n    /**\n     * Modify the drawing.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @private\n     */\n    Draw.prototype.modifyDrawing_ = function (coordinate) {\n        var map = this.getMap();\n        var geometry = this.sketchFeature_.getGeometry();\n        var projection = map.getView().getProjection();\n        var coordinates, last;\n        if (this.mode_ === Mode.POINT) {\n            last = this.sketchCoords_;\n        }\n        else if (this.mode_ === Mode.POLYGON) {\n            coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n            last = coordinates[coordinates.length - 1];\n            if (this.atFinish_(map.getPixelFromCoordinate(coordinate))) {\n                // snap to finish\n                coordinate = this.finishCoordinate_.slice();\n            }\n        }\n        else {\n            coordinates = this.sketchCoords_;\n            last = coordinates[coordinates.length - 1];\n        }\n        last[0] = coordinate[0];\n        last[1] = coordinate[1];\n        this.geometryFunction_(\n        /** @type {!LineCoordType} */ (this.sketchCoords_), geometry, projection);\n        if (this.sketchPoint_) {\n            var sketchPointGeom = this.sketchPoint_.getGeometry();\n            sketchPointGeom.setCoordinates(coordinate);\n        }\n        if (geometry.getType() === GeometryType.POLYGON &&\n            this.mode_ !== Mode.POLYGON) {\n            this.createOrUpdateCustomSketchLine_(/** @type {Polygon} */ (geometry));\n        }\n        else if (this.sketchLineCoords_) {\n            var sketchLineGeom = this.sketchLine_.getGeometry();\n            sketchLineGeom.setCoordinates(this.sketchLineCoords_);\n        }\n        this.updateSketchFeatures_();\n    };\n    /**\n     * Add a new coordinate to the drawing.\n     * @param {!PointCoordType} coordinate Coordinate\n     * @private\n     */\n    Draw.prototype.addToDrawing_ = function (coordinate) {\n        var geometry = this.sketchFeature_.getGeometry();\n        var projection = this.getMap().getView().getProjection();\n        var done;\n        var coordinates;\n        var mode = this.mode_;\n        if (mode === Mode.LINE_STRING || mode === Mode.CIRCLE) {\n            this.finishCoordinate_ = coordinate.slice();\n            coordinates = /** @type {LineCoordType} */ (this.sketchCoords_);\n            if (coordinates.length >= this.maxPoints_) {\n                if (this.freehand_) {\n                    coordinates.pop();\n                }\n                else {\n                    done = true;\n                }\n            }\n            coordinates.push(coordinate.slice());\n            this.geometryFunction_(coordinates, geometry, projection);\n        }\n        else if (mode === Mode.POLYGON) {\n            coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n            if (coordinates.length >= this.maxPoints_) {\n                if (this.freehand_) {\n                    coordinates.pop();\n                }\n                else {\n                    done = true;\n                }\n            }\n            coordinates.push(coordinate.slice());\n            if (done) {\n                this.finishCoordinate_ = coordinates[0];\n            }\n            this.geometryFunction_(this.sketchCoords_, geometry, projection);\n        }\n        this.createOrUpdateSketchPoint_(coordinate.slice());\n        this.updateSketchFeatures_();\n        if (done) {\n            this.finishDrawing();\n        }\n    };\n    /**\n     * Remove last point of the feature currently being drawn. Does not do anything when\n     * drawing POINT or MULTI_POINT geometries.\n     * @api\n     */\n    Draw.prototype.removeLastPoint = function () {\n        if (!this.sketchFeature_) {\n            return;\n        }\n        var geometry = this.sketchFeature_.getGeometry();\n        var projection = this.getMap().getView().getProjection();\n        var coordinates;\n        var mode = this.mode_;\n        if (mode === Mode.LINE_STRING || mode === Mode.CIRCLE) {\n            coordinates = /** @type {LineCoordType} */ (this.sketchCoords_);\n            coordinates.splice(-2, 1);\n            if (coordinates.length >= 2) {\n                this.finishCoordinate_ = coordinates[coordinates.length - 2].slice();\n                var finishCoordinate = this.finishCoordinate_.slice();\n                coordinates[coordinates.length - 1] = finishCoordinate;\n                this.createOrUpdateSketchPoint_(finishCoordinate);\n            }\n            this.geometryFunction_(coordinates, geometry, projection);\n            if (geometry.getType() === GeometryType.POLYGON && this.sketchLine_) {\n                this.createOrUpdateCustomSketchLine_(/** @type {Polygon} */ (geometry));\n            }\n        }\n        else if (mode === Mode.POLYGON) {\n            coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n            coordinates.splice(-2, 1);\n            var sketchLineGeom = this.sketchLine_.getGeometry();\n            if (coordinates.length >= 2) {\n                var finishCoordinate = coordinates[coordinates.length - 2].slice();\n                coordinates[coordinates.length - 1] = finishCoordinate;\n                this.createOrUpdateSketchPoint_(finishCoordinate);\n            }\n            sketchLineGeom.setCoordinates(coordinates);\n            this.geometryFunction_(this.sketchCoords_, geometry, projection);\n        }\n        if (coordinates.length === 1) {\n            this.abortDrawing();\n        }\n        this.updateSketchFeatures_();\n    };\n    /**\n     * Stop drawing and add the sketch feature to the target layer.\n     * The {@link module:ol/interaction/Draw~DrawEventType.DRAWEND} event is\n     * dispatched before inserting the feature.\n     * @api\n     */\n    Draw.prototype.finishDrawing = function () {\n        var sketchFeature = this.abortDrawing_();\n        if (!sketchFeature) {\n            return;\n        }\n        var coordinates = this.sketchCoords_;\n        var geometry = sketchFeature.getGeometry();\n        var projection = this.getMap().getView().getProjection();\n        if (this.mode_ === Mode.LINE_STRING) {\n            // remove the redundant last point\n            coordinates.pop();\n            this.geometryFunction_(coordinates, geometry, projection);\n        }\n        else if (this.mode_ === Mode.POLYGON) {\n            // remove the redundant last point in ring\n            /** @type {PolyCoordType} */ (coordinates)[0].pop();\n            this.geometryFunction_(coordinates, geometry, projection);\n            coordinates = geometry.getCoordinates();\n        }\n        // cast multi-part geometries\n        if (this.type_ === GeometryType.MULTI_POINT) {\n            sketchFeature.setGeometry(new MultiPoint([/** @type {PointCoordType} */ (coordinates)]));\n        }\n        else if (this.type_ === GeometryType.MULTI_LINE_STRING) {\n            sketchFeature.setGeometry(new MultiLineString([/** @type {LineCoordType} */ (coordinates)]));\n        }\n        else if (this.type_ === GeometryType.MULTI_POLYGON) {\n            sketchFeature.setGeometry(new MultiPolygon([/** @type {PolyCoordType} */ (coordinates)]));\n        }\n        // First dispatch event to allow full set up of feature\n        this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND, sketchFeature));\n        // Then insert feature\n        if (this.features_) {\n            this.features_.push(sketchFeature);\n        }\n        if (this.source_) {\n            this.source_.addFeature(sketchFeature);\n        }\n    };\n    /**\n     * Stop drawing without adding the sketch feature to the target layer.\n     * @return {Feature} The sketch feature (or null if none).\n     * @private\n     */\n    Draw.prototype.abortDrawing_ = function () {\n        this.finishCoordinate_ = null;\n        var sketchFeature = this.sketchFeature_;\n        this.sketchFeature_ = null;\n        this.sketchPoint_ = null;\n        this.sketchLine_ = null;\n        this.overlay_.getSource().clear(true);\n        return sketchFeature;\n    };\n    /**\n     * Stop drawing without adding the sketch feature to the target layer.\n     * @api\n     */\n    Draw.prototype.abortDrawing = function () {\n        var sketchFeature = this.abortDrawing_();\n        if (sketchFeature) {\n            this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT, sketchFeature));\n        }\n    };\n    /**\n     * Append coordinates to the end of the geometry that is currently being drawn.\n     * This can be used when drawing LineStrings or Polygons. Coordinates will\n     * either be appended to the current LineString or the outer ring of the current\n     * Polygon. If no geometry is being drawn, a new one will be created.\n     * @param {!LineCoordType} coordinates Linear coordinates to be appended to\n     * the coordinate array.\n     * @api\n     */\n    Draw.prototype.appendCoordinates = function (coordinates) {\n        var mode = this.mode_;\n        var newDrawing = !this.sketchFeature_;\n        if (newDrawing) {\n            this.startDrawing_(coordinates[0]);\n        }\n        /** @type {LineCoordType} */\n        var sketchCoords;\n        if (mode === Mode.LINE_STRING || mode === Mode.CIRCLE) {\n            sketchCoords = /** @type {LineCoordType} */ (this.sketchCoords_);\n        }\n        else if (mode === Mode.POLYGON) {\n            sketchCoords =\n                this.sketchCoords_ && this.sketchCoords_.length\n                    ? /** @type {PolyCoordType} */ (this.sketchCoords_)[0]\n                    : [];\n        }\n        else {\n            return;\n        }\n        if (newDrawing) {\n            sketchCoords.shift();\n        }\n        // Remove last coordinate from sketch drawing (this coordinate follows cursor position)\n        sketchCoords.pop();\n        // Append coordinate list\n        for (var i = 0; i < coordinates.length; i++) {\n            this.addToDrawing_(coordinates[i]);\n        }\n        var ending = coordinates[coordinates.length - 1];\n        // Duplicate last coordinate for sketch drawing (cursor position)\n        this.addToDrawing_(ending);\n        this.modifyDrawing_(ending);\n    };\n    /**\n     * Initiate draw mode by starting from an existing geometry which will\n     * receive new additional points. This only works on features with\n     * `LineString` geometries, where the interaction will extend lines by adding\n     * points to the end of the coordinates array.\n     * This will change the original feature, instead of drawing a copy.\n     *\n     * The function will dispatch a `drawstart` event.\n     *\n     * @param {!Feature<LineString>} feature Feature to be extended.\n     * @api\n     */\n    Draw.prototype.extend = function (feature) {\n        var geometry = feature.getGeometry();\n        var lineString = geometry;\n        this.sketchFeature_ = feature;\n        this.sketchCoords_ = lineString.getCoordinates();\n        var last = this.sketchCoords_[this.sketchCoords_.length - 1];\n        this.finishCoordinate_ = last.slice();\n        this.sketchCoords_.push(last.slice());\n        this.sketchPoint_ = new Feature(new Point(last));\n        this.updateSketchFeatures_();\n        this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n    };\n    /**\n     * Redraw the sketch features.\n     * @private\n     */\n    Draw.prototype.updateSketchFeatures_ = function () {\n        var sketchFeatures = [];\n        if (this.sketchFeature_) {\n            sketchFeatures.push(this.sketchFeature_);\n        }\n        if (this.sketchLine_) {\n            sketchFeatures.push(this.sketchLine_);\n        }\n        if (this.sketchPoint_) {\n            sketchFeatures.push(this.sketchPoint_);\n        }\n        var overlaySource = this.overlay_.getSource();\n        overlaySource.clear(true);\n        overlaySource.addFeatures(sketchFeatures);\n    };\n    /**\n     * @private\n     */\n    Draw.prototype.updateState_ = function () {\n        var map = this.getMap();\n        var active = this.getActive();\n        if (!map || !active) {\n            this.abortDrawing();\n        }\n        this.overlay_.setMap(active ? map : null);\n    };\n    return Draw;\n}(PointerInteraction));\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n    var styles = createEditingStyle();\n    return function (feature, resolution) {\n        return styles[feature.getGeometry().getType()];\n    };\n}\n/**\n * Create a `geometryFunction` for `type: 'Circle'` that will create a regular\n * polygon with a user specified number of sides and start angle instead of a\n * `import(\"../geom/Circle.js\").Circle` geometry.\n * @param {number} [opt_sides] Number of sides of the regular polygon.\n *     Default is 32.\n * @param {number} [opt_angle] Angle of the first point in counter-clockwise\n *     radians. 0 means East.\n *     Default is the angle defined by the heading from the center of the\n *     regular polygon to the current pointer position.\n * @return {GeometryFunction} Function that draws a polygon.\n * @api\n */\nexport function createRegularPolygon(opt_sides, opt_angle) {\n    return function (coordinates, opt_geometry, projection) {\n        var center = fromUserCoordinate(\n        /** @type {LineCoordType} */ (coordinates)[0], projection);\n        var end = fromUserCoordinate(\n        /** @type {LineCoordType} */ (coordinates)[coordinates.length - 1], projection);\n        var radius = Math.sqrt(squaredCoordinateDistance(center, end));\n        var geometry = opt_geometry\n            ? /** @type {Polygon} */ (opt_geometry)\n            : fromCircle(new Circle(center), opt_sides);\n        var angle = opt_angle;\n        if (!opt_angle && opt_angle !== 0) {\n            var x = end[0] - center[0];\n            var y = end[1] - center[1];\n            angle = Math.atan2(y, x);\n        }\n        makeRegular(geometry, center, radius, angle);\n        var userProjection = getUserProjection();\n        if (userProjection) {\n            geometry.transform(projection, userProjection);\n        }\n        return geometry;\n    };\n}\n/**\n * Create a `geometryFunction` that will create a box-shaped polygon (aligned\n * with the coordinate system axes).  Use this with the draw interaction and\n * `type: 'Circle'` to return a box instead of a circle geometry.\n * @return {GeometryFunction} Function that draws a box-shaped polygon.\n * @api\n */\nexport function createBox() {\n    return function (coordinates, opt_geometry, projection) {\n        var extent = boundingExtent(\n        /** @type {LineCoordType} */ ([\n            coordinates[0],\n            coordinates[coordinates.length - 1],\n        ]).map(function (coordinate) {\n            return fromUserCoordinate(coordinate, projection);\n        }));\n        var boxCoordinates = [\n            [\n                getBottomLeft(extent),\n                getBottomRight(extent),\n                getTopRight(extent),\n                getTopLeft(extent),\n                getBottomLeft(extent),\n            ],\n        ];\n        var geometry = opt_geometry;\n        if (geometry) {\n            geometry.setCoordinates(boxCoordinates);\n        }\n        else {\n            geometry = new Polygon(boxCoordinates);\n        }\n        var userProjection = getUserProjection();\n        if (userProjection) {\n            geometry.transform(projection, userProjection);\n        }\n        return geometry;\n    };\n}\n/**\n * Get the drawing mode.  The mode for multi-part geometries is the same as for\n * their single-part cousins.\n * @param {import(\"../geom/GeometryType.js\").default} type Geometry type.\n * @return {Mode} Drawing mode.\n */\nfunction getMode(type) {\n    switch (type) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n            return Mode.POINT;\n        case GeometryType.LINE_STRING:\n        case GeometryType.MULTI_LINE_STRING:\n            return Mode.LINE_STRING;\n        case GeometryType.POLYGON:\n        case GeometryType.MULTI_POLYGON:\n            return Mode.POLYGON;\n        case GeometryType.CIRCLE:\n            return Mode.CIRCLE;\n        default:\n            throw new Error('Invalid type: ' + type);\n    }\n}\nexport default Draw;\n//# sourceMappingURL=Draw.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseVector\n */\nimport Layer from './Layer.js';\nimport RBush from 'rbush';\nimport { assign } from '../obj.js';\nimport { createDefaultStyle, toFunction as toStyleFunction, } from '../style/Style.js';\n/**\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {VectorSourceType} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n *\n * As an optimization decluttered features from layers with the same `className` are rendered above\n * the fill and stroke styles of all of those layers regardless of z-index.  To opt out of this\n * behavior and place declutterd features with their own layer configure the layer with a `className`\n * other than `ol-layer`.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style] Layer style. When set to `null`, only\n * features that have their own style will be rendered. See {@link module:ol/style/Style~Style} for the default style\n * which will be used if this is not set.\n * @property {import(\"./Base.js\").BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    RENDER_ORDER: 'renderOrder',\n};\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @template {import(\"../renderer/canvas/VectorLayer.js\").default|import(\"../renderer/canvas/VectorTileLayer.js\").default|import(\"../renderer/canvas/VectorImageLayer.js\").default|import(\"../renderer/webgl/PointsLayer.js\").default} RendererType\n * @extends {Layer<VectorSourceType, RendererType>}\n * @api\n */\nvar BaseVectorLayer = /** @class */ (function (_super) {\n    __extends(BaseVectorLayer, _super);\n    /**\n     * @param {Options<VectorSourceType>} [opt_options] Options.\n     */\n    function BaseVectorLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.style;\n        delete baseOptions.renderBuffer;\n        delete baseOptions.updateWhileAnimating;\n        delete baseOptions.updateWhileInteracting;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.declutter_ =\n            options.declutter !== undefined ? options.declutter : false;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.renderBuffer_ =\n            options.renderBuffer !== undefined ? options.renderBuffer : 100;\n        /**\n         * User provided style.\n         * @type {import(\"../style/Style.js\").StyleLike}\n         * @private\n         */\n        _this.style_ = null;\n        /**\n         * Style function for use within the library.\n         * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n         * @private\n         */\n        _this.styleFunction_ = undefined;\n        _this.setStyle(options.style);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileAnimating_ =\n            options.updateWhileAnimating !== undefined\n                ? options.updateWhileAnimating\n                : false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileInteracting_ =\n            options.updateWhileInteracting !== undefined\n                ? options.updateWhileInteracting\n                : false;\n        return _this;\n    }\n    /**\n     * @return {boolean} Declutter.\n     */\n    BaseVectorLayer.prototype.getDeclutter = function () {\n        return this.declutter_;\n    };\n    /**\n     * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n     * that resolves with an array of features. The array will either contain the topmost feature\n     * when a hit was detected, or it will be empty.\n     *\n     * The hit detection algorithm used for this method is optimized for performance, but is less\n     * accurate than the one used in {@link import(\"../PluggableMap.js\").default#getFeaturesAtPixel}: Text\n     * is not considered, and icons are only represented by their bounding box instead of the exact\n     * image.\n     *\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with an array of features.\n     * @api\n     */\n    BaseVectorLayer.prototype.getFeatures = function (pixel) {\n        return _super.prototype.getFeatures.call(this, pixel);\n    };\n    /**\n     * @return {number|undefined} Render buffer.\n     */\n    BaseVectorLayer.prototype.getRenderBuffer = function () {\n        return this.renderBuffer_;\n    };\n    /**\n     * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n     *     order.\n     */\n    BaseVectorLayer.prototype.getRenderOrder = function () {\n        return /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER));\n    };\n    /**\n     * Get the style for features.  This returns whatever was passed to the `style`\n     * option at construction or to the `setStyle` method.\n     * @return {import(\"../style/Style.js\").StyleLike|null|undefined} Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the style function.\n     * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     animating.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileAnimating = function () {\n        return this.updateWhileAnimating_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     interacting.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileInteracting = function () {\n        return this.updateWhileInteracting_;\n    };\n    /**\n     * Render declutter items for this layer\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    BaseVectorLayer.prototype.renderDeclutter = function (frameState) {\n        if (!frameState.declutterTree) {\n            frameState.declutterTree = new RBush(9);\n        }\n        /** @type {*} */ (this.getRenderer()).renderDeclutter(frameState);\n    };\n    /**\n     * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n     *     Render order.\n     */\n    BaseVectorLayer.prototype.setRenderOrder = function (renderOrder) {\n        this.set(Property.RENDER_ORDER, renderOrder);\n    };\n    /**\n     * Set the style for features.  This can be a single style object, an array\n     * of styles, or a function that takes a feature and resolution and returns\n     * an array of styles. If set to `null`, the layer has no style (a `null` style),\n     * so only features that have their own styles will be rendered in the layer. Call\n     * `setStyle()` without arguments to reset to the default style. See\n     * {@link module:ol/style/Style~Style} for information on the default style.\n     * @param {import(\"../style/Style.js\").StyleLike|null} [opt_style] Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.setStyle = function (opt_style) {\n        this.style_ = opt_style !== undefined ? opt_style : createDefaultStyle;\n        this.styleFunction_ =\n            opt_style === null ? undefined : toStyleFunction(this.style_);\n        this.changed();\n    };\n    return BaseVectorLayer;\n}(Layer));\nexport default BaseVectorLayer;\n//# sourceMappingURL=BaseVector.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Snap\n */\nimport CollectionEventType from '../CollectionEventType.js';\nimport EventType from '../events/EventType.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport PointerInteraction from './Pointer.js';\nimport RBush from '../structs/RBush.js';\nimport VectorEventType from '../source/VectorEventType.js';\nimport { FALSE, TRUE } from '../functions.js';\nimport { boundingExtent, createEmpty } from '../extent.js';\nimport { closestOnCircle, closestOnSegment, distance as coordinateDistance, squaredDistance as squaredCoordinateDistance, squaredDistanceToSegment, } from '../coordinate.js';\nimport { fromCircle } from '../geom/Polygon.js';\nimport { fromUserCoordinate, getUserProjection, toUserCoordinate, } from '../proj.js';\nimport { getUid } from '../util.js';\nimport { getValues } from '../obj.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @typedef {Object} Result\n * @property {boolean} snapped Snapped.\n * @property {import(\"../coordinate.js\").Coordinate|null} vertex Vertex.\n * @property {import(\"../pixel.js\").Pixel|null} vertexPixel VertexPixel.\n */\n/**\n * @typedef {Object} SegmentData\n * @property {import(\"../Feature.js\").default} feature Feature.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} segment Segment.\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} [features] Snap to these features. Either this option or source should be provided.\n * @property {boolean} [edge=true] Snap to edges.\n * @property {boolean} [vertex=true] Snap to vertices.\n * @property {number} [pixelTolerance=10] Pixel tolerance for considering the pointer close enough to a segment or\n * vertex for snapping.\n * @property {import(\"../source/Vector.js\").default} [source] Snap to features from this source. Either this option or features should be provided\n */\n/**\n * @param  {import(\"../source/Vector.js\").VectorSourceEvent|import(\"../Collection.js\").CollectionEvent} evt Event.\n * @return {import(\"../Feature.js\").default} Feature.\n */\nfunction getFeatureFromEvent(evt) {\n    if (\n    /** @type {import(\"../source/Vector.js\").VectorSourceEvent} */ (evt).feature) {\n        return /** @type {import(\"../source/Vector.js\").VectorSourceEvent} */ (evt)\n            .feature;\n    }\n    else if (\n    /** @type {import(\"../Collection.js\").CollectionEvent} */ (evt).element) {\n        return /** @type {import(\"../Feature.js\").default} */ (\n        /** @type {import(\"../Collection.js\").CollectionEvent} */ (evt).element);\n    }\n}\nvar tempSegment = [];\n/**\n * @classdesc\n * Handles snapping of vector features while modifying or drawing them.  The\n * features can come from a {@link module:ol/source/Vector} or {@link module:ol/Collection~Collection}\n * Any interaction object that allows the user to interact\n * with the features using the mouse can benefit from the snapping, as long\n * as it is added before.\n *\n * The snap interaction modifies map browser event `coordinate` and `pixel`\n * properties to force the snap to occur to any interaction that them.\n *\n * Example:\n *\n *     import Snap from 'ol/interaction/Snap';\n *\n *     const snap = new Snap({\n *       source: source\n *     });\n *\n *     map.addInteraction(snap);\n *\n * @api\n */\nvar Snap = /** @class */ (function (_super) {\n    __extends(Snap, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Snap(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.handleDownEvent) {\n            pointerOptions.handleDownEvent = TRUE;\n        }\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @type {import(\"../source/Vector.js\").default}\n         * @private\n         */\n        _this.source_ = options.source ? options.source : null;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.vertex_ = options.vertex !== undefined ? options.vertex : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.edge_ = options.edge !== undefined ? options.edge : true;\n        /**\n         * @type {import(\"../Collection.js\").default<import(\"../Feature.js\").default>}\n         * @private\n         */\n        _this.features_ = options.features ? options.features : null;\n        /**\n         * @type {Array<import(\"../events.js\").EventsKey>}\n         * @private\n         */\n        _this.featuresListenerKeys_ = [];\n        /**\n         * @type {Object<string, import(\"../events.js\").EventsKey>}\n         * @private\n         */\n        _this.featureChangeListenerKeys_ = {};\n        /**\n         * Extents are preserved so indexed segment can be quickly removed\n         * when its feature geometry changes\n         * @type {Object<string, import(\"../extent.js\").Extent>}\n         * @private\n         */\n        _this.indexedFeaturesExtents_ = {};\n        /**\n         * If a feature geometry changes while a pointer drag|move event occurs, the\n         * feature doesn't get updated right away.  It will be at the next 'pointerup'\n         * event fired.\n         * @type {!Object<string, import(\"../Feature.js\").default>}\n         * @private\n         */\n        _this.pendingFeatures_ = {};\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.pixelTolerance_ =\n            options.pixelTolerance !== undefined ? options.pixelTolerance : 10;\n        /**\n         * Segment RTree for each layer\n         * @type {import(\"../structs/RBush.js\").default<SegmentData>}\n         * @private\n         */\n        _this.rBush_ = new RBush();\n        /**\n         * @const\n         * @private\n         * @type {Object<string, function(import(\"../Feature.js\").default, import(\"../geom/Geometry.js\").default): void>}\n         */\n        _this.SEGMENT_WRITERS_ = {\n            'Point': _this.writePointGeometry_.bind(_this),\n            'LineString': _this.writeLineStringGeometry_.bind(_this),\n            'LinearRing': _this.writeLineStringGeometry_.bind(_this),\n            'Polygon': _this.writePolygonGeometry_.bind(_this),\n            'MultiPoint': _this.writeMultiPointGeometry_.bind(_this),\n            'MultiLineString': _this.writeMultiLineStringGeometry_.bind(_this),\n            'MultiPolygon': _this.writeMultiPolygonGeometry_.bind(_this),\n            'GeometryCollection': _this.writeGeometryCollectionGeometry_.bind(_this),\n            'Circle': _this.writeCircleGeometry_.bind(_this),\n        };\n        return _this;\n    }\n    /**\n     * Add a feature to the collection of features that we may snap to.\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {boolean} [opt_listen] Whether to listen to the feature change or not\n     *     Defaults to `true`.\n     * @api\n     */\n    Snap.prototype.addFeature = function (feature, opt_listen) {\n        var register = opt_listen !== undefined ? opt_listen : true;\n        var feature_uid = getUid(feature);\n        var geometry = feature.getGeometry();\n        if (geometry) {\n            var segmentWriter = this.SEGMENT_WRITERS_[geometry.getType()];\n            if (segmentWriter) {\n                this.indexedFeaturesExtents_[feature_uid] = geometry.getExtent(createEmpty());\n                segmentWriter(feature, geometry);\n            }\n        }\n        if (register) {\n            this.featureChangeListenerKeys_[feature_uid] = listen(feature, EventType.CHANGE, this.handleFeatureChange_, this);\n        }\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @private\n     */\n    Snap.prototype.forEachFeatureAdd_ = function (feature) {\n        this.addFeature(feature);\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @private\n     */\n    Snap.prototype.forEachFeatureRemove_ = function (feature) {\n        this.removeFeature(feature);\n    };\n    /**\n     * @return {import(\"../Collection.js\").default<import(\"../Feature.js\").default>|Array<import(\"../Feature.js\").default>} Features.\n     * @private\n     */\n    Snap.prototype.getFeatures_ = function () {\n        var features;\n        if (this.features_) {\n            features = this.features_;\n        }\n        else if (this.source_) {\n            features = this.source_.getFeatures();\n        }\n        return features;\n    };\n    /**\n     * @param {import(\"../MapBrowserEvent.js\").default} evt Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     */\n    Snap.prototype.handleEvent = function (evt) {\n        var result = this.snapTo(evt.pixel, evt.coordinate, evt.map);\n        if (result.snapped) {\n            evt.coordinate = result.vertex.slice(0, 2);\n            evt.pixel = result.vertexPixel;\n        }\n        return _super.prototype.handleEvent.call(this, evt);\n    };\n    /**\n     * @param {import(\"../source/Vector.js\").VectorSourceEvent|import(\"../Collection.js\").CollectionEvent} evt Event.\n     * @private\n     */\n    Snap.prototype.handleFeatureAdd_ = function (evt) {\n        var feature = getFeatureFromEvent(evt);\n        this.addFeature(feature);\n    };\n    /**\n     * @param {import(\"../source/Vector.js\").VectorSourceEvent|import(\"../Collection.js\").CollectionEvent} evt Event.\n     * @private\n     */\n    Snap.prototype.handleFeatureRemove_ = function (evt) {\n        var feature = getFeatureFromEvent(evt);\n        this.removeFeature(feature);\n    };\n    /**\n     * @param {import(\"../events/Event.js\").default} evt Event.\n     * @private\n     */\n    Snap.prototype.handleFeatureChange_ = function (evt) {\n        var feature = /** @type {import(\"../Feature.js\").default} */ (evt.target);\n        if (this.handlingDownUpSequence) {\n            var uid = getUid(feature);\n            if (!(uid in this.pendingFeatures_)) {\n                this.pendingFeatures_[uid] = feature;\n            }\n        }\n        else {\n            this.updateFeature_(feature);\n        }\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} evt Event.\n     * @return {boolean} If the event was consumed.\n     */\n    Snap.prototype.handleUpEvent = function (evt) {\n        var featuresToUpdate = getValues(this.pendingFeatures_);\n        if (featuresToUpdate.length) {\n            featuresToUpdate.forEach(this.updateFeature_.bind(this));\n            this.pendingFeatures_ = {};\n        }\n        return false;\n    };\n    /**\n     * Remove a feature from the collection of features that we may snap to.\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @param {boolean} [opt_unlisten] Whether to unlisten to the feature change\n     *     or not. Defaults to `true`.\n     * @api\n     */\n    Snap.prototype.removeFeature = function (feature, opt_unlisten) {\n        var unregister = opt_unlisten !== undefined ? opt_unlisten : true;\n        var feature_uid = getUid(feature);\n        var extent = this.indexedFeaturesExtents_[feature_uid];\n        if (extent) {\n            var rBush = this.rBush_;\n            var nodesToRemove_1 = [];\n            rBush.forEachInExtent(extent, function (node) {\n                if (feature === node.feature) {\n                    nodesToRemove_1.push(node);\n                }\n            });\n            for (var i = nodesToRemove_1.length - 1; i >= 0; --i) {\n                rBush.remove(nodesToRemove_1[i]);\n            }\n        }\n        if (unregister) {\n            unlistenByKey(this.featureChangeListenerKeys_[feature_uid]);\n            delete this.featureChangeListenerKeys_[feature_uid];\n        }\n    };\n    /**\n     * Remove the interaction from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    Snap.prototype.setMap = function (map) {\n        var currentMap = this.getMap();\n        var keys = this.featuresListenerKeys_;\n        var features = /** @type {Array<import(\"../Feature.js\").default>} */ (this.getFeatures_());\n        if (currentMap) {\n            keys.forEach(unlistenByKey);\n            keys.length = 0;\n            features.forEach(this.forEachFeatureRemove_.bind(this));\n        }\n        _super.prototype.setMap.call(this, map);\n        if (map) {\n            if (this.features_) {\n                keys.push(listen(this.features_, CollectionEventType.ADD, this.handleFeatureAdd_, this), listen(this.features_, CollectionEventType.REMOVE, this.handleFeatureRemove_, this));\n            }\n            else if (this.source_) {\n                keys.push(listen(this.source_, VectorEventType.ADDFEATURE, this.handleFeatureAdd_, this), listen(this.source_, VectorEventType.REMOVEFEATURE, this.handleFeatureRemove_, this));\n            }\n            features.forEach(this.forEachFeatureAdd_.bind(this));\n        }\n    };\n    /**\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel\n     * @param {import(\"../coordinate.js\").Coordinate} pixelCoordinate Coordinate\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @return {Result} Snap result\n     */\n    Snap.prototype.snapTo = function (pixel, pixelCoordinate, map) {\n        var lowerLeft = map.getCoordinateFromPixel([\n            pixel[0] - this.pixelTolerance_,\n            pixel[1] + this.pixelTolerance_,\n        ]);\n        var upperRight = map.getCoordinateFromPixel([\n            pixel[0] + this.pixelTolerance_,\n            pixel[1] - this.pixelTolerance_,\n        ]);\n        var box = boundingExtent([lowerLeft, upperRight]);\n        var segments = this.rBush_.getInExtent(box);\n        // If snapping on vertices only, don't consider circles\n        if (this.vertex_ && !this.edge_) {\n            segments = segments.filter(function (segment) {\n                return segment.feature.getGeometry().getType() !== GeometryType.CIRCLE;\n            });\n        }\n        var snapped = false;\n        var vertex = null;\n        var vertexPixel = null;\n        if (segments.length === 0) {\n            return {\n                snapped: snapped,\n                vertex: vertex,\n                vertexPixel: vertexPixel,\n            };\n        }\n        var projection = map.getView().getProjection();\n        var projectedCoordinate = fromUserCoordinate(pixelCoordinate, projection);\n        var closestSegmentData;\n        var minSquaredDistance = Infinity;\n        for (var i = 0; i < segments.length; ++i) {\n            var segmentData = segments[i];\n            tempSegment[0] = fromUserCoordinate(segmentData.segment[0], projection);\n            tempSegment[1] = fromUserCoordinate(segmentData.segment[1], projection);\n            var delta = squaredDistanceToSegment(projectedCoordinate, tempSegment);\n            if (delta < minSquaredDistance) {\n                closestSegmentData = segmentData;\n                minSquaredDistance = delta;\n            }\n        }\n        var closestSegment = closestSegmentData.segment;\n        if (this.vertex_ && !this.edge_) {\n            var pixel1 = map.getPixelFromCoordinate(closestSegment[0]);\n            var pixel2 = map.getPixelFromCoordinate(closestSegment[1]);\n            var squaredDist1 = squaredCoordinateDistance(pixel, pixel1);\n            var squaredDist2 = squaredCoordinateDistance(pixel, pixel2);\n            var dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n            if (dist <= this.pixelTolerance_) {\n                snapped = true;\n                vertex =\n                    squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n                vertexPixel = map.getPixelFromCoordinate(vertex);\n            }\n        }\n        else if (this.edge_) {\n            var isCircle = closestSegmentData.feature.getGeometry().getType() ===\n                GeometryType.CIRCLE;\n            if (isCircle) {\n                var circleGeometry = closestSegmentData.feature.getGeometry();\n                var userProjection = getUserProjection();\n                if (userProjection) {\n                    circleGeometry = circleGeometry\n                        .clone()\n                        .transform(userProjection, projection);\n                }\n                vertex = toUserCoordinate(closestOnCircle(projectedCoordinate, \n                /** @type {import(\"../geom/Circle.js\").default} */ (circleGeometry)), projection);\n            }\n            else {\n                tempSegment[0] = fromUserCoordinate(closestSegment[0], projection);\n                tempSegment[1] = fromUserCoordinate(closestSegment[1], projection);\n                vertex = toUserCoordinate(closestOnSegment(projectedCoordinate, tempSegment), projection);\n            }\n            vertexPixel = map.getPixelFromCoordinate(vertex);\n            if (coordinateDistance(pixel, vertexPixel) <= this.pixelTolerance_) {\n                snapped = true;\n                if (this.vertex_ && !isCircle) {\n                    var pixel1 = map.getPixelFromCoordinate(closestSegment[0]);\n                    var pixel2 = map.getPixelFromCoordinate(closestSegment[1]);\n                    var squaredDist1 = squaredCoordinateDistance(vertexPixel, pixel1);\n                    var squaredDist2 = squaredCoordinateDistance(vertexPixel, pixel2);\n                    var dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n                    if (dist <= this.pixelTolerance_) {\n                        vertex =\n                            squaredDist1 > squaredDist2\n                                ? closestSegment[1]\n                                : closestSegment[0];\n                        vertexPixel = map.getPixelFromCoordinate(vertex);\n                    }\n                }\n            }\n        }\n        if (snapped) {\n            vertexPixel = [Math.round(vertexPixel[0]), Math.round(vertexPixel[1])];\n        }\n        return {\n            snapped: snapped,\n            vertex: vertex,\n            vertexPixel: vertexPixel,\n        };\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @private\n     */\n    Snap.prototype.updateFeature_ = function (feature) {\n        this.removeFeature(feature, false);\n        this.addFeature(feature, false);\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n     * @private\n     */\n    Snap.prototype.writeCircleGeometry_ = function (feature, geometry) {\n        var projection = this.getMap().getView().getProjection();\n        var circleGeometry = geometry;\n        var userProjection = getUserProjection();\n        if (userProjection) {\n            circleGeometry = /** @type {import(\"../geom/Circle.js\").default} */ (circleGeometry.clone().transform(userProjection, projection));\n        }\n        var polygon = fromCircle(circleGeometry);\n        if (userProjection) {\n            polygon.transform(projection, userProjection);\n        }\n        var coordinates = polygon.getCoordinates()[0];\n        for (var i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n            var segment = coordinates.slice(i, i + 2);\n            var segmentData = {\n                feature: feature,\n                segment: segment,\n            };\n            this.rBush_.insert(boundingExtent(segment), segmentData);\n        }\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n     * @private\n     */\n    Snap.prototype.writeGeometryCollectionGeometry_ = function (feature, geometry) {\n        var geometries = geometry.getGeometriesArray();\n        for (var i = 0; i < geometries.length; ++i) {\n            var segmentWriter = this.SEGMENT_WRITERS_[geometries[i].getType()];\n            if (segmentWriter) {\n                segmentWriter(feature, geometries[i]);\n            }\n        }\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @param {import(\"../geom/LineString.js\").default} geometry Geometry.\n     * @private\n     */\n    Snap.prototype.writeLineStringGeometry_ = function (feature, geometry) {\n        var coordinates = geometry.getCoordinates();\n        for (var i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n            var segment = coordinates.slice(i, i + 2);\n            var segmentData = {\n                feature: feature,\n                segment: segment,\n            };\n            this.rBush_.insert(boundingExtent(segment), segmentData);\n        }\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @param {import(\"../geom/MultiLineString.js\").default} geometry Geometry.\n     * @private\n     */\n    Snap.prototype.writeMultiLineStringGeometry_ = function (feature, geometry) {\n        var lines = geometry.getCoordinates();\n        for (var j = 0, jj = lines.length; j < jj; ++j) {\n            var coordinates = lines[j];\n            for (var i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n                var segment = coordinates.slice(i, i + 2);\n                var segmentData = {\n                    feature: feature,\n                    segment: segment,\n                };\n                this.rBush_.insert(boundingExtent(segment), segmentData);\n            }\n        }\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @param {import(\"../geom/MultiPoint.js\").default} geometry Geometry.\n     * @private\n     */\n    Snap.prototype.writeMultiPointGeometry_ = function (feature, geometry) {\n        var points = geometry.getCoordinates();\n        for (var i = 0, ii = points.length; i < ii; ++i) {\n            var coordinates = points[i];\n            var segmentData = {\n                feature: feature,\n                segment: [coordinates, coordinates],\n            };\n            this.rBush_.insert(geometry.getExtent(), segmentData);\n        }\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n     * @private\n     */\n    Snap.prototype.writeMultiPolygonGeometry_ = function (feature, geometry) {\n        var polygons = geometry.getCoordinates();\n        for (var k = 0, kk = polygons.length; k < kk; ++k) {\n            var rings = polygons[k];\n            for (var j = 0, jj = rings.length; j < jj; ++j) {\n                var coordinates = rings[j];\n                for (var i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n                    var segment = coordinates.slice(i, i + 2);\n                    var segmentData = {\n                        feature: feature,\n                        segment: segment,\n                    };\n                    this.rBush_.insert(boundingExtent(segment), segmentData);\n                }\n            }\n        }\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @param {import(\"../geom/Point.js\").default} geometry Geometry.\n     * @private\n     */\n    Snap.prototype.writePointGeometry_ = function (feature, geometry) {\n        var coordinates = geometry.getCoordinates();\n        var segmentData = {\n            feature: feature,\n            segment: [coordinates, coordinates],\n        };\n        this.rBush_.insert(geometry.getExtent(), segmentData);\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @param {import(\"../geom/Polygon.js\").default} geometry Geometry.\n     * @private\n     */\n    Snap.prototype.writePolygonGeometry_ = function (feature, geometry) {\n        var rings = geometry.getCoordinates();\n        for (var j = 0, jj = rings.length; j < jj; ++j) {\n            var coordinates = rings[j];\n            for (var i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n                var segment = coordinates.slice(i, i + 2);\n                var segmentData = {\n                    feature: feature,\n                    segment: segment,\n                };\n                this.rBush_.insert(boundingExtent(segment), segmentData);\n            }\n        }\n    };\n    return Snap;\n}(PointerInteraction));\nexport default Snap;\n//# sourceMappingURL=Snap.js.map","/**\n * @module ol/interaction/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    ACTIVE: 'active',\n};\n//# sourceMappingURL=Property.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseImage\n */\nimport Layer from './Layer.js';\n/**\n * @template {import(\"../source/Image.js\").default} ImageSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}.\n * @property {ImageSourceType} [source] Source for this layer.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Image.js\").default} ImageSourceType\n * @template {import(\"../renderer/Layer.js\").default} RendererType\n * @extends {Layer<ImageSourceType, RendererType>}\n * @api\n */\nvar BaseImageLayer = /** @class */ (function (_super) {\n    __extends(BaseImageLayer, _super);\n    /**\n     * @param {Options<ImageSourceType>} [opt_options] Layer options.\n     */\n    function BaseImageLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, options) || this;\n        return _this;\n    }\n    return BaseImageLayer;\n}(Layer));\nexport default BaseImageLayer;\n//# sourceMappingURL=BaseImage.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Image\n */\nimport BaseImageLayer from './BaseImage.js';\nimport CanvasImageLayerRenderer from '../renderer/canvas/ImageLayer.js';\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Image.js\").default} ImageSourceType\n * @extends {BaseImageLayer<ImageSourceType, CanvasImageLayerRenderer>}\n * @api\n */\nvar ImageLayer = /** @class */ (function (_super) {\n    __extends(ImageLayer, _super);\n    /**\n     * @param {import(\"./BaseImage.js\").Options<ImageSourceType>} [opt_options] Layer options.\n     */\n    function ImageLayer(opt_options) {\n        return _super.call(this, opt_options) || this;\n    }\n    ImageLayer.prototype.createRenderer = function () {\n        return new CanvasImageLayerRenderer(this);\n    };\n    return ImageLayer;\n}(BaseImageLayer));\nexport default ImageLayer;\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/layer/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    OPACITY: 'opacity',\n    VISIBLE: 'visible',\n    EXTENT: 'extent',\n    Z_INDEX: 'zIndex',\n    MAX_RESOLUTION: 'maxResolution',\n    MIN_RESOLUTION: 'minResolution',\n    MAX_ZOOM: 'maxZoom',\n    MIN_ZOOM: 'minZoom',\n    SOURCE: 'source',\n    MAP: 'map',\n};\n//# sourceMappingURL=Property.js.map"],"sourceRoot":""}
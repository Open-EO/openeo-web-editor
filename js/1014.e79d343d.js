"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[1014],{11014:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var s=function(){var e=this,t=e._self._c;return t("div",{ref:"imageViewer",staticClass:"imageViewer",class:{fullscreen:e.fullScreen}},[t("div",{staticClass:"toolbar"},[t("span",{staticClass:"value",attrs:{title:e.valueTitle}},[e._v(e._s(e.valueText))]),t("FullscreenButton",{staticClass:"fullscreen-button",attrs:{element:()=>e.$refs.imageViewer},on:{changed:e.fullscreenToggled}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.loaded,expression:"!loaded"}],staticClass:"noDataMessage"},[t("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Loading image...")]),t("canvas",{ref:"canvas",class:{fullsize:e.fullSize},attrs:{title:e.title},on:{click:e.resize,mousemove:e.getPixelValue,mouseout:e.resetPixelValue,load:e.imageLoaded}})])},a=[],l=i(70937),n=i(58661),u=i(25108);const r={name:"ImageViewer",components:{FullscreenButton:l.Z},props:{data:{type:Object,required:!0}},data(){return{fullScreen:!1,fullSize:!1,img:null,loaded:!1,context:null,value:"-"}},created(){this.img=this.data.getData(),this.img.complete?this.imageLoaded():this.img.onload=this.imageLoaded.bind(this)},mounted(){this.$emit("mounted",this)},computed:{title(){return this.fullScreen?"":this.fullSize?"Click to shrink (fit to screen)":"Click to enlarge (full size)"},valueTitle(){return this.fullScreen||this.fullSize?"":"Show in full size to get precise values"},valueText(){return this.fullScreen||this.fullSize?`Pixel Value: ${this.value}`:`Estimated Pixel Value: ${this.value}`}},methods:{imageLoaded(){this.loaded||(this.$refs.canvas?(this.loaded=!0,this.$refs.canvas.width=this.img.naturalWidth,this.$refs.canvas.height=this.img.naturalHeight,this.context=this.$refs.canvas.getContext("2d"),this.context.drawImage(this.img,0,0)):this.$nextTick((()=>this.imageLoaded())))},fullscreenToggled(e){this.fullScreen=e},resize(){this.fullScreen||(this.fullSize=!this.fullSize)},resetPixelValue(){this.value="-"},getPixelValue(e){try{let t=this.$refs.canvas.getBoundingClientRect(),i=this.img.naturalWidth/t.width,s=this.img.naturalHeight/t.height,a=e.offsetX*i,l=e.offsetY*s,u=this.context.getImageData(Math.ceil(a),Math.ceil(l),1,1).data;this.value=n.Z.displayRGBA(u)}catch(t){this.value="n/a",u.log(t)}}}},h=r;var o=i(1001),c=(0,o.Z)(h,s,a,!1,null,"45178fec",null);const d=c.exports}}]);
//# sourceMappingURL=1014.e79d343d.js.map
"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[7017],{9187:t=>{function e(t,e,n){n=n||2;var o,r,a,h,c,d,u,g=e&&e.length,p=g?e[0]*n:t.length,v=i(t,0,p,n,!0),m=[];if(!v||v.next===v.prev)return m;if(g&&(v=l(t,e,v,n)),t.length>80*n){o=a=t[0],r=h=t[1];for(var y=n;y<p;y+=n)c=t[y],d=t[y+1],c<o&&(o=c),d<r&&(r=d),c>a&&(a=c),d>h&&(h=d);u=Math.max(a-o,h-r),u=0!==u?32767/u:0}return s(v,m,n,o,r,u,0),m}function i(t,e,i,n,s){var o,r;if(s===P(t,e,i,n)>0)for(o=e;o<i;o+=n)r=b(o,t[o],t[o+1],r);else for(o=i-n;o>=e;o-=n)r=b(o,t[o],t[o+1],r);return r&&E(r,r.next)&&(N(r),r=r.next),r}function n(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!E(n,n.next)&&0!==L(n.prev,n,n.next))n=n.next;else{if(N(n),n=e=n.prev,n===n.next)break;i=!0}}while(i||n!==e);return e}function s(t,e,i,l,c,d,u){if(t){!u&&d&&p(t,l,c,d);var g,v,m=t;while(t.prev!==t.next)if(g=t.prev,v=t.next,d?r(t,l,c,d):o(t))e.push(g.i/i|0),e.push(t.i/i|0),e.push(v.i/i|0),N(t),t=v.next,m=v.next;else if(t=v,t===m){u?1===u?(t=a(n(t),e,i),s(t,e,i,l,c,d,2)):2===u&&h(t,e,i,l,c,d):s(n(t),e,i,l,c,d,1);break}}}function o(t){var e=t.prev,i=t,n=t.next;if(L(e,i,n)>=0)return!1;var s=e.x,o=i.x,r=n.x,a=e.y,h=i.y,l=n.y,c=s<o?s<r?s:r:o<r?o:r,d=a<h?a<l?a:l:h<l?h:l,u=s>o?s>r?s:r:o>r?o:r,g=a>h?a>l?a:l:h>l?h:l,p=n.next;while(p!==e){if(p.x>=c&&p.x<=u&&p.y>=d&&p.y<=g&&_(s,a,o,h,r,l,p.x,p.y)&&L(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function r(t,e,i,n){var s=t.prev,o=t,r=t.next;if(L(s,o,r)>=0)return!1;var a=s.x,h=o.x,l=r.x,c=s.y,d=o.y,u=r.y,g=a<h?a<l?a:l:h<l?h:l,p=c<d?c<u?c:u:d<u?d:u,v=a>h?a>l?a:l:h>l?h:l,y=c>d?c>u?c:u:d>u?d:u,f=m(g,p,e,i,n),E=m(v,y,e,i,n),x=t.prevZ,w=t.nextZ;while(x&&x.z>=f&&w&&w.z<=E){if(x.x>=g&&x.x<=v&&x.y>=p&&x.y<=y&&x!==s&&x!==r&&_(a,c,h,d,l,u,x.x,x.y)&&L(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,w.x>=g&&w.x<=v&&w.y>=p&&w.y<=y&&w!==s&&w!==r&&_(a,c,h,d,l,u,w.x,w.y)&&L(w.prev,w,w.next)>=0)return!1;w=w.nextZ}while(x&&x.z>=f){if(x.x>=g&&x.x<=v&&x.y>=p&&x.y<=y&&x!==s&&x!==r&&_(a,c,h,d,l,u,x.x,x.y)&&L(x.prev,x,x.next)>=0)return!1;x=x.prevZ}while(w&&w.z<=E){if(w.x>=g&&w.x<=v&&w.y>=p&&w.y<=y&&w!==s&&w!==r&&_(a,c,h,d,l,u,w.x,w.y)&&L(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function a(t,e,i){var s=t;do{var o=s.prev,r=s.next.next;!E(o,r)&&x(o,s,s.next,r)&&C(o,r)&&C(r,o)&&(e.push(o.i/i|0),e.push(s.i/i|0),e.push(r.i/i|0),N(s),N(s.next),s=t=r),s=s.next}while(s!==t);return n(s)}function h(t,e,i,o,r,a){var h=t;do{var l=h.next.next;while(l!==h.prev){if(h.i!==l.i&&f(h,l)){var c=I(h,l);return h=n(h,h.next),c=n(c,c.next),s(h,e,i,o,r,a,0),void s(c,e,i,o,r,a,0)}l=l.next}h=h.next}while(h!==t)}function l(t,e,n,s){var o,r,a,h,l,u=[];for(o=0,r=e.length;o<r;o++)a=e[o]*s,h=o<r-1?e[o+1]*s:t.length,l=i(t,a,h,s,!1),l===l.next&&(l.steiner=!0),u.push(y(l));for(u.sort(c),o=0;o<u.length;o++)n=d(u[o],n);return n}function c(t,e){return t.x-e.x}function d(t,e){var i=u(t,e);if(!i)return e;var s=I(i,t);return n(s,s.next),n(i,i.next)}function u(t,e){var i,n=e,s=t.x,o=t.y,r=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=s&&a>r&&(r=a,i=n.x<n.next.x?n:n.next,a===s))return i}n=n.next}while(n!==e);if(!i)return null;var h,l=i,c=i.x,d=i.y,u=1/0;n=i;do{s>=n.x&&n.x>=c&&s!==n.x&&_(o<d?s:r,o,c,d,o<d?r:s,o,n.x,n.y)&&(h=Math.abs(o-n.y)/(s-n.x),C(n,t)&&(h<u||h===u&&(n.x>i.x||n.x===i.x&&g(i,n)))&&(i=n,u=h)),n=n.next}while(n!==l);return i}function g(t,e){return L(t.prev,t,e.prev)<0&&L(e.next,t,t.next)<0}function p(t,e,i,n){var s=t;do{0===s.z&&(s.z=m(s.x,s.y,e,i,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,v(s)}function v(t){var e,i,n,s,o,r,a,h,l=1;do{i=t,t=null,o=null,r=0;while(i){for(r++,n=i,a=0,e=0;e<l;e++)if(a++,n=n.nextZ,!n)break;h=l;while(a>0||h>0&&n)0!==a&&(0===h||!n||i.z<=n.z)?(s=i,i=i.nextZ,a--):(s=n,n=n.nextZ,h--),o?o.nextZ=s:t=s,s.prevZ=o,o=s;i=n}o.nextZ=null,l*=2}while(r>1);return t}function m(t,e,i,n,s){return t=(t-i)*s|0,e=(e-n)*s|0,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function y(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function _(t,e,i,n,s,o,r,a){return(s-r)*(e-a)>=(t-r)*(o-a)&&(t-r)*(n-a)>=(i-r)*(e-a)&&(i-r)*(o-a)>=(s-r)*(n-a)}function f(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!R(t,e)&&(C(t,e)&&C(e,t)&&T(t,e)&&(L(t.prev,t,e.prev)||L(t,e.prev,e))||E(t,e)&&L(t.prev,t,t.next)>0&&L(e.prev,e,e.next)>0)}function L(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,i,n){var s=Z(L(t,e,i)),o=Z(L(t,e,n)),r=Z(L(i,n,t)),a=Z(L(i,n,e));return s!==o&&r!==a||(!(0!==s||!w(t,i,e))||(!(0!==o||!w(t,n,e))||(!(0!==r||!w(i,t,n))||!(0!==a||!w(i,e,n)))))}function w(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Z(t){return t>0?1:t<0?-1:0}function R(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&x(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function C(t,e){return L(t.prev,t,t.next)<0?L(t,e,t.next)>=0&&L(t,t.prev,e)>=0:L(t,e,t.prev)<0||L(t,t.next,e)<0}function T(t,e){var i=t,n=!1,s=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!==i.next.y>o&&i.next.y!==i.y&&s<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}function I(t,e){var i=new S(t.i,t.x,t.y),n=new S(e.i,e.x,e.y),s=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=s,s.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function b(t,e,i,n){var s=new S(t,e,i);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function N(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,i,n){for(var s=0,o=e,r=i-n;o<i;o+=n)s+=(t[r]-t[o])*(t[o+1]+t[r+1]),r=o;return s}t.exports=e,t.exports["default"]=e,e.deviation=function(t,e,i,n){var s=e&&e.length,o=s?e[0]*i:t.length,r=Math.abs(P(t,0,o,i));if(s)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,c=a<h-1?e[a+1]*i:t.length;r-=Math.abs(P(t,l,c,i))}var d=0;for(a=0;a<n.length;a+=3){var u=n[a]*i,g=n[a+1]*i,p=n[a+2]*i;d+=Math.abs((t[u]-t[p])*(t[g+1]-t[u+1])-(t[u]-t[g])*(t[p+1]-t[u+1]))}return 0===r&&0===d?0:Math.abs((d-r)/r)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,s=0;s<t.length;s++){for(var o=0;o<t[s].length;o++)for(var r=0;r<e;r++)i.vertices.push(t[s][o][r]);s>0&&(n+=t[s-1].length,i.holes.push(n))}return i}},23989:(t,e,i)=>{i.d(e,{Z:()=>g});var n=i(62706),s=i(88775),o=i(41666),r=i(92371),a=i(19586),h=i(35214),l=i(42429),c=i(28641),d=i(43762),u=class extends s["default"]{constructor(t){t=t||{};var e=d.Z.create("DIV",{className:t.switcherClass||"ol-layerswitcher"});super({element:e,target:t.target});var i=this;this.dcount=0,this.show_progress=t.show_progress,this.oninfo="function"==typeof t.oninfo?t.oninfo:null,this.onextent="function"==typeof t.onextent?t.onextent:null,this.hasextent=t.extent||t.onextent,this.hastrash=t.trash,this.reordering=!1!==t.reordering,this._layers=[],this._layerGroup=t.layerGroup&&t.layerGroup.getLayers?t.layerGroup:null,this.onchangeCheck="function"==typeof t.onchangeCheck?t.onchangeCheck:null,"function"===typeof t.displayInLayerSwitcher&&(this.displayInLayerSwitcher=t.displayInLayerSwitcher),t.target||(e.classList.add("ol-unselectable"),e.classList.add("ol-control"),e.classList.add(!1!==t.collapsed?"ol-collapsed":"ol-forceopen"),this.button=d.Z.create("BUTTON",{type:"button",parent:e}),this.button.addEventListener("touchstart",(function(t){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:e.classList.contains("ol-collapsed")}),t.preventDefault(),i.overflow()})),this.button.addEventListener("click",(function(){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!e.classList.contains("ol-forceopen")}),i.overflow()})),t.mouseover&&(e.addEventListener("mouseleave",(function(){e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!0})})),e.addEventListener("mouseover",(function(){e.classList.remove("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!1})}))),t.minibar&&(t.noScroll=!0),t.noScroll||(this.topv=d.Z.create("DIV",{className:"ol-switchertopdiv",parent:e,click:function(){i.overflow("+50%")}}),this.botv=d.Z.create("DIV",{className:"ol-switcherbottomdiv",parent:e,click:function(){i.overflow("-50%")}})),this._noScroll=t.noScroll),this.panel_=d.Z.create("UL",{className:"panel"}),this.panelContainer_=d.Z.create("DIV",{className:"panel-container",html:this.panel_,parent:e}),t.target||t.noScroll||d.Z.addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",(function(t){i.overflow(Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)))&&(t.stopPropagation(),t.preventDefault())})),this.header_=d.Z.create("LI",{className:"ol-header",parent:this.panel_}),this.set("drawDelay",t.drawDelay||0),this.set("selection",t.selection),t.minibar&&setTimeout(function(){var t=d.Z.scrollDiv(this.panelContainer_,{mousewheel:!0,vertical:!0,minibar:!0});this.on(["drawlist","toggle"],(function(){t.refresh()}))}.bind(this))}displayInLayerSwitcher(t){return!1!==t.get("displayInLayerSwitcher")}setMap(t){if(super.setMap(t),this.drawPanel(),this._listener)for(var e in this._listener)(0,n.B)(this._listener[e]);this._listener=null,t&&(this._listener={moveend:t.on("moveend",this.viewChange.bind(this)),size:t.on("change:size",this.overflow.bind(this))},this._layerGroup?this._listener.change=this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):this._listener.change=t.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))}show(){this.element.classList.add("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!1})}hide(){this.element.classList.remove("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!0})}toggle(){this.element.classList.toggle("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!this.isOpen()})}isOpen(){return this.element.classList.contains("ol-forceopen")}setHeader(t){d.Z.setHTML(this.header_,t)}overflow(t){if(this.button&&!this._noScroll){if(d.Z.hidden(this.panel_))return void d.Z.setStyle(this.element,{height:"auto"});var e=d.Z.outerHeight(this.element),i=d.Z.outerHeight(this.panel_),n=this.button.offsetTop+d.Z.outerHeight(this.button),s=this.panel_.offsetTop-n;if(i>e-n){d.Z.setStyle(this.element,{height:"100%"});var o=this.panel_.querySelectorAll("li.ol-visible .li-content")[0],r=o?2*d.Z.getStyle(o,"height"):0;switch(t){case 1:s+=r;break;case-1:s-=r;break;case"+50%":s+=Math.round(e/2);break;case"-50%":s-=Math.round(e/2);break;default:break}return s+i<=e-3*n/2?(s=e-3*n/2-i,d.Z.hide(this.botv)):d.Z.show(this.botv),s>=0?(s=0,d.Z.hide(this.topv)):d.Z.show(this.topv),d.Z.setStyle(this.panel_,{top:s+"px"}),!0}return d.Z.setStyle(this.element,{height:"auto"}),d.Z.setStyle(this.panel_,{top:0}),d.Z.hide(this.botv),d.Z.hide(this.topv),!1}return!1}_setLayerForLI(t,e){var i=[];e.getLayers&&i.push(e.getLayers().on("change:length",this.drawPanel.bind(this))),t&&(i.push(e.on("change:opacity",function(){this.setLayerOpacity(e,t)}.bind(this))),i.push(e.on("change:visible",function(){this.setLayerVisibility(e,t)}.bind(this)))),i.push(e.on("propertychange",function(t){"displayInLayerSwitcher"!==t.key&&"openInLayerSwitcher"!==t.key&&"title"!==t.key&&"name"!==t.key||this.drawPanel(t)}.bind(this))),this._layers.push({li:t,layer:e,listeners:i})}setLayerOpacity(t,e){var i=e.querySelector(".layerswitcher-opacity-cursor");i&&(i.style.left=100*t.getOpacity()+"%"),this.dispatchEvent({type:"layer:opacity",layer:t})}setLayerVisibility(t,e){var i=e.querySelector(".ol-visibility");i&&(i.checked=t.getVisible()),t.getVisible()?e.classList.add("ol-visible"):e.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:t})}_clearLayerForLI(){this._layers.forEach((function(t){t.listeners.forEach((function(t){(0,n.B)(t)}))})),this._layers=[]}_getLayerForLI(t){for(var e,i=0;e=this._layers[i];i++)if(e.li===t)return e.layer;return null}viewChange(){this.panel_.querySelectorAll("li").forEach(function(t){var e=this._getLayerForLI(t);e&&(this.testLayerVisibility(e)?t.classList.remove("ol-layer-hidden"):t.classList.add("ol-layer-hidden"))}.bind(this))}getPanel(){return this.panelContainer_}drawPanel(){if(this.getMap()){var t=this;this.dcount++,setTimeout((function(){t.drawPanel_()}),this.get("drawDelay")||0)}}drawPanel_(){if(!--this.dcount&&!this.dragging_){var t=this.panelContainer_.scrollTop;this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach(function(t){t.classList.contains("ol-header")||t.remove()}.bind(this)),this._layerGroup?this.drawList(this.panel_,this._layerGroup.getLayers()):this.getMap()&&this.drawList(this.panel_,this.getMap().getLayers()),this.panelContainer_.scrollTop=t}}switchLayerVisibility(t,e){t.get("baseLayer")?(t.getVisible()||t.setVisible(!0),e.forEach((function(e){t!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)}))):t.setVisible(!t.getVisible())}testLayerVisibility(t){if(!this.getMap())return!0;var e=this.getMap().getView().getResolution(),i=this.getMap().getView().getZoom();if(t.getMaxResolution()<=e||t.getMinResolution()>=e)return!1;if(t.getMinZoom&&(t.getMinZoom()>=i||t.getMaxZoom()<i))return!1;var n=t.getExtent();if(n){var s=this.getMap().getView().calculateExtent(this.getMap().getSize());return(0,c.kK)(s,n)}return!0}dragOrdering_(t){t.stopPropagation(),t.preventDefault();var e,i,n,s,o,r=this,a=t.currentTarget.parentNode.parentNode,h=!0,l=this.panel_,c=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY;function u(){if(i){var t=s,e=r.getSelection()===t;if(t&&i){var h;h=o?o.getLayers():r._layerGroup?r._layerGroup.getLayers():r.getMap().getLayers();for(var l=h.getArray(),c=0;c<l.length;c++)if(l[c]==t){h.removeAt(c);break}for(var p=0;p<l.length;p++)if(l[p]===i){c>p?h.insertAt(p,t):h.insertAt(p+1,t);break}}e&&r.selectLayer(t),r.dispatchEvent({type:"reorder-end",layer:t,group:o})}a.parentNode.querySelectorAll("li").forEach((function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")})),a.classList.remove("drag"),a.parentNode.classList.remove("drag"),r.element.classList.remove("drag"),n&&n.remove(),d.Z.removeListener(document,"mousemove touchmove",g),d.Z.removeListener(document,"mouseup touchend touchcancel",u)}function g(t){if(e=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY,h&&Math.abs(c-e)>2&&(h=!1,a.classList.add("drag"),s=r._getLayerForLI(a),i=!1,o=r._getLayerForLI(a.parentNode.parentNode),n=d.Z.create("LI",{className:"ol-dragover",html:a.innerHTML,style:{position:"absolute","z-index":1e4,left:a.offsetLeft,opacity:.5,width:d.Z.outerWidth(a),height:d.Z.getStyle(a,"height")},parent:l}),r.element.classList.add("drag"),r.dispatchEvent({type:"reorder-start",layer:s,group:o})),!h){var u;t.preventDefault(),t.stopPropagation(),d.Z.setStyle(n,{top:e-d.Z.offsetRect(l).top+l.scrollTop+5}),u=t.touches?document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY):t.target,u.classList.contains("ol-switcherbottomdiv")?r.overflow(-1):u.classList.contains("ol-switchertopdiv")&&r.overflow(1);while(u&&"LI"!==u.tagName)u=u.parentNode;u&&u.classList.contains("dropover")||a.parentNode.querySelectorAll("li").forEach((function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")})),u&&u.parentNode.classList.contains("drag")&&u!==a?(i=r._getLayerForLI(u),i&&!i.get("allwaysOnTop")==!s.get("allwaysOnTop")?(u.classList.add("dropover"),u.classList.add(a.offsetTop<u.offsetTop?"dropover-after":"dropover-before")):i=!1,d.Z.show(n)):(i=!1,u===a?d.Z.hide(n):d.Z.show(n)),i?n.classList.remove("forbidden"):n.classList.add("forbidden")}}a.parentNode.classList.add("drag"),d.Z.addListener(document,"mousemove touchmove",g),d.Z.addListener(document,"mouseup touchend touchcancel",u)}dragOpacity_(t){t.stopPropagation(),t.preventDefault();var e=this,i=t.target,n=this._getLayerForLI(i.parentNode.parentNode.parentNode);if(n){var s=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,o=d.Z.getStyle(i,"left")-s;e.dragging_=!0,d.Z.addListener(document,"mouseup touchend touchcancel",r),d.Z.addListener(document,"mousemove touchmove",a)}function r(){d.Z.removeListener(document,"mouseup touchend touchcancel",r),d.Z.removeListener(document,"mousemove touchmove",a),e.dragging_=!1}function a(t){var e=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,s=(o+e)/d.Z.getStyle(i.parentNode,"width"),r=Math.max(0,Math.min(1,s));d.Z.setStyle(i,{left:100*r+"%"}),i.parentNode.nextElementSibling.innerHTML=Math.round(100*r),n.setOpacity(r)}}drawList(t,e){var i=this,n=e.getArray(),s=function(t){t.stopPropagation(),t.preventDefault();var n=i._getLayerForLI(this.parentNode.parentNode);i.switchLayerVisibility(n,e),i.get("selection")&&n.getVisible()&&i.selectLayer(n),i.onchangeCheck&&i.onchangeCheck(n)};function r(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.oninfo(e),i.dispatchEvent({type:"info",layer:e})}function a(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.onextent?i.onextent(e):i.getMap().getView().fit(e.getExtent(),i.getMap().getSize()),i.dispatchEvent({type:"extent",layer:e})}function h(t){t.stopPropagation(),t.preventDefault();var e,n=this.parentNode.parentNode.parentNode.parentNode,s=i._getLayerForLI(n);s?(e=i._getLayerForLI(this.parentNode.parentNode),s.getLayers().remove(e),0!=s.getLayers().getLength()||s.get("noSwitcherDelete")||h.call(n.querySelectorAll(".layerTrash")[0],t)):(n=this.parentNode.parentNode,i.getMap().removeLayer(i._getLayerForLI(n)))}function l(e){if(this.displayInLayerSwitcher(e)){var l=d.Z.create("LI",{className:(e.getVisible()?"ol-visible ":" ")+(e.get("baseLayer")?"baselayer":""),parent:t});this._setLayerForLI(l,e),this._selectedLayer===e&&l.classList.add("ol-layer-select");var u=d.Z.create("DIV",{className:"ol-layerswitcher-buttons",parent:l}),g=d.Z.create("DIV",{className:"li-content",parent:l});d.Z.create("INPUT",{type:e.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:e.getVisible(),click:s,parent:g});var p=d.Z.create("LABEL",{title:e.get("title")||e.get("name"),click:s,style:{userSelect:"none"},parent:g});if(p.addEventListener("selectstart",(function(){return!1})),d.Z.create("SPAN",{html:e.get("title")||e.get("name"),click:function(t){this.get("selection")&&(t.stopPropagation(),this.selectLayer(e))}.bind(this),parent:p}),this.reordering&&(c<n.length-1&&(e.get("allwaysOnTop")||!n[c+1].get("allwaysOnTop"))||c>0&&(!e.get("allwaysOnTop")||n[c-1].get("allwaysOnTop")))&&d.Z.create("DIV",{className:"layerup ol-noscroll",title:this.tip.up,on:{"mousedown touchstart":function(t){i.dragOrdering_(t)}},parent:u}),e.getLayers){var v=0;e.getLayers().forEach((function(t){i.displayInLayerSwitcher(t)&&v++})),v&&d.Z.create("DIV",{className:e.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var t=i._getLayerForLI(this.parentNode.parentNode);t.set("openInLayerSwitcher",!t.get("openInLayerSwitcher"))},parent:u})}if(this.oninfo&&d.Z.create("DIV",{className:"layerInfo",title:this.tip.info,click:r,parent:u}),this.hastrash&&!e.get("noSwitcherDelete")&&d.Z.create("DIV",{className:"layerTrash",title:this.tip.trash,click:h,parent:u}),this.hasextent&&n[c].getExtent()){var m=n[c].getExtent();4==m.length&&m[0]<m[2]&&m[1]<m[3]&&d.Z.create("DIV",{className:"layerExtent",title:this.tip.extent,click:a,parent:u})}if(this.show_progress&&e instanceof o.Z){var y=d.Z.create("DIV",{className:"layerswitcher-progress",parent:g});this.setprogress_(e),e.layerswitcher_progress=d.Z.create("DIV",{parent:y})}var _=d.Z.create("DIV",{className:"layerswitcher-opacity",click:function(t){if(t.target===this){t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(1,t.offsetX/d.Z.getStyle(this,"width")));i._getLayerForLI(this.parentNode.parentNode).setOpacity(e),this.parentNode.querySelectorAll(".layerswitcher-opacity-label")[0].innerHTML=Math.round(100*e)}},parent:g});if(d.Z.create("DIV",{className:"layerswitcher-opacity-cursor ol-noscroll",style:{left:100*e.getOpacity()+"%"},on:{"mousedown touchstart":function(t){i.dragOpacity_(t)}},parent:_}),d.Z.create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(100*e.getOpacity()),parent:g}),e.getLayers&&(l.classList.add("ol-layer-group"),!0===e.get("openInLayerSwitcher"))){var f=d.Z.create("UL",{parent:l});this.drawList(f,e.getLayers())}l.classList.add(this.getLayerClass(e)),this.dispatchEvent({type:"drawlist",layer:e,li:l})}else this._setLayerForLI(null,e)}for(var c=n.length-1;c>=0;c--)l.call(this,n[c]);this.viewChange(),t===this.panel_&&this.overflow()}getLayerClass(t){return t?t.getLayers?"ol-layer-group":t instanceof r["default"]?"ol-layer-vector":t instanceof a.Z?"ol-layer-vectortile":t instanceof o.Z?"ol-layer-tile":t instanceof h.Z?"ol-layer-image":t instanceof l.Z?"ol-layer-heatmap":t.getFeatures?"ol-layer-vectorimage":"unknown":"none"}selectLayer(t,e){if(!t){if(!this.getMap())return;t=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=t,this.drawPanel(),e||this.dispatchEvent({type:"select",layer:t})}getSelection(){return this._selectedLayer}setprogress_(t){if(!t.layerswitcher_progress){var e=0,i=0,n=function(){i===e?(i=e=0,d.Z.setStyle(t.layerswitcher_progress,{width:0})):d.Z.setStyle(t.layerswitcher_progress,{width:(e/i*100).toFixed(1)+"%"})};t.getSource().on("tileloadstart",(function(){i++,n()})),t.getSource().on("tileloadend",(function(){e++,n()})),t.getSource().on("tileloaderror",(function(){e++,n()}))}}};u.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"};const g=u},43762:(t,e,i)=>{i.d(e,{Z:()=>g});var n=i(72971);window.ol&&ol.ext&&!ol.ext.input&&(ol.ext.input={});var s=class extends n.Z{constructor(t){t=t||{},super();var e,i=this.input=t.input;i||(i=this.input=document.createElement("INPUT"),t.type&&i.setAttribute("type",t.type),void 0!==t.min&&i.setAttribute("min",t.min),void 0!==t.max&&i.setAttribute("max",t.max),void 0!==t.step&&i.setAttribute("step",t.step),t.parent&&t.parent.appendChild(i)),t.disabled&&(i.disabled=!0),void 0!==t.checked&&(i.checked=!!t.checked),void 0!==t.val&&(i.value=t.val),t.hidden&&(i.style.display="none"),i.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),i.addEventListener("focusout",function(){this.element&&(e&&clearTimeout(e),e=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(t,e){var i=function(i){this.moving=!0,this.element.classList.add("ol-moving");var n=function(i){"pointerup"===i.type&&(document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",n),document.removeEventListener("pointercancel",n),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),i.target===t&&e(i),i.stopPropagation(),i.preventDefault()}.bind(this);document.addEventListener("pointermove",n,!1),document.addEventListener("pointerup",n,!1),document.addEventListener("pointercancel",n,!1),i.stopPropagation(),i.preventDefault()}.bind(this);t.addEventListener("mousedown",i,!1),t.addEventListener("touchstart",i,!1)}setValue(t){void 0!==t&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}};const o=s;var r=class extends o{constructor(t){t=t||{},super(t);var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):void 0!==t.html&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox "+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}};const a=r;var h=class extends a{constructor(t){t=t||{},super(t),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()}};const l=h;var c=class extends a{constructor(t){t=t||{},super(t),this.element.className=("ol-ext-check ol-ext-radio "+(t.className||"")).trim()}};const d=c;var u={create:function(t,e){var i;if(e=e||{},"TEXT"===t)i=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(i);else for(var n in i=document.createElement(t),/button/i.test(t)&&i.setAttribute("type","button"),e)switch(n){case"className":e.className&&e.className.trim&&i.setAttribute("class",e.className.trim());break;case"text":i.innerText=e.text;break;case"html":e.html instanceof Element?i.appendChild(e.html):void 0!==e.html&&(i.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(i);break;case"options":if(/select/i.test(t))for(var s in e.options)u.create("OPTION",{html:s,value:e.options[s],parent:i});break;case"style":u.setStyle(i,e.style);break;case"change":case"click":u.addListener(i,n,e[n]);break;case"on":for(var o in e.on)u.addListener(i,o,e.on[o]);break;case"checked":i.checked=!!e.checked;break;default:i.setAttribute(n,e[n]);break}return i},createSwitch:function(t){var e=u.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),i=Object.assign({input:e},t||{});return new l(i),e},createCheck:function(t){var e=u.create("INPUT",{name:t.name,type:"radio"===t.type?"radio":"checkbox",on:t.on,parent:t.parent}),i=Object.assign({input:e},t||{});return"radio"===t.type?new d(i):new a(i),e},setHTML:function(t,e){e instanceof Element?t.appendChild(e):void 0!==e&&(t.innerHTML=e)},appendText:function(t,e){t.appendChild(document.createTextNode(e||""))},addListener:function(t,e,i,n){"string"===typeof e&&(e=e.split(" ")),e.forEach((function(e){t.addEventListener(e,i,n)}))},removeListener:function(t,e,i){"string"===typeof e&&(e=e.split(" ")),e.forEach((function(e){t.removeEventListener(e,i)}))},show:function(t){t.style.display=""},hide:function(t){t.style.display="none"},hidden:function(t){return"none"===u.getStyle(t,"display")},toggle:function(t){t.style.display="none"===t.style.display?"":"none"},setStyle:function(t,e){for(var i in e)switch(i){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"===typeof e[i]?t.style[i]=e[i]+"px":t.style[i]=e[i];break;default:t.style[i]=e[i]}},getStyle:function(t,e){var i,n=(t.ownerDocument||document).defaultView;if(n&&n.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),i=n.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()})),i=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(i)))return function(e){var i=t.style.left,n=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft+"px",t.style.left=i,t.runtimeStyle.left=n,e}(i);return/px$/.test(i)?parseInt(i):i},outerHeight:function(t){return t.offsetHeight+u.getStyle(t,"marginBottom")},outerWidth:function(t){return t.offsetWidth+u.getStyle(t,"marginLeft")},offsetRect:function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},getFixedOffset:function(t){var e={left:0,top:0},i=function(t){if(!t)return e;if("absolute"===u.getStyle(t,"position")&&"none"!==u.getStyle(t,"transform")){var n=t.getBoundingClientRect();return e.left+=n.left,e.top+=n.top,e}return i(t.offsetParent)};return i(t.offsetParent)},positionRect:function(t,e){var i=0,n=0,s=function(o){if(o)return i+=o.offsetLeft,n+=o.offsetTop,s(o.offsetParent);var r={top:t.offsetTop+n,left:t.offsetLeft+i};return e&&(r.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,r.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),r.bottom=r.top+t.offsetHeight,r.right=r.top+t.offsetWidth,r};return s(t.offsetParent)},scrollDiv:function(t,e){e=e||{};var i,n,s,o,r,a=!1,h=0,l=0,c="function"===typeof e.onmove?e.onmove:function(){},d=e.vertical?"screenY":"screenX",g=e.vertical?"scrollTop":"scrollLeft",p=!1,v=0,m=function(){r&&(v++,setTimeout(y))},y=function(){if(r){if(v--,v)return;var e=t.clientHeight,i=t.scrollHeight;n=e/i,r.style.height=100*n+"%",r.style.top=t.scrollTop/i*100+"%",o.style.height=e+"px",e>i-.5?o.classList.add("ol-100pc"):o.classList.remove("ol-100pc")}},_=function(e){e.target.classList.contains("ol-noscroll")||(p=!1,a=e[d],l=new Date,t.classList.add("ol-move"),e.preventDefault(),window.addEventListener("pointermove",f),u.addListener(window,["pointerup","pointercancel"],x))},f=function(e){if(!1!==a){var o=(s?-1/n:1)*(a-e[d]);p=p||Math.round(o),t[g]+=o,i=new Date,i-l&&(h=(h+o/(i-l))/2),a=e[d],l=i,o&&c(!0)}else p=!0},L=function(e){var i=e>0?Math.min(100,e/2):Math.max(-100,e/2);e-=i,t[g]+=i,-1<e&&e<1?(p?setTimeout((function(){t.classList.remove("ol-move")})):t.classList.remove("ol-move"),p=!1,c(!1)):setTimeout((function(){L(e)}),40)};if(e.vertical&&e.minibar){var E=function(i){t.removeEventListener("pointermove",E),t.parentNode.classList.add("ol-miniscroll"),r=u.create("DIV"),o=u.create("DIV",{className:"ol-scroll",html:r}),t.parentNode.insertBefore(o,t),r.addEventListener("pointerdown",(function(t){s=!0,_(t)})),e.mousewheel&&(u.addListener(o,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){w(t)})),u.addListener(r,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){w(t)}))),t.parentNode.addEventListener("pointerenter",m),window.addEventListener("resize",m),!1!==i&&m()};t.parentNode?E(!1):t.addEventListener("pointermove",E),t.addEventListener("scroll",(function(){m()}))}t.style["touch-action"]="none",t.style["overflow"]="hidden",t.classList.add("ol-scrolldiv"),u.addListener(t,["pointerdown"],(function(t){s=!1,_(t)})),t.addEventListener("click",(function(e){t.classList.contains("ol-move")&&(e.preventDefault(),e.stopPropagation())}),!0);var x=function(i){l=new Date-l,l>100||s?h=0:l>0&&(h=((h||0)+(a-i[d])/l)/2),L(!1===e.animate?0:200*h),a=!1,h=0,l=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout((function(){t.classList.remove("ol-hasClick")}),500)),s=!1,window.removeEventListener("pointermove",f),u.removeListener(window,["pointerup","pointercancel"],x)},w=function(e){var i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return t.classList.add("ol-move"),t[g]-=30*i,t.classList.remove("ol-move"),!1};return e.mousewheel&&u.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],w),{refresh:m}},dispatchEvent:function(t,e){var i;try{i=new CustomEvent(t)}catch(n){i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,{})}e.dispatchEvent(i)}};const g=u},78714:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(6813),s=i(72971),o=i(42071),r=i(291);const a={LENGTH:"length"};class h extends r.ZP{constructor(t,e,i){super(t),this.element=e,this.index=i}}class l extends s.Z{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){while(this.getLength()>0)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(a.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new h(o.Z.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new h(o.Z.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i)return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new h(o.Z.REMOVE,n,t)),this.dispatchEvent(new h(o.Z.ADD,e,t))}updateLength_(){this.set(a.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===t&&i!==e)throw new n.Z(58)}}const c=l},42071:(t,e,i)=>{i.d(e,{Z:()=>n});const n={ADD:"add",REMOVE:"remove"}},55431:(t,e,i)=>{i.d(e,{Z:()=>s});class n{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const s=n},81090:(t,e,i)=>{i.r(e),i.d(e,{createStyleFunction:()=>h,default:()=>l});var n=i(72971),s=i(85487),o=i(99515),r=i(65818);class a extends n.Z{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"===typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new a(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,r.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=(0,r.oL)(t,s.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?h(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function h(t){if("function"===typeof t)return t;let e;if(Array.isArray(t))e=t;else{(0,o.h)("function"===typeof t.getZIndex,41);const i=t;e=[i]}return function(){return e}}const l=a},18096:(t,e,i)=>{i.d(e,{K:()=>r});var n=i(85487),s=i(40177),o=i(65818);function r(t,e,i){const r=t;let a=!0,h=!1,l=!1;const c=[(0,o.Vx)(r,n.Z.LOAD,(function(){l=!0,h||e()}))];return r.src&&s.Tp?(h=!0,r.decode().then((function(){a&&e()})).catch((function(t){a&&(l?e():i())}))):c.push((0,o.Vx)(r,n.Z.ERROR,i)),function(){a=!1,c.forEach(o.bN)}}},70553:(t,e,i)=>{i.d(e,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},20825:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(94806),s=i(37195),o=i(68326),r=i(18096);class a extends n.Z{constructor(t,e,i,n,s,o){super(t,e,o),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=s.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=s.Z.ERROR,this.unlistenImage_(),this.image_=h(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=s.Z.LOADED:this.state=s.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==s.Z.ERROR&&(this.state=s.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==s.Z.IDLE&&(this.state=s.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,r.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function h(){const t=(0,o.E4)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}const l=a},11230:(t,e,i)=>{i.d(e,{Z:()=>s});class n{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;while(i>0&&this.points_[i+2]>t)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const s=n},79258:(t,e,i)=>{i.d(e,{Z:()=>j});var n=i(72971),s=i(78714),o=i(42071),r=i(24328),a=i(85487),h=i(1295),l=i(68734),c=i(48630),d=i(92217),u=i(44238),g=i(208),p=i(40177),v=i(65818);class m extends g.Z{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=(0,v.oL)(i,u.Z.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,v.oL)(i,u.Z.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(a.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!p.bM&&{passive:!1})}emulateClick_(t){let e=new c.Z(d.Z.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new c.Z(d.Z.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new c.Z(d.Z.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==d.Z.POINTERUP||e.type==d.Z.POINTERCANCEL){delete this.trackedTouches_[i];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=d.Z.POINTERDOWN&&e.type!=d.Z.POINTERMOVE||(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new c.Z(d.Z.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(v.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new c.Z(d.Z.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,v.oL)(t,d.Z.POINTERMOVE,this.handlePointerMove_,this),(0,v.oL)(t,d.Z.POINTERUP,this.handlePointerUp_,this),(0,v.oL)(this.element_,d.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push((0,v.oL)(this.element_.getRootNode(),d.Z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new c.Z(d.Z.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new c.Z(d.Z.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"===typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,v.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(a.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,v.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(v.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const y=m;var _=i(43536),f=i(32126),L=i(63222),E=i(35990),x=i(98771),w=i(22729),Z=i(37195);class R extends w.Z{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){const e=t[0];e.addEventListener(a.Z.CHANGE,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===Z.Z.LOADED||i===Z.Z.ERROR||i===Z.Z.EMPTY){i!==Z.Z.ERROR&&e.removeEventListener(a.Z.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,n,s,o=0;while(this.tilesLoading_<t&&o<e&&this.getCount()>0)n=this.dequeue()[0],s=n.getKey(),i=n.getState(),i!==Z.Z.IDLE||s in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++o,n.load())}}const C=R;function T(t,e,i,n,s){if(!t||!(i in t.wantedTiles))return w.r;if(!t.wantedTiles[i][e.getKey()])return w.r;const o=t.viewState.center,r=n[0]-o[0],a=n[1]-o[1];return 65536*Math.log(s)+Math.sqrt(r*r+a*a)/s}var I=i(86850),b=i(37755),N=i(36885),S=i(6101),P=i(99515),M=i(28641),A=i(83122),O=i(83609),D=i(65537),k=i(63432),V=i(74187),F=i(4307),G=i(68326),z=i(70044);function K(t){t instanceof h.Z?t.setMapInternal(null):t instanceof l.Z&&t.getLayers().forEach(K)}function H(t,e){if(t instanceof h.Z)t.setMapInternal(e);else if(t instanceof l.Z){const i=t.getLayers().getArray();for(let t=0,n=i.length;t<n;++t)H(i[t],e)}}class Y extends n.Z{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=U(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:p.MP,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,S.Ue)(),this.pixelToCoordinateTransform_=(0,S.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||(0,A.c)(),this.interactions=e.interactions||(0,O.c)({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new C(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(L.Z.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(L.Z.VIEW,this.handleViewChanged_),this.addChangeListener(L.Z.SIZE,this.handleSizeChanged_),this.addChangeListener(L.Z.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof I.ZP||t.view.then((function(t){i.setView(new I.ZP(t))})),this.controls.addEventListener(o.Z.ADD,(t=>{t.element.setMap(this)})),this.controls.addEventListener(o.Z.REMOVE,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(o.Z.ADD,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(o.Z.REMOVE,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(o.Z.ADD,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(o.Z.REMOVE,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){const e=this.getLayerGroup().getLayers();e.push(t)}handleLayerAdd_(t){H(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t);i=void 0!==i?i:{};const s=void 0!==i.hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:N.uX,r=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,r,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i}getAllLayers(){const t=[];function e(i){i.forEach((function(i){i instanceof l.Z?e(i.getLayers()):t.push(i)}))}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=void 0!==e?e:{};const n=void 0!==e.layerFilter?e.layerFilter:N.uX,s=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_,i=e.getBoundingClientRect(),n=this.getSize(),s=i.width/n[0],o=i.height/n[1],r="changedTouches"in t?t.changedTouches[0]:t;return[(r.clientX-i.left)/s,(r.clientY-i.top)/o]}getTarget(){return this.get(L.Z.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return(0,k.toUserCoordinate)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?(0,S.nn)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(L.Z.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof s.Z)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){const t=this.getLayerGroup().getLayers();return t}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&&!n.ready)return!0;const s=i.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=(0,k.fromUserCoordinate)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?(0,S.nn)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(L.Z.SIZE)}getView(){return this.get(L.Z.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return T(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new c.Z(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===u.Z.POINTERDOWN||i===a.Z.WHEEL||i===a.Z.KEYDOWN){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,n=e.target;if(this.overlayContainerStopEvent_.contains(n)||!(i===t?t.documentElement:i).contains(n))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.getMap()!==this||!n.getActive()||!this.getTargetElement())continue;const s=n.handleEvent(t);if(!s||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i;if(t){const e=t.viewHints;if(e[b.Z.ANIMATING]||e[b.Z.INTERACTING]){const e=Date.now()-t.time>8;i=e?0:8,n=e?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(x.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(x.Z.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new _.Z(f.Z.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new _.Z(f.Z.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let n=0,s=i.length;n<s;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)(0,v.bN)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(a.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(a.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,G.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"===typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new r.Z(this)),this.mapBrowserEventHandler_=new y(this,this.moveTolerance_);for(const e in d.Z)this.mapBrowserEventHandler_.addEventListener(d.Z[e],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(a.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(a.Z.WHEEL,this.boundHandleBrowserEvent_,!!p.bM&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[(0,v.oL)(t,a.Z.KEYDOWN,this.handleBrowserEvent,this),(0,v.oL)(t,a.Z.KEYPRESS,this.handleBrowserEvent,this)];const i=e.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,v.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,v.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,v.oL)(t,E.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,v.oL)(t,a.Z.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(v.bN),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new l.V("addlayer",t)),this.layerGroupPropertyListenerKeys_=[(0,v.oL)(t,E.Z.PROPERTYCHANGE,this.render,this),(0,v.oL)(t,a.Z.CHANGE,this.render,this),(0,v.oL)(t,"addlayer",this.handleLayerAdd_,this),(0,v.oL)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){const e=this.getLayerGroup().getLayers();return e.remove(t)}handleLayerRemove_(t){K(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(void 0!==e&&(0,F.py)(e)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,M.p8)(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:n,wantedTiles:{},mapId:(0,V.sq)(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=(0,M.p8)(o.nextCenter,o.nextResolution,t,e)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n){const t=!this.previousExtent_||!(0,M.xb)(this.previousExtent_)&&!(0,M.fS)(s.extent,this.previousExtent_);t&&(this.dispatchEvent(new _.Z(f.Z.MOVESTART,this,n)),this.previousExtent_=(0,M.YN)(this.previousExtent_))}const t=this.previousExtent_&&!s.viewHints[b.Z.ANIMATING]&&!s.viewHints[b.Z.INTERACTING]&&!(0,M.fS)(s.extent,this.previousExtent_);t&&(this.dispatchEvent(new _.Z(f.Z.MOVEEND,this,s)),(0,M.d9)(s.extent,this.previousExtent_))}this.dispatchEvent(new _.Z(f.Z.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(f.Z.LOADSTART)||this.hasListener(f.Z.LOADEND)||this.hasListener(x.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new l.V("removelayer",e)),this.set(L.Z.LAYERGROUP,t)}setSize(t){this.set(L.Z.SIZE,t)}setTarget(t){this.set(L.Z.TARGET,t)}setView(t){if(!t||t instanceof I.ZP)return void this.set(L.Z.VIEW,t);this.set(L.Z.VIEW,new I.ZP);const e=this;t.then((function(t){e.setView(new I.ZP(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i["borderLeftWidth"])-parseFloat(i["paddingLeft"])-parseFloat(i["paddingRight"])-parseFloat(i["borderRightWidth"]),s=t.offsetHeight-parseFloat(i["borderTopWidth"])-parseFloat(i["paddingTop"])-parseFloat(i["paddingBottom"])-parseFloat(i["borderBottomWidth"]);isNaN(n)||isNaN(s)||(e=[n,s],!(0,F.py)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&(0,z.ZK)("No map visible because the map container's width or height are 0."))}const i=this.getSize();!e||i&&(0,D.fS)(e,i)||(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}}function U(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"===typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},n=t.layers&&"function"===typeof t.layers.getLayers?t.layers:new l.Z({layers:t.layers});let o,r,a;return i[L.Z.LAYERGROUP]=n,i[L.Z.TARGET]=t.target,i[L.Z.VIEW]=t.view instanceof I.ZP?t.view:new I.ZP,void 0!==t.controls&&(Array.isArray(t.controls)?o=new s.Z(t.controls.slice()):((0,P.h)("function"===typeof t.controls.getArray,47),o=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new s.Z(t.interactions.slice()):((0,P.h)("function"===typeof t.interactions.getArray,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?a=new s.Z(t.overlays.slice()):((0,P.h)("function"===typeof t.overlays.getArray,49),a=t.overlays):a=new s.Z,{controls:o,interactions:r,keyboardEventTarget:e,overlays:a,values:i}}const j=Y},48630:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(43536);class s extends n.Z{constructor(t,e,i,n,s,o){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const o=s},92217:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(85487);const s={SINGLECLICK:"singleclick",CLICK:n.Z.CLICK,DBLCLICK:n.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},43536:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(291);class s extends n.ZP{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}}const o=s},32126:(t,e,i)=>{i.d(e,{Z:()=>n});const n={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},63222:(t,e,i)=>{i.d(e,{Z:()=>n});const n={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},72971:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(291),s=i(35990),o=i(62706),r=i(74187),a=i(69374);class h extends n.ZP{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class l extends o.Z{constructor(t){super(),this.on,this.once,this.un,(0,r.sq)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new h(i,t,e)),i=s.Z.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new h(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const i=n[t];n[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],(0,a.x)(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const c=l},35990:(t,e,i)=>{i.d(e,{Z:()=>n});const n={PROPERTYCHANGE:"propertychange"}},62706:(t,e,i)=>{i.d(e,{B:()=>a,Z:()=>h});var n=i(208),s=i(85487),o=i(65818);class r extends n.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(s.Z.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=(0,o.oL)(this,t[s],e);return n}return(0,o.oL)(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=(0,o.Vx)(this,t[s],e)}else i=(0,o.Vx)(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)a(i);else if(Array.isArray(t))for(let n=0,s=t.length;n<s;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}function a(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)(0,o.bN)(t[e]);else(0,o.bN)(t)}r.prototype.on,r.prototype.once,r.prototype.un;const h=r},94806:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(208),s=i(85487),o=i(37195),r=i(74187),a=i(31015);class h extends n.Z{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(s.Z.CHANGE)}release(){this.state===o.Z.ERROR&&this.setState(o.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==o.Z.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==o.Z.LOADED){t.interimTile=null;break}t.getState()==o.Z.LOADING?e=t:t.getState()==o.Z.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==o.Z.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){(0,r.O3)()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const n=e-i+1e3/60;return n>=this.transition_?1:(0,a.YQ)(n/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const l=h},11702:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(46131),s=i(98634);class o extends n.Z{clear(){while(this.getCount()>0)this.pop().release();super.clear()}expireCache(t){while(this.canExpireCache()){const e=this.peekLast();if(e.getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=(0,s.Ul)(t),i=e[0];this.forEach((t=>{t.tileCoord[0]!==i&&(this.remove((0,s.km)(t.tileCoord)),t.release())}))}}const r=o},2519:(t,e,i)=>{i.d(e,{T:()=>s,Z:()=>o});class n{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function s(t,e,i,s,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=s,o):new n(t,e,i,s)}const o=n},37195:(t,e,i)=>{i.d(e,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},86850:(t,e,i)=>{i.d(e,{ZP:()=>T});var n=i(72971),s=i(37755);const o={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var r=i(94768),a=i(63432),h=i(36885),l=i(91900),c=i(99515),d=i(8427),u=i(33983),g=i(19307),p=i(60828),v=i(31015),m=i(28641),y=i(65537),_=i(2033);const f=0;class L extends n.Z{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.createProjection)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.disableCoordinateWarning)(),t.center&&(t.center=(0,a.fromUserCoordinate)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.fromUserExtent)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in o)delete e[a];this.setProperties(e,!0);const i=w(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=x(t),s=i.constraint,r=Z(t);this.constraints_={center:n,resolution:s,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(n[3]-e[3]+e[1]-n[1]),r=s/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let t=arguments[i];t.center&&(t=Object.assign({},t),t.center=(0,a.fromUserCoordinate)(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=(0,a.fromUserCoordinate)(t.anchor,this.getProjection())),e[i]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"===typeof arguments[i-1]&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const t=arguments[n];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(n===i)return void(e&&E(e,!0));let o=Date.now(),r=this.targetCenter_.slice(),a=this.targetResolution_,h=this.targetRotation_;const l=[];for(;n<i;++n){const t=arguments[n],i={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||v.rd,callback:e};if(t.center&&(i.sourceCenter=r,i.targetCenter=t.center.slice(),r=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=a,i.targetResolution=this.getResolutionForZoom(t.zoom),a=i.targetResolution):t.resolution&&(i.sourceResolution=a,i.targetResolution=t.resolution,a=i.targetResolution),void 0!==t.rotation){i.sourceRotation=h;const e=(0,u.$W)(t.rotation-h+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=h+e,h=i.targetRotation}R(i)?i.complete=!0:o+=i.duration,l.push(i)}this.animations_.push(l),this.setHint(s.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[s.Z.ANIMATING]>0}getInteracting(){return this.hints_[s.Z.INTERACTING]>0}cancelAnimations(){let t;this.setHint(s.Z.ANIMATING,-this.hints_[s.Z.ANIMATING]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&E(i[0].callback,!1),!t)for(let e=0,n=i.length;e<n;++e){const n=i[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let o=!0;for(let i=0,s=n.length;i<s;++i){const s=n[i];if(s.complete)continue;const r=t-s.start;let a=s.duration>0?r/s.duration:1;a>=1?(s.complete=!0,a=1):o=!1;const h=s.easing(a);if(s.sourceCenter){const t=s.sourceCenter[0],e=s.sourceCenter[1],i=s.targetCenter[0],n=s.targetCenter[1];this.nextCenter_=s.targetCenter;const o=t+h*(i-t),r=e+h*(n-e);this.targetCenter_=[o,r]}if(s.sourceResolution&&s.targetResolution){const t=1===h?s.targetResolution:s.sourceResolution+h*(s.targetResolution-s.sourceResolution);if(s.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){const t=1===h?(0,u.$W)(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+h*(s.targetRotation-s.sourceRotation);if(s.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!s.complete)break}if(o){this.animations_[i]=null,this.setHint(s.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=n[0].callback;t&&E(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],(0,l.U1)(i,t-this.getRotation()),(0,l.IH)(i,e)),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),s=this.getResolution();if(void 0!==n&&void 0!==s){const o=e[0]-t*(e[0]-n[0])/s,r=e[1]-t*(e[1]-n[1])/s;i=[o,r]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,a.toUserCoordinate)(t,this.getProjection()):t}getCenterInternal(){return this.get(o.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,a.toUserExtent)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();(0,c.h)(e,1);const i=this.getResolution();(0,c.h)(void 0!==i,2);const n=this.getRotation();return(0,c.h)(void 0!==n,3),(0,m.p8)(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(o.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.fromUserExtent)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=(0,m.dz)(t)/e[0],n=(0,m.Cr)(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(i){const s=e/Math.pow(t,i*n);return s}}getRotation(){return this.get(o.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/e;return function(t){const n=Math.log(i/t)/e/s;return n}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const t=this.getViewportSizeMinusPadding_();n=C(n,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const s=(0,y.h7)(this.resolutions_,t,1);n=s,e=this.resolutions_[s],i=s==this.resolutions_.length-1?2:e/this.resolutions_[s+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=(0,u.uZ)(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,(0,u.uZ)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if((0,c.h)(Array.isArray(t)||"function"===typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,c.h)(!(0,m.xb)(t),25);const e=(0,a.fromUserExtent)(t,this.getProjection());i=(0,_.oJ)(e)}else if("Circle"===t.getType()){const e=(0,a.fromUserExtent)(t.getExtent(),this.getProjection());i=(0,_.oJ)(e),i.rotate(this.getRotation(),(0,m.qg)(e))}else{const e=(0,a.getUserProjection)();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let r=1/0,a=1/0,h=-1/0,l=-1/0;for(let c=0,d=s.length;c<d;c+=o){const t=s[c]*i-s[c+1]*n,e=s[c]*n+s[c+1]*i;r=Math.min(r,t),a=Math.min(a,e),h=Math.max(h,t),l=Math.max(l,e)}return[r,a,h,l]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(r,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,s?0:1);const l=this.getRotation(),c=Math.sin(l),d=Math.cos(l),u=(0,m.qg)(r);u[0]+=(n[1]-n[3])/2*a,u[1]+=(n[0]-n[2])/2*a;const g=u[0]*d-u[1]*c,p=u[1]*d+u[0]*c,v=this.getConstrainedCenter([g,p],a),y=e.callback?e.callback:h.Zn;void 0!==e.duration?this.animateInternal({resolution:a,center:v,duration:e.duration,easing:e.easing},y):(this.targetResolution_=a,this.targetCenter_=v,this.applyTargetState_(!1,!0),E(y,!0))}centerOn(t,e,i){this.centerOnInternal((0,a.fromUserCoordinate)(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(C(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let s;const o=this.padding_;if(o&&t){const r=this.getViewportSizeMinusPadding_(-i),a=C(t,n,[r[0]/2+o[3],r[1]/2+o[0]],e,i);s=[t[0]-a[0],t[1]-a[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.fromUserCoordinate)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.fromUserCoordinate)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.fromUserCoordinate)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,r,s,i,this.calculateCenterShift(this.targetCenter_,r,n,s));this.get(o.ROTATION)!==n&&this.set(o.ROTATION,n),this.get(o.RESOLUTION)!==r&&(this.set(o.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),a&&this.get(o.CENTER)&&(0,l.fS)(this.get(o.CENTER),a)||this.set(o.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const n=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),r=this.constraints_.resolution(this.targetResolution_,n,o),a=this.constraints_.center(this.targetCenter_,r,o,!1,this.calculateCenterShift(this.targetCenter_,r,s,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=s,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===s&&this.getCenterInternal()&&(0,l.fS)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:a,resolution:r,duration:t,easing:v.Vv,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(s.Z.INTERACTING,1)}endInteraction(t,e,i){i=i&&(0,a.fromUserCoordinate)(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(s.Z.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function E(t,e){setTimeout((function(){t(e)}),0)}function x(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,d.s)(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,(0,d.s)(t,!1,!1)}return d.Y}function w(t){let e,i,n;const s=28,o=2;let h=void 0!==t.minZoom?t.minZoom:f,l=void 0!==t.maxZoom?t.maxZoom:s;const c=void 0!==t.zoomFactor?t.zoomFactor:o,d=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,v=(0,a.createProjection)(t.projection,"EPSG:3857"),y=v.getExtent();let _=t.constrainOnlyCenter,L=t.extent;if(d||L||!v.isGlobal()||(_=!1,L=y),void 0!==t.resolutions){const s=t.resolutions;i=s[h],n=void 0!==s[l]?s[l]:s[s.length-1],e=t.constrainResolution?(0,g.gn)(s,u,!_&&L,p):(0,g.Is)(i,n,u,!_&&L,p)}else{const d=y?Math.max((0,m.dz)(y),(0,m.Cr)(y)):360*a.METERS_PER_UNIT.degrees/v.getMetersPerUnit(),E=d/r.S/Math.pow(o,f),x=E/Math.pow(o,s-f);i=t.maxResolution,void 0!==i?h=0:i=E/Math.pow(c,h),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(c,l):E/Math.pow(c,l):x),l=h+Math.floor(Math.log(i/n)/Math.log(c)),n=i/Math.pow(c,l-h),e=t.constrainResolution?(0,g.cA)(c,i,n,u,!_&&L,p):(0,g.Is)(i,n,u,!_&&L,p)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:h,zoomFactor:c}}function Z(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?(0,p.Gw)():!1===e?p.YP:"number"===typeof e?(0,p.gE)(e):p.YP}return p.h$}function R(t){return!(t.sourceCenter&&t.targetCenter&&!(0,l.fS)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function C(t,e,i,n,s){const o=Math.cos(-s);let r=Math.sin(-s),a=t[0]*o-t[1]*r,h=t[1]*o+t[0]*r;a+=(e[0]/2-i[0])*n,h+=(i[1]-e[1]/2)*n,r=-r;const l=a*o-h*r,c=h*o+a*r;return[l,c]}const T=L},37755:(t,e,i)=>{i.d(e,{Z:()=>n});const n={ANIMATING:0,INTERACTING:1}}}]);
//# sourceMappingURL=7017.2d69b9cb.js.map
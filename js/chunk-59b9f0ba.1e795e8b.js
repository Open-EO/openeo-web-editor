(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59b9f0ba"],{"0b4b":function(e,t,s){},1489:function(e,t,s){"use strict";var a=s("60a2");const i={cpu:"CPU usage",memory:"Memory usage",duration:"Wall time",network:"Network Transfer IO",disk:"Storage IO",storage:"Storage space"};t["a"]={computed:{hasUsageMetrics(){return a["a"].size(this.usage)>0}},filters:{usageLabel(e){return i[e]?i[e]:a["a"].prettifyString(e)},usageValue(e){return"number"===typeof e?e.toLocaleString():e}}}},"204e":function(e,t,s){},"3f19":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"log-viewer"},[null===e.logs?s("div",{staticClass:"noDataMessage"},[s("i",{staticClass:"fas fa-spinner fa-spin fa-lg"}),e._v(" Loading logs...")]):s("Logs",{attrs:{logs:e.logs}})],1)},i=[],l=s("025e"),n=s("3115"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vue-component logs"},[e.hasLogs?s("div",{staticClass:"log-container"},[s("div",{staticClass:"log-header"},[null===e.externalSearchTerm?s("SearchBox",{attrs:{placeholder:"Search in Logs",minLength:2},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}):e._e(),s("MultiSelect",{attrs:{multiple:!0,options:e.levels,allowEmpty:!1,taggable:!0,closeOnSelect:!1,placeholder:"Select the log levels shown"},scopedSlots:e._u([{key:"tag",fn:function(t){return[s("span",{key:t.index,staticClass:"multiselect__tag",class:t.option},[s("span",{domProps:{textContent:e._s(t.option)}}),s("i",{staticClass:"multiselect__tag-icon",attrs:{tabindex:"1"},on:{keypress:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.preventDefault(),t.remove(t.option))},mousedown:function(e){return e.preventDefault(),t.remove(t.option)}}})])]}}],null,!1,1224176521),model:{value:e.levelsShown,callback:function(t){e.levelsShown=t},expression:"levelsShown"}})],1),s("ul",{staticClass:"log-body"},e._l(e.logs,(function(t,a){return s("Log",{directives:[{name:"show",rawName:"v-show",value:e.shown[a],expression:"shown[i]"}],key:a,attrs:{log:t,startTime:e.startTime}})})),1)]):s("div",{staticClass:"log-empty"},[e._v("No logs available.")])])},o=[],c=s("60a2"),u=s("4a8e"),h={name:"Logs",components:{Log:u["a"],MultiSelect:()=>s.e("chunk-2d0e97b4").then(s.t.bind(null,"8e5f",7)),SearchBox:()=>Promise.resolve().then(s.bind(null,"2979"))},props:{logs:{type:Array,default:()=>[]},externalSearchTerm:{type:String,default:null}},data(){let e=["debug","info","warning","error"];return{levels:e,levelsShown:e,searchTerm:""}},computed:{shown(){return this.logs.map(e=>!!this.levelsShown.includes(e.level)&&(!(this.searchTerm.length>=2)||c["a"].search(this.searchTerm,e)))},startTime(){if(this.hasLogs){let e=this.logs.find(e=>c["a"].isObject(e)&&"string"===typeof e.time&&e.time.length>10);if(c["a"].isObject(e)&&e.time)return e.time}return null},hasLogs(){return Array.isArray(this.logs)&&this.logs.length>0}},watch:{externalSearchTerm:{immediate:!0,handler(e){this.searchTerm="string"===typeof e?e:""}}},beforeCreate(){c["a"].enableHtmlProps(this)}},g=h,d=(s("60bc"),s("946d"),s("2877")),m=Object(d["a"])(g,r,o,!1,null,null,null),p=m.exports,f={name:"LogViewer",mixins:[n["a"]],components:{Logs:p},props:{data:{type:[Object,Array],required:!0}},data(){return{logs:null,syncTimer:null}},computed:{...l["a"].mapState(["connection"]),isJob(){return l["a"].isObject(this.data)&&"function"===typeof this.data.debugJob},isService(){return l["a"].isObject(this.data)&&"function"===typeof this.data.debugService},logIterator(){return this.isJob?this.data.debugJob():this.isService?this.data.debugService():null}},created(){this.isJob&&this.listen("jobStatusUpdated",this.onJobStatusUpdated)},mounted(){this.$emit("mounted",this)},beforeDestroy(){this.onHide()},methods:{onShow(){this.loadNext(),this.isJob?this.onJobStatusUpdated(this.data):this.isService&&this.startWatcher()},onHide(){this.stopWatcher()},onJobStatusUpdated(e){e===this.data&&"string"===typeof this.data.status&&(l["a"].isActiveJobStatusCode(this.data.status)?this.startWatcher():this.stopWatcher())},startWatcher(){null===this.syncTimer&&(this.syncTimer=setInterval(this.loadNext.bind(this),1e4))},stopWatcher(){null!==this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null)},async loadNext(){try{if(this.logIterator){let e=await this.logIterator.nextLogs();Array.isArray(this.logs)||(this.logs=[]);for(let t of e)this.logs.push(t)}else Array.isArray(this.data)&&!this.logs&&(this.logs=this.data)}catch(e){l["a"].exeption(this,e,"Loading logs failed")}}}},v=f,_=(s("4c8d"),Object(d["a"])(v,a,i,!1,null,null,null));t["default"]=_.exports},"4a8e":function(e,t,s){"use strict";var a=function(){var e,t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"vue-component log-entry",class:(e={},e[t.log.level]=!0,e.expanded=t.expanded,e)},[a("summary",[a("span",{staticClass:"toggle",on:{click:function(e){return t.toggle()}}},[t._v("â–¸")]),a("span",{staticClass:"log-message",on:{click:function(e){!t.expanded&&t.toggle()}}},[t._v(t._s(t.log.message))]),t.log.level?a("ul",{staticClass:"badges small inline"},[t.relativeTime?a("li",{staticClass:"badge time",attrs:{title:t.formattedTime}},[t._v(t._s(t.relativeTime))]):t._e(),a("li",{staticClass:"badge",class:t.log.level},[t._v(t._s(t.log.level))])]):t._e()]),t.expanded?a("ul",{staticClass:"details"},[t.log.code?a("li",[t._v("Code: "+t._s(t.log.code))]):t._e(),Array.isArray(t.log.path)&&t.log.path.length?a("li",[t._v(" Path: "),a("ol",{staticClass:"path"},t._l(t.path,(function(e,s){return a("li",{key:s},[a("strong",[a("code",[t._v("#"+t._s(e.node_id))])]),e.process_id?[a("br"),t._v("Process: "),a("code",[t._v(t._s(e.process_id))]),e.namespace?[t._v(" in namespace "),a("code",[t._v(t._s(e.namespace))])]:t._e(),e.parameter?[a("br"),t._v("Parameter: "),a("code",[t._v(t._s(e.parameter))])]:t._e()]:t._e()],2)})),0)]):t._e(),t.hasData?a("li",[t._v(" Data: "),a("ObjectTree",{attrs:{data:t.log.data}})],1):t._e(),t.hasUsageMetrics?a("li",[t._v(" Usage metrics: "),a("ul",{staticClass:"usage"},t._l(t.usage,(function(e,s){return a("li",{key:s},[a("strong",{staticClass:"metric"},[t._v(t._s(t._f("usageLabel")(s)))]),t._v(": "+t._s(t._f("usageValue")(e.value))+" "),a("span",{staticClass:"unit"},[t._v(t._s(e.unit))])])})),0)]):t._e(),a("li",[t._v("ID: "+t._s(t.log.id))]),Array.isArray(t.log.links)&&t.log.links.length?a("li",[t._v(" Related Resources: "),a("LinkList",{attrs:{links:t.log.links}})],1):t._e()]):t._e()])},i=[],l=s("60a2"),n=s("1489");const r=[{length:1e3,unit:"ms"},{length:60,unit:"s"},{length:60,unit:"m"},{length:24,unit:"h"}];var o={name:"Log",mixins:[n["a"]],components:{LinkList:()=>s.e("chunk-241547dc").then(s.bind(null,"4845")),ObjectTree:()=>s.e("chunk-0b351486").then(s.bind(null,"0a37"))},props:{log:{type:Object,default:()=>[]},startTime:{type:String,default:null}},computed:{hasData(){return"undefined"!==typeof this.log.data},usage(){return this.log.usage},relativeTime(){if(!this.startTime||!this.log.time)return null;if(this.log.time===this.startTime)return l["a"].formatTimestamp(this.log.time);try{let e=new Date(this.startTime),t=new Date(this.log.time),s=t-e,a=[];for(let i of r){let e=s%i.length;if(s-=e,0!==e&&a.push(e+i.unit),s<i.length)break;s/=i.length}return"+"+a.reverse().join(" ")}catch(e){return null}},formattedTime(){return l["a"].formatTimestamp(this.log.time)},path(){return this.log.path.reverse()}},data(){return{expanded:!1}},methods:{toggle(){this.expanded=!this.expanded}}},c=o,u=(s("e6db"),s("2877")),h=Object(u["a"])(c,a,i,!1,null,null,null);t["a"]=h.exports},"4c8d":function(e,t,s){"use strict";s("f7a8")},"60bc":function(e,t,s){"use strict";s("0b4b")},"946d":function(e,t,s){"use strict";s("204e")},e6db:function(e,t,s){"use strict";s("fb85")},f7a8:function(e,t,s){},fb85:function(e,t,s){}}]);
//# sourceMappingURL=chunk-59b9f0ba.1e795e8b.js.map
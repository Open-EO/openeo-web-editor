{"version":3,"file":"js/241.358f59c9.js","mappings":"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","sources":["webpack://@openeo/web-editor/./src/components/modals/Modal.vue","webpack://@openeo/web-editor/src/components/modals/Modal.vue","webpack://@openeo/web-editor/./src/components/modals/Modal.vue?e840","webpack://@openeo/web-editor/./src/components/modals/Modal.vue?5039","webpack://@openeo/web-editor/./src/components/modals/ExpressionModal.vue","webpack://@openeo/web-editor/src/components/modals/ExpressionModal.vue","webpack://@openeo/web-editor/./src/components/modals/ExpressionModal.vue?61f3","webpack://@openeo/web-editor/./src/components/modals/ExpressionModal.vue?b6ae"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal\",style:({'z-index': _vm.zIndex}),on:{\"mousedown\":_vm.backgroundClose}},[_c(_vm.containerTag,{ref:\"container\",tag:\"component\",staticClass:\"modal-container\",class:{smooth: _vm.smooth},style:(_vm.style),on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.submitFunction.apply(null, arguments)}}},[_c('header',{staticClass:\"modal-header\",on:{\"mousedown\":_vm.startMove}},[_vm._t(\"header\",function(){return [_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('span',{staticClass:\"close\",on:{\"click\":_vm.close}},[_c('i',{staticClass:\"fa fa-times\",attrs:{\"aria-hidden\":\"true\"}})])]})],2),_c('main',{staticClass:\"modal-content\"},[_vm._t(\"default\")],2),_c('footer',{staticClass:\"modal-footer\"},[_vm._t(\"footer\",function(){return [(_vm.submitFunction)?_c('button',{attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.submitButtonText))]):_vm._e()]})],2)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"modal\" @mousedown=\"backgroundClose\" :style=\"{'z-index': zIndex}\">\n\t\t<component :is=\"containerTag\" ref=\"container\" class=\"modal-container\" :class=\"{smooth: smooth}\" :style=\"style\" @submit.prevent.stop=\"submitFunction\">\n\t\t\t<header class=\"modal-header\" @mousedown=\"startMove\">\n\t\t\t\t<slot name=\"header\">\n\t\t\t\t\t<h2>{{ title }}</h2>\n\t\t\t\t\t<span class=\"close\" @click=\"close\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></span>\n\t\t\t\t</slot>\n\t\t\t</header>\n\t\t\t<main class=\"modal-content\">\n\t\t\t\t<slot></slot>\n\t\t\t</main>\n\t\t\t<footer class=\"modal-footer\">\n\t\t\t\t<slot name=\"footer\">\n\t\t\t\t\t<button v-if=\"submitFunction\" type=\"submit\">{{ submitButtonText }}</button>\n\t\t\t\t</slot>\n\t\t\t</footer>\n\t\t</component>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from '../EventBusMixin.js';\nimport Utils from '../../utils.js';\n\nexport default {\n\tname: 'Modal',\n\tmixins: [EventBusMixin],\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\tminWidth: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\twidth: {\n\t\t\ttype: String,\n\t\t\tdefault: \"auto\"\n\t\t},\n\t\theight: {\n\t\t\ttype: String,\n\t\t\tdefault: \"auto\"\n\t\t},\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tsubmitFunction: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\tsubmitButtonText: {\n\t\t\ttype: String,\n\t\t\tdefault: 'Submit'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tzIndex: 1000,\n\t\t\tposition: null,\n\t\t\tdragPosition: null,\n\t\t\tsmooth: false\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState('editor', ['hightestModalZIndex']),\n\t\tstyle() {\n\t\t\tlet style = {\n\t\t\t\t'width': this.width\n\t\t\t};\n\t\t\tif (this.minWidth) {\n\t\t\t\tstyle['min-width'] = this.minWidth;\n\t\t\t}\n\t\t\tif (this.height) {\n\t\t\t\tstyle['height'] = this.height;\n\t\t\t}\n\t\t\tif (Array.isArray(this.position)) {\n\t\t\t\tstyle.position = 'absolute';\n\t\t\t\tstyle.left = this.position[0] + 'px';\n\t\t\t\tstyle.top = this.position[1] + 'px';\n\t\t\t}\n\t\t\treturn style;\n\t\t},\n\t\tcontainerTag() {\n\t\t\treturn this.submitFunction ? 'form' : 'div';\n\t\t}\n\t},\n\twatch: {\n\t\tshow: {\n\t\t\timmediate: true,\n\t\t\thandler(show) {\n\t\t\t\tif (!show) {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.open();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twidth() {\n\t\t\tthis.smoothResize();\n\t\t},\n\t\tminWidth() {\n\t\t\tthis.smoothResize();\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['openModal', 'closeModal']),\n\t\tsmoothResize() {\n\t\t\tthis.smooth = true;\n\t\t\tsetTimeout(() => this.smooth = false, 600);\n\t\t},\n\t\tsubmit(event) {\n\t\t\tthis.submitFunction(event);\n\t\t},\n\t\topen() {\n\t\t\tthis.openModal();\n\t\t\tthis.zIndex = this.hightestModalZIndex;\n\t\t\twindow.addEventListener('keydown', this.escCloseListener);\n\t\t\tthis.$emit('shown');\n\t\t},\n\t\tclose() {\n\t\t\twindow.removeEventListener('keydown', this.escCloseListener);\n\t\t\tthis.closeModal();\n\t\t\tthis.$emit('closed');\n\t\t},\n\t\tstartMove(event) {\n\t\t\tif (event.target.tagName !== 'H2') {\n\t\t\t\tthis.dragPosition = [\n\t\t\t\t\tevent.clientX,\n\t\t\t\t\tevent.clientY\n\t\t\t\t];\n\n\t\t\t\tdocument.addEventListener('mousemove', this.move);\n\t\t\t\tdocument.addEventListener('mouseup', this.stopMove);\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tstopMove() {\n\t\t\tdocument.removeEventListener('mousemove', this.move);\n\t\t\tdocument.removeEventListener('mouseup', this.stopMove);\n\t\t},\n\t\tmove(event) {\n\t\t\tevent.preventDefault();\n\t\t\t// set the element's new position\n\t\t\tthis.position = [\n\t\t\t\tthis.$refs.container.offsetLeft - (this.dragPosition[0] - event.clientX),\n\t\t\t\tthis.$refs.container.offsetTop - (this.dragPosition[1] - event.clientY)\n\t\t\t];\n\t\t\t// Store for later\n\t\t\tthis.dragPosition = [\n\t\t\t\tevent.clientX,\n\t\t\t\tevent.clientY\n\t\t\t];\n\t\t},\n\t\tescCloseListener(event) {\n\t\t\tif (event.key == \"Escape\") { \n\t\t\t\tthis.close();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tbackgroundClose(event) {\n\t\t\tif (event.target === this.$el) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\">\n@import '../../../theme.scss';\n\n.modal {\n\tposition: fixed;\n\tz-index: 1000; /* Snotify has 9999 and is intentionally above the modals */\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0,0,0,0.4);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.modal .modal-container {\n\tbackground-color: #fff;\n\tborder: 1px solid #fff;\n\tmin-height: 50vh;\n\tmin-width: 300px;\n\twidth: 70%;\n\tmax-height: 96%;\n\tmax-width: 96%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbox-shadow: 8px 8px 8px 0px rgba(0,0,0,0.3);\n\tresize: both;\n\toverflow: hidden;\n\n\t&.smooth {\n\t\ttransition-timing-function: linear;\n\t\ttransition-property: width, height;\n\t\ttransition-duration: 0.5s;\n\t}\n}\n\n.modal .modal-header {\n\tbackground-color: $mainColor;\n\tcolor: white;\n\tmargin: 0;\n\theight: 1.5rem;\n\tpadding: 1rem;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tcursor: move;\n}\n\n.modal .modal-header h2 {\n\tdisplay: inline-block;\n\tmargin: 0;\n\tmargin-left: -0.5rem;\n\tpadding: 0.5rem;\n\tfont-size: 1.5rem;\n\tborder: 0;\n\tcursor: text;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n}\n\n.modal .modal-content {\n\tpadding: 1rem;\n\toverflow: auto;\n\tflex-grow: 1;\n}\n\n.modal .inline .modal-content {\n\tpadding: 0;\n}\n\n.modal .modal-footer:empty {\n\tdisplay: none;\n}\n\n.modal .modal-footer {\n\tbackground-color: #eee;\n\tmargin: 0;\n\tpadding: 1rem;\n\ttext-align: right;\n}\n\n.modal .close {\n\tfont-size: 1.5rem;\n\theight: 2rem;\n\twidth: 2rem;\n\tcolor: white;\n\tcursor: pointer;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.modal .close:hover, .modal .close:focus {\n\tcolor: red;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Modal.vue?vue&type=template&id=57347c15\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\nimport style0 from \"./Modal.vue?vue&type=style&index=0&id=57347c15&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"show\":_vm.show,\"width\":\"80%\",\"title\":\"Formula Editor\"},on:{\"closed\":function($event){return _vm.$emit('closed')}},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('div',{staticClass:\"content\"},[_c('TextEditor',{ref:\"editor\",staticClass:\"editor\",attrs:{\"id\":\"input\",\"language\":\"math\",\"placeholder\":\"e.g. x * 2.5 / (x - y)\"},on:{\"drop\":_vm.onDrop,\"dragover\":_vm.allowDrop},model:{value:(_vm.input),callback:function ($$v) {_vm.input=$$v},expression:\"input\"}}),_c('div',{staticClass:\"description\"},[_c('p',[_c('i',{staticClass:\"fas fa-info-circle\"}),_vm._v(\" Above you can insert a mathematical formula and it will be converted to openEO code for you.\")]),_c('p',[_c('strong',[_vm._v(\"Operators\")]),_vm._v(\":\"),_c('br'),_vm._l((_vm.operators),function(op){return _c('kbd',{key:op.op,staticClass:\"click\",attrs:{\"title\":op.title,\"draggable\":\"true\"},on:{\"click\":function($event){return _vm.broadcast('showProcess', {id: op.processId})},\"dragstart\":function($event){return _vm.onDrag($event, 'operators', op.op)}}},[_vm._v(_vm._s(op.op))])})],2),_c('p',[_vm._v(\"Supported \"),_c('strong',[_vm._v(\"mathematical functions\")]),_vm._v(\": \"),(_vm.mathProcesses.length)?[_c('br'),_vm._l((_vm.mathProcesses),function(func){return _c('kbd',{key:func.id,staticClass:\"click\",attrs:{\"title\":func.summary,\"draggable\":\"true\"},on:{\"click\":function($event){return _vm.broadcast('showProcess', func)},\"dragstart\":function($event){return _vm.onDrag($event, 'functions', func)}}},[_vm._v(_vm._s(func.id))])})]:[_vm._v(\"None\")]],2),_c('p',[_vm._v(\"Available \"),_c('strong',[_vm._v(\"output from processes\")]),_vm._v(\": \"),(_vm.results.length)?[_c('br'),_vm._l((_vm.results),function(id){return _c('kbd',{key:id,attrs:{\"draggable\":\"true\"},on:{\"dragstart\":function($event){return _vm.onDrag($event, 'results', id)}}},[_vm._v(\"#\"+_vm._s(id))])})]:[_vm._v(\"None\")]],2),_c('p',[_c('strong',[_vm._v(\"Parameters\")]),_vm._v(\": If a variable is found in the formula which can't be resolved to a pre-defined parameter, a new parameter will be created for it. Available pre-defined parameters: \"),(_vm.pgParameters.length)?[_c('br'),_vm._l((_vm.pgParameters),function(param){return _c('kbd',{key:param.id,staticClass:\"click\",attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){return _vm.broadcast('showProcessParameter', param)},\"dragstart\":function($event){return _vm.onDrag($event, 'pgParameters', param.name)}}},[_vm._v(_vm._s(param.name))])})]:[_vm._v(\"None\")]],2),(_vm.supportsArrayElement)?_c('p',[_vm._v(\"If the first pre-defined parameter is a (labeled) \"),_c('strong',[_vm._v(\"array\")]),_vm._v(\", the value for a specific index or label can be accessed by typing the numeric index or textual label with a \"),_c('kbd',[_vm._v(\"$\")]),_vm._v(\" in front, for example \"),_c('kbd',[_vm._v(\"$B1\")]),_vm._v(\" for the label B1 or \"),_c('kbd',[_vm._v(\"$0\")]),_vm._v(\" for the first element in the array. You can access subsequent parameters by adding additional $ characters at the beginning, e.g. \"),_c('kbd',[_vm._v(\"$$0\")]),_vm._v(\" for the first element of an array in the second parameter, \"),_c('kbd',[_vm._v(\"$$$0\")]),_vm._v(\" for the same behavior in the third parameter etc. Numeric labels are not supported.\")]):_vm._e()])],1)]},proxy:true},{key:\"footer\",fn:function(){return [_c('div',{staticClass:\"footer\"},[_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.createResult}},[_vm._v(\"Insert\")])])]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Modal :show=\"show\" width=\"80%\" title=\"Formula Editor\" @closed=\"$emit('closed')\">\n\t\t<template #default>\n\t\t\t<div class=\"content\">\n\t\t\t\t<TextEditor ref=\"editor\" id=\"input\" class=\"editor\" v-model=\"input\" language=\"math\" placeholder=\"e.g. x * 2.5 / (x - y)\" @drop=\"onDrop\" @dragover=\"allowDrop\" />\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p><i  class=\"fas fa-info-circle\"></i> Above you can insert a mathematical formula and it will be converted to openEO code for you.</p>\n\t\t\t\t\t<p><strong>Operators</strong>:<br />\n\t\t\t\t\t\t<kbd v-for=\"op in operators\" :key=\"op.op\" :title=\"op.title\" @click=\"broadcast('showProcess', {id: op.processId})\" class=\"click\" draggable=\"true\" @dragstart=\"onDrag($event, 'operators', op.op)\">{{ op.op }}</kbd>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Supported <strong>mathematical functions</strong>:\n\t\t\t\t\t\t<template v-if=\"mathProcesses.length\">\n\t\t\t\t\t\t\t<br /><kbd v-for=\"func in mathProcesses\" :key=\"func.id\" :title=\"func.summary\" @click=\"broadcast('showProcess', func)\" class=\"click\" draggable=\"true\" @dragstart=\"onDrag($event, 'functions', func)\">{{ func.id }}</kbd>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>None</template>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Available <strong>output from processes</strong>:\n\t\t\t\t\t\t<template v-if=\"results.length\">\n\t\t\t\t\t\t\t<br /><kbd v-for=\"id in results\" :key=\"id\" draggable=\"true\" @dragstart=\"onDrag($event, 'results', id)\">#{{ id }}</kbd> <!-- ToDo: Open non-editable parameter editor or process schema -->\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>None</template>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p><strong>Parameters</strong>: If a variable is found in the formula which can't be resolved to a pre-defined parameter, a new parameter will be created for it. Available pre-defined parameters:\n\t\t\t\t\t\t<template v-if=\"pgParameters.length\">\n\t\t\t\t\t\t\t<br /><kbd v-for=\"param in pgParameters\" :key=\"param.id\" @click=\"broadcast('showProcessParameter', param)\" class=\"click\" draggable=\"true\" @dragstart=\"onDrag($event, 'pgParameters', param.name)\">{{ param.name }}</kbd>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>None</template>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p v-if=\"supportsArrayElement\">If the first pre-defined parameter is a (labeled) <strong>array</strong>, the value for a specific index or label can be accessed by typing the numeric index or textual label with a <kbd>$</kbd> in front, for example <kbd>$B1</kbd> for the label B1 or <kbd>$0</kbd> for the first element in the array. You can access subsequent parameters by adding additional $ characters at the beginning, e.g. <kbd>$$0</kbd> for the first element of an array in the second parameter, <kbd>$$$0</kbd> for the same behavior in the third parameter etc. Numeric labels are not supported.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #footer>\n\t\t\t<div class=\"footer\">\n\t\t\t\t<button type=\"button\" @click=\"createResult\">Insert</button>\n\t\t\t</div>\n\t\t</template>\n\t</Modal>\n</template>\n\n<script>\nimport Modal from './Modal.vue';\nimport Utils from '../../utils.js';\nimport TextEditor from '../TextEditor.vue';\nimport EventBusMixin from '../EventBusMixin.js';\nimport Process from '../../process';\nimport { Formula } from '@openeo/js-client';\n\nexport default {\n\tname: 'ExpressionModal',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tModal,\n\t\tTextEditor\n\t},\n\tprops: {\n\t\tprocess: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({})\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshow: true,\n\t\t\tinput: '',\n\t\t\tarrayElements: {},\n\t\t\tresult: {},\n\t\t\treplace: false\n\t\t};\n\t},\n\tcreated() {\n\t\ttry {\n\t\t\tthis.importFormula();\n\t\t} catch (error) {\n\t\t\tconsole.info(error);\n\t\t}\n\n\t\tthis.arrayElements = {};\n\t\tif(!this.replace) {\n\t\t\t// If not replacing: Add all array_element calls for labels to the list so that we don't get duplicate array_element calls\n\t\t\tfor(let id in this.process.getNodes()) {\n\t\t\t\tlet node = this.process.getNode(id);\n\t\t\t\tif (node.process_id === 'array_element') {\n\t\t\t\t\tlet placeholder = this.process.getArrayElementPlaceholder(node);\n\t\t\t\t\tthis.arrayElements[placeholder] = {from_node: node.id};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapGetters(['processes']),\n\t\tmathProcesses() {\n\t\t\treturn this.processes.getMathProcesses();\n\t\t},\n\t\tpgParameters() {\n\t\t\treturn this.process.getCallbackParameters();\n\t\t},\n\t\toperators() {\n\t\t\tvar ops = [];\n\t\t\tfor(var op in Formula.operatorMapping) {\n\t\t\t\tlet processId = Formula.operatorMapping[op];\n\t\t\t\tlet title = this.processes.get(processId).summary;\n\t\t\t\tops.push({op, processId, title});\n\t\t\t}\n\t\t\treturn ops;\n\t\t},\n\t\tresults() {\n\t\t\tlet resultNodes = [];\n\t\t\tfor(var id in this.process.getNodes()) {\n\t\t\t\tvar node = this.process.getNode(id);\n\t\t\t\tvar p = this.processes.get(node.process_id);\n\t\t\t\tif (Process.isMathProcess(p)) {\n\t\t\t\t\tresultNodes.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn resultNodes;\n\t\t},\n\t\tsupportsArrayElement() {\n\t\t\t// A pg parameter needs to be available\n\t\t\tif (this.pgParameters.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// array_element must be supported\n\t\t\treturn this.processes.has('array_element');\n\t\t}\n\t},\n\tmethods: {\n\t\tonDrag(event, type, data) {\n\t\t\tswitch(type) {\n\t\t\t\tcase 'functions':\n\t\t\t\t\tlet params = (data.parameters || []).map(p => p.name);\n\t\t\t\t\tdata = data.id + '(' + params.join(', ') + ')';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'results':\n\t\t\t\t\tdata = '#' + data;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tevent.dataTransfer.setData(\"text/plain\", data);\n\t\t},\n\t\tallowDrop(event) {\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tonDrop(event) {\n\t\t\tvar text = event.dataTransfer.getData(\"text/plain\");\n\t\t\tif (text) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.$refs.editor.insert(text, false);\n\t\t\t}\n\t\t},\n\t\timportFormula() {\n\t\t\tlet formula = this.process.toFormulaString();\n\t\t\tif (formula) {\n\t\t\t\tthis.input = formula;\n\t\t\t\tthis.replace = true;\n\t\t\t}\n\t\t},\n\t\tcreateResult() {\n\t\t\tif (this.input.length === 0) {\n\t\t\t\tthis.show = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tthis.result = {};\n\t\t\t\tlet formula = new Formula(this.input);\n\t\t\t\tlet res = this.parseTree(formula.tree);\n\t\t\t\tif (!Utils.isObject(res) || !res.from_node) {\n\t\t\t\t\tthrow new Error('Invalid formula specified.');\n\t\t\t\t}\n\t\t\t\t// Set result node\n\t\t\t\tthis.result[res.from_node].result = true;\n\t\t\t\t// Send result\n\t\t\t\tthis.$emit('save', this.result, this.replace);\n\t\t\t\tthis.show = false;\n\t\t\t} catch(e) {\n\t\t\t\tUtils.exception(this, e);\n\t\t\t}\n\t\t},\n\t\tparseTree(tree) {\n\t\t\tlet key = Object.keys(tree)[0]; // There's never more than one property so no loop required\n\t\t\tswitch(key) {\n\t\t\t\tcase 'Number':\n\t\t\t\t\treturn Number.parseFloat(tree.Number);\n\t\t\t\tcase 'Identifier':\n\t\t\t\t\treturn this.getRef(tree.Identifier);\n\t\t\t\tcase 'Expression':\n\t\t\t\t\treturn this.parseTree(tree.Expression);\n\t\t\t\tcase 'FunctionCall':\n\t\t\t\t\tlet args = [];\n\t\t\t\t\tfor(let i in tree.FunctionCall.args) {\n\t\t\t\t\t\targs.push(this.parseTree(tree.FunctionCall.args[i]));\n\t\t\t\t\t}\n\t\t\t\t\treturn this.addProcess(tree.FunctionCall.name, args);\n\t\t\t\tcase 'Binary':\n\t\t\t\t\treturn this.addOperatorProcess(\n\t\t\t\t\t\ttree.Binary.operator,\n\t\t\t\t\t\tthis.parseTree(tree.Binary.left),\n\t\t\t\t\t\tthis.parseTree(tree.Binary.right)\n\t\t\t\t\t);\n\t\t\t\tcase 'Unary':\n\t\t\t\t\tlet val = this.parseTree(tree.Unary.expression);\n\t\t\t\t\tif (tree.Unary.operator === '-') {\n\t\t\t\t\t\tif (typeof val === 'number') {\n\t\t\t\t\t\t\treturn -val;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treturn this.addOperatorProcess('*', -1, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Operation ' + key + ' not supported.');\n\t\t\t}\n\t\t},\n\t\tgetRef(value) {\n\t\t\t// Convert native data types\n\t\t\tif (value === 'true') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (value === 'false') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse if (value === 'null') {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Output of a process\n\t\t\tif (typeof value === 'string' && value.startsWith('#')) {\n\t\t\t\tlet nodeId = value.substring(1);\n\t\t\t\tif (this.results.includes(nodeId)) {\n\t\t\t\t\treturn { from_node: nodeId };\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Array labels / indices\n\t\t\tif (this.supportsArrayElement && typeof value === 'string') {\n\t\t\t\tlet prefix = value.match(/^\\$+/);\n\t\t\t\tlet count = prefix ? prefix[0].length : 0;\n\t\t\t\tif (count > 0) {\n\t\t\t\t\tlet ref = value.substring(count);\n\t\t\t\t\tif (!(value in this.arrayElements)) {\n\t\t\t\t\t\t// ToDo: Check whether label is really supported - see implementation for supportsArrayElement()\n\t\t\t\t\t\tlet args = {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tfrom_parameter: this.pgParameters[count-1].name\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (ref.match(/^\\d+$/)) {\n\t\t\t\t\t\t\targs.index = Number.parseInt(ref, 10);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\targs.label = ref;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.arrayElements[value] = this.addProcess(\"array_element\", args);\n\t\t\t\t\t}\n\t\t\t\t\treturn this.arrayElements[value];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Everything else is a parameter\n\t\t\tif (this.pgParameters.filter(p => p.name === value).length === 0) {\n\t\t\t\t// ToDo: Add new parameter to process\n\t\t\t}\n\t\t\treturn { from_parameter: value };\n\t\t},\n\t\taddOperatorProcess(operator, left, right) {\n\t\t\tif (typeof Formula.operatorMapping[operator] !== 'undefined') {\n\t\t\t\tlet process = this.processes.get(Formula.operatorMapping[operator]);\n\t\t\t\tlet args = {};\n\t\t\t\tif (!process || !Array.isArray(process.parameters) || process.parameters.length < 2) {\n\t\t\t\t\tthrow new Error(\"Process for operator \" + operator + \" must have at least two parameters\");\n\t\t\t\t}\n\t\t\t\targs[process.parameters[0].name || 'x'] = left;\n\t\t\t\targs[process.parameters[1].name || 'y'] = right;\n\t\t\t\treturn this.addProcess(process, args);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error('Operator ' + operator + ' not supported.');\n\t\t\t}\n\t\t},\n\t\taddProcess(process, args) {\n\t\t\tif (typeof process === 'string') {\n\t\t\t\tprocess = this.processes.get(process);\n\t\t\t}\n\n\t\t\tif (!process) {\n\t\t\t\tthrow new Error(\"Process not available: \" + name);\n\t\t\t}\n\t\t\telse if (args.length > Utils.size(process.parameters)) {\n\t\t\t\tthrow new Error(\"Number of given arguments exceeds number of process parameters for process '\" + name + \"'.\");\n\t\t\t}\n\n\t\t\t// Convert arguments array to object\n\t\t\tif (Array.isArray(args)) {\n\t\t\t\tlet namedArgs = {};\n\t\t\t\tfor (let i in args) {\n\t\t\t\t\tlet parameter = process.parameters[i];\n\t\t\t\t\tnamedArgs[parameter.name] = args[i];\n\t\t\t\t}\n\t\t\t\targs = namedArgs;\n\t\t\t}\n\t\t\t// ToDo: Check all arguments against their schemas / check all required fields are given\n\n\t\t\t// Add node to result with unique id\n\t\t\tlet nodeId = Utils.getUniqueId();\n\t\t\tlet node = {\n\t\t\t\tprocess_id: process.id,\n\t\t\t\targuments: args\n\t\t\t};\n\t\t\tthis.result[nodeId] = node;\n\t\t\treturn { from_node: nodeId };\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.content {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n.content .textEditor {\n\tflex-grow: 1;\n}\n.description {\n\tmargin-top: 1rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n}\n.description p {\n\tmargin: 0.5em 0;\n}\n.editor {\n\twidth: 100%;\n\tmin-height: 4em;\n\theight: 10em;\n}\nkbd {\n\tfont-family: Consolas, \"Lucida Console\", monospace;\n\tdisplay: inline-block;\n\tborder-radius: 3px;\n\tpadding: 1px 5px;\n\tbox-shadow: 1px 1px 1px #777;\n\tmargin: 2px;\n\tfont-size: small;\n\tvertical-align: text-bottom;\n\tbackground: #eee;\n\tfont-weight: 600;\n\tcolor: #555;\n\tletter-spacing: 0.25px;\n}\nkbd.click {\n\tcursor: pointer;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExpressionModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExpressionModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ExpressionModal.vue?vue&type=template&id=cc5174a6&scoped=true\"\nimport script from \"./ExpressionModal.vue?vue&type=script&lang=js\"\nexport * from \"./ExpressionModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./ExpressionModal.vue?vue&type=style&index=0&id=cc5174a6&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cc5174a6\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","style","zIndex","on","backgroundClose","containerTag","ref","tag","class","smooth","$event","preventDefault","stopPropagation","submitFunction","apply","arguments","startMove","_t","_v","_s","title","close","attrs","submitButtonText","_e","staticRenderFns","name","mixins","EventBusMixin","props","type","String","default","minWidth","width","height","show","Boolean","Function","data","position","dragPosition","computed","Utils","mapState","Array","isArray","left","top","watch","immediate","handler","open","smoothResize","methods","mapMutations","setTimeout","submit","event","openModal","hightestModalZIndex","window","addEventListener","escCloseListener","$emit","removeEventListener","closeModal","target","tagName","clientX","clientY","document","move","stopMove","$refs","container","offsetLeft","offsetTop","key","$el","component","scopedSlots","_u","fn","onDrop","allowDrop","model","value","input","callback","$$v","expression","_l","operators","op","broadcast","id","processId","onDrag","mathProcesses","length","func","summary","results","pgParameters","param","supportsArrayElement","proxy","createResult","components","Modal","TextEditor","process","Object","arrayElements","result","replace","created","importFormula","error","console","info","getNodes","node","getNode","process_id","placeholder","getArrayElementPlaceholder","from_node","mapGetters","processes","getMathProcesses","getCallbackParameters","ops","Formula","operatorMapping","get","push","resultNodes","p","Process","isMathProcess","has","params","parameters","map","join","dataTransfer","setData","text","getData","editor","insert","formula","toFormulaString","res","parseTree","tree","isObject","Error","e","exception","keys","Number","parseFloat","getRef","Identifier","Expression","args","i","FunctionCall","addProcess","addOperatorProcess","Binary","operator","right","val","Unary","startsWith","nodeId","substring","includes","prefix","match","count","from_parameter","index","parseInt","label","filter","size","namedArgs","parameter","getUniqueId"],"sourceRoot":""}
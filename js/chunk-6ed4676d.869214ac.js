(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ed4676d"],{"02fb":function(e,t,a){"use strict";a("cf4d")},"0921":function(e,t,a){"use strict";var s=a("3115"),i=a("025e"),n=(a("5bc0"),a("c320")),r=a("9d47"),o=a("21bc"),l=a("0af5"),d=a("a2e1"),c=a("5eee"),u=a("a2c7"),h=a("256f"),p=a("480c"),m=a("3e6b"),f=a("5831"),y=a("d0e9"),g=(a("1399"),a("0417")),b=a("3900");class v{constructor(){this.createHtml(),this.loading=0,this.loaded=0}addLoading(){this.loading++,this.update()}addLoaded(){this.loaded++,this.update()}update(){var e=(this.loaded/this.loading*100).toFixed(1)+"%";this.label.innerText="Loading Tiles ("+e+")",this.progressBarInner.style.width=e,this.loading===this.loaded&&(this.loading=0,this.loaded=0),this.el.style.opacity=this.show()?1:0}show(){return this.loading>0&&this.loaded<=this.loading}createHtml(){this.el=document.createElement("div"),this.el.className="ol-unselectable ol-progress-control",this.progressBar=document.createElement("div"),this.progressBar.className="progress-bar",this.progressBarInner=document.createElement("div"),this.progressBarInner.className="progress-bar-inner",this.progressBar.appendChild(this.progressBarInner),this.label=document.createElement("div"),this.label.className="progress-label",this.el.appendChild(this.progressBar),this.el.appendChild(this.label)}getControl(){var e=new b["a"]({element:this.el});return e}}var w,x,S={mixins:[s["a"]],props:{id:{type:String,required:!0},center:{type:Array,default:()=>[0,0]},zoom:{type:Number,default:1},show:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},removableLayers:{type:Boolean,default:!1}},data(){return{map:null,baseLayer:null,osm:null,progress:null,fitOptions:{padding:[30,30,30,30]}}},watch:{show(){this.showMap()}},mounted(){this.showMap()},methods:{showMap(){this.show&&this.$nextTick(()=>this.renderMap())},createMap(e=!1,t="EPSG:3857"){if(null!==this.map)return this.map.updateSize(),void this.map.render();this.progress=new v,this.osm=new y["a"],this.baseLayer=new p["a"]({source:this.trackTileProgress(this.osm),baseLayer:!0,title:"OpenStreetMap",noSwitcherDelete:!0});var a=[new n["a"],new r["a"],this.progress.getControl()];e&&a.push(new g["a"]({trash:this.removableLayers}));let s=[this.center[1],this.center[0]];var i={target:this.id,layers:[this.baseLayer],view:new u["a"]({center:"EPSG:3857"===t?Object(h["d"])(s):s,zoom:this.zoom,showFullExtent:!0,projection:t})};this.editable?i.controls=Object(o["a"])().extend(a):(i.interactions=[],i.controls=a),this.map=new c["a"](i),this.listen("windowResized",this.updateMapSize)},fromLonLat(e){return this.map&&"EPSG:3857"===this.map.getView().getProjection().getCode()?Object(h["d"])(e):e},onShow(){this.listen("windowResized",this.updateMapSize)},onHide(){this.unlisten("windowResized")},renderMap(){this.createMap()},async updateMapSize(){this.map&&(await this.$nextTick(),this.map.updateSize())},getVisibleLayers(){let e=[],t=this.map.getLayers().getArray();for(let a of t)a.get("userLayer")&&a.getVisible()&&e.push(a);return e},addGeoJson(e){var t={};i["a"].detectGeoJson(e)&&(t.features=(new d["a"]).readFeatures(e,{featureProjection:this.osm.getProjection()}));var a=new f["a"](t),s=new m["a"]({title:"GeoJSON",source:a});this.map.addLayer(s);var n=a.getExtent();return Object(l["G"])(n)||this.map.getView().fit(n,this.fitOptions),s},trackTileProgress(e){return e.on("tileloadstart",()=>{this.progress.addLoading()}),e.on("tileloadend",()=>{this.progress.addLoaded()}),e.on("tileloaderror",()=>{this.progress.addLoaded()}),e}}},C=S,T=a("2877"),_=Object(T["a"])(C,w,x,!1,null,null,null);t["a"]=_.exports},"0f29":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"textEditor",class:e.languageString},[a("div",{staticClass:"sourceHeader"},[e.title?a("strong",[e._v(e._s(e.title))]):e._e(),a("div",{staticClass:"sourceToolbar"},[a("span",{staticClass:"sepr"},[e.editable?a("button",{attrs:{type:"button",title:"New script / Clear current script"},on:{click:e.confirmClear}},[a("i",{staticClass:"fas fa-file"})]):e._e(),e._t("file-toolbar")],2),e.editable?a("span",{staticClass:"sepr"},[a("button",{attrs:{type:"button",disabled:!e.canUndo,title:"Revert last change"},on:{click:function(t){return e.editor.undo()}}},[a("i",{staticClass:"fas fa-undo-alt"})]),a("button",{attrs:{type:"button",disabled:!e.canRedo,title:"Redo last reverted change"},on:{click:function(t){return e.editor.redo()}}},[a("i",{staticClass:"fas fa-redo-alt"})]),e._t("edit-toolbar")],2):e._e(),a("FullscreenButton",{attrs:{element:e.element}}),e._t("toolbar")],2)]),a("div",{staticClass:"sourceCodeEditor",attrs:{id:e.id}})])},i=[],n=a("025e"),r=a("5472"),o=a("a76e"),l=a("56b3"),d=a.n(l),c=(a("a7be"),a("f9d4"),a("959b"),a("ced6"),a("db91"),a("903e"),a("d7d5"),a("8c33"),a("10b2"),a("0dd0"),a("8822"),a("d2de"),a("4ebc")),u=a.n(c);window.jsonlint=u.a;var h={name:"TextEditor",components:{FullscreenButton:r["a"]},props:{id:String,editable:{type:Boolean,default:!0},value:{required:!0},language:{type:String,default:null},placeholder:{type:String,default:""},title:{type:String}},computed:{...n["a"].mapGetters(["processes"]),languageString(){return"string"===typeof this.language?this.language.toLowerCase():""},editorOptions(){let e={indentUnit:2,lineNumbers:!0,indentWithTabs:!0,matchBrackets:!0,autoCloseBrackets:!0,readOnly:!this.editable,placeholder:this.placeholder};switch(this.languageString){case"r":e.mode="text/x-rsrc";break;case"python":e.mode="text/x-python";break;case"math":e.mode="text/x-mathematica";break;case"markdown":e.mode="text/x-markdown";break;case"javascript":e.mode="text/javascript";break;case"json":case"processgraph":Object.assign(e,{mode:"application/json",gutters:["CodeMirror-lint-markers"],lint:!0});break}return e}},data(){return{canUndo:!1,canRedo:!1,editor:null,emitValue:this.value,element:null}},watch:{async value(){this.emitValue!==this.value&&(this.updateContent(),this.editor.clearHistory())},editorOptions(){for(var e in this.editorOptions)this.editor.setOption(e,this.editorOptions[e]);this.updateContent()}},mounted(){this.editor=d()(document.getElementById(this.id),this.editorOptions),this.editor.setSize(null,"100%"),"processgraph"===this.languageString&&this.editor.on("change",()=>this.updateState()),this.updateContent(),this.editor.on("changes",(e,t)=>{try{0===Object.values(t).filter(e=>"setValue"===e.origin).length&&this.commit()}catch(a){this.$emit("error",a)}}),this.element=this.$el},methods:{confirmClear(){var e=confirm("Do you really want to clear the existing code?");e&&(this.insert(""),this.emit(null))},updateState(){this.editor.setOption("lint",!!this.editor.getValue().trim());let e=this.editor.getDoc().historySize();this.canUndo=e.undo>0,this.canRedo=e.redo>0,this.editor.refresh(),this.element=this.$el},commit(){var e=this.editor.getValue();switch(this.languageString){case"math":return this.emit(e.replace(/[\r\n\t]+/," "));case"processgraph":if(e){var t=JSON.parse(e);if(n["a"].size(t)>0){var a=new o["ProcessGraph"](t,this.processes);return a.allowEmpty(),a.parse(),this.emit(t)}}return this.emit(null);case"json":return e?this.emit(JSON.parse(e)):this.emit(null);default:return this.emit(e)}},emit(e){this.emitValue=e,this.$emit("input",e)},insert(e,t=!0){if("string"!==typeof e&&(e=String(e)),t){const t=this.editor.getValue();if(e!==t){const t=this.editor.getScrollInfo();this.editor.setValue(e),this.editor.scrollTo(t.left,t.top)}}else this.editor.replaceSelection(e)},updateContent(){if(this.value)switch(this.languageString){case"processgraph":n["a"].isObject(this.value)?this.insert(JSON.stringify(this.value,null,this.editorOptions.indentUnit)):this.insert("");break;case"json":this.insert(JSON.stringify(this.value,null,this.editorOptions.indentUnit));break;default:this.insert(this.value)}else this.insert("");this.editor.getDoc().clearHistory(),this.updateState()},insertProcess(e){try{this.insert(JSON.stringify(e,null,2),!1)}catch(t){n["a"].exception(this,t)}}}},p=h,m=(a("a9e3"),a("ccbe"),a("2877")),f=Object(m["a"])(p,s,i,!1,null,"4408c74d",null);t["a"]=f.exports},"1fa6":function(e,t,a){"use strict";a("de39")},"206d":function(e,t,a){},2930:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal",style:{"z-index":e.zIndex},on:{mousedown:e.backgroundClose}},[a("div",{ref:"container",staticClass:"modal-container",style:e.style},[a("header",{staticClass:"modal-header",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.startMove.apply(null,arguments)}}},[e._t("header",(function(){return[a("h2",[e._v(e._s(e.title))]),a("span",{staticClass:"close",on:{click:e.close}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]}))],2),a("main",{staticClass:"modal-content"},[e._t("default")],2),a("footer",{staticClass:"modal-footer"},[e._t("footer")],2)])])},i=[],n=a("3115"),r=a("025e"),o={name:"Modal",mixins:[n["a"]],props:{title:{type:String,default:null},minWidth:{type:String,default:"30%"},maxWidth:{type:String,default:"85%"},minHeight:{type:String,default:"auto"},show:{type:Boolean,default:!0}},data(){return{zIndex:1e3,position:null,dragPosition:null}},computed:{...r["a"].mapState("editor",["hightestModalZIndex"]),style(){let e={"min-width":this.minWidth,"max-width":this.maxWidth,"min-height":this.minHeight};return Array.isArray(this.position)&&(e.position="absolute",e.left=this.position[0]+"px",e.top=this.position[1]+"px"),e}},watch:{show:{immediate:!0,handler(e){e?this.open():this.close()}}},methods:{...r["a"].mapMutations("editor",["openModal","closeModal"]),open(){this.openModal(),this.zIndex=this.hightestModalZIndex,window.addEventListener("keydown",this.escCloseListener),this.$emit("shown")},close(){window.removeEventListener("keydown",this.escCloseListener),this.closeModal(),this.$emit("closed")},startMove(e){this.dragPosition=[e.clientX,e.clientY],document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.stopMove)},stopMove(){document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.stopMove)},move(e){e.preventDefault(),this.position=[this.$refs.container.offsetLeft-(this.dragPosition[0]-e.clientX),this.$refs.container.offsetTop-(this.dragPosition[1]-e.clientY)],this.dragPosition=[e.clientX,e.clientY]},escCloseListener(e){if("Escape"==e.key)return this.close(),e.preventDefault(),e.stopPropagation(),!1},backgroundClose(e){e.target===this.$el&&this.close()}}},l=o,d=(a("8781"),a("2877")),c=Object(d["a"])(l,s,i,!1,null,null,null);t["a"]=c.exports},3916:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.selectedSchema?a("div",{staticClass:"fieldContainer"},[e.showDataTypeChooser?a("div",{staticClass:"dataTypeChooser"},[a("select",{attrs:{name:"dataType",disabled:!e.editable},domProps:{value:e.selectedType},on:{input:e.onSelectType}},[e.selectableTypes.length>1?e._l(e.selectableTypes,(function(t){return a("optgroup",{key:t.name,attrs:{label:t.name}},e._l(t.types,(function(t){return a("option",{key:t.dataType(),domProps:{value:t.dataType()}},[e._v(e._s(e._f("dataTypeTitle")(t)))])})),0)})):e._l(e.selectableTypes[0].types,(function(t){return a("option",{key:t.dataType(),domProps:{value:t.dataType()}},[e._v(e._s(e._f("dataTypeTitle")(t)))])}))],2)]):e._e(),!e.isItem&&e.selectedSchema.description()?a("div",{staticClass:"description"},[a("i",{staticClass:"fas fa-info-circle"}),a("Description",{attrs:{description:e.selectedSchema.description(),compact:!0}})],1):e._e(),a("ParameterDataType",{attrs:{editable:e.editable,parameter:e.parameter,schema:e.selectedSchema,context:e.context,parent:e.parent},on:{changeType:e.setSelected},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1):e._e()},i=[],n=a("025e"),r=a("a76e"),o=a("783b"),l=a.n(o),d=a("fbda"),c=null;class u extends r["JsonSchemaValidator"]{static create(e){return null===c&&(c=new u(e)),c}constructor(e){super(),this.store=e,this.setFileFormats(this.store.getters.fileFormats)}async validateBandName(e){return e.length>0}async validateEpsgCode(e){if(await this.store.dispatch("editor/loadEpsgCodes"),this.store.state.editor.epsgCodes[e])return!0;throw new l.a.ValidationError([{message:"Invalid EPSG code '"+e+"' specified."}])}async validateCollectionId(e){if(this.store.state.collections.filter(t=>t.id===e).length>0)return!0;throw new l.a.ValidationError([{message:"Collection with id '"+e+"' doesn't exist."}])}async validateFilePath(e){if(this.store.getters["files/getById"](e))return!0;throw new l.a.ValidationError([{message:"File at '"+e+"' doesn't exist."}])}async validateInputFormatOptions(e){throw"Not supported"}async validateOutputFormatOptions(e){throw"Not supported"}async validateJobId(e){if(this.store.getters["jobs/getById"](e))return!0;throw new l.a.ValidationError([{message:"Job with id '"+e+"' doesn't exist."}])}async validateUri(e){if(e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/))return!0;throw new l.a.ValidationError([{message:"URI is invalid"}])}async validateUdfCode(e){if(e.match(/(\r|\n)/))return!0;throw new l.a.ValidationError([{message:"UDF Code is invalid"}])}async validateUdfRuntime(e){if(e in this.store.state.udfRuntimes)return!0;throw new l.a.ValidationError([{message:"UDF runtime '"+e+"' is not supported."}])}async validateUdfRuntimeVersion(e){if(d["Versions"].validate(e))return!0;throw new l.a.ValidationError([{message:"UDF runtime version '"+e+"' is not a valid version number."}])}}var h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fieldEditorContainer"},[e.isResult?[a("div",{staticClass:"fieldValue externalData fromNode"},[a("span",[e._v("Output of "),a("tt",[e._v("#"+e._s(e.state.from_node))])],1)]),"array"===e.nativeParameterType?a("button",{attrs:{type:"button"},on:{click:function(t){return e.convertToArray()}}},[a("i",{staticClass:"fas fa-list"}),e._v(" Convert to array")]):e._e()]:"raster-cube"===e.type||"vector-cube"===e.type?a("div",{staticClass:"fieldValue description"},[a("i",{staticClass:"fas fa-exclamation-circle"}),a("p",[e._v('This parameter can only be set by creating a connection between an "Output" / "Result" and this parameter in the Visual Model.')])]):e.isPgParameter?[a("div",{staticClass:"fieldValue externalData fromArgument"},[a("span",[e._v("Value of process parameter "),a("tt",[e._v(e._s(e.state.from_parameter))])],1)]),"array"===e.nativeParameterType?a("button",{attrs:{type:"button"},on:{click:function(t){return e.convertToArray()}}},[a("i",{staticClass:"fas fa-list"}),e._v(" Convert to array")]):e._e()]:"undefined"===e.type?a("div",{staticClass:"description"},[a("i",{staticClass:"fas fa-info-circle"}),a("p",[e._v("No value is set.")])]):"null"===e.type?a("div",{staticClass:"description"},[a("i",{staticClass:"fas fa-info-circle"}),a("p",[e._v("This is set to "),a("strong",[a("tt",[e._v("null")])],1),e._v(", which is usually used as placeholder for no-data values or a default value.")])]):e.isSelection?a("SelectBox",{key:e.type,attrs:{type:e.type,editable:e.editable,schema:e.schema,context:e.dependency},on:{onDetails:e.onSelectDetails},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):e.isTemporal?a("TemporalPicker",{key:e.type,attrs:{type:e.type,editable:e.editable},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"bounding-box"===e.type?a("MapAreaSelect",{key:e.type,staticClass:"areaSelector",attrs:{id:e.name+"_bbox",editable:e.editable},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"geojson"===e.type?a("MapGeoJsonEditor",{key:e.type,staticClass:"geoJsonEditor",attrs:{id:e.name+"_geojson",editable:e.editable},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"process-graph"===e.type?a("Editor",{staticClass:"callbackEditor",attrs:{id:e.name,editable:e.editable,parent:e.parent,parentSchema:e.schema,showDiscoveryToolbar:!0,defaultValue:e.editorDefaultValue},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"output-format-options"===e.type||"input-format-options"===e.type?a("FileFormatOptionsEditor",{ref:"fileFormatOptionsEditor",attrs:{type:e.type,format:e.dependency},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"budget"===e.type?a("Budget",{attrs:{editable:e.editable},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"duration"===e.type?a("Duration",{attrs:{editable:e.editable},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"kernel"===e.type?a("Kernel",{attrs:{editable:e.editable},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"udf-code"===e.type?a("TextEditor",{staticClass:"fieldValue textarea",attrs:{id:e.name,editable:e.editable,language:e.dependency},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"commonmark"===e.type?a("TextEditor",{staticClass:"fieldValue textarea",attrs:{id:e.name,editable:e.editable,language:"markdown"},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"wkt2-definition"===e.type||"proj-definition"===e.type?a("TextEditor",{staticClass:"fieldValue textarea",attrs:{id:e.name,editable:e.editable},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"json"==e.type?a("TextEditor",{staticClass:"fieldValue textarea",attrs:{id:e.name,editable:e.editable,language:"json"},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):"boolean"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.state,expression:"state"}],staticClass:"fieldValue",attrs:{type:"checkbox",name:e.name,disabled:!e.editable},domProps:{checked:Array.isArray(e.state)?e._i(e.state,null)>-1:e.state},on:{change:function(t){var a=e.state,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=null,r=e._i(a,n);s.checked?r<0&&(e.state=a.concat([n])):r>-1&&(e.state=a.slice(0,r).concat(a.slice(r+1)))}else e.state=i}}}):"integer"===e.type||"number"===e.type?a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.state,expression:"state",modifiers:{number:!0}}],staticClass:"fieldValue",attrs:{type:"number",min:e.numericMin,max:e.numericMax,step:e.numericStep,name:e.name,disabled:!e.editable},domProps:{value:e.state},on:{input:function(t){t.target.composing||(e.state=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}):"url"===e.type||"uri"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.state,expression:"state"}],staticClass:"fieldValue",attrs:{type:"url",name:e.name,disabled:!e.editable},domProps:{value:e.state},on:{input:function(t){t.target.composing||(e.state=t.target.value)}}}):"object"===e.nativeType||"array"===e.nativeType?a("ObjectEditor",{attrs:{editable:e.editable,parameter:e.parameter,schema:e.schema,isObject:"object"===e.nativeType,context:e.context},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.state,expression:"state"}],staticClass:"fieldValue",attrs:{type:"text",name:e.name,disabled:!e.editable},domProps:{value:e.state},on:{input:function(t){t.target.composing||(e.state=t.target.value)}}})],2)},p=[],m=a("3115"),f=function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("div",{class:{editor:!0,array:!t.isObject,object:t.isObject}},[s("div",{staticClass:"buttons"},[t.editable?s("button",{staticClass:"addBtn",attrs:{type:"button",disabled:t.count>=t.maxCount},on:{click:function(e){return t.add()}}},[s("i",{staticClass:"fas fa-plus"}),t._v(" Add")]):t._e(),s("FullscreenButton",{attrs:{element:function(){return e.$el}}})],1),t.elements.length?s("draggable",{attrs:{handle:".mover"},model:{value:t.elements,callback:function(e){t.elements=e},expression:"elements"}},t._l(t.elements,(function(e,a){return s("div",{key:e.id,staticClass:"fieldValue element"},[s("div",{staticClass:"row"},[s("label",{staticClass:"fieldLabel"},[t.isObject&&(e.prop.title||e.prop.required)?[t._v(t._s(e.prop.title||e.key))]:t.isObject?s("input",{directives:[{name:"model",rawName:"v-model",value:e.key,expression:"e.key"}],attrs:{type:"text",disabled:!t.editable},domProps:{value:e.key},on:{input:function(a){a.target.composing||t.$set(e,"key",a.target.value)}}}):[t._v(t._s(a+1))]],2),s("ParameterDataTypes",{attrs:{editable:t.editable,parameter:t.elementSchema(a,e.key),isItem:!0,context:t.context},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"e.value"}}),t.editable&&!e.prop.required?s("button",{staticClass:"deleteBtn",attrs:{disabled:t.count<=t.minCount,type:"button"},on:{click:function(e){return t.remove(a)}}},[s("i",{staticClass:"fas fa-trash"})]):t._e(),s("button",{directives:[{name:"show",rawName:"v-show",value:t.editable&&!t.isObject,expression:"editable && !isObject"}],staticClass:"mover",attrs:{type:"button"}},[s("i",{staticClass:"fas fa-arrows-alt"})])],1),e.prop.description?s("div",{staticClass:"row"},[s("div",{staticClass:"description"},[s("i",{staticClass:"fas fa-info-circle"}),s("Description",{attrs:{description:e.prop.description,compact:!0}})],1)]):t._e()])})),0):s("div",{staticClass:"empty description"},[s("i",{staticClass:"fas fa-info-circle"}),t.isObject?[t._v(" Object is empty")]:[t._v(" Array is empty")]],2)],1)},y=[],g=a("b76a"),b=a.n(g),v=a("8088"),w=a("5472"),x={name:"ObjectEditor",components:{draggable:b.a,Description:v["default"],FullscreenButton:w["a"],ParameterDataTypes:()=>Promise.resolve().then(a.bind(null,"3916"))},props:{parameter:Object,editable:{type:Boolean,default:!0},schema:Object,value:{},isObject:{type:Boolean,default:!1},context:{}},data(){return{elements:[]}},computed:{count(){return n["a"].size(this.elements)},maxCount(){return(this.isObject?this.schema.schema.maxProperties:this.schema.schema.maxItems)||Number.MAX_VALUE},minCount(){return(this.isObject?this.schema.schema.minProperties:this.schema.schema.minItems)||0},prefill(){let e=this.schema.schema;if(this.isObject&&n["a"].isObject(e.properties)){let t=[];for(let a in e.properties){let s=!1;Array.isArray(e.required)&&e.required.includes(a)&&(s=!0),t.push(Object.assign({name:a,required:s},e.properties[a]))}return t}return!this.isObject&&this.minCount>0?[...Array(this.minCount).keys()].map(e=>({name:e})):[]},newValue(){if(this.isObject){let e={};for(let t of this.elements)e[t.key]=t.value;return e}return this.elements.map(e=>e.value)}},watch:{newValue:{deep:!0,handler(e){this.$emit("input",e)}},value:{immediate:!0,handler(e){if(this.newValue!==e)if(this.elements=[],0===n["a"].size(e)&&this.prefill.length>0)for(let t of this.prefill)this.add(t.name,void 0,t);else if(e&&"object"===typeof e)for(let t in e)this.add(t,e[t])}}},methods:{elementSchema(e,t=null){let a=d["ProcessUtils"].getElementJsonSchema(this.schema.schema,t||e),s=new d["ProcessSchema"](a);return this.schema.parent instanceof d["ProcessSchema"]&&(s.refs=this.schema.parent.refs||[]),s},add(e=null,t,a={}){let s={id:String(this.elements.length),value:t};this.isObject&&(s.key=e||"unnamed"+this.elements.length),s.prop=a,"undefined"===typeof s.value&&("undefined"!==typeof a.default?s.value=a.default:s.value=this.elementSchema(this.elements.length,s.key).default),this.elements.push(s)},remove(e){this.elements.splice(e,1)}}},S=x,C=(a("92e6"),a("2877")),T=Object(C["a"])(S,f,y,!1,null,"4763cdea",null),_=T.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"datatypeEditor budget"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.hasBudget,expression:"hasBudget"}],attrs:{type:"checkbox",disabled:!e.editable},domProps:{checked:Array.isArray(e.hasBudget)?e._i(e.hasBudget,null)>-1:e.hasBudget},on:{change:function(t){var a=e.hasBudget,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=null,r=e._i(a,n);s.checked?r<0&&(e.hasBudget=a.concat([n])):r>-1&&(e.hasBudget=a.slice(0,r).concat(a.slice(r+1)))}else e.hasBudget=i}}}),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amount,expression:"amount",modifiers:{number:!0}}],attrs:{type:"number",min:"0.00",max:e.max,step:"0.01",disabled:!e.hasBudget||!e.editable},domProps:{value:e.amount},on:{input:function(t){t.target.composing||(e.amount=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "+e._s(e.capabilities.currency())+" ")])},k=[],j={name:"Budget",computed:{...n["a"].mapState(["userInfo"]),...n["a"].mapGetters(["capabilities"]),max(){return this.userInfo.budget>0?this.userInfo.budget:Number.MAX_VALUE}},props:{value:{type:Number,default:null},editable:{type:Boolean,default:!0}},data(){return{hasBudget:"number"===typeof this.value,amount:this.value}},watch:{hasBudget(){this.updateData()},amount(){this.updateData()}},methods:{updateData(){this.$emit("input",this.hasBudget&&!Number.isNaN(this.amount)?this.amount:null)}}},O=j,P=Object(C["a"])(O,E,k,!1,null,null,null),D=P.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:e.id}})},B=[],V=a("0921"),M=a("3900");class N{constructor(e,t=!0,a=null,s=null){this.map=e;var i=this.map.getSize();this.width=a||(i[0]>0?.7*i[0]:300),this.height=s||(i[1]>0?.7*i[1]:200),this.moving=!1,this.editable=t,this.interactionListener=null,this.htmlMouseUpListener=null,this.changeSizeListener=null,this.createElements(),this.addControls(),this.render()}setInteractionListener(e){this.interactionListener=e}getBounds(e=!1){var t=this.map.getSize(),a=[0,0],s=[0,0];s[0]=Math.round((t[0]-this.width)/2),a[1]=Math.round((t[1]-this.height)/2),a[0]=t[0]-s[0],s[1]=t[1]-a[1];var i=this.map.getCoordinateFromPixel(s),n=this.map.getCoordinateFromPixel(a);return e?i.concat(n):{west:i[0],south:i[1],east:n[0],north:n[1]}}setBounds(e){if(e){Array.isArray(e)&&(e=n["a"].extentToBBox(e));var t=[e.west,e.south],a=[e.east,e.north],s={callback:()=>{var e=this.map.getPixelFromCoordinate(t),s=this.map.getPixelFromCoordinate(a);this.width=Number.parseInt(Math.abs(e[0]-s[0])),this.height=Number.parseInt(Math.abs(e[1]-s[1])),this.render()}},i=this.map.getSize();i&&!this.editable?s.padding=[i[0]/3,i[1]/3,i[0]/3,i[1]/3]:s.padding=[30,30,30,30],this.map.getView().fit([...t,...a],s)}}createElement(e,t,a){var s=document.createElement(e);return s.className=t,a&&a.appendChild(s),s}createElements(){this.overlayContainer||(this.overlayContainer=this.createElement("div","ol-unselectable ol-areaselect ol-areaselect-shade-container",this.map.getOverlayContainer()),this.topShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.bottomShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.leftShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.rightShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.editable&&(this.nwHandle=this.createElement("div","ol-areaselect-handle"),this.swHandle=this.createElement("div","ol-areaselect-handle"),this.neHandle=this.createElement("div","ol-areaselect-handle"),this.seHandle=this.createElement("div","ol-areaselect-handle"),this.setUpHandlerEvents(this.nwHandle,1,1),this.setUpHandlerEvents(this.neHandle,-1,1),this.setUpHandlerEvents(this.swHandle,1,-1),this.setUpHandlerEvents(this.seHandle,-1,-1)),this.changeSizeListener=()=>this.onInteraction(),this.map.on("change:size",this.changeSizeListener))}setUpHandlerEvents(e,t,a){var s=e=>{if(this.moving){var s=this.map.getSize();this.width+=2*(this.moving[0]-e.pageX)*t,this.height+=2*(this.moving[1]-e.pageY)*a,this.width=Math.max(30,this.width),this.height=Math.max(30,this.height),this.width=Math.min(s[0]-30,this.width),this.height=Math.min(s[1]-30,this.height),this.moving=[e.pageX,e.pageY],this.render()}},i=this.map.getTargetElement(),n=document.querySelector("html");this.htmlMouseUpListener=()=>{this.map.getTargetElement()&&(i.removeEventListener("mousemove",s),n.removeEventListener("mouseup",this.htmlMouseUpListener),this.moving=!1,"function"===typeof this.interactionListener&&this.interactionListener())},e.addEventListener("mousedown",e=>{e.stopPropagation(),this.moving=[e.pageX,e.pageY],i.addEventListener("mousemove",s),n.addEventListener("mouseup",this.htmlMouseUpListener)})}tearDown(){document.querySelector("html").removeEventListener("mouseup",this.htmlMouseUpListener),this.map.un("change:size",this.changeSizeListener)}onInteraction(){this.render()}render(){var e=this.map.getSize(),t=Math.round((e[1]-this.height)/2),a=Math.round((e[0]-this.width)/2);if(this.setElementDimensions(this.overlayContainer,{width:e[0],height:e[1]}),this.setElementDimensions(this.topShade,{width:e[0],height:t,top:0,left:0}),this.setElementDimensions(this.bottomShade,{width:e[0],height:t,bottom:0,left:0}),this.setElementDimensions(this.leftShade,{width:a,height:e[1]-2*t,top:t,left:0}),this.setElementDimensions(this.rightShade,{width:a,height:e[1]-2*t,top:t,right:0}),this.editable){var s=Math.round(this.nwHandle.offsetWidth/2);this.setElementDimensions(this.nwHandle,{left:a-s,top:t-7}),this.setElementDimensions(this.neHandle,{right:a-s,top:t-7}),this.setElementDimensions(this.swHandle,{left:a-s,bottom:t-7}),this.setElementDimensions(this.seHandle,{right:a-s,bottom:t-7})}}setElementDimensions(e,t){e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.bottom=t.bottom+"px",e.style.right=t.right+"px"}addControls(){this.editable&&(this.addControl(this.nwHandle),this.addControl(this.neHandle),this.addControl(this.swHandle),this.addControl(this.seHandle))}addControl(e){this.map.addControl(new M["a"]({element:e}))}}var L={name:"MapAreaSelect",mixins:[V["a"]],props:{value:{type:[Object,Array],default:()=>null}},data(){return{callback:null}},computed:{asArray(){return Array.isArray(this.value)}},beforeDestroy(){this.areaSelect.tearDown(),this.map.un("change",this.callback),this.map.getView().un("change",this.callback),this.map.un("propertychange",this.callback)},methods:{renderMap(){this.createMap(!1,"EPSG:4326"),this.areaSelect=new N(this.map,this.editable),null!==this.value&&this.areaSelect.setBounds(this.value),this.editable&&(this.callback=()=>this.$emit("input",this.areaSelect.getBounds(this.asArray)),this.areaSelect.setInteractionListener(this.callback),this.map.on("change",this.callback),this.map.getView().on("change",this.callback),this.map.on("propertychange",this.callback))}}},I=L,$=(a("991b"),a("1fa6"),Object(C["a"])(I,F,B,!1,null,null,null)),A=$.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:e.id}})},U=[],z=a("a2e1"),J=a("b2fc"),H=(a("faaa"),a("f087")),G=a("e887"),q=(a("159a"),a("c516")),Y=a("d803"),W={name:"MapGeoJsonEditor",mixins:[V["a"]],props:{value:{type:Object,default:null}},data(){return{geoJsonLayer:null}},methods:{showMap(){this.show&&this.$nextTick(this.renderMap)},renderMap(){if(this.createMap(!0,"EPSG:4326"),this.editable?this.geoJsonLayer=this.geoJsonEditor(this.value):this.geoJsonLayer=this.addGeoJson(this.value),this.editable){var e=()=>this.$emit("input",this.getGeoJson());this.geoJsonLayer.getSource().on("change",e)}},geoJsonEditor(e){var t=this.addGeoJson(e),a=new H["a"];this.map.addControl(a);var s=new q["a"]({source:t.getSource(),interactions:{Info:!1,DrawHole:!1,Offset:!1,Split:!1}});a.addControl(s);var i=new Y["a"];this.map.addInteraction(i),i.on("undo",e=>{"addfeature"===e.action.type&&(s.getInteraction("Select").getFeatures().clear(),s.getInteraction("Transform").select())});var n=new H["a"]({group:!0,controls:[new G["a"]({html:'<i class="fas fa-undo-alt"></i>',title:"Undo",handleClick:()=>i.undo()}),new G["a"]({html:'<i class="fas fa-redo-alt"></i>',title:"Redo",handleClick:()=>i.redo()})]});return a.addControl(n),this.map.addInteraction(new J["a"]({source:t.getSource()})),t},getGeoJson(){var e=new z["a"],t=this.geoJsonLayer.getSource().getFeatures(),a=[];for(var s in t)a.push(e.writeFeatureObject(t[s],{dataProjection:"EPSG:4326",featureProjection:this.osm.getProjection()}));return 0===a.length?null:1===a.length?!a[0].properties&&a[0].geometry?a[0].geometry:a[0]:{type:"FeatureCollection",features:a}}}},X=W,Z=Object(C["a"])(X,R,U,!1,null,null,null),K=Z.exports,Q=a("0f29"),ee={name:"ParameterDataType",mixins:[m["a"]],components:{ObjectEditor:_,Budget:D,MapAreaSelect:A,MapGeoJsonEditor:K,TextEditor:Q["a"],Editor:()=>a.e("chunk-057fedfb").then(a.bind(null,"ceb0")),FileFormatOptionsEditor:()=>a.e("chunk-6896d764").then(a.bind(null,"eeea")),ParameterDataTypes:()=>Promise.resolve().then(a.bind(null,"3916")),Duration:()=>a.e("chunk-2d17c1ef").then(a.bind(null,"0924")),Kernel:()=>a.e("chunk-5981a7e2").then(a.bind(null,"17bb")),SelectBox:()=>a.e("chunk-672a3090").then(a.bind(null,"3e57")),TemporalPicker:()=>a.e("chunk-68669eba").then(a.bind(null,"cca6"))},props:{parameter:Object,editable:{type:Boolean,default:!0},schema:Object,value:{},context:{},parent:{}},data(){return{state:this.value}},computed:{type(){return this.schema.dataType()},nativeType(){return this.schema.nativeDataType()},nativeParameterType(){return this.parameter.nativeDataType()},editorDefaultValue(){if("process-graph"===this.type){if("undefined"!==typeof this.parameter.default)return this.parameter.default;if(this.parameter.nullable())return null}},isTemporal(){return"date"===this.type||"time"===this.type||"date-time"===this.type||"temporal-interval"===this.type||"year"===this.type},isSelection(){switch(this.type){case"collection-id":case"job-id":case"file-path":case"file-paths":case"epsg-code":case"input-format":case"openeo-datatype":case"output-format":case"service-type":case"billing-plan":case"udf-runtime":case"udf-runtime-version":return!0;case"band-name":return!!this.dependency;default:return this.schema.isEnum()}},name(){return this.parameter.name+(Array.isArray(this.parameter.value)?"[]":"")},isResult(){return Boolean(n["a"].isObject(this.state)&&this.state.from_node&&1===n["a"].size(this.state)&&this.schema.schema.isRef)},isPgParameter(){return Boolean(n["a"].isObject(this.state)&&this.state.from_parameter&&1===n["a"].size(this.state)&&this.schema.schema.isRef)},numericMin(){return"number"===typeof this.schema.minimum?this.schema.minimum:""},numericMax(){return"number"===typeof this.schema.maximum?this.schema.maximum:""},numericStep(){return"number"===typeof this.schema.multipleOf?this.schema.multipleOf:"integer"===this.type?1:"any"},newValue(){if("number"===this.type){var e=Number.parseFloat(this.state);return Number.isNaN(e)?null:e}if("integer"===this.type){e=Number.parseInt(this.state);return Number.isNaN(e)?null:e}if("null"===this.type)return null;if("string"===typeof this.state&&this.state.length>0&&("any"===this.type||"mixed"===this.type)){e=Number(this.state);return Number.isNaN(e)?this.state:e}return this.state},dependency(){switch(this.type){case"output-format-options":case"input-format-options":return this.getValueFromOtherParameterByDataType(this.type.replace("-options",""));case"udf-runtime-version":case"udf-code":return this.getValueFromOtherParameterByDataType("udf-runtime");case"band-name":return this.getValueFromOtherParameterByDataType("collection-id");default:return}}},watch:{value(e){e!==this.newValue&&(this.state=this.value)},async newValue(e){this.$emit("input",e)}},methods:{getValueFromOtherParameterByDataType(e){if(n["a"].isObject(this.context)&&n["a"].isObject(this.context.schemas)&&n["a"].isObject(this.context.values))for(let t in this.context.schemas){let a=this.context.schemas[t];if(n["a"].isObject(a)&&a.dataType()===e)return this.context.values[t]}},convertToArray(){this.state=[this.state],this.$emit("input",this.state),this.$emit("changeType","array")},onSelectDetails(){"collection-id"===this.type&&this.emit("showCollection",this.state)}}},te=ee,ae=(a("689c"),Object(C["a"])(te,h,p,!1,null,"f79f0c1a",null)),se=ae.exports,ie=a("ab90");const ne=["Basics","References","Spatial","Temporal","File and Folders","Resources","CRS","UDF","Other"],re=()=>(new Date).toISOString().replace(/\.\d+/,""),oe=[{subtype:"undefined",title:"No Value",const:void 0,group:"Basics"},{type:"null",const:null,group:"Basics"},{type:"string",default:"",group:"Basics"},{type:"integer",default:0,group:"Basics"},{type:"number",default:0,group:"Basics"},{type:"boolean",default:!1,group:"Basics"},{type:"array",default:[],group:"Basics"},{type:"object",default:{},group:"Basics",properties:{from_node:{not:{}},from_parameter:{not:{}}}},{type:"string",subtype:"date-time",format:"date-time",title:"Date and Time",group:"Temporal",default:()=>re()},{type:"string",subtype:"date",format:"date",title:"Date only",group:"Temporal",default:()=>re().substring(0,10)},{type:"string",subtype:"time",format:"time",title:"Time only",group:"Temporal",default:()=>re().substring(11)},{type:"string",subtype:"year",title:"Year only",group:"Temporal"},{type:"array",subtype:"temporal-interval",title:"Temporal interval",group:"Temporal"},{type:"array",subtype:"temporal-intervals",title:"Temporal intervals (multiple)",group:"Temporal",default:[]},{type:"object",subtype:"geojson",title:"GeoJSON",group:"Spatial"},{type:"object",subtype:"bounding-box",title:"Bounding Box",group:"Spatial"},{type:"string",subtype:"band-name",title:"Band",group:"Resources"},{type:"string",subtype:"collection-id",title:"Collection",group:"Resources"},{type:"string",subtype:"job-id",title:"Batch Job",group:"Resources"},{type:"string",subtype:"udf-code",title:"UDF Source Code",group:"UDF",default:""},{type:"string",subtype:"udf-runtime",title:"UDF Runtime",group:"UDF"},{type:"string",subtype:"udf-runtime-version",title:"UDF Runtime Version",group:"UDF",any:!1},{type:"integer",subtype:"epsg-code",title:"EPSG Code (CRS)",group:"CRS"},{type:"string",subtype:"proj-definition",title:"PROJ defintiion (CRS)",group:"CRS",default:""},{type:"string",subtype:"wkt2-definition",title:"WKT2 defintiion (CRS)",group:"CRS",default:""},{type:"array",subtype:"file-path",title:"File path",group:"File and Folders"},{type:"array",subtype:"file-paths",title:"File paths (multiple)",group:"File and Folders",default:[]},{type:"string",subtype:"uri",format:"uri",title:"URI / URL",group:"File and Folders"},{type:"string",subtype:"output-format",title:"Export file format",group:"File and Folders"},{type:"object",subtype:"output-format-options",title:"Export file format parameters",group:"File and Folders",any:!1},{type:"string",subtype:"input-format",title:"Import file format",group:"File and Folders"},{type:"object",subtype:"input-format-options",title:"Import file format parameters",group:"File and Folders",any:!1},{type:"object",subtype:"process-graph",title:"Custom Process"},{tyoe:"object",subtype:"json-schema",title:"Data Type (JSON Schema)",any:!1},{subtype:"json",title:"JSON",noAutoDetect:!0}],le={type:"object",additionalProperties:!1,properties:{from_node:{type:"string"},from_parameter:{type:"string"}}};var de={name:"ParameterDataTypes",mixins:[m["a"]],components:{Description:v["default"],ParameterDataType:se},props:{parameter:{type:Object,default:()=>new d["ProcessParameter"]({})},editable:{type:Boolean,default:!0},value:{},isItem:{type:Boolean,default:!1},context:{},parent:{}},data(){return{state:"undefined"===typeof this.value?this.parameter.default:this.value,selectedType:null,selectedNativeType:null,selectedSchema:null,jsonSchemaValidator:u.create(this.$store)}},filters:{dataTypeTitle(e){if(e.schema&&!e.schema.title){let t=oe.find(t=>t.subtype===e.schema.subtype||t.type===e.schema.type);if(t&&t.title)return t.title}return e.title()}},async created(){await this.detectType()},computed:{refSchemas(){if(!Array.isArray(this.parameter.refs))return{};let e={};for(let t of this.parameter.refs){let a;t.from_node?(a="from_node:"+t.from_node,e[a]=new d["ProcessDataType"]({type:"object",group:"References",subtype:a,isRef:"from_node",from_node:t.from_node,title:"Output of #"+t.from_node,required:["from_node"],properties:{from_node:{type:"string",const:t.from_node}},default:t,additionalProperties:!1})):t.from_parameter&&(a="from_parameter:"+t.from_parameter,e[a]=new d["ProcessDataType"]({type:"object",group:"References",subtype:a,isRef:"from_parameter",from_parameter:t.from_parameter,title:'Value of process parameter "'+t.from_parameter+'"',required:["from_parameter"],properties:{from_parameter:{type:"string",const:t.from_parameter}},default:t,additionalProperties:!1}))}return e},showDataTypeChooser(){return n["a"].size(this.allowedTypes)>1},allowedTypes(){let e={};if("any"===this.parameter.dataType())Object.assign(e,this.supportedTypes);else for(let t of this.parameter.schemas){let a=t.dataType();e[a]=t}return Object.assign(e,this.refSchemas),e},supportedTypes(){let e={};for(let t of oe){if(!1===t.any)continue;let a=t.subtype||t.type,s=Object.assign({},ie["API_TYPES"][a],t);e[a]=new d["ProcessDataType"](s,this.parameter)}return e},selectableTypes(){let e={};for(let a in this.allowedTypes){let t=this.allowedTypes[a],s=t.group();Array.isArray(e[s])?e[s].push(t):e[s]=[t]}let t=ne.map(t=>({name:t,types:e[t]||[]})).filter(e=>0!==e.types.length);return t}},watch:{value(e){e!==this.state&&(this.state=e)},state(e){this.$emit("input",e)},selectedType(e){this.$emit("schemaSelected",this.supportedTypes[e])}},methods:{async isValueInvalid(e,t){let a=n["a"].deepClone(t);"array"===a.type&&n["a"].isObject(a.items)&&(a.items={oneOf:[a.items,le]});let s=await this.jsonSchemaValidator.validateValue(e,a);return s.length>0},async getTypeForValue(e,t){var a=[];for(var s of e)try{if(await this.isValueInvalid(t,s.schema))continue;a.push(s.dataType())}catch(i){}return a},async detectType(){let e=Object.keys(this.allowedTypes),t="undefined"===typeof this.state;if(0===e.length)await this.setSelected("json");else if(1===e.length)await this.setSelected(e[0],t);else if(t){let t=e.filter(e=>"null"!==e);await this.setSelected(t[0],!0)}else{let e=Object.values(this.allowedTypes).filter(e=>!e.schema.noAutoDetect),t=await this.getTypeForValue(e,this.state);if(0===t.length)await this.setSelected("json");else if(1===t.length)await this.setSelected(t[0]);else{t.includes("integer")&&t.includes("number")&&(t=t.filter(e=>"integer"!==e)),!n["a"].isRef(this.state)&&t.length>1&&console.warn("A parameter is ambiguous. Potential types: "+t.join(", ")+". Value: "+JSON.stringify(this.state));let e=t.findIndex(e=>ie["NATIVE_TYPES"].includes(e));-1===e&&(e=0),await this.setSelected(t[e])}}},async onSelectType(e){await this.setSelected(e.target.value,!0)},async setSelected(e,t=!1){let a=e;if(e instanceof d["ProcessDataType"]?(this.selectedSchema=e,this.selectedType=e.dataType(),a=e.nativeDataType()):(this.selectedSchema=this.allowedTypes[e]?this.allowedTypes[e]:this.supportedTypes[e],this.selectedType=e),t){if("number"===typeof this.state&&"string"===a)this.state=String(this.state);else if("string"===typeof this.state&&"integer"===a){if(this.state.match(/^([+-]?\d+)$/)){let e=Number.parseInt(this.state,10);Number.isNaN(e)||(this.state=e)}}else if("string"===typeof this.state&&"number"===a){let e=Number.parseFloat(this.state);Number.isNaN(e)||(this.state=e)}if(this.selectedSchema.isNull())this.state=null;else if("undefined"!==typeof this.selectedSchema.const)this.state=this.selectedSchema.const;else if(this.selectedSchema.isEnum()&&1===this.selectedSchema.getEnumChoices().length)this.state=this.selectedSchema.getEnumChoices()[0];else{let e=this.selectedSchema.default();try{("undefined"===typeof this.state||await this.isValueInvalid(this.state,this.selectedSchema))&&(this.state=e)}catch(s){this.state=e}}}}}},ce=de,ue=(a("5577"),Object(C["a"])(ce,s,i,!1,null,null,null));t["default"]=ue.exports},4525:function(e,t,a){},4907:function(e,t,a){},5472:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{directives:[{name:"show",rawName:"v-show",value:e.element,expression:"element"}],attrs:{type:"button",title:e.isFullscreen?"Close fullscreen":"Show fullscreen"},on:{click:e.toggleFullscreen}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.isFullscreen,expression:"isFullscreen"}]},[a("i",{staticClass:"fas fa-compress"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isFullscreen,expression:"!isFullscreen"}]},[a("i",{staticClass:"fas fa-expand"})])])},i=[],n=a("025e"),r={name:"FullscreenButton",props:{element:{required:!0}},data(){return{isFullscreen:!1,keyDownFn:null,oldZIndex:"auto"}},mounted(){this.keyDownFn=this.onkeyDown.bind(this);let e=this.getElement();e&&e.addEventListener("keydown",this.keyDownFn)},beforeDestroy(){let e=this.getElement();e&&e.removeEventListener("keydown",this.keyDownFn)},computed:{...n["a"].mapState("editor",["hightestModalZIndex"])},methods:{...n["a"].mapMutations("editor",["openModal","closeModal"]),onkeyDown(e){!this.isFullscreen||"F11"!==e.key&&"Escape"!==e.key||(this.toggleFullscreen(),e.preventDefault(),e.stopPropagation())},getElement(){return"string"===typeof this.element?document.querySelector(this.element):"function"===typeof this.element?this.element():this.element},toggleFullscreen(){let e=this.getElement();this.isFullscreen?(this.isFullscreen=!1,e.classList.remove("fullscreen"),e.style.zIndex=this.oldZIndex,this.closeModal()):(this.isFullscreen=!0,e.classList.add("fullscreen"),this.openModal(),this.oldZIndex=e.style.zIndex,e.style.zIndex=this.hightestModalZIndex),this.$emit("changed",this.isFullscreen)}}},o=r,l=(a("90f4"),a("2877")),d=Object(l["a"])(o,s,i,!1,null,null,null);t["a"]=d.exports},5577:function(e,t,a){"use strict";a("a4f1")},"689c":function(e,t,a){"use strict";a("4907")},"6a70":function(e,t,a){},"6b1e":function(e,t,a){},"70e2":function(e,t,a){},8781:function(e,t,a){"use strict";a("6b1e")},"90b4":function(e,t,a){},"90f4":function(e,t,a){"use strict";a("206d")},"92e6":function(e,t,a){"use strict";a("e946")},"991b":function(e,t,a){"use strict";a("90b4")},a4f1:function(e,t,a){},a9e3:function(e,t,a){"use strict";a("6a70")},ab90:function(e,t,a){"use strict";a.r(t),a.d(t,"API_TYPES",(function(){return i})),a.d(t,"NATIVE_TYPES",(function(){return n}));var s=a("025e");const i=s["a"].resolveJsonRefs(a("ff6c")).definitions,n=["string","integer","number","boolean","array","object"]},be47:function(e,t,a){"use strict";a("70e2")},c2dc:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{show:e.show,minWidth:"60%",maxWidth:"90%",minHeight:"75%",title:e.title},on:{closed:function(t){return e.$emit("closed")}},scopedSlots:e._u([{key:"default",fn:function(){return[0===e.parameters.length?a("p",[e._v("No editable parameters available.")]):a("form",{attrs:{id:"parameterModal"},on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[e._l(e.parameters,(function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.toggleParamVisibility(t),expression:"toggleParamVisibility(param)"}],key:s,staticClass:"fieldRow"},[a("label",{class:{fieldLabel:!0,highlight:t.name===e.selectParameter,info:t.info}},[e._v(" "+e._s(e.displayLabel(t))+" "),t.info||t.optional?e._e():a("strong",{staticClass:"required",attrs:{title:"required"}},[e._v("*")]),t.description?a("div",{staticClass:"description"},[a("Description",{attrs:{description:t.description}})],1):e._e()]),t.info?e._e():a("ParameterDataTypes",{ref:t.name,refInFor:!0,attrs:{editable:e.editable,parameter:t,context:e.context,parent:e.parent},on:{schemaSelected:function(a){return e.updateType(t,a)}},model:{value:e.values[t.name],callback:function(a){e.$set(e.values,t.name,a)},expression:"values[param.name]"}}),!t.info&&t.unspecified?a("button",{staticClass:"deleteBtn",attrs:{title:"Delete unspecified parameter",type:"button"},on:{click:function(t){return e.deleteParam(s)}}},[a("i",{staticClass:"fas fa-trash"})]):e._e()],1)})),a("button",{staticStyle:{display:"none"},attrs:{type:"submit"}})],2)]},proxy:!0},e.$listeners.save?{key:"footer",fn:function(){return[a("div",{staticClass:"footer"},[a("button",{staticClass:"save",on:{click:e.save}},[e._v("Save")])])]},proxy:!0}:null],null,!0)})},i=[],n=a("025e"),r=a("2930"),o=a("8088"),l=a("3916"),d={name:"ParameterModal",components:{Modal:r["a"],Description:o["default"],ParameterDataTypes:l["default"]},props:{title:{type:String},parameters:{type:Array},data:{type:Object},editable:{type:Boolean,default:!0},selectParameter:{type:String,default:null},parent:{type:Object,default:null}},data(){return{show:!0,values:n["a"].deepClone(this.data),schemas:{}}},computed:{context(){return{values:this.values,schemas:this.schemas,parameters:this.parameters}}},mounted(){this.$nextTick(()=>this.setSelected())},methods:{toggleParamVisibility(e){return!e||!e.toggledBy||!!this.context.values[e.toggledBy]},deleteParam(e){let t=this.parameters[e].name;this.$delete(this.parameters,e),this.$delete(this.schemas,t),this.$delete(this.values,t)},updateType(e,t){this.$set(this.schemas,e.name,t)},displayLabel(e){return"string"===typeof e.label&&e.label.length>0?e.label:n["a"].prettifyString(e.name)},save(){try{this.$emit("save",this.values),this.show=!1}catch(e){n["a"].exception(this,e)}},componentforParameter(e){return e&&Array.isArray(this.$refs[e])&&this.$refs[e][0]?this.$refs[e][0]:null},setSelected(e=0){let t;this.selectParameter?t=this.componentforParameter(this.selectParameter):this.parameters.length>0&&(t=this.componentforParameter(this.parameters[0].name)),t&&(t.$el&&t.$el.scrollIntoView?(this.selectParameter&&t.$el.scrollIntoView(),this.setInputFocus(t.$el)):e<10&&setTimeout(()=>this.setSelected(++e),250))},setInputFocus(e,t=0){if(e.querySelector){let t=e.querySelector('input:not([type="hidden"]):not([disabled]):not([class~="multiselect__input"]), button:not([disabled]), textarea:not([disabled]), select:not([disabled]), datalist:not([disabled])');t&&t.focus()}else t<10&&setTimeout(()=>this.setInputFocus(e,++t),250)}}},c=d,u=(a("02fb"),a("be47"),a("2877")),h=Object(u["a"])(c,s,i,!1,null,"317c4b35",null);t["default"]=h.exports},ccbe:function(e,t,a){"use strict";a("4525")},cf4d:function(e,t,a){},de39:function(e,t,a){},e946:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6ed4676d.869214ac.js.map
"use strict";(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[4285],{94285:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var a=function(){var e=this,t=e._self._c;return t("div",{ref:"imageViewer",staticClass:"imageViewer",class:{fullscreen:e.fullScreen}},[e.error?[e._v(e._s(e.error))]:[t("div",{staticClass:"toolbar"},[e.play?e._e():t("span",{staticClass:"value",attrs:{title:e.valueTitle}},[e._v(e._s(e.valueText))]),t("FullscreenButton",{staticClass:"fullscreen-button",attrs:{element:()=>e.$refs.imageViewer},on:{changed:e.fullscreenToggled}}),t("button",{staticClass:"play-button",attrs:{title:"Play animation (if available)"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.togglePlay.apply(null,arguments)}}},[e.play?t("i",{staticClass:"fas fa-stop"}):t("i",{staticClass:"fas fa-play"})])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.context,expression:"!context"}],staticClass:"no-data"},[t("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Loading image...")]),t("canvas",{directives:[{name:"show",rawName:"v-show",value:e.context&&!e.play,expression:"context && !play"}],ref:"canvas",style:e.style,attrs:{title:e.title},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.resize.apply(null,arguments)},mousemove:e.getPixelValue,mouseout:e.resetPixelValue}}),t("iframe",{directives:[{name:"show",rawName:"v-show",value:e.context&&e.play,expression:"context && play"}],ref:"iframe"},[t("body",{ref:"body",staticStyle:{margin:"auto",width:"100%",height:"100%","text-align":"center"}},[t("img",{ref:"image",style:e.style,attrs:{title:e.title},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.resize.apply(null,arguments)}}})])])]],2)},s=[],l=(i(98992),i(23215),i(82574));const r="-",n={name:"ImageViewer",components:{FullscreenButton:l.A},props:{data:{type:Object,required:!0}},data(){return{fullScreen:!1,fullSize:!1,img:null,error:null,context:null,value:r,play:!1}},async mounted(){this.$emit("mounted",this),this.img=await this.data.getData()},computed:{style(){return this.fullSize||this.fullScreen?{"max-width":"none","max-height":"none","object-fit":"none",cursor:this.fullScreen?"auto":"zoom-out","box-sizing":"border-box"}:{"max-width":"100%","max-height":"100%",cursor:"zoom-in","object-fit":"contain","box-sizing":"border-box"}},title(){return this.fullScreen?"":this.fullSize?"Click to shrink (fit to screen)":"Click to enlarge (full size)"},valueTitle(){return this.fullScreen||this.fullSize?"":"Show in full size to get precise values"},valueText(){return this.fullScreen||this.fullSize?`Pixel Value: ${this.value}`:`Estimated Pixel Value: ${this.value}`}},watch:{img:{immediate:!0,handler(){this.updateContent()}},play:{immediate:!0,handler(){this.updateContent()}}},methods:{updateContent(){if(this.img)try{this.play?(this.$refs.image.src=this.img.src,this.$refs.iframe.contentWindow.document.body=this.$refs.body,this.$refs.iframe.style.width=`${this.img.naturalWidth}px`,this.$refs.iframe.style.height=`${this.img.naturalHeight}px`):(this.$refs.canvas.width=this.img.naturalWidth,this.$refs.canvas.height=this.img.naturalHeight,this.context=this.$refs.canvas.getContext("2d",{willReadFrequently:!0}),this.context.drawImage(this.img,0,0))}catch(e){this.error=e}},togglePlay(){this.play=!this.play},fullscreenToggled(e){this.fullScreen=e},resize(){this.fullScreen||(this.fullSize=!this.fullSize)},resetPixelValue(){this.value=r},getPixelValue(e){try{const t=this.$refs.canvas.getBoundingClientRect(),i=this.img.naturalWidth/t.width,a=this.img.naturalHeight/t.height,s=e.offsetX*i,l=e.offsetY*a,r=Array.from(this.context.getImageData(Math.ceil(s),Math.ceil(l),1,1).data),n=r.pop();0===n?this.value="no data":r.every((e=>e===r[0]))?this.value=r[0]:this.value=r.join(" / ")}catch(t){this.value=r}}}},o=n;var u=i(81656),h=(0,u.A)(o,a,s,!1,null,"bb3bb0f6",null);const c=h.exports},81148:(e,t,i)=>{var a=i(46518),s=i(72652),l=i(79306),r=i(28551),n=i(1767);a({target:"Iterator",proto:!0,real:!0},{every:function(e){r(this),l(e);var t=n(this),i=0;return!s(t,(function(t,a){if(!e(t,i++))return a()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},23215:(e,t,i)=>{i(81148)}}]);
//# sourceMappingURL=4285.9fb68278.js.map
{"version":3,"file":"js/1160.457e5c26.js","mappings":"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","sources":["webpack://@openeo/web-editor/./node_modules/ol/Kinetic.js","webpack://@openeo/web-editor/./node_modules/ol/ImageState.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEvent.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Base.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Checkbox.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Switch.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/input/Radio.js","webpack://@openeo/web-editor/./node_modules/ol-ext/util/element.js","webpack://@openeo/web-editor/./node_modules/ol/DataTile.js","webpack://@openeo/web-editor/./node_modules/color-space/rgb.js","webpack://@openeo/web-editor/./node_modules/ol/CollectionEventType.js","webpack://@openeo/web-editor/./node_modules/ol/ImageTile.js","webpack://@openeo/web-editor/./node_modules/ol/MapProperty.js","webpack://@openeo/web-editor/./node_modules/ol/Image.js","webpack://@openeo/web-editor/./node_modules/ol/Collection.js","webpack://@openeo/web-editor/./node_modules/earcut/src/earcut.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEventType.js","webpack://@openeo/web-editor/./node_modules/color-parse/node_modules/color-name/index.js","webpack://@openeo/web-editor/./node_modules/color-parse/index.js","webpack://@openeo/web-editor/./node_modules/color-space/hsl.js","webpack://@openeo/web-editor/./node_modules/color-rgba/index.js","webpack://@openeo/web-editor/./node_modules/ol/MapEventType.js","webpack://@openeo/web-editor/./node_modules/ol/Feature.js","webpack://@openeo/web-editor/./node_modules/ol/MapBrowserEventHandler.js","webpack://@openeo/web-editor/./node_modules/ol/Disposable.js","webpack://@openeo/web-editor/./node_modules/color-space/luv.js","webpack://@openeo/web-editor/./node_modules/color-space/lchuv.js","webpack://@openeo/web-editor/./node_modules/color-space/xyz.js","webpack://@openeo/web-editor/./node_modules/ol/MapEvent.js","webpack://@openeo/web-editor/./node_modules/ol-ext/control/LayerSwitcher.js"],"sourcesContent":["/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nclass Kinetic {\n  /**\n   * @param {number} decay Rate of decay (must be negative).\n   * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n   * @param {number} delay Delay to consider to calculate the kinetic\n   *     initial values (milliseconds).\n   */\n  constructor(decay, minVelocity, delay) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.decay_ = decay;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minVelocity_ = minVelocity;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delay_ = delay;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.points_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  begin() {\n    this.points_.length = 0;\n    this.angle_ = 0;\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update(x, y) {\n    this.points_.push(x, y, Date.now());\n  }\n\n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end() {\n    if (this.points_.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false;\n    }\n    const delay = Date.now() - this.delay_;\n    const lastIndex = this.points_.length - 3;\n    if (this.points_[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false;\n    }\n\n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3;\n    while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n      firstIndex -= 3;\n    }\n\n    const duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n    // we don't want a duration of 0 (divide by zero)\n    // we also make sure the user panned for a duration of at least one frame\n    // (1/60s) to compute sane displacement values\n    if (duration < 1000 / 60) {\n      return false;\n    }\n\n    const dx = this.points_[lastIndex] - this.points_[firstIndex];\n    const dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n    this.angle_ = Math.atan2(dy, dx);\n    this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n    return this.initialVelocity_ > this.minVelocity_;\n  }\n\n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance() {\n    return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n  }\n\n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  getAngle() {\n    return this.angle_;\n  }\n}\n\nexport default Kinetic;\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4,\n};\n","/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nclass MapBrowserEvent extends MapEvent {\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./Map.js\").default} map Map.\n   * @param {EVENT} originalEvent Original event.\n   * @param {boolean} [dragging] Is the map currently being dragged?\n   * @param {import(\"./Map.js\").FrameState} [frameState] Frame state.\n   * @param {Array<PointerEvent>} [activePointers] Active pointers.\n   */\n  constructor(type, map, originalEvent, dragging, frameState, activePointers) {\n    super(type, map, frameState);\n\n    /**\n     * The original browser event.\n     * @const\n     * @type {EVENT}\n     * @api\n     */\n    this.originalEvent = originalEvent;\n\n    /**\n     * The map pixel relative to the viewport corresponding to the original browser event.\n     * @type {?import(\"./pixel.js\").Pixel}\n     */\n    this.pixel_ = null;\n\n    /**\n     * The coordinate in the user projection corresponding to the original browser event.\n     * @type {?import(\"./coordinate.js\").Coordinate}\n     */\n    this.coordinate_ = null;\n\n    /**\n     * Indicates if the map is currently being dragged. Only set for\n     * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n     *\n     * @type {boolean}\n     * @api\n     */\n    this.dragging = dragging !== undefined ? dragging : false;\n\n    /**\n     * @type {Array<PointerEvent>|undefined}\n     */\n    this.activePointers = activePointers;\n  }\n\n  /**\n   * The map pixel relative to the viewport corresponding to the original event.\n   * @type {import(\"./pixel.js\").Pixel}\n   * @api\n   */\n  get pixel() {\n    if (!this.pixel_) {\n      this.pixel_ = this.map.getEventPixel(this.originalEvent);\n    }\n    return this.pixel_;\n  }\n  set pixel(pixel) {\n    this.pixel_ = pixel;\n  }\n\n  /**\n   * The coordinate corresponding to the original browser event.  This will be in the user\n   * projection if one is set.  Otherwise it will be in the view projection.\n   * @type {import(\"./coordinate.js\").Coordinate}\n   * @api\n   */\n  get coordinate() {\n    if (!this.coordinate_) {\n      this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n    }\n    return this.coordinate_;\n  }\n  set coordinate(coordinate) {\n    this.coordinate_ = coordinate;\n  }\n\n  /**\n   * Prevents the default browser action.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n   * @api\n   */\n  preventDefault() {\n    super.preventDefault();\n    if ('preventDefault' in this.originalEvent) {\n      /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n    }\n  }\n\n  /**\n   * Prevents further propagation of the current event.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n   * @api\n   */\n  stopPropagation() {\n    super.stopPropagation();\n    if ('stopPropagation' in this.originalEvent) {\n      /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n    }\n  }\n}\n\nexport default MapBrowserEvent;\n","/** Vanilla JS geographic inputs\n * color, size, width, font, symboles, dash, arrow, pattern\n */\nimport ol_Object from 'ol/Object.js'\n\n/** Abstract base class; normally only used for creating subclasses and not instantiated in apps.    \n * @constructor\n * @extends {ol_Object}\n * @param {*} options\n *  @param {Element} [options.input] input element, if none create one\n *  @param {string} [options.type] input type, if no input\n *  @param {number} [options.min] input min, if no input\n *  @param {number} [options.max] input max, if no input\n *  @param {number} [options.step] input step, if no input\n *  @param {string|number} [options.val] input value\n *  @param {boolean} [options.checked] check input\n *  @param {boolean} [options.hidden] the input is display:none\n *  @param {boolean} [options.disabled] disable input\n *  @param {Element} [options.parent] parent element, if no input\n */\nvar ol_ext_input_Base = class olextinputBase extends ol_Object {\n  constructor(options) {\n    options = options || {};\n    super();\n\n    var input = this.input = options.input;\n    if (!input) {\n      input = this.input = document.createElement('input');\n      if (options.type) {\n        input.setAttribute('type', options.type);\n      }\n      if (options.min !== undefined) {\n        input.setAttribute('min', options.min);\n      }\n      if (options.max !== undefined) {\n        input.setAttribute('max', options.max);\n      }\n      if (options.step !== undefined) {\n        input.setAttribute('step', options.step);\n      }\n      if (options.parent) {\n        options.parent.appendChild(input);\n      }\n    }\n    if (options.disabled) {\n      input.disabled = true;\n    }\n    if (options.checked !== undefined) {\n      input.checked = !!options.checked;\n    }\n    if (options.val !== undefined) {\n      input.value = options.val;\n    }\n    if (options.hidden) { \n      input.classList.add('ol-input-hidden');\n    }\n    input.addEventListener('focus', function () {\n      if (this.element)\n        this.element.classList.add('ol-focus');\n    }.bind(this));\n    var tout;\n    input.addEventListener('focusout', function () {\n      if (this.element) {\n        if (tout)\n          clearTimeout(tout);\n        tout = setTimeout(function () {\n          this.element.classList.remove('ol-focus');\n        }.bind(this), 0);\n      }\n    }.bind(this));\n  }\n  /** Listen to drag event\n   * @param {Element} elt\n   * @param {function} cback when draggin on the element\n   * @private\n   */\n  _listenDrag(elt, cback) {\n    var handle = function (e) {\n      this.moving = true;\n      this.element.classList.add('ol-moving');\n      var listen = function (e) {\n        if (e.type === 'pointerup') {\n          document.removeEventListener('pointermove', listen);\n          document.removeEventListener('pointerup', listen);\n          document.removeEventListener('pointercancel', listen);\n          setTimeout(function () {\n            this.moving = false;\n            this.element.classList.remove('ol-moving');\n          }.bind(this));\n        }\n        if (e.target === elt)\n          cback(e);\n        e.stopPropagation();\n        e.preventDefault();\n      }.bind(this);\n      document.addEventListener('pointermove', listen, false);\n      document.addEventListener('pointerup', listen, false);\n      document.addEventListener('pointercancel', listen, false);\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this);\n    elt.addEventListener('mousedown', handle, false);\n    elt.addEventListener('touchstart', handle, false);\n  }\n  /** Set the current value\n   */\n  setValue(v) {\n    if (v !== undefined)\n      this.input.value = v;\n    this.input.dispatchEvent(new Event('change'));\n  }\n  /** Get the current getValue\n   * @returns {string}\n   */\n  getValue() {\n    return this.input.value;\n  }\n  /** Get the input element\n   * @returns {Element}\n   */\n  getInputElement() {\n    return this.input;\n  }\n}\n\nexport default ol_ext_input_Base\n","import ol_ext_input_Base from './Base.js'\n\n/** Checkbox input\n * @constructor\n * @extends {ol_ext_input_Base}\n * @fires check\n * @param {*} options\n *  @param {string} [options.className]\n *  @param {Element|string} [options.html] label content\n *  @param {string} [options.after] label garnish (placed after)\n *  @param {Element} [options.input] input element, if non create one\n *  @param {Element} [options.parent] parent element, if create an input\n *  @param {boolean} [options.autoClose=true]\n *  @param {boolean} [options.visible=false] display the input\n */\nvar ol_ext_input_Checkbox = class olextinputCheckbox extends ol_ext_input_Base {\n  constructor(options) {\n    options = options || {};\n\n    super(options);\n\n    var label = this.element = document.createElement('label');\n    if (options.html instanceof Element)\n      label.appendChild(options.html);\n    else if (options.html !== undefined)\n      label.innerHTML = options.html;\n    label.className = ('ol-ext-check ol-ext-checkbox ' + (options.className || '')).trim();\n\n    if (this.input.parentNode)\n      this.input.parentNode.insertBefore(label, this.input);\n    label.appendChild(this.input);\n    label.appendChild(document.createElement('span'));\n    if (options.after) {\n      label.appendChild(document.createTextNode(options.after));\n    }\n\n    // Handle change\n    this.input.addEventListener('change', function () {\n      this.dispatchEvent({ type: 'check', checked: this.input.checked, value: this.input.value });\n    }.bind(this));\n\n  }\n  isChecked() {\n    return this.input.checked;\n  }\n}\n\nexport default ol_ext_input_Checkbox\n","import ol_ext_input_Checkbox from './Checkbox.js'\n\n/** Switch input\n * @constructor\n * @extends {ol_ext_input_Checkbox}\n * @fires check\n * @param {*} options\n *  @param {string} [options.className]\n *  @param {Element} [options.input] input element, if non create one\n *  @param {Element} [options.parent] parent element, if create an input\n */\nvar ol_ext_input_Switch = class olextinputSwitch extends ol_ext_input_Checkbox {\n  constructor(options) {\n    options = options || {};\n\n    super(options);\n\n    this.element.className = ('ol-ext-toggle-switch ' + (options.className || '')).trim();\n  }\n};\n  \nexport default ol_ext_input_Switch\n","import ol_ext_input_Checkbox from './Checkbox.js'\n\n/** Switch input\n * @constructor\n * @extends {ol_ext_input_Checkbox}\n * @fires check\n * @param {*} options\n *  @param {string} [options.className]\n *  @param {Element} [options.input] input element, if non create one\n *  @param {Element} [options.parent] parent element, if create an input\n */\nvar ol_ext_input_Radio = class olextinputRadio extends ol_ext_input_Checkbox {\n  constructor(options) {\n    options = options || {};\n\n    super(options);\n\n    this.element.className = ('ol-ext-check ol-ext-radio ' + (options.className || '')).trim();\n  }\n}\n  \nexport default ol_ext_input_Radio\n","/** Vanilla JS helper to manipulate DOM without jQuery\n * @see https://github.com/nefe/You-Dont-Need-jQuery\n * @see https://plainjs.com/javascript/\n * @see http://youmightnotneedjquery.com/\n */\nimport ol_Map from 'ol/Map.js'\nimport ol_ext_input_Checkbox from './input/Checkbox.js'\nimport ol_ext_input_Switch from './input/Switch.js'\nimport ol_ext_input_Radio from './input/Radio.js'\n\n/** @namespace ol.ext.element */\nvar ol_ext_element = {};\n\n/**\n * Create an element\n * @param {string} tagName The element tag, use 'TEXT' to create a text node\n * @param {*} options\n *  @param {string} options.className className The element class name \n *  @param {Element} options.parent Parent to append the element as child\n *  @param {Element|string} [options.html] Content of the element (if text is not set)\n *  @param {string} [options.text] Text content (if html is not set)\n *  @param {Element|string} [options.options] when tagName = SELECT a list of options as key:value to add to the select\n *  @param {string} options.* Any other attribut to add to the element\n */\nol_ext_element.create = function (tagName, options) {\n  options = options || {};\n  var elt;\n  // Create text node\n  if (tagName === 'TEXT') {\n    elt = document.createTextNode(options.html||'');\n    if (options.parent) options.parent.appendChild(elt);\n  } else {\n    // Other element\n    elt = document.createElement(tagName.toLowerCase());\n    if (/button/i.test(tagName)) elt.setAttribute('type', 'button');\n    for (var attr in options) {\n      switch (attr) {\n        case 'className': {\n          if (options.className && options.className.trim) elt.setAttribute('class', options.className.trim());\n          break;\n        }\n        case 'text': {\n          elt.innerText = options.text;\n          break;\n        }\n        case 'html': {\n          if (options.html instanceof Element) elt.appendChild(options.html)\n          else if (options.html!==undefined) elt.innerHTML = options.html;\n          break;\n        }\n        case 'parent': {\n          if (options.parent) options.parent.appendChild(elt);\n          break;\n        }\n        case 'options': {\n          if (/select/i.test(tagName)) {\n            for (var i in options.options) {\n              ol_ext_element.create('OPTION', {\n                html: i,\n                value: options.options[i],\n                parent: elt          \n              })\n            }\n          }\n          break;\n        }\n        case 'style': {\n          ol_ext_element.setStyle(elt, options.style);\n          break;\n        }\n        case 'change':\n        case 'click': {\n          ol_ext_element.addListener(elt, attr, options[attr]);\n          break;\n        }\n        case 'on': {\n          for (var e in options.on) {\n            ol_ext_element.addListener(elt, e, options.on[e]);\n          }\n          break;\n        }\n        case 'checked': {\n          elt.checked = !!options.checked;\n          break;\n        }\n        default: {\n          elt.setAttribute(attr, options[attr]);\n          break;\n        }\n      }\n    }\n  }\n  return elt;\n};\n\n/** Create a toggle switch input\n * @param {*} options\n *  @param {string|Element} options.html\n *  @param {string|Element} options.after\n *  @param {boolean} options.checked\n *  @param {*} [options.on] a list of actions\n *  @param {function} [options.click]\n *  @param {function} [options.change]\n *  @param {Element} options.parent\n */\nol_ext_element.createSwitch = function (options) {\n  var input = ol_ext_element.create('INPUT', {\n    type: 'checkbox',\n    on: options.on,\n    click: options.click,\n    change: options.change,\n    parent: options.parent\n  });\n  var opt = Object.assign ({ input: input }, options || {});\n  new ol_ext_input_Switch(opt);\n  return input;\n};\n\n/** Create a toggle switch input\n * @param {*} options\n *  @param {string|Element} options.html\n *  @param {string|Element} options.after\n *  @param {string} [options.name] input name\n *  @param {string} [options.type=checkbox] input type: radio or checkbox\n *  @param {string} options.value input value\n *  @param {*} [options.on] a list of actions\n *  @param {function} [options.click]\n *  @param {function} [options.change]\n *  @param {Element} options.parent\n */\nol_ext_element.createCheck = function (options) {\n  var input = ol_ext_element.create('INPUT', {\n    name: options.name,\n    type: (options.type==='radio' ? 'radio' : 'checkbox'),\n    on: options.on,\n    parent: options.parent\n  });\n  var opt = Object.assign ({ input: input }, options || {});\n  if (options.type === 'radio') {\n    new ol_ext_input_Radio(opt);\n  } else {\n    new ol_ext_input_Checkbox(opt);\n  }\n  return input;\n};\n\n/** Set inner html or append a child element to an element\n * @param {Element} element\n * @param {Element|string} html Content of the element\n */\nol_ext_element.setHTML = function(element, html) {\n  if (html instanceof Element) element.appendChild(html)\n  else if (html!==undefined) element.innerHTML = html;\n};\n\n/** Append text into an elemnt\n * @param {Element} element\n * @param {string} text text content\n */\nol_ext_element.appendText = function(element, text) {\n  element.appendChild(document.createTextNode(text||''));\n};\n\n/**\n * Add a set of event listener to an element\n * @param {Element} element\n * @param {string|Array<string>} eventType\n * @param {function} fn\n */\nol_ext_element.addListener = function (element, eventType, fn, useCapture ) {\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\n  eventType.forEach(function(e) {\n    element.addEventListener(e, fn, useCapture);\n  });\n};\n\n/**\n * Add a set of event listener to an element\n * @param {Element} element\n * @param {string|Array<string>} eventType\n * @param {function} fn\n */\nol_ext_element.removeListener = function (element, eventType, fn) {\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\n  eventType.forEach(function(e) {\n    element.removeEventListener(e, fn);\n  });\n};\n\n/**\n * Show an element\n * @param {Element} element\n */\nol_ext_element.show = function (element) {\n  element.style.display = '';\n};\n\n/**\n * Hide an element\n * @param {Element} element\n */\nol_ext_element.hide = function (element) {\n  element.style.display = 'none';\n};\n\n/**\n * Test if an element is hihdden\n * @param {Element} element\n * @return {boolean}\n */\nol_ext_element.hidden = function (element) {\n  return ol_ext_element.getStyle(element, 'display') === 'none';\n};\n\n/**\n * Toggle an element\n * @param {Element} element\n */\nol_ext_element.toggle = function (element) {\n  element.style.display = (element.style.display==='none' ? '' : 'none');\n};\n\n/** Set style of an element\n * @param {DOMElement} el the element\n * @param {*} st list of style\n */\nol_ext_element.setStyle = function(el, st) {\n  for (var s in st) {\n    switch (s) {\n      case 'top':\n      case 'left':\n      case 'bottom':\n      case 'right':\n      case 'minWidth':\n      case 'maxWidth':\n      case 'width':\n      case 'height': {\n        if (typeof(st[s]) === 'number') {\n          el.style[s] = st[s]+'px';\n        } else {\n          el.style[s] = st[s];\n        }\n        break;\n      }\n      default: {\n        el.style[s] = st[s];\n      }\n    }\n  }\n};\n\n/**\n * Get style propertie of an element\n * @param {DOMElement} el the element\n * @param {string} styleProp Propertie name\n * @return {*} style value\n */\nol_ext_element.getStyle = function(el, styleProp) {\n  var value, defaultView = (el.ownerDocument || document).defaultView;\n  // W3C standard way:\n  if (defaultView && defaultView.getComputedStyle) {\n    // sanitize property name to css notation\n    // (hypen separated words eg. font-Size)\n    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n    value = defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\n  } else if (el.currentStyle) { // IE\n    // sanitize property name to camelCase\n    styleProp = styleProp.replace(/-(\\w)/g, function(str, letter) {\n      return letter.toUpperCase();\n    });\n    value = el.currentStyle[styleProp];\n    // convert other units to pixels on IE\n    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) { \n      return (function(value) {\n        var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;\n        el.runtimeStyle.left = el.currentStyle.left;\n        el.style.left = value || 0;\n        value = el.style.pixelLeft + \"px\";\n        el.style.left = oldLeft;\n        el.runtimeStyle.left = oldRsLeft;\n        return value;\n      })(value);\n    }\n  }\n  if (/px$/.test(value)) return parseInt(value);\n  return value;\n};\n\n/** Get outerHeight of an elemen\n * @param {DOMElement} elt\n * @return {number}\n */\nol_ext_element.outerHeight = function(elt) {\n  return elt.offsetHeight + ol_ext_element.getStyle(elt, 'marginBottom')\n};\n\n/** Get outerWidth of an elemen\n * @param {DOMElement} elt\n * @return {number}\n */\nol_ext_element.outerWidth = function(elt) {\n  return elt.offsetWidth + ol_ext_element.getStyle(elt, 'marginLeft')\n};\n\n/** Get element offset rect\n * @param {DOMElement} elt\n * @return {*} \n */\nol_ext_element.offsetRect = function(elt) {\n  var rect = elt.getBoundingClientRect();\n  return {\n    top: rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0),\n    left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0),\n    height: rect.height || (rect.bottom - rect.top),\n    width: rect.width || (rect.right - rect.left)\n  }\n};\n\n/** Get element offset \n * @param {ELement} elt\n * @returns {Object} top/left offset\n */\nol_ext_element.getFixedOffset = function(elt) {\n  var offset = {\n    left:0,\n    top:0\n  };\n  var getOffset = function(parent) {\n    if (!parent) return offset;\n    // Check position when transform\n    if (ol_ext_element.getStyle(parent, 'position') === 'absolute'\n      && ol_ext_element.getStyle(parent, 'transform') !== \"none\") {\n      var r = parent.getBoundingClientRect();\n      offset.left += r.left; \n      offset.top += r.top; \n      return offset;\n    }\n    return getOffset(parent.offsetParent)\n  }\n  return getOffset(elt.offsetParent)\n};\n\n/** Get element offset rect\n * @param {DOMElement} elt\n * @param {boolean} fixed get fixed position\n * @return {Object} \n */\nol_ext_element.positionRect = function(elt, fixed) {\n  var gleft = 0;\n  var gtop = 0;\n\n  var getRect = function( parent ) {\n    if (parent) {\n      gleft += parent.offsetLeft;\n      gtop += parent.offsetTop;\n      return getRect(parent.offsetParent);\n    } else {\n      var r = {\n        top: elt.offsetTop + gtop,\n        left: elt.offsetLeft + gleft\n      };\n      if (fixed) {\n        r.top -= (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\n        r.left -= (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0);\n      }\n      r.bottom = r.top + elt.offsetHeight;\n      r.right = r.top + elt.offsetWidth;\n      return r;\n    }\n  }; \n  return getRect(elt.offsetParent);\n}\n\n/** Make a div scrollable without scrollbar.\n * On touch devices the default behavior is preserved\n * @param {DOMElement} elt\n * @param {*} options\n *  @param {function} [options.onmove] a function that takes a boolean indicating that the div is scrolling\n *  @param {boolean} [options.vertical=false] \n *  @param {boolean} [options.animate=true] add kinetic to scroll\n *  @param {boolean} [options.mousewheel=false] enable mousewheel to scroll\n *  @param {boolean} [options.minibar=false] add a mini scrollbar to the parent element (only vertical scrolling)\n * @returns {Object} an object with a refresh function\n */\nol_ext_element.scrollDiv = function(elt, options) {\n  options = options || {};\n  var pos = false;\n  var speed = 0;\n  var d, dt = 0;\n\n  var onmove = (typeof(options.onmove) === 'function' ? options.onmove : function(){});\n  //var page = options.vertical ? 'pageY' : 'pageX';\n  var page = options.vertical ? 'screenY' : 'screenX';\n  var scroll = options.vertical ? 'scrollTop' : 'scrollLeft';\n  var moving = false;\n  // Factor scale content / container\n  var scale, isbar;\n\n  // Update the minibar\n  var updateCounter = 0;\n  var updateMinibar = function() {\n    if (scrollbar) {\n      updateCounter++;\n      setTimeout(updateMinibarDelay);\n    }\n  }\n  var updateMinibarDelay = function() {\n    if (scrollbar) {\n      updateCounter--;\n      // Prevent multi call\n      if (updateCounter) return;\n      // Container height\n      var pheight = elt.clientHeight;\n      // Content height\n      var height = elt.scrollHeight;\n      // Set scrollbar value\n      scale = pheight / height;\n      scrollbar.style.height = scale * 100 + '%';\n      scrollbar.style.top = (elt.scrollTop / height * 100) + '%';\n      scrollContainer.style.height = pheight + 'px';\n      // No scroll\n      if (pheight > height - .5) scrollContainer.classList.add('ol-100pc');\n      else scrollContainer.classList.remove('ol-100pc');\n    }\n  }\n  \n  // Handle pointer down\n  var onPointerDown = function(e) {\n    // Prevent scroll\n    if (e.target.classList.contains('ol-noscroll')) return;\n    // Start scrolling\n    moving = false;\n    pos = e[page];\n    dt = new Date();\n    elt.classList.add('ol-move');\n    // Prevent elt dragging\n    e.preventDefault();\n    // Listen scroll\n    window.addEventListener('pointermove', onPointerMove);\n    ol_ext_element.addListener(window, ['pointerup','pointercancel'], onPointerUp);\n  }\n\n  // Register scroll\n  var onPointerMove = function(e) {\n    if (pos !== false) {\n      var delta = (isbar ? -1/scale : 1) * (pos - e[page]);\n      moving = moving || Math.round(delta)\n      elt[scroll] += delta;\n      d = new Date();\n      if (d-dt) {\n        speed = (speed + delta / (d - dt))/2;\n      }\n      pos = e[page];\n      dt = d;\n      // Tell we are moving\n      if (delta) onmove(true);\n    } else {\n      moving = true;\n    }\n  };\n  \n  // Animate scroll\n  var animate = function(to) {\n    var step = (to>0) ? Math.min(100, to/2) : Math.max(-100, to/2);\n    to -= step;\n    elt[scroll] += step;\n    if (-1 < to && to < 1) {\n      if (moving) setTimeout(function() { elt.classList.remove('ol-move'); });\n      else elt.classList.remove('ol-move');\n      moving = false;\n      onmove(false);\n    } else {\n      setTimeout(function() {\n        animate(to);\n      }, 40);\n    }\n  }\n  \n  // Initialize scroll container for minibar\n  var scrollContainer, scrollbar;\n  if (options.vertical && options.minibar) {\n    var init = function(b) {\n      // only once\n      elt.removeEventListener('pointermove', init);\n      elt.parentNode.classList.add('ol-miniscroll');\n      scrollbar = ol_ext_element.create('DIV');\n      scrollContainer = ol_ext_element.create('DIV', {\n        className: 'ol-scroll',\n        html: scrollbar\n      });\n      elt.parentNode.insertBefore(scrollContainer, elt);\n      // Move scrollbar\n      scrollbar.addEventListener('pointerdown', function(e) {\n        isbar = true;\n        onPointerDown(e)\n      });\n      // Handle mousewheel\n      if (options.mousewheel) {\n        ol_ext_element.addListener(scrollContainer, \n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \n          function(e) { onMouseWheel(e) }\n        );\n        ol_ext_element.addListener(scrollbar, \n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \n          function(e) { onMouseWheel(e) }\n        );\n      }\n      // Update on enter\n      elt.parentNode.addEventListener('pointerenter', updateMinibar);\n      // Update on resize\n      window.addEventListener('resize', updateMinibar);\n      // Update\n      if (b!==false) updateMinibar();\n    };\n    // Allready inserted in the DOM\n    if (elt.parentNode) init(false);\n    // or wait when ready\n    else elt.addEventListener('pointermove', init);\n    // Update on scroll\n    elt.addEventListener('scroll', function() {\n      updateMinibar();\n    });\n  }\n\n  // Enable scroll\n  elt.style['touch-action'] = 'none';\n  elt.style['overflow'] = 'hidden';\n  elt.classList.add('ol-scrolldiv');\n  \n  // Start scrolling\n  ol_ext_element.addListener(elt, ['pointerdown'], function(e) {\n    isbar = false;\n    onPointerDown(e)\n  });\n\n  // Prevet click when moving...\n  elt.addEventListener('click', function(e) {\n    if (elt.classList.contains('ol-move')) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }, true);\n\n  // Stop scrolling\n  var onPointerUp = function(e) {\n    dt = new Date() - dt;\n    if (dt>100 || isbar) {\n      // User stop: no speed\n      speed = 0;\n    } else if (dt>0) {\n      // Calculate new speed\n      speed = ((speed||0) + (pos - e[page]) / dt) / 2;\n    }\n    animate(options.animate===false ? 0 : speed*200);\n    pos = false;\n    speed = 0;\n    dt = 0;\n    // Add class to handle click (on iframe / double-click)\n    if (!elt.classList.contains('ol-move')) {\n      elt.classList.add('ol-hasClick')\n      setTimeout(function() { elt.classList.remove('ol-hasClick'); }, 500);\n    } else {\n      elt.classList.remove('ol-hasClick');\n    }\n    isbar = false;\n    window.removeEventListener('pointermove', onPointerMove)\n    ol_ext_element.removeListener(window, ['pointerup','pointercancel'], onPointerUp);\n  };\n\n  // Handle mousewheel\n  var onMouseWheel = function(e) {\n    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\n    elt.classList.add('ol-move');\n    elt[scroll] -= delta*30;\n    elt.classList.remove('ol-move');\n    return false;\n  }\n  if (options.mousewheel) { // && !elt.classList.contains('ol-touch')) {\n    ol_ext_element.addListener(elt, \n      ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \n      onMouseWheel\n    );\n  }\n\n  return { \n    refresh: updateMinibar\n  }\n};\n\n/** Dispatch an event to an Element \n * @param {string} eventName\n * @param {Element} element\n */\nol_ext_element.dispatchEvent = function (eventName, element) {\n  var event;\n  try {\n    event = new CustomEvent(eventName);\n  } catch(e) {\n    // Try customevent on IE\n    event = document.createEvent(\"CustomEvent\");\n    event.initCustomEvent(eventName, true, true, {});\n  }\n  element.dispatchEvent(event);\n};\n\n/** Set cursor\n * @param {Element|ol/Map} elt\n * @param {string} cursor\n */\nol_ext_element.setCursor = function(elt, cursor) {\n  if (elt instanceof ol_Map) elt = elt.getTargetElement()\n  // prevent flashing on mobile device\n  if (!('ontouchstart' in window) && elt instanceof Element) {\n    elt.style.cursor = cursor;\n  }\n}\n\nexport default ol_ext_element\n","/**\n * @module ol/DataTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\n\n/**\n * @typedef {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement|ImageBitmap} ImageLike\n */\n\n/**\n * @typedef {Uint8Array|Uint8ClampedArray|Float32Array|DataView} ArrayLike\n */\n\n/**\n * Data that can be used with a DataTile.\n * @typedef {ArrayLike|ImageLike} Data\n */\n\n/**\n * @param {Data} data Tile data.\n * @return {ImageLike|null} The image-like data.\n */\nexport function asImageLike(data) {\n  return data instanceof Image ||\n    data instanceof HTMLCanvasElement ||\n    data instanceof HTMLVideoElement ||\n    data instanceof ImageBitmap\n    ? data\n    : null;\n}\n\n/**\n * @param {Data} data Tile data.\n * @return {ArrayLike|null} The array-like data.\n */\nexport function asArrayLike(data) {\n  return data instanceof Uint8Array ||\n    data instanceof Uint8ClampedArray ||\n    data instanceof Float32Array ||\n    data instanceof DataView\n    ? data\n    : null;\n}\n\n/**\n * @type {CanvasRenderingContext2D|null}\n */\nlet sharedContext = null;\n\n/**\n * @param {ImageLike} image The image.\n * @return {Uint8ClampedArray} The data.\n */\nexport function toArray(image) {\n  if (!sharedContext) {\n    sharedContext = createCanvasContext2D(\n      image.width,\n      image.height,\n      undefined,\n      {willReadFrequently: true},\n    );\n  }\n  const canvas = sharedContext.canvas;\n  const width = image.width;\n  if (canvas.width !== width) {\n    canvas.width = width;\n  }\n  const height = image.height;\n  if (canvas.height !== height) {\n    canvas.height = height;\n  }\n  sharedContext.clearRect(0, 0, width, height);\n  sharedContext.drawImage(image, 0, 0);\n  return sharedContext.getImageData(0, 0, width, height).data;\n}\n\n/**\n * @type {import('./size.js').Size}\n */\nconst defaultSize = [256, 256];\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @property {function(): Promise<Data>} loader Data loader.  For loaders that generate images,\n * the promise should not resolve until the image is loaded.\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n * @property {import('./size.js').Size} [size=[256, 256]] Tile size.\n * @api\n */\n\nclass DataTile extends Tile {\n  /**\n   * @param {Options} options Tile options.\n   */\n  constructor(options) {\n    const state = TileState.IDLE;\n\n    super(options.tileCoord, state, {\n      transition: options.transition,\n      interpolate: options.interpolate,\n    });\n\n    /**\n     * @type {function(): Promise<Data>}\n     * @private\n     */\n    this.loader_ = options.loader;\n\n    /**\n     * @type {Data}\n     * @private\n     */\n    this.data_ = null;\n\n    /**\n     * @type {Error}\n     * @private\n     */\n    this.error_ = null;\n\n    /**\n     * @type {import('./size.js').Size|null}\n     * @private\n     */\n    this.size_ = options.size || null;\n  }\n\n  /**\n   * Get the tile size.\n   * @return {import('./size.js').Size} Tile size.\n   */\n  getSize() {\n    if (this.size_) {\n      return this.size_;\n    }\n    const imageData = asImageLike(this.data_);\n    if (imageData) {\n      return [imageData.width, imageData.height];\n    }\n    return defaultSize;\n  }\n\n  /**\n   * Get the data for the tile.\n   * @return {Data} Tile data.\n   * @api\n   */\n  getData() {\n    return this.data_;\n  }\n\n  /**\n   * Get any loading error.\n   * @return {Error} Loading error.\n   * @api\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @api\n   */\n  load() {\n    if (this.state !== TileState.IDLE && this.state !== TileState.ERROR) {\n      return;\n    }\n    this.state = TileState.LOADING;\n    this.changed();\n\n    const self = this;\n    this.loader_()\n      .then(function (data) {\n        self.data_ = data;\n        self.state = TileState.LOADED;\n        self.changed();\n      })\n      .catch(function (error) {\n        self.error_ = error;\n        self.state = TileState.ERROR;\n        self.changed();\n      });\n  }\n}\n\nexport default DataTile;\n","/**\n * RGB space.\n *\n * @module  color-space/rgb\n */\nconst rgb = {\n\tname: 'rgb',\n\tmin: [0, 0, 0],\n\tmax: [255, 255, 255],\n\tchannel: ['red', 'green', 'blue'],\n\talias: ['RGB']\n};\n\nexport default rgb;\n","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection.CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection.CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove',\n};\n","/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenImage} from './Image.js';\n\nclass ImageTile extends Tile {\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"./TileState.js\").default} state State.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @param {import(\"./Tile.js\").Options} [options] Tile options.\n   */\n  constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, options) {\n    super(tileCoord, state, options);\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * Image URI\n     *\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    this.key = src;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n  }\n\n  /**\n   * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Sets an HTML image element for this tile (may be a Canvas or preloaded Image).\n   * @param {HTMLCanvasElement|HTMLImageElement} element Element.\n   */\n  setImage(element) {\n    this.image_ = element;\n    this.state = TileState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = TileState.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    const image = /** @type {HTMLImageElement} */ (this.image_);\n    if (image.naturalWidth && image.naturalHeight) {\n      this.state = TileState.LOADED;\n    } else {\n      this.state = TileState.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   *\n   * To retry loading tiles on failed requests, use a custom `tileLoadFunction`\n   * that checks for error status codes and reloads only when the status code is\n   * 408, 429, 500, 502, 503 and 504, and only when not too many retries have been\n   * made already:\n   *\n   * ```js\n   * const retryCodes = [408, 429, 500, 502, 503, 504];\n   * const retries = {};\n   * source.setTileLoadFunction((tile, src) => {\n   *   const image = tile.getImage();\n   *   fetch(src)\n   *     .then((response) => {\n   *       if (retryCodes.includes(response.status)) {\n   *         retries[src] = (retries[src] || 0) + 1;\n   *         if (retries[src] <= 3) {\n   *           setTimeout(() => tile.load(), retries[src] * 1000);\n   *         }\n   *         return Promise.reject();\n   *       }\n   *       return response.blob();\n   *     })\n   *     .then((blob) => {\n   *       const imageUrl = URL.createObjectURL(blob);\n   *       image.src = imageUrl;\n   *       setTimeout(() => URL.revokeObjectURL(imageUrl), 5000);\n   *     })\n   *     .catch(() => tile.setState(3)); // error\n   * });\n   * ```\n   *\n   * @api\n   */\n  load() {\n    if (this.state == TileState.ERROR) {\n      this.state = TileState.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n      this.tileLoadFunction_(this, this.src_);\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this),\n      );\n    }\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  const ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view',\n};\n","/**\n * @module ol/Image\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport ImageState from './ImageState.js';\nimport {CREATE_IMAGE_BITMAP, IMAGE_DECODE} from './has.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport {toPromise} from './functions.js';\n\n/**\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(import(\"./Image.js\").default, string): void} LoadFunction\n * @api\n */\n\n/**\n * @typedef {Object} ImageObject\n * @property {import(\"./extent.js\").Extent} [extent] Extent, if different from the requested one.\n * @property {import(\"./resolution.js\").ResolutionLike} [resolution] Resolution, if different from the requested one.\n * When x and y resolution are different, use the array type (`[xResolution, yResolution]`).\n * @property {number} [pixelRatio] Pixel ratio, if different from the requested one.\n * @property {import('./DataTile.js').ImageLike} image Image.\n */\n\n/**\n * Loader function used for image sources. Receives extent, resolution and pixel ratio as arguments.\n * For images that cover any extent and resolution (static images), the loader function should not accept\n * any arguments. The function returns an {@link import(\"./DataTile.js\").ImageLike image}, an\n * {@link import(\"./Image.js\").ImageObject image object}, or a promise for the same.\n * For loaders that generate images, the promise should not resolve until the image is loaded.\n * If the returned image does not match the extent, resolution or pixel ratio passed to the loader,\n * it has to return an {@link import(\"./Image.js\").ImageObject image object} with the `image` and the\n * correct `extent`, `resolution` and `pixelRatio`.\n *\n * @typedef {function(import(\"./extent.js\").Extent, number, number, (function(HTMLImageElement, string): void)=): import(\"./DataTile.js\").ImageLike|ImageObject|Promise<import(\"./DataTile.js\").ImageLike|ImageObject>} Loader\n * @api\n */\n\n/**\n * Loader function used for image sources. Receives extent, resolution and pixel ratio as arguments.\n * The function returns a promise for an  {@link import(\"./Image.js\").ImageObject image object}.\n *\n * @typedef {function(import(\"./extent.js\").Extent, number, number, (function(HTMLImageElement, string): void)=): import(\"./DataTile.js\").ImageLike|ImageObject|Promise<import(\"./DataTile.js\").ImageLike|ImageObject>} ImageObjectPromiseLoader\n */\n\nclass ImageWrapper extends EventTarget {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|Array<number>|undefined} resolution Resolution. If provided as array, x and y\n   * resolution will be assumed.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"./ImageState.js\").default|import(\"./Image.js\").Loader} stateOrLoader State.\n   */\n  constructor(extent, resolution, pixelRatio, stateOrLoader) {\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.extent = extent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number|Array<number>|undefined}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state =\n      typeof stateOrLoader === 'function' ? ImageState.IDLE : stateOrLoader;\n\n    /**\n     * @private\n     * @type {import('./DataTile.js').ImageLike|null}\n     */\n    this.image_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"./Image.js\").Loader}\n     */\n    this.loader = typeof stateOrLoader === 'function' ? stateOrLoader : null;\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  getExtent() {\n    return this.extent;\n  }\n\n  /**\n   * @return {import('./DataTile.js').ImageLike} Image.\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * @return {number} PixelRatio.\n   */\n  getPixelRatio() {\n    return this.pixelRatio_;\n  }\n\n  /**\n   * @return {number|Array<number>} Resolution.\n   */\n  getResolution() {\n    return /** @type {number} */ (this.resolution);\n  }\n\n  /**\n   * @return {import(\"./ImageState.js\").default} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      if (this.loader) {\n        this.state = ImageState.LOADING;\n        this.changed();\n        const resolution = this.getResolution();\n        const requestResolution = Array.isArray(resolution)\n          ? resolution[0]\n          : resolution;\n        toPromise(() =>\n          this.loader(\n            this.getExtent(),\n            requestResolution,\n            this.getPixelRatio(),\n          ),\n        )\n          .then((image) => {\n            if ('image' in image) {\n              this.image_ = image.image;\n            }\n            if ('extent' in image) {\n              this.extent = image.extent;\n            }\n            if ('resolution' in image) {\n              this.resolution = image.resolution;\n            }\n            if ('pixelRatio' in image) {\n              this.pixelRatio_ = image.pixelRatio;\n            }\n            if (\n              image instanceof HTMLImageElement ||\n              image instanceof ImageBitmap ||\n              image instanceof HTMLCanvasElement ||\n              image instanceof HTMLVideoElement\n            ) {\n              this.image_ = image;\n            }\n            this.state = ImageState.LOADED;\n          })\n          .catch((error) => {\n            this.state = ImageState.ERROR;\n            console.error(error); // eslint-disable-line no-console\n          })\n          .finally(() => this.changed());\n      }\n    }\n  }\n\n  /**\n   * @param {import('./DataTile.js').ImageLike} image The image.\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * @param {number|Array<number>} resolution Resolution.\n   */\n  setResolution(resolution) {\n    this.resolution = resolution;\n  }\n}\n\n/**\n * @param {import('./DataTile.js').ImageLike} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n  const img = /** @type {HTMLImageElement} */ (image);\n  let listening = true;\n  let decoding = false;\n  let loaded = false;\n\n  const listenerKeys = [\n    listenOnce(img, EventType.LOAD, function () {\n      loaded = true;\n      if (!decoding) {\n        loadHandler();\n      }\n    }),\n  ];\n\n  if (img.src && IMAGE_DECODE) {\n    decoding = true;\n    img\n      .decode()\n      .then(function () {\n        if (listening) {\n          loadHandler();\n        }\n      })\n      .catch(function (error) {\n        if (listening) {\n          if (loaded) {\n            loadHandler();\n          } else {\n            errorHandler();\n          }\n        }\n      });\n  } else {\n    listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n  }\n\n  return function unlisten() {\n    listening = false;\n    listenerKeys.forEach(unlistenByKey);\n  };\n}\n\n/**\n * Loads an image.\n * @param {HTMLImageElement} image Image, not yet loaded.\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\n * @return {Promise<HTMLImageElement>} Promise resolving to an `HTMLImageElement`.\n * @api\n */\nexport function load(image, src) {\n  return new Promise((resolve, reject) => {\n    function handleLoad() {\n      unlisten();\n      resolve(image);\n    }\n    function handleError() {\n      unlisten();\n      reject(new Error('Image load error'));\n    }\n    function unlisten() {\n      image.removeEventListener('load', handleLoad);\n      image.removeEventListener('error', handleError);\n    }\n    image.addEventListener('load', handleLoad);\n    image.addEventListener('error', handleError);\n    if (src) {\n      image.src = src;\n    }\n  });\n}\n\n/**\n * @param {HTMLImageElement} image Image, not yet loaded.\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\n * @return {Promise<HTMLImageElement>} Promise resolving to an `HTMLImageElement`.\n */\nexport function decodeFallback(image, src) {\n  if (src) {\n    image.src = src;\n  }\n  return image.src && IMAGE_DECODE\n    ? new Promise((resolve, reject) =>\n        image\n          .decode()\n          .then(() => resolve(image))\n          .catch((e) =>\n            image.complete && image.width ? resolve(image) : reject(e),\n          ),\n      )\n    : load(image);\n}\n\n/**\n * Loads an image and decodes it to an `ImageBitmap` if `createImageBitmap()` is supported. Returns\n * the loaded image otherwise.\n * @param {HTMLImageElement} image Image, not yet loaded.\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\n * @return {Promise<ImageBitmap|HTMLImageElement>} Promise resolving to an `ImageBitmap` or an\n * `HTMLImageElement` if `createImageBitmap()` is not supported.\n * @api\n */\nexport function decode(image, src) {\n  if (src) {\n    image.src = src;\n  }\n  return image.src && IMAGE_DECODE && CREATE_IMAGE_BITMAP\n    ? image\n        .decode()\n        .then(() => createImageBitmap(image))\n        .catch((e) => {\n          if (image.complete && image.width) {\n            return image;\n          }\n          throw e;\n        })\n    : decodeFallback(image);\n}\n\nexport default ImageWrapper;\n","/**\n * @module ol/Collection\n */\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LENGTH: 'length',\n};\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n * @template T\n */\nexport class CollectionEvent extends Event {\n  /**\n   * @param {import(\"./CollectionEventType.js\").default} type Type.\n   * @param {T} element Element.\n   * @param {number} index The index of the added or removed element.\n   */\n  constructor(type, element, index) {\n    super(type);\n\n    /**\n     * The element that is added to or removed from the collection.\n     * @type {T}\n     * @api\n     */\n    this.element = element;\n\n    /**\n     * The index of the added or removed element.\n     * @type {number}\n     * @api\n     */\n    this.index = index;\n  }\n}\n\n/***\n * @template T\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent<T>, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nclass Collection extends BaseObject {\n  /**\n   * @param {Array<T>} [array] Array.\n   * @param {Options} [options] Collection options.\n   */\n  constructor(array, options) {\n    super();\n\n    /***\n     * @type {CollectionOnSignature<T, import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {CollectionOnSignature<T, import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {CollectionOnSignature<T, void>}\n     */\n    this.un;\n\n    options = options || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.unique_ = !!options.unique;\n\n    /**\n     * @private\n     * @type {!Array<T>}\n     */\n    this.array_ = array ? array : [];\n\n    if (this.unique_) {\n      for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n        this.assertUnique_(this.array_[i], i);\n      }\n    }\n\n    this.updateLength_();\n  }\n\n  /**\n   * Remove all elements from the collection.\n   * @api\n   */\n  clear() {\n    while (this.getLength() > 0) {\n      this.pop();\n    }\n  }\n\n  /**\n   * Add elements to the collection.  This pushes each item in the provided array\n   * to the end of the collection.\n   * @param {!Array<T>} arr Array.\n   * @return {Collection<T>} This collection.\n   * @api\n   */\n  extend(arr) {\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      this.push(arr[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Iterate over each element, calling the provided callback.\n   * @param {function(T, number, Array<T>): *} f The function to call\n   *     for every element. This function takes 3 arguments (the element, the\n   *     index and the array). The return value is ignored.\n   * @api\n   */\n  forEach(f) {\n    const array = this.array_;\n    for (let i = 0, ii = array.length; i < ii; ++i) {\n      f(array[i], i, array);\n    }\n  }\n\n  /**\n   * Get a reference to the underlying Array object. Warning: if the array\n   * is mutated, no events will be dispatched by the collection, and the\n   * collection's \"length\" property won't be in sync with the actual length\n   * of the array.\n   * @return {!Array<T>} Array.\n   * @api\n   */\n  getArray() {\n    return this.array_;\n  }\n\n  /**\n   * Get the element at the provided index.\n   * @param {number} index Index.\n   * @return {T} Element.\n   * @api\n   */\n  item(index) {\n    return this.array_[index];\n  }\n\n  /**\n   * Get the length of this collection.\n   * @return {number} The length of the array.\n   * @observable\n   * @api\n   */\n  getLength() {\n    return this.get(Property.LENGTH);\n  }\n\n  /**\n   * Insert an element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  insertAt(index, elem) {\n    if (index < 0 || index > this.getLength()) {\n      throw new Error('Index out of bounds: ' + index);\n    }\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    this.array_.splice(index, 0, elem);\n    this.updateLength_();\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem, index),\n    );\n  }\n\n  /**\n   * Remove the last element of the collection and return it.\n   * Return `undefined` if the collection is empty.\n   * @return {T|undefined} Element.\n   * @api\n   */\n  pop() {\n    return this.removeAt(this.getLength() - 1);\n  }\n\n  /**\n   * Insert the provided element at the end of the collection.\n   * @param {T} elem Element.\n   * @return {number} New length of the collection.\n   * @api\n   */\n  push(elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    const n = this.getLength();\n    this.insertAt(n, elem);\n    return this.getLength();\n  }\n\n  /**\n   * Remove the first occurrence of an element from the collection.\n   * @param {T} elem Element.\n   * @return {T|undefined} The removed element or undefined if none found.\n   * @api\n   */\n  remove(elem) {\n    const arr = this.array_;\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      if (arr[i] === elem) {\n        return this.removeAt(i);\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Remove the element at the provided index and return it.\n   * Return `undefined` if the collection does not contain this index.\n   * @param {number} index Index.\n   * @return {T|undefined} Value.\n   * @api\n   */\n  removeAt(index) {\n    if (index < 0 || index >= this.getLength()) {\n      return undefined;\n    }\n    const prev = this.array_[index];\n    this.array_.splice(index, 1);\n    this.updateLength_();\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.REMOVE, prev, index)\n      ),\n    );\n    return prev;\n  }\n\n  /**\n   * Set the element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  setAt(index, elem) {\n    const n = this.getLength();\n    if (index >= n) {\n      this.insertAt(index, elem);\n      return;\n    }\n    if (index < 0) {\n      throw new Error('Index out of bounds: ' + index);\n    }\n    if (this.unique_) {\n      this.assertUnique_(elem, index);\n    }\n    const prev = this.array_[index];\n    this.array_[index] = elem;\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.REMOVE, prev, index)\n      ),\n    );\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.ADD, elem, index)\n      ),\n    );\n  }\n\n  /**\n   * @private\n   */\n  updateLength_() {\n    this.set(Property.LENGTH, this.array_.length);\n  }\n\n  /**\n   * @private\n   * @param {T} elem Element.\n   * @param {number} [except] Optional index to ignore.\n   */\n  assertUnique_(elem, except) {\n    for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n      if (this.array_[i] === elem && i !== except) {\n        throw new Error('Duplicate item added to a unique collection');\n      }\n    }\n  }\n}\n\nexport default Collection;\n","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel',\n};\n\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n","const colors = {\n\taliceblue: [240, 248, 255],\n\tantiquewhite: [250, 235, 215],\n\taqua: [0, 255, 255],\n\taquamarine: [127, 255, 212],\n\tazure: [240, 255, 255],\n\tbeige: [245, 245, 220],\n\tbisque: [255, 228, 196],\n\tblack: [0, 0, 0],\n\tblanchedalmond: [255, 235, 205],\n\tblue: [0, 0, 255],\n\tblueviolet: [138, 43, 226],\n\tbrown: [165, 42, 42],\n\tburlywood: [222, 184, 135],\n\tcadetblue: [95, 158, 160],\n\tchartreuse: [127, 255, 0],\n\tchocolate: [210, 105, 30],\n\tcoral: [255, 127, 80],\n\tcornflowerblue: [100, 149, 237],\n\tcornsilk: [255, 248, 220],\n\tcrimson: [220, 20, 60],\n\tcyan: [0, 255, 255],\n\tdarkblue: [0, 0, 139],\n\tdarkcyan: [0, 139, 139],\n\tdarkgoldenrod: [184, 134, 11],\n\tdarkgray: [169, 169, 169],\n\tdarkgreen: [0, 100, 0],\n\tdarkgrey: [169, 169, 169],\n\tdarkkhaki: [189, 183, 107],\n\tdarkmagenta: [139, 0, 139],\n\tdarkolivegreen: [85, 107, 47],\n\tdarkorange: [255, 140, 0],\n\tdarkorchid: [153, 50, 204],\n\tdarkred: [139, 0, 0],\n\tdarksalmon: [233, 150, 122],\n\tdarkseagreen: [143, 188, 143],\n\tdarkslateblue: [72, 61, 139],\n\tdarkslategray: [47, 79, 79],\n\tdarkslategrey: [47, 79, 79],\n\tdarkturquoise: [0, 206, 209],\n\tdarkviolet: [148, 0, 211],\n\tdeeppink: [255, 20, 147],\n\tdeepskyblue: [0, 191, 255],\n\tdimgray: [105, 105, 105],\n\tdimgrey: [105, 105, 105],\n\tdodgerblue: [30, 144, 255],\n\tfirebrick: [178, 34, 34],\n\tfloralwhite: [255, 250, 240],\n\tforestgreen: [34, 139, 34],\n\tfuchsia: [255, 0, 255],\n\tgainsboro: [220, 220, 220],\n\tghostwhite: [248, 248, 255],\n\tgold: [255, 215, 0],\n\tgoldenrod: [218, 165, 32],\n\tgray: [128, 128, 128],\n\tgreen: [0, 128, 0],\n\tgreenyellow: [173, 255, 47],\n\tgrey: [128, 128, 128],\n\thoneydew: [240, 255, 240],\n\thotpink: [255, 105, 180],\n\tindianred: [205, 92, 92],\n\tindigo: [75, 0, 130],\n\tivory: [255, 255, 240],\n\tkhaki: [240, 230, 140],\n\tlavender: [230, 230, 250],\n\tlavenderblush: [255, 240, 245],\n\tlawngreen: [124, 252, 0],\n\tlemonchiffon: [255, 250, 205],\n\tlightblue: [173, 216, 230],\n\tlightcoral: [240, 128, 128],\n\tlightcyan: [224, 255, 255],\n\tlightgoldenrodyellow: [250, 250, 210],\n\tlightgray: [211, 211, 211],\n\tlightgreen: [144, 238, 144],\n\tlightgrey: [211, 211, 211],\n\tlightpink: [255, 182, 193],\n\tlightsalmon: [255, 160, 122],\n\tlightseagreen: [32, 178, 170],\n\tlightskyblue: [135, 206, 250],\n\tlightslategray: [119, 136, 153],\n\tlightslategrey: [119, 136, 153],\n\tlightsteelblue: [176, 196, 222],\n\tlightyellow: [255, 255, 224],\n\tlime: [0, 255, 0],\n\tlimegreen: [50, 205, 50],\n\tlinen: [250, 240, 230],\n\tmagenta: [255, 0, 255],\n\tmaroon: [128, 0, 0],\n\tmediumaquamarine: [102, 205, 170],\n\tmediumblue: [0, 0, 205],\n\tmediumorchid: [186, 85, 211],\n\tmediumpurple: [147, 112, 219],\n\tmediumseagreen: [60, 179, 113],\n\tmediumslateblue: [123, 104, 238],\n\tmediumspringgreen: [0, 250, 154],\n\tmediumturquoise: [72, 209, 204],\n\tmediumvioletred: [199, 21, 133],\n\tmidnightblue: [25, 25, 112],\n\tmintcream: [245, 255, 250],\n\tmistyrose: [255, 228, 225],\n\tmoccasin: [255, 228, 181],\n\tnavajowhite: [255, 222, 173],\n\tnavy: [0, 0, 128],\n\toldlace: [253, 245, 230],\n\tolive: [128, 128, 0],\n\tolivedrab: [107, 142, 35],\n\torange: [255, 165, 0],\n\torangered: [255, 69, 0],\n\torchid: [218, 112, 214],\n\tpalegoldenrod: [238, 232, 170],\n\tpalegreen: [152, 251, 152],\n\tpaleturquoise: [175, 238, 238],\n\tpalevioletred: [219, 112, 147],\n\tpapayawhip: [255, 239, 213],\n\tpeachpuff: [255, 218, 185],\n\tperu: [205, 133, 63],\n\tpink: [255, 192, 203],\n\tplum: [221, 160, 221],\n\tpowderblue: [176, 224, 230],\n\tpurple: [128, 0, 128],\n\trebeccapurple: [102, 51, 153],\n\tred: [255, 0, 0],\n\trosybrown: [188, 143, 143],\n\troyalblue: [65, 105, 225],\n\tsaddlebrown: [139, 69, 19],\n\tsalmon: [250, 128, 114],\n\tsandybrown: [244, 164, 96],\n\tseagreen: [46, 139, 87],\n\tseashell: [255, 245, 238],\n\tsienna: [160, 82, 45],\n\tsilver: [192, 192, 192],\n\tskyblue: [135, 206, 235],\n\tslateblue: [106, 90, 205],\n\tslategray: [112, 128, 144],\n\tslategrey: [112, 128, 144],\n\tsnow: [255, 250, 250],\n\tspringgreen: [0, 255, 127],\n\tsteelblue: [70, 130, 180],\n\ttan: [210, 180, 140],\n\tteal: [0, 128, 128],\n\tthistle: [216, 191, 216],\n\ttomato: [255, 99, 71],\n\tturquoise: [64, 224, 208],\n\tviolet: [238, 130, 238],\n\twheat: [245, 222, 179],\n\twhite: [255, 255, 255],\n\twhitesmoke: [245, 245, 245],\n\tyellow: [255, 255, 0],\n\tyellowgreen: [154, 205, 50],\n}\n\nfor (const key in colors) Object.freeze(colors[key]);\nexport default Object.freeze(colors);","/**\n * @module color-parse\n */\nimport names from 'color-name'\n\nexport default parse\n\n/**\n * Base hues\n * http://dev.w3.org/csswg/css-color/#typedef-named-hue\n */\n//FIXME: use external hue detector\nvar baseHues = {\n\tred: 0,\n\torange: 60,\n\tyellow: 120,\n\tgreen: 180,\n\tblue: 240,\n\tpurple: 300\n}\n\n/**\n * Parse color from the string passed\n *\n * @return {Object} A space indicator `space`, an array `values` and `alpha`\n */\nfunction parse(cstr) {\n\tvar m, parts = [], alpha = 1, space\n\n\t//numeric case\n\tif (typeof cstr === 'number') {\n\t\treturn { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\t}\n\tif (typeof cstr === 'number') return { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\n\tcstr = String(cstr).toLowerCase();\n\n\t//keyword\n\tif (names[cstr]) {\n\t\tparts = names[cstr].slice()\n\t\tspace = 'rgb'\n\t}\n\n\t//reserved words\n\telse if (cstr === 'transparent') {\n\t\talpha = 0\n\t\tspace = 'rgb'\n\t\tparts = [0, 0, 0]\n\t}\n\n\t//hex\n\telse if (cstr[0] === '#') {\n\t\tvar base = cstr.slice(1)\n\t\tvar size = base.length\n\t\tvar isShort = size <= 4\n\t\talpha = 1\n\n\t\tif (isShort) {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[0], 16),\n\t\t\t\tparseInt(base[1] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[2], 16)\n\t\t\t]\n\t\t\tif (size === 4) {\n\t\t\t\talpha = parseInt(base[3] + base[3], 16) / 255\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[3], 16),\n\t\t\t\tparseInt(base[4] + base[5], 16)\n\t\t\t]\n\t\t\tif (size === 8) {\n\t\t\t\talpha = parseInt(base[6] + base[7], 16) / 255\n\t\t\t}\n\t\t}\n\n\t\tif (!parts[0]) parts[0] = 0\n\t\tif (!parts[1]) parts[1] = 0\n\t\tif (!parts[2]) parts[2] = 0\n\n\t\tspace = 'rgb'\n\t}\n\n\t// color space\n\telse if (m = /^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\\s*\\(([^\\)]*)\\)/.exec(cstr)) {\n\t\tvar name = m[1]\n\t\tspace = name.replace(/a$/, '')\n\t\tvar dims = space === 'cmyk' ? 4 : space === 'gray' ? 1 : 3\n\t\tparts = m[2].trim().split(/\\s*[,\\/]\\s*|\\s+/)\n\n\t\t// color(srgb-linear x x x) -> srgb-linear(x x x)\n\t\tif (space === 'color') space = parts.shift()\n\n\t\tparts = parts.map(function (x, i) {\n\t\t\t//<percentage>\n\t\t\tif (x[x.length - 1] === '%') {\n\t\t\t\tx = parseFloat(x) / 100\n\t\t\t\t// alpha -> 0..1\n\t\t\t\tif (i === 3) return x\n\t\t\t\t// rgb -> 0..255\n\t\t\t\tif (space === 'rgb') return x * 255\n\t\t\t\t// hsl, hwb H -> 0..100\n\t\t\t\tif (space[0] === 'h') return x * 100\n\t\t\t\t// lch, lab L -> 0..100\n\t\t\t\tif (space[0] === 'l' && !i) return x * 100\n\t\t\t\t// lab A B -> -125..125\n\t\t\t\tif (space === 'lab') return x * 125\n\t\t\t\t// lch C -> 0..150, H -> 0..360\n\t\t\t\tif (space === 'lch') return i < 2 ? x * 150 : x * 360\n\t\t\t\t// oklch/oklab L -> 0..1\n\t\t\t\tif (space[0] === 'o' && !i) return x\n\t\t\t\t// oklab A B -> -0.4..0.4\n\t\t\t\tif (space === 'oklab') return x * 0.4\n\t\t\t\t// oklch C -> 0..0.4, H -> 0..360\n\t\t\t\tif (space === 'oklch') return i < 2 ? x * 0.4 : x * 360\n\t\t\t\t// color(xxx) -> 0..1\n\t\t\t\treturn x\n\t\t\t}\n\n\t\t\t//hue\n\t\t\tif (space[i] === 'h' || (i === 2 && space[space.length - 1] === 'h')) {\n\t\t\t\t//<base-hue>\n\t\t\t\tif (baseHues[x] !== undefined) return baseHues[x]\n\t\t\t\t//<deg>\n\t\t\t\tif (x.endsWith('deg')) return parseFloat(x)\n\t\t\t\t//<turn>\n\t\t\t\tif (x.endsWith('turn')) return parseFloat(x) * 360\n\t\t\t\tif (x.endsWith('grad')) return parseFloat(x) * 360 / 400\n\t\t\t\tif (x.endsWith('rad')) return parseFloat(x) * 180 / Math.PI\n\t\t\t}\n\t\t\tif (x === 'none') return 0\n\t\t\treturn parseFloat(x)\n\t\t});\n\n\t\talpha = parts.length > dims ? parts.pop() : 1\n\t}\n\n\t//named channels case\n\telse if (/[0-9](?:\\s|\\/|,)/.test(cstr)) {\n\t\tparts = cstr.match(/([0-9]+)/g).map(function (value) {\n\t\t\treturn parseFloat(value)\n\t\t})\n\n\t\tspace = cstr.match(/([a-z])/ig)?.join('')?.toLowerCase() || 'rgb'\n\t}\n\n\treturn {\n\t\tspace,\n\t\tvalues: parts,\n\t\talpha\n\t}\n}\n","/**\n * @module color-space/hsl\n */\nimport rgb from './rgb.js';\n\nvar hsl = {\n\tname: 'hsl',\n\tmin: [0, 0, 0],\n\tmax: [360, 100, 100],\n\tchannel: ['hue', 'saturation', 'lightness'],\n\talias: ['HSL'],\n\n\trgb: function (hsl) {\n\t\tvar h = hsl[0] / 360, s = hsl[1] / 100, l = hsl[2] / 100, t1, t2, t3, rgb, val, i = 0;\n\n\t\tif (s === 0) return val = l * 255, [val, val, val];\n\n\t\tt2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\tt1 = 2 * l - t2;\n\n\t\trgb = [0, 0, 0];\n\t\tfor (; i < 3;) {\n\t\t\tt3 = h + 1 / 3 * - (i - 1);\n\t\t\tt3 < 0 ? t3++ : t3 > 1 && t3--;\n\t\t\tval = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 :\n\t\t\t\t2 * t3 < 1 ? t2 :\n\t\t\t\t\t3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 :\n\t\t\t\t\t\tt1;\n\t\t\trgb[i++] = val * 255;\n\t\t}\n\n\t\treturn rgb;\n\t}\n};\n\nexport default (hsl);\n\n\n//extend rgb\nrgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255,\n\t\tg = rgb[1] / 255,\n\t\tb = rgb[2] / 255,\n\t\tmin = Math.min(r, g, b),\n\t\tmax = Math.max(r, g, b),\n\t\tdelta = max - min,\n\t\th, s, l;\n\n\tif (max === min) {\n\t\th = 0;\n\t}\n\telse if (r === max) {\n\t\th = (g - b) / delta;\n\t}\n\telse if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t}\n\telse if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\t//FIXME h is possibly undefined\n\t//@ts-ignore\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t}\n\telse if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t}\n\telse {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n","/** @module  color-rgba */\nimport parse from 'color-parse'\nimport rgb from 'color-space/rgb.js'\nimport hsl from 'color-space/hsl.js'\n\nexport default function rgba(color) {\n\t// template literals\n\tif (Array.isArray(color) && color.raw) color = String.raw(...arguments)\n\tif (color instanceof Number) color = +color\n\n\tvar values, i, l\n\n\t//attempt to parse non-array arguments\n\tvar parsed = parse(color)\n\n\tif (!parsed.space) return []\n\n\tconst min = parsed.space[0] === 'h' ? hsl.min : rgb.min\n\tconst max = parsed.space[0] === 'h' ? hsl.max : rgb.max\n\n\tvalues = Array(3)\n\tvalues[0] = Math.min(Math.max(parsed.values[0], min[0]), max[0])\n\tvalues[1] = Math.min(Math.max(parsed.values[1], min[1]), max[1])\n\tvalues[2] = Math.min(Math.max(parsed.values[2], min[2]), max[2])\n\n\tif (parsed.space[0] === 'h') {\n\t\tvalues = hsl.rgb(values)\n\t}\n\n\tvalues.push(Math.min(Math.max(parsed.alpha, 0), 1))\n\n\treturn values\n}\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend',\n\n  /**\n   * Triggered when loading of additional map data (tiles, images, features) starts.\n   * @event module:ol/MapEvent~MapEvent#loadstart\n   * @api\n   */\n  LOADSTART: 'loadstart',\n\n  /**\n   * Triggered when loading of additional map data has completed.\n   * @event module:ol/MapEvent~MapEvent#loadend\n   * @api\n   */\n  LOADEND: 'loadend',\n};\n\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n","/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport {assert} from './asserts.js';\nimport {listen, unlistenByKey} from './events.js';\n\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n\n/***\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object~BaseObject} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature.js';\n * import Polygon from 'ol/geom/Polygon.js';\n * import Point from 'ol/geom/Point.js';\n *\n * const feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon',\n * });\n *\n * // get the polygon geometry\n * const poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * const point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n */\nclass Feature extends BaseObject {\n  /**\n   * @param {Geometry|ObjectWithGeometry<Geometry>} [geometryOrProperties]\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n  constructor(geometryOrProperties) {\n    super();\n\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {FeatureOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = undefined;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.geometryName_ = 'geometry';\n\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n    this.style_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n    this.styleFunction_ = undefined;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.geometryChangeKey_ = null;\n\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n\n    if (geometryOrProperties) {\n      if (\n        typeof (\n          /** @type {?} */ (geometryOrProperties).getSimplifiedGeometry\n        ) === 'function'\n      ) {\n        const geometry = /** @type {Geometry} */ (geometryOrProperties);\n        this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        const properties = geometryOrProperties;\n        this.setProperties(properties);\n      }\n    }\n  }\n\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature<Geometry>} The clone.\n   * @api\n   */\n  clone() {\n    const clone = /** @type {Feature<Geometry>} */ (\n      new Feature(this.hasProperties() ? this.getProperties() : null)\n    );\n    clone.setGeometryName(this.getGeometryName());\n    const geometry = this.getGeometry();\n    if (geometry) {\n      clone.setGeometry(/** @type {Geometry} */ (geometry.clone()));\n    }\n    const style = this.getStyle();\n    if (style) {\n      clone.setStyle(style);\n    }\n    return clone;\n  }\n\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {Geometry|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n  getGeometry() {\n    return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n  getGeometryName() {\n    return this.geometryName_;\n  }\n\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChanged_() {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n    const geometry = this.getGeometry();\n    if (geometry) {\n      this.geometryChangeKey_ = listen(\n        geometry,\n        EventType.CHANGE,\n        this.handleGeometryChange_,\n        this,\n      );\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {Geometry|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n  setGeometry(geometry) {\n    this.set(this.geometryName_, geometry);\n  }\n\n  /**\n   * Set the style for the feature to override the layer style.  This can be a\n   * single style object, an array of styles, or a function that takes a\n   * resolution and returns an array of styles. To unset the feature style, call\n   * `setStyle()` without arguments or a falsey value.\n   * @param {import(\"./style/Style.js\").StyleLike} [style] Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n  setStyle(style) {\n    this.style_ = style;\n    this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n    this.changed();\n  }\n\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n  setId(id) {\n    this.id_ = id;\n    this.changed();\n  }\n\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n  setGeometryName(name) {\n    this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.geometryName_ = name;\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.handleGeometryChanged_();\n  }\n}\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  }\n  /**\n   * @type {Array<import(\"./style/Style.js\").default>}\n   */\n  let styles;\n  if (Array.isArray(obj)) {\n    styles = obj;\n  } else {\n    assert(\n      typeof (/** @type {?} */ (obj).getZIndex) === 'function',\n      'Expected an `ol/style/Style` or an array of `ol/style/Style.js`',\n    );\n    const style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n    styles = [style];\n  }\n  return function () {\n    return styles;\n  };\n}\nexport default Feature;\n","/**\n * @module ol/MapBrowserEventHandler\n */\n\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport {PASSIVE_EVENT_LISTENERS} from './has.js';\nimport {listen, unlistenByKey} from './events.js';\n\nclass MapBrowserEventHandler extends Target {\n  /**\n   * @param {import(\"./Map.js\").default} map The map with the viewport to listen to events on.\n   * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n   */\n  constructor(map, moveTolerance) {\n    super(map);\n\n    /**\n     * This is the element that we will listen to the real events on.\n     * @type {import(\"./Map.js\").default}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {ReturnType<typeof setTimeout>}\n     * @private\n     */\n    this.clickTimeoutId_;\n\n    /**\n     * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n     * @type {boolean}\n     */\n    this.emulateClicks_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_ = false;\n\n    /**\n     * @type {!Array<import(\"./events.js\").EventsKey>}\n     * @private\n     */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n\n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * Set on pointerdown.\n     * @type {PointerEvent|null}\n     * @private\n     */\n    this.down_ = null;\n\n    const element = this.map_.getViewport();\n\n    /**\n     * @type {Array<PointerEvent>}\n     * @private\n     */\n    this.activePointers_ = [];\n\n    /**\n     * @type {!Object<number, Event>}\n     * @private\n     */\n    this.trackedTouches_ = {};\n\n    this.element_ = element;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.pointerdownListenerKey_ = listen(\n      element,\n      PointerEventType.POINTERDOWN,\n      this.handlePointerDown_,\n      this,\n    );\n\n    /**\n     * @type {PointerEvent}\n     * @private\n     */\n    this.originalPointerMoveEvent_;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.relayedListenerKey_ = listen(\n      element,\n      PointerEventType.POINTERMOVE,\n      this.relayMoveEvent_,\n      this,\n    );\n\n    /**\n     * @private\n     */\n    this.boundHandleTouchMove_ = this.handleTouchMove_.bind(this);\n\n    this.element_.addEventListener(\n      EventType.TOUCHMOVE,\n      this.boundHandleTouchMove_,\n      PASSIVE_EVENT_LISTENERS ? {passive: false} : false,\n    );\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  emulateClick_(pointerEvent) {\n    let newEvent = new MapBrowserEvent(\n      MapBrowserEventType.CLICK,\n      this.map_,\n      pointerEvent,\n    );\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== undefined) {\n      // double-click\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = undefined;\n      newEvent = new MapBrowserEvent(\n        MapBrowserEventType.DBLCLICK,\n        this.map_,\n        pointerEvent,\n      );\n      this.dispatchEvent(newEvent);\n    } else {\n      // click\n      this.clickTimeoutId_ = setTimeout(() => {\n        this.clickTimeoutId_ = undefined;\n        const newEvent = new MapBrowserEvent(\n          MapBrowserEventType.SINGLECLICK,\n          this.map_,\n          pointerEvent,\n        );\n        this.dispatchEvent(newEvent);\n      }, 250);\n    }\n  }\n\n  /**\n   * Keeps track on how many pointers are currently active.\n   *\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  updateActivePointers_(pointerEvent) {\n    const event = pointerEvent;\n    const id = event.pointerId;\n\n    if (\n      event.type == MapBrowserEventType.POINTERUP ||\n      event.type == MapBrowserEventType.POINTERCANCEL\n    ) {\n      delete this.trackedTouches_[id];\n      for (const pointerId in this.trackedTouches_) {\n        if (this.trackedTouches_[pointerId].target !== event.target) {\n          // Some platforms assign a new pointerId when the target changes.\n          // If this happens, delete one tracked pointer. If there is more\n          // than one tracked pointer for the old target, it will be cleared\n          // by subsequent POINTERUP events from other pointers.\n          delete this.trackedTouches_[pointerId];\n          break;\n        }\n      }\n    } else if (\n      event.type == MapBrowserEventType.POINTERDOWN ||\n      event.type == MapBrowserEventType.POINTERMOVE\n    ) {\n      this.trackedTouches_[id] = event;\n    }\n    this.activePointers_ = Object.values(this.trackedTouches_);\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerUp_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserEvent(\n      MapBrowserEventType.POINTERUP,\n      this.map_,\n      pointerEvent,\n      undefined,\n      undefined,\n      this.activePointers_,\n    );\n    this.dispatchEvent(newEvent);\n\n    // We emulate click events on left mouse button click, touch contact, and pen\n    // contact. isMouseActionButton returns true in these cases (evt.button is set\n    // to 0).\n    // See http://www.w3.org/TR/pointerevents/#button-states\n    // We only fire click, singleclick, and doubleclick if nobody has called\n    // event.preventDefault().\n    if (\n      this.emulateClicks_ &&\n      !newEvent.defaultPrevented &&\n      !this.dragging_ &&\n      this.isMouseActionButton_(pointerEvent)\n    ) {\n      this.emulateClick_(this.down_);\n    }\n\n    if (this.activePointers_.length === 0) {\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} If the left mouse button was pressed.\n   * @private\n   */\n  isMouseActionButton_(pointerEvent) {\n    return pointerEvent.button === 0;\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerDown_(pointerEvent) {\n    this.emulateClicks_ = this.activePointers_.length === 0;\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserEvent(\n      MapBrowserEventType.POINTERDOWN,\n      this.map_,\n      pointerEvent,\n      undefined,\n      undefined,\n      this.activePointers_,\n    );\n    this.dispatchEvent(newEvent);\n\n    this.down_ = new PointerEvent(pointerEvent.type, pointerEvent);\n    Object.defineProperty(this.down_, 'target', {\n      writable: false,\n      value: pointerEvent.target,\n    });\n\n    if (this.dragListenerKeys_.length === 0) {\n      const doc = this.map_.getOwnerDocument();\n      this.dragListenerKeys_.push(\n        listen(\n          doc,\n          MapBrowserEventType.POINTERMOVE,\n          this.handlePointerMove_,\n          this,\n        ),\n        listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n         * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n         * the `pointerup` and `pointermove` listeners.\n         *\n         * The reason for this is the following: `TouchSource.vacuumTouches_()`\n         * issues `pointercancel` events, when there was no `touchend` for a\n         * `touchstart`. Now, let's say a first `touchstart` is registered on\n         * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n         * But `documentPointerEventHandler_` doesn't know about the first\n         * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n         * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n         * only registered there.\n         */\n        listen(\n          this.element_,\n          MapBrowserEventType.POINTERCANCEL,\n          this.handlePointerUp_,\n          this,\n        ),\n      );\n      if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n        this.dragListenerKeys_.push(\n          listen(\n            this.element_.getRootNode(),\n            MapBrowserEventType.POINTERUP,\n            this.handlePointerUp_,\n            this,\n          ),\n        );\n      }\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerMove_(pointerEvent) {\n    // Between pointerdown and pointerup, pointermove events are triggered.\n    // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n    // moved a significant distance.\n    if (this.isMoving_(pointerEvent)) {\n      this.updateActivePointers_(pointerEvent);\n      this.dragging_ = true;\n      const newEvent = new MapBrowserEvent(\n        MapBrowserEventType.POINTERDRAG,\n        this.map_,\n        pointerEvent,\n        this.dragging_,\n        undefined,\n        this.activePointers_,\n      );\n      this.dispatchEvent(newEvent);\n    }\n  }\n\n  /**\n   * Wrap and relay a pointermove event.\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  relayMoveEvent_(pointerEvent) {\n    this.originalPointerMoveEvent_ = pointerEvent;\n    const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(\n      new MapBrowserEvent(\n        MapBrowserEventType.POINTERMOVE,\n        this.map_,\n        pointerEvent,\n        dragging,\n      ),\n    );\n  }\n\n  /**\n   * Flexible handling of a `touch-action: none` css equivalent: because calling\n   * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n   * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n   * when an interaction (currently `DragPan` handles the event.\n   * @param {TouchEvent} event Event.\n   * @private\n   */\n  handleTouchMove_(event) {\n    // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n    // may not be initialized yet when we get here on a platform without native pointer events,\n    // when elm-pep is used as pointer events polyfill.\n    const originalEvent = this.originalPointerMoveEvent_;\n    if (\n      (!originalEvent || originalEvent.defaultPrevented) &&\n      (typeof event.cancelable !== 'boolean' || event.cancelable === true)\n    ) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} Is moving.\n   * @private\n   */\n  isMoving_(pointerEvent) {\n    return (\n      this.dragging_ ||\n      Math.abs(pointerEvent.clientX - this.down_.clientX) >\n        this.moveTolerance_ ||\n      Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_\n    );\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    if (this.relayedListenerKey_) {\n      unlistenByKey(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    this.element_.removeEventListener(\n      EventType.TOUCHMOVE,\n      this.boundHandleTouchMove_,\n    );\n\n    if (this.pointerdownListenerKey_) {\n      unlistenByKey(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n\n    this.element_ = null;\n    super.disposeInternal();\n  }\n}\n\nexport default MapBrowserEventHandler;\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @protected\n     */\n    this.disposed = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed) {\n      this.disposed = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * CIE LUV (C'est la vie)\n *\n * @module color-space/luv\n */\nimport xyz from './xyz.js';\n\nvar luv = {\n\tname: 'luv',\n\t//NOTE: luv has no rigidly defined limits\n\t//easyrgb fails to get proper coords\n\t//boronine states no rigid limits\n\t//colorMine refers this ones:\n\tmin: [0, -134, -140],\n\tmax: [100, 224, 122],\n\tchannel: ['lightness', 'u', 'v'],\n\talias: ['LUV', 'cieluv', 'cie1976'],\n\n\txyz: function (arg, i, o) {\n\t\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\t\tl = arg[0], u = arg[1], v = arg[2];\n\n\t\tif (l === 0) return [0, 0, 0];\n\n\t\t//get constants\n\t\t//var e = 0.008856451679035631; //(6/29)^3\n\t\tvar k = 0.0011070564598794539; //(3/29)^3\n\n\t\t//get illuminant/observer\n\t\ti = i || 'D65';\n\t\to = o || 2;\n\n\t\txn = xyz.whitepoint[o][i][0];\n\t\tyn = xyz.whitepoint[o][i][1];\n\t\tzn = xyz.whitepoint[o][i][2];\n\n\t\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\t\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\t\t// un = 0.19783000664283;\n\t\t// vn = 0.46831999493879;\n\n\n\t\t_u = u / (13 * l) + un || 0;\n\t\t_v = v / (13 * l) + vn || 0;\n\n\t\ty = l > 8 ? yn * Math.pow((l + 16) / 116, 3) : yn * l * k;\n\n\t\t//wikipedia method\n\t\tx = y * 9 * _u / (4 * _v) || 0;\n\t\tz = y * (12 - 3 * _u - 20 * _v) / (4 * _v) || 0;\n\n\t\t//boronine method\n\t\t//https://github.com/boronine/husl/blob/master/husl.coffee#L201\n\t\t// x = 0 - (9 * y * _u) / ((_u - 4) * _v - _u * _v);\n\t\t// z = (9 * y - (15 * _v * y) - (_v * x)) / (3 * _v);\n\n\t\treturn [x, y, z];\n\t}\n};\n\nexport default (luv);\n\n// http://www.brucelindbloom.com/index.html?Equations.html\n// https://github.com/boronine/husl/blob/master/husl.coffee\n//i - illuminant\n//o - observer\nxyz.luv = function (arg, i, o) {\n\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\n\t//get constants\n\tvar e = 0.008856451679035631; //(6/29)^3\n\tvar k = 903.2962962962961; //(29/3)^3\n\n\t//get illuminant/observer coords\n\ti = i || 'D65';\n\to = o || 2;\n\n\txn = xyz.whitepoint[o][i][0];\n\tyn = xyz.whitepoint[o][i][1];\n\tzn = xyz.whitepoint[o][i][2];\n\n\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\n\n\tx = arg[0], y = arg[1], z = arg[2];\n\n\n\t_u = (4 * x) / (x + (15 * y) + (3 * z)) || 0;\n\t_v = (9 * y) / (x + (15 * y) + (3 * z)) || 0;\n\n\tvar yr = y / yn;\n\n\tl = yr <= e ? k * yr : 116 * Math.pow(yr, 1 / 3) - 16;\n\n\tu = 13 * l * (_u - un);\n\tv = 13 * l * (_v - vn);\n\n\treturn [l, u, v];\n};\n","/**\n * Cylindrical CIE LUV\n *\n * @module color-space/lchuv\n */\nimport luv from './luv.js';\nimport xyz from './xyz.js';\n\n// cylindrical luv\nvar lchuv = {\n\tname: 'lchuv',\n\tchannel: ['lightness', 'chroma', 'hue'],\n\talias: ['LCHuv', 'cielchuv'],\n\tmin: [0, 0, 0],\n\tmax: [100, 100, 360],\n\n\tluv: function (luv) {\n\t\tvar l = luv[0],\n\t\t\tc = luv[1],\n\t\t\th = luv[2],\n\t\t\tu, v, hr;\n\n\t\thr = h / 360 * 2 * Math.PI;\n\t\tu = c * Math.cos(hr);\n\t\tv = c * Math.sin(hr);\n\t\treturn [l, u, v];\n\t},\n\n\txyz: function (arg) {\n\t\treturn luv.xyz(lchuv.luv(arg));\n\t}\n};\n\nexport default (lchuv);\n\nluv.lchuv = function (luv) {\n\tvar l = luv[0], u = luv[1], v = luv[2];\n\n\tvar c = Math.sqrt(u * u + v * v);\n\tvar hr = Math.atan2(v, u);\n\tvar h = hr * 360 / 2 / Math.PI;\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\treturn [l, c, h]\n};\n\nxyz.lchuv = function (arg) {\n\treturn luv.lchuv(xyz.luv(arg));\n};\n","/**\n * CIE XYZ\n *\n * @module  color-space/xyz\n */\nimport rgb from './rgb.js';\n\nconst xyz = {\n\tname: 'xyz',\n\tmin: [0, 0, 0],\n\tchannel: ['X', 'Y', 'Z'],\n\talias: ['XYZ', 'ciexyz', 'cie1931'],\n\n\t// Whitepoint reference values with observer/illuminant\n\t// http://en.wikipedia.org/wiki/Standard_illuminant\n\twhitepoint: {\n\t\t//1931 2\n\t\t2: {\n\t\t\t//incadescent\n\t\t\tA: [109.85, 100, 35.585],\n\t\t\t// B:[],\n\t\t\tC: [98.074, 100, 118.232],\n\t\t\tD50: [96.422, 100, 82.521],\n\t\t\tD55: [95.682, 100, 92.149],\n\t\t\t//daylight\n\t\t\tD65: [95.045592705167, 100, 108.9057750759878],\n\t\t\tD75: [94.972, 100, 122.638],\n\t\t\t//flourescent\n\t\t\t// F1: [],\n\t\t\tF2: [99.187, 100, 67.395],\n\t\t\t// F3: [],\n\t\t\t// F4: [],\n\t\t\t// F5: [],\n\t\t\t// F6:[],\n\t\t\tF7: [95.044, 100, 108.755],\n\t\t\t// F8: [],\n\t\t\t// F9: [],\n\t\t\t// F10: [],\n\t\t\tF11: [100.966, 100, 64.370],\n\t\t\t// F12: [],\n\t\t\tE: [100, 100, 100]\n\t\t},\n\n\t\t//1964  10\n\t\t10: {\n\t\t\t//incadescent\n\t\t\tA: [111.144, 100, 35.200],\n\t\t\tC: [97.285, 100, 116.145],\n\t\t\tD50: [96.720, 100, 81.427],\n\t\t\tD55: [95.799, 100, 90.926],\n\t\t\t//daylight\n\t\t\tD65: [94.811, 100, 107.304],\n\t\t\tD75: [94.416, 100, 120.641],\n\t\t\t//flourescent\n\t\t\tF2: [103.280, 100, 69.026],\n\t\t\tF7: [95.792, 100, 107.687],\n\t\t\tF11: [103.866, 100, 65.627],\n\t\t\tE: [100, 100, 100]\n\t\t}\n\t}\n};\n\n\n/**\n * Top values are the whitepoints top values, default are D65\n */\nxyz.max = xyz.whitepoint[2].D65;\n\n\n/**\n * Transform xyz to rgb\n *\n * @param {Array<number>} _xyz Array of xyz values\n * @param {Array<number>} white Whitepoint reference\n * @return {Array<number>} RGB values\n */\nxyz.rgb = function (_xyz, white) {\n\t// FIXME: make sure we have to divide like this. Probably we have to replace matrix as well then\n\twhite = white || xyz.whitepoint[2].E;\n\n\tvar x = _xyz[0] / white[0],\n\t\ty = _xyz[1] / white[1],\n\t\tz = _xyz[2] / white[2],\n\t\tr, g, b;\n\n\t// assume sRGB\n\t// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n\tr = (x * 3.240969941904521) + (y * -1.537383177570093) + (z * -0.498610760293);\n\tg = (x * -0.96924363628087) + (y * 1.87596750150772) + (z * 0.041555057407175);\n\tb = (x * 0.055630079696993) + (y * -0.20397695888897) + (z * 1.056971514242878);\n\n\tr = r > 0.0031308 ? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r = (r * 12.92);\n\n\tg = g > 0.0031308 ? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g = (g * 12.92);\n\n\tb = b > 0.0031308 ? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b = (b * 12.92);\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n}\n\n\n\n/**\n * RGB to XYZ\n *\n * @param {Array<number>} rgb RGB channels\n *\n * @return {Array<number>} XYZ channels\n */\nrgb.xyz = function (rgb, white) {\n\tvar r = rgb[0] / 255,\n\t\tg = rgb[1] / 255,\n\t\tb = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.41239079926595) + (g * 0.35758433938387) + (b * 0.18048078840183);\n\tvar y = (r * 0.21263900587151) + (g * 0.71516867876775) + (b * 0.072192315360733);\n\tvar z = (r * 0.019330818715591) + (g * 0.11919477979462) + (b * 0.95053215224966);\n\n\twhite = white || xyz.whitepoint[2].E;\n\n\treturn [x * white[0], y * white[1], z * white[2]];\n};\n\n\n\nexport default xyz;\n","/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map event.\n */\nclass MapEvent extends Event {\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./Map.js\").default} map Map.\n   * @param {?import(\"./Map.js\").FrameState} [frameState] Frame state.\n   */\n  constructor(type, map, frameState) {\n    super(type);\n\n    /**\n     * The map where the event occurred.\n     * @type {import(\"./Map.js\").default}\n     * @api\n     */\n    this.map = map;\n\n    /**\n     * The frame state at the time of the event.\n     * @type {?import(\"./Map.js\").FrameState}\n     * @api\n     */\n    this.frameState = frameState !== undefined ? frameState : null;\n  }\n}\n\nexport default MapEvent;\n","/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \n  released under the CeCILL-B license (French BSD license)\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\n*/\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable.js'\nimport ol_control_Control from 'ol/control/Control.js'\nimport ol_layer_Tile from 'ol/layer/Tile.js'\nimport ol_layer_Vector from 'ol/layer/Vector.js'\nimport ol_layer_VectorTile from 'ol/layer/VectorTile.js'\n// ol < 6 compatibility VectorImage is not defined\n// import ol_layer_VectorImage from 'ol/layer/VectorImage.js'\nimport ol_layer_Image from 'ol/layer/Image.js'\nimport ol_layer_Heatmap from 'ol/layer/Heatmap.js'\nimport {intersects as ol_extent_intersects} from 'ol/extent.js'\n\nimport ol_ext_element from '../util/element.js'\n\n/** Layer Switcher Control.\n * @fires select\n * @fires drawlist\n * @fires toggle\n * @fires reorder-start\n * @fires reorder-end\n * @fires layer:visible\n * @fires layer:opacity\n * @fires layer:keydown\n * \n * @constructor\n * @extends {ol_control_Control}\n * @param {Object=} options\n *  @param {boolean} options.selection enable layer selection when click on the title\n *  @param {function} options.displayInLayerSwitcher function that takes a layer and return a boolean if the layer is displayed in the switcher, default test the displayInLayerSwitcher layer attribute\n *  @param {boolean} options.show_progress show a progress bar on tile layers, default false\n *  @param {boolean} options.mouseover show the panel on mouseover, default false\n *  @param {boolean} options.reordering allow layer reordering, default true\n *  @param {boolean} options.trash add a trash button to delete the layer, default false\n *  @param {function} options.oninfo callback on click on info button, if none no info button is shown DEPRECATED: use on(info) instead\n *  @param {boolean} options.extent add an extent button to zoom to the extent of the layer\n *  @param {function} options.onextent callback when click on extent, default fits view to extent\n *  @param {number} options.drawDelay delay in ms to redraw the layer (usefull to prevent flickering when manipulating the layers)\n *  @param {boolean} options.collapsed collapse the layerswitcher at beginning, default true\n *  @param {ol.layer.Group} options.layerGroup a layer group to display in the switcher, default display all layers of the map\n *  @param {boolean} options.noScroll prevent handle scrolling, default false\n *  @param {boolean} options.counter layer counter, default false\n *  @param {function} options.onchangeCheck optional callback on click on checkbox, you can call this method for doing operations after check/uncheck a layer\n *\n * Layers attributes that control the switcher\n *\t- allwaysOnTop {boolean} true to force layer stay on top of the others while reordering, default false\n *\t- displayInLayerSwitcher {boolean} display the layer in switcher, default true\n *\t- noSwitcherDelete {boolean} to prevent layer deletion (w. trash option = true), default false\n */\nvar ol_control_LayerSwitcher = class olcontrolLayerSwitcher extends ol_control_Control {\n  constructor(options) {\n    options = options || {}\n    var element = ol_ext_element.create('DIV', {\n      className: options.switcherClass || 'ol-layerswitcher'\n    })\n    super({\n      element: element,\n      target: options.target\n    })\n    \n    var self = this\n    this.dcount = 0\n    this.show_progress = options.show_progress\n    this.oninfo = (typeof (options.oninfo) == 'function' ? options.oninfo : null)\n    this.onextent = (typeof (options.onextent) == 'function' ? options.onextent : null)\n    this.hasextent = options.extent || options.onextent\n    this.hastrash = options.trash\n    this.reordering = (options.reordering !== false)\n    this._layers = []\n    this._layerGroup = (options.layerGroup && options.layerGroup.getLayers) ? options.layerGroup : null\n    this.onchangeCheck = (typeof (options.onchangeCheck) == \"function\" ? options.onchangeCheck : null)\n\n    // displayInLayerSwitcher\n    if (typeof (options.displayInLayerSwitcher) === 'function') {\n      this.displayInLayerSwitcher = options.displayInLayerSwitcher\n    }\n\n    // Insert in the map\n    if (!options.target) {\n      element.classList.add('ol-unselectable')\n      element.classList.add('ol-control')\n      element.classList.add(options.collapsed !== false ? 'ol-collapsed' : 'ol-forceopen')\n      if (options.counter) element.classList.add('ol-counter')\n\n      this.counter = ol_ext_element.create('SPAN', {\n        class: 'ol-counter',\n        text: 0,\n        parent: element\n      });\n      this.button = ol_ext_element.create('BUTTON', {\n        type: 'button',\n        parent: element\n      })\n      this.button.addEventListener('touchstart', function (e) {\n        element.classList.toggle('ol-forceopen')\n        element.classList.add('ol-collapsed')\n        self.dispatchEvent({ type: 'toggle', collapsed: element.classList.contains('ol-collapsed') })\n        e.preventDefault()\n        self.overflow()\n      })\n      this.button.addEventListener('click', function () {\n        element.classList.toggle('ol-forceopen')\n        element.classList.add('ol-collapsed')\n        self.dispatchEvent({ type: 'toggle', collapsed: !element.classList.contains('ol-forceopen') })\n        self.overflow()\n      })\n\n      if (options.mouseover) {\n        element.addEventListener('mouseleave', function () {\n          element.classList.add(\"ol-collapsed\")\n          self.dispatchEvent({ type: 'toggle', collapsed: true })\n        })\n        element.addEventListener('mouseover', function () {\n          element.classList.remove(\"ol-collapsed\")\n          self.dispatchEvent({ type: 'toggle', collapsed: false })\n        })\n      }\n\n      if (options.minibar)\n        options.noScroll = true\n      if (!options.noScroll) {\n        this.topv = ol_ext_element.create('DIV', {\n          className: 'ol-switchertopdiv',\n          parent: element,\n          click: function () {\n            self.overflow(\"+50%\")\n          }\n        })\n\n        this.botv = ol_ext_element.create('DIV', {\n          className: 'ol-switcherbottomdiv',\n          parent: element,\n          click: function () {\n            self.overflow(\"-50%\")\n          }\n        })\n      }\n      this._noScroll = options.noScroll\n    }\n\n    this.panel_ = ol_ext_element.create('UL', {\n      className: 'panel',\n    })\n    this.panelContainer_ = ol_ext_element.create('DIV', {\n      className: 'panel-container',\n      html: this.panel_,\n      parent: element\n    })\n    // Handle mousewheel\n    if (!options.target && !options.noScroll) {\n      ol_ext_element.addListener(this.panel_, 'mousewheel DOMMouseScroll onmousewheel', function (e) {\n        if (self.overflow(Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))))) {\n          e.stopPropagation()\n          e.preventDefault()\n        }\n      })\n    }\n\n    this.header_ = ol_ext_element.create('LI', {\n      className: 'ol-header',\n      parent: this.panel_\n    })\n\n    this.set('drawDelay', options.drawDelay || 0)\n    this.set('selection', options.selection)\n\n    if (options.minibar) {\n      // Wait init complete (for child classes)\n      setTimeout(function () {\n        var mbar = ol_ext_element.scrollDiv(this.panelContainer_, {\n          mousewheel: true,\n          vertical: true,\n          minibar: true\n        })\n        this.on(['drawlist', 'toggle'], function () {\n          mbar.refresh()\n        })\n      }.bind(this))\n    }\n  }\n  /** Test if a layer should be displayed in the switcher\n   * @param {ol.layer} layer\n   * @return {boolean} true if the layer is displayed\n   */\n  displayInLayerSwitcher(layer) {\n    return (layer.get('displayInLayerSwitcher') !== false)\n  }\n  /**\n   * Set the map instance the control is associated with.\n   * @param {_ol_Map_} map The map instance.\n   */\n  setMap(map) {\n    super.setMap(map)\n    this.drawPanel()\n\n    if (this._listener) {\n      for (var i in this._listener){\n        ol_Observable_unByKey(this._listener[i])\n      }\n    }\n    this._listener = null\n\n    // Get change (new layer added or removed)\n    if (map) {\n      this._listener = {\n        moveend: map.on('moveend', this.viewChange.bind(this)),\n        size: map.on('change:size', this.overflow.bind(this))\n      }\n      // Listen to a layer group\n      if (this._layerGroup) {\n        this._listener.change = this._layerGroup.getLayers().on('change:length', this.drawPanel.bind(this))\n      } else {\n        //Listen to all layers\n        this._listener.change = map.getLayerGroup().getLayers().on('change:length', this.drawPanel.bind(this))\n      }\n    }\n  }\n  /** Show control\n   */\n  show() {\n    this.element.classList.add('ol-forceopen')\n    this.overflow()\n    this.dispatchEvent({ type: 'toggle', collapsed: false })\n  }\n  /** Hide control\n   */\n  hide() {\n    this.element.classList.remove('ol-forceopen')\n    this.overflow()\n    this.dispatchEvent({ type: 'toggle', collapsed: true })\n  }\n  /** Toggle control\n   */\n  toggle() {\n    this.element.classList.toggle(\"ol-forceopen\")\n    this.overflow()\n    this.dispatchEvent({ type: 'toggle', collapsed: !this.isOpen() })\n  }\n  /** Is control open\n   * @return {boolean}\n   */\n  isOpen() {\n    return this.element.classList.contains(\"ol-forceopen\")\n  }\n  /** Add a custom header\n   * @param {Element|string} html content html\n   */\n  setHeader(html) {\n    ol_ext_element.setHTML(this.header_, html)\n  }\n  /** Calculate overflow and add scrolls\n   * @param {Number} dir scroll direction -1|0|1|'+50%'|'-50%'\n   * @private\n   */\n  overflow(dir) {\n    if (this.button && !this._noScroll) {\n      // Nothing to show\n      if (ol_ext_element.hidden(this.panel_)) {\n        ol_ext_element.setStyle(this.element, { height: 'auto' })\n        return\n      }\n      // Calculate offset\n      var h = ol_ext_element.outerHeight(this.element)\n      var hp = ol_ext_element.outerHeight(this.panel_)\n      var dh = this.button.offsetTop + ol_ext_element.outerHeight(this.button)\n      //var dh = this.button.position().top + this.button.outerHeight(true);\n      var top = this.panel_.offsetTop - dh\n      if (hp > h - dh) {\n        // Bug IE: need to have an height defined\n        ol_ext_element.setStyle(this.element, { height: '100%' })\n        var li = this.panel_.querySelectorAll('li.ol-visible .li-content')[0]\n        var lh = li ? 2 * ol_ext_element.getStyle(li, 'height') : 0\n        switch (dir) {\n          case 1: top += lh; break\n          case -1: top -= lh; break\n          case \"+50%\": top += Math.round(h / 2); break\n          case \"-50%\": top -= Math.round(h / 2); break\n          default: break\n        }\n        // Scroll div\n        if (top + hp <= h - 3 * dh / 2) {\n          top = h - 3 * dh / 2 - hp\n          ol_ext_element.hide(this.botv)\n        } else {\n          ol_ext_element.show(this.botv)\n        }\n        if (top >= 0) {\n          top = 0\n          ol_ext_element.hide(this.topv)\n        } else {\n          ol_ext_element.show(this.topv)\n        }\n        // Scroll ?\n        ol_ext_element.setStyle(this.panel_, { top: top + \"px\" })\n        return true\n      } else {\n        ol_ext_element.setStyle(this.element, { height: \"auto\" })\n        ol_ext_element.setStyle(this.panel_, { top: 0 })\n        ol_ext_element.hide(this.botv)\n        ol_ext_element.hide(this.topv)\n        return false\n      }\n    }\n    else\n      return false\n  }\n  /** Set the layer associated with a li\n   * @param {Element} li\n   * @param {ol.layer} layer\n   * @private\n   */\n  _setLayerForLI(li, layer) {\n    var listeners = []\n    if (layer.getLayers) {\n      listeners.push(layer.getLayers().on('change:length', this.drawPanel.bind(this)))\n    }\n    if (li) {\n      // Handle opacity change\n      listeners.push(layer.on('change:opacity', (function () {\n        this.setLayerOpacity(layer, li)\n      }).bind(this)))\n      // Handle visibility chage\n      listeners.push(layer.on('change:visible', (function () {\n        this.setLayerVisibility(layer, li)\n      }).bind(this)))\n    }\n    // Other properties\n    listeners.push(layer.on('propertychange', (function (e) {\n      if (e.key === 'displayInLayerSwitcher'\n        || e.key === 'openInLayerSwitcher'\n        || e.key === 'title'\n        || e.key === 'name') {\n        this.drawPanel(e)\n      }\n    }).bind(this)))\n    this._layers.push({ li: li, layer: layer, listeners: listeners })\n  }\n  /** Set opacity for a layer\n   * @param {ol.layer.Layer} layer\n   * @param {Element} li the list element\n   * @private\n   */\n  setLayerOpacity(layer, li) {\n    var i = li.querySelector('.layerswitcher-opacity-cursor')\n    if (i){\n      i.style.left = (layer.getOpacity() * 100) + \"%\"\n    }\n    this.dispatchEvent({ type: 'layer:opacity', layer: layer })\n  }\n  /** Set visibility for a layer\n   * @param {ol.layer.Layer} layer\n   * @param {Element} li the list element\n   * @api\n   */\n  setLayerVisibility(layer, li) {\n    var i = li.querySelector('.ol-visibility')\n    if (i) {\n      i.checked = layer.getVisible()\n    }\n    if (layer.getVisible()){\n      li.classList.add('ol-visible')\n    } else{\n      li.classList.remove('ol-visible')\n    }\n    this.dispatchEvent({ type: 'layer:visible', layer: layer })\n  }\n  /** Clear layers associated with li\n   * @private\n   */\n  _clearLayerForLI() {\n    this._layers.forEach(function (li) {\n      li.listeners.forEach(function (l) {\n        ol_Observable_unByKey(l)\n      })\n    })\n    this._layers = []\n  }\n  /** Get the layer associated with a li\n   * @param {Element} li\n   * @return {ol.layer}\n   * @private\n   */\n  _getLayerForLI(li) {\n    for (var i = 0, l; l = this._layers[i]; i++) {\n      if (l.li === li) {\n        return l.layer\n      }\n    }\n    return null\n  }\n  /**\n   * On view change hide layer depending on resolution / extent\n   * @private\n   */\n  viewChange() {\n    this.panel_.querySelectorAll('li').forEach(function (li) {\n      var l = this._getLayerForLI(li)\n      if (l) {\n        if (this.testLayerVisibility(l)) {\n          li.classList.remove('ol-layer-hidden')\n        } else {\n          li.classList.add('ol-layer-hidden')\n        }\n      }\n    }.bind(this))\n  }\n  /** Get control panel\n   * @api\n   */\n  getPanel() {\n    return this.panelContainer_\n  }\n  /** Draw the panel control (prevent multiple draw due to layers manipulation on the map with a delay function)\n   * @api\n   */\n  drawPanel() {\n    if (!this.getMap())\n      return\n    var self = this\n    // Multiple event simultaneously / draw once => put drawing in the event queue\n    this.dcount++\n    setTimeout(function () { self.drawPanel_() }, this.get('drawDelay') || 0)\n  }\n  /** Delayed draw panel control\n   * @private\n   */\n  drawPanel_() {\n    if (--this.dcount || this.dragging_) {\n      return\n    }\n    var scrollTop = this.panelContainer_.scrollTop\n\n    // Remove existing layers\n    this._clearLayerForLI()\n    this.panel_.querySelectorAll('li').forEach(function (li) {\n      if (!li.classList.contains('ol-header')) li.remove()\n    }.bind(this))\n    // Draw list\n    if (this._layerGroup) {\n      this.drawList(this.panel_, this._layerGroup.getLayers())\n    } else if (this.getMap()) {\n      this.drawList(this.panel_, this.getMap().getLayers())\n    }\n    // Reset scrolltop\n    this.panelContainer_.scrollTop = scrollTop\n    // Counter\n    if (this.counter) {\n      this.counter.innerHTML = this.panel_.parentNode.querySelectorAll('ul.panel > li:not(.ol-header)').length;\n    }\n  }\n  /** Change layer visibility according to the baselayer option\n   * @param {ol.layer}\n   * @param {Array<ol.layer>} related layers\n   * @private\n   */\n  switchLayerVisibility(l, layers) {\n    if (!l.get('baseLayer')) {\n      l.setVisible(!l.getVisible())\n    } else {\n      if (!l.getVisible()) {\n        l.setVisible(true)\n      }\n      layers.forEach(function (li) {\n        if (l !== li && li.get('baseLayer') && li.getVisible()) {\n          li.setVisible(false)\n        }\n      })\n    }\n  }\n  /** Check if layer is on the map (depending on resolution / zoom and extent)\n   * @param {ol.layer}\n   * @return {boolean}\n   * @private\n   */\n  testLayerVisibility(layer) {\n    if (!this.getMap())\n      return true\n    var res = this.getMap().getView().getResolution()\n    var zoom = this.getMap().getView().getZoom()\n    // Calculate visibility on resolution or zoom\n    if (layer.getMaxResolution() <= res || layer.getMinResolution() >= res) {\n      return false\n    } else if (layer.getMinZoom && (layer.getMinZoom() >= zoom || layer.getMaxZoom() < zoom)) {\n      return false\n    } else {\n      // Check extent\n      var ex0 = layer.getExtent()\n      if (ex0) {\n        var ex = this.getMap().getView().calculateExtent(this.getMap().getSize())\n        return ol_extent_intersects(ex, ex0)\n      }\n      return true\n    }\n  }\n  /** Start ordering the list\n  *\t@param {event} e drag event\n  *\t@private\n  */\n  dragOrdering_(e) {\n    e.stopPropagation()\n    e.preventDefault()\n    // Get params\n    var self = this\n    var elt = e.currentTarget.parentNode.parentNode\n    var start = true\n    var panel = this.panel_\n    var pageY\n    var pageY0 = e.pageY\n      || (e.touches && e.touches.length && e.touches[0].pageY)\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY)\n    var target, dragElt\n    var layer, group\n    elt.parentNode.classList.add('drag')\n\n    // Stop ordering\n    function stop() {\n      if (target) {\n        // Get drag on parent\n        var drop = layer\n        var isSelected = self.getSelection() === drop\n        if (drop && target) {\n          var collection\n          if (group) {\n            collection = group.getLayers()\n          } else {\n            collection = self._layerGroup ? self._layerGroup.getLayers() : self.getMap().getLayers()\n          }\n          var layers = collection.getArray()\n          // Switch layers\n          for (var i = 0; i < layers.length; i++) {\n            if (layers[i] == drop) {\n              collection.removeAt(i)\n              break\n            }\n          }\n          for (var j = 0; j < layers.length; j++) {\n            if (layers[j] === target) {\n              if (i > j) {\n                collection.insertAt(j, drop)\n              } else {\n                collection.insertAt(j + 1, drop)\n              }\n              break\n            }\n          }\n        }\n        if (isSelected) self.selectLayer(drop)\n\n        self.dispatchEvent({ type: \"reorder-end\", layer: drop, group: group })\n      }\n\n      elt.parentNode.querySelectorAll('li').forEach(function (li) {\n        li.classList.remove('dropover')\n        li.classList.remove('dropover-after')\n        li.classList.remove('dropover-before')\n      })\n      elt.classList.remove(\"drag\")\n      elt.parentNode.classList.remove(\"drag\")\n      self.element.classList.remove('drag')\n      if (dragElt)\n        dragElt.remove()\n\n      ol_ext_element.removeListener(document, 'mousemove touchmove', move)\n      ol_ext_element.removeListener(document, 'mouseup touchend touchcancel', stop)\n    }\n\n    // Ordering\n    function move(e) {\n      // First drag (more than 2 px) => show drag element (ghost)\n      pageY = e.pageY\n        || (e.touches && e.touches.length && e.touches[0].pageY)\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY)\n      if (start && Math.abs(pageY0 - pageY) > 2) {\n        start = false\n        elt.classList.add(\"drag\")\n        layer = self._getLayerForLI(elt)\n        target = false\n        group = self._getLayerForLI(elt.parentNode.parentNode)\n        // Ghost div\n        dragElt = ol_ext_element.create('LI', {\n          className: 'ol-dragover',\n          html: elt.innerHTML,\n          style: {\n            position: \"absolute\",\n            \"z-index\": 10000,\n            left: elt.offsetLeft,\n            opacity: 0.5,\n            width: ol_ext_element.outerWidth(elt),\n            height: ol_ext_element.getStyle(elt, 'height'),\n          },\n          parent: panel\n        })\n        self.element.classList.add('drag')\n        self.dispatchEvent({ type: \"reorder-start\", layer: layer, group: group })\n      }\n      // Start a new drag sequence\n      if (!start) {\n        e.preventDefault()\n        e.stopPropagation()\n\n        // Ghost div\n        ol_ext_element.setStyle(dragElt, { top: pageY - ol_ext_element.offsetRect(panel).top + panel.scrollTop + 5 })\n\n        var li\n        if (!e.touches) {\n          li = e.target\n          \n          // Get the HTML node within web component on click drag\n          if(e.target.shadowRoot){\n            li = e.composedPath()[0]\n          }\n        } else {\n          li = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\n          \n          //Get actual HTML node within web component on touch drag\n          while(li.shadowRoot){\n            li = li.shadowRoot.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY)\n          }\n        }\n        if (li.classList.contains(\"ol-switcherbottomdiv\")) {\n          self.overflow(-1)\n        } else if (li.classList.contains(\"ol-switchertopdiv\")) {\n          self.overflow(1)\n        }\n        // Get associated li\n        while (li && li.tagName !== 'LI') {\n          li = li.parentNode\n        }\n        if (!li || !li.classList.contains('dropover')) {\n          elt.parentNode.querySelectorAll('li').forEach(function (li) {\n            li.classList.remove('dropover')\n            li.classList.remove('dropover-after')\n            li.classList.remove('dropover-before')\n          })\n        }\n        if (li && li.parentNode.classList.contains('drag') && li !== elt) {\n          target = self._getLayerForLI(li)\n          // Don't mix layer level\n          if (target && !target.get('allwaysOnTop') == !layer.get('allwaysOnTop')) {\n            li.classList.add(\"dropover\")\n            li.classList.add((elt.offsetTop < li.offsetTop) ? 'dropover-after' : 'dropover-before')\n          } else {\n            target = false\n          }\n          ol_ext_element.show(dragElt)\n        } else {\n          target = false\n          if (li === elt)\n            ol_ext_element.hide(dragElt)\n          else\n            ol_ext_element.show(dragElt)\n        }\n\n        if (!target)\n          dragElt.classList.add(\"forbidden\")\n        else\n          dragElt.classList.remove(\"forbidden\")\n      }\n    }\n\n    // Start ordering\n    ol_ext_element.addListener(document, 'mousemove touchmove', move)\n    ol_ext_element.addListener(document, 'mouseup touchend touchcancel', stop)\n  }\n  /** Change opacity on drag\n  *\t@param {event} e drag event\n  *\t@private\n  */\n  dragOpacity_(e) {\n    e.stopPropagation()\n    e.preventDefault()\n    var self = this\n    // Register start params\n    var elt = e.target\n    var layer = this._getLayerForLI(elt.parentNode.parentNode.parentNode)\n    if (!layer)\n      return\n    var x = e.pageX\n      || (e.touches && e.touches.length && e.touches[0].pageX)\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX)\n    var start = ol_ext_element.getStyle(elt, 'left') - x\n    self.dragging_ = true\n\n    // stop dragging\n    function stop() {\n      ol_ext_element.removeListener(document, \"mouseup touchend touchcancel\", stop)\n      ol_ext_element.removeListener(document, \"mousemove touchmove\", move)\n      self.dragging_ = false\n    }\n    // On draggin\n    function move(e) {\n      var x = e.pageX\n        || (e.touches && e.touches.length && e.touches[0].pageX)\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX)\n      var delta = (start + x) / ol_ext_element.getStyle(elt.parentNode, 'width')\n      var opacity = Math.max(0, Math.min(1, delta))\n      ol_ext_element.setStyle(elt, { left: (opacity * 100) + \"%\" })\n      elt.parentNode.nextElementSibling.innerHTML = Math.round(opacity * 100)\n      layer.setOpacity(opacity)\n    }\n    // Register move\n    ol_ext_element.addListener(document, \"mouseup touchend touchcancel\", stop)\n    ol_ext_element.addListener(document, \"mousemove touchmove\", move)\n  }\n  /** Render a list of layer\n   * @param {Elemen} element to render\n   * @layers {Array{ol.layer}} list of layer to show\n   * @api stable\n   * @private\n   */\n  drawList(ul, collection) {\n    var self = this\n    var layers = collection.getArray()\n\n    // Change layer visibility\n    var setVisibility = function (e) {\n      e.stopPropagation()\n      e.preventDefault()\n      var l = self._getLayerForLI(this.parentNode.parentNode)\n      self.switchLayerVisibility(l, collection)\n      if (self.get('selection') && l.getVisible()) {\n        self.selectLayer(l)\n      }\n      if (self.onchangeCheck) {\n        self.onchangeCheck(l)\n      }\n    }\n    // Info button click\n    function onInfo(e) {\n      e.stopPropagation()\n      e.preventDefault()\n      var l = self._getLayerForLI(this.parentNode.parentNode)\n      self.oninfo(l)\n      self.dispatchEvent({ type: \"info\", layer: l })\n    }\n    // Zoom to extent button\n    function zoomExtent(e) {\n      e.stopPropagation()\n      e.preventDefault()\n      var l = self._getLayerForLI(this.parentNode.parentNode)\n      if (self.onextent) {\n        self.onextent(l)\n      } else {\n        self.getMap().getView().fit(l.getExtent(), self.getMap().getSize())\n      }\n      self.dispatchEvent({ type: \"extent\", layer: l })\n    }\n    // Remove a layer on trash click\n    function removeLayer(e) {\n      e.stopPropagation()\n      e.preventDefault()\n      var li = this.parentNode.parentNode.parentNode.parentNode\n      var layer, group = self._getLayerForLI(li)\n      // Remove the layer from a group or from a map\n      if (group) {\n        layer = self._getLayerForLI(this.parentNode.parentNode)\n        group.getLayers().remove(layer)\n        if (group.getLayers().getLength() == 0 && !group.get('noSwitcherDelete')) {\n          removeLayer.call(li.querySelectorAll('.layerTrash')[0], e)\n        }\n      } else {\n        li = this.parentNode.parentNode\n        self.getMap().removeLayer(self._getLayerForLI(li))\n      }\n    }\n\n    // Create a list for a layer\n    function createLi(layer) {\n      if (!this.displayInLayerSwitcher(layer)) {\n        this._setLayerForLI(null, layer)\n        return\n      }\n\n      var li = ol_ext_element.create('LI', {\n        className: (layer.getVisible() ? \"ol-visible \" : \" \") + (layer.get('baseLayer') ? \"baselayer\" : \"\"),\n        parent: ul\n      })\n      this._setLayerForLI(li, layer)\n      if (this._selectedLayer === layer) {\n        li.classList.add('ol-layer-select')\n      }\n\n      var layer_buttons = ol_ext_element.create('DIV', {\n        className: 'ol-layerswitcher-buttons',\n        parent: li\n      })\n\n      // Content div\n      var d = ol_ext_element.create('DIV', {\n        className: 'li-content',\n        parent: li\n      })\n\n      // Visibility\n      var input = ol_ext_element.create('INPUT', {\n        type: layer.get('baseLayer') ? 'radio' : 'checkbox',\n        className: 'ol-visibility',\n        checked: layer.getVisible(),\n        click: function(e) {\n          setVisibility.bind(this)(e)\n          setTimeout(function() { e.target.checked = layer.getVisible(); });\n        },\n        on: {\n          // Set opacity on keydown\n          keydown: function(e) {\n            switch (e.key) {\n              // Change opacity on arrow\n              case 'ArrowLeft':\n              case 'ArrowRight': {\n                e.preventDefault();\n                e.stopPropagation();\n                var delta = (e.key==='ArrowLeft' ? -0.1 : 0.1);\n                var opacity = Math.min(1, Math.max(0, layer.getOpacity() + delta))\n                layer.setOpacity(opacity)\n                break;\n              }\n              // Select on enter\n              case 'Enter': {\n                if (self.get('selection')) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  self.selectLayer(layer)\n                }\n                break;\n              }\n              // Expend \n              case '-': \n              case '+': {\n                if (layer.getLayers) {\n                  this._focus = layer;\n                  layer.set(\"openInLayerSwitcher\", !layer.get(\"openInLayerSwitcher\"))\n                }\n              }\n              // Move up dans down\n              // fallthrough\n              case 'ArrowUp':\n              case 'ArrowDown': {\n                if (e.ctrlKey && this.reordering) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  var pos = collection.getArray().indexOf(layer);\n                  if (pos > -1) {\n                    if (e.key === 'ArrowDown') {\n                      if (pos > 0) {\n                        collection.remove(layer);\n                        collection.insertAt(pos-1, layer)\n                        self._focus = layer\n                        self.dispatchEvent({ type: \"reorder-end\", layer: layer })\n                      }\n                    } else {\n                      if (pos < collection.getLength()-1) {\n                        collection.remove(layer);\n                        collection.insertAt(pos+1, layer)\n                        self._focus = layer\n                        self.dispatchEvent({ type: \"reorder-end\", layer: layer })\n                      }\n                    }\n                  }\n                }\n                break;\n              }\n              default: {\n                var group = this._getLayerForLI(ul.parentNode)\n                this.dispatchEvent({ type: 'layer:keydown', key: e.key, group: group, li: li, layer: layer, originalEvent: e })\n              }\n            }\n          }.bind(this)\n        },\n        parent: d\n      })\n      // Focus on element\n      if (layer === self._focus) {\n        input.focus();\n        self.overflow()\n      }\n      // Label\n      var label = ol_ext_element.create('LABEL', {\n        title: layer.get('title') || layer.get('name'),\n        click: setVisibility,\n        style: {\n          userSelect: 'none'\n        },\n        parent: d\n      })\n      label.addEventListener('selectstart', function () { return false })\n      ol_ext_element.create('SPAN', {\n        html: layer.get('title') || layer.get('name'),\n        click: function (e) {\n          if (this.get('selection')) {\n            e.stopPropagation()\n            this.selectLayer(layer)\n          }\n        }.bind(this),\n        parent: label\n      })\n      \n      //  up/down\n      if (this.reordering) {\n        if ((i < layers.length - 1 && (layer.get(\"allwaysOnTop\") || !layers[i + 1].get(\"allwaysOnTop\")))\n          || (i > 0 && (!layer.get(\"allwaysOnTop\") || layers[i - 1].get(\"allwaysOnTop\")))) {\n          ol_ext_element.create('DIV', {\n            className: 'layerup ol-noscroll',\n            title: this.tip.up,\n            on: { 'mousedown touchstart': function (e) { self.dragOrdering_(e) } },\n            parent: layer_buttons\n          })\n        }\n      }\n\n      // Show/hide sub layers\n      if (layer.getLayers) {\n        var nb = 0\n        layer.getLayers().forEach(function (l) {\n          if (self.displayInLayerSwitcher(l))\n            nb++\n        })\n        if (nb) {\n          ol_ext_element.create('DIV', {\n            className: layer.get(\"openInLayerSwitcher\") ? \"collapse-layers\" : \"expend-layers\",\n            title: this.tip.plus,\n            click: function () {\n              var l = self._getLayerForLI(this.parentNode.parentNode)\n              l.set(\"openInLayerSwitcher\", !l.get(\"openInLayerSwitcher\"))\n            },\n            parent: layer_buttons\n          })\n        }\n      }\n\n      // Info button\n      if (this.oninfo) {\n        ol_ext_element.create('DIV', {\n          className: 'layerInfo',\n          title: this.tip.info,\n          click: onInfo,\n          parent: layer_buttons\n        })\n      }\n      // Layer remove\n      if (this.hastrash && !layer.get(\"noSwitcherDelete\")) {\n        ol_ext_element.create('DIV', {\n          className: 'layerTrash',\n          title: this.tip.trash,\n          click: removeLayer,\n          parent: layer_buttons\n        })\n      }\n      // Layer extent\n      if (this.hasextent && layers[i].getExtent()) {\n        var ex = layers[i].getExtent()\n        if (ex.length == 4 && ex[0] < ex[2] && ex[1] < ex[3]) {\n          ol_ext_element.create('DIV', {\n            className: 'layerExtent',\n            title: this.tip.extent,\n            click: zoomExtent,\n            parent: layer_buttons\n          })\n        }\n      }\n\n      // Progress\n      if (this.show_progress && layer instanceof ol_layer_Tile) {\n        var p = ol_ext_element.create('DIV', {\n          className: 'layerswitcher-progress',\n          parent: d\n        })\n        this.setprogress_(layer)\n        layer.layerswitcher_progress = ol_ext_element.create('DIV', { parent: p })\n      }\n\n      // Opacity\n      var opacity = ol_ext_element.create('DIV', {\n        className: 'layerswitcher-opacity',\n        // Click on the opacity line\n        click: function (e) {\n          if (e.target !== this)\n            return\n          e.stopPropagation()\n          e.preventDefault()\n          var op = Math.max(0, Math.min(1, e.offsetX / ol_ext_element.getStyle(this, 'width')))\n          self._getLayerForLI(this.parentNode.parentNode).setOpacity(op)\n          this.parentNode.querySelectorAll('.layerswitcher-opacity-label')[0].innerHTML = Math.round(op * 100)\n        },\n        parent: d\n      })\n      // Start dragging\n      ol_ext_element.create('DIV', {\n        className: 'layerswitcher-opacity-cursor ol-noscroll',\n        style: { left: (layer.getOpacity() * 100) + \"%\" },\n        on: {\n          'mousedown touchstart': function (e) { self.dragOpacity_(e) }\n        },\n        parent: opacity\n      })\n      // Percent\n      ol_ext_element.create('DIV', {\n        className: 'layerswitcher-opacity-label',\n        html: Math.round(layer.getOpacity() * 100),\n        parent: d\n      })\n\n      // Layer group\n      if (layer.getLayers) {\n        li.classList.add('ol-layer-group')\n        if (layer.get(\"openInLayerSwitcher\") === true) {\n          var ul2 = ol_ext_element.create('UL', {\n            parent: li\n          })\n          this.drawList(ul2, layer.getLayers())\n        }\n      }\n      li.classList.add(this.getLayerClass(layer))\n\n      // Dispatch a dralist event to allow customisation\n      this.dispatchEvent({ type: 'drawlist', layer: layer, li: li })\n    }\n\n    // Add the layer list\n    for (var i = layers.length - 1; i >= 0; i--) {\n      createLi.call(this, layers[i])\n    }\n\n    this.viewChange()\n\n    if (ul === this.panel_) {\n      this.overflow('')\n      // Remove focus\n      this._focus = null;\n    }\n\n  }\n  /** Select a layer\n   * @param {ol.layer.Layer} layer\n   * @returns {string} the layer classname\n   * @api\n   */\n  getLayerClass(layer) {\n    if (!layer)\n      return 'none'\n    if (layer.getLayers)\n      return 'ol-layer-group'\n    if (layer instanceof ol_layer_Vector)\n      return 'ol-layer-vector'\n    if (layer instanceof ol_layer_VectorTile)\n      return 'ol-layer-vectortile'\n    if (layer instanceof ol_layer_Tile)\n      return 'ol-layer-tile'\n    if (layer instanceof ol_layer_Image)\n      return 'ol-layer-image'\n    if (layer instanceof ol_layer_Heatmap)\n      return 'ol-layer-heatmap'\n    /* ol < 6 compatibility VectorImage is not defined */\n    // if (layer instanceof ol_layer_VectorImage) return 'ol-layer-vectorimage';\n    if (layer.getFeatures)\n      return 'ol-layer-vectorimage'\n    /* */\n    return 'unknown'\n  }\n  /** Select a layer\n   * @param {ol.layer.Layer} layer\n   * @api\n   */\n  selectLayer(layer, silent) {\n    if (!layer) {\n      if (!this.getMap())\n        return\n      layer = this.getMap().getLayers().item(this.getMap().getLayers().getLength() - 1)\n    }\n    this._selectedLayer = layer\n    // Has focus ?\n    if (this.element.querySelector('input.ol-visibility:focus')) {\n      this._focus = layer;\n    }\n    // Draw\n    this.drawPanel()\n    if (!silent) {\n      this.dispatchEvent({ type: 'select', layer: layer })\n    }\n  }\n  /** Get selected layer\n   * @returns {ol.layer.Layer}\n   */\n  getSelection() {\n    return this._selectedLayer\n  }\n  /** Handle progress bar for a layer\n  *\t@private\n  */\n  setprogress_(layer) {\n    if (!layer.layerswitcher_progress) {\n      var loaded = 0\n      var loading = 0\n      var draw = function () {\n        if (loading === loaded) {\n          loading = loaded = 0\n          ol_ext_element.setStyle(layer.layerswitcher_progress, { width: 0 }) // layer.layerswitcher_progress.width(0);\n        } else {\n          ol_ext_element.setStyle(layer.layerswitcher_progress, { width: (loaded / loading * 100).toFixed(1) + '%' }) // layer.layerswitcher_progress.css('width', (loaded / loading * 100).toFixed(1) + '%');\n        }\n      }\n      layer.getSource().on('tileloadstart', function () {\n        loading++\n        draw()\n      })\n      layer.getSource().on('tileloadend', function () {\n        loaded++\n        draw()\n      })\n      layer.getSource().on('tileloaderror', function () {\n        loaded++\n        draw()\n      })\n    }\n  }\n}\n\n/** List of tips for internationalization purposes\n*/\nol_control_LayerSwitcher.prototype.tip = {\n  up: \"up/down\",\n  down: \"down\",\n  info: \"informations...\",\n  extent: \"zoom to extent\",\n  trash: \"remove layer\",\n  plus: \"expand/shrink\"\n};\n\nexport default ol_control_LayerSwitcher\n"],"names":["Kinetic","constructor","decay","minVelocity","delay","this","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","begin","length","update","x","y","push","Date","now","end","lastIndex","firstIndex","duration","dx","dy","Math","atan2","sqrt","getDistance","getAngle","IDLE","LOADING","LOADED","ERROR","EMPTY","MapBrowserEvent","type","map","originalEvent","dragging","frameState","activePointers","super","pixel_","coordinate_","undefined","pixel","getEventPixel","coordinate","getCoordinateFromPixel","preventDefault","stopPropagation","ol_ext_input_Base","ol_Object","options","tout","input","document","createElement","setAttribute","min","max","step","parent","appendChild","disabled","checked","val","value","hidden","classList","add","addEventListener","element","bind","clearTimeout","setTimeout","remove","_listenDrag","elt","cback","handle","e","moving","listen","removeEventListener","target","setValue","v","dispatchEvent","Event","getValue","getInputElement","ol_ext_input_Checkbox","label","html","Element","innerHTML","className","trim","parentNode","insertBefore","after","createTextNode","isChecked","ol_ext_input_Switch","ol_ext_input_Radio","ol_ext_element","tagName","attr","toLowerCase","test","innerText","text","i","create","setStyle","style","addListener","on","click","change","opt","Object","assign","name","eventType","fn","useCapture","split","forEach","display","getStyle","el","st","s","styleProp","defaultView","ownerDocument","getComputedStyle","replace","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","left","oldRsLeft","runtimeStyle","pixelLeft","parseInt","offsetHeight","offsetWidth","rect","getBoundingClientRect","top","window","pageYOffset","documentElement","scrollTop","body","pageXOffset","scrollLeft","height","bottom","width","right","offset","getOffset","r","offsetParent","fixed","gleft","gtop","getRect","offsetLeft","offsetTop","d","scale","isbar","scrollContainer","scrollbar","pos","speed","dt","onmove","page","vertical","scroll","updateCounter","updateMinibar","updateMinibarDelay","pheight","clientHeight","scrollHeight","onPointerDown","contains","onPointerMove","onPointerUp","delta","round","animate","to","minibar","init","b","mousewheel","onMouseWheel","removeListener","wheelDelta","detail","refresh","eventName","event","CustomEvent","createEvent","initCustomEvent","cursor","getTargetElement","asImageLike","data","Image","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","asArrayLike","Uint8Array","Uint8ClampedArray","Float32Array","DataView","sharedContext","toArray","image","willReadFrequently","canvas","clearRect","drawImage","getImageData","defaultSize","DataTile","state","tileCoord","transition","interpolate","loader_","loader","data_","error_","size_","size","getSize","imageData","getData","getError","load","changed","self","then","catch","error","rgb","channel","alias","ADD","REMOVE","ImageTile","src","crossOrigin","tileLoadFunction","crossOrigin_","src_","key","image_","unlisten_","tileLoadFunction_","getImage","setImage","unlistenImage_","handleImageError_","getBlankImage","handleImageLoad_","naturalWidth","naturalHeight","ctx","fillStyle","fillRect","LAYERGROUP","SIZE","TARGET","VIEW","listenImage","loadHandler","errorHandler","img","listening","decoding","loaded","listenerKeys","LOAD","decode","Promise","resolve","reject","handleLoad","unlisten","handleError","Error","decodeFallback","complete","Property","LENGTH","CollectionEvent","index","Collection","array","once","un","unique_","unique","array_","ii","assertUnique_","updateLength_","clear","getLength","pop","extend","arr","f","getArray","item","get","insertAt","elem","splice","removeAt","n","prev","setAt","set","except","earcut","holeIndices","dim","minX","minY","maxX","maxY","invSize","hasHoles","outerLen","outerNode","linkedList","triangles","next","eliminateHoles","earcutLinked","start","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","again","p","steiner","area","ear","pass","indexCurve","stop","isEarHashed","isEar","cureLocalIntersections","splitEarcut","a","c","ax","bx","cx","ay","by","cy","x0","y0","x1","y1","pointInTriangle","minZ","zOrder","maxZ","prevZ","nextZ","z","intersects","locallyInside","isValidDiagonal","splitPolygon","len","list","queue","getLeftmost","sort","compareX","eliminateHole","hole","bridge","findHoleBridge","bridgeReverse","m","hx","hy","qx","Infinity","tan","mx","my","tanMin","abs","sectorContainsSector","sortLinked","q","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","p1","p2","q1","q2","o1","sign","o2","o3","o4","onSegment","num","inside","a2","Node","b2","an","bp","sum","j","module","exports","deviation","polygonArea","trianglesArea","flatten","result","vertices","holes","dimensions","holeIndex","SINGLECLICK","CLICK","DBLCLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","colors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","freeze","baseHues","parse","cstr","space","parts","alpha","values","String","slice","base","isShort","exec","dims","shift","parseFloat","endsWith","PI","match","join","hsl","t1","t2","t3","h","l","rgba","color","Array","isArray","raw","arguments","Number","parsed","g","POSTRENDER","MOVESTART","MOVEEND","LOADSTART","LOADEND","Feature","geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","geometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","getId","getStyleFunction","handleGeometryChange_","CHANGE","createStyleFunction","setId","id","removeChangeListener","obj","styles","MapBrowserEventHandler","moveTolerance","map_","clickTimeoutId_","emulateClicks_","dragging_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","element_","pointerdownListenerKey_","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","relayMoveEvent_","boundHandleTouchMove_","handleTouchMove_","TOUCHMOVE","passive","emulateClick_","pointerEvent","newEvent","updateActivePointers_","pointerId","handlePointerUp_","defaultPrevented","isMouseActionButton_","button","PointerEvent","defineProperty","writable","doc","getOwnerDocument","handlePointerMove_","getRootNode","isMoving_","cancelable","clientX","clientY","disposeInternal","Disposable","disposed","dispose","luv","xyz","arg","o","_u","_v","u","xn","yn","zn","vn","k","whitepoint","pow","yr","lchuv","hr","cos","sin","A","C","D50","D55","D65","D75","F2","F7","F11","E","_xyz","MapEvent","ol_control_LayerSwitcher","switcherClass","dcount","show_progress","oninfo","onextent","hasextent","extent","hastrash","trash","reordering","_layers","_layerGroup","layerGroup","getLayers","onchangeCheck","displayInLayerSwitcher","collapsed","counter","class","toggle","overflow","mouseover","noScroll","topv","botv","_noScroll","panel_","panelContainer_","header_","drawDelay","selection","mbar","scrollDiv","layer","setMap","drawPanel","_listener","moveend","viewChange","getLayerGroup","show","hide","isOpen","setHeader","setHTML","dir","outerHeight","hp","dh","li","querySelectorAll","lh","_setLayerForLI","listeners","setLayerOpacity","setLayerVisibility","querySelector","getOpacity","getVisible","_clearLayerForLI","_getLayerForLI","testLayerVisibility","getPanel","getMap","drawPanel_","drawList","switchLayerVisibility","layers","setVisible","res","getView","getResolution","zoom","getZoom","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","ex0","getExtent","ex","calculateExtent","dragOrdering_","pageY","dragElt","group","currentTarget","panel","pageY0","touches","changedTouches","drop","isSelected","getSelection","collection","selectLayer","move","position","opacity","outerWidth","offsetRect","elementFromPoint","shadowRoot","composedPath","dragOpacity_","pageX","nextElementSibling","setOpacity","ul","setVisibility","onInfo","zoomExtent","fit","removeLayer","call","createLi","_selectedLayer","layer_buttons","keydown","_focus","ctrlKey","indexOf","focus","title","userSelect","tip","up","nb","plus","info","setprogress_","layerswitcher_progress","op","offsetX","ul2","getLayerClass","getFeatures","silent","loading","draw","toFixed","getSource","prototype","down"],"ignoreList":[],"sourceRoot":""}